const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-COg8zA6_.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-DIsKKAr6.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-CQuJRKB7.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-Df6gBCsv.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-C4v5yVp_.js","assets/ProteinSnacks-DV-4NfjU.js","assets/DailyMotivation-DghTdmCV.js","assets/CircuitDashboard-27dFKEri.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-PbxkMrRD.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-BOdjyxn3.js","assets/Leaderboard-DUGNGeOY.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Km={exports:{}},Cc={};var U0;function AE(){if(U0)return Cc;U0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:u}}return Cc.Fragment=e,Cc.jsx=n,Cc.jsxs=n,Cc}var z0;function IE(){return z0||(z0=1,Km.exports=AE()),Km.exports}var i=IE(),Ym={exports:{}},Mt={};var F0;function DE(){if(F0)return Mt;F0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),k=Symbol.iterator;function P(V){return V===null||typeof V!="object"?null:(V=k&&V[k]||V["@@iterator"],typeof V=="function"?V:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,L={};function re(V,G,ge){this.props=V,this.context=G,this.refs=L,this.updater=ge||W}re.prototype.isReactComponent={},re.prototype.setState=function(V,G){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,G,"setState")},re.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function X(){}X.prototype=re.prototype;function he(V,G,ge){this.props=V,this.context=G,this.refs=L,this.updater=ge||W}var ke=he.prototype=new X;ke.constructor=he,B(ke,re.prototype),ke.isPureReactComponent=!0;var ze=Array.isArray;function Ae(){}var I={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(V,G,ge){var Se=ge.ref;return{$$typeof:s,type:V,key:G,ref:Se!==void 0?Se:null,props:ge}}function D(V,G){return C(V.type,G,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function H(V){var G={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ge){return G[ge]})}var A=/\/+/g;function We(V,G){return typeof V=="object"&&V!==null&&V.key!=null?H(""+V.key):G.toString(36)}function jt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Ae,Ae):(V.status="pending",V.then(function(G){V.status==="pending"&&(V.status="fulfilled",V.value=G)},function(G){V.status==="pending"&&(V.status="rejected",V.reason=G)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,G,ge,Se,Ve){var Me=typeof V;(Me==="undefined"||Me==="boolean")&&(V=null);var nt=!1;if(V===null)nt=!0;else switch(Me){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(V.$$typeof){case s:case e:nt=!0;break;case w:return nt=V._init,Y(nt(V._payload),G,ge,Se,Ve)}}if(nt)return Ve=Ve(V),nt=Se===""?"."+We(V,0):Se,ze(Ve)?(ge="",nt!=null&&(ge=nt.replace(A,"$&/")+"/"),Y(Ve,G,ge,"",function(Wt){return Wt})):Ve!=null&&(M(Ve)&&(Ve=D(Ve,ge+(Ve.key==null||V&&V.key===Ve.key?"":(""+Ve.key).replace(A,"$&/")+"/")+nt)),G.push(Ve)),1;nt=0;var ht=Se===""?".":Se+":";if(ze(V))for(var pt=0;pt<V.length;pt++)Se=V[pt],Me=ht+We(Se,pt),nt+=Y(Se,G,ge,Me,Ve);else if(pt=P(V),typeof pt=="function")for(V=pt.call(V),pt=0;!(Se=V.next()).done;)Se=Se.value,Me=ht+We(Se,pt++),nt+=Y(Se,G,ge,Me,Ve);else if(Me==="object"){if(typeof V.then=="function")return Y(jt(V),G,ge,Se,Ve);throw G=String(V),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return nt}function Te(V,G,ge){if(V==null)return V;var Se=[],Ve=0;return Y(V,Se,"","",function(Me){return G.call(ge,Me,Ve++)}),Se}function De(V){if(V._status===-1){var G=V._result;G=G(),G.then(function(ge){(V._status===0||V._status===-1)&&(V._status=1,V._result=ge)},function(ge){(V._status===0||V._status===-1)&&(V._status=2,V._result=ge)}),V._status===-1&&(V._status=0,V._result=G)}if(V._status===1)return V._result.default;throw V._result}var ct=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},rt={map:Te,forEach:function(V,G,ge){Te(V,function(){G.apply(this,arguments)},ge)},count:function(V){var G=0;return Te(V,function(){G++}),G},toArray:function(V){return Te(V,function(G){return G})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Mt.Activity=T,Mt.Children=rt,Mt.Component=re,Mt.Fragment=n,Mt.Profiler=o,Mt.PureComponent=he,Mt.StrictMode=a,Mt.Suspense=g,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},Mt.cache=function(V){return function(){return V.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(V,G,ge){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Se=B({},V.props),Ve=V.key;if(G!=null)for(Me in G.key!==void 0&&(Ve=""+G.key),G)!S.call(G,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&G.ref===void 0||(Se[Me]=G[Me]);var Me=arguments.length-2;if(Me===1)Se.children=ge;else if(1<Me){for(var nt=Array(Me),ht=0;ht<Me;ht++)nt[ht]=arguments[ht+2];Se.children=nt}return C(V.type,Ve,Se)},Mt.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Mt.createElement=function(V,G,ge){var Se,Ve={},Me=null;if(G!=null)for(Se in G.key!==void 0&&(Me=""+G.key),G)S.call(G,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(Ve[Se]=G[Se]);var nt=arguments.length-2;if(nt===1)Ve.children=ge;else if(1<nt){for(var ht=Array(nt),pt=0;pt<nt;pt++)ht[pt]=arguments[pt+2];Ve.children=ht}if(V&&V.defaultProps)for(Se in nt=V.defaultProps,nt)Ve[Se]===void 0&&(Ve[Se]=nt[Se]);return C(V,Me,Ve)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(V){return{$$typeof:p,render:V}},Mt.isValidElement=M,Mt.lazy=function(V){return{$$typeof:w,_payload:{_status:-1,_result:V},_init:De}},Mt.memo=function(V,G){return{$$typeof:y,type:V,compare:G===void 0?null:G}},Mt.startTransition=function(V){var G=I.T,ge={};I.T=ge;try{var Se=V(),Ve=I.S;Ve!==null&&Ve(ge,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(Ae,ct)}catch(Me){ct(Me)}finally{G!==null&&ge.types!==null&&(G.types=ge.types),I.T=G}},Mt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Mt.use=function(V){return I.H.use(V)},Mt.useActionState=function(V,G,ge){return I.H.useActionState(V,G,ge)},Mt.useCallback=function(V,G){return I.H.useCallback(V,G)},Mt.useContext=function(V){return I.H.useContext(V)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(V,G){return I.H.useDeferredValue(V,G)},Mt.useEffect=function(V,G){return I.H.useEffect(V,G)},Mt.useEffectEvent=function(V){return I.H.useEffectEvent(V)},Mt.useId=function(){return I.H.useId()},Mt.useImperativeHandle=function(V,G,ge){return I.H.useImperativeHandle(V,G,ge)},Mt.useInsertionEffect=function(V,G){return I.H.useInsertionEffect(V,G)},Mt.useLayoutEffect=function(V,G){return I.H.useLayoutEffect(V,G)},Mt.useMemo=function(V,G){return I.H.useMemo(V,G)},Mt.useOptimistic=function(V,G){return I.H.useOptimistic(V,G)},Mt.useReducer=function(V,G,ge){return I.H.useReducer(V,G,ge)},Mt.useRef=function(V){return I.H.useRef(V)},Mt.useState=function(V){return I.H.useState(V)},Mt.useSyncExternalStore=function(V,G,ge){return I.H.useSyncExternalStore(V,G,ge)},Mt.useTransition=function(){return I.H.useTransition()},Mt.version="19.2.4",Mt}var H0;function ag(){return H0||(H0=1,Ym.exports=DE()),Ym.exports}var x=ag(),Qm={exports:{}},Ac={},Xm={exports:{}},Jm={};var q0;function ME(){return q0||(q0=1,(function(s){function e(Y,Te){var De=Y.length;Y.push(Te);e:for(;0<De;){var ct=De-1>>>1,rt=Y[ct];if(0<o(rt,Te))Y[ct]=Te,Y[De]=rt,De=ct;else break e}}function n(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var Te=Y[0],De=Y.pop();if(De!==Te){Y[0]=De;e:for(var ct=0,rt=Y.length,V=rt>>>1;ct<V;){var G=2*(ct+1)-1,ge=Y[G],Se=G+1,Ve=Y[Se];if(0>o(ge,De))Se<rt&&0>o(Ve,ge)?(Y[ct]=Ve,Y[Se]=De,ct=Se):(Y[ct]=ge,Y[G]=De,ct=G);else if(Se<rt&&0>o(Ve,De))Y[ct]=Ve,Y[Se]=De,ct=Se;else break e}}return Te}function o(Y,Te){var De=Y.sortIndex-Te.sortIndex;return De!==0?De:Y.id-Te.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],w=1,T=null,k=3,P=!1,W=!1,B=!1,L=!1,re=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function ke(Y){for(var Te=n(y);Te!==null;){if(Te.callback===null)a(y);else if(Te.startTime<=Y)a(y),Te.sortIndex=Te.expirationTime,e(g,Te);else break;Te=n(y)}}function ze(Y){if(B=!1,ke(Y),!W)if(n(g)!==null)W=!0,Ae||(Ae=!0,H());else{var Te=n(y);Te!==null&&jt(ze,Te.startTime-Y)}}var Ae=!1,I=-1,S=5,C=-1;function D(){return L?!0:!(s.unstable_now()-C<S)}function M(){if(L=!1,Ae){var Y=s.unstable_now();C=Y;var Te=!0;try{e:{W=!1,B&&(B=!1,X(I),I=-1),P=!0;var De=k;try{t:{for(ke(Y),T=n(g);T!==null&&!(T.expirationTime>Y&&D());){var ct=T.callback;if(typeof ct=="function"){T.callback=null,k=T.priorityLevel;var rt=ct(T.expirationTime<=Y);if(Y=s.unstable_now(),typeof rt=="function"){T.callback=rt,ke(Y),Te=!0;break t}T===n(g)&&a(g),ke(Y)}else a(g);T=n(g)}if(T!==null)Te=!0;else{var V=n(y);V!==null&&jt(ze,V.startTime-Y),Te=!1}}break e}finally{T=null,k=De,P=!1}Te=void 0}}finally{Te?H():Ae=!1}}}var H;if(typeof he=="function")H=function(){he(M)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,We=A.port2;A.port1.onmessage=M,H=function(){We.postMessage(null)}}else H=function(){re(M,0)};function jt(Y,Te){I=re(function(){Y(s.unstable_now())},Te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_next=function(Y){switch(k){case 1:case 2:case 3:var Te=3;break;default:Te=k}var De=k;k=Te;try{return Y()}finally{k=De}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(Y,Te){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var De=k;k=Y;try{return Te()}finally{k=De}},s.unstable_scheduleCallback=function(Y,Te,De){var ct=s.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?ct+De:ct):De=ct,Y){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=De+rt,Y={id:w++,callback:Te,priorityLevel:Y,startTime:De,expirationTime:rt,sortIndex:-1},De>ct?(Y.sortIndex=De,e(y,Y),n(g)===null&&Y===n(y)&&(B?(X(I),I=-1):B=!0,jt(ze,De-ct))):(Y.sortIndex=rt,e(g,Y),W||P||(W=!0,Ae||(Ae=!0,H()))),Y},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(Y){var Te=k;return function(){var De=k;k=Te;try{return Y.apply(this,arguments)}finally{k=De}}}})(Jm)),Jm}var $0;function PE(){return $0||($0=1,Xm.exports=ME()),Xm.exports}var Zm={exports:{}},Ss={};var W0;function LE(){if(W0)return Ss;W0=1;var s=ag();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:y,implementation:w}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ss.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Ss.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,w)},Ss.flushSync=function(g){var y=d.T,w=a.p;try{if(d.T=null,a.p=2,g)return g()}finally{d.T=y,a.p=w,a.d.f()}},Ss.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(g,y))},Ss.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Ss.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,T=p(w,y.crossOrigin),k=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?a.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:k,fetchPriority:P}):w==="script"&&a.d.X(g,{crossOrigin:T,integrity:k,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ss.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);a.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(g)},Ss.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,T=p(w,y.crossOrigin);a.d.L(g,w,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ss.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);a.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(g)},Ss.requestFormReset=function(g){a.d.r(g)},Ss.unstable_batchedUpdates=function(g,y){return g(y)},Ss.useFormState=function(g,y,w){return d.H.useFormState(g,y,w)},Ss.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ss.version="19.2.4",Ss}var G0;function OE(){if(G0)return Zm.exports;G0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Zm.exports=LE(),Zm.exports}var K0;function VE(){if(K0)return Ac;K0=1;var s=PE(),e=ag(),n=OE();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,l=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(l=r.return),t=r.return;while(t)}return r.tag===3?l:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(a(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(a(188));return r!==t?null:t}for(var l=t,c=r;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(a(188))}if(l.return!==c.return)l=f,c=m;else{for(var b=!1,N=f.child;N;){if(N===l){b=!0,l=f,c=m;break}if(N===c){b=!0,c=f,l=m;break}N=N.sibling}if(!b){for(N=m.child;N;){if(N===l){b=!0,l=m,c=f;break}if(N===c){b=!0,c=m,l=f;break}N=N.sibling}if(!b)throw Error(a(189))}}if(l.alternate!==c)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?t:r}function w(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=w(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,k=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),re=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),he=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),ze=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function H(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function We(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case re:return"Profiler";case L:return"StrictMode";case ze:return"Suspense";case Ae:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case he:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case ke:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return r=t.displayName||null,r!==null?r:We(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return We(t(r))}catch{}}return null}var jt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},ct=[],rt=-1;function V(t){return{current:t}}function G(t){0>rt||(t.current=ct[rt],ct[rt]=null,rt--)}function ge(t,r){rt++,ct[rt]=t.current,t.current=r}var Se=V(null),Ve=V(null),Me=V(null),nt=V(null);function ht(t,r){switch(ge(Me,r),ge(Ve,t),ge(Se,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?c0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=c0(r),t=u0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(Se),ge(Se,t)}function pt(){G(Se),G(Ve),G(Me)}function Wt(t){t.memoizedState!==null&&ge(nt,t);var r=Se.current,l=u0(r,t.type);r!==l&&(ge(Ve,t),ge(Se,l))}function pn(t){Ve.current===t&&(G(Se),G(Ve)),nt.current===t&&(G(nt),Sc._currentValue=De)}var Rt,wt;function ne(t){if(Rt===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Rt=r&&r[1]||"",wt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+t+wt}var gn=!1;function zt(t,r){if(!t||gn)return"";gn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(le){var te=le}Reflect.construct(t,[],_e)}else{try{_e.call()}catch(le){te=le}t.call(_e.prototype)}}else{try{throw Error()}catch(le){te=le}(_e=t())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(le){if(le&&te&&typeof le.stack=="string")return[le.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],N=m[1];if(b&&N){var O=b.split(`
`),ee=N.split(`
`);for(f=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(c===O.length||f===ee.length)for(c=O.length-1,f=ee.length-1;1<=c&&0<=f&&O[c]!==ee[f];)f--;for(;1<=c&&0<=f;c--,f--)if(O[c]!==ee[f]){if(c!==1||f!==1)do if(c--,f--,0>f||O[c]!==ee[f]){var me=`
`+O[c].replace(" at new "," at ");return t.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",t.displayName)),me}while(1<=c&&0<=f);break}}}finally{gn=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?ne(l):""}function vt(t,r){switch(t.tag){case 26:case 27:case 5:return ne(t.type);case 16:return ne("Lazy");case 13:return t.child!==r&&r!==null?ne("Suspense Fallback"):ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return zt(t.type,!1);case 11:return zt(t.type.render,!1);case 1:return zt(t.type,!0);case 31:return ne("Activity");default:return""}}function Ct(t){try{var r="",l=null;do r+=vt(t,l),l=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var at=Object.prototype.hasOwnProperty,He=s.unstable_scheduleCallback,Gt=s.unstable_cancelCallback,ns=s.unstable_shouldYield,At=s.unstable_requestPaint,Bt=s.unstable_now,Dn=s.unstable_getCurrentPriorityLevel,Ht=s.unstable_ImmediatePriority,wn=s.unstable_UserBlockingPriority,de=s.unstable_NormalPriority,ve=s.unstable_LowPriority,Ne=s.unstable_IdlePriority,Qe=s.log,qe=s.unstable_setDisableYieldValue,Pe=null,Ge=null;function Ue(t){if(typeof Qe=="function"&&qe(t),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(Pe,t)}catch{}}var Ie=Math.clz32?Math.clz32:st,we=Math.log,Ke=Math.LN2;function st(t){return t>>>=0,t===0?32:31-(we(t)/Ke|0)|0}var _t=256,qt=262144,Fe=4194304;function xt(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function St(t,r,l){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var N=c&134217727;return N!==0?(c=N&~m,c!==0?f=xt(c):(b&=N,b!==0?f=xt(b):l||(l=N&~t,l!==0&&(f=xt(l))))):(N=c&~m,N!==0?f=xt(N):b!==0?f=xt(b):l||(l=c&~t,l!==0&&(f=xt(l)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,l=r&-r,m>=l||m===32&&(l&4194048)!==0)?r:f}function Dt(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ft(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bt(){var t=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),t}function nn(t){for(var r=[],l=0;31>l;l++)r.push(t);return r}function $t(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function sn(t,r,l,c,f,m){var b=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var N=t.entanglements,O=t.expirationTimes,ee=t.hiddenUpdates;for(l=b&~l;0<l;){var me=31-Ie(l),_e=1<<me;N[me]=0,O[me]=-1;var te=ee[me];if(te!==null)for(ee[me]=null,me=0;me<te.length;me++){var le=te[me];le!==null&&(le.lane&=-536870913)}l&=~_e}c!==0&&on(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function on(t,r,l){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-Ie(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|l&261930}function un(t,r){var l=t.entangledLanes|=r;for(t=t.entanglements;l;){var c=31-Ie(l),f=1<<c;f&r|t[c]&r&&(t[c]|=r),l&=~f}}function Nn(t,r){var l=r&-r;return l=(l&42)!==0?1:z(l),(l&(t.suspendedLanes|r))!==0?0:l}function z(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ue(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function fe(){var t=Te.p;return t!==0?t:(t=window.event,t===void 0?32:D0(t.type))}function pe(t,r){var l=Te.p;try{return Te.p=t,r()}finally{Te.p=l}}var ce=Math.random().toString(36).slice(2),Be="__reactFiber$"+ce,ut="__reactProps$"+ce,Ye="__reactContainer$"+ce,lt="__reactEvents$"+ce,dt="__reactListeners$"+ce,rn="__reactHandles$"+ce,Es="__reactResources$"+ce,Bn="__reactMarker$"+ce;function Hn(t){delete t[Be],delete t[ut],delete t[lt],delete t[dt],delete t[rn]}function hn(t){var r=t[Be];if(r)return r;for(var l=t.parentNode;l;){if(r=l[Ye]||l[Be]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(t=y0(t);t!==null;){if(l=t[Be])return l;t=y0(t)}return r}t=l,l=t.parentNode}return null}function U(t){if(t=t[Be]||t[Ye]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function ie(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function E(t){var r=t[Es];return r||(r=t[Es]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function R(t){t[Bn]=!0}var $=new Set,J={};function Le(t,r){Ce(t,r),Ce(t+"Capture",r)}function Ce(t,r){for(J[t]=r,t=0;t<r.length;t++)$.add(r[t])}var Re=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lt={},gt={};function q(t){return at.call(gt,t)?!0:at.call(Lt,t)?!1:Re.test(t)?gt[t]=!0:(Lt[t]=!0,!1)}function oe(t,r,l){if(q(r))if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+l)}}function se(t,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+l)}}function Ee(t,r,l,c){if(c===null)t.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(r,l,""+c)}}function je(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Je(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Nt(t,r,l){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){l=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ze(t){if(!t._valueTracker){var r=Je(t)?"checked":"value";t._valueTracker=Nt(t,r,""+t[r])}}function Qt(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return t&&(c=Je(t)?t.checked?"true":"false":t.value),t=c,t!==l?(r.setValue(t),!0):!1}function Mn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var dn=/[\n"\\]/g;function Cn(t){return t.replace(dn,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Va(t,r,l,c,f,m,b,N){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+je(r)):t.value!==""+je(r)&&(t.value=""+je(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Ba(t,b,je(r)):l!=null?Ba(t,b,je(l)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+je(N):t.removeAttribute("name")}function Bi(t,r,l,c,f,m,b,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ze(t);return}l=l!=null?""+je(l):"",r=r!=null?""+je(r):l,N||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=N?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),Ze(t)}function Ba(t,r,l){r==="number"&&Mn(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function vr(t,r,l,c){if(t=t.options,r){r={};for(var f=0;f<l.length;f++)r["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=r.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&c&&(t[l].defaultSelected=!0)}else{for(l=""+je(l),r=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function cn(t,r,l){if(r!=null&&(r=""+je(r),r!==t.value&&(t.value=r),l==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=l!=null?""+je(l):""}function Un(t,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(a(92));if(jt(c)){if(1<c.length)throw Error(a(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=je(r),t.defaultValue=l,c=t.textContent,c===l&&c!==""&&c!==null&&(t.value=c),Ze(t)}function zn(t,r){if(r){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=r;return}}t.textContent=r}var br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wr(t,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,l):typeof l!="number"||l===0||br.has(r)?r==="float"?t.cssFloat=l:t[r]=(""+l).trim():t[r]=l+"px"}function ms(t,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&l[f]!==c&&wr(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&wr(t,m,r[m])}function ks(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_r=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ua(t){return _r.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Is(){}var Fo=null;function sr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var za=null,Br=null;function Ui(t){var r=U(t);if(r&&(t=r.stateNode)){var l=t[ut]||null;e:switch(t=r.stateNode,r.type){case"input":if(Va(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Cn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==t&&c.form===t.form){var f=c[ut]||null;if(!f)throw Error(a(90));Va(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===t.form&&Qt(c)}break e;case"textarea":cn(t,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&vr(t,!!l.multiple,r,!1)}}}var Rl=!1;function Fa(t,r,l){if(Rl)return t(r,l);Rl=!0;try{var c=t(r);return c}finally{if(Rl=!1,(za!==null||Br!==null)&&(ph(),za&&(r=za,t=Br,Br=za=null,Ui(r),t)))for(r=0;r<t.length;r++)Ui(t[r])}}function xr(t,r){var l=t.stateNode;if(l===null)return null;var c=l[ut]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zi=!1;if(rr)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){zi=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{zi=!1}var Ur=null,Ho=null,Fi=null;function qo(){if(Fi)return Fi;var t,r=Ho,l=r.length,c,f="value"in Ur?Ur.value:Ur.textContent,m=f.length;for(t=0;t<l&&r[t]===f[t];t++);var b=l-t;for(c=1;c<=b&&r[l-c]===f[m-c];c++);return Fi=f.slice(t,1<c?1-c:void 0)}function Hi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function oa(){return!0}function Tr(){return!1}function ps(t){function r(l,c,f,m,b){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(l=t[N],this[N]=l?l(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?oa:Tr,this.isPropagationStopped=Tr,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=oa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=oa)},persist:function(){},isPersistent:oa}),r}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zr=ps(ca),Ha=T({},ca,{view:0,detail:0}),$o=ps(Ha),qa,Cl,Fr,Al=T({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fr&&(Fr&&t.type==="mousemove"?(qa=t.screenX-Fr.screenX,Cl=t.screenY-Fr.screenY):Cl=qa=0,Fr=t),qa)},movementY:function(t){return"movementY"in t?t.movementY:Cl}}),Wo=ps(Al),qi=T({},Al,{dataTransfer:0}),Tu=ps(qi),Eu=T({},Ha,{relatedTarget:0}),$i=ps(Eu),Go=T({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),ku=ps(Go),Il=T({},ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Su=ps(Il),Nu=T({},ca,{data:0}),Hr=ps(Nu),ju={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Au(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Cu[t])?!!r[t]:!1}function $a(){return Au}var Ds=T({},Ha,{key:function(t){if(t.key){var r=ju[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Hi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ru[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(t){return t.type==="keypress"?Hi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Iu=ps(Ds),Du=T({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ua=ps(Du),h=T({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),v=ps(h),_=T({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),j=ps(_),Q=T({},Al,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=ps(Q),Oe=T({},ca,{newState:0,oldState:0}),Ot=ps(Oe),Qn=[9,13,27,32],yn=rr&&"CompositionEvent"in window,Pn=null;rr&&"documentMode"in document&&(Pn=document.documentMode);var ar=rr&&"TextEvent"in window&&!Pn,qr=rr&&(!yn||Pn&&8<Pn&&11>=Pn),Er=" ",kr=!1;function Wi(t,r){switch(t){case"keyup":return Qn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ml=!1;function tT(t,r){switch(t){case"compositionend":return Dl(r);case"keypress":return r.which!==32?null:(kr=!0,Er);case"textInput":return t=r.data,t===Er&&kr?null:t;default:return null}}function nT(t,r){if(Ml)return t==="compositionend"||!yn&&Wi(t,r)?(t=qo(),Fi=Ho=Ur=null,Ml=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return qr&&r.locale!=="ko"?null:r.data;default:return null}}var sT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wy(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!sT[t.type]:r==="textarea"}function _y(t,r,l,c){za?Br?Br.push(c):Br=[c]:za=c,r=xh(r,"onChange"),0<r.length&&(l=new zr("onChange","change",null,l,c),t.push({event:l,listeners:r}))}var Ko=null,Yo=null;function rT(t){s0(t,0)}function Mu(t){var r=ie(t);if(Qt(r))return t}function xy(t,r){if(t==="change")return r}var Ty=!1;if(rr){var ef;if(rr){var tf="oninput"in document;if(!tf){var Ey=document.createElement("div");Ey.setAttribute("oninput","return;"),tf=typeof Ey.oninput=="function"}ef=tf}else ef=!1;Ty=ef&&(!document.documentMode||9<document.documentMode)}function ky(){Ko&&(Ko.detachEvent("onpropertychange",Sy),Yo=Ko=null)}function Sy(t){if(t.propertyName==="value"&&Mu(Yo)){var r=[];_y(r,Yo,t,sr(t)),Fa(rT,r)}}function aT(t,r,l){t==="focusin"?(ky(),Ko=r,Yo=l,Ko.attachEvent("onpropertychange",Sy)):t==="focusout"&&ky()}function iT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mu(Yo)}function lT(t,r){if(t==="click")return Mu(r)}function oT(t,r){if(t==="input"||t==="change")return Mu(r)}function cT(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Gs=typeof Object.is=="function"?Object.is:cT;function Qo(t,r){if(Gs(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var l=Object.keys(t),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!at.call(r,f)||!Gs(t[f],r[f]))return!1}return!0}function Ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jy(t,r){var l=Ny(t);t=0;for(var c;l;){if(l.nodeType===3){if(c=t+l.textContent.length,t<=r&&c>=r)return{node:l,offset:r-t};t=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ny(l)}}function Ry(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Ry(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Cy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Mn(t.document);r instanceof t.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)t=r.contentWindow;else break;r=Mn(t.document)}return r}function nf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var uT=rr&&"documentMode"in document&&11>=document.documentMode,Pl=null,sf=null,Xo=null,rf=!1;function Ay(t,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;rf||Pl==null||Pl!==Mn(c)||(c=Pl,"selectionStart"in c&&nf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Xo&&Qo(Xo,c)||(Xo=c,c=xh(sf,"onSelect"),0<c.length&&(r=new zr("onSelect","select",null,r,l),t.push({event:r,listeners:c}),r.target=Pl)))}function Gi(t,r){var l={};return l[t.toLowerCase()]=r.toLowerCase(),l["Webkit"+t]="webkit"+r,l["Moz"+t]="moz"+r,l}var Ll={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionrun:Gi("Transition","TransitionRun"),transitionstart:Gi("Transition","TransitionStart"),transitioncancel:Gi("Transition","TransitionCancel"),transitionend:Gi("Transition","TransitionEnd")},af={},Iy={};rr&&(Iy=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function Ki(t){if(af[t])return af[t];if(!Ll[t])return t;var r=Ll[t],l;for(l in r)if(r.hasOwnProperty(l)&&l in Iy)return af[t]=r[l];return t}var Dy=Ki("animationend"),My=Ki("animationiteration"),Py=Ki("animationstart"),hT=Ki("transitionrun"),dT=Ki("transitionstart"),fT=Ki("transitioncancel"),Ly=Ki("transitionend"),Oy=new Map,lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lf.push("scrollEnd");function Sr(t,r){Oy.set(t,r),Le(r,[t])}var Pu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ir=[],Ol=0,of=0;function Lu(){for(var t=Ol,r=of=Ol=0;r<t;){var l=ir[r];ir[r++]=null;var c=ir[r];ir[r++]=null;var f=ir[r];ir[r++]=null;var m=ir[r];if(ir[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&Vy(l,f,m)}}function Ou(t,r,l,c){ir[Ol++]=t,ir[Ol++]=r,ir[Ol++]=l,ir[Ol++]=c,of|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function cf(t,r,l,c){return Ou(t,r,l,c),Vu(t)}function Yi(t,r){return Ou(t,null,null,r),Vu(t)}function Vy(t,r,l){t.lanes|=l;var c=t.alternate;c!==null&&(c.lanes|=l);for(var f=!1,m=t.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Ie(l),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=l|536870912),m):null}function Vu(t){if(50<bc)throw bc=0,vm=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Vl={};function mT(t,r,l,c){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(t,r,l,c){return new mT(t,r,l,c)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ha(t,r){var l=t.alternate;return l===null?(l=Ks(t.tag,r,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=r,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,r=t.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function By(t,r){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,r=l.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Bu(t,r,l,c,f,m){var b=0;if(c=t,typeof t=="function")uf(t)&&(b=1);else if(typeof t=="string")b=bE(t,l,Se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Ks(31,l,r,f),t.elementType=C,t.lanes=m,t;case B:return Qi(l.children,f,m,r);case L:b=8,f|=24;break;case re:return t=Ks(12,l,r,f|2),t.elementType=re,t.lanes=m,t;case ze:return t=Ks(13,l,r,f),t.elementType=ze,t.lanes=m,t;case Ae:return t=Ks(19,l,r,f),t.elementType=Ae,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case he:b=10;break e;case X:b=9;break e;case ke:b=11;break e;case I:b=14;break e;case S:b=16,c=null;break e}b=29,l=Error(a(130,t===null?"null":typeof t,"")),c=null}return r=Ks(b,l,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function Qi(t,r,l,c){return t=Ks(7,t,c,r),t.lanes=l,t}function hf(t,r,l){return t=Ks(6,t,null,r),t.lanes=l,t}function Uy(t){var r=Ks(18,null,null,0);return r.stateNode=t,r}function df(t,r,l){return r=Ks(4,t.children!==null?t.children:[],t.key,r),r.lanes=l,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var zy=new WeakMap;function lr(t,r){if(typeof t=="object"&&t!==null){var l=zy.get(t);return l!==void 0?l:(r={value:t,source:r,stack:Ct(r)},zy.set(t,r),r)}return{value:t,source:r,stack:Ct(r)}}var Bl=[],Ul=0,Uu=null,Jo=0,or=[],cr=0,Wa=null,$r=1,Wr="";function da(t,r){Bl[Ul++]=Jo,Bl[Ul++]=Uu,Uu=t,Jo=r}function Fy(t,r,l){or[cr++]=$r,or[cr++]=Wr,or[cr++]=Wa,Wa=t;var c=$r;t=Wr;var f=32-Ie(c)-1;c&=~(1<<f),l+=1;var m=32-Ie(r)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,$r=1<<32-Ie(r)+f|l<<f|c,Wr=m+t}else $r=1<<m|l<<f|c,Wr=t}function ff(t){t.return!==null&&(da(t,1),Fy(t,1,0))}function mf(t){for(;t===Uu;)Uu=Bl[--Ul],Bl[Ul]=null,Jo=Bl[--Ul],Bl[Ul]=null;for(;t===Wa;)Wa=or[--cr],or[cr]=null,Wr=or[--cr],or[cr]=null,$r=or[--cr],or[cr]=null}function Hy(t,r){or[cr++]=$r,or[cr++]=Wr,or[cr++]=Wa,$r=r.id,Wr=r.overflow,Wa=t}var gs=null,An=null,an=!1,Ga=null,ur=!1,pf=Error(a(519));function Ka(t){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zo(lr(r,t)),pf}function qy(t){var r=t.stateNode,l=t.type,c=t.memoizedProps;switch(r[Be]=t,r[ut]=c,l){case"dialog":Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(l=0;l<_c.length;l++)Yt(_c[l],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"input":Yt("invalid",r),Bi(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Yt("invalid",r);break;case"textarea":Yt("invalid",r),Un(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||l0(r.textContent,l)?(c.popover!=null&&(Yt("beforetoggle",r),Yt("toggle",r)),c.onScroll!=null&&Yt("scroll",r),c.onScrollEnd!=null&&Yt("scrollend",r),c.onClick!=null&&(r.onclick=Is),r=!0):r=!1,r||Ka(t,!0)}function $y(t){for(gs=t.return;gs;)switch(gs.tag){case 5:case 31:case 13:ur=!1;return;case 27:case 3:ur=!0;return;default:gs=gs.return}}function zl(t){if(t!==gs)return!1;if(!an)return $y(t),an=!0,!1;var r=t.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Dm(t.type,t.memoizedProps)),l=!l),l&&An&&Ka(t),$y(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));An=g0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));An=g0(t)}else r===27?(r=An,oi(t.type)?(t=Vm,Vm=null,An=t):An=r):An=gs?dr(t.stateNode.nextSibling):null;return!0}function Xi(){An=gs=null,an=!1}function gf(){var t=Ga;return t!==null&&(Us===null?Us=t:Us.push.apply(Us,t),Ga=null),t}function Zo(t){Ga===null?Ga=[t]:Ga.push(t)}var yf=V(null),Ji=null,fa=null;function Ya(t,r,l){ge(yf,r._currentValue),r._currentValue=l}function ma(t){t._currentValue=yf.current,G(yf)}function vf(t,r,l){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===l)break;t=t.return}}function bf(t,r,l,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=f;for(var O=0;O<r.length;O++)if(N.context===r[O]){m.lanes|=l,N=m.alternate,N!==null&&(N.lanes|=l),vf(m.return,l,t),c||(b=null);break e}m=N.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(a(341));b.lanes|=l,m=b.alternate,m!==null&&(m.lanes|=l),vf(b,l,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Fl(t,r,l,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var N=f.type;Gs(f.pendingProps.value,b.value)||(t!==null?t.push(N):t=[N])}}else if(f===nt.current){if(b=f.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Sc):t=[Sc])}f=f.return}t!==null&&bf(r,t,l,c),r.flags|=262144}function zu(t){for(t=t.firstContext;t!==null;){if(!Gs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Zi(t){Ji=t,fa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ys(t){return Wy(Ji,t)}function Fu(t,r){return Ji===null&&Zi(t),Wy(t,r)}function Wy(t,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},fa===null){if(t===null)throw Error(a(308));fa=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else fa=fa.next=r;return l}var pT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(l,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(l){return l()})}},gT=s.unstable_scheduleCallback,yT=s.unstable_NormalPriority,ss={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wf(){return{controller:new pT,data:new Map,refCount:0}}function ec(t){t.refCount--,t.refCount===0&&gT(yT,function(){t.controller.abort()})}var tc=null,_f=0,Hl=0,ql=null;function vT(t,r){if(tc===null){var l=tc=[];_f=0,Hl=Em(),ql={status:"pending",value:void 0,then:function(c){l.push(c)}}}return _f++,r.then(Gy,Gy),r}function Gy(){if(--_f===0&&tc!==null){ql!==null&&(ql.status="fulfilled");var t=tc;tc=null,Hl=0,ql=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function bT(t,r){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<l.length;f++)(0,l[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var Ky=Y.S;Y.S=function(t,r){Ab=Bt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&vT(t,r),Ky!==null&&Ky(t,r)};var el=V(null);function xf(){var t=el.current;return t!==null?t:jn.pooledCache}function Hu(t,r){r===null?ge(el,el.current):ge(el,r.pool)}function Yy(){var t=xf();return t===null?null:{parent:ss._currentValue,pool:t}}var $l=Error(a(460)),Tf=Error(a(474)),qu=Error(a(542)),$u={then:function(){}};function Qy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Xy(t,r,l){switch(l=t[l],l===void 0?t.push(r):l!==r&&(r.then(Is,Is),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zy(t),t;default:if(typeof r.status=="string")r.then(Is,Is);else{if(t=jn,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Zy(t),t}throw nl=r,$l}}function tl(t){try{var r=t._init;return r(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(nl=l,$l):l}}var nl=null;function Jy(){if(nl===null)throw Error(a(459));var t=nl;return nl=null,t}function Zy(t){if(t===$l||t===qu)throw Error(a(483))}var Wl=null,nc=0;function Wu(t){var r=nc;return nc+=1,Wl===null&&(Wl=[]),Xy(Wl,t,r)}function sc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Gu(t,r){throw r.$$typeof===k?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function ev(t){function r(K,F){if(t){var Z=K.deletions;Z===null?(K.deletions=[F],K.flags|=16):Z.push(F)}}function l(K,F){if(!t)return null;for(;F!==null;)r(K,F),F=F.sibling;return null}function c(K){for(var F=new Map;K!==null;)K.key!==null?F.set(K.key,K):F.set(K.index,K),K=K.sibling;return F}function f(K,F){return K=ha(K,F),K.index=0,K.sibling=null,K}function m(K,F,Z){return K.index=Z,t?(Z=K.alternate,Z!==null?(Z=Z.index,Z<F?(K.flags|=67108866,F):Z):(K.flags|=67108866,F)):(K.flags|=1048576,F)}function b(K){return t&&K.alternate===null&&(K.flags|=67108866),K}function N(K,F,Z,ye){return F===null||F.tag!==6?(F=hf(Z,K.mode,ye),F.return=K,F):(F=f(F,Z),F.return=K,F)}function O(K,F,Z,ye){var ft=Z.type;return ft===B?me(K,F,Z.props.children,ye,Z.key):F!==null&&(F.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===S&&tl(ft)===F.type)?(F=f(F,Z.props),sc(F,Z),F.return=K,F):(F=Bu(Z.type,Z.key,Z.props,null,K.mode,ye),sc(F,Z),F.return=K,F)}function ee(K,F,Z,ye){return F===null||F.tag!==4||F.stateNode.containerInfo!==Z.containerInfo||F.stateNode.implementation!==Z.implementation?(F=df(Z,K.mode,ye),F.return=K,F):(F=f(F,Z.children||[]),F.return=K,F)}function me(K,F,Z,ye,ft){return F===null||F.tag!==7?(F=Qi(Z,K.mode,ye,ft),F.return=K,F):(F=f(F,Z),F.return=K,F)}function _e(K,F,Z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=hf(""+F,K.mode,Z),F.return=K,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case P:return Z=Bu(F.type,F.key,F.props,null,K.mode,Z),sc(Z,F),Z.return=K,Z;case W:return F=df(F,K.mode,Z),F.return=K,F;case S:return F=tl(F),_e(K,F,Z)}if(jt(F)||H(F))return F=Qi(F,K.mode,Z,null),F.return=K,F;if(typeof F.then=="function")return _e(K,Wu(F),Z);if(F.$$typeof===he)return _e(K,Fu(K,F),Z);Gu(K,F)}return null}function te(K,F,Z,ye){var ft=F!==null?F.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ft!==null?null:N(K,F,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:return Z.key===ft?O(K,F,Z,ye):null;case W:return Z.key===ft?ee(K,F,Z,ye):null;case S:return Z=tl(Z),te(K,F,Z,ye)}if(jt(Z)||H(Z))return ft!==null?null:me(K,F,Z,ye,null);if(typeof Z.then=="function")return te(K,F,Wu(Z),ye);if(Z.$$typeof===he)return te(K,F,Fu(K,Z),ye);Gu(K,Z)}return null}function le(K,F,Z,ye,ft){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return K=K.get(Z)||null,N(F,K,""+ye,ft);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case P:return K=K.get(ye.key===null?Z:ye.key)||null,O(F,K,ye,ft);case W:return K=K.get(ye.key===null?Z:ye.key)||null,ee(F,K,ye,ft);case S:return ye=tl(ye),le(K,F,Z,ye,ft)}if(jt(ye)||H(ye))return K=K.get(Z)||null,me(F,K,ye,ft,null);if(typeof ye.then=="function")return le(K,F,Z,Wu(ye),ft);if(ye.$$typeof===he)return le(K,F,Z,Fu(F,ye),ft);Gu(F,ye)}return null}function et(K,F,Z,ye){for(var ft=null,fn=null,it=F,Ut=F=0,Jt=null;it!==null&&Ut<Z.length;Ut++){it.index>Ut?(Jt=it,it=null):Jt=it.sibling;var mn=te(K,it,Z[Ut],ye);if(mn===null){it===null&&(it=Jt);break}t&&it&&mn.alternate===null&&r(K,it),F=m(mn,F,Ut),fn===null?ft=mn:fn.sibling=mn,fn=mn,it=Jt}if(Ut===Z.length)return l(K,it),an&&da(K,Ut),ft;if(it===null){for(;Ut<Z.length;Ut++)it=_e(K,Z[Ut],ye),it!==null&&(F=m(it,F,Ut),fn===null?ft=it:fn.sibling=it,fn=it);return an&&da(K,Ut),ft}for(it=c(it);Ut<Z.length;Ut++)Jt=le(it,K,Ut,Z[Ut],ye),Jt!==null&&(t&&Jt.alternate!==null&&it.delete(Jt.key===null?Ut:Jt.key),F=m(Jt,F,Ut),fn===null?ft=Jt:fn.sibling=Jt,fn=Jt);return t&&it.forEach(function(fi){return r(K,fi)}),an&&da(K,Ut),ft}function yt(K,F,Z,ye){if(Z==null)throw Error(a(151));for(var ft=null,fn=null,it=F,Ut=F=0,Jt=null,mn=Z.next();it!==null&&!mn.done;Ut++,mn=Z.next()){it.index>Ut?(Jt=it,it=null):Jt=it.sibling;var fi=te(K,it,mn.value,ye);if(fi===null){it===null&&(it=Jt);break}t&&it&&fi.alternate===null&&r(K,it),F=m(fi,F,Ut),fn===null?ft=fi:fn.sibling=fi,fn=fi,it=Jt}if(mn.done)return l(K,it),an&&da(K,Ut),ft;if(it===null){for(;!mn.done;Ut++,mn=Z.next())mn=_e(K,mn.value,ye),mn!==null&&(F=m(mn,F,Ut),fn===null?ft=mn:fn.sibling=mn,fn=mn);return an&&da(K,Ut),ft}for(it=c(it);!mn.done;Ut++,mn=Z.next())mn=le(it,K,Ut,mn.value,ye),mn!==null&&(t&&mn.alternate!==null&&it.delete(mn.key===null?Ut:mn.key),F=m(mn,F,Ut),fn===null?ft=mn:fn.sibling=mn,fn=mn);return t&&it.forEach(function(CE){return r(K,CE)}),an&&da(K,Ut),ft}function Sn(K,F,Z,ye){if(typeof Z=="object"&&Z!==null&&Z.type===B&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:e:{for(var ft=Z.key;F!==null;){if(F.key===ft){if(ft=Z.type,ft===B){if(F.tag===7){l(K,F.sibling),ye=f(F,Z.props.children),ye.return=K,K=ye;break e}}else if(F.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===S&&tl(ft)===F.type){l(K,F.sibling),ye=f(F,Z.props),sc(ye,Z),ye.return=K,K=ye;break e}l(K,F);break}else r(K,F);F=F.sibling}Z.type===B?(ye=Qi(Z.props.children,K.mode,ye,Z.key),ye.return=K,K=ye):(ye=Bu(Z.type,Z.key,Z.props,null,K.mode,ye),sc(ye,Z),ye.return=K,K=ye)}return b(K);case W:e:{for(ft=Z.key;F!==null;){if(F.key===ft)if(F.tag===4&&F.stateNode.containerInfo===Z.containerInfo&&F.stateNode.implementation===Z.implementation){l(K,F.sibling),ye=f(F,Z.children||[]),ye.return=K,K=ye;break e}else{l(K,F);break}else r(K,F);F=F.sibling}ye=df(Z,K.mode,ye),ye.return=K,K=ye}return b(K);case S:return Z=tl(Z),Sn(K,F,Z,ye)}if(jt(Z))return et(K,F,Z,ye);if(H(Z)){if(ft=H(Z),typeof ft!="function")throw Error(a(150));return Z=ft.call(Z),yt(K,F,Z,ye)}if(typeof Z.then=="function")return Sn(K,F,Wu(Z),ye);if(Z.$$typeof===he)return Sn(K,F,Fu(K,Z),ye);Gu(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,F!==null&&F.tag===6?(l(K,F.sibling),ye=f(F,Z),ye.return=K,K=ye):(l(K,F),ye=hf(Z,K.mode,ye),ye.return=K,K=ye),b(K)):l(K,F)}return function(K,F,Z,ye){try{nc=0;var ft=Sn(K,F,Z,ye);return Wl=null,ft}catch(it){if(it===$l||it===qu)throw it;var fn=Ks(29,it,null,K.mode);return fn.lanes=ye,fn.return=K,fn}}}var sl=ev(!0),tv=ev(!1),Qa=!1;function Ef(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Xa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ja(t,r,l){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(vn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Vu(t),Vy(t,null,l),r}return Ou(t,c,r,l),Vu(t)}function rc(t,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,l|=c,r.lanes=l,un(t,l)}}function Sf(t,r){var l=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,l=l.next}while(l!==null);m===null?f=m=r:m=m.next=r}else f=m=r;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=r:t.next=r,l.lastBaseUpdate=r}var Nf=!1;function ac(){if(Nf){var t=ql;if(t!==null)throw t}}function ic(t,r,l,c){Nf=!1;var f=t.updateQueue;Qa=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var O=N,ee=O.next;O.next=null,b===null?m=ee:b.next=ee,b=O;var me=t.alternate;me!==null&&(me=me.updateQueue,N=me.lastBaseUpdate,N!==b&&(N===null?me.firstBaseUpdate=ee:N.next=ee,me.lastBaseUpdate=O))}if(m!==null){var _e=f.baseState;b=0,me=ee=O=null,N=m;do{var te=N.lane&-536870913,le=te!==N.lane;if(le?(Xt&te)===te:(c&te)===te){te!==0&&te===Hl&&(Nf=!0),me!==null&&(me=me.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var et=t,yt=N;te=r;var Sn=l;switch(yt.tag){case 1:if(et=yt.payload,typeof et=="function"){_e=et.call(Sn,_e,te);break e}_e=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=yt.payload,te=typeof et=="function"?et.call(Sn,_e,te):et,te==null)break e;_e=T({},_e,te);break e;case 2:Qa=!0}}te=N.callback,te!==null&&(t.flags|=64,le&&(t.flags|=8192),le=f.callbacks,le===null?f.callbacks=[te]:le.push(te))}else le={lane:te,tag:N.tag,payload:N.payload,callback:N.callback,next:null},me===null?(ee=me=le,O=_e):me=me.next=le,b|=te;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;le=N,N=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);me===null&&(O=_e),f.baseState=O,f.firstBaseUpdate=ee,f.lastBaseUpdate=me,m===null&&(f.shared.lanes=0),si|=b,t.lanes=b,t.memoizedState=_e}}function nv(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function sv(t,r){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)nv(l[t],r)}var Gl=V(null),Ku=V(0);function rv(t,r){t=Ta,ge(Ku,t),ge(Gl,r),Ta=t|r.baseLanes}function jf(){ge(Ku,Ta),ge(Gl,Gl.current)}function Rf(){Ta=Ku.current,G(Gl),G(Ku)}var Ys=V(null),hr=null;function Za(t){var r=t.alternate;ge(Xn,Xn.current&1),ge(Ys,t),hr===null&&(r===null||Gl.current!==null||r.memoizedState!==null)&&(hr=t)}function Cf(t){ge(Xn,Xn.current),ge(Ys,t),hr===null&&(hr=t)}function av(t){t.tag===22?(ge(Xn,Xn.current),ge(Ys,t),hr===null&&(hr=t)):ei()}function ei(){ge(Xn,Xn.current),ge(Ys,Ys.current)}function Qs(t){G(Ys),hr===t&&(hr=null),G(Xn)}var Xn=V(0);function Yu(t){for(var r=t;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Lm(l)||Om(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var pa=0,Vt=null,En=null,rs=null,Qu=!1,Kl=!1,rl=!1,Xu=0,lc=0,Yl=null,wT=0;function qn(){throw Error(a(321))}function Af(t,r){if(r===null)return!1;for(var l=0;l<r.length&&l<t.length;l++)if(!Gs(t[l],r[l]))return!1;return!0}function If(t,r,l,c,f,m){return pa=m,Vt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?Fv:Gf,rl=!1,m=l(c,f),rl=!1,Kl&&(m=lv(r,l,c,f)),iv(t),m}function iv(t){Y.H=uc;var r=En!==null&&En.next!==null;if(pa=0,rs=En=Vt=null,Qu=!1,lc=0,Yl=null,r)throw Error(a(300));t===null||as||(t=t.dependencies,t!==null&&zu(t)&&(as=!0))}function lv(t,r,l,c){Vt=t;var f=0;do{if(Kl&&(Yl=null),lc=0,Kl=!1,25<=f)throw Error(a(301));if(f+=1,rs=En=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=Hv,m=r(l,c)}while(Kl);return m}function _T(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?oc(r):r,t=t.useState()[0],(En!==null?En.memoizedState:null)!==t&&(Vt.flags|=1024),r}function Df(){var t=Xu!==0;return Xu=0,t}function Mf(t,r,l){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~l}function Pf(t){if(Qu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Qu=!1}pa=0,rs=En=Vt=null,Kl=!1,lc=Xu=0,Yl=null}function Ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rs===null?Vt.memoizedState=rs=t:rs=rs.next=t,rs}function Jn(){if(En===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=En.next;var r=rs===null?Vt.memoizedState:rs.next;if(r!==null)rs=r,En=t;else{if(t===null)throw Vt.alternate===null?Error(a(467)):Error(a(310));En=t,t={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},rs===null?Vt.memoizedState=rs=t:rs=rs.next=t}return rs}function Ju(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oc(t){var r=lc;return lc+=1,Yl===null&&(Yl=[]),t=Xy(Yl,t,r),r=Vt,(rs===null?r.memoizedState:rs.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?Fv:Gf),t}function Zu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return oc(t);if(t.$$typeof===he)return ys(t)}throw Error(a(438,String(t)))}function Lf(t){var r=null,l=Vt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Vt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Ju(),Vt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(t),c=0;c<t;c++)l[c]=D;return r.index++,l}function ga(t,r){return typeof r=="function"?r(t):r}function eh(t){var r=Jn();return Of(r,En,t)}function Of(t,r,l){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=l;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var N=b=null,O=null,ee=r,me=!1;do{var _e=ee.lane&-536870913;if(_e!==ee.lane?(Xt&_e)===_e:(pa&_e)===_e){var te=ee.revertLane;if(te===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),_e===Hl&&(me=!0);else if((pa&te)===te){ee=ee.next,te===Hl&&(me=!0);continue}else _e={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},O===null?(N=O=_e,b=m):O=O.next=_e,Vt.lanes|=te,si|=te;_e=ee.action,rl&&l(m,_e),m=ee.hasEagerState?ee.eagerState:l(m,_e)}else te={lane:_e,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},O===null?(N=O=te,b=m):O=O.next=te,Vt.lanes|=_e,si|=_e;ee=ee.next}while(ee!==null&&ee!==r);if(O===null?b=m:O.next=N,!Gs(m,t.memoizedState)&&(as=!0,me&&(l=ql,l!==null)))throw l;t.memoizedState=m,t.baseState=b,t.baseQueue=O,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Vf(t){var r=Jn(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=t;var c=l.dispatch,f=l.pending,m=r.memoizedState;if(f!==null){l.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);Gs(m,r.memoizedState)||(as=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),l.lastRenderedState=m}return[m,c]}function ov(t,r,l){var c=Vt,f=Jn(),m=an;if(m){if(l===void 0)throw Error(a(407));l=l()}else l=r();var b=!Gs((En||f).memoizedState,l);if(b&&(f.memoizedState=l,as=!0),f=f.queue,zf(hv.bind(null,c,f,t),[t]),f.getSnapshot!==r||b||rs!==null&&rs.memoizedState.tag&1){if(c.flags|=2048,Ql(9,{destroy:void 0},uv.bind(null,c,f,l,r),null),jn===null)throw Error(a(349));m||(pa&127)!==0||cv(c,r,l)}return l}function cv(t,r,l){t.flags|=16384,t={getSnapshot:r,value:l},r=Vt.updateQueue,r===null?(r=Ju(),Vt.updateQueue=r,r.stores=[t]):(l=r.stores,l===null?r.stores=[t]:l.push(t))}function uv(t,r,l,c){r.value=l,r.getSnapshot=c,dv(r)&&fv(t)}function hv(t,r,l){return l(function(){dv(r)&&fv(t)})}function dv(t){var r=t.getSnapshot;t=t.value;try{var l=r();return!Gs(t,l)}catch{return!0}}function fv(t){var r=Yi(t,2);r!==null&&zs(r,t,2)}function Bf(t){var r=Ms();if(typeof t=="function"){var l=t;if(t=l(),rl){Ue(!0);try{l()}finally{Ue(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},r}function mv(t,r,l,c){return t.baseState=l,Of(t,En,typeof c=="function"?c:ga)}function xT(t,r,l,c,f){if(sh(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};Y.T!==null?l(!0):m.isTransition=!1,c(m),l=r.pending,l===null?(m.next=r.pending=m,pv(r,m)):(m.next=l.next,r.pending=l.next=m)}}function pv(t,r){var l=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=Y.T,b={};Y.T=b;try{var N=l(f,c),O=Y.S;O!==null&&O(b,N),gv(t,r,N)}catch(ee){Uf(t,r,ee)}finally{m!==null&&b.types!==null&&(m.types=b.types),Y.T=m}}else try{m=l(f,c),gv(t,r,m)}catch(ee){Uf(t,r,ee)}}function gv(t,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){yv(t,r,c)},function(c){return Uf(t,r,c)}):yv(t,r,l)}function yv(t,r,l){r.status="fulfilled",r.value=l,vv(r),t.state=l,r=t.pending,r!==null&&(l=r.next,l===r?t.pending=null:(l=l.next,r.next=l,pv(t,l)))}function Uf(t,r,l){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,vv(r),r=r.next;while(r!==c)}t.action=null}function vv(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function bv(t,r){return r}function wv(t,r){if(an){var l=jn.formState;if(l!==null){e:{var c=Vt;if(an){if(An){t:{for(var f=An,m=ur;f.nodeType!==8;){if(!m){f=null;break t}if(f=dr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){An=dr(f.nextSibling),c=f.data==="F!";break e}}Ka(c)}c=!1}c&&(r=l[0])}}return l=Ms(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bv,lastRenderedState:r},l.queue=c,l=Bv.bind(null,Vt,c),c.dispatch=l,c=Bf(!1),m=Wf.bind(null,Vt,!1,c.queue),c=Ms(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,l=xT.bind(null,Vt,f,m,l),f.dispatch=l,c.memoizedState=t,[r,l,!1]}function _v(t){var r=Jn();return xv(r,En,t)}function xv(t,r,l){if(r=Of(t,r,bv)[0],t=eh(ga)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=oc(r)}catch(b){throw b===$l?qu:b}else c=r;r=Jn();var f=r.queue,m=f.dispatch;return l!==r.memoizedState&&(Vt.flags|=2048,Ql(9,{destroy:void 0},TT.bind(null,f,l),null)),[c,m,t]}function TT(t,r){t.action=r}function Tv(t){var r=Jn(),l=En;if(l!==null)return xv(r,l,t);Jn(),r=r.memoizedState,l=Jn();var c=l.queue.dispatch;return l.memoizedState=t,[r,c,!1]}function Ql(t,r,l,c){return t={tag:t,create:l,deps:c,inst:r,next:null},r=Vt.updateQueue,r===null&&(r=Ju(),Vt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=t.next=t:(c=l.next,l.next=t,t.next=c,r.lastEffect=t),t}function Ev(){return Jn().memoizedState}function th(t,r,l,c){var f=Ms();Vt.flags|=t,f.memoizedState=Ql(1|r,{destroy:void 0},l,c===void 0?null:c)}function nh(t,r,l,c){var f=Jn();c=c===void 0?null:c;var m=f.memoizedState.inst;En!==null&&c!==null&&Af(c,En.memoizedState.deps)?f.memoizedState=Ql(r,m,l,c):(Vt.flags|=t,f.memoizedState=Ql(1|r,m,l,c))}function kv(t,r){th(8390656,8,t,r)}function zf(t,r){nh(2048,8,t,r)}function ET(t){Vt.flags|=4;var r=Vt.updateQueue;if(r===null)r=Ju(),Vt.updateQueue=r,r.events=[t];else{var l=r.events;l===null?r.events=[t]:l.push(t)}}function Sv(t){var r=Jn().memoizedState;return ET({ref:r,nextImpl:t}),function(){if((vn&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function Nv(t,r){return nh(4,2,t,r)}function jv(t,r){return nh(4,4,t,r)}function Rv(t,r){if(typeof r=="function"){t=t();var l=r(t);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Cv(t,r,l){l=l!=null?l.concat([t]):null,nh(4,4,Rv.bind(null,r,t),l)}function Ff(){}function Av(t,r){var l=Jn();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&Af(r,c[1])?c[0]:(l.memoizedState=[t,r],t)}function Iv(t,r){var l=Jn();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&Af(r,c[1]))return c[0];if(c=t(),rl){Ue(!0);try{t()}finally{Ue(!1)}}return l.memoizedState=[c,r],c}function Hf(t,r,l){return l===void 0||(pa&1073741824)!==0&&(Xt&261930)===0?t.memoizedState=r:(t.memoizedState=l,t=Db(),Vt.lanes|=t,si|=t,l)}function Dv(t,r,l,c){return Gs(l,r)?l:Gl.current!==null?(t=Hf(t,l,c),Gs(t,r)||(as=!0),t):(pa&42)===0||(pa&1073741824)!==0&&(Xt&261930)===0?(as=!0,t.memoizedState=l):(t=Db(),Vt.lanes|=t,si|=t,r)}function Mv(t,r,l,c,f){var m=Te.p;Te.p=m!==0&&8>m?m:8;var b=Y.T,N={};Y.T=N,Wf(t,!1,r,l);try{var O=f(),ee=Y.S;if(ee!==null&&ee(N,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var me=bT(O,c);cc(t,r,me,Zs(t))}else cc(t,r,c,Zs(t))}catch(_e){cc(t,r,{then:function(){},status:"rejected",reason:_e},Zs())}finally{Te.p=m,b!==null&&N.types!==null&&(b.types=N.types),Y.T=b}}function kT(){}function qf(t,r,l,c){if(t.tag!==5)throw Error(a(476));var f=Pv(t).queue;Mv(t,f,r,De,l===null?kT:function(){return Lv(t),l(c)})}function Pv(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:De},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:l},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Lv(t){var r=Pv(t);r.next===null&&(r=t.alternate.memoizedState),cc(t,r.next.queue,{},Zs())}function $f(){return ys(Sc)}function Ov(){return Jn().memoizedState}function Vv(){return Jn().memoizedState}function ST(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var l=Zs();t=Xa(l);var c=Ja(r,t,l);c!==null&&(zs(c,r,l),rc(c,r,l)),r={cache:wf()},t.payload=r;return}r=r.return}}function NT(t,r,l){var c=Zs();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},sh(t)?Uv(r,l):(l=cf(t,r,l,c),l!==null&&(zs(l,t,c),zv(l,r,c)))}function Bv(t,r,l){var c=Zs();cc(t,r,l,c)}function cc(t,r,l,c){var f={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(sh(t))Uv(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,N=m(b,l);if(f.hasEagerState=!0,f.eagerState=N,Gs(N,b))return Ou(t,r,f,0),jn===null&&Lu(),!1}catch{}if(l=cf(t,r,f,c),l!==null)return zs(l,t,c),zv(l,r,c),!0}return!1}function Wf(t,r,l,c){if(c={lane:2,revertLane:Em(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},sh(t)){if(r)throw Error(a(479))}else r=cf(t,l,c,2),r!==null&&zs(r,t,2)}function sh(t){var r=t.alternate;return t===Vt||r!==null&&r===Vt}function Uv(t,r){Kl=Qu=!0;var l=t.pending;l===null?r.next=r:(r.next=l.next,l.next=r),t.pending=r}function zv(t,r,l){if((l&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,l|=c,r.lanes=l,un(t,l)}}var uc={readContext:ys,use:Zu,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn,useHostTransitionStatus:qn,useFormState:qn,useActionState:qn,useOptimistic:qn,useMemoCache:qn,useCacheRefresh:qn};uc.useEffectEvent=qn;var Fv={readContext:ys,use:Zu,useCallback:function(t,r){return Ms().memoizedState=[t,r===void 0?null:r],t},useContext:ys,useEffect:kv,useImperativeHandle:function(t,r,l){l=l!=null?l.concat([t]):null,th(4194308,4,Rv.bind(null,r,t),l)},useLayoutEffect:function(t,r){return th(4194308,4,t,r)},useInsertionEffect:function(t,r){th(4,2,t,r)},useMemo:function(t,r){var l=Ms();r=r===void 0?null:r;var c=t();if(rl){Ue(!0);try{t()}finally{Ue(!1)}}return l.memoizedState=[c,r],c},useReducer:function(t,r,l){var c=Ms();if(l!==void 0){var f=l(r);if(rl){Ue(!0);try{l(r)}finally{Ue(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=NT.bind(null,Vt,t),[c.memoizedState,t]},useRef:function(t){var r=Ms();return t={current:t},r.memoizedState=t},useState:function(t){t=Bf(t);var r=t.queue,l=Bv.bind(null,Vt,r);return r.dispatch=l,[t.memoizedState,l]},useDebugValue:Ff,useDeferredValue:function(t,r){var l=Ms();return Hf(l,t,r)},useTransition:function(){var t=Bf(!1);return t=Mv.bind(null,Vt,t.queue,!0,!1),Ms().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,l){var c=Vt,f=Ms();if(an){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),jn===null)throw Error(a(349));(Xt&127)!==0||cv(c,r,l)}f.memoizedState=l;var m={value:l,getSnapshot:r};return f.queue=m,kv(hv.bind(null,c,m,t),[t]),c.flags|=2048,Ql(9,{destroy:void 0},uv.bind(null,c,m,l,r),null),l},useId:function(){var t=Ms(),r=jn.identifierPrefix;if(an){var l=Wr,c=$r;l=(c&~(1<<32-Ie(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Xu++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=wT++,r="_"+r+"r_"+l.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:$f,useFormState:wv,useActionState:wv,useOptimistic:function(t){var r=Ms();r.memoizedState=r.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Wf.bind(null,Vt,!0,l),l.dispatch=r,[t,r]},useMemoCache:Lf,useCacheRefresh:function(){return Ms().memoizedState=ST.bind(null,Vt)},useEffectEvent:function(t){var r=Ms(),l={impl:t};return r.memoizedState=l,function(){if((vn&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Gf={readContext:ys,use:Zu,useCallback:Av,useContext:ys,useEffect:zf,useImperativeHandle:Cv,useInsertionEffect:Nv,useLayoutEffect:jv,useMemo:Iv,useReducer:eh,useRef:Ev,useState:function(){return eh(ga)},useDebugValue:Ff,useDeferredValue:function(t,r){var l=Jn();return Dv(l,En.memoizedState,t,r)},useTransition:function(){var t=eh(ga)[0],r=Jn().memoizedState;return[typeof t=="boolean"?t:oc(t),r]},useSyncExternalStore:ov,useId:Ov,useHostTransitionStatus:$f,useFormState:_v,useActionState:_v,useOptimistic:function(t,r){var l=Jn();return mv(l,En,t,r)},useMemoCache:Lf,useCacheRefresh:Vv};Gf.useEffectEvent=Sv;var Hv={readContext:ys,use:Zu,useCallback:Av,useContext:ys,useEffect:zf,useImperativeHandle:Cv,useInsertionEffect:Nv,useLayoutEffect:jv,useMemo:Iv,useReducer:Vf,useRef:Ev,useState:function(){return Vf(ga)},useDebugValue:Ff,useDeferredValue:function(t,r){var l=Jn();return En===null?Hf(l,t,r):Dv(l,En.memoizedState,t,r)},useTransition:function(){var t=Vf(ga)[0],r=Jn().memoizedState;return[typeof t=="boolean"?t:oc(t),r]},useSyncExternalStore:ov,useId:Ov,useHostTransitionStatus:$f,useFormState:Tv,useActionState:Tv,useOptimistic:function(t,r){var l=Jn();return En!==null?mv(l,En,t,r):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Lf,useCacheRefresh:Vv};Hv.useEffectEvent=Sv;function Kf(t,r,l,c){r=t.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Yf={enqueueSetState:function(t,r,l){t=t._reactInternals;var c=Zs(),f=Xa(c);f.payload=r,l!=null&&(f.callback=l),r=Ja(t,f,c),r!==null&&(zs(r,t,c),rc(r,t,c))},enqueueReplaceState:function(t,r,l){t=t._reactInternals;var c=Zs(),f=Xa(c);f.tag=1,f.payload=r,l!=null&&(f.callback=l),r=Ja(t,f,c),r!==null&&(zs(r,t,c),rc(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var l=Zs(),c=Xa(l);c.tag=2,r!=null&&(c.callback=r),r=Ja(t,c,l),r!==null&&(zs(r,t,l),rc(r,t,l))}};function qv(t,r,l,c,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!Qo(l,c)||!Qo(f,m):!0}function $v(t,r,l,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==t&&Yf.enqueueReplaceState(r,r.state,null)}function al(t,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(t=t.defaultProps){l===r&&(l=T({},l));for(var f in t)l[f]===void 0&&(l[f]=t[f])}return l}function Wv(t){Pu(t)}function Gv(t){console.error(t)}function Kv(t){Pu(t)}function rh(t,r){try{var l=t.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Yv(t,r,l){try{var c=t.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Qf(t,r,l){return l=Xa(l),l.tag=3,l.payload={element:null},l.callback=function(){rh(t,r)},l}function Qv(t){return t=Xa(t),t.tag=3,t}function Xv(t,r,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){Yv(r,l,c)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Yv(r,l,c),typeof f!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function jT(t,r,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Fl(r,l,f,!0),l=Ys.current,l!==null){switch(l.tag){case 31:case 13:return hr===null?gh():l.alternate===null&&$n===0&&($n=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===$u?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),_m(t,c,f)),!1;case 22:return l.flags|=65536,c===$u?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),_m(t,c,f)),!1}throw Error(a(435,l.tag))}return _m(t,c,f),gh(),!1}if(an)return r=Ys.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==pf&&(t=Error(a(422),{cause:c}),Zo(lr(t,l)))):(c!==pf&&(r=Error(a(423),{cause:c}),Zo(lr(r,l))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=lr(c,l),f=Qf(t.stateNode,c,f),Sf(t,f),$n!==4&&($n=2)),!1;var m=Error(a(520),{cause:c});if(m=lr(m,l),vc===null?vc=[m]:vc.push(m),$n!==4&&($n=2),r===null)return!0;c=lr(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,t=f&-f,l.lanes|=t,t=Qf(l.stateNode,c,t),Sf(l,t),!1;case 1:if(r=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ri===null||!ri.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Qv(f),Xv(f,t,l,c),Sf(l,f),!1}l=l.return}while(l!==null);return!1}var Xf=Error(a(461)),as=!1;function vs(t,r,l,c){r.child=t===null?tv(r,null,l,c):sl(r,t.child,l,c)}function Jv(t,r,l,c,f){l=l.render;var m=r.ref;if("ref"in c){var b={};for(var N in c)N!=="ref"&&(b[N]=c[N])}else b=c;return Zi(r),c=If(t,r,l,b,m,f),N=Df(),t!==null&&!as?(Mf(t,r,f),ya(t,r,f)):(an&&N&&ff(r),r.flags|=1,vs(t,r,c,f),r.child)}function Zv(t,r,l,c,f){if(t===null){var m=l.type;return typeof m=="function"&&!uf(m)&&m.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=m,eb(t,r,m,c,f)):(t=Bu(l.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!am(t,f)){var b=m.memoizedProps;if(l=l.compare,l=l!==null?l:Qo,l(b,c)&&t.ref===r.ref)return ya(t,r,f)}return r.flags|=1,t=ha(m,c),t.ref=r.ref,t.return=r,r.child=t}function eb(t,r,l,c,f){if(t!==null){var m=t.memoizedProps;if(Qo(m,c)&&t.ref===r.ref)if(as=!1,r.pendingProps=c=m,am(t,f))(t.flags&131072)!==0&&(as=!0);else return r.lanes=t.lanes,ya(t,r,f)}return Jf(t,r,l,c,f)}function tb(t,r,l,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return nb(t,r,m,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Hu(r,m!==null?m.cachePool:null),m!==null?rv(r,m):jf(),av(r);else return c=r.lanes=536870912,nb(t,r,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(Hu(r,m.cachePool),rv(r,m),ei(),r.memoizedState=null):(t!==null&&Hu(r,null),jf(),ei());return vs(t,r,f,l),r.child}function hc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function nb(t,r,l,c,f){var m=xf();return m=m===null?null:{parent:ss._currentValue,pool:m},r.memoizedState={baseLanes:l,cachePool:m},t!==null&&Hu(r,null),jf(),av(r),t!==null&&Fl(t,r,c,!0),r.childLanes=f,null}function ah(t,r){return r=lh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function sb(t,r,l){return sl(r,t.child,null,l),t=ah(r,r.pendingProps),t.flags|=2,Qs(r),r.memoizedState=null,t}function RT(t,r,l){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(an){if(c.mode==="hidden")return t=ah(r,c),r.lanes=536870912,hc(null,t);if(Cf(r),(t=An)?(t=p0(t,ur),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Wa!==null?{id:$r,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},l=Uy(t),l.return=r,r.child=l,gs=r,An=null)):t=null,t===null)throw Ka(r);return r.lanes=536870912,null}return ah(r,c)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(Cf(r),f)if(r.flags&256)r.flags&=-257,r=sb(t,r,l);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(a(558));else if(as||Fl(t,r,l,!1),f=(l&t.childLanes)!==0,as||f){if(c=jn,c!==null&&(b=Nn(c,l),b!==0&&b!==m.retryLane))throw m.retryLane=b,Yi(t,b),zs(c,t,b),Xf;gh(),r=sb(t,r,l)}else t=m.treeContext,An=dr(b.nextSibling),gs=r,an=!0,Ga=null,ur=!1,t!==null&&Hy(r,t),r=ah(r,c),r.flags|=4096;return r}return t=ha(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function ih(t,r){var l=r.ref;if(l===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(t===null||t.ref!==l)&&(r.flags|=4194816)}}function Jf(t,r,l,c,f){return Zi(r),l=If(t,r,l,c,void 0,f),c=Df(),t!==null&&!as?(Mf(t,r,f),ya(t,r,f)):(an&&c&&ff(r),r.flags|=1,vs(t,r,l,f),r.child)}function rb(t,r,l,c,f,m){return Zi(r),r.updateQueue=null,l=lv(r,c,l,f),iv(t),c=Df(),t!==null&&!as?(Mf(t,r,m),ya(t,r,m)):(an&&c&&ff(r),r.flags|=1,vs(t,r,l,m),r.child)}function ab(t,r,l,c,f){if(Zi(r),r.stateNode===null){var m=Vl,b=l.contextType;typeof b=="object"&&b!==null&&(m=ys(b)),m=new l(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Yf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Ef(r),b=l.contextType,m.context=typeof b=="object"&&b!==null?ys(b):Vl,m.state=r.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Kf(r,l,b,c),m.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&Yf.enqueueReplaceState(m,m.state,null),ic(r,c,m,f),ac(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var N=r.memoizedProps,O=al(l,N);m.props=O;var ee=m.context,me=l.contextType;b=Vl,typeof me=="object"&&me!==null&&(b=ys(me));var _e=l.getDerivedStateFromProps;me=typeof _e=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,me||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||ee!==b)&&$v(r,m,c,b),Qa=!1;var te=r.memoizedState;m.state=te,ic(r,c,m,f),ac(),ee=r.memoizedState,N||te!==ee||Qa?(typeof _e=="function"&&(Kf(r,l,_e,c),ee=r.memoizedState),(O=Qa||qv(r,l,O,c,te,ee,b))?(me||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ee),m.props=c,m.state=ee,m.context=b,c=O):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,kf(t,r),b=r.memoizedProps,me=al(l,b),m.props=me,_e=r.pendingProps,te=m.context,ee=l.contextType,O=Vl,typeof ee=="object"&&ee!==null&&(O=ys(ee)),N=l.getDerivedStateFromProps,(ee=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==_e||te!==O)&&$v(r,m,c,O),Qa=!1,te=r.memoizedState,m.state=te,ic(r,c,m,f),ac();var le=r.memoizedState;b!==_e||te!==le||Qa||t!==null&&t.dependencies!==null&&zu(t.dependencies)?(typeof N=="function"&&(Kf(r,l,N,c),le=r.memoizedState),(me=Qa||qv(r,l,me,c,te,le,O)||t!==null&&t.dependencies!==null&&zu(t.dependencies))?(ee||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,le,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,le,O)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=le),m.props=c,m.state=le,m.context=O,c=me):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,ih(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=sl(r,t.child,null,f),r.child=sl(r,null,l,f)):vs(t,r,l,f),r.memoizedState=m.state,t=r.child):t=ya(t,r,f),t}function ib(t,r,l,c){return Xi(),r.flags|=256,vs(t,r,l,c),r.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(t){return{baseLanes:t,cachePool:Yy()}}function tm(t,r,l){return t=t!==null?t.childLanes&~l:0,r&&(t|=Js),t}function lb(t,r,l){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(Xn.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(an){if(f?Za(r):ei(),(t=An)?(t=p0(t,ur),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Wa!==null?{id:$r,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},l=Uy(t),l.return=r,r.child=l,gs=r,An=null)):t=null,t===null)throw Ka(r);return Om(t)?r.lanes=32:r.lanes=536870912,null}var N=c.children;return c=c.fallback,f?(ei(),f=r.mode,N=lh({mode:"hidden",children:N},f),c=Qi(c,f,l,null),N.return=r,c.return=r,N.sibling=c,r.child=N,c=r.child,c.memoizedState=em(l),c.childLanes=tm(t,b,l),r.memoizedState=Zf,hc(null,c)):(Za(r),nm(r,N))}var O=t.memoizedState;if(O!==null&&(N=O.dehydrated,N!==null)){if(m)r.flags&256?(Za(r),r.flags&=-257,r=sm(t,r,l)):r.memoizedState!==null?(ei(),r.child=t.child,r.flags|=128,r=null):(ei(),N=c.fallback,f=r.mode,c=lh({mode:"visible",children:c.children},f),N=Qi(N,f,l,null),N.flags|=2,c.return=r,N.return=r,c.sibling=N,r.child=c,sl(r,t.child,null,l),c=r.child,c.memoizedState=em(l),c.childLanes=tm(t,b,l),r.memoizedState=Zf,r=hc(null,c));else if(Za(r),Om(N)){if(b=N.nextSibling&&N.nextSibling.dataset,b)var ee=b.dgst;b=ee,c=Error(a(419)),c.stack="",c.digest=b,Zo({value:c,source:null,stack:null}),r=sm(t,r,l)}else if(as||Fl(t,r,l,!1),b=(l&t.childLanes)!==0,as||b){if(b=jn,b!==null&&(c=Nn(b,l),c!==0&&c!==O.retryLane))throw O.retryLane=c,Yi(t,c),zs(b,t,c),Xf;Lm(N)||gh(),r=sm(t,r,l)}else Lm(N)?(r.flags|=192,r.child=t.child,r=null):(t=O.treeContext,An=dr(N.nextSibling),gs=r,an=!0,Ga=null,ur=!1,t!==null&&Hy(r,t),r=nm(r,c.children),r.flags|=4096);return r}return f?(ei(),N=c.fallback,f=r.mode,O=t.child,ee=O.sibling,c=ha(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,ee!==null?N=ha(ee,N):(N=Qi(N,f,l,null),N.flags|=2),N.return=r,c.return=r,c.sibling=N,r.child=c,hc(null,c),c=r.child,N=t.child.memoizedState,N===null?N=em(l):(f=N.cachePool,f!==null?(O=ss._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=Yy(),N={baseLanes:N.baseLanes|l,cachePool:f}),c.memoizedState=N,c.childLanes=tm(t,b,l),r.memoizedState=Zf,hc(t.child,c)):(Za(r),l=t.child,t=l.sibling,l=ha(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=l,r.memoizedState=null,l)}function nm(t,r){return r=lh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function lh(t,r){return t=Ks(22,t,null,r),t.lanes=0,t}function sm(t,r,l){return sl(r,t.child,null,l),t=nm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function ob(t,r,l){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),vf(t.return,r,l)}function rm(t,r,l,c,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=l,b.tailMode=f,b.treeForkCount=m)}function cb(t,r,l){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var b=Xn.current,N=(b&2)!==0;if(N?(b=b&1|2,r.flags|=128):b&=1,ge(Xn,b),vs(t,r,c,l),c=an?Jo:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ob(t,l,r);else if(t.tag===19)ob(t,l,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(l=r.child,f=null;l!==null;)t=l.alternate,t!==null&&Yu(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=r.child,r.child=null):(f=l.sibling,l.sibling=null),rm(r,!1,f,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Yu(t)===null){r.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}rm(r,!0,l,null,m,c);break;case"together":rm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ya(t,r,l){if(t!==null&&(r.dependencies=t.dependencies),si|=r.lanes,(l&r.childLanes)===0)if(t!==null){if(Fl(t,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,l=ha(t,t.pendingProps),r.child=l,l.return=r;t.sibling!==null;)t=t.sibling,l=l.sibling=ha(t,t.pendingProps),l.return=r;l.sibling=null}return r.child}function am(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&zu(t)))}function CT(t,r,l){switch(r.tag){case 3:ht(r,r.stateNode.containerInfo),Ya(r,ss,t.memoizedState.cache),Xi();break;case 27:case 5:Wt(r);break;case 4:ht(r,r.stateNode.containerInfo);break;case 10:Ya(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Cf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Za(r),r.flags|=128,null):(l&r.child.childLanes)!==0?lb(t,r,l):(Za(r),t=ya(t,r,l),t!==null?t.sibling:null);Za(r);break;case 19:var f=(t.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Fl(t,r,l,!1),c=(l&r.childLanes)!==0),f){if(c)return cb(t,r,l);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ge(Xn,Xn.current),c)break;return null;case 22:return r.lanes=0,tb(t,r,l,r.pendingProps);case 24:Ya(r,ss,t.memoizedState.cache)}return ya(t,r,l)}function ub(t,r,l){if(t!==null)if(t.memoizedProps!==r.pendingProps)as=!0;else{if(!am(t,l)&&(r.flags&128)===0)return as=!1,CT(t,r,l);as=(t.flags&131072)!==0}else as=!1,an&&(r.flags&1048576)!==0&&Fy(r,Jo,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=tl(r.elementType),r.type=t,typeof t=="function")uf(t)?(c=al(t,c),r.tag=1,r=ab(null,r,t,c,l)):(r.tag=0,r=Jf(null,r,t,c,l));else{if(t!=null){var f=t.$$typeof;if(f===ke){r.tag=11,r=Jv(null,r,t,c,l);break e}else if(f===I){r.tag=14,r=Zv(null,r,t,c,l);break e}}throw r=We(t)||t,Error(a(306,r,""))}}return r;case 0:return Jf(t,r,r.type,r.pendingProps,l);case 1:return c=r.type,f=al(c,r.pendingProps),ab(t,r,c,f,l);case 3:e:{if(ht(r,r.stateNode.containerInfo),t===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,kf(t,r),ic(r,c,null,l);var b=r.memoizedState;if(c=b.cache,Ya(r,ss,c),c!==m.cache&&bf(r,[ss],l,!0),ac(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=ib(t,r,c,l);break e}else if(c!==f){f=lr(Error(a(424)),r),Zo(f),r=ib(t,r,c,l);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,An=dr(t.firstChild),gs=r,an=!0,Ga=null,ur=!0,l=tv(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Xi(),c===f){r=ya(t,r,l);break e}vs(t,r,c,l)}r=r.child}return r;case 26:return ih(t,r),t===null?(l=_0(r.type,null,r.pendingProps,null))?r.memoizedState=l:an||(l=r.type,t=r.pendingProps,c=Th(Me.current).createElement(l),c[Be]=r,c[ut]=t,bs(c,l,t),R(c),r.stateNode=c):r.memoizedState=_0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Wt(r),t===null&&an&&(c=r.stateNode=v0(r.type,r.pendingProps,Me.current),gs=r,ur=!0,f=An,oi(r.type)?(Vm=f,An=dr(c.firstChild)):An=f),vs(t,r,r.pendingProps.children,l),ih(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&an&&((f=c=An)&&(c=iE(c,r.type,r.pendingProps,ur),c!==null?(r.stateNode=c,gs=r,An=dr(c.firstChild),ur=!1,f=!0):f=!1),f||Ka(r)),Wt(r),f=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,Dm(f,m)?c=null:b!==null&&Dm(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=If(t,r,_T,null,null,l),Sc._currentValue=f),ih(t,r),vs(t,r,c,l),r.child;case 6:return t===null&&an&&((t=l=An)&&(l=lE(l,r.pendingProps,ur),l!==null?(r.stateNode=l,gs=r,An=null,t=!0):t=!1),t||Ka(r)),null;case 13:return lb(t,r,l);case 4:return ht(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=sl(r,null,c,l):vs(t,r,c,l),r.child;case 11:return Jv(t,r,r.type,r.pendingProps,l);case 7:return vs(t,r,r.pendingProps,l),r.child;case 8:return vs(t,r,r.pendingProps.children,l),r.child;case 12:return vs(t,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Ya(r,r.type,c.value),vs(t,r,c.children,l),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,Zi(r),f=ys(f),c=c(f),r.flags|=1,vs(t,r,c,l),r.child;case 14:return Zv(t,r,r.type,r.pendingProps,l);case 15:return eb(t,r,r.type,r.pendingProps,l);case 19:return cb(t,r,l);case 31:return RT(t,r,l);case 22:return tb(t,r,l,r.pendingProps);case 24:return Zi(r),c=ys(ss),t===null?(f=xf(),f===null&&(f=jn,m=wf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),r.memoizedState={parent:c,cache:f},Ef(r),Ya(r,ss,f)):((t.lanes&l)!==0&&(kf(t,r),ic(r,null,null,l),ac()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ya(r,ss,c)):(c=m.cache,Ya(r,ss,c),c!==f.cache&&bf(r,[ss],l,!0))),vs(t,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function va(t){t.flags|=4}function im(t,r,l,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Ob())t.flags|=8192;else throw nl=$u,Tf}else t.flags&=-16777217}function hb(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!S0(r))if(Ob())t.flags|=8192;else throw nl=$u,Tf}function oh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?bt():536870912,t.lanes|=r,eo|=r)}function dc(t,r){if(!an)switch(t.tailMode){case"hidden":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function In(t){var r=t.alternate!==null&&t.alternate.child===t.child,l=0,c=0;if(r)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=l,r}function AT(t,r,l){var c=r.pendingProps;switch(mf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(r),null;case 1:return In(r),null;case 3:return l=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ma(ss),pt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(zl(r)?va(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,gf())),In(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(va(r),m!==null?(In(r),hb(r,m)):(In(r),im(r,f,null,c,l))):m?m!==t.memoizedState?(va(r),In(r),hb(r,m)):(In(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&va(r),In(r),im(r,f,t,c,l)),null;case 27:if(pn(r),l=Me.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&va(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return In(r),null}t=Se.current,zl(r)?qy(r):(t=v0(f,c,l),r.stateNode=t,va(r))}return In(r),null;case 5:if(pn(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&va(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return In(r),null}if(m=Se.current,zl(r))qy(r);else{var b=Th(Me.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}m[Be]=r,m[ut]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(bs(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&va(r)}}return In(r),im(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,l),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&va(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(t=Me.current,zl(r)){if(t=r.stateNode,l=r.memoizedProps,c=null,f=gs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[Be]=r,t=!!(t.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||l0(t.nodeValue,l)),t||Ka(r,!0)}else t=Th(t).createTextNode(c),t[Be]=r,r.stateNode=t}return In(r),null;case 31:if(l=r.memoizedState,t===null||t.memoizedState!==null){if(c=zl(r),l!==null){if(t===null){if(!c)throw Error(a(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Be]=r}else Xi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;In(r),t=!1}else l=gf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return r.flags&256?(Qs(r),r):(Qs(r),null);if((r.flags&128)!==0)throw Error(a(558))}return In(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=zl(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Be]=r}else Xi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;In(r),f=!1}else f=gf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Qs(r),r):(Qs(r),null)}return Qs(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,t=t!==null&&t.memoizedState!==null,l&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),l!==t&&l&&(r.child.flags|=8192),oh(r,r.updateQueue),In(r),null);case 4:return pt(),t===null&&jm(r.stateNode.containerInfo),In(r),null;case 10:return ma(r.type),In(r),null;case 19:if(G(Xn),c=r.memoizedState,c===null)return In(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)dc(c,!1);else{if($n!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Yu(t),m!==null){for(r.flags|=128,dc(c,!1),t=m.updateQueue,r.updateQueue=t,oh(r,t),r.subtreeFlags=0,t=l,l=r.child;l!==null;)By(l,t),l=l.sibling;return ge(Xn,Xn.current&1|2),an&&da(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&Bt()>fh&&(r.flags|=128,f=!0,dc(c,!1),r.lanes=4194304)}else{if(!f)if(t=Yu(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,oh(r,t),dc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!an)return In(r),null}else 2*Bt()-c.renderingStartTime>fh&&l!==536870912&&(r.flags|=128,f=!0,dc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Bt(),t.sibling=null,l=Xn.current,ge(Xn,f?l&1|2:l&1),an&&da(r,c.treeForkCount),t):(In(r),null);case 22:case 23:return Qs(r),Rf(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(In(r),r.subtreeFlags&6&&(r.flags|=8192)):In(r),l=r.updateQueue,l!==null&&oh(r,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),t!==null&&G(el),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ma(ss),In(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function IT(t,r){switch(mf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ma(ss),pt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return pn(r),null;case 31:if(r.memoizedState!==null){if(Qs(r),r.alternate===null)throw Error(a(340));Xi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Qs(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Xi()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return G(Xn),null;case 4:return pt(),null;case 10:return ma(r.type),null;case 22:case 23:return Qs(r),Rf(),t!==null&&G(el),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ma(ss),null;case 25:return null;default:return null}}function db(t,r){switch(mf(r),r.tag){case 3:ma(ss),pt();break;case 26:case 27:case 5:pn(r);break;case 4:pt();break;case 31:r.memoizedState!==null&&Qs(r);break;case 13:Qs(r);break;case 19:G(Xn);break;case 10:ma(r.type);break;case 22:case 23:Qs(r),Rf(),t!==null&&G(el);break;case 24:ma(ss)}}function fc(t,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){c=void 0;var m=l.create,b=l.inst;c=m(),b.destroy=c}l=l.next}while(l!==f)}}catch(N){xn(r,r.return,N)}}function ti(t,r,l){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var b=c.inst,N=b.destroy;if(N!==void 0){b.destroy=void 0,f=r;var O=l,ee=N;try{ee()}catch(me){xn(f,O,me)}}}c=c.next}while(c!==m)}}catch(me){xn(r,r.return,me)}}function fb(t){var r=t.updateQueue;if(r!==null){var l=t.stateNode;try{sv(r,l)}catch(c){xn(t,t.return,c)}}}function mb(t,r,l){l.props=al(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(c){xn(t,r,c)}}function mc(t,r){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof l=="function"?t.refCleanup=l(c):l.current=c}}catch(f){xn(t,r,f)}}function Gr(t,r){var l=t.ref,c=t.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){xn(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){xn(t,r,f)}else l.current=null}function pb(t){var r=t.type,l=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){xn(t,t.return,f)}}function lm(t,r,l){try{var c=t.stateNode;eE(c,t.type,l,r),c[ut]=r}catch(f){xn(t,t.return,f)}}function gb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&oi(t.type)||t.tag===4}function om(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&oi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cm(t,r,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(t),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Is));else if(c!==4&&(c===27&&oi(t.type)&&(l=t.stateNode,r=null),t=t.child,t!==null))for(cm(t,r,l),t=t.sibling;t!==null;)cm(t,r,l),t=t.sibling}function ch(t,r,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?l.insertBefore(t,r):l.appendChild(t);else if(c!==4&&(c===27&&oi(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(ch(t,r,l),t=t.sibling;t!==null;)ch(t,r,l),t=t.sibling}function yb(t){var r=t.stateNode,l=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);bs(r,c,l),r[Be]=t,r[ut]=l}catch(m){xn(t,t.return,m)}}var ba=!1,is=!1,um=!1,vb=typeof WeakSet=="function"?WeakSet:Set,ds=null;function DT(t,r){if(t=t.containerInfo,Am=Ch,t=Cy(t),nf(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var b=0,N=-1,O=-1,ee=0,me=0,_e=t,te=null;t:for(;;){for(var le;_e!==l||f!==0&&_e.nodeType!==3||(N=b+f),_e!==m||c!==0&&_e.nodeType!==3||(O=b+c),_e.nodeType===3&&(b+=_e.nodeValue.length),(le=_e.firstChild)!==null;)te=_e,_e=le;for(;;){if(_e===t)break t;if(te===l&&++ee===f&&(N=b),te===m&&++me===c&&(O=b),(le=_e.nextSibling)!==null)break;_e=te,te=_e.parentNode}_e=le}l=N===-1||O===-1?null:{start:N,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Im={focusedElem:t,selectionRange:l},Ch=!1,ds=r;ds!==null;)if(r=ds,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ds=t;else for(;ds!==null;){switch(r=ds,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)f=t[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,l=r,f=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var et=al(l.type,f);t=c.getSnapshotBeforeUpdate(et,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(yt){xn(l,l.return,yt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,l=t.nodeType,l===9)Pm(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Pm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,ds=t;break}ds=r.return}}function bb(t,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:_a(t,l),c&4&&fc(5,l);break;case 1:if(_a(t,l),c&4)if(t=l.stateNode,r===null)try{t.componentDidMount()}catch(b){xn(l,l.return,b)}else{var f=al(l.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){xn(l,l.return,b)}}c&64&&fb(l),c&512&&mc(l,l.return);break;case 3:if(_a(t,l),c&64&&(t=l.updateQueue,t!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{sv(t,r)}catch(b){xn(l,l.return,b)}}break;case 27:r===null&&c&4&&yb(l);case 26:case 5:_a(t,l),r===null&&c&4&&pb(l),c&512&&mc(l,l.return);break;case 12:_a(t,l);break;case 31:_a(t,l),c&4&&xb(t,l);break;case 13:_a(t,l),c&4&&Tb(t,l),c&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=FT.bind(null,l),oE(t,l))));break;case 22:if(c=l.memoizedState!==null||ba,!c){r=r!==null&&r.memoizedState!==null||is,f=ba;var m=is;ba=c,(is=r)&&!m?xa(t,l,(l.subtreeFlags&8772)!==0):_a(t,l),ba=f,is=m}break;case 30:break;default:_a(t,l)}}function wb(t){var r=t.alternate;r!==null&&(t.alternate=null,wb(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Hn(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ln=null,Os=!1;function wa(t,r,l){for(l=l.child;l!==null;)_b(t,r,l),l=l.sibling}function _b(t,r,l){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(Pe,l)}catch{}switch(l.tag){case 26:is||Gr(l,r),wa(t,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:is||Gr(l,r);var c=Ln,f=Os;oi(l.type)&&(Ln=l.stateNode,Os=!1),wa(t,r,l),Tc(l.stateNode),Ln=c,Os=f;break;case 5:is||Gr(l,r);case 6:if(c=Ln,f=Os,Ln=null,wa(t,r,l),Ln=c,Os=f,Ln!==null)if(Os)try{(Ln.nodeType===9?Ln.body:Ln.nodeName==="HTML"?Ln.ownerDocument.body:Ln).removeChild(l.stateNode)}catch(m){xn(l,r,m)}else try{Ln.removeChild(l.stateNode)}catch(m){xn(l,r,m)}break;case 18:Ln!==null&&(Os?(t=Ln,f0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),oo(t)):f0(Ln,l.stateNode));break;case 4:c=Ln,f=Os,Ln=l.stateNode.containerInfo,Os=!0,wa(t,r,l),Ln=c,Os=f;break;case 0:case 11:case 14:case 15:ti(2,l,r),is||ti(4,l,r),wa(t,r,l);break;case 1:is||(Gr(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&mb(l,r,c)),wa(t,r,l);break;case 21:wa(t,r,l);break;case 22:is=(c=is)||l.memoizedState!==null,wa(t,r,l),is=c;break;default:wa(t,r,l)}}function xb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{oo(t)}catch(l){xn(r,r.return,l)}}}function Tb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{oo(t)}catch(l){xn(r,r.return,l)}}function MT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new vb),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new vb),r;default:throw Error(a(435,t.tag))}}function uh(t,r){var l=MT(t);r.forEach(function(c){if(!l.has(c)){l.add(c);var f=HT.bind(null,t,c);c.then(f,f)}})}function Vs(t,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],m=t,b=r,N=b;e:for(;N!==null;){switch(N.tag){case 27:if(oi(N.type)){Ln=N.stateNode,Os=!1;break e}break;case 5:Ln=N.stateNode,Os=!1;break e;case 3:case 4:Ln=N.stateNode.containerInfo,Os=!0;break e}N=N.return}if(Ln===null)throw Error(a(160));_b(m,b,f),Ln=null,Os=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Eb(r,t),r=r.sibling}var Nr=null;function Eb(t,r){var l=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vs(r,t),Bs(t),c&4&&(ti(3,t,t.return),fc(3,t),ti(5,t,t.return));break;case 1:Vs(r,t),Bs(t),c&512&&(is||l===null||Gr(l,l.return)),c&64&&ba&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=Nr;if(Vs(r,t),Bs(t),c&512&&(is||l===null||Gr(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=t.memoizedState,l===null)if(c===null)if(t.stateNode===null){e:{c=t.type,l=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Bn]||m[Be]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),bs(m,c,l),m[Be]=t,R(m),c=m;break e;case"link":var b=E0("link","href",f).get(c+(l.href||""));if(b){for(var N=0;N<b.length;N++)if(m=b[N],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(N,1);break t}}m=f.createElement(c),bs(m,c,l),f.head.appendChild(m);break;case"meta":if(b=E0("meta","content",f).get(c+(l.content||""))){for(N=0;N<b.length;N++)if(m=b[N],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(N,1);break t}}m=f.createElement(c),bs(m,c,l),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[Be]=t,R(m),c=m}t.stateNode=c}else k0(f,t.type,t.stateNode);else t.stateNode=T0(f,c,t.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?k0(f,t.type,t.stateNode):T0(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&lm(t,t.memoizedProps,l.memoizedProps)}break;case 27:Vs(r,t),Bs(t),c&512&&(is||l===null||Gr(l,l.return)),l!==null&&c&4&&lm(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Vs(r,t),Bs(t),c&512&&(is||l===null||Gr(l,l.return)),t.flags&32){f=t.stateNode;try{zn(f,"")}catch(et){xn(t,t.return,et)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,lm(t,f,l!==null?l.memoizedProps:f)),c&1024&&(um=!0);break;case 6:if(Vs(r,t),Bs(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,l=t.stateNode;try{l.nodeValue=c}catch(et){xn(t,t.return,et)}}break;case 3:if(Sh=null,f=Nr,Nr=Eh(r.containerInfo),Vs(r,t),Nr=f,Bs(t),c&4&&l!==null&&l.memoizedState.isDehydrated)try{oo(r.containerInfo)}catch(et){xn(t,t.return,et)}um&&(um=!1,kb(t));break;case 4:c=Nr,Nr=Eh(t.stateNode.containerInfo),Vs(r,t),Bs(t),Nr=c;break;case 12:Vs(r,t),Bs(t);break;case 31:Vs(r,t),Bs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,uh(t,c)));break;case 13:Vs(r,t),Bs(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(dh=Bt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,uh(t,c)));break;case 22:f=t.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,ee=ba,me=is;if(ba=ee||f,is=me||O,Vs(r,t),is=me,ba=ee,Bs(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(l===null||O||ba||is||il(t)),l=null,r=t;;){if(r.tag===5||r.tag===26){if(l===null){O=l=r;try{if(m=O.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{N=O.stateNode;var _e=O.memoizedProps.style,te=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;N.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(et){xn(O,O.return,et)}}}else if(r.tag===6){if(l===null){O=r;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(et){xn(O,O.return,et)}}}else if(r.tag===18){if(l===null){O=r;try{var le=O.stateNode;f?m0(le,!0):m0(O.stateNode,!1)}catch(et){xn(O,O.return,et)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,uh(t,l))));break;case 19:Vs(r,t),Bs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,uh(t,c)));break;case 30:break;case 21:break;default:Vs(r,t),Bs(t)}}function Bs(t){var r=t.flags;if(r&2){try{for(var l,c=t.return;c!==null;){if(gb(c)){l=c;break}c=c.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var f=l.stateNode,m=om(t);ch(t,m,f);break;case 5:var b=l.stateNode;l.flags&32&&(zn(b,""),l.flags&=-33);var N=om(t);ch(t,N,b);break;case 3:case 4:var O=l.stateNode.containerInfo,ee=om(t);cm(t,ee,O);break;default:throw Error(a(161))}}catch(me){xn(t,t.return,me)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function kb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;kb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function _a(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)bb(t,r.alternate,r),r=r.sibling}function il(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ti(4,r,r.return),il(r);break;case 1:Gr(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&mb(r,r.return,l),il(r);break;case 27:Tc(r.stateNode);case 26:case 5:Gr(r,r.return),il(r);break;case 22:r.memoizedState===null&&il(r);break;case 30:il(r);break;default:il(r)}t=t.sibling}}function xa(t,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:xa(f,m,l),fc(4,m);break;case 1:if(xa(f,m,l),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){xn(c,c.return,ee)}if(c=m,f=c.updateQueue,f!==null){var N=c.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)nv(O[f],N)}catch(ee){xn(c,c.return,ee)}}l&&b&64&&fb(m),mc(m,m.return);break;case 27:yb(m);case 26:case 5:xa(f,m,l),l&&c===null&&b&4&&pb(m),mc(m,m.return);break;case 12:xa(f,m,l);break;case 31:xa(f,m,l),l&&b&4&&xb(f,m);break;case 13:xa(f,m,l),l&&b&4&&Tb(f,m);break;case 22:m.memoizedState===null&&xa(f,m,l),mc(m,m.return);break;case 30:break;default:xa(f,m,l)}r=r.sibling}}function hm(t,r){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&ec(l))}function dm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ec(t))}function jr(t,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Sb(t,r,l,c),r=r.sibling}function Sb(t,r,l,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:jr(t,r,l,c),f&2048&&fc(9,r);break;case 1:jr(t,r,l,c);break;case 3:jr(t,r,l,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ec(t)));break;case 12:if(f&2048){jr(t,r,l,c),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,N=m.onPostCommit;typeof N=="function"&&N(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){xn(r,r.return,O)}}else jr(t,r,l,c);break;case 31:jr(t,r,l,c);break;case 13:jr(t,r,l,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?jr(t,r,l,c):pc(t,r):m._visibility&2?jr(t,r,l,c):(m._visibility|=2,Xl(t,r,l,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&hm(b,r);break;case 24:jr(t,r,l,c),f&2048&&dm(r.alternate,r);break;default:jr(t,r,l,c)}}function Xl(t,r,l,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,b=r,N=l,O=c,ee=b.flags;switch(b.tag){case 0:case 11:case 15:Xl(m,b,N,O,f),fc(8,b);break;case 23:break;case 22:var me=b.stateNode;b.memoizedState!==null?me._visibility&2?Xl(m,b,N,O,f):pc(m,b):(me._visibility|=2,Xl(m,b,N,O,f)),f&&ee&2048&&hm(b.alternate,b);break;case 24:Xl(m,b,N,O,f),f&&ee&2048&&dm(b.alternate,b);break;default:Xl(m,b,N,O,f)}r=r.sibling}}function pc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=t,c=r,f=c.flags;switch(c.tag){case 22:pc(l,c),f&2048&&hm(c.alternate,c);break;case 24:pc(l,c),f&2048&&dm(c.alternate,c);break;default:pc(l,c)}r=r.sibling}}var gc=8192;function Jl(t,r,l){if(t.subtreeFlags&gc)for(t=t.child;t!==null;)Nb(t,r,l),t=t.sibling}function Nb(t,r,l){switch(t.tag){case 26:Jl(t,r,l),t.flags&gc&&t.memoizedState!==null&&wE(l,Nr,t.memoizedState,t.memoizedProps);break;case 5:Jl(t,r,l);break;case 3:case 4:var c=Nr;Nr=Eh(t.stateNode.containerInfo),Jl(t,r,l),Nr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=gc,gc=16777216,Jl(t,r,l),gc=c):Jl(t,r,l));break;default:Jl(t,r,l)}}function jb(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function yc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];ds=c,Cb(c,t)}jb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rb(t),t=t.sibling}function Rb(t){switch(t.tag){case 0:case 11:case 15:yc(t),t.flags&2048&&ti(9,t,t.return);break;case 3:yc(t);break;case 12:yc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,hh(t)):yc(t);break;default:yc(t)}}function hh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];ds=c,Cb(c,t)}jb(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ti(8,r,r.return),hh(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,hh(r));break;default:hh(r)}t=t.sibling}}function Cb(t,r){for(;ds!==null;){var l=ds;switch(l.tag){case 0:case 11:case 15:ti(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ec(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,ds=c;else e:for(l=t;ds!==null;){c=ds;var f=c.sibling,m=c.return;if(wb(c),c===l){ds=null;break e}if(f!==null){f.return=m,ds=f;break e}ds=m}}}var PT={getCacheForType:function(t){var r=ys(ss),l=r.data.get(t);return l===void 0&&(l=t(),r.data.set(t,l)),l},cacheSignal:function(){return ys(ss).controller.signal}},LT=typeof WeakMap=="function"?WeakMap:Map,vn=0,jn=null,Kt=null,Xt=0,_n=0,Xs=null,ni=!1,Zl=!1,fm=!1,Ta=0,$n=0,si=0,ll=0,mm=0,Js=0,eo=0,vc=null,Us=null,pm=!1,dh=0,Ab=0,fh=1/0,mh=null,ri=null,us=0,ai=null,to=null,Ea=0,gm=0,ym=null,Ib=null,bc=0,vm=null;function Zs(){return(vn&2)!==0&&Xt!==0?Xt&-Xt:Y.T!==null?Em():fe()}function Db(){if(Js===0)if((Xt&536870912)===0||an){var t=qt;qt<<=1,(qt&3932160)===0&&(qt=262144),Js=t}else Js=536870912;return t=Ys.current,t!==null&&(t.flags|=32),Js}function zs(t,r,l){(t===jn&&(_n===2||_n===9)||t.cancelPendingCommit!==null)&&(no(t,0),ii(t,Xt,Js,!1)),$t(t,l),((vn&2)===0||t!==jn)&&(t===jn&&((vn&2)===0&&(ll|=l),$n===4&&ii(t,Xt,Js,!1)),Kr(t))}function Mb(t,r,l){if((vn&6)!==0)throw Error(a(327));var c=!l&&(r&127)===0&&(r&t.expiredLanes)===0||Dt(t,r),f=c?BT(t,r):wm(t,r,!0),m=c;do{if(f===0){Zl&&!c&&ii(t,r,0,!1);break}else{if(l=t.current.alternate,m&&!OT(l)){f=wm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var N=t;f=vc;var O=N.current.memoizedState.isDehydrated;if(O&&(no(N,b).flags|=256),b=wm(N,b,!1),b!==2){if(fm&&!O){N.errorRecoveryDisabledLanes|=m,ll|=m,f=4;break e}m=Us,Us=f,m!==null&&(Us===null?Us=m:Us.push.apply(Us,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){no(t,0),ii(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:ii(c,r,Js,!ni);break e;case 2:Us=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=dh+300-Bt(),10<f)){if(ii(c,r,Js,!ni),St(c,0,!0)!==0)break e;Ea=r,c.timeoutHandle=h0(Pb.bind(null,c,l,Us,mh,pm,r,Js,ll,eo,ni,m,"Throttled",-0,0),f);break e}Pb(c,l,Us,mh,pm,r,Js,ll,eo,ni,m,null,-0,0)}}break}while(!0);Kr(t)}function Pb(t,r,l,c,f,m,b,N,O,ee,me,_e,te,le){if(t.timeoutHandle=-1,_e=r.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Is},Nb(r,m,_e);var et=(m&62914560)===m?dh-Bt():(m&4194048)===m?Ab-Bt():0;if(et=_E(_e,et),et!==null){Ea=m,t.cancelPendingCommit=et(Hb.bind(null,t,r,m,l,c,f,b,N,O,me,_e,null,te,le)),ii(t,m,b,!ee);return}}Hb(t,r,m,l,c,f,b,N,O)}function OT(t){for(var r=t;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!Gs(m(),f))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ii(t,r,l,c){r&=~mm,r&=~ll,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-Ie(f),b=1<<m;c[m]=-1,f&=~b}l!==0&&on(t,l,r)}function ph(){return(vn&6)===0?(wc(0),!1):!0}function bm(){if(Kt!==null){if(_n===0)var t=Kt.return;else t=Kt,fa=Ji=null,Pf(t),Wl=null,nc=0,t=Kt;for(;t!==null;)db(t.alternate,t),t=t.return;Kt=null}}function no(t,r){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,sE(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Ea=0,bm(),jn=t,Kt=l=ha(t.current,null),Xt=r,_n=0,Xs=null,ni=!1,Zl=Dt(t,r),fm=!1,eo=Js=mm=ll=si=$n=0,Us=vc=null,pm=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-Ie(c),m=1<<f;r|=t[f],c&=~m}return Ta=r,Lu(),l}function Lb(t,r){Vt=null,Y.H=uc,r===$l||r===qu?(r=Jy(),_n=3):r===Tf?(r=Jy(),_n=4):_n=r===Xf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Xs=r,Kt===null&&($n=1,rh(t,lr(r,t.current)))}function Ob(){var t=Ys.current;return t===null?!0:(Xt&4194048)===Xt?hr===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?t===hr:!1}function Vb(){var t=Y.H;return Y.H=uc,t===null?uc:t}function Bb(){var t=Y.A;return Y.A=PT,t}function gh(){$n=4,ni||(Xt&4194048)!==Xt&&Ys.current!==null||(Zl=!0),(si&134217727)===0&&(ll&134217727)===0||jn===null||ii(jn,Xt,Js,!1)}function wm(t,r,l){var c=vn;vn|=2;var f=Vb(),m=Bb();(jn!==t||Xt!==r)&&(mh=null,no(t,r)),r=!1;var b=$n;e:do try{if(_n!==0&&Kt!==null){var N=Kt,O=Xs;switch(_n){case 8:bm(),b=6;break e;case 3:case 2:case 9:case 6:Ys.current===null&&(r=!0);var ee=_n;if(_n=0,Xs=null,so(t,N,O,ee),l&&Zl){b=0;break e}break;default:ee=_n,_n=0,Xs=null,so(t,N,O,ee)}}VT(),b=$n;break}catch(me){Lb(t,me)}while(!0);return r&&t.shellSuspendCounter++,fa=Ji=null,vn=c,Y.H=f,Y.A=m,Kt===null&&(jn=null,Xt=0,Lu()),b}function VT(){for(;Kt!==null;)Ub(Kt)}function BT(t,r){var l=vn;vn|=2;var c=Vb(),f=Bb();jn!==t||Xt!==r?(mh=null,fh=Bt()+500,no(t,r)):Zl=Dt(t,r);e:do try{if(_n!==0&&Kt!==null){r=Kt;var m=Xs;t:switch(_n){case 1:_n=0,Xs=null,so(t,r,m,1);break;case 2:case 9:if(Qy(m)){_n=0,Xs=null,zb(r);break}r=function(){_n!==2&&_n!==9||jn!==t||(_n=7),Kr(t)},m.then(r,r);break e;case 3:_n=7;break e;case 4:_n=5;break e;case 7:Qy(m)?(_n=0,Xs=null,zb(r)):(_n=0,Xs=null,so(t,r,m,7));break;case 5:var b=null;switch(Kt.tag){case 26:b=Kt.memoizedState;case 5:case 27:var N=Kt;if(b?S0(b):N.stateNode.complete){_n=0,Xs=null;var O=N.sibling;if(O!==null)Kt=O;else{var ee=N.return;ee!==null?(Kt=ee,yh(ee)):Kt=null}break t}}_n=0,Xs=null,so(t,r,m,5);break;case 6:_n=0,Xs=null,so(t,r,m,6);break;case 8:bm(),$n=6;break e;default:throw Error(a(462))}}UT();break}catch(me){Lb(t,me)}while(!0);return fa=Ji=null,Y.H=c,Y.A=f,vn=l,Kt!==null?0:(jn=null,Xt=0,Lu(),$n)}function UT(){for(;Kt!==null&&!ns();)Ub(Kt)}function Ub(t){var r=ub(t.alternate,t,Ta);t.memoizedProps=t.pendingProps,r===null?yh(t):Kt=r}function zb(t){var r=t,l=r.alternate;switch(r.tag){case 15:case 0:r=rb(l,r,r.pendingProps,r.type,void 0,Xt);break;case 11:r=rb(l,r,r.pendingProps,r.type.render,r.ref,Xt);break;case 5:Pf(r);default:db(l,r),r=Kt=By(r,Ta),r=ub(l,r,Ta)}t.memoizedProps=t.pendingProps,r===null?yh(t):Kt=r}function so(t,r,l,c){fa=Ji=null,Pf(r),Wl=null,nc=0;var f=r.return;try{if(jT(t,f,r,l,Xt)){$n=1,rh(t,lr(l,t.current)),Kt=null;return}}catch(m){if(f!==null)throw Kt=f,m;$n=1,rh(t,lr(l,t.current)),Kt=null;return}r.flags&32768?(an||c===1?t=!0:Zl||(Xt&536870912)!==0?t=!1:(ni=t=!0,(c===2||c===9||c===3||c===6)&&(c=Ys.current,c!==null&&c.tag===13&&(c.flags|=16384))),Fb(r,t)):yh(r)}function yh(t){var r=t;do{if((r.flags&32768)!==0){Fb(r,ni);return}t=r.return;var l=AT(r.alternate,r,Ta);if(l!==null){Kt=l;return}if(r=r.sibling,r!==null){Kt=r;return}Kt=r=t}while(r!==null);$n===0&&($n=5)}function Fb(t,r){do{var l=IT(t.alternate,t);if(l!==null){l.flags&=32767,Kt=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(t=t.sibling,t!==null)){Kt=t;return}Kt=t=l}while(t!==null);$n=6,Kt=null}function Hb(t,r,l,c,f,m,b,N,O){t.cancelPendingCommit=null;do vh();while(us!==0);if((vn&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=of,sn(t,l,m,b,N,O),t===jn&&(Kt=jn=null,Xt=0),to=r,ai=t,Ea=l,gm=m,ym=f,Ib=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,qT(de,function(){return Kb(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=Te.p,Te.p=2,b=vn,vn|=4;try{DT(t,r,l)}finally{vn=b,Te.p=f,Y.T=c}}us=1,qb(),$b(),Wb()}}function qb(){if(us===1){us=0;var t=ai,r=to,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var c=Te.p;Te.p=2;var f=vn;vn|=4;try{Eb(r,t);var m=Im,b=Cy(t.containerInfo),N=m.focusedElem,O=m.selectionRange;if(b!==N&&N&&N.ownerDocument&&Ry(N.ownerDocument.documentElement,N)){if(O!==null&&nf(N)){var ee=O.start,me=O.end;if(me===void 0&&(me=ee),"selectionStart"in N)N.selectionStart=ee,N.selectionEnd=Math.min(me,N.value.length);else{var _e=N.ownerDocument||document,te=_e&&_e.defaultView||window;if(te.getSelection){var le=te.getSelection(),et=N.textContent.length,yt=Math.min(O.start,et),Sn=O.end===void 0?yt:Math.min(O.end,et);!le.extend&&yt>Sn&&(b=Sn,Sn=yt,yt=b);var K=jy(N,yt),F=jy(N,Sn);if(K&&F&&(le.rangeCount!==1||le.anchorNode!==K.node||le.anchorOffset!==K.offset||le.focusNode!==F.node||le.focusOffset!==F.offset)){var Z=_e.createRange();Z.setStart(K.node,K.offset),le.removeAllRanges(),yt>Sn?(le.addRange(Z),le.extend(F.node,F.offset)):(Z.setEnd(F.node,F.offset),le.addRange(Z))}}}}for(_e=[],le=N;le=le.parentNode;)le.nodeType===1&&_e.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<_e.length;N++){var ye=_e[N];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Ch=!!Am,Im=Am=null}finally{vn=f,Te.p=c,Y.T=l}}t.current=r,us=2}}function $b(){if(us===2){us=0;var t=ai,r=to,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var c=Te.p;Te.p=2;var f=vn;vn|=4;try{bb(t,r.alternate,r)}finally{vn=f,Te.p=c,Y.T=l}}us=3}}function Wb(){if(us===4||us===3){us=0,At();var t=ai,r=to,l=Ea,c=Ib;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?us=5:(us=0,to=ai=null,Gb(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ri=null),ue(l),r=r.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(Pe,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,f=Te.p,Te.p=2,Y.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var N=c[b];m(N.value,{componentStack:N.stack})}}finally{Y.T=r,Te.p=f}}(Ea&3)!==0&&vh(),Kr(t),f=t.pendingLanes,(l&261930)!==0&&(f&42)!==0?t===vm?bc++:(bc=0,vm=t):bc=0,wc(0)}}function Gb(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ec(r)))}function vh(){return qb(),$b(),Wb(),Kb()}function Kb(){if(us!==5)return!1;var t=ai,r=gm;gm=0;var l=ue(Ea),c=Y.T,f=Te.p;try{Te.p=32>l?32:l,Y.T=null,l=ym,ym=null;var m=ai,b=Ea;if(us=0,to=ai=null,Ea=0,(vn&6)!==0)throw Error(a(331));var N=vn;if(vn|=4,Rb(m.current),Sb(m,m.current,b,l),vn=N,wc(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(Pe,m)}catch{}return!0}finally{Te.p=f,Y.T=c,Gb(t,r)}}function Yb(t,r,l){r=lr(l,r),r=Qf(t.stateNode,r,2),t=Ja(t,r,2),t!==null&&($t(t,2),Kr(t))}function xn(t,r,l){if(t.tag===3)Yb(t,t,l);else for(;r!==null;){if(r.tag===3){Yb(r,t,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ri===null||!ri.has(c))){t=lr(l,t),l=Qv(2),c=Ja(r,l,2),c!==null&&(Xv(l,c,r,t),$t(c,2),Kr(c));break}}r=r.return}}function _m(t,r,l){var c=t.pingCache;if(c===null){c=t.pingCache=new LT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(l)||(fm=!0,f.add(l),t=zT.bind(null,t,r,l),r.then(t,t))}function zT(t,r,l){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,jn===t&&(Xt&l)===l&&($n===4||$n===3&&(Xt&62914560)===Xt&&300>Bt()-dh?(vn&2)===0&&no(t,0):mm|=l,eo===Xt&&(eo=0)),Kr(t)}function Qb(t,r){r===0&&(r=bt()),t=Yi(t,r),t!==null&&($t(t,r),Kr(t))}function FT(t){var r=t.memoizedState,l=0;r!==null&&(l=r.retryLane),Qb(t,l)}function HT(t,r){var l=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),Qb(t,l)}function qT(t,r){return He(t,r)}var bh=null,ro=null,xm=!1,wh=!1,Tm=!1,li=0;function Kr(t){t!==ro&&t.next===null&&(ro===null?bh=ro=t:ro=ro.next=t),wh=!0,xm||(xm=!0,WT())}function wc(t,r){if(!Tm&&wh){Tm=!0;do for(var l=!1,c=bh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,N=c.pingedLanes;m=(1<<31-Ie(42|t)+1)-1,m&=f&~(b&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,e0(c,m))}else m=Xt,m=St(c,c===jn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Dt(c,m)||(l=!0,e0(c,m));c=c.next}while(l);Tm=!1}}function $T(){Xb()}function Xb(){wh=xm=!1;var t=0;li!==0&&nE()&&(t=li);for(var r=Bt(),l=null,c=bh;c!==null;){var f=c.next,m=Jb(c,r);m===0?(c.next=null,l===null?bh=f:l.next=f,f===null&&(ro=l)):(l=c,(t!==0||(m&3)!==0)&&(wh=!0)),c=f}us!==0&&us!==5||wc(t),li!==0&&(li=0)}function Jb(t,r){for(var l=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Ie(m),N=1<<b,O=f[b];O===-1?((N&l)===0||(N&c)!==0)&&(f[b]=Ft(N,r)):O<=r&&(t.expiredLanes|=N),m&=~N}if(r=jn,l=Xt,l=St(t,t===r?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,l===0||t===r&&(_n===2||_n===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Gt(c),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Dt(t,l)){if(r=l&-l,r===t.callbackPriority)return r;switch(c!==null&&Gt(c),ue(l)){case 2:case 8:l=wn;break;case 32:l=de;break;case 268435456:l=Ne;break;default:l=de}return c=Zb.bind(null,t),l=He(l,c),t.callbackPriority=r,t.callbackNode=l,r}return c!==null&&c!==null&&Gt(c),t.callbackPriority=2,t.callbackNode=null,2}function Zb(t,r){if(us!==0&&us!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(vh()&&t.callbackNode!==l)return null;var c=Xt;return c=St(t,t===jn?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Mb(t,c,r),Jb(t,Bt()),t.callbackNode!=null&&t.callbackNode===l?Zb.bind(null,t):null)}function e0(t,r){if(vh())return null;Mb(t,r,!0)}function WT(){rE(function(){(vn&6)!==0?He(Ht,$T):Xb()})}function Em(){if(li===0){var t=Hl;t===0&&(t=_t,_t<<=1,(_t&261888)===0&&(_t=256)),li=t}return li}function t0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ua(""+t)}function n0(t,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,t.id&&l.setAttribute("form",t.id),r.parentNode.insertBefore(l,r),t=new FormData(t),l.parentNode.removeChild(l),t}function GT(t,r,l,c,f){if(r==="submit"&&l&&l.stateNode===f){var m=t0((f[ut]||null).action),b=c.submitter;b&&(r=(r=b[ut]||null)?t0(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var N=new zr("action","action",null,c,f);t.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(li!==0){var O=b?n0(f,b):new FormData(f);qf(l,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(N.preventDefault(),O=b?n0(f,b):new FormData(f),qf(l,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var km=0;km<lf.length;km++){var Sm=lf[km],KT=Sm.toLowerCase(),YT=Sm[0].toUpperCase()+Sm.slice(1);Sr(KT,"on"+YT)}Sr(Dy,"onAnimationEnd"),Sr(My,"onAnimationIteration"),Sr(Py,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(hT,"onTransitionRun"),Sr(dT,"onTransitionStart"),Sr(fT,"onTransitionCancel"),Sr(Ly,"onTransitionEnd"),Ce("onMouseEnter",["mouseout","mouseover"]),Ce("onMouseLeave",["mouseout","mouseover"]),Ce("onPointerEnter",["pointerout","pointerover"]),Ce("onPointerLeave",["pointerout","pointerover"]),Le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Le("onBeforeInput",["compositionend","keypress","textInput","paste"]),Le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_c));function s0(t,r){r=(r&4)!==0;for(var l=0;l<t.length;l++){var c=t[l],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var N=c[b],O=N.instance,ee=N.currentTarget;if(N=N.listener,O!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=ee;try{m(f)}catch(me){Pu(me)}f.currentTarget=null,m=O}else for(b=0;b<c.length;b++){if(N=c[b],O=N.instance,ee=N.currentTarget,N=N.listener,O!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=ee;try{m(f)}catch(me){Pu(me)}f.currentTarget=null,m=O}}}}function Yt(t,r){var l=r[lt];l===void 0&&(l=r[lt]=new Set);var c=t+"__bubble";l.has(c)||(r0(r,t,2,!1),l.add(c))}function Nm(t,r,l){var c=0;r&&(c|=4),r0(l,t,c,r)}var _h="_reactListening"+Math.random().toString(36).slice(2);function jm(t){if(!t[_h]){t[_h]=!0,$.forEach(function(l){l!=="selectionchange"&&(QT.has(l)||Nm(l,!1,t),Nm(l,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[_h]||(r[_h]=!0,Nm("selectionchange",!1,r))}}function r0(t,r,l,c){switch(D0(r)){case 2:var f=EE;break;case 8:f=kE;break;default:f=Hm}l=f.bind(null,r,l,t),f=void 0,!zi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,l,{capture:!0,passive:f}):t.addEventListener(r,l,!0):f!==void 0?t.addEventListener(r,l,{passive:f}):t.addEventListener(r,l,!1)}function Rm(t,r,l,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var N=c.stateNode.containerInfo;if(N===f)break;if(b===4)for(b=c.return;b!==null;){var O=b.tag;if((O===3||O===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;N!==null;){if(b=hn(N),b===null)return;if(O=b.tag,O===5||O===6||O===26||O===27){c=m=b;continue e}N=N.parentNode}}c=c.return}Fa(function(){var ee=m,me=sr(l),_e=[];e:{var te=Oy.get(t);if(te!==void 0){var le=zr,et=t;switch(t){case"keypress":if(Hi(l)===0)break e;case"keydown":case"keyup":le=Iu;break;case"focusin":et="focus",le=$i;break;case"focusout":et="blur",le=$i;break;case"beforeblur":case"afterblur":le=$i;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Tu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=v;break;case Dy:case My:case Py:le=ku;break;case Ly:le=j;break;case"scroll":case"scrollend":le=$o;break;case"wheel":le=ae;break;case"copy":case"cut":case"paste":le=Su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ua;break;case"toggle":case"beforetoggle":le=Ot}var yt=(r&4)!==0,Sn=!yt&&(t==="scroll"||t==="scrollend"),K=yt?te!==null?te+"Capture":null:te;yt=[];for(var F=ee,Z;F!==null;){var ye=F;if(Z=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||Z===null||K===null||(ye=xr(F,K),ye!=null&&yt.push(xc(F,ye,Z))),Sn)break;F=F.return}0<yt.length&&(te=new le(te,et,null,l,me),_e.push({event:te,listeners:yt}))}}if((r&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",te&&l!==Fo&&(et=l.relatedTarget||l.fromElement)&&(hn(et)||et[Ye]))break e;if((le||te)&&(te=me.window===me?me:(te=me.ownerDocument)?te.defaultView||te.parentWindow:window,le?(et=l.relatedTarget||l.toElement,le=ee,et=et?hn(et):null,et!==null&&(Sn=u(et),yt=et.tag,et!==Sn||yt!==5&&yt!==27&&yt!==6)&&(et=null)):(le=null,et=ee),le!==et)){if(yt=Wo,ye="onMouseLeave",K="onMouseEnter",F="mouse",(t==="pointerout"||t==="pointerover")&&(yt=ua,ye="onPointerLeave",K="onPointerEnter",F="pointer"),Sn=le==null?te:ie(le),Z=et==null?te:ie(et),te=new yt(ye,F+"leave",le,l,me),te.target=Sn,te.relatedTarget=Z,ye=null,hn(me)===ee&&(yt=new yt(K,F+"enter",et,l,me),yt.target=Z,yt.relatedTarget=Sn,ye=yt),Sn=ye,le&&et)t:{for(yt=XT,K=le,F=et,Z=0,ye=K;ye;ye=yt(ye))Z++;ye=0;for(var ft=F;ft;ft=yt(ft))ye++;for(;0<Z-ye;)K=yt(K),Z--;for(;0<ye-Z;)F=yt(F),ye--;for(;Z--;){if(K===F||F!==null&&K===F.alternate){yt=K;break t}K=yt(K),F=yt(F)}yt=null}else yt=null;le!==null&&a0(_e,te,le,yt,!1),et!==null&&Sn!==null&&a0(_e,Sn,et,yt,!0)}}e:{if(te=ee?ie(ee):window,le=te.nodeName&&te.nodeName.toLowerCase(),le==="select"||le==="input"&&te.type==="file")var fn=xy;else if(wy(te))if(Ty)fn=oT;else{fn=iT;var it=aT}else le=te.nodeName,!le||le.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&ks(ee.elementType)&&(fn=xy):fn=lT;if(fn&&(fn=fn(t,ee))){_y(_e,fn,l,me);break e}it&&it(t,te,ee),t==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&Ba(te,"number",te.value)}switch(it=ee?ie(ee):window,t){case"focusin":(wy(it)||it.contentEditable==="true")&&(Pl=it,sf=ee,Xo=null);break;case"focusout":Xo=sf=Pl=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,Ay(_e,l,me);break;case"selectionchange":if(uT)break;case"keydown":case"keyup":Ay(_e,l,me)}var Ut;if(yn)e:{switch(t){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else Ml?Wi(t,l)&&(Jt="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Jt="onCompositionStart");Jt&&(qr&&l.locale!=="ko"&&(Ml||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&Ml&&(Ut=qo()):(Ur=me,Ho="value"in Ur?Ur.value:Ur.textContent,Ml=!0)),it=xh(ee,Jt),0<it.length&&(Jt=new Hr(Jt,t,null,l,me),_e.push({event:Jt,listeners:it}),Ut?Jt.data=Ut:(Ut=Dl(l),Ut!==null&&(Jt.data=Ut)))),(Ut=ar?tT(t,l):nT(t,l))&&(Jt=xh(ee,"onBeforeInput"),0<Jt.length&&(it=new Hr("onBeforeInput","beforeinput",null,l,me),_e.push({event:it,listeners:Jt}),it.data=Ut)),GT(_e,t,ee,l,me)}s0(_e,r)})}function xc(t,r,l){return{instance:t,listener:r,currentTarget:l}}function xh(t,r){for(var l=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=xr(t,l),f!=null&&c.unshift(xc(t,f,m)),f=xr(t,r),f!=null&&c.push(xc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function XT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function a0(t,r,l,c,f){for(var m=r._reactName,b=[];l!==null&&l!==c;){var N=l,O=N.alternate,ee=N.stateNode;if(N=N.tag,O!==null&&O===c)break;N!==5&&N!==26&&N!==27||ee===null||(O=ee,f?(ee=xr(l,m),ee!=null&&b.unshift(xc(l,ee,O))):f||(ee=xr(l,m),ee!=null&&b.push(xc(l,ee,O)))),l=l.return}b.length!==0&&t.push({event:r,listeners:b})}var JT=/\r\n?/g,ZT=/\u0000|\uFFFD/g;function i0(t){return(typeof t=="string"?t:""+t).replace(JT,`
`).replace(ZT,"")}function l0(t,r){return r=i0(r),i0(t)===r}function kn(t,r,l,c,f,m){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||zn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&zn(t,""+c);break;case"className":se(t,"class",c);break;case"tabIndex":se(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":se(t,l,c);break;case"style":ms(t,c,m);break;case"data":if(r!=="object"){se(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){t.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Ua(""+c),t.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(r!=="input"&&kn(t,r,"name",f.name,f,null),kn(t,r,"formEncType",f.formEncType,f,null),kn(t,r,"formMethod",f.formMethod,f,null),kn(t,r,"formTarget",f.formTarget,f,null)):(kn(t,r,"encType",f.encType,f,null),kn(t,r,"method",f.method,f,null),kn(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Ua(""+c),t.setAttribute(l,c);break;case"onClick":c!=null&&(t.onclick=Is);break;case"onScroll":c!=null&&Yt("scroll",t);break;case"onScrollEnd":c!=null&&Yt("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=l}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}l=Ua(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""+c):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":c===!0?t.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,c):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(l,c):t.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(l):t.setAttribute(l,c);break;case"popover":Yt("beforetoggle",t),Yt("toggle",t),oe(t,"popover",c);break;case"xlinkActuate":Ee(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ee(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ee(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ee(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ee(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ee(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ee(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ee(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ee(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":oe(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Vr.get(l)||l,oe(t,l,c))}}function Cm(t,r,l,c,f,m){switch(l){case"style":ms(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=l}}break;case"children":typeof c=="string"?zn(t,c):(typeof c=="number"||typeof c=="bigint")&&zn(t,""+c);break;case"onScroll":c!=null&&Yt("scroll",t);break;case"onScrollEnd":c!=null&&Yt("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Is);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!J.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),r=l.slice(2,f?l.length-7:void 0),m=t[ut]||null,m=m!=null?m[l]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(r,c,f);break e}l in t?t[l]=c:c===!0?t.setAttribute(l,""):oe(t,l,c)}}}function bs(t,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",t),Yt("load",t);var c=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var b=l[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:kn(t,r,m,b,l,null)}}f&&kn(t,r,"srcSet",l.srcSet,l,null),c&&kn(t,r,"src",l.src,l,null);return;case"input":Yt("invalid",t);var N=m=b=f=null,O=null,ee=null;for(c in l)if(l.hasOwnProperty(c)){var me=l[c];if(me!=null)switch(c){case"name":f=me;break;case"type":b=me;break;case"checked":O=me;break;case"defaultChecked":ee=me;break;case"value":m=me;break;case"defaultValue":N=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,r));break;default:kn(t,r,c,me,l,null)}}Bi(t,m,N,O,ee,b,f,!1);return;case"select":Yt("invalid",t),c=b=m=null;for(f in l)if(l.hasOwnProperty(f)&&(N=l[f],N!=null))switch(f){case"value":m=N;break;case"defaultValue":b=N;break;case"multiple":c=N;default:kn(t,r,f,N,l,null)}r=m,l=b,t.multiple=!!c,r!=null?vr(t,!!c,r,!1):l!=null&&vr(t,!!c,l,!0);return;case"textarea":Yt("invalid",t),m=f=c=null;for(b in l)if(l.hasOwnProperty(b)&&(N=l[b],N!=null))switch(b){case"value":c=N;break;case"defaultValue":f=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(91));break;default:kn(t,r,b,N,l,null)}Un(t,c,f,m);return;case"option":for(O in l)l.hasOwnProperty(O)&&(c=l[O],c!=null)&&(O==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":kn(t,r,O,c,l,null));return;case"dialog":Yt("beforetoggle",t),Yt("toggle",t),Yt("cancel",t),Yt("close",t);break;case"iframe":case"object":Yt("load",t);break;case"video":case"audio":for(c=0;c<_c.length;c++)Yt(_c[c],t);break;case"image":Yt("error",t),Yt("load",t);break;case"details":Yt("toggle",t);break;case"embed":case"source":case"link":Yt("error",t),Yt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in l)if(l.hasOwnProperty(ee)&&(c=l[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:kn(t,r,ee,c,l,null)}return;default:if(ks(r)){for(me in l)l.hasOwnProperty(me)&&(c=l[me],c!==void 0&&Cm(t,r,me,c,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(c=l[N],c!=null&&kn(t,r,N,c,l,null))}function eE(t,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,N=null,O=null,ee=null,me=null;for(le in l){var _e=l[le];if(l.hasOwnProperty(le)&&_e!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":O=_e;default:c.hasOwnProperty(le)||kn(t,r,le,null,c,_e)}}for(var te in c){var le=c[te];if(_e=l[te],c.hasOwnProperty(te)&&(le!=null||_e!=null))switch(te){case"type":m=le;break;case"name":f=le;break;case"checked":ee=le;break;case"defaultChecked":me=le;break;case"value":b=le;break;case"defaultValue":N=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,r));break;default:le!==_e&&kn(t,r,te,le,c,_e)}}Va(t,b,N,O,ee,me,m,f);return;case"select":le=b=N=te=null;for(m in l)if(O=l[m],l.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":le=O;default:c.hasOwnProperty(m)||kn(t,r,m,null,c,O)}for(f in c)if(m=c[f],O=l[f],c.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":te=m;break;case"defaultValue":N=m;break;case"multiple":b=m;default:m!==O&&kn(t,r,f,m,c,O)}r=N,l=b,c=le,te!=null?vr(t,!!l,te,!1):!!c!=!!l&&(r!=null?vr(t,!!l,r,!0):vr(t,!!l,l?[]:"",!1));return;case"textarea":le=te=null;for(N in l)if(f=l[N],l.hasOwnProperty(N)&&f!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:kn(t,r,N,null,c,f)}for(b in c)if(f=c[b],m=l[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":te=f;break;case"defaultValue":le=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&kn(t,r,b,f,c,m)}cn(t,te,le);return;case"option":for(var et in l)te=l[et],l.hasOwnProperty(et)&&te!=null&&!c.hasOwnProperty(et)&&(et==="selected"?t.selected=!1:kn(t,r,et,null,c,te));for(O in c)te=c[O],le=l[O],c.hasOwnProperty(O)&&te!==le&&(te!=null||le!=null)&&(O==="selected"?t.selected=te&&typeof te!="function"&&typeof te!="symbol":kn(t,r,O,te,c,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in l)te=l[yt],l.hasOwnProperty(yt)&&te!=null&&!c.hasOwnProperty(yt)&&kn(t,r,yt,null,c,te);for(ee in c)if(te=c[ee],le=l[ee],c.hasOwnProperty(ee)&&te!==le&&(te!=null||le!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,r));break;default:kn(t,r,ee,te,c,le)}return;default:if(ks(r)){for(var Sn in l)te=l[Sn],l.hasOwnProperty(Sn)&&te!==void 0&&!c.hasOwnProperty(Sn)&&Cm(t,r,Sn,void 0,c,te);for(me in c)te=c[me],le=l[me],!c.hasOwnProperty(me)||te===le||te===void 0&&le===void 0||Cm(t,r,me,te,c,le);return}}for(var K in l)te=l[K],l.hasOwnProperty(K)&&te!=null&&!c.hasOwnProperty(K)&&kn(t,r,K,null,c,te);for(_e in c)te=c[_e],le=l[_e],!c.hasOwnProperty(_e)||te===le||te==null&&le==null||kn(t,r,_e,te,c,le)}function o0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function tE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var f=l[c],m=f.transferSize,b=f.initiatorType,N=f.duration;if(m&&N&&o0(b)){for(b=0,N=f.responseEnd,c+=1;c<l.length;c++){var O=l[c],ee=O.startTime;if(ee>N)break;var me=O.transferSize,_e=O.initiatorType;me&&o0(_e)&&(O=O.responseEnd,b+=me*(O<N?1:(N-ee)/(O-ee)))}if(--c,r+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Am=null,Im=null;function Th(t){return t.nodeType===9?t:t.ownerDocument}function c0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Dm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Mm=null;function nE(){var t=window.event;return t&&t.type==="popstate"?t===Mm?!1:(Mm=t,!0):(Mm=null,!1)}var h0=typeof setTimeout=="function"?setTimeout:void 0,sE=typeof clearTimeout=="function"?clearTimeout:void 0,d0=typeof Promise=="function"?Promise:void 0,rE=typeof queueMicrotask=="function"?queueMicrotask:typeof d0<"u"?function(t){return d0.resolve(null).then(t).catch(aE)}:h0;function aE(t){setTimeout(function(){throw t})}function oi(t){return t==="head"}function f0(t,r){var l=r,c=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(c===0){t.removeChild(f),oo(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Tc(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Tc(l);for(var m=l.firstChild;m;){var b=m.nextSibling,N=m.nodeName;m[Bn]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=b}}else l==="body"&&Tc(t.ownerDocument.body);l=f}while(l);oo(r)}function m0(t,r){var l=t;t=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=c}while(l)}function Pm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Pm(l),Hn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function iE(t,r,l,c){for(;t.nodeType===1;){var f=l;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Bn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=dr(t.nextSibling),t===null)break}return null}function lE(t,r,l){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=dr(t.nextSibling),t===null))return null;return t}function p0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=dr(t.nextSibling),t===null))return null;return t}function Lm(t){return t.data==="$?"||t.data==="$~"}function Om(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function oE(t,r){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function dr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Vm=null;function g0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(r===0)return dr(t.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}t=t.nextSibling}return null}function y0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return t;r--}else l!=="/$"&&l!=="/&"||r++}t=t.previousSibling}return null}function v0(t,r,l){switch(r=Th(l),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Tc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Hn(t)}var fr=new Map,b0=new Set;function Eh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ka=Te.d;Te.d={f:cE,r:uE,D:hE,C:dE,L:fE,m:mE,X:gE,S:pE,M:yE};function cE(){var t=ka.f(),r=ph();return t||r}function uE(t){var r=U(t);r!==null&&r.tag===5&&r.type==="form"?Lv(r):ka.r(t)}var ao=typeof document>"u"?null:document;function w0(t,r,l){var c=ao;if(c&&typeof r=="string"&&r){var f=Cn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),b0.has(f)||(b0.add(f),t={rel:t,crossOrigin:l,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),bs(r,"link",t),R(r),c.head.appendChild(r)))}}function hE(t){ka.D(t),w0("dns-prefetch",t,null)}function dE(t,r){ka.C(t,r),w0("preconnect",t,r)}function fE(t,r,l){ka.L(t,r,l);var c=ao;if(c&&t&&r){var f='link[rel="preload"][as="'+Cn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+Cn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+Cn(l.imageSizes)+'"]')):f+='[href="'+Cn(t)+'"]';var m=f;switch(r){case"style":m=io(t);break;case"script":m=lo(t)}fr.has(m)||(t=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:t,as:r},l),fr.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(Ec(m))||r==="script"&&c.querySelector(kc(m))||(r=c.createElement("link"),bs(r,"link",t),R(r),c.head.appendChild(r)))}}function mE(t,r){ka.m(t,r);var l=ao;if(l&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Cn(c)+'"][href="'+Cn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=lo(t)}if(!fr.has(m)&&(t=T({rel:"modulepreload",href:t},r),fr.set(m,t),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(kc(m)))return}c=l.createElement("link"),bs(c,"link",t),R(c),l.head.appendChild(c)}}}function pE(t,r,l){ka.S(t,r,l);var c=ao;if(c&&t){var f=E(c).hoistableStyles,m=io(t);r=r||"default";var b=f.get(m);if(!b){var N={loading:0,preload:null};if(b=c.querySelector(Ec(m)))N.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},l),(l=fr.get(m))&&Bm(t,l);var O=b=c.createElement("link");R(O),bs(O,"link",t),O._p=new Promise(function(ee,me){O.onload=ee,O.onerror=me}),O.addEventListener("load",function(){N.loading|=1}),O.addEventListener("error",function(){N.loading|=2}),N.loading|=4,kh(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:N},f.set(m,b)}}}function gE(t,r){ka.X(t,r);var l=ao;if(l&&t){var c=E(l).hoistableScripts,f=lo(t),m=c.get(f);m||(m=l.querySelector(kc(f)),m||(t=T({src:t,async:!0},r),(r=fr.get(f))&&Um(t,r),m=l.createElement("script"),R(m),bs(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function yE(t,r){ka.M(t,r);var l=ao;if(l&&t){var c=E(l).hoistableScripts,f=lo(t),m=c.get(f);m||(m=l.querySelector(kc(f)),m||(t=T({src:t,async:!0,type:"module"},r),(r=fr.get(f))&&Um(t,r),m=l.createElement("script"),R(m),bs(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function _0(t,r,l,c){var f=(f=Me.current)?Eh(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=io(l.href),l=E(f).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=io(l.href);var m=E(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(Ec(t)))&&!m._p&&(b.instance=m,b.state.loading=5),fr.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fr.set(t,l),m||vE(f,t,l,b.state))),r&&c===null)throw Error(a(528,""));return b}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=lo(l),l=E(f).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function io(t){return'href="'+Cn(t)+'"'}function Ec(t){return'link[rel="stylesheet"]['+t+"]"}function x0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function vE(t,r,l,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),bs(r,"link",l),R(r),t.head.appendChild(r))}function lo(t){return'[src="'+Cn(t)+'"]'}function kc(t){return"script[async]"+t}function T0(t,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+Cn(l.href)+'"]');if(c)return r.instance=c,R(c),c;var f=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),R(c),bs(c,"style",f),kh(c,l.precedence,t),r.instance=c;case"stylesheet":f=io(l.href);var m=t.querySelector(Ec(f));if(m)return r.state.loading|=4,r.instance=m,R(m),m;c=x0(l),(f=fr.get(f))&&Bm(c,f),m=(t.ownerDocument||t).createElement("link"),R(m);var b=m;return b._p=new Promise(function(N,O){b.onload=N,b.onerror=O}),bs(m,"link",c),r.state.loading|=4,kh(m,l.precedence,t),r.instance=m;case"script":return m=lo(l.src),(f=t.querySelector(kc(m)))?(r.instance=f,R(f),f):(c=l,(f=fr.get(m))&&(c=T({},l),Um(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),R(f),bs(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,kh(c,l.precedence,t));return r.instance}function kh(t,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var N=c[b];if(N.dataset.precedence===r)m=N;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(t,r.firstChild))}function Bm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Um(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Sh=null;function E0(t,r,l){if(Sh===null){var c=new Map,f=Sh=new Map;f.set(l,c)}else f=Sh,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(t))return c;for(c.set(t,null),l=l.getElementsByTagName(t),f=0;f<l.length;f++){var m=l[f];if(!(m[Bn]||m[Be]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var N=c.get(b);N?N.push(m):c.set(b,[m])}}return c}function k0(t,r,l){t=t.ownerDocument||t,t.head.insertBefore(l,r==="title"?t.querySelector("head > title"):null)}function bE(t,r,l){if(l===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function S0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function wE(t,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=io(c.href),m=r.querySelector(Ec(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Nh.bind(t),r.then(t,t)),l.state.loading|=4,l.instance=m,R(m);return}m=r.ownerDocument||r,c=x0(c),(f=fr.get(f))&&Bm(c,f),m=m.createElement("link"),R(m);var b=m;b._p=new Promise(function(N,O){b.onload=N,b.onerror=O}),bs(m,"link",c),l.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Nh.bind(t),r.addEventListener("load",l),r.addEventListener("error",l))}}var zm=0;function _E(t,r){return t.stylesheets&&t.count===0&&Rh(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var c=setTimeout(function(){if(t.stylesheets&&Rh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&zm===0&&(zm=62500*tE());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Rh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>zm?50:800)+r);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Nh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var jh=null;function Rh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,jh=new Map,r.forEach(xE,t),jh=null,Nh.call(t))}function xE(t,r){if(!(r.state.loading&4)){var l=jh.get(t);if(l)var c=l.get(null);else{l=new Map,jh.set(t,l);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),c=b)}c&&l.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),m=l.get(b)||c,m===c&&l.set(null,f),l.set(b,f),this.count++,c=Nh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Sc={$$typeof:he,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function TE(t,r,l,c,f,m,b,N,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.hiddenUpdates=nn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function N0(t,r,l,c,f,m,b,N,O,ee,me,_e){return t=new TE(t,r,l,b,O,ee,me,_e,N),r=1,m===!0&&(r|=24),m=Ks(3,null,null,r),t.current=m,m.stateNode=t,r=wf(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:r},Ef(m),t}function j0(t){return t?(t=Vl,t):Vl}function R0(t,r,l,c,f,m){f=j0(f),c.context===null?c.context=f:c.pendingContext=f,c=Xa(r),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=Ja(t,c,r),l!==null&&(zs(l,t,r),rc(l,t,r))}function C0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<r?l:r}}function Fm(t,r){C0(t,r),(t=t.alternate)&&C0(t,r)}function A0(t){if(t.tag===13||t.tag===31){var r=Yi(t,67108864);r!==null&&zs(r,t,67108864),Fm(t,67108864)}}function I0(t){if(t.tag===13||t.tag===31){var r=Zs();r=z(r);var l=Yi(t,r);l!==null&&zs(l,t,r),Fm(t,r)}}var Ch=!0;function EE(t,r,l,c){var f=Y.T;Y.T=null;var m=Te.p;try{Te.p=2,Hm(t,r,l,c)}finally{Te.p=m,Y.T=f}}function kE(t,r,l,c){var f=Y.T;Y.T=null;var m=Te.p;try{Te.p=8,Hm(t,r,l,c)}finally{Te.p=m,Y.T=f}}function Hm(t,r,l,c){if(Ch){var f=qm(c);if(f===null)Rm(t,r,c,Ah,l),M0(t,c);else if(NE(f,t,r,l,c))c.stopPropagation();else if(M0(t,c),r&4&&-1<SE.indexOf(t)){for(;f!==null;){var m=U(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=xt(m.pendingLanes);if(b!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;b;){var O=1<<31-Ie(b);N.entanglements[1]|=O,b&=~O}Kr(m),(vn&6)===0&&(fh=Bt()+500,wc(0))}}break;case 31:case 13:N=Yi(m,2),N!==null&&zs(N,m,2),ph(),Fm(m,2)}if(m=qm(c),m===null&&Rm(t,r,c,Ah,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else Rm(t,r,c,null,l)}}function qm(t){return t=sr(t),$m(t)}var Ah=null;function $m(t){if(Ah=null,t=hn(t),t!==null){var r=u(t);if(r===null)t=null;else{var l=r.tag;if(l===13){if(t=d(r),t!==null)return t;t=null}else if(l===31){if(t=p(r),t!==null)return t;t=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Ah=t,null}function D0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dn()){case Ht:return 2;case wn:return 8;case de:case ve:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var Wm=!1,ci=null,ui=null,hi=null,Nc=new Map,jc=new Map,di=[],SE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M0(t,r){switch(t){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":ui=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":Nc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(r.pointerId)}}function Rc(t,r,l,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=U(r),r!==null&&A0(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function NE(t,r,l,c,f){switch(r){case"focusin":return ci=Rc(ci,t,r,l,c,f),!0;case"dragenter":return ui=Rc(ui,t,r,l,c,f),!0;case"mouseover":return hi=Rc(hi,t,r,l,c,f),!0;case"pointerover":var m=f.pointerId;return Nc.set(m,Rc(Nc.get(m)||null,t,r,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,jc.set(m,Rc(jc.get(m)||null,t,r,l,c,f)),!0}return!1}function P0(t){var r=hn(t.target);if(r!==null){var l=u(r);if(l!==null){if(r=l.tag,r===13){if(r=d(l),r!==null){t.blockedOn=r,pe(t.priority,function(){I0(l)});return}}else if(r===31){if(r=p(l),r!==null){t.blockedOn=r,pe(t.priority,function(){I0(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var l=qm(t.nativeEvent);if(l===null){l=t.nativeEvent;var c=new l.constructor(l.type,l);Fo=c,l.target.dispatchEvent(c),Fo=null}else return r=U(l),r!==null&&A0(r),t.blockedOn=l,!1;r.shift()}return!0}function L0(t,r,l){Ih(t)&&l.delete(r)}function jE(){Wm=!1,ci!==null&&Ih(ci)&&(ci=null),ui!==null&&Ih(ui)&&(ui=null),hi!==null&&Ih(hi)&&(hi=null),Nc.forEach(L0),jc.forEach(L0)}function Dh(t,r){t.blockedOn===r&&(t.blockedOn=null,Wm||(Wm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,jE)))}var Mh=null;function O0(t){Mh!==t&&(Mh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Mh===t&&(Mh=null);for(var r=0;r<t.length;r+=3){var l=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if($m(c||l)===null)continue;break}var m=U(l);m!==null&&(t.splice(r,3),r-=3,qf(m,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function oo(t){function r(O){return Dh(O,t)}ci!==null&&Dh(ci,t),ui!==null&&Dh(ui,t),hi!==null&&Dh(hi,t),Nc.forEach(r),jc.forEach(r);for(var l=0;l<di.length;l++){var c=di[l];c.blockedOn===t&&(c.blockedOn=null)}for(;0<di.length&&(l=di[0],l.blockedOn===null);)P0(l),l.blockedOn===null&&di.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],b=f[ut]||null;if(typeof m=="function")b||O0(l);else if(b){var N=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[ut]||null)N=b.formAction;else if($m(f)!==null)continue}else N=b.action;typeof N=="function"?l[c+1]=N:(l.splice(c,3),c-=3),O0(l)}}}function V0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Gm(t){this._internalRoot=t}Ph.prototype.render=Gm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,c=Zs();R0(l,c,t,r,null,null)},Ph.prototype.unmount=Gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;R0(t.current,2,null,t,null,null),ph(),r[Ye]=null}};function Ph(t){this._internalRoot=t}Ph.prototype.unstable_scheduleHydration=function(t){if(t){var r=fe();t={blockedOn:null,target:t,priority:r};for(var l=0;l<di.length&&r!==0&&r<di[l].priority;l++);di.splice(l,0,t),l===0&&P0(t)}};var B0=e.version;if(B0!=="19.2.4")throw Error(a(527,B0,"19.2.4"));Te.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(r),t=t!==null?w(t):null,t=t===null?null:t.stateNode,t};var RE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{Pe=Lh.inject(RE),Ge=Lh}catch{}}return Ac.createRoot=function(t,r){if(!o(t))throw Error(a(299));var l=!1,c="",f=Wv,m=Gv,b=Kv;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=N0(t,1,!1,null,null,l,c,null,f,m,b,V0),t[Ye]=r.current,jm(t),new Gm(r)},Ac.hydrateRoot=function(t,r,l){if(!o(t))throw Error(a(299));var c=!1,f="",m=Wv,b=Gv,N=Kv,O=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),r=N0(t,1,!0,r,l??null,c,f,O,m,b,N,V0),r.context=j0(null),l=r.current,c=Zs(),c=z(c),f=Xa(c),f.callback=null,Ja(l,f,c),l=c,r.current.lanes=l,$t(r,l),Kr(r),t[Ye]=r.current,jm(t),new Ph(r)},Ac.version="19.2.4",Ac}var Y0;function BE(){if(Y0)return Qm.exports;Y0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Qm.exports=VE(),Qm.exports}var UE=BE();const zE="modulepreload",FE=function(s){return"/login/"+s},Q0={},yr=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");o=g(n.map(y=>{if(y=FE(y),y in Q0)return;Q0[y]=!0;const w=y.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const k=document.createElement("link");if(k.rel=w?"stylesheet":zE,w||(k.as="script"),k.crossOrigin="",k.href=y,p&&k.setAttribute("nonce",p),document.head.appendChild(k),w)return new Promise((P,W)=>{k.addEventListener("load",P),k.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var X0="popstate";function HE(s={}){function e(a,o){let{pathname:u,search:d,hash:p}=a.location;return jp("",{pathname:u,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:Xc(o)}return $E(e,n,null,s)}function On(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function gr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qE(){return Math.random().toString(36).substring(2,10)}function J0(s,e){return{usr:s.state,key:s.key,idx:e}}function jp(s,e,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Do(e):e,state:n,key:e&&e.key||a||qE()}}function Xc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Do(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function $E(s,e,n,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,d=o.history,p="POP",g=null,y=w();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function w(){return(d.state||{idx:null}).idx}function T(){p="POP";let L=w(),re=L==null?null:L-y;y=L,g&&g({action:p,location:B.location,delta:re})}function k(L,re){p="PUSH";let X=jp(B.location,L,re);y=w()+1;let he=J0(X,y),ke=B.createHref(X);try{d.pushState(he,"",ke)}catch(ze){if(ze instanceof DOMException&&ze.name==="DataCloneError")throw ze;o.location.assign(ke)}u&&g&&g({action:p,location:B.location,delta:1})}function P(L,re){p="REPLACE";let X=jp(B.location,L,re);y=w();let he=J0(X,y),ke=B.createHref(X);d.replaceState(he,"",ke),u&&g&&g({action:p,location:B.location,delta:0})}function W(L){return WE(L)}let B={get action(){return p},get location(){return s(o,d)},listen(L){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(X0,T),g=L,()=>{o.removeEventListener(X0,T),g=null}},createHref(L){return e(o,L)},createURL:W,encodeLocation(L){let re=W(L);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:k,replace:P,go(L){return d.go(L)}};return B}function WE(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),On(n,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Xc(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function Ww(s,e,n="/"){return GE(s,e,n,!1)}function GE(s,e,n,a){let o=typeof e=="string"?Do(e):e,u=Aa(o.pathname||"/",n);if(u==null)return null;let d=Gw(s);KE(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=ak(u);p=sk(d[g],y,a)}return p}function Gw(s,e=[],n=[],a="",o=!1){let u=(d,p,g=o,y)=>{let w={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(a)&&g)return;On(w.relativePath.startsWith(a),`Absolute route path "${w.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(a.length)}let T=ja([a,w.relativePath]),k=n.concat(w);d.children&&d.children.length>0&&(On(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),Gw(d.children,e,k,T,g)),!(d.path==null&&!d.index)&&e.push({path:T,score:tk(T,d.index),routesMeta:k})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of Kw(d.path))u(d,p,!0,g)}),e}function Kw(s){let e=s.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let d=Kw(a.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function KE(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:nk(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var YE=/^:[\w-]+$/,QE=3,XE=2,JE=1,ZE=10,ek=-2,Z0=s=>s==="*";function tk(s,e){let n=s.split("/"),a=n.length;return n.some(Z0)&&(a+=ek),e&&(a+=XE),n.filter(o=>!Z0(o)).reduce((o,u)=>o+(YE.test(u)?QE:u===""?JE:ZE),a)}function nk(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function sk(s,e,n=!1){let{routesMeta:a}=s,o={},u="/",d=[];for(let p=0;p<a.length;++p){let g=a[p],y=p===a.length-1,w=u==="/"?e:e.slice(u.length)||"/",T=od({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),k=g.route;if(!T&&y&&n&&!a[a.length-1].route.index&&(T=od({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!T)return null;Object.assign(o,T.params),d.push({params:o,pathname:ja([u,T.pathname]),pathnameBase:ck(ja([u,T.pathnameBase])),route:k}),T.pathnameBase!=="/"&&(u=ja([u,T.pathnameBase]))}return d}function od(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=rk(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:a.reduce((y,{paramName:w,isOptional:T},k)=>{if(w==="*"){let W=p[k]||"";d=u.slice(0,u.length-W.length).replace(/(.)\/+$/,"$1")}const P=p[k];return T&&!P?y[w]=void 0:y[w]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function rk(s,e=!1,n=!0){gr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(a.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function ak(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Aa(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}var ik=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function lk(s,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof s=="string"?Do(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=e1(n.substring(1),"/"):u=e1(n,e)):u=e,{pathname:u,search:uk(a),hash:hk(o)}}function e1(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ep(s,e,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ok(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ig(s){let e=ok(s);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function lg(s,e,n,a=!1){let o;typeof s=="string"?o=Do(s):(o={...s},On(!o.pathname||!o.pathname.includes("?"),ep("?","pathname","search",o)),On(!o.pathname||!o.pathname.includes("#"),ep("#","pathname","hash",o)),On(!o.search||!o.search.includes("#"),ep("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,p;if(d==null)p=n;else{let T=e.length-1;if(!a&&d.startsWith("..")){let k=d.split("/");for(;k[0]==="..";)k.shift(),T-=1;o.pathname=k.join("/")}p=T>=0?e[T]:"/"}let g=lk(o,p),y=d&&d!=="/"&&d.endsWith("/"),w=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var ja=s=>s.join("/").replace(/\/\/+/g,"/"),ck=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),uk=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,hk=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,dk=class{constructor(s,e,n,a=!1){this.status=s,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function fk(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function mk(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Yw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qw(s,e){let n=s;if(typeof n!="string"||!ik.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,o=!1;if(Yw)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=Aa(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:o=!0}catch{gr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Xw=["POST","PUT","PATCH","DELETE"];new Set(Xw);var pk=["GET",...Xw];new Set(pk);var Mo=x.createContext(null);Mo.displayName="DataRouter";var Rd=x.createContext(null);Rd.displayName="DataRouterState";var gk=x.createContext(!1),Jw=x.createContext({isTransitioning:!1});Jw.displayName="ViewTransition";var yk=x.createContext(new Map);yk.displayName="Fetchers";var vk=x.createContext(null);vk.displayName="Await";var nr=x.createContext(null);nr.displayName="Navigation";var ou=x.createContext(null);ou.displayName="Location";var aa=x.createContext({outlet:null,matches:[],isDataRoute:!1});aa.displayName="Route";var og=x.createContext(null);og.displayName="RouteError";var Zw="REACT_ROUTER_ERROR",bk="REDIRECT",wk="ROUTE_ERROR_RESPONSE";function _k(s){if(s.startsWith(`${Zw}:${bk}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function xk(s){if(s.startsWith(`${Zw}:${wk}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new dk(e.status,e.statusText,e.data)}catch{}}function Tk(s,{relative:e}={}){On(Po(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=x.useContext(nr),{hash:o,pathname:u,search:d}=cu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:ja([n,u])),a.createHref({pathname:p,search:d,hash:o})}function Po(){return x.useContext(ou)!=null}function Or(){return On(Po(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(ou).location}var e_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function t_(s){x.useContext(nr).static||x.useLayoutEffect(s)}function Ws(){let{isDataRoute:s}=x.useContext(aa);return s?Lk():Ek()}function Ek(){On(Po(),"useNavigate() may be used only in the context of a <Router> component.");let s=x.useContext(Mo),{basename:e,navigator:n}=x.useContext(nr),{matches:a}=x.useContext(aa),{pathname:o}=Or(),u=JSON.stringify(ig(a)),d=x.useRef(!1);return t_(()=>{d.current=!0}),x.useCallback((g,y={})=>{if(gr(d.current,e_),!d.current)return;if(typeof g=="number"){n.go(g);return}let w=lg(g,JSON.parse(u),o,y.relative==="path");s==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ja([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,u,o,s])}x.createContext(null);function cu(s,{relative:e}={}){let{matches:n}=x.useContext(aa),{pathname:a}=Or(),o=JSON.stringify(ig(n));return x.useMemo(()=>lg(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function kk(s,e){return n_(s,e)}function n_(s,e,n,a,o){On(Po(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=x.useContext(nr),{matches:d}=x.useContext(aa),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",w=p?p.pathnameBase:"/",T=p&&p.route;{let X=T&&T.path||"";r_(y,!T||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let k=Or(),P;if(e){let X=typeof e=="string"?Do(e):e;On(w==="/"||X.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${X.pathname}" was given in the \`location\` prop.`),P=X}else P=k;let W=P.pathname||"/",B=W;if(w!=="/"){let X=w.replace(/^\//,"").split("/");B="/"+W.replace(/^\//,"").split("/").slice(X.length).join("/")}let L=Ww(s,{pathname:B});gr(T||L!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),gr(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let re=Ck(L&&L.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:ja([w,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?w:ja([w,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),d,n,a,o);return e&&re?x.createElement(ou.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},re):re}function Sk(){let s=Pk(),e=fk(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:u},"ErrorBoundary")," or"," ",x.createElement("code",{style:u},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:o},n):null,d)}var Nk=x.createElement(Sk,null),s_=class extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=xk(s.digest);n&&(s=n)}let e=s!==void 0?x.createElement(aa.Provider,{value:this.props.routeContext},x.createElement(og.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?x.createElement(jk,{error:s},e):e}};s_.contextType=gk;var tp=new WeakMap;function jk({children:s,error:e}){let{basename:n}=x.useContext(nr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=_k(e.digest);if(a){let o=tp.get(e);if(o)throw o;let u=Qw(a.location,n);if(Yw&&!tp.get(e))if(u.isExternal||a.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:a.replace}));throw tp.set(e,d),d}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function Rk({routeContext:s,match:e,children:n}){let a=x.useContext(Mo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(aa.Provider,{value:s},n)}function Ck(s,e=[],n=null,a=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,d=n?.errors;if(d!=null){let w=u.findIndex(T=>T.route.id&&d?.[T.route.id]!==void 0);On(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,w+1))}let p=!1,g=-1;if(n)for(let w=0;w<u.length;w++){let T=u[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=w),T.route.id){let{loaderData:k,errors:P}=n,W=T.route.loader&&!k.hasOwnProperty(T.route.id)&&(!P||P[T.route.id]===void 0);if(T.route.lazy||W){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&a?(w,T)=>{a(w,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:mk(n.matches),errorInfo:T})}:void 0;return u.reduceRight((w,T,k)=>{let P,W=!1,B=null,L=null;n&&(P=d&&T.route.id?d[T.route.id]:void 0,B=T.route.errorElement||Nk,p&&(g<0&&k===0?(r_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,L=null):g===k&&(W=!0,L=T.route.hydrateFallbackElement||null)));let re=e.concat(u.slice(0,k+1)),X=()=>{let he;return P?he=B:W?he=L:T.route.Component?he=x.createElement(T.route.Component,null):T.route.element?he=T.route.element:he=w,x.createElement(Rk,{match:T,routeContext:{outlet:w,matches:re,isDataRoute:n!=null},children:he})};return n&&(T.route.ErrorBoundary||T.route.errorElement||k===0)?x.createElement(s_,{location:n.location,revalidation:n.revalidation,component:B,error:P,children:X(),routeContext:{outlet:null,matches:re,isDataRoute:!0},onError:y}):X()},null)}function cg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ak(s){let e=x.useContext(Mo);return On(e,cg(s)),e}function Ik(s){let e=x.useContext(Rd);return On(e,cg(s)),e}function Dk(s){let e=x.useContext(aa);return On(e,cg(s)),e}function ug(s){let e=Dk(s),n=e.matches[e.matches.length-1];return On(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Mk(){return ug("useRouteId")}function Pk(){let s=x.useContext(og),e=Ik("useRouteError"),n=ug("useRouteError");return s!==void 0?s:e.errors?.[n]}function Lk(){let{router:s}=Ak("useNavigate"),e=ug("useNavigate"),n=x.useRef(!1);return t_(()=>{n.current=!0}),x.useCallback(async(o,u={})=>{gr(n.current,e_),n.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var t1={};function r_(s,e,n){!e&&!t1[s]&&(t1[s]=!0,gr(!1,n))}x.memo(Ok);function Ok({routes:s,future:e,state:n,onError:a}){return n_(s,void 0,n,a,e)}function Vk({to:s,replace:e,state:n,relative:a}){On(Po(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=x.useContext(nr);gr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=x.useContext(aa),{pathname:d}=Or(),p=Ws(),g=lg(s,ig(u),d,a==="path"),y=JSON.stringify(g);return x.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:a})},[p,y,a,e,n]),null}function Zn(s){On(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Bk({basename:s="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:u=!1,unstable_useTransitions:d}){On(!Po(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=x.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:d,future:{}}),[p,o,u,d]);typeof n=="string"&&(n=Do(n));let{pathname:y="/",search:w="",hash:T="",state:k=null,key:P="default"}=n,W=x.useMemo(()=>{let B=Aa(y,p);return B==null?null:{location:{pathname:B,search:w,hash:T,state:k,key:P},navigationType:a}},[p,y,w,T,k,P,a]);return gr(W!=null,`<Router basename="${p}"> is not able to match the URL "${y}${w}${T}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:x.createElement(nr.Provider,{value:g},x.createElement(ou.Provider,{children:e,value:W}))}function Uk({children:s,location:e}){return kk(Rp(s),e)}function Rp(s,e=[]){let n=[];return x.Children.forEach(s,(a,o)=>{if(!x.isValidElement(a))return;let u=[...e,o];if(a.type===x.Fragment){n.push.apply(n,Rp(a.props.children,u));return}On(a.type===Zn,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),On(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Rp(a.props.children,u)),n.push(d)}),n}var Qh="get",Xh="application/x-www-form-urlencoded";function Cd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function zk(s){return Cd(s)&&s.tagName.toLowerCase()==="button"}function Fk(s){return Cd(s)&&s.tagName.toLowerCase()==="form"}function Hk(s){return Cd(s)&&s.tagName.toLowerCase()==="input"}function qk(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function $k(s,e){return s.button===0&&(!e||e==="_self")&&!qk(s)}function Cp(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let a=s[n];return e.concat(Array.isArray(a)?a.map(o=>[n,o]):[[n,a]])},[]))}function Wk(s,e){let n=Cp(s);return e&&e.forEach((a,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Oh=null;function Gk(){if(Oh===null)try{new FormData(document.createElement("form"),0),Oh=!1}catch{Oh=!0}return Oh}var Kk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function np(s){return s!=null&&!Kk.has(s)?(gr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xh}"`),null):s}function Yk(s,e){let n,a,o,u,d;if(Fk(s)){let p=s.getAttribute("action");a=p?Aa(p,e):null,n=s.getAttribute("method")||Qh,o=np(s.getAttribute("enctype"))||Xh,u=new FormData(s)}else if(zk(s)||Hk(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(a=g?Aa(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||Qh,o=np(s.getAttribute("formenctype"))||np(p.getAttribute("enctype"))||Xh,u=new FormData(p,s),!Gk()){let{name:y,type:w,value:T}=s;if(w==="image"){let k=y?`${y}.`:"";u.append(`${k}x`,"0"),u.append(`${k}y`,"0")}else y&&u.append(y,T)}}else{if(Cd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qh,a=null,o=Xh,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Qk(s,e,n,a){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${a}`:o.pathname=`${o.pathname}.${a}`:o.pathname==="/"?o.pathname=`_root.${a}`:e&&Aa(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${a}`,o}async function Xk(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jk(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Zk(s,e,n){let a=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await Xk(u,n);return d.links?d.links():[]}return[]}));return sS(a.flat(1).filter(Jk).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function n1(s,e,n,a,o,u){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let w=a.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function eS(s,e,{includeHydrateFallback:n}={}){return tS(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function tS(s){return[...new Set(s)]}function nS(s){let e={},n=Object.keys(s).sort();for(let a of n)e[a]=s[a];return e}function sS(s,e){let n=new Set;return new Set(e),s.reduce((a,o)=>{let u=JSON.stringify(nS(o));return n.has(u)||(n.add(u),a.push({key:u,link:o})),a},[])}function a_(){let s=x.useContext(Mo);return hg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function rS(){let s=x.useContext(Rd);return hg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var dg=x.createContext(void 0);dg.displayName="FrameworkContext";function i_(){let s=x.useContext(dg);return hg(s,"You must render this element inside a <HydratedRouter> element"),s}function aS(s,e){let n=x.useContext(dg),[a,o]=x.useState(!1),[u,d]=x.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:T}=e,k=x.useRef(null);x.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=re=>{re.forEach(X=>{d(X.isIntersecting)})},L=new IntersectionObserver(B,{threshold:.5});return k.current&&L.observe(k.current),()=>{L.disconnect()}}},[s]),x.useEffect(()=>{if(a){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[a]);let P=()=>{o(!0)},W=()=>{o(!1),d(!1)};return n?s!=="intent"?[u,k,{}]:[u,k,{onFocus:Ic(p,P),onBlur:Ic(g,W),onMouseEnter:Ic(y,P),onMouseLeave:Ic(w,W),onTouchStart:Ic(T,P)}]:[!1,k,{}]}function Ic(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function iS({page:s,...e}){let{router:n}=a_(),a=x.useMemo(()=>Ww(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?x.createElement(oS,{page:s,matches:a,...e}):null}function lS(s){let{manifest:e,routeModules:n}=i_(),[a,o]=x.useState([]);return x.useEffect(()=>{let u=!1;return Zk(s,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,n]),a}function oS({page:s,matches:e,...n}){let a=Or(),{future:o,manifest:u,routeModules:d}=i_(),{basename:p}=a_(),{loaderData:g,matches:y}=rS(),w=x.useMemo(()=>n1(s,e,y,u,a,"data"),[s,e,y,u,a]),T=x.useMemo(()=>n1(s,e,y,u,a,"assets"),[s,e,y,u,a]),k=x.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let B=new Set,L=!1;if(e.forEach(X=>{let he=u.routes[X.route.id];!he||!he.hasLoader||(!w.some(ke=>ke.route.id===X.route.id)&&X.route.id in g&&d[X.route.id]?.shouldRevalidate||he.hasClientLoader?L=!0:B.add(X.route.id))}),B.size===0)return[];let re=Qk(s,p,o.unstable_trailingSlashAwareDataRequests,"data");return L&&B.size>0&&re.searchParams.set("_routes",e.filter(X=>B.has(X.route.id)).map(X=>X.route.id).join(",")),[re.pathname+re.search]},[p,o.unstable_trailingSlashAwareDataRequests,g,a,u,w,e,s,d]),P=x.useMemo(()=>eS(T,u),[T,u]),W=lS(T);return x.createElement(x.Fragment,null,k.map(B=>x.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),P.map(B=>x.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),W.map(({key:B,link:L})=>x.createElement("link",{key:B,nonce:n.nonce,...L,crossOrigin:L.crossOrigin??n.crossOrigin})))}function cS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var uS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uS&&(window.__reactRouterVersion="7.13.0")}catch{}function hS({basename:s,children:e,unstable_useTransitions:n,window:a}){let o=x.useRef();o.current==null&&(o.current=HE({window:a,v5Compat:!0}));let u=o.current,[d,p]=x.useState({action:u.action,location:u.location}),g=x.useCallback(y=>{n===!1?p(y):x.startTransition(()=>p(y))},[n]);return x.useLayoutEffect(()=>u.listen(g),[u,g]),x.createElement(Bk,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var l_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o_=x.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:k,...P},W){let{basename:B,unstable_useTransitions:L}=x.useContext(nr),re=typeof y=="string"&&l_.test(y),X=Qw(y,B);y=X.to;let he=Tk(y,{relative:o}),[ke,ze,Ae]=aS(a,P),I=pS(y,{replace:d,state:p,target:g,preventScrollReset:w,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:k,unstable_useTransitions:L});function S(D){e&&e(D),D.defaultPrevented||I(D)}let C=x.createElement("a",{...P,...Ae,href:X.absoluteURL||he,onClick:X.isExternal||u?e:S,ref:cS(W,ze),target:g,"data-discover":!re&&n==="render"?"true":void 0});return ke&&!re?x.createElement(x.Fragment,null,C,x.createElement(iS,{page:he})):C});o_.displayName="Link";var dS=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:u,to:d,viewTransition:p,children:g,...y},w){let T=cu(d,{relative:y.relative}),k=Or(),P=x.useContext(Rd),{navigator:W,basename:B}=x.useContext(nr),L=P!=null&&_S(T)&&p===!0,re=W.encodeLocation?W.encodeLocation(T).pathname:T.pathname,X=k.pathname,he=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(X=X.toLowerCase(),he=he?he.toLowerCase():null,re=re.toLowerCase()),he&&B&&(he=Aa(he,B)||he);const ke=re!=="/"&&re.endsWith("/")?re.length-1:re.length;let ze=X===re||!o&&X.startsWith(re)&&X.charAt(ke)==="/",Ae=he!=null&&(he===re||!o&&he.startsWith(re)&&he.charAt(re.length)==="/"),I={isActive:ze,isPending:Ae,isTransitioning:L},S=ze?e:void 0,C;typeof a=="function"?C=a(I):C=[a,ze?"active":null,Ae?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(I):u;return x.createElement(o_,{...y,"aria-current":S,className:C,ref:w,style:D,to:d,viewTransition:p},typeof g=="function"?g(I):g)});dS.displayName="NavLink";var fS=x.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:u,method:d=Qh,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:k,...P},W)=>{let{unstable_useTransitions:B}=x.useContext(nr),L=bS(),re=wS(p,{relative:y}),X=d.toLowerCase()==="get"?"get":"post",he=typeof p=="string"&&l_.test(p),ke=ze=>{if(g&&g(ze),ze.defaultPrevented)return;ze.preventDefault();let Ae=ze.nativeEvent.submitter,I=Ae?.getAttribute("formmethod")||d,S=()=>L(Ae||ze.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:o,state:u,relative:y,preventScrollReset:w,viewTransition:T,unstable_defaultShouldRevalidate:k});B&&n!==!1?x.startTransition(()=>S()):S()};return x.createElement("form",{ref:W,method:X,action:re,onSubmit:a?g:ke,...P,"data-discover":!he&&s==="render"?"true":void 0})});fS.displayName="Form";function mS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function c_(s){let e=x.useContext(Mo);return On(e,mS(s)),e}function pS(s,{target:e,replace:n,state:a,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Ws(),w=Or(),T=cu(s,{relative:u});return x.useCallback(k=>{if($k(k,e)){k.preventDefault();let P=n!==void 0?n:Xc(w)===Xc(T),W=()=>y(s,{replace:P,state:a,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?x.startTransition(()=>W()):W()}},[w,y,T,n,a,e,s,o,u,d,p,g])}function gS(s){gr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=x.useRef(Cp(s)),n=x.useRef(!1),a=Or(),o=x.useMemo(()=>Wk(a.search,n.current?null:e.current),[a.search]),u=Ws(),d=x.useCallback((p,g)=>{const y=Cp(typeof p=="function"?p(new URLSearchParams(o)):p);n.current=!0,u("?"+y,g)},[u,o]);return[o,d]}var yS=0,vS=()=>`__${String(++yS)}__`;function bS(){let{router:s}=c_("useSubmit"),{basename:e}=x.useContext(nr),n=Mk(),a=s.fetch,o=s.navigate;return x.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:w,body:T}=Yk(u,e);if(d.navigate===!1){let k=d.fetcherKey||vS();await a(k,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:T,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await o(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:T,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,o,e,n])}function wS(s,{relative:e}={}){let{basename:n}=x.useContext(nr),a=x.useContext(aa);On(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...cu(s||".",{relative:e})},d=Or();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(T=>T).forEach(T=>p.append("index",T));let w=p.toString();u.search=w?`?${w}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:ja([n,u.pathname])),Xc(u)}function _S(s,{relative:e}={}){let n=x.useContext(Jw);On(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=c_("useViewTransitionState"),o=cu(s,{relative:e});if(!n.isTransitioning)return!1;let u=Aa(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=Aa(n.nextLocation.pathname,a)||n.nextLocation.pathname;return od(o.pathname,d)!=null||od(o.pathname,u)!=null}const xS=()=>{};var s1={};const u_=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},TS=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],p=s[n++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},h_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,p=d?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,w=u>>2,T=(u&3)<<4|p>>4;let k=(p&15)<<2|y>>6,P=y&63;g||(P=64,d||(k=64)),a.push(n[w],n[T],n[k],n[P])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(u_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):TS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const T=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||p==null||y==null||T==null)throw new ES;const k=u<<2|p>>4;if(a.push(k),y!==64){const P=p<<4&240|y>>2;if(a.push(P),T!==64){const W=y<<6&192|T;a.push(W)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class ES extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kS=function(s){const e=u_(s);return h_.encodeByteArray(e,!0)},cd=function(s){return kS(s).replace(/\./g,"")},d_=function(s){try{return h_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const NS=()=>SS().__FIREBASE_DEFAULTS__,jS=()=>{if(typeof process>"u"||typeof s1>"u")return;const s=s1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},RS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&d_(s[1]);return e&&JSON.parse(e)},Ad=()=>{try{return xS()||NS()||jS()||RS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},f_=s=>Ad()?.emulatorHosts?.[s],m_=s=>{const e=f_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},p_=()=>Ad()?.config,g_=s=>Ad()?.[`_${s}`];class CS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function Mi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fg(s){return(await fetch(s,{credentials:"include"})).ok}function y_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[cd(JSON.stringify(n)),cd(JSON.stringify(d)),""].join(".")}const Hc={};function AS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Hc))Hc[e]?s.emulator.push(e):s.prod.push(e);return s}function IS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let r1=!1;function mg(s,e){if(typeof window>"u"||typeof document>"u"||!Mi(window.location.host)||Hc[s]===e||Hc[s]||r1)return;Hc[s]=e;function n(k){return`__firebase__banner__${k}`}const a="__firebase__banner",u=AS().prod.length>0;function d(){const k=document.getElementById(a);k&&k.remove()}function p(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function g(k,P){k.setAttribute("width","24"),k.setAttribute("id",P),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function y(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{r1=!0,d()},k}function w(k,P){k.setAttribute("id",P),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function T(){const k=IS(a),P=n("text"),W=document.getElementById(P)||document.createElement("span"),B=n("learnmore"),L=document.getElementById(B)||document.createElement("a"),re=n("preprendIcon"),X=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const he=k.element;p(he),w(L,B);const ke=y();g(X,re),he.append(X,W,L,ke),document.body.appendChild(he)}u?(W.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function As(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(As())}function MS(){const s=Ad()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function OS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VS(){const s=As();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function BS(){return!MS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function US(){try{return typeof indexedDB=="object"}catch{return!1}}function zS(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const FS="FirebaseError";class ia extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=FS,Object.setPrototypeOf(this,ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uu.prototype.create)}}class uu{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?HS(u,a):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new ia(o,p,a)}}function HS(s,e){return s.replace(qS,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const qS=/\{\$([^}]+)}/g;function $S(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function pl(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=s[o],d=e[o];if(a1(u)&&a1(d)){if(!pl(u,d))return!1}else if(u!==d)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function a1(s){return s!==null&&typeof s=="object"}function hu(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Oc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Vc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function WS(s,e){const n=new GS(s,e);return n.subscribe.bind(n)}class GS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");KS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=sp),o.error===void 0&&(o.error=sp),o.complete===void 0&&(o.complete=sp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function sp(){}function Vn(s){return s&&s._delegate?s._delegate:s}class Ni{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ul="[DEFAULT]";class YS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new CS;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XS(e))try{this.getOrInitializeService({instanceIdentifier:ul})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=ul){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ul){return this.instances.has(e)}getOptions(e=ul){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);a===p&&d.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:QS(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ul){return this.component?this.component.multipleInstances?e:ul:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QS(s){return s===ul?void 0:s}function XS(s){return s.instantiationMode==="EAGER"}class JS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Zt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Zt||(Zt={}));const ZS={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},eN=Zt.INFO,tN={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},nN=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=tN[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pg{constructor(e){this.name=e,this._logLevel=eN,this._logHandler=nN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const sN=(s,e)=>e.some(n=>s instanceof n);let i1,l1;function rN(){return i1||(i1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aN(){return l1||(l1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v_=new WeakMap,Ap=new WeakMap,b_=new WeakMap,rp=new WeakMap,gg=new WeakMap;function iN(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(Ti(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&v_.set(n,s)}).catch(()=>{}),gg.set(e,s),e}function lN(s){if(Ap.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Ap.set(s,e)}let Ip={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Ap.get(s);if(e==="objectStoreNames")return s.objectStoreNames||b_.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ti(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function oN(s){Ip=s(Ip)}function cN(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(ap(this),e,...n);return b_.set(a,e.sort?e.sort():[e]),Ti(a)}:aN().includes(s)?function(...e){return s.apply(ap(this),e),Ti(v_.get(this))}:function(...e){return Ti(s.apply(ap(this),e))}}function uN(s){return typeof s=="function"?cN(s):(s instanceof IDBTransaction&&lN(s),sN(s,rN())?new Proxy(s,Ip):s)}function Ti(s){if(s instanceof IDBRequest)return iN(s);if(rp.has(s))return rp.get(s);const e=uN(s);return e!==s&&(rp.set(s,e),gg.set(e,s)),e}const ap=s=>gg.get(s);function hN(s,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),p=Ti(d);return a&&d.addEventListener("upgradeneeded",g=>{a(Ti(d.result),g.oldVersion,g.newVersion,Ti(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const dN=["get","getKey","getAll","getAllKeys","count"],fN=["put","add","delete","clear"],ip=new Map;function o1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(ip.get(e))return ip.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=fN.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||dN.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return a&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return ip.set(e,u),u}oN(s=>({...s,get:(e,n,a)=>o1(e,n)||s.get(e,n,a),has:(e,n)=>!!o1(e,n)||s.has(e,n)}));class mN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pN(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function pN(s){return s.getComponent()?.type==="VERSION"}const Dp="@firebase/app",c1="0.14.7";const Ia=new pg("@firebase/app"),gN="@firebase/app-compat",yN="@firebase/analytics-compat",vN="@firebase/analytics",bN="@firebase/app-check-compat",wN="@firebase/app-check",_N="@firebase/auth",xN="@firebase/auth-compat",TN="@firebase/database",EN="@firebase/data-connect",kN="@firebase/database-compat",SN="@firebase/functions",NN="@firebase/functions-compat",jN="@firebase/installations",RN="@firebase/installations-compat",CN="@firebase/messaging",AN="@firebase/messaging-compat",IN="@firebase/performance",DN="@firebase/performance-compat",MN="@firebase/remote-config",PN="@firebase/remote-config-compat",LN="@firebase/storage",ON="@firebase/storage-compat",VN="@firebase/firestore",BN="@firebase/ai",UN="@firebase/firestore-compat",zN="firebase",FN="12.8.0";const Mp="[DEFAULT]",HN={[Dp]:"fire-core",[gN]:"fire-core-compat",[vN]:"fire-analytics",[yN]:"fire-analytics-compat",[wN]:"fire-app-check",[bN]:"fire-app-check-compat",[_N]:"fire-auth",[xN]:"fire-auth-compat",[TN]:"fire-rtdb",[EN]:"fire-data-connect",[kN]:"fire-rtdb-compat",[SN]:"fire-fn",[NN]:"fire-fn-compat",[jN]:"fire-iid",[RN]:"fire-iid-compat",[CN]:"fire-fcm",[AN]:"fire-fcm-compat",[IN]:"fire-perf",[DN]:"fire-perf-compat",[MN]:"fire-rc",[PN]:"fire-rc-compat",[LN]:"fire-gcs",[ON]:"fire-gcs-compat",[VN]:"fire-fst",[UN]:"fire-fst-compat",[BN]:"fire-vertex","fire-js":"fire-js",[zN]:"fire-js-all"};const ud=new Map,qN=new Map,Pp=new Map;function u1(s,e){try{s.container.addComponent(e)}catch(n){Ia.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function gl(s){const e=s.name;if(Pp.has(e))return Ia.debug(`There were multiple attempts to register component ${e}.`),!1;Pp.set(e,s);for(const n of ud.values())u1(n,s);for(const n of qN.values())u1(n,s);return!0}function Id(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function er(s){return s==null?!1:s.settings!==void 0}const $N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new uu("app","Firebase",$N);class WN{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}const Tl=FN;function yg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:Mp,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Ei.create("bad-app-name",{appName:String(o)});if(n||(n=p_()),!n)throw Ei.create("no-options");const u=ud.get(o);if(u){if(pl(n,u.options)&&pl(a,u.config))return u;throw Ei.create("duplicate-app",{appName:o})}const d=new JS(o);for(const g of Pp.values())d.addComponent(g);const p=new WN(n,a,d);return ud.set(o,p),p}function vg(s=Mp){const e=ud.get(s);if(!e&&s===Mp&&p_())return yg();if(!e)throw Ei.create("no-app",{appName:s});return e}function Jr(s,e,n){let a=HN[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ia.warn(d.join(" "));return}gl(new Ni(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const GN="firebase-heartbeat-database",KN=1,Jc="firebase-heartbeat-store";let lp=null;function w_(){return lp||(lp=hN(GN,KN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Jc)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ei.create("idb-open",{originalErrorMessage:s.message})})),lp}async function YN(s){try{const n=(await w_()).transaction(Jc),a=await n.objectStore(Jc).get(__(s));return await n.done,a}catch(e){if(e instanceof ia)Ia.warn(e.message);else{const n=Ei.create("idb-get",{originalErrorMessage:e?.message});Ia.warn(n.message)}}}async function h1(s,e){try{const a=(await w_()).transaction(Jc,"readwrite");await a.objectStore(Jc).put(e,__(s)),await a.done}catch(n){if(n instanceof ia)Ia.warn(n.message);else{const a=Ei.create("idb-set",{originalErrorMessage:n?.message});Ia.warn(a.message)}}}function __(s){return`${s.name}!${s.options.appId}`}const QN=1024,XN=30;class JN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ej(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=d1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>XN){const o=tj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ia.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=d1(),{heartbeatsToSend:n,unsentEntries:a}=ZN(this._heartbeatsCache.heartbeats),o=cd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ia.warn(e),""}}}function d1(){return new Date().toISOString().substring(0,10)}function ZN(s,e=QN){const n=[];let a=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),f1(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),f1(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class ej{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return US()?zS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return h1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return h1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function f1(s){return cd(JSON.stringify({version:2,heartbeats:s})).length}function tj(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}function nj(s){gl(new Ni("platform-logger",e=>new mN(e),"PRIVATE")),gl(new Ni("heartbeat",e=>new JN(e),"PRIVATE")),Jr(Dp,c1,s),Jr(Dp,c1,"esm2020"),Jr("fire-js","")}nj("");function x_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sj=x_,T_=new uu("auth","Firebase",x_());const hd=new pg("@firebase/auth");function rj(s,...e){hd.logLevel<=Zt.WARN&&hd.warn(`Auth (${Tl}): ${s}`,...e)}function Jh(s,...e){hd.logLevel<=Zt.ERROR&&hd.error(`Auth (${Tl}): ${s}`,...e)}function Mr(s,...e){throw bg(s,...e)}function Zr(s,...e){return bg(s,...e)}function E_(s,e,n){const a={...sj(),[e]:n};return new uu("auth","Firebase",a).create(e,{appName:s.name})}function Ra(s){return E_(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bg(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return T_.create(s,...e)}function Et(s,e,...n){if(!s)throw bg(e,...n)}function Sa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Jh(e),new Error(e)}function Da(s,e){s||Sa(e)}function Lp(){return typeof self<"u"&&self.location?.href||""}function aj(){return m1()==="http:"||m1()==="https:"}function m1(){return typeof self<"u"&&self.location?.protocol||null}function ij(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aj()||LS()||"connection"in navigator)?navigator.onLine:!0}function lj(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class du{constructor(e,n){this.shortDelay=e,this.longDelay=n,Da(n>e,"Short delay should be less than long delay!"),this.isMobile=DS()||OS()}get(){return ij()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wg(s,e){Da(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class k_{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const cj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uj=new du(3e4,6e4);function La(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Oa(s,e,n,a,o={}){return S_(s,o,async()=>{let u={},d={};a&&(e==="GET"?d=a:u={body:JSON.stringify(a)});const p=hu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return PS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Mi(s.emulatorConfig.host)&&(y.credentials="include"),k_.fetch()(await N_(s,s.config.apiHost,n,p),y)})}async function S_(s,e,n){s._canInitEmulator=!1;const a={...oj,...e};try{const o=new dj(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Vh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Vh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw Vh(s,"user-disabled",d);const w=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw E_(s,w,y);Mr(s,w)}}catch(o){if(o instanceof ia)throw o;Mr(s,"network-request-failed",{message:String(o)})}}async function fu(s,e,n,a,o={}){const u=await Oa(s,e,n,a,o);return"mfaPendingCredential"in u&&Mr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function N_(s,e,n,a){const o=`${e}${n}?${a}`,u=s,d=u.config.emulator?wg(s.config,o):`${s.config.apiScheme}://${o}`;return cj.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function hj(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Zr(this.auth,"network-request-failed")),uj.get())})}}function Vh(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=Zr(s,e,a);return o.customData._tokenResponse=n,o}function p1(s){return s!==void 0&&s.enterprise!==void 0}class fj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mj(s,e){return Oa(s,"GET","/v2/recaptchaConfig",La(s,e))}async function pj(s,e){return Oa(s,"POST","/v1/accounts:delete",e)}async function dd(s,e){return Oa(s,"POST","/v1/accounts:lookup",e)}function qc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gj(s,e=!1){const n=Vn(s),a=await n.getIdToken(e),o=_g(a);Et(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:a,authTime:qc(op(o.auth_time)),issuedAtTime:qc(op(o.iat)),expirationTime:qc(op(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function op(s){return Number(s)*1e3}function _g(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const o=d_(n);return o?JSON.parse(o):(Jh("Failed to decode base64 JWT payload"),null)}catch(o){return Jh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function g1(s){const e=_g(s);return Et(e,"internal-error"),Et(typeof e.exp<"u","internal-error"),Et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Zc(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof ia&&yj(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function yj({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class vj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Op{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function fd(s){const e=s.auth,n=await s.getIdToken(),a=await Zc(s,dd(e,{idToken:n}));Et(a?.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?j_(o.providerUserInfo):[],d=wj(s.providerData,u),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,y=p?g:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Op(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,w)}async function bj(s){const e=Vn(s);await fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wj(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function j_(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function _j(s,e){const n=await S_(s,{},async()=>{const a=hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await N_(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:a};return s.emulatorConfig&&Mi(s.emulatorConfig.host)&&(g.credentials="include"),k_.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xj(s,e){return Oa(s,"POST","/v2/accounts:revokeToken",La(s,e))}class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Et(e.idToken,"internal-error"),Et(typeof e.idToken<"u","internal-error"),Et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Et(e.length!==0,"internal-error");const n=g1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:u}=await _j(e,n);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:u}=n,d=new _o;return a&&(Et(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(Et(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Et(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return Sa("not implemented")}}function mi(s,e){Et(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Ir{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new vj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Op(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Zc(this,this.stsTokenManager.getToken(this.auth,e));return Et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gj(this,e)}reload(){return bj(this)}_assign(e){this!==e&&(Et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await fd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(Ra(this.auth));const e=await this.getIdToken();return await Zc(this,pj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:T,emailVerified:k,isAnonymous:P,providerData:W,stsTokenManager:B}=n;Et(T&&B,e,"internal-error");const L=_o.fromJSON(this.name,B);Et(typeof T=="string",e,"internal-error"),mi(a,e.name),mi(o,e.name),Et(typeof k=="boolean",e,"internal-error"),Et(typeof P=="boolean",e,"internal-error"),mi(u,e.name),mi(d,e.name),mi(p,e.name),mi(g,e.name),mi(y,e.name),mi(w,e.name);const re=new Ir({uid:T,auth:e,email:o,emailVerified:k,displayName:a,isAnonymous:P,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:L,createdAt:y,lastLoginAt:w});return W&&Array.isArray(W)&&(re.providerData=W.map(X=>({...X}))),g&&(re._redirectEventId=g),re}static async _fromIdTokenResponse(e,n,a=!1){const o=new _o;o.updateFromServerResponse(n);const u=new Ir({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await fd(u),u}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];Et(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?j_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,p=new _o;p.updateFromIdToken(a);const g=new Ir({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Op(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const y1=new Map;function Na(s){Da(s instanceof Function,"Expected a class definition");let e=y1.get(s);return e?(Da(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,y1.set(s,e),e)}class R_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}R_.type="NONE";const v1=R_;function Zh(s,e,n){return`firebase:${s}:${e}:${n}`}class xo{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Zh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Zh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dd(this.auth,{idToken:e}).catch(()=>{});return n?Ir._fromGetAccountInfoResponse(this.auth,n,e):null}return Ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new xo(Na(v1),e,a);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Na(v1);const d=Zh(a,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(d);if(w){let T;if(typeof w=="string"){const k=await dd(e,{idToken:w}).catch(()=>{});if(!k)break;T=await Ir._fromGetAccountInfoResponse(e,k,w)}else T=Ir._fromJSON(e,w);y!==u&&(p=T),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new xo(u,e,a):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new xo(u,e,a))}}function b1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(P_(e))return"Blackberry";if(L_(e))return"Webos";if(A_(e))return"Safari";if((e.includes("chrome/")||I_(e))&&!e.includes("edge/"))return"Chrome";if(M_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if(a?.length===2)return a[1]}return"Other"}function C_(s=As()){return/firefox\//i.test(s)}function A_(s=As()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I_(s=As()){return/crios\//i.test(s)}function D_(s=As()){return/iemobile/i.test(s)}function M_(s=As()){return/android/i.test(s)}function P_(s=As()){return/blackberry/i.test(s)}function L_(s=As()){return/webos/i.test(s)}function xg(s=As()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Tj(s=As()){return xg(s)&&!!window.navigator?.standalone}function Ej(){return VS()&&document.documentMode===10}function O_(s=As()){return xg(s)||M_(s)||L_(s)||P_(s)||/windows phone/i.test(s)||D_(s)}function V_(s,e=[]){let n;switch(s){case"Browser":n=b1(As());break;case"Worker":n=`${b1(As())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tl}/${a}`}class kj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function Sj(s,e={}){return Oa(s,"GET","/v2/passwordPolicy",La(s,e))}const Nj=6;class jj{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Nj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class Rj{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w1(this),this.idTokenSubscription=new w1(this),this.beforeStateQueue=new kj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=T_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Na(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dd(this,{idToken:e}),a=await Ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(er(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=a?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(a=p.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(Ra(this));const n=e?Vn(e):null;return n&&Et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(Ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(Ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Sj(this),n=new jj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uu("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await xj(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Na(e)||this._popupRedirectResolver;Et(n,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[Na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,a,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&rj(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pi(s){return Vn(s)}class w1{constructor(e){this.auth=e,this.observer=null,this.addObserver=WS(n=>this.observer=n)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Dd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cj(s){Dd=s}function B_(s){return Dd.loadJS(s)}function Aj(){return Dd.recaptchaEnterpriseScript}function Ij(){return Dd.gapiScript}function Dj(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Mj{constructor(){this.enterprise=new Pj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Pj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Lj="recaptcha-enterprise",U_="NO_RECAPTCHA";class Oj{constructor(e){this.type=Lj,this.auth=Pi(e)}async verify(e="verify",n=!1){async function a(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{mj(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new fj(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function o(u,d,p){const g=window.grecaptcha;p1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(U_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Mj().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{a(this.auth).then(p=>{if(!n&&p1(window.grecaptcha))o(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Aj();g.length!==0&&(g+=p),B_(g).then(()=>{o(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function _1(s,e,n,a=!1,o=!1){const u=new Oj(s);let d;if(o)d=U_;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return a?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function md(s,e,n,a,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await _1(s,e,n,n==="getOobCode");return a(s,u)}else return a(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await _1(s,e,n,n==="getOobCode");return a(s,d)}else return Promise.reject(u)})}function Vj(s,e){const n=Id(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(pl(u,e??{}))return o;Mr(o,"already-initialized")}return n.initialize({options:e})}function Bj(s,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(Na);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function Uj(s,e,n){const a=Pi(s);Et(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=z_(e),{host:d,port:p}=zj(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},w=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Et(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Et(pl(y,a.config.emulator)&&pl(w,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=w,a.settings.appVerificationDisabledForTesting=!0,Mi(d)?(fg(`${u}//${d}${g}`),mg("Auth",!0)):Fj()}function z_(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function zj(s){const e=z_(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:x1(a.substr(u.length+1))}}else{const[u,d]=a.split(":");return{host:u,port:x1(d)}}}function x1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Fj(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Tg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sa("not implemented")}_getIdTokenResponse(e){return Sa("not implemented")}_linkToIdToken(e,n){return Sa("not implemented")}_getReauthenticationResolver(e){return Sa("not implemented")}}async function Hj(s,e){return Oa(s,"POST","/v1/accounts:signUp",e)}async function qj(s,e){return fu(s,"POST","/v1/accounts:signInWithPassword",La(s,e))}async function $j(s,e){return Oa(s,"POST","/v1/accounts:sendOobCode",La(s,e))}async function Wj(s,e){return $j(s,e)}async function Gj(s,e){return fu(s,"POST","/v1/accounts:signInWithEmailLink",La(s,e))}async function Kj(s,e){return fu(s,"POST","/v1/accounts:signInWithEmailLink",La(s,e))}class eu extends Tg{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new eu(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new eu(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return md(e,n,"signInWithPassword",qj);case"emailLink":return Gj(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return md(e,a,"signUpPassword",Hj);case"emailLink":return Kj(e,{idToken:n,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function To(s,e){return fu(s,"POST","/v1/accounts:signInWithIdp",La(s,e))}const Yj="http://localhost";class yl extends Tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=n;if(!a||!o)return null;const d=new yl(a,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return To(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,To(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,To(e,n)}buildRequest(){const e={requestUri:Yj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hu(n)}return e}}function Qj(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Xj(s){const e=Oc(Vc(s)).link,n=e?Oc(Vc(e)).deep_link_id:null,a=Oc(Vc(s)).deep_link_id;return(a?Oc(Vc(a)).link:null)||a||n||e||s}class Eg{constructor(e){const n=Oc(Vc(e)),a=n.apiKey??null,o=n.oobCode??null,u=Qj(n.mode??null);Et(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Xj(e);try{return new Eg(n)}catch{return null}}}class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,n){return eu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Eg.parseLink(n);return Et(a,"argument-error"),eu._fromEmailAndCode(e,a.code,a.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class F_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class mu extends F_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yi extends mu{constructor(){super("facebook.com")}static credential(e){return yl._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";yi.PROVIDER_ID="facebook.com";class vi extends mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yl._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return vi.credential(n,a)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";class bi extends mu{constructor(){super("github.com")}static credential(e){return yl._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";class wi extends mu{constructor(){super("twitter.com")}static credential(e,n){return yl._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return wi.credential(n,a)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";async function Jj(s,e){return fu(s,"POST","/v1/accounts:signUp",La(s,e))}class vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const u=await Ir._fromIdTokenResponse(e,a,o),d=T1(a);return new vl({user:u,providerId:d,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=T1(a);return new vl({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function T1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class pd extends ia{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,pd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new pd(e,n,a,o)}}function H_(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?pd._fromErrorAndOperation(s,u,e,a):u})}async function Zj(s,e,n=!1){const a=await Zc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return vl._forOperation(s,"link",a)}async function eR(s,e,n=!1){const{auth:a}=s;if(er(a.app))return Promise.reject(Ra(a));const o="reauthenticate";try{const u=await Zc(s,H_(a,o,e,s),n);Et(u.idToken,a,"internal-error");const d=_g(u.idToken);Et(d,a,"internal-error");const{sub:p}=d;return Et(s.uid===p,a,"user-mismatch"),vl._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Mr(a,"user-mismatch"),u}}async function q_(s,e,n=!1){if(er(s.app))return Promise.reject(Ra(s));const a="signIn",o=await H_(s,a,e),u=await vl._fromIdTokenResponse(s,a,o);return n||await s._updateCurrentUser(u.user),u}async function tR(s,e){return q_(Pi(s),e)}async function $_(s){const e=Pi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nR(s,e,n){const a=Pi(s);await md(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Wj)}async function d3(s,e,n){if(er(s.app))return Promise.reject(Ra(s));const a=Pi(s),d=await md(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jj).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&$_(s),g}),p=await vl._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(p.user),p}function sR(s,e,n){return er(s.app)?Promise.reject(Ra(s)):tR(Vn(s),Lo.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&$_(s),a})}function rR(s,e){return Vn(s).setPersistence(e)}function aR(s,e,n,a){return Vn(s).onIdTokenChanged(e,n,a)}function iR(s,e,n){return Vn(s).beforeAuthStateChanged(e,n)}function lR(s,e,n,a){return Vn(s).onAuthStateChanged(e,n,a)}function oR(s){return Vn(s).signOut()}const gd="__sak";class W_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gd,"1"),this.storage.removeItem(gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cR=1e3,uR=10;class G_ extends W_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!n&&this.localCache[a]===d||this.notifyListeners(a,d)},u=this.storage.getItem(a);Ej()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,uR):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},cR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}G_.type="LOCAL";const K_=G_;class Y_ extends W_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Y_.type="SESSION";const kg=Y_;function hR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Md(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,u)),g=await hR(p);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Md.receivers=[];function Sg(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}class dR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=Sg("",20);o.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(T){const k=T;if(k.data.eventId===y)switch(k.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(k.data.response);break;default:clearTimeout(w),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ea(){return window}function fR(s){ea().location.href=s}function Q_(){return typeof ea().WorkerGlobalScope<"u"&&typeof ea().importScripts=="function"}async function mR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pR(){return navigator?.serviceWorker?.controller||null}function gR(){return Q_()?self:null}const X_="firebaseLocalStorageDb",yR=1,yd="firebaseLocalStorage",J_="fbase_key";class pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pd(s,e){return s.transaction([yd],e?"readwrite":"readonly").objectStore(yd)}function vR(){const s=indexedDB.deleteDatabase(X_);return new pu(s).toPromise()}function Vp(){const s=indexedDB.open(X_,yR);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(yd,{keyPath:J_})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(yd)?e(a):(a.close(),await vR(),e(await Vp()))})})}async function E1(s,e,n){const a=Pd(s,!0).put({[J_]:e,value:n});return new pu(a).toPromise()}async function bR(s,e){const n=Pd(s,!1).get(e),a=await new pu(n).toPromise();return a===void 0?null:a.value}function k1(s,e){const n=Pd(s,!0).delete(e);return new pu(n).toPromise()}const wR=800,_R=3;class Z_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>_R)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Md._getInstance(gR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await mR(),!this.activeServiceWorker)return;this.sender=new dR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vp();return await E1(e,gd,"1"),await k1(e,gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>E1(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>bR(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>k1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Pd(o,!1).getAll();return new pu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z_.type="LOCAL";const xR=Z_;new du(3e4,6e4);function TR(s,e){return e?Na(e):(Et(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Ng extends Tg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,n){return To(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ER(s){return q_(s.auth,new Ng(s),s.bypassAuthState)}function kR(s){const{auth:e,user:n}=s;return Et(n,e,"internal-error"),eR(n,new Ng(s),s.bypassAuthState)}async function SR(s){const{auth:e,user:n}=s;return Et(n,e,"internal-error"),Zj(n,new Ng(s),s.bypassAuthState)}class ex{constructor(e,n,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ER;case"linkViaPopup":case"linkViaRedirect":return SR;case"reauthViaPopup":case"reauthViaRedirect":return kR;default:Mr(this.auth,"internal-error")}}resolve(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const NR=new du(2e3,1e4);class vo extends ex{constructor(e,n,a,o,u){super(e,n,o,u),this.provider=a,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Et(e,this.auth,"internal-error"),e}async onExecution(){Da(this.filter.length===1,"Popup operations only handle one event");const e=Sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NR.get())};e()}}vo.currentPopupAction=null;const jR="pendingRedirect",ed=new Map;class RR extends ex{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=ed.get(this.auth._key());if(!e){try{const a=await CR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}ed.set(this.auth._key(),e)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CR(s,e){const n=DR(e),a=IR(s);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function AR(s,e){ed.set(s._key(),e)}function IR(s){return Na(s._redirectPersistence)}function DR(s){return Zh(jR,s.config.apiKey,s.name)}async function MR(s,e,n=!1){if(er(s.app))return Promise.reject(Ra(s));const a=Pi(s),o=TR(a,e),d=await new RR(a,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}const PR=600*1e3;class LR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!tx(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Zr(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PR&&this.cachedEventUids.clear(),this.cachedEventUids.has(S1(e))}saveEventToCache(e){this.cachedEventUids.add(S1(e)),this.lastProcessedEventTime=Date.now()}}function S1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function tx({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function OR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tx(s);default:return!1}}async function VR(s,e={}){return Oa(s,"GET","/v1/projects",e)}const BR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UR=/^https?/;async function zR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await VR(s);for(const n of e)try{if(FR(n))return}catch{}Mr(s,"unauthorized-domain")}function FR(s){const e=Lp(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===a}if(!UR.test(n))return!1;if(BR.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}const HR=new du(3e4,6e4);function N1(){const s=ea().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function qR(s){return new Promise((e,n)=>{function a(){N1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N1(),n(Zr(s,"network-request-failed"))},timeout:HR.get()})}if(ea().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ea().gapi?.load)a();else{const o=Dj("iframefcb");return ea()[o]=()=>{gapi.load?a():n(Zr(s,"network-request-failed"))},B_(`${Ij()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw td=null,e})}let td=null;function $R(s){return td=td||qR(s),td}const WR=new du(5e3,15e3),GR="__/auth/iframe",KR="emulator/auth/iframe",YR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XR(s){const e=s.config;Et(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?wg(e,KR):`https://${s.config.authDomain}/${GR}`,a={apiKey:e.apiKey,appName:s.name,v:Tl},o=QR.get(s.config.apiHost);o&&(a.eid=o);const u=s._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${hu(a).slice(1)}`}async function JR(s){const e=await $R(s),n=ea().gapi;return Et(n,s,"internal-error"),e.open({where:document.body,url:XR(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YR,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const d=Zr(s,"network-request-failed"),p=ea().setTimeout(()=>{u(d)},WR.get());function g(){ea().clearTimeout(p),o(a)}a.ping(g).then(g,()=>{u(d)})}))}const ZR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eC=500,tC=600,nC="_blank",sC="http://localhost";class j1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rC(s,e,n,a=eC,o=tC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let p="";const g={...ZR,width:a.toString(),height:o.toString(),top:u,left:d},y=As().toLowerCase();n&&(p=I_(y)?nC:n),C_(y)&&(e=e||sC,g.scrollbars="yes");const w=Object.entries(g).reduce((k,[P,W])=>`${k}${P}=${W},`,"");if(Tj(y)&&p!=="_self")return aC(e||"",p),new j1(null);const T=window.open(e||"",p,w);Et(T,s,"popup-blocked");try{T.focus()}catch{}return new j1(T)}function aC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const iC="__/auth/handler",lC="emulator/auth/handler",oC=encodeURIComponent("fac");async function R1(s,e,n,a,o,u){Et(s.config.authDomain,s,"auth-domain-config-required"),Et(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:Tl,eventId:o};if(e instanceof F_){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",$S(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))d[w]=T}if(e instanceof mu){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(d.scopes=w.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await s._getAppCheckToken(),y=g?`#${oC}=${encodeURIComponent(g)}`:"";return`${cC(s)}?${hu(p).slice(1)}${y}`}function cC({config:s}){return s.emulator?wg(s,lC):`https://${s.authDomain}/${iC}`}const cp="webStorageSupport";class uC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kg,this._completeRedirectFn=MR,this._overrideRedirectResult=AR}async _openPopup(e,n,a,o){Da(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await R1(e,n,a,Lp(),o);return rC(e,u,Sg())}async _openRedirect(e,n,a,o){await this._originValidation(e);const u=await R1(e,n,a,Lp(),o);return fR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Da(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await JR(e),a=new LR(e);return n.register("authEvent",o=>(Et(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cp,{type:cp},o=>{const u=o?.[0]?.[cp];u!==void 0&&n(!!u),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return O_()||A_()||xg()}}const hC=uC;var C1="@firebase/auth",A1="1.12.0";class dC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mC(s){gl(new Ni("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=a.options;Et(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V_(s)},y=new Rj(a,o,u,g);return Bj(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),gl(new Ni("auth-internal",e=>{const n=Pi(e.getProvider("auth").getImmediate());return(a=>new dC(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(C1,A1,fC(s)),Jr(C1,A1,"esm2020")}const pC=300,gC=g_("authIdTokenMaxAge")||pC;let I1=null;const yC=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>gC)return;const o=n?.token;I1!==o&&(I1=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function nx(s=vg()){const e=Id(s,"auth");if(e.isInitialized())return e.getImmediate();const n=Vj(s,{popupRedirectResolver:hC,persistence:[xR,K_,kg]}),a=g_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const d=yC(u.toString());iR(n,d,()=>d(n.currentUser)),aR(n,p=>d(p))}}const o=f_("auth");return o&&Uj(n,`http://${o}`),n}function vC(){return document.getElementsByTagName("head")?.[0]??document}Cj({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const u=Zr("internal-error");u.customData=o,n(u)},a.type="text/javascript",a.charset="UTF-8",vC().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mC("Browser");var D1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ki,sx;(function(){var s;function e(I,S){function C(){}C.prototype=S.prototype,I.F=S.prototype,I.prototype=new C,I.prototype.constructor=I,I.D=function(D,M,H){for(var A=Array(arguments.length-2),We=2;We<arguments.length;We++)A[We-2]=arguments[We];return S.prototype[M].apply(D,A)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,S,C){C||(C=0);const D=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)D[M]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(M=0;M<16;++M)D[M]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=I.g[0],C=I.g[1],M=I.g[2];let H=I.g[3],A;A=S+(H^C&(M^H))+D[0]+3614090360&4294967295,S=C+(A<<7&4294967295|A>>>25),A=H+(M^S&(C^M))+D[1]+3905402710&4294967295,H=S+(A<<12&4294967295|A>>>20),A=M+(C^H&(S^C))+D[2]+606105819&4294967295,M=H+(A<<17&4294967295|A>>>15),A=C+(S^M&(H^S))+D[3]+3250441966&4294967295,C=M+(A<<22&4294967295|A>>>10),A=S+(H^C&(M^H))+D[4]+4118548399&4294967295,S=C+(A<<7&4294967295|A>>>25),A=H+(M^S&(C^M))+D[5]+1200080426&4294967295,H=S+(A<<12&4294967295|A>>>20),A=M+(C^H&(S^C))+D[6]+2821735955&4294967295,M=H+(A<<17&4294967295|A>>>15),A=C+(S^M&(H^S))+D[7]+4249261313&4294967295,C=M+(A<<22&4294967295|A>>>10),A=S+(H^C&(M^H))+D[8]+1770035416&4294967295,S=C+(A<<7&4294967295|A>>>25),A=H+(M^S&(C^M))+D[9]+2336552879&4294967295,H=S+(A<<12&4294967295|A>>>20),A=M+(C^H&(S^C))+D[10]+4294925233&4294967295,M=H+(A<<17&4294967295|A>>>15),A=C+(S^M&(H^S))+D[11]+2304563134&4294967295,C=M+(A<<22&4294967295|A>>>10),A=S+(H^C&(M^H))+D[12]+1804603682&4294967295,S=C+(A<<7&4294967295|A>>>25),A=H+(M^S&(C^M))+D[13]+4254626195&4294967295,H=S+(A<<12&4294967295|A>>>20),A=M+(C^H&(S^C))+D[14]+2792965006&4294967295,M=H+(A<<17&4294967295|A>>>15),A=C+(S^M&(H^S))+D[15]+1236535329&4294967295,C=M+(A<<22&4294967295|A>>>10),A=S+(M^H&(C^M))+D[1]+4129170786&4294967295,S=C+(A<<5&4294967295|A>>>27),A=H+(C^M&(S^C))+D[6]+3225465664&4294967295,H=S+(A<<9&4294967295|A>>>23),A=M+(S^C&(H^S))+D[11]+643717713&4294967295,M=H+(A<<14&4294967295|A>>>18),A=C+(H^S&(M^H))+D[0]+3921069994&4294967295,C=M+(A<<20&4294967295|A>>>12),A=S+(M^H&(C^M))+D[5]+3593408605&4294967295,S=C+(A<<5&4294967295|A>>>27),A=H+(C^M&(S^C))+D[10]+38016083&4294967295,H=S+(A<<9&4294967295|A>>>23),A=M+(S^C&(H^S))+D[15]+3634488961&4294967295,M=H+(A<<14&4294967295|A>>>18),A=C+(H^S&(M^H))+D[4]+3889429448&4294967295,C=M+(A<<20&4294967295|A>>>12),A=S+(M^H&(C^M))+D[9]+568446438&4294967295,S=C+(A<<5&4294967295|A>>>27),A=H+(C^M&(S^C))+D[14]+3275163606&4294967295,H=S+(A<<9&4294967295|A>>>23),A=M+(S^C&(H^S))+D[3]+4107603335&4294967295,M=H+(A<<14&4294967295|A>>>18),A=C+(H^S&(M^H))+D[8]+1163531501&4294967295,C=M+(A<<20&4294967295|A>>>12),A=S+(M^H&(C^M))+D[13]+2850285829&4294967295,S=C+(A<<5&4294967295|A>>>27),A=H+(C^M&(S^C))+D[2]+4243563512&4294967295,H=S+(A<<9&4294967295|A>>>23),A=M+(S^C&(H^S))+D[7]+1735328473&4294967295,M=H+(A<<14&4294967295|A>>>18),A=C+(H^S&(M^H))+D[12]+2368359562&4294967295,C=M+(A<<20&4294967295|A>>>12),A=S+(C^M^H)+D[5]+4294588738&4294967295,S=C+(A<<4&4294967295|A>>>28),A=H+(S^C^M)+D[8]+2272392833&4294967295,H=S+(A<<11&4294967295|A>>>21),A=M+(H^S^C)+D[11]+1839030562&4294967295,M=H+(A<<16&4294967295|A>>>16),A=C+(M^H^S)+D[14]+4259657740&4294967295,C=M+(A<<23&4294967295|A>>>9),A=S+(C^M^H)+D[1]+2763975236&4294967295,S=C+(A<<4&4294967295|A>>>28),A=H+(S^C^M)+D[4]+1272893353&4294967295,H=S+(A<<11&4294967295|A>>>21),A=M+(H^S^C)+D[7]+4139469664&4294967295,M=H+(A<<16&4294967295|A>>>16),A=C+(M^H^S)+D[10]+3200236656&4294967295,C=M+(A<<23&4294967295|A>>>9),A=S+(C^M^H)+D[13]+681279174&4294967295,S=C+(A<<4&4294967295|A>>>28),A=H+(S^C^M)+D[0]+3936430074&4294967295,H=S+(A<<11&4294967295|A>>>21),A=M+(H^S^C)+D[3]+3572445317&4294967295,M=H+(A<<16&4294967295|A>>>16),A=C+(M^H^S)+D[6]+76029189&4294967295,C=M+(A<<23&4294967295|A>>>9),A=S+(C^M^H)+D[9]+3654602809&4294967295,S=C+(A<<4&4294967295|A>>>28),A=H+(S^C^M)+D[12]+3873151461&4294967295,H=S+(A<<11&4294967295|A>>>21),A=M+(H^S^C)+D[15]+530742520&4294967295,M=H+(A<<16&4294967295|A>>>16),A=C+(M^H^S)+D[2]+3299628645&4294967295,C=M+(A<<23&4294967295|A>>>9),A=S+(M^(C|~H))+D[0]+4096336452&4294967295,S=C+(A<<6&4294967295|A>>>26),A=H+(C^(S|~M))+D[7]+1126891415&4294967295,H=S+(A<<10&4294967295|A>>>22),A=M+(S^(H|~C))+D[14]+2878612391&4294967295,M=H+(A<<15&4294967295|A>>>17),A=C+(H^(M|~S))+D[5]+4237533241&4294967295,C=M+(A<<21&4294967295|A>>>11),A=S+(M^(C|~H))+D[12]+1700485571&4294967295,S=C+(A<<6&4294967295|A>>>26),A=H+(C^(S|~M))+D[3]+2399980690&4294967295,H=S+(A<<10&4294967295|A>>>22),A=M+(S^(H|~C))+D[10]+4293915773&4294967295,M=H+(A<<15&4294967295|A>>>17),A=C+(H^(M|~S))+D[1]+2240044497&4294967295,C=M+(A<<21&4294967295|A>>>11),A=S+(M^(C|~H))+D[8]+1873313359&4294967295,S=C+(A<<6&4294967295|A>>>26),A=H+(C^(S|~M))+D[15]+4264355552&4294967295,H=S+(A<<10&4294967295|A>>>22),A=M+(S^(H|~C))+D[6]+2734768916&4294967295,M=H+(A<<15&4294967295|A>>>17),A=C+(H^(M|~S))+D[13]+1309151649&4294967295,C=M+(A<<21&4294967295|A>>>11),A=S+(M^(C|~H))+D[4]+4149444226&4294967295,S=C+(A<<6&4294967295|A>>>26),A=H+(C^(S|~M))+D[11]+3174756917&4294967295,H=S+(A<<10&4294967295|A>>>22),A=M+(S^(H|~C))+D[2]+718787259&4294967295,M=H+(A<<15&4294967295|A>>>17),A=C+(H^(M|~S))+D[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+H&4294967295}a.prototype.v=function(I,S){S===void 0&&(S=I.length);const C=S-this.blockSize,D=this.C;let M=this.h,H=0;for(;H<S;){if(M==0)for(;H<=C;)o(this,I,H),H+=this.blockSize;if(typeof I=="string"){for(;H<S;)if(D[M++]=I.charCodeAt(H++),M==this.blockSize){o(this,D),M=0;break}}else for(;H<S;)if(D[M++]=I[H++],M==this.blockSize){o(this,D),M=0;break}}this.h=M,this.o+=S},a.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var C=I.length-8;C<I.length;++C)I[C]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)I[S++]=this.g[C]>>>D&255;return I};function u(I,S){var C=p;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=S(I)}function d(I,S){this.h=S;const C=[];let D=!0;for(let M=I.length-1;M>=0;M--){const H=I[M]|0;D&&H==S||(C[M]=H,D=!1)}this.g=C}var p={};function g(I){return-128<=I&&I<128?u(I,function(S){return new d([S|0],S<0?-1:0)}):new d([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return T;if(I<0)return L(y(-I));const S=[];let C=1;for(let D=0;I>=C;D++)S[D]=I/C|0,C*=4294967296;return new d(S,0)}function w(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return L(w(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(S,8));let D=T;for(let H=0;H<I.length;H+=8){var M=Math.min(8,I.length-H);const A=parseInt(I.substring(H,H+M),S);M<8?(M=y(Math.pow(S,M)),D=D.j(M).add(y(A))):(D=D.j(C),D=D.add(y(A)))}return D}var T=g(0),k=g(1),P=g(16777216);s=d.prototype,s.m=function(){if(B(this))return-L(this).m();let I=0,S=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);I+=(D>=0?D:4294967296+D)*S,S*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(W(this))return"0";if(B(this))return"-"+L(this).toString(I);const S=y(Math.pow(I,6));var C=this;let D="";for(;;){const M=ke(C,S).g;C=re(C,M.j(S));let H=((C.g.length>0?C.g[0]:C.h)>>>0).toString(I);if(C=M,W(C))return H+D;for(;H.length<6;)H="0"+H;D=H+D}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function W(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function B(I){return I.h==-1}s.l=function(I){return I=re(this,I),B(I)?-1:W(I)?0:1};function L(I){const S=I.g.length,C=[];for(let D=0;D<S;D++)C[D]=~I.g[D];return new d(C,~I.h).add(k)}s.abs=function(){return B(this)?L(this):this},s.add=function(I){const S=Math.max(this.g.length,I.g.length),C=[];let D=0;for(let M=0;M<=S;M++){let H=D+(this.i(M)&65535)+(I.i(M)&65535),A=(H>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);D=A>>>16,H&=65535,A&=65535,C[M]=A<<16|H}return new d(C,C[C.length-1]&-2147483648?-1:0)};function re(I,S){return I.add(L(S))}s.j=function(I){if(W(this)||W(I))return T;if(B(this))return B(I)?L(this).j(L(I)):L(L(this).j(I));if(B(I))return L(this.j(L(I)));if(this.l(P)<0&&I.l(P)<0)return y(this.m()*I.m());const S=this.g.length+I.g.length,C=[];for(var D=0;D<2*S;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<I.g.length;M++){const H=this.i(D)>>>16,A=this.i(D)&65535,We=I.i(M)>>>16,jt=I.i(M)&65535;C[2*D+2*M]+=A*jt,X(C,2*D+2*M),C[2*D+2*M+1]+=H*jt,X(C,2*D+2*M+1),C[2*D+2*M+1]+=A*We,X(C,2*D+2*M+1),C[2*D+2*M+2]+=H*We,X(C,2*D+2*M+2)}for(I=0;I<S;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=S;I<2*S;I++)C[I]=0;return new d(C,0)};function X(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function he(I,S){this.g=I,this.h=S}function ke(I,S){if(W(S))throw Error("division by zero");if(W(I))return new he(T,T);if(B(I))return S=ke(L(I),S),new he(L(S.g),L(S.h));if(B(S))return S=ke(I,L(S)),new he(L(S.g),S.h);if(I.g.length>30){if(B(I)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var C=k,D=S;D.l(I)<=0;)C=ze(C),D=ze(D);var M=Ae(C,1),H=Ae(D,1);for(D=Ae(D,2),C=Ae(C,2);!W(D);){var A=H.add(D);A.l(I)<=0&&(M=M.add(C),H=A),D=Ae(D,1),C=Ae(C,1)}return S=re(I,M.j(S)),new he(M,S)}for(M=T;I.l(S)>=0;){for(C=Math.max(1,Math.floor(I.m()/S.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),H=y(C),A=H.j(S);B(A)||A.l(I)>0;)C-=D,H=y(C),A=H.j(S);W(H)&&(H=k),M=M.add(H),I=re(I,A)}return new he(M,I)}s.B=function(I){return ke(this,I).h},s.and=function(I){const S=Math.max(this.g.length,I.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)&I.i(D);return new d(C,this.h&I.h)},s.or=function(I){const S=Math.max(this.g.length,I.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)|I.i(D);return new d(C,this.h|I.h)},s.xor=function(I){const S=Math.max(this.g.length,I.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)^I.i(D);return new d(C,this.h^I.h)};function ze(I){const S=I.g.length+1,C=[];for(let D=0;D<S;D++)C[D]=I.i(D)<<1|I.i(D-1)>>>31;return new d(C,I.h)}function Ae(I,S){const C=S>>5;S%=32;const D=I.g.length-C,M=[];for(let H=0;H<D;H++)M[H]=S>0?I.i(H+C)>>>S|I.i(H+C+1)<<32-S:I.i(H+C);return new d(M,I.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,sx=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=w,ki=d}).apply(typeof D1<"u"?D1:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rx,Bc,ax,nd,Bp,ix,lx,ox;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var v=0;v<h.length;++v){var _=h[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=n(this);function o(h,v){if(v)e:{var _=a;h=h.split(".");for(var j=0;j<h.length-1;j++){var Q=h[j];if(!(Q in _))break e;_=_[Q]}h=h[h.length-1],j=_[h],v=v(j),v!=j&&v!=null&&e(_,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var _=[],j;for(j in v)Object.prototype.hasOwnProperty.call(v,j)&&_.push([j,v[j]]);return _}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,_){return h.call.apply(h.bind,arguments)}function y(h,v,_){return y=g,y.apply(null,arguments)}function w(h,v){var _=Array.prototype.slice.call(arguments,1);return function(){var j=_.slice();return j.push.apply(j,arguments),h.apply(this,j)}}function T(h,v){function _(){}_.prototype=v.prototype,h.Z=v.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(j,Q,ae){for(var Oe=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)Oe[Ot-2]=arguments[Ot];return v.prototype[Q].apply(j,Oe)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function P(h){const v=h.length;if(v>0){const _=Array(v);for(let j=0;j<v;j++)_[j]=h[j];return _}return[]}function W(h,v){for(let j=1;j<arguments.length;j++){const Q=arguments[j];var _=typeof Q;if(_=_!="object"?_:Q?Array.isArray(Q)?"array":_:"null",_=="array"||_=="object"&&typeof Q.length=="number"){_=h.length||0;const ae=Q.length||0;h.length=_+ae;for(let Oe=0;Oe<ae;Oe++)h[_+Oe]=Q[Oe]}else h.push(Q)}}class B{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){d.setTimeout(()=>{throw h},0)}function re(){var h=I;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class X{constructor(){this.h=this.g=null}add(v,_){const j=he.get();j.set(v,_),this.h?this.h.next=j:this.g=j,this.h=j}}var he=new B(()=>new ke,h=>h.reset());class ke{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,Ae=!1,I=new X,S=()=>{const h=Promise.resolve(void 0);ze=()=>{h.then(C)}};function C(){for(var h;h=re();){try{h.h.call(h.g)}catch(_){L(_)}var v=he;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Ae=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,v),d.removeEventListener("test",_,v)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function We(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}T(We,M),We.prototype.init=function(h,v){const _=this.type=h.type,j=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(_=="mouseover"?v=h.fromElement:_=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var jt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function Te(h,v,_,j,Q){this.listener=h,this.proxy=null,this.src=v,this.type=_,this.capture=!!j,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function De(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ct(h,v,_){for(const j in h)v.call(_,h[j],j,h)}function rt(h,v){for(const _ in h)v.call(void 0,h[_],_,h)}function V(h){const v={};for(const _ in h)v[_]=h[_];return v}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(h,v){let _,j;for(let Q=1;Q<arguments.length;Q++){j=arguments[Q];for(_ in j)h[_]=j[_];for(let ae=0;ae<G.length;ae++)_=G[ae],Object.prototype.hasOwnProperty.call(j,_)&&(h[_]=j[_])}}function Se(h){this.src=h,this.g={},this.h=0}Se.prototype.add=function(h,v,_,j,Q){const ae=h.toString();h=this.g[ae],h||(h=this.g[ae]=[],this.h++);const Oe=Me(h,v,j,Q);return Oe>-1?(v=h[Oe],_||(v.fa=!1)):(v=new Te(v,this.src,ae,!!j,Q),v.fa=_,h.push(v)),v};function Ve(h,v){const _=v.type;if(_ in h.g){var j=h.g[_],Q=Array.prototype.indexOf.call(j,v,void 0),ae;(ae=Q>=0)&&Array.prototype.splice.call(j,Q,1),ae&&(De(v),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Me(h,v,_,j){for(let Q=0;Q<h.length;++Q){const ae=h[Q];if(!ae.da&&ae.listener==v&&ae.capture==!!_&&ae.ha==j)return Q}return-1}var nt="closure_lm_"+(Math.random()*1e6|0),ht={};function pt(h,v,_,j,Q){if(Array.isArray(v)){for(let ae=0;ae<v.length;ae++)pt(h,v[ae],_,j,Q);return null}return _=Ct(_),h&&h[jt]?h.J(v,_,p(j)?!!j.capture:!1,Q):Wt(h,v,_,!1,j,Q)}function Wt(h,v,_,j,Q,ae){if(!v)throw Error("Invalid event type");const Oe=p(Q)?!!Q.capture:!!Q;let Ot=zt(h);if(Ot||(h[nt]=Ot=new Se(h)),_=Ot.add(v,_,j,Oe,ae),_.proxy)return _;if(j=pn(),_.proxy=j,j.src=h,j.listener=_,h.addEventListener)H||(Q=Oe),Q===void 0&&(Q=!1),h.addEventListener(v.toString(),j,Q);else if(h.attachEvent)h.attachEvent(ne(v.toString()),j);else if(h.addListener&&h.removeListener)h.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return _}function pn(){function h(_){return v.call(h.src,h.listener,_)}const v=gn;return h}function Rt(h,v,_,j,Q){if(Array.isArray(v))for(var ae=0;ae<v.length;ae++)Rt(h,v[ae],_,j,Q);else j=p(j)?!!j.capture:!!j,_=Ct(_),h&&h[jt]?(h=h.i,ae=String(v).toString(),ae in h.g&&(v=h.g[ae],_=Me(v,_,j,Q),_>-1&&(De(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete h.g[ae],h.h--)))):h&&(h=zt(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Me(v,_,j,Q)),(_=h>-1?v[h]:null)&&wt(_))}function wt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[jt])Ve(v.i,h);else{var _=h.type,j=h.proxy;v.removeEventListener?v.removeEventListener(_,j,h.capture):v.detachEvent?v.detachEvent(ne(_),j):v.addListener&&v.removeListener&&v.removeListener(j),(_=zt(v))?(Ve(_,h),_.h==0&&(_.src=null,v[nt]=null)):De(h)}}}function ne(h){return h in ht?ht[h]:ht[h]="on"+h}function gn(h,v){if(h.da)h=!0;else{v=new We(v,this);const _=h.listener,j=h.ha||h.src;h.fa&&wt(h),h=_.call(j,v)}return h}function zt(h){return h=h[nt],h instanceof Se?h:null}var vt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ct(h){return typeof h=="function"?h:(h[vt]||(h[vt]=function(v){return h.handleEvent(v)}),h[vt])}function at(){D.call(this),this.i=new Se(this),this.M=this,this.G=null}T(at,D),at.prototype[jt]=!0,at.prototype.removeEventListener=function(h,v,_,j){Rt(this,h,v,_,j)};function He(h,v){var _,j=h.G;if(j)for(_=[];j;j=j.G)_.push(j);if(h=h.M,j=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var Q=v;v=new M(j,h),ge(v,Q)}Q=!0;let ae,Oe;if(_)for(Oe=_.length-1;Oe>=0;Oe--)ae=v.g=_[Oe],Q=Gt(ae,j,!0,v)&&Q;if(ae=v.g=h,Q=Gt(ae,j,!0,v)&&Q,Q=Gt(ae,j,!1,v)&&Q,_)for(Oe=0;Oe<_.length;Oe++)ae=v.g=_[Oe],Q=Gt(ae,j,!1,v)&&Q}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const _=h.g[v];for(let j=0;j<_.length;j++)De(_[j]);delete h.g[v],h.h--}}this.G=null},at.prototype.J=function(h,v,_,j){return this.i.add(String(h),v,!1,_,j)},at.prototype.K=function(h,v,_,j){return this.i.add(String(h),v,!0,_,j)};function Gt(h,v,_,j){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let Q=!0;for(let ae=0;ae<v.length;++ae){const Oe=v[ae];if(Oe&&!Oe.da&&Oe.capture==_){const Ot=Oe.listener,Qn=Oe.ha||Oe.src;Oe.fa&&Ve(h.i,Oe),Q=Ot.call(Qn,j)!==!1&&Q}}return Q&&!j.defaultPrevented}function ns(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function At(h){h.g=ns(()=>{h.g=null,h.i&&(h.i=!1,At(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Bt extends D{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dn(h){D.call(this),this.h=h,this.g={}}T(Dn,D);var Ht=[];function wn(h){ct(h.g,function(v,_){this.g.hasOwnProperty(_)&&wt(v)},h),h.g={}}Dn.prototype.N=function(){Dn.Z.N.call(this),wn(this)},Dn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=d.JSON.stringify,ve=d.JSON.parse,Ne=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Qe(){}function qe(){}var Pe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ge(){M.call(this,"d")}T(Ge,M);function Ue(){M.call(this,"c")}T(Ue,M);var Ie={},we=null;function Ke(){return we=we||new at}Ie.Ia="serverreachability";function st(h){M.call(this,Ie.Ia,h)}T(st,M);function _t(h){const v=Ke();He(v,new st(v))}Ie.STAT_EVENT="statevent";function qt(h,v){M.call(this,Ie.STAT_EVENT,h),this.stat=v}T(qt,M);function Fe(h){const v=Ke();He(v,new qt(v,h))}Ie.Ja="timingevent";function xt(h,v){M.call(this,Ie.Ja,h),this.size=v}T(xt,M);function St(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Dt(){this.g=!0}Dt.prototype.ua=function(){this.g=!1};function Ft(h,v,_,j,Q,ae){h.info(function(){if(h.g)if(ae){var Oe="",Ot=ae.split("&");for(let yn=0;yn<Ot.length;yn++){var Qn=Ot[yn].split("=");if(Qn.length>1){const Pn=Qn[0];Qn=Qn[1];const ar=Pn.split("_");Oe=ar.length>=2&&ar[1]=="type"?Oe+(Pn+"="+Qn+"&"):Oe+(Pn+"=redacted&")}}}else Oe=null;else Oe=ae;return"XMLHTTP REQ ("+j+") [attempt "+Q+"]: "+v+`
`+_+`
`+Oe})}function bt(h,v,_,j,Q,ae,Oe){h.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+Q+"]: "+v+`
`+_+`
`+ae+" "+Oe})}function nn(h,v,_,j){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+sn(h,_)+(j?" "+j:"")})}function $t(h,v){h.info(function(){return"TIMEOUT: "+v})}Dt.prototype.info=function(){};function sn(h,v){if(!h.g)return v;if(!v)return null;try{const ae=JSON.parse(v);if(ae){for(h=0;h<ae.length;h++)if(Array.isArray(ae[h])){var _=ae[h];if(!(_.length<2)){var j=_[1];if(Array.isArray(j)&&!(j.length<1)){var Q=j[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let Oe=1;Oe<j.length;Oe++)j[Oe]=""}}}}return de(ae)}catch{return v}}var on={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},un={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nn;function z(){}T(z,Qe),z.prototype.g=function(){return new XMLHttpRequest},Nn=new z;function ue(h){return encodeURIComponent(String(h))}function fe(h){var v=1;h=h.split(":");const _=[];for(;v>0&&h.length;)_.push(h.shift()),v--;return h.length&&_.push(h.join(":")),_}function pe(h,v,_,j){this.j=h,this.i=v,this.l=_,this.S=j||1,this.V=new Dn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ce}function ce(){this.i=null,this.g="",this.h=!1}var Be={},ut={};function Ye(h,v,_){h.M=1,h.A=Qt(Ee(v)),h.u=_,h.R=!0,lt(h,null)}function lt(h,v){h.F=Date.now(),Bn(h),h.B=Ee(h.A);var _=h.B,j=h.S;Array.isArray(j)||(j=[String(j)]),ks(_.i,"t",j),h.C=0,_=h.j.L,h.h=new ce,h.g=Cu(h.j,_?v:null,!h.u),h.P>0&&(h.O=new Bt(y(h.Y,h,h.g),h.P)),v=h.V,_=h.g,j=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Ht[0]=Q.toString()),Q=Ht);for(let ae=0;ae<Q.length;ae++){const Oe=pt(_,Q[ae],j||v.handleEvent,!1,v.h||v);if(!Oe)break;v.g[Oe.key]=Oe}v=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),_t(),Ft(h.i,h.v,h.B,h.l,h.S,h.u)}pe.prototype.ba=function(h){h=h.target;const v=this.O;v&&Tr(h)==3?v.j():this.Y(h)},pe.prototype.Y=function(h){try{if(h==this.g)e:{const Ot=Tr(this.g),Qn=this.g.ya(),yn=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||ps(this.g)))){this.K||Ot!=4||Qn==7||(Qn==8||yn<=0?_t(3):_t(2)),hn(this);var v=this.g.ca();this.X=v;var _=dt(this);if(this.o=v==200,bt(this.i,this.v,this.B,this.l,this.S,Ot,v),this.o){if(this.U&&!this.L){t:{if(this.g){var j,Q=this.g;if((j=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(j)){var ae=j;break t}}ae=null}if(h=ae)nn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,E(this,h);else{this.o=!1,this.m=3,Fe(12),ie(this),U(this);break e}}if(this.R){h=!0;let Pn;for(;!this.K&&this.C<_.length;)if(Pn=Es(this,_),Pn==ut){Ot==4&&(this.m=4,Fe(14),h=!1),nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==Be){this.m=4,Fe(15),nn(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else nn(this.i,this.l,Pn,null),E(this,Pn);if(rn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||_.length!=0||this.h.h||(this.m=1,Fe(16),h=!1),this.o=this.o&&h,!h)nn(this.i,this.l,_,"[Invalid Chunked Response]"),ie(this),U(this);else if(_.length>0&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.aa&&!Oe.P&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Go(Oe),Oe.P=!0,Fe(11))}}else nn(this.i,this.l,_,null),E(this,_);Ot==4&&ie(this),this.o&&!this.K&&(Ot==4?Su(this.j,this):(this.o=!1,Bn(this)))}else ca(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,Fe(12)):(this.m=0,Fe(13)),ie(this),U(this)}}}catch{}};function dt(h){if(!rn(h))return h.g.la();const v=ps(h.g);if(v==="")return"";let _="";const j=v.length,Q=Tr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ie(h),U(h),"";h.h.i=new d.TextDecoder}for(let ae=0;ae<j;ae++)h.h.h=!0,_+=h.h.i.decode(v[ae],{stream:!(Q&&ae==j-1)});return v.length=0,h.h.g+=_,h.C=0,h.h.g}function rn(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Es(h,v){var _=h.C,j=v.indexOf(`
`,_);return j==-1?ut:(_=Number(v.substring(_,j)),isNaN(_)?Be:(j+=1,j+_>v.length?ut:(v=v.slice(j,j+_),h.C=j+_,v)))}pe.prototype.cancel=function(){this.K=!0,ie(this)};function Bn(h){h.T=Date.now()+h.H,Hn(h,h.H)}function Hn(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=St(y(h.aa,h),v)}function hn(h){h.D&&(d.clearTimeout(h.D),h.D=null)}pe.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?($t(this.i,this.B),this.M!=2&&(_t(),Fe(17)),ie(this),this.m=2,U(this)):Hn(this,this.T-h)};function U(h){h.j.I==0||h.K||Su(h.j,h)}function ie(h){hn(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,wn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function E(h,v){try{var _=h.j;if(_.I!=0&&(_.g==h||Ce(_.h,h))){if(!h.L&&Ce(_.h,h)&&_.I==3){try{var j=_.Ba.g.parse(v)}catch{j=null}if(Array.isArray(j)&&j.length==3){var Q=j;if(Q[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Il(_),qa(_);else break e;$i(_),Fe(18)}}else _.xa=Q[1],0<_.xa-_.K&&Q[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=St(y(_.Va,_),6e3));Le(_.h)<=1&&_.ta&&(_.ta=void 0)}else Hr(_,11)}else if((h.L||_.g==h)&&Il(_),!A(v))for(Q=_.Ba.g.parse(v),v=0;v<Q.length;v++){let yn=Q[v];const Pn=yn[0];if(!(Pn<=_.K))if(_.K=Pn,yn=yn[1],_.I==2)if(yn[0]=="c"){_.M=yn[1],_.ba=yn[2];const ar=yn[3];ar!=null&&(_.ka=ar,_.j.info("VER="+_.ka));const qr=yn[4];qr!=null&&(_.za=qr,_.j.info("SVER="+_.za));const Er=yn[5];Er!=null&&typeof Er=="number"&&Er>0&&(j=1.5*Er,_.O=j,_.j.info("backChannelRequestTimeoutMs_="+j)),j=_;const kr=h.g;if(kr){const Wi=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wi){var ae=j.h;ae.g||Wi.indexOf("spdy")==-1&&Wi.indexOf("quic")==-1&&Wi.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Re(ae,ae.h),ae.h=null))}if(j.G){const Dl=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;Dl&&(j.wa=Dl,Ze(j.J,j.G,Dl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),j=_;var Oe=h;if(j.na=Ru(j,j.L?j.ba:null,j.W),Oe.L){Lt(j.h,Oe);var Ot=Oe,Qn=j.O;Qn&&(Ot.H=Qn),Ot.D&&(hn(Ot),Bn(Ot)),j.g=Oe}else Eu(j);_.i.length>0&&Fr(_)}else yn[0]!="stop"&&yn[0]!="close"||Hr(_,7);else _.I==3&&(yn[0]=="stop"||yn[0]=="close"?yn[0]=="stop"?Hr(_,7):$o(_):yn[0]!="noop"&&_.l&&_.l.qa(yn),_.A=0)}}_t(4)}catch{}}var R=class{constructor(h,v){this.g=h,this.map=v}};function $(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function J(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Le(h){return h.h?1:h.g?h.g.size:0}function Ce(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Re(h,v){h.g?h.g.add(v):h.h=v}function Lt(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}$.prototype.cancel=function(){if(this.i=gt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gt(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const _ of h.g.values())v=v.concat(_.G);return v}return P(h.i)}var q=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oe(h,v){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const j=h[_].indexOf("=");let Q,ae=null;j>=0?(Q=h[_].substring(0,j),ae=h[_].substring(j+1)):Q=h[_],v(Q,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function se(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof se?(this.l=h.l,je(this,h.j),this.o=h.o,this.g=h.g,Je(this,h.u),this.h=h.h,Nt(this,Vr(h.i)),this.m=h.m):h&&(v=String(h).match(q))?(this.l=!1,je(this,v[1]||"",!0),this.o=Mn(v[2]||""),this.g=Mn(v[3]||"",!0),Je(this,v[4]),this.h=Mn(v[5]||"",!0),Nt(this,v[6]||"",!0),this.m=Mn(v[7]||"")):(this.l=!1,this.i=new Un(null,this.l))}se.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(dn(v,Va,!0),":");var _=this.g;return(_||v=="file")&&(h.push("//"),(v=this.o)&&h.push(dn(v,Va,!0),"@"),h.push(ue(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(dn(_,_.charAt(0)=="/"?Ba:Bi,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",dn(_,cn)),h.join("")},se.prototype.resolve=function(h){const v=Ee(this);let _=!!h.j;_?je(v,h.j):_=!!h.o,_?v.o=h.o:_=!!h.g,_?v.g=h.g:_=h.u!=null;var j=h.h;if(_)Je(v,h.u);else if(_=!!h.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var Q=v.h.lastIndexOf("/");Q!=-1&&(j=v.h.slice(0,Q+1)+j)}if(Q=j,Q==".."||Q==".")j="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){j=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ae=[];for(let Oe=0;Oe<Q.length;){const Ot=Q[Oe++];Ot=="."?j&&Oe==Q.length&&ae.push(""):Ot==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),j&&Oe==Q.length&&ae.push("")):(ae.push(Ot),j=!0)}j=ae.join("/")}else j=Q}return _?v.h=j:_=h.i.toString()!=="",_?Nt(v,Vr(h.i)):_=!!h.m,_&&(v.m=h.m),v};function Ee(h){return new se(h)}function je(h,v,_){h.j=_?Mn(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Je(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Nt(h,v,_){v instanceof Un?(h.i=v,Ua(h.i,h.l)):(_||(v=dn(v,vr)),h.i=new Un(v,h.l))}function Ze(h,v,_){h.i.set(v,_)}function Qt(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Mn(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function dn(h,v,_){return typeof h=="string"?(h=encodeURI(h).replace(v,Cn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Cn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Va=/[#\/\?@]/g,Bi=/[#\?:]/g,Ba=/[#\?]/g,vr=/[#\?@]/g,cn=/#/g;function Un(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function zn(h){h.g||(h.g=new Map,h.h=0,h.i&&oe(h.i,function(v,_){h.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}s=Un.prototype,s.add=function(h,v){zn(this),this.i=null,h=_r(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(v),this.h+=1,this};function br(h,v){zn(h),v=_r(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function wr(h,v){return zn(h),v=_r(h,v),h.g.has(v)}s.forEach=function(h,v){zn(this),this.g.forEach(function(_,j){_.forEach(function(Q){h.call(v,Q,j,this)},this)},this)};function ms(h,v){zn(h);let _=[];if(typeof v=="string")wr(h,v)&&(_=_.concat(h.g.get(_r(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)_=_.concat(h[v]);return _}s.set=function(h,v){return zn(this),this.i=null,h=_r(this,h),wr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=ms(this,h),h.length>0?String(h[0]):v):v};function ks(h,v,_){br(h,v),_.length>0&&(h.i=null,h.g.set(_r(h,v),P(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let j=0;j<v.length;j++){var _=v[j];const Q=ue(_);_=ms(this,_);for(let ae=0;ae<_.length;ae++){let Oe=Q;_[ae]!==""&&(Oe+="="+ue(_[ae])),h.push(Oe)}}return this.i=h.join("&")};function Vr(h){const v=new Un;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function _r(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ua(h,v){v&&!h.j&&(zn(h),h.i=null,h.g.forEach(function(_,j){const Q=j.toLowerCase();j!=Q&&(br(this,j),ks(this,Q,_))},h)),h.j=v}function Is(h,v){const _=new Dt;if(d.Image){const j=new Image;j.onload=w(sr,_,"TestLoadImage: loaded",!0,v,j),j.onerror=w(sr,_,"TestLoadImage: error",!1,v,j),j.onabort=w(sr,_,"TestLoadImage: abort",!1,v,j),j.ontimeout=w(sr,_,"TestLoadImage: timeout",!1,v,j),d.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=h}else v(!1)}function Fo(h,v){const _=new Dt,j=new AbortController,Q=setTimeout(()=>{j.abort(),sr(_,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:j.signal}).then(ae=>{clearTimeout(Q),ae.ok?sr(_,"TestPingServer: ok",!0,v):sr(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Q),sr(_,"TestPingServer: error",!1,v)})}function sr(h,v,_,j,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),j(_)}catch{}}function za(){this.g=new Ne}function Br(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Br,Qe),Br.prototype.g=function(){return new Ui(this.i,this.h)};function Ui(h,v){at.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ui,at),s=Ui.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,xr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Fa(this):xr(this),this.readyState==3&&Rl(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Fa(this))},s.Na=function(h){this.g&&(this.response=h,Fa(this))},s.ga=function(){this.g&&Fa(this)};function Fa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,xr(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=v.next();return h.join(`\r
`)};function xr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function rr(h){let v="";return ct(h,function(_,j){v+=j,v+=":",v+=_,v+=`\r
`}),v}function zi(h,v,_){e:{for(j in _){var j=!1;break e}j=!0}j||(_=rr(_),typeof h=="string"?_!=null&&ue(_):Ze(h,v,_))}function Tn(h){at.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Tn,at);var Ur=/^https?$/i,Ho=["POST","PUT"];s=Tn.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,_,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nn.g(),this.g.onreadystatechange=k(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ae){Fi(this,ae);return}if(h=_||"",_=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var Q in j)_.set(Q,j[Q]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const ae of j.keys())_.set(ae,j.get(ae));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(_.keys()).find(ae=>ae.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Ho,v,void 0)>=0)||j||Q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Oe]of _)this.g.setRequestHeader(ae,Oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ae){Fi(this,ae)}};function Fi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,qo(h),oa(h)}function qo(h){h.A||(h.A=!0,He(h,"complete"),He(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,He(this,"complete"),He(this,"abort"),oa(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oa(this,!0)),Tn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Hi(this):this.Xa())},s.Xa=function(){Hi(this)};function Hi(h){if(h.h&&typeof u<"u"){if(h.v&&Tr(h)==4)setTimeout(h.Ca.bind(h),0);else if(He(h,"readystatechange"),Tr(h)==4){h.h=!1;try{const ae=h.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var j;if(j=ae===0){let Oe=String(h.D).match(q)[1]||null;!Oe&&d.self&&d.self.location&&(Oe=d.self.location.protocol.slice(0,-1)),j=!Ur.test(Oe?Oe.toLowerCase():"")}_=j}if(_)He(h,"complete"),He(h,"success");else{h.o=6;try{var Q=Tr(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",qo(h)}}finally{oa(h)}}}}function oa(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,v||He(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Tr(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Tr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),ve(v)}};function ps(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(h){const v={};h=(h.g&&Tr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<h.length;j++){if(A(h[j]))continue;var _=fe(h[j]);const Q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ae=v[Q]||[];v[Q]=ae,ae.push(_)}rt(v,function(j){return j.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zr(h,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||v}function Ha(h){this.za=0,this.i=[],this.j=new Dt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zr("baseRetryDelayMs",5e3,h),this.Za=zr("retryDelaySeedMs",1e4,h),this.Ta=zr("forwardChannelMaxRetries",2,h),this.va=zr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new $(h&&h.concurrentRequestLimit),this.Ba=new za,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ha.prototype,s.ka=8,s.I=1,s.connect=function(h,v,_,j){Fe(0),this.W=h,this.H=v||{},_&&j!==void 0&&(this.H.OSID=_,this.H.OAID=j),this.F=this.X,this.J=Ru(this,null,this.W),Fr(this)};function $o(h){if(Cl(h),h.I==3){var v=h.V++,_=Ee(h.J);if(Ze(_,"SID",h.M),Ze(_,"RID",v),Ze(_,"TYPE","terminate"),qi(h,_),v=new pe(h,h.j,v),v.M=2,v.A=Qt(Ee(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=v.A,_=!0),_||(v.g=Cu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Bn(v)}ju(h)}function qa(h){h.g&&(Go(h),h.g.cancel(),h.g=null)}function Cl(h){qa(h),h.v&&(d.clearTimeout(h.v),h.v=null),Il(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Fr(h){if(!J(h.h)&&!h.m){h.m=!0;var v=h.Ea;ze||S(),Ae||(ze(),Ae=!0),I.add(v,h),h.D=0}}function Al(h,v){return Le(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=St(y(h.Ea,h,v),Nu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new pe(this,this.j,h);let ae=this.o;if(this.U&&(ae?(ae=V(ae),ge(ae,this.U)):ae=this.U),this.u!==null||this.R||(Q.J=ae,ae=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var j=this.i[_];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(v+=j,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=Tu(this,Q,v),_=Ee(this.J),Ze(_,"RID",h),Ze(_,"CVER",22),this.G&&Ze(_,"X-HTTP-Session-Id",this.G),qi(this,_),ae&&(this.R?v="headers="+ue(rr(ae))+"&"+v:this.u&&zi(_,this.u,ae)),Re(this.h,Q),this.Ra&&Ze(_,"TYPE","init"),this.S?(Ze(_,"$req",v),Ze(_,"SID","null"),Q.U=!0,Ye(Q,_,null)):Ye(Q,_,v),this.I=2}}else this.I==3&&(h?Wo(this,h):this.i.length==0||J(this.h)||Wo(this))};function Wo(h,v){var _;v?_=v.l:_=h.V++;const j=Ee(h.J);Ze(j,"SID",h.M),Ze(j,"RID",_),Ze(j,"AID",h.K),qi(h,j),h.u&&h.o&&zi(j,h.u,h.o),_=new pe(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Tu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Re(h.h,_),Ye(_,j,v)}function qi(h,v){h.H&&ct(h.H,function(_,j){Ze(v,j,_)}),h.l&&ct({},function(_,j){Ze(v,j,_)})}function Tu(h,v,_){_=Math.min(h.i.length,_);const j=h.l?y(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Ot=-1;for(;;){const Qn=["count="+_];Ot==-1?_>0?(Ot=Q[0].g,Qn.push("ofs="+Ot)):Ot=0:Qn.push("ofs="+Ot);let yn=!0;for(let Pn=0;Pn<_;Pn++){var ae=Q[Pn].g;const ar=Q[Pn].map;if(ae-=Ot,ae<0)Ot=Math.max(0,Q[Pn].g-100),yn=!1;else try{ae="req"+ae+"_"||"";try{var Oe=ar instanceof Map?ar:Object.entries(ar);for(const[qr,Er]of Oe){let kr=Er;p(Er)&&(kr=de(Er)),Qn.push(ae+qr+"="+encodeURIComponent(kr))}}catch(qr){throw Qn.push(ae+"type="+encodeURIComponent("_badmap")),qr}}catch{j&&j(ar)}}if(yn){Oe=Qn.join("&");break e}}Oe=void 0}return h=h.i.splice(0,_),v.G=h,Oe}function Eu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;ze||S(),Ae||(ze(),Ae=!0),I.add(v,h),h.A=0}}function $i(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=St(y(h.Da,h),Nu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,ku(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=St(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Fe(10),qa(this),ku(this))};function Go(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function ku(h){h.g=new pe(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Ee(h.na);Ze(v,"RID","rpc"),Ze(v,"SID",h.M),Ze(v,"AID",h.K),Ze(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(v,"TO",h.ia),Ze(v,"TYPE","xmlhttp"),qi(h,v),h.u&&h.o&&zi(v,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Qt(Ee(v)),_.u=null,_.R=!0,lt(_,h)}s.Va=function(){this.C!=null&&(this.C=null,qa(this),$i(this),Fe(19))};function Il(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Su(h,v){var _=null;if(h.g==v){Il(h),Go(h),h.g=null;var j=2}else if(Ce(h.h,v))_=v.G,Lt(h.h,v),j=1;else return;if(h.I!=0){if(v.o)if(j==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var Q=h.D;j=Ke(),He(j,new xt(j,_)),Fr(h)}else Eu(h);else if(Q=v.m,Q==3||Q==0&&v.X>0||!(j==1&&Al(h,v)||j==2&&$i(h)))switch(_&&_.length>0&&(v=h.h,v.i=v.i.concat(_)),Q){case 1:Hr(h,5);break;case 4:Hr(h,10);break;case 3:Hr(h,6);break;default:Hr(h,2)}}}function Nu(h,v){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*v}function Hr(h,v){if(h.j.info("Error code "+v),v==2){var _=y(h.bb,h),j=h.Ua;const Q=!j;j=new se(j||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||je(j,"https"),Qt(j),Q?Is(j.toString(),_):Fo(j.toString(),_)}else Fe(2);h.I=0,h.l&&h.l.pa(v),ju(h),Cl(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function ju(h){if(h.I=0,h.ja=[],h.l){const v=gt(h.h);(v.length!=0||h.i.length!=0)&&(W(h.ja,v),W(h.ja,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.oa()}}function Ru(h,v,_){var j=_ instanceof se?Ee(_):new se(_);if(j.g!="")v&&(j.g=v+"."+j.g),Je(j,j.u);else{var Q=d.location;j=Q.protocol,v=v?v+"."+Q.hostname:Q.hostname,Q=+Q.port;const ae=new se(null);j&&je(ae,j),v&&(ae.g=v),Q&&Je(ae,Q),_&&(ae.h=_),j=ae}return _=h.G,v=h.wa,_&&v&&Ze(j,_,v),Ze(j,"VER",h.ka),qi(h,j),j}function Cu(h,v,_){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Tn(new Br({ab:_})):new Tn(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Au(){}s=Au.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function $a(){}$a.prototype.g=function(h,v){return new Ds(h,v)};function Ds(h,v){at.call(this),this.g=new Ha(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!A(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ua(this)}T(Ds,at),Ds.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ds.prototype.close=function(){$o(this.g)},Ds.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=de(h),h=_);v.i.push(new R(v.Ya++,h)),v.I==3&&Fr(v)},Ds.prototype.N=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,Ds.Z.N.call(this)};function Iu(h){Ge.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const _ in v){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}T(Iu,Ge);function Du(){Ue.call(this),this.status=1}T(Du,Ue);function ua(h){this.g=h}T(ua,Au),ua.prototype.ra=function(){He(this.g,"a")},ua.prototype.qa=function(h){He(this.g,new Iu(h))},ua.prototype.pa=function(h){He(this.g,new Du)},ua.prototype.oa=function(){He(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,Ds.prototype.send=Ds.prototype.o,Ds.prototype.open=Ds.prototype.m,Ds.prototype.close=Ds.prototype.close,ox=function(){return new $a},lx=function(){return Ke()},ix=Ie,Bp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,nd=on,un.COMPLETE="complete",ax=un,qe.EventType=Pe,Pe.OPEN="a",Pe.CLOSE="b",Pe.ERROR="c",Pe.MESSAGE="d",at.prototype.listen=at.prototype.J,Bc=qe,Tn.prototype.listenOnce=Tn.prototype.K,Tn.prototype.getLastError=Tn.prototype.Ha,Tn.prototype.getLastErrorCode=Tn.prototype.ya,Tn.prototype.getStatus=Tn.prototype.ca,Tn.prototype.getResponseJson=Tn.prototype.La,Tn.prototype.getResponseText=Tn.prototype.la,Tn.prototype.send=Tn.prototype.ea,Tn.prototype.setWithCredentials=Tn.prototype.Fa,rx=Tn}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});class js{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}js.UNAUTHENTICATED=new js(null),js.GOOGLE_CREDENTIALS=new js("google-credentials-uid"),js.FIRST_PARTY=new js("first-party-uid"),js.MOCK_USER=new js("mock-user");let Oo="12.8.0";function bC(s){Oo=s}const bl=new pg("@firebase/firestore");function mo(){return bl.logLevel}function Xe(s,...e){if(bl.logLevel<=Zt.DEBUG){const n=e.map(jg);bl.debug(`Firestore (${Oo}): ${s}`,...n)}}function Ma(s,...e){if(bl.logLevel<=Zt.ERROR){const n=e.map(jg);bl.error(`Firestore (${Oo}): ${s}`,...n)}}function No(s,...e){if(bl.logLevel<=Zt.WARN){const n=e.map(jg);bl.warn(`Firestore (${Oo}): ${s}`,...n)}}function jg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function kt(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,cx(s,a,n)}function cx(s,e,n){let a=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Ma(a),new Error(a)}function bn(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||cx(e,o,a)}function Pt(s,e){return s}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends ia{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ca{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class ux{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(js.UNAUTHENTICATED)))}shutdown(){}}class _C{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class xC{constructor(e){this.t=e,this.currentUser=js.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bn(this.o===void 0,42304);let a=this.i;const o=g=>this.i!==a?(a=this.i,n(g)):Promise.resolve();let u=new Ca;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ca,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ca)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(bn(typeof a.accessToken=="string",31837,{l:a}),new ux(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bn(e===null||typeof e=="string",2055,{h:e}),new js(e)}}class TC{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=js.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class EC{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new TC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(js.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class M1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bn(this.o===void 0,3512);const a=u=>{u.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Xe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new M1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(bn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new M1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function SC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}class Rg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=SC(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function en(s,e){return s<e?-1:s>e?1:0}function Up(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return up(o)===up(u)?en(o,u):up(o)?1:-1}return en(s.length,e.length)}const NC=55296,jC=57343;function up(s){const e=s.charCodeAt(0);return e>=NC&&e<=jC}function jo(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}const P1="__name__";class Qr{constructor(e,n,a){n===void 0?n=0:n>e.length&&kt(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&kt(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Qr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qr?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=Qr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return en(e.length,n.length)}static compareSegments(e,n){const a=Qr.isNumericId(e),o=Qr.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Qr.extractNumericId(e).compare(Qr.extractNumericId(n)):Up(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ki.fromString(e.substring(4,e.length-2))}}class Rn extends Qr{construct(e,n,a){return new Rn(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new $e(be.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new Rn(n)}static emptyPath(){return new Rn([])}}const RC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _s extends Qr{construct(e,n,a){return new _s(e,n,a)}static isValidIdentifier(e){return RC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_s.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P1}static keyField(){return new _s([P1])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new $e(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new $e(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new $e(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(a+=p,o++):(u(),o++)}if(u(),d)throw new $e(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _s(n)}static emptyPath(){return new _s([])}}class mt{constructor(e){this.path=e}static fromPath(e){return new mt(Rn.fromString(e))}static fromName(e){return new mt(Rn.fromString(e).popFirst(5))}static empty(){return new mt(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Rn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mt(new Rn(e.slice()))}}function hx(s,e,n){if(!n)throw new $e(be.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function CC(s,e,n,a){if(e===!0&&a===!0)throw new $e(be.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function L1(s){if(!mt.isDocumentKey(s))throw new $e(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function O1(s){if(mt.isDocumentKey(s))throw new $e(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function dx(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ld(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":kt(12329,{type:typeof s})}function Pr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new $e(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ld(s);throw new $e(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function cs(s,e){const n={typeString:s};return e&&(n.value=e),n}function gu(s,e){if(!dx(s))throw new $e(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const d=s[a];if(o&&typeof d!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new $e(be.INVALID_ARGUMENT,n);return!0}const V1=-62135596800,B1=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*B1);return new ot(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $e(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $e(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<V1)throw new $e(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B1}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-V1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:cs("string",ot._jsonSchemaVersion),seconds:cs("number"),nanoseconds:cs("number")};class It{static fromTimestamp(e){return new It(e)}static min(){return new It(new ot(0,0))}static max(){return new It(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const tu=-1;function AC(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=It.fromTimestamp(a===1e9?new ot(n+1,0):new ot(n,a));return new ji(o,mt.empty(),e)}function IC(s){return new ji(s.readTime,s.key,tu)}class ji{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new ji(It.min(),mt.empty(),tu)}static max(){return new ji(It.max(),mt.empty(),tu)}}function DC(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=mt.comparator(s.documentKey,e.documentKey),n!==0?n:en(s.largestBatchId,e.largestBatchId))}const MC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vo(s){if(s.code!==be.FAILED_PRECONDITION||s.message!==MC)throw s;Xe("LocalStore","Unexpectedly lost primary lease")}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&kt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.reject(n)}static resolve(e){return new xe(((n,a)=>{n(e)}))}static reject(e){return new xe(((n,a)=>{a(e)}))}static waitFor(e){return new xe(((n,a)=>{let o=0,u=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++u,d&&u===o&&n()}),(g=>a(g)))})),d=!0,u===o&&n()}))}static or(e){let n=xe.resolve(!1);for(const a of e)n=n.next((o=>o?xe.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new xe(((a,o)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((w=>{d[y]=w,++p,p===u&&a(d)}),(w=>o(w)))}}))}static doWhile(e,n){return new xe(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function LC(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bo(s){return s.name==="IndexedDbTransactionError"}class Od{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Od.ce=-1;const Cg=-1;function Vd(s){return s==null}function vd(s){return s===0&&1/s==-1/0}function OC(s){return typeof s=="number"&&Number.isInteger(s)&&!vd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const fx="";function VC(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=U1(e)),e=BC(s.get(n),e);return U1(e)}function BC(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case fx:n+="";break;default:n+=u}}return n}function U1(s){return s+fx+""}function z1(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Li(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function mx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Fn{constructor(e,n){this.comparator=e,this.root=n||ws.EMPTY}insert(e,n){return new Fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ws.BLACK,null,null))}remove(e){return new Fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ws.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uh(this.root,e,this.comparator,!0)}}class Uh{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ws{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??ws.RED,this.left=o??ws.EMPTY,this.right=u??ws.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new ws(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ws.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return ws.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw kt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw kt(27949);return e+(this.isRed()?0:1)}}ws.EMPTY=null,ws.RED=!0,ws.BLACK=!1;ws.EMPTY=new class{constructor(){this.size=0}get key(){throw kt(57766)}get value(){throw kt(16141)}get color(){throw kt(16727)}get left(){throw kt(29726)}get right(){throw kt(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new ws(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hs{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new F1(this.data.getIterator())}getIteratorFrom(e){return new F1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof hs)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new hs(this.comparator);return n.data=e,n}}class F1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class tr{constructor(e){this.fields=e,e.sort(_s.comparator)}static empty(){return new tr([])}unionWith(e){let n=new hs(_s.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new tr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}class px extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ts{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new px("Invalid base64 string: "+u):u}})(e);return new Ts(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Ts(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ts.EMPTY_BYTE_STRING=new Ts("");const UC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(s){if(bn(!!s,39018),typeof s=="string"){let e=0;const n=UC.exec(s);if(bn(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:es(s.seconds),nanos:es(s.nanos)}}function es(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ci(s){return typeof s=="string"?Ts.fromBase64String(s):Ts.fromUint8Array(s)}const gx="server_timestamp",yx="__type__",vx="__previous_value__",bx="__local_write_time__";function Ag(s){return(s?.mapValue?.fields||{})[yx]?.stringValue===gx}function Bd(s){const e=s.mapValue.fields[vx];return Ag(e)?Bd(e):e}function nu(s){const e=Ri(s.mapValue.fields[bx].timestampValue);return new ot(e.seconds,e.nanos)}class zC{constructor(e,n,a,o,u,d,p,g,y,w,T){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w,this.apiKey=T}}const bd="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||bd}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===bd}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}function FC(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new $e(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(s.options.projectId,e)}const wx="__type__",HC="__max__",zh={mapValue:{}},_x="__vector__",wd="value";function Ai(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ag(s)?4:$C(s)?9007199254740991:qC(s)?10:11:kt(28295,{value:s})}function ra(s,e){if(s===e)return!0;const n=Ai(s);if(n!==Ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return nu(s).isEqual(nu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ri(o.timestampValue),p=Ri(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Ci(o.bytesValue).isEqual(Ci(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return es(o.geoPointValue.latitude)===es(u.geoPointValue.latitude)&&es(o.geoPointValue.longitude)===es(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return es(o.integerValue)===es(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=es(o.doubleValue),p=es(u.doubleValue);return d===p?vd(d)===vd(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return jo(s.arrayValue.values||[],e.arrayValue.values||[],ra);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},p=u.mapValue.fields||{};if(z1(d)!==z1(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!ra(d[g],p[g])))return!1;return!0})(s,e);default:return kt(52216,{left:s})}}function ru(s,e){return(s.values||[]).find((n=>ra(n,e)))!==void 0}function Ro(s,e){if(s===e)return 0;const n=Ai(s),a=Ai(e);if(n!==a)return en(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return en(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=es(u.integerValue||u.doubleValue),g=es(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return H1(s.timestampValue,e.timestampValue);case 4:return H1(nu(s),nu(e));case 5:return Up(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Ci(u),g=Ci(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=en(p[y],g[y]);if(w!==0)return w}return en(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=en(es(u.latitude),es(d.latitude));return p!==0?p:en(es(u.longitude),es(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return q1(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[wd]?.arrayValue,w=g[wd]?.arrayValue,T=en(y?.values?.length||0,w?.values?.length||0);return T!==0?T:q1(y,w)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===zh.mapValue&&d===zh.mapValue)return 0;if(u===zh.mapValue)return 1;if(d===zh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let T=0;T<g.length&&T<w.length;++T){const k=Up(g[T],w[T]);if(k!==0)return k;const P=Ro(p[g[T]],y[w[T]]);if(P!==0)return P}return en(g.length,w.length)})(s.mapValue,e.mapValue);default:throw kt(23264,{he:n})}}function H1(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return en(s,e);const n=Ri(s),a=Ri(e),o=en(n.seconds,a.seconds);return o!==0?o:en(n.nanos,a.nanos)}function q1(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=Ro(n[o],a[o]);if(u)return u}return en(n.length,a.length)}function Co(s){return zp(s)}function zp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=Ri(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ci(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return mt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=zp(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of a)u?u=!1:o+=",",o+=`${d}:${zp(n.fields[d])}`;return o+"}"})(s.mapValue):kt(61005,{value:s})}function sd(s){switch(Ai(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bd(s);return e?16+sd(e):16;case 5:return 2*s.stringValue.length;case 6:return Ci(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+sd(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return Li(a.fields,((u,d)=>{o+=u.length+sd(d)})),o})(s.mapValue);default:throw kt(13486,{value:s})}}function $1(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Fp(s){return!!s&&"integerValue"in s}function Ig(s){return!!s&&"arrayValue"in s}function W1(s){return!!s&&"nullValue"in s}function G1(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function rd(s){return!!s&&"mapValue"in s}function qC(s){return(s?.mapValue?.fields||{})[wx]?.stringValue===_x}function $c(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Li(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=$c(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$c(s.arrayValue.values[n]);return e}return{...s}}function $C(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===HC}class Hs{constructor(e){this.value=e}static empty(){return new Hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$c(n)}setAll(e){let n=_s.emptyPath(),a={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,a,o),a={},o=[],n=p.popLast()}d?a[p.lastSegment()]=$c(d):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ra(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];rd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){Li(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new Hs($c(this.value))}}function xx(s){const e=[];return Li(s.fields,((n,a)=>{const o=new _s([n]);if(rd(a)){const u=xx(a.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new tr(e)}class Cs{constructor(e,n,a,o,u,d,p){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Cs(e,0,It.min(),It.min(),It.min(),Hs.empty(),0)}static newFoundDocument(e,n,a,o){return new Cs(e,1,n,It.min(),a,o,0)}static newNoDocument(e,n){return new Cs(e,2,n,It.min(),It.min(),Hs.empty(),0)}static newUnknownDocument(e,n){return new Cs(e,3,n,It.min(),It.min(),Hs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _d{constructor(e,n){this.position=e,this.inclusive=n}}function K1(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?a=mt.comparator(mt.fromName(d.referenceValue),n.key):a=Ro(d,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Y1(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ra(s.position[n],e.position[n]))return!1;return!0}class au{constructor(e,n="asc"){this.field=e,this.dir=n}}function WC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Tx{}class os extends Tx{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new KC(e,n,a):n==="array-contains"?new XC(e,a):n==="in"?new JC(e,a):n==="not-in"?new ZC(e,a):n==="array-contains-any"?new eA(e,a):new os(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new YC(e,a):new QC(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ro(n,this.value)):n!==null&&Ai(this.value)===Ai(n)&&this.matchesComparison(Ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends Tx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Lr(e,n)}matches(e){return Ex(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ex(s){return s.op==="and"}function kx(s){return GC(s)&&Ex(s)}function GC(s){for(const e of s.filters)if(e instanceof Lr)return!1;return!0}function Hp(s){if(s instanceof os)return s.field.canonicalString()+s.op.toString()+Co(s.value);if(kx(s))return s.filters.map((e=>Hp(e))).join(",");{const e=s.filters.map((n=>Hp(n))).join(",");return`${s.op}(${e})`}}function Sx(s,e){return s instanceof os?(function(a,o){return o instanceof os&&a.op===o.op&&a.field.isEqual(o.field)&&ra(a.value,o.value)})(s,e):s instanceof Lr?(function(a,o){return o instanceof Lr&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,d,p)=>u&&Sx(d,o.filters[p])),!0):!1})(s,e):void kt(19439)}function Nx(s){return s instanceof os?(function(n){return`${n.field.canonicalString()} ${n.op} ${Co(n.value)}`})(s):s instanceof Lr?(function(n){return n.op.toString()+" {"+n.getFilters().map(Nx).join(" ,")+"}"})(s):"Filter"}class KC extends os{constructor(e,n,a){super(e,n,a),this.key=mt.fromName(a.referenceValue)}matches(e){const n=mt.comparator(e.key,this.key);return this.matchesComparison(n)}}class YC extends os{constructor(e,n){super(e,"in",n),this.keys=jx("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class QC extends os{constructor(e,n){super(e,"not-in",n),this.keys=jx("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function jx(s,e){return(e.arrayValue?.values||[]).map((n=>mt.fromName(n.referenceValue)))}class XC extends os{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ig(n)&&ru(n.arrayValue,this.value)}}class JC extends os{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ru(this.value.arrayValue,n)}}class ZC extends os{constructor(e,n){super(e,"not-in",n)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ru(this.value.arrayValue,n)}}class eA extends os{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ig(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>ru(this.value.arrayValue,a)))}}class tA{constructor(e,n=null,a=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function Q1(s,e=null,n=[],a=[],o=null,u=null,d=null){return new tA(s,e,n,a,o,u,d)}function Dg(s){const e=Pt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Hp(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>Co(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>Co(a))).join(",")),e.Te=n}return e.Te}function Mg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!WC(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Sx(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Y1(s.startAt,e.startAt)&&Y1(s.endAt,e.endAt)}function qp(s){return mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Uo{constructor(e,n=null,a=[],o=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function nA(s,e,n,a,o,u,d,p){return new Uo(s,e,n,a,o,u,d,p)}function Pg(s){return new Uo(s)}function X1(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function sA(s){return mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Rx(s){return s.collectionGroup!==null}function Wc(s){const e=Pt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new hs(_s.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new au(u,a))})),n.has(_s.keyField().canonicalString())||e.Ie.push(new au(_s.keyField(),a))}return e.Ie}function ta(s){const e=Pt(s);return e.Ee||(e.Ee=rA(e,Wc(s))),e.Ee}function rA(s,e){if(s.limitType==="F")return Q1(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new au(o.field,u)}));const n=s.endAt?new _d(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new _d(s.startAt.position,s.startAt.inclusive):null;return Q1(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function $p(s,e){const n=s.filters.concat([e]);return new Uo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function aA(s,e){const n=s.explicitOrderBy.concat([e]);return new Uo(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Wp(s,e,n){return new Uo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Ud(s,e){return Mg(ta(s),ta(e))&&s.limitType===e.limitType}function Cx(s){return`${Dg(ta(s))}|lt:${s.limitType}`}function po(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>Nx(o))).join(", ")}]`),Vd(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>Co(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>Co(o))).join(",")),`Target(${a})`})(ta(s))}; limitType=${s.limitType})`}function zd(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):mt.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of Wc(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(d,p,g){const y=K1(d,p,g);return d.inclusive?y<=0:y<0})(a.startAt,Wc(a),o)||a.endAt&&!(function(d,p,g){const y=K1(d,p,g);return d.inclusive?y>=0:y>0})(a.endAt,Wc(a),o))})(s,e)}function iA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Ax(s){return(e,n)=>{let a=!1;for(const o of Wc(s)){const u=lA(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function lA(s,e,n){const a=s.field.isKeyField()?mt.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Ro(g,y):kt(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return kt(19790,{direction:s.dir})}}class El{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Li(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return mx(this.inner)}size(){return this.innerSize}}const oA=new Fn(mt.comparator);function Pa(){return oA}const Ix=new Fn(mt.comparator);function Uc(...s){let e=Ix;for(const n of s)e=e.insert(n.key,n);return e}function Dx(s){let e=Ix;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function hl(){return Gc()}function Mx(){return Gc()}function Gc(){return new El((s=>s.toString()),((s,e)=>s.isEqual(e)))}const cA=new Fn(mt.comparator),uA=new hs(mt.comparator);function tn(...s){let e=uA;for(const n of s)e=e.add(n);return e}const hA=new hs(en);function dA(){return hA}function Lg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vd(e)?"-0":e}}function Px(s){return{integerValue:""+s}}function fA(s,e){return OC(e)?Px(e):Lg(s,e)}class Fd{constructor(){this._=void 0}}function mA(s,e,n){return s instanceof xd?(function(o,u){const d={fields:{[yx]:{stringValue:gx},[bx]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Ag(u)&&(u=Bd(u)),u&&(d.fields[vx]=u),{mapValue:d}})(n,e):s instanceof iu?Ox(s,e):s instanceof lu?Vx(s,e):(function(o,u){const d=Lx(o,u),p=J1(d)+J1(o.Ae);return Fp(d)&&Fp(o.Ae)?Px(p):Lg(o.serializer,p)})(s,e)}function pA(s,e,n){return s instanceof iu?Ox(s,e):s instanceof lu?Vx(s,e):n}function Lx(s,e){return s instanceof Td?(function(a){return Fp(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class xd extends Fd{}class iu extends Fd{constructor(e){super(),this.elements=e}}function Ox(s,e){const n=Bx(e);for(const a of s.elements)n.some((o=>ra(o,a)))||n.push(a);return{arrayValue:{values:n}}}class lu extends Fd{constructor(e){super(),this.elements=e}}function Vx(s,e){let n=Bx(e);for(const a of s.elements)n=n.filter((o=>!ra(o,a)));return{arrayValue:{values:n}}}class Td extends Fd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function J1(s){return es(s.integerValue||s.doubleValue)}function Bx(s){return Ig(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function gA(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof iu&&o instanceof iu||a instanceof lu&&o instanceof lu?jo(a.elements,o.elements,ra):a instanceof Td&&o instanceof Td?ra(a.Ae,o.Ae):a instanceof xd&&o instanceof xd})(s.transform,e.transform)}class yA{constructor(e,n){this.version=e,this.transformResults=n}}class pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ad(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Hd{}function Ux(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Og(s.key,pr.none()):new yu(s.key,s.data,pr.none());{const n=s.data,a=Hs.empty();let o=new hs(_s.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?a.delete(u):a.set(u,d),o=o.add(u)}return new Oi(s.key,a,new tr(o.toArray()),pr.none())}}function vA(s,e,n){s instanceof yu?(function(o,u,d){const p=o.value.clone(),g=ew(o.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Oi?(function(o,u,d){if(!ad(o.precondition,u))return void u.convertToUnknownDocument(d.version);const p=ew(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(zx(o)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Kc(s,e,n,a){return s instanceof yu?(function(u,d,p,g){if(!ad(u.precondition,d))return p;const y=u.value.clone(),w=tw(u.fieldTransforms,g,d);return y.setAll(w),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,a):s instanceof Oi?(function(u,d,p,g){if(!ad(u.precondition,d))return p;const y=tw(u.fieldTransforms,g,d),w=d.data;return w.setAll(zx(u)),w.setAll(y),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,e,n,a):(function(u,d,p){return ad(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function bA(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=Lx(a.transform,o||null);u!=null&&(n===null&&(n=Hs.empty()),n.set(a.field,u))}return n||null}function Z1(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&jo(a,o,((u,d)=>gA(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class yu extends Hd{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Oi extends Hd{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function zx(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function ew(s,e,n){const a=new Map;bn(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,p=e.data.field(u.field);a.set(u.field,pA(d,p,n[o]))}return a}function tw(s,e,n){const a=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);a.set(o.field,mA(u,d,e))}return a}class Og extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wA extends Hd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _A{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&vA(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Kc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Kc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=Mx();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(o.key)?null:p;const g=Ux(d,p);g!==null&&a.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(It.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),tn())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((n,a)=>Z1(n,a)))&&jo(this.baseMutations,e.baseMutations,((n,a)=>Z1(n,a)))}}class Vg{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){bn(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return cA})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,a[d].version);return new Vg(e,n,a,o)}}class xA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class TA{constructor(e,n){this.count=e,this.unchangedNames=n}}var ls,ln;function EA(s){switch(s){case be.OK:return kt(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return kt(15467,{code:s})}}function Fx(s){if(s===void 0)return Ma("GRPC error has no .code"),be.UNKNOWN;switch(s){case ls.OK:return be.OK;case ls.CANCELLED:return be.CANCELLED;case ls.UNKNOWN:return be.UNKNOWN;case ls.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case ls.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case ls.INTERNAL:return be.INTERNAL;case ls.UNAVAILABLE:return be.UNAVAILABLE;case ls.UNAUTHENTICATED:return be.UNAUTHENTICATED;case ls.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case ls.NOT_FOUND:return be.NOT_FOUND;case ls.ALREADY_EXISTS:return be.ALREADY_EXISTS;case ls.PERMISSION_DENIED:return be.PERMISSION_DENIED;case ls.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case ls.ABORTED:return be.ABORTED;case ls.OUT_OF_RANGE:return be.OUT_OF_RANGE;case ls.UNIMPLEMENTED:return be.UNIMPLEMENTED;case ls.DATA_LOSS:return be.DATA_LOSS;default:return kt(39323,{code:s})}}(ln=ls||(ls={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";function kA(){return new TextEncoder}const SA=new ki([4294967295,4294967295],0);function nw(s){const e=kA().encode(s),n=new sx;return n.update(e),new Uint8Array(n.digest())}function sw(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ki([n,a],0),new ki([o,u],0)]}class Bg{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new zc(`Invalid padding: ${n}`);if(a<0)throw new zc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new zc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new zc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ki.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(ki.fromNumber(a)));return o.compare(SA)===1&&(o=new ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nw(e),[a,o]=sw(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);if(!this.we(d))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Bg(u,o,n);return a.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=nw(e),[a,o]=sw(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);this.be(d)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qd{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new qd(It.min(),o,new Fn(en),Pa(),tn())}}class vu{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new vu(a,n,tn(),tn(),tn())}}class id{constructor(e,n,a,o){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=o}}class Hx{constructor(e,n){this.targetId=e,this.Ce=n}}class qx{constructor(e,n,a=Ts.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class rw{constructor(){this.ve=0,this.Fe=aw(),this.Me=Ts.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tn(),n=tn(),a=tn();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:kt(38017,{changeType:u})}})),new vu(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=aw()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,bn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class NA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pa(),this.He=Fh(),this.Je=Fh(),this.Ze=new Fn(en)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:kt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(qp(u))if(a===0){const d=new mt(u.path);this.et(n,d,Cs.newNoDocument(d,It.min()))}else bn(a===1,20013,{expectedCount:a});else{const d=this._t(n);if(d!==a){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let d,p;try{d=Ci(a).toUint8Array()}catch(g){if(g instanceof px)return No("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Bg(d,o,u)}catch(g){return No(g instanceof zc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&qp(p.target)){const g=new mt(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Cs.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let a=tn();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(a=a.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new qd(e,n,this.Ze,this.je,a);return this.je=Pa(),this.He=Fh(),this.Je=Fh(),this.Ze=new Fn(en),o}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new rw,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new hs(en),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new hs(en),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Xe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rw),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fh(){return new Fn(mt.comparator)}function aw(){return new Fn(mt.comparator)}const jA={asc:"ASCENDING",desc:"DESCENDING"},RA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CA={and:"AND",or:"OR"};class AA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gp(s,e){return s.useProto3Json||Vd(e)?e:{value:e}}function Ed(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $x(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function IA(s,e){return Ed(s,e.toTimestamp())}function na(s){return bn(!!s,49232),It.fromTimestamp((function(n){const a=Ri(n);return new ot(a.seconds,a.nanos)})(s))}function Ug(s,e){return Kp(s,e).canonicalString()}function Kp(s,e){const n=(function(o){return new Rn(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Wx(s){const e=Rn.fromString(s);return bn(Xx(e),10190,{key:e.toString()}),e}function Yp(s,e){return Ug(s.databaseId,e.path)}function hp(s,e){const n=Wx(e);if(n.get(1)!==s.databaseId.projectId)throw new $e(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new $e(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new mt(Kx(n))}function Gx(s,e){return Ug(s.databaseId,e)}function DA(s){const e=Wx(s);return e.length===4?Rn.emptyPath():Kx(e)}function Qp(s){return new Rn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Kx(s){return bn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function iw(s,e,n){return{name:Yp(s,e),fields:n.value.mapValue.fields}}function MA(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:kt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,w){return y.useProto3Json?(bn(w===void 0||typeof w=="string",58123),Ts.fromBase64String(w||"")):(bn(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Ts.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const w=y.code===void 0?be.UNKNOWN:Fx(y.code);return new $e(w,y.message||"")})(d);n=new qx(a,o,u,p||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=hp(s,a.document.name),u=na(a.document.updateTime),d=a.document.createTime?na(a.document.createTime):It.min(),p=new Hs({mapValue:{fields:a.document.fields}}),g=Cs.newFoundDocument(o,u,d,p),y=a.targetIds||[],w=a.removedTargetIds||[];n=new id(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=hp(s,a.document),u=a.readTime?na(a.readTime):It.min(),d=Cs.newNoDocument(o,u),p=a.removedTargetIds||[];n=new id([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=hp(s,a.document),u=a.removedTargetIds||[];n=new id([],u,o,null)}else{if(!("filter"in e))return kt(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,d=new TA(o,u),p=a.targetId;n=new Hx(p,d)}}return n}function PA(s,e){let n;if(e instanceof yu)n={update:iw(s,e.key,e.value)};else if(e instanceof Og)n={delete:Yp(s,e.key)};else if(e instanceof Oi)n={update:iw(s,e.key,e.data),updateMask:qA(e.fieldMask)};else{if(!(e instanceof wA))return kt(16599,{dt:e.type});n={verify:Yp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,d){const p=d.transform;if(p instanceof xd)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof iu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof lu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Td)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw kt(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:IA(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:kt(27497)})(s,e.precondition)),n}function LA(s,e){return s&&s.length>0?(bn(e!==void 0,14353),s.map((n=>(function(o,u){let d=o.updateTime?na(o.updateTime):na(u);return d.isEqual(It.min())&&(d=na(u)),new yA(d,o.transformResults||[])})(n,e)))):[]}function OA(s,e){return{documents:[Gx(s,e.path)]}}function VA(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=Gx(s,o);const u=(function(y){if(y.length!==0)return Qx(Lr.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((w=>(function(k){return{field:go(k.field),direction:zA(k.dir)}})(w)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Gp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function BA(s){let e=DA(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){bn(a===1,65062);const w=n.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let u=[];n.where&&(u=(function(T){const k=Yx(T);return k instanceof Lr&&kx(k)?k.getFilters():[k]})(n.where));let d=[];n.orderBy&&(d=(function(T){return T.map((k=>(function(W){return new au(yo(W.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(k)))})(n.orderBy));let p=null;n.limit&&(p=(function(T){let k;return k=typeof T=="object"?T.value:T,Vd(k)?null:k})(n.limit));let g=null;n.startAt&&(g=(function(T){const k=!!T.before,P=T.values||[];return new _d(P,k)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const k=!T.before,P=T.values||[];return new _d(P,k)})(n.endAt)),nA(e,o,d,u,p,"F",g,y)}function UA(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Yx(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=yo(n.unaryFilter.field);return os.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(n.unaryFilter.field);return os.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=yo(n.unaryFilter.field);return os.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=yo(n.unaryFilter.field);return os.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return kt(61313);default:return kt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return os.create(yo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return kt(58110);default:return kt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Lr.create(n.compositeFilter.filters.map((a=>Yx(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return kt(1026)}})(n.compositeFilter.op))})(s):kt(30097,{filter:s})}function zA(s){return jA[s]}function FA(s){return RA[s]}function HA(s){return CA[s]}function go(s){return{fieldPath:s.canonicalString()}}function yo(s){return _s.fromServerFormat(s.fieldPath)}function Qx(s){return s instanceof os?(function(n){if(n.op==="=="){if(G1(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(W1(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(G1(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(W1(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:FA(n.op),value:n.value}}})(s):s instanceof Lr?(function(n){const a=n.getFilters().map((o=>Qx(o)));return a.length===1?a[0]:{compositeFilter:{op:HA(n.op),filters:a}}})(s):kt(54877,{filter:s})}function qA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Xx(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function Jx(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class xi{constructor(e,n,a,o,u=It.min(),d=It.min(),p=Ts.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $A{constructor(e){this.yt=e}}function WA(s){const e=BA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Wp(e,e.limit,"L"):e}class GA{constructor(){this.Sn=new KA}addToCollectionParentIndex(e,n){return this.Sn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(ji.min())}updateCollectionGroup(e,n,a){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class KA{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new hs(Rn.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new hs(Rn.comparator)).toArray()}}const lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zx=41943040;class Fs{static withCacheSize(e){return new Fs(e,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}Fs.DEFAULT_COLLECTION_PERCENTILE=10,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fs.DEFAULT=new Fs(Zx,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fs.DISABLED=new Fs(-1,0,0);class Ao{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ao(0)}static ar(){return new Ao(-1)}}const ow="LruGarbageCollector",YA=1048576;function cw([s,e],[n,a]){const o=en(s,n);return o===0?en(e,a):o}class QA{constructor(e){this.Pr=e,this.buffer=new hs(cw),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();cw(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class XA{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Xe(ow,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bo(n)?Xe(ow,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Ar(3e5)}))}}class JA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(Od.ce);const a=new QA(n);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(lw)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lw):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,o,u,d,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(a=T,p=Date.now(),this.removeTargets(e,a,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,a)))).next((T=>(y=Date.now(),mo()<=Zt.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function ZA(s,e){return new JA(s,e)}class e4{constructor(){this.changes=new El((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?xe.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class t4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class n4{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&Kc(a.mutation,o,tr.empty(),ot.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,tn()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=tn()){const o=hl();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let d=Uc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const a=hl();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,tn())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,a,o){let u=Pa();const d=Gc(),p=(function(){return Gc()})();return n.forEach(((g,y)=>{const w=a.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof Oi)?u=u.insert(y.key,y):w!==void 0?(d.set(y.key,w.mutation.getFieldMask()),Kc(w.mutation,y,w.mutation.getFieldMask(),ot.now())):d.set(y.key,tr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,w)=>d.set(y,w))),n.forEach(((y,w)=>p.set(y,new t4(w,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const a=Gc();let o=new Fn(((d,p)=>d-p)),u=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let w=a.get(g)||tr.empty();w=p.applyToLocalView(y,w),a.set(g,w);const T=(o.get(p.batchId)||tn()).add(g);o=o.insert(p.batchId,T)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,T=Mx();w.forEach((k=>{if(!u.has(k)){const P=Ux(n.get(k),a.get(k));P!==null&&T.set(k,P),u=u.add(k)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,T))}return xe.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return sA(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Rx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):xe.resolve(hl());let p=tu,g=u;return d.next((y=>xe.forEach(y,((w,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(w)?xe.resolve():this.remoteDocumentCache.getEntry(e,w).next((k=>{g=g.insert(w,k)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,tn()))).next((w=>({batchId:p,changes:Dx(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new mt(n)).next((a=>{let o=Uc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let d=Uc();return this.indexManager.getCollectionParents(e,u).next((p=>xe.forEach(p,(g=>{const y=(function(T,k){return new Uo(k,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((w=>{w.forEach(((T,k)=>{d=d.insert(T,k)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((d=>{u.forEach(((g,y)=>{const w=y.getKey();d.get(w)===null&&(d=d.insert(w,Cs.newInvalidDocument(w)))}));let p=Uc();return d.forEach(((g,y)=>{const w=u.get(g);w!==void 0&&Kc(w.mutation,y,tr.empty(),ot.now()),zd(n,y)&&(p=p.insert(g,y))})),p}))}}class s4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return xe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:na(o.createTime)}})(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:WA(o.bundledQuery),readTime:na(o.readTime)}})(n)),xe.resolve()}}class r4{constructor(){this.overlays=new Fn(mt.comparator),this.Lr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const a=hl();return xe.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.bt(e,n,u)})),xe.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),xe.resolve()}getOverlaysForCollection(e,n,a){const o=hl(),u=n.length+1,d=new mt(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>a&&o.set(g.getKey(),g)}return xe.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new Fn(((y,w)=>y-w));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>a){let w=u.get(y.largestBatchId);w===null&&(w=hl(),u=u.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=hl(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>p.set(y,w))),!(p.size()>=o)););return xe.resolve(p)}bt(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new xA(n,a));let u=this.Lr.get(n);u===void 0&&(u=tn(),this.Lr.set(n,u)),this.Lr.set(n,u.add(a.key))}}class a4{constructor(){this.sessionToken=Ts.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}class zg{constructor(){this.kr=new hs(fs.Kr),this.qr=new hs(fs.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new fs(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new fs(e,n))}Qr(e,n){e.forEach((a=>this.removeReference(a,n)))}Gr(e){const n=new mt(new Rn([])),a=new fs(n,e),o=new fs(n,e+1),u=[];return this.qr.forEachInRange([a,o],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new mt(new Rn([])),a=new fs(n,e),o=new fs(n,e+1);let u=tn();return this.qr.forEachInRange([a,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new fs(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class fs{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return mt.comparator(e.key,n.key)||en(e.Hr,n.Hr)}static Ur(e,n){return en(e.Hr,n.Hr)||mt.comparator(e.key,n.key)}}class i4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new hs(fs.Kr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _A(u,n,a,o);this.mutationQueue.push(d);for(const p of o)this.Jr=this.Jr.add(new fs(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return xe.resolve(d)}lookupMutationBatch(e,n){return xe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.Xr(a),u=o<0?0:o;return xe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?Cg:this.Yn-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new fs(n,0),o=new fs(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,o],(d=>{const p=this.Zr(d.Hr);u.push(p)})),xe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new hs(en);return n.forEach((o=>{const u=new fs(o,0),d=new fs(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{a=a.add(p.Hr)}))})),xe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;mt.isDocumentKey(u)||(u=u.child(""));const d=new fs(new mt(u),0);let p=new hs(en);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)}),d),xe.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){bn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return xe.forEach(n.mutations,(o=>{const u=new fs(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,n){const a=new fs(n,0),o=this.Jr.firstAfterOrEqual(a);return xe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class l4{constructor(e){this.ti=e,this.docs=(function(){return new Fn(mt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return xe.resolve(a?a.document.mutableCopy():Cs.newInvalidDocument(n))}getEntries(e,n){let a=Pa();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():Cs.newInvalidDocument(o))})),xe.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=Pa();const d=n.path,p=new mt(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||DC(IC(w),a)<=0||(o.has(w.key)||zd(n,w))&&(u=u.insert(w.key,w.mutableCopy()))}return xe.resolve(u)}getAllFromCollectionGroup(e,n,a,o){kt(9500)}ni(e,n){return xe.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new o4(this)}getSize(e){return xe.resolve(this.size)}}class o4 extends e4{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),xe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class c4{constructor(e){this.persistence=e,this.ri=new El((n=>Dg(n)),Mg),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.ii=0,this.si=new zg,this.targetCount=0,this.oi=Ao._r()}forEachTarget(e,n){return this.ri.forEach(((a,o)=>n(o))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),xe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.lr(n),xe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&a.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),xe.waitFor(u).next((()=>o))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return xe.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),xe.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),xe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return xe.resolve(a)}containsKey(e,n){return xe.resolve(this.si.containsKey(n))}}class e2{constructor(e,n){this._i={},this.overlays={},this.ai=new Od(0),this.ui=!1,this.ui=!0,this.ci=new a4,this.referenceDelegate=e(this),this.li=new c4(this),this.indexManager=new GA,this.remoteDocumentCache=(function(o){return new l4(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new $A(n),this.Pi=new s4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new r4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new i4(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){Xe("MemoryPersistence","Starting transaction:",e);const o=new u4(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return xe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,n))))}}class u4 extends PC{constructor(e){super(),this.currentSequenceNumber=e}}class Fg{constructor(e){this.persistence=e,this.Ri=new zg,this.Ai=null}static Vi(e){return new Fg(e)}get di(){if(this.Ai)return this.Ai;throw kt(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),xe.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.di,(a=>{const o=mt.fromPath(a);return this.mi(e,o).next((u=>{u||n.removeEntry(o,It.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return xe.or([()=>xe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class kd{constructor(e,n){this.persistence=e,this.fi=new El((a=>VC(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=ZA(this,n)}static Vi(e,n){return new kd(e,n)}Ti(){}Ii(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}pr(e){let n=0;return this.mr(e,(a=>{n++})).next((()=>n))}mr(e,n){return xe.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((u=>u?xe.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(a++,u.removeEntry(d,It.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=sd(e.data.value)),n}wr(e,n,a){return xe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return xe.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Hg{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=o}static Es(e,n){let a=tn(),o=tn();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Hg(e,n.fromCache,a,o)}}class h4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class d4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return BS()?8:LC(As())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,o,a).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new h4;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,a,o){return a.documentReadCount<this.Vs?(mo()<=Zt.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(mo()<=Zt.DEBUG&&Xe("QueryEngine","Query:",po(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(mo()<=Zt.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ta(n))):xe.resolve())}gs(e,n){if(X1(n))return xe.resolve(null);let a=ta(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Wp(n,null,"F"),a=ta(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const d=tn(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,a).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,d,g.readTime)?this.gs(e,Wp(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,a,o){return X1(n)||o.isEqual(It.min())?xe.resolve(null):this.fs.getDocuments(e,a).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,a,o)?xe.resolve(null):(mo()<=Zt.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(n)),this.Ds(e,d,n,AC(o,tu)).next((p=>p)))}))}bs(e,n){let a=new hs(Ax(e));return n.forEach(((o,u)=>{zd(e,u)&&(a=a.add(u))})),a}Ss(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,a){return mo()<=Zt.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",po(n)),this.fs.getDocumentsMatchingQuery(e,n,ji.min(),a)}Ds(e,n,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const qg="LocalStore",f4=3e8;class m4{constructor(e,n,a,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Fn(en),this.Fs=new El((u=>Dg(u)),Mg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function p4(s,e,n,a){return new m4(s,e,n,a)}async function t2(s,e){const n=Pt(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const d=[],p=[];let g=tn();for(const y of o){d.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of u){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(a,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function g4(s,e){const n=Pt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,w){const T=y.batch,k=T.keys();let P=xe.resolve();return k.forEach((W=>{P=P.next((()=>w.getEntry(g,W))).next((B=>{const L=y.docVersions.get(W);bn(L!==null,48541),B.version.compareTo(L)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),w.addEntry(B)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(g,T)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(p){let g=tn();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function n2(s){const e=Pt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function y4(s,e){const n=Pt(s),a=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((w,T)=>{const k=o.get(T);if(!k)return;p.push(n.li.removeMatchingKeys(u,w.removedDocuments,T).next((()=>n.li.addMatchingKeys(u,w.addedDocuments,T))));let P=k.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?P=P.withResumeToken(Ts.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,a)),o=o.insert(T,P),(function(B,L,re){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=f4?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0})(k,P,w)&&p.push(n.li.updateTargetData(u,P))}));let g=Pa(),y=tn();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,w))})),p.push(v4(u,d,e.documentUpdates).next((w=>{g=w.Bs,y=w.Ls}))),!a.isEqual(It.min())){const w=n.li.getLastRemoteSnapshotVersion(u).next((T=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));p.push(w)}return xe.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=o,u)))}function v4(s,e,n){let a=tn(),o=tn();return n.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let d=Pa();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(It.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Xe(qg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function b4(s,e){const n=Pt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Cg),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function w4(s,e){const n=Pt(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.li.getTargetData(a,e).next((u=>u?(o=u,xe.resolve(o)):n.li.allocateTargetId(a).next((d=>(o=new xi(e,d,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a}))}async function Xp(s,e,n){const a=Pt(s),o=a.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Bo(d))throw d;Xe(qg,`Failed to update sequence numbers for target ${e}: ${d}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function uw(s,e,n){const a=Pt(s);let o=It.min(),u=tn();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,w){const T=Pt(g),k=T.Fs.get(w);return k!==void 0?xe.resolve(T.vs.get(k)):T.li.getTargetData(y,w)})(a,d,ta(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>a.Cs.getDocumentsMatchingQuery(d,e,n?o:It.min(),n?u:tn()))).next((p=>(_4(a,iA(e),p),{documents:p,ks:u})))))}function _4(s,e,n){let a=s.Ms.get(e)||It.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Ms.set(e,a)}class hw{constructor(){this.activeTargetIds=dA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class x4{constructor(){this.vo=new hw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new hw,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class T4{Mo(e){}shutdown(){}}const dw="ConnectivityMonitor";class fw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Xe(dw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Xe(dw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hh=null;function Jp(){return Hh===null?Hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hh++,"0x"+Hh.toString(16)}const dp="RestConnection",E4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class k4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===bd?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,n,a,o,u){const d=Jp(),p=this.Qo(e,n.toUriEncodedString());Xe(dp,`Sending RPC '${e}' ${d}:`,p,a);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:y}=new URL(p),w=Mi(y);return this.zo(e,p,g,a,w).then((T=>(Xe(dp,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw No(dp,`RPC '${e}' ${d} failed with error: `,T,"url: ",p,"request:",a),T}))}jo(e,n,a,o,u,d){return this.Wo(e,n,a,o,u)}Go(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const a=E4[e];let o=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class S4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Ns="WebChannelConnection",Dc=(s,e,n)=>{s.listen(e,(a=>{try{n(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Eo extends k4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Eo.c_){const e=lx();Dc(e,ix.STAT_EVENT,(n=>{n.stat===Bp.PROXY?Xe(Ns,"STAT_EVENT: detected buffering proxy"):n.stat===Bp.NOPROXY&&Xe(Ns,"STAT_EVENT: detected no buffering proxy")})),Eo.c_=!0}}zo(e,n,a,o,u){const d=Jp();return new Promise(((p,g)=>{const y=new rx;y.setWithCredentials(!0),y.listenOnce(ax.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case nd.NO_ERROR:const T=y.getResponseJson();Xe(Ns,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),p(T);break;case nd.TIMEOUT:Xe(Ns,`RPC '${e}' ${d} timed out`),g(new $e(be.DEADLINE_EXCEEDED,"Request time out"));break;case nd.HTTP_ERROR:const k=y.getStatus();if(Xe(Ns,`RPC '${e}' ${d} failed with status:`,k,"response text:",y.getResponseText()),k>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const W=P?.error;if(W&&W.status&&W.message){const B=(function(re){const X=re.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(X)>=0?X:be.UNKNOWN})(W.status);g(new $e(B,W.message))}else g(new $e(be.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new $e(be.UNAVAILABLE,"Connection failed."));break;default:kt(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Xe(Ns,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(o);Xe(Ns,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",w,a,15)}))}T_(e,n,a){const o=Jp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const y=u.join("");Xe(Ns,`Creating RPC '${e}' stream ${o}: ${y}`,p);const w=d.createWebChannel(y,p);this.I_(w);let T=!1,k=!1;const P=new S4({Ho:W=>{k?Xe(Ns,`Not sending because RPC '${e}' stream ${o} is closed:`,W):(T||(Xe(Ns,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),Xe(Ns,`RPC '${e}' stream ${o} sending:`,W),w.send(W))},Jo:()=>w.close()});return Dc(w,Bc.EventType.OPEN,(()=>{k||(Xe(Ns,`RPC '${e}' stream ${o} transport opened.`),P.i_())})),Dc(w,Bc.EventType.CLOSE,(()=>{k||(k=!0,Xe(Ns,`RPC '${e}' stream ${o} transport closed`),P.o_(),this.E_(w))})),Dc(w,Bc.EventType.ERROR,(W=>{k||(k=!0,No(Ns,`RPC '${e}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),P.o_(new $e(be.UNAVAILABLE,"The operation could not be completed")))})),Dc(w,Bc.EventType.MESSAGE,(W=>{if(!k){const B=W.data[0];bn(!!B,16349);const L=B,re=L?.error||L[0]?.error;if(re){Xe(Ns,`RPC '${e}' stream ${o} received error:`,re);const X=re.status;let he=(function(Ae){const I=ls[Ae];if(I!==void 0)return Fx(I)})(X),ke=re.message;he===void 0&&(he=be.INTERNAL,ke="Unknown error status: "+X+" with message "+re.message),k=!0,P.o_(new $e(he,ke)),w.close()}else Xe(Ns,`RPC '${e}' stream ${o} received:`,B),P.__(B)}})),Eo.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return ox()}}function N4(s){return new Eo(s)}function fp(){return typeof document<"u"?document:null}function $d(s){return new AA(s,!0)}Eo.c_=!1;class s2{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&Xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const mw="PersistentStream";class r2{constructor(e,n,a,o,u,d,p,g){this.Ci=e,this.b_=a,this.S_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new s2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(Ma(n.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new $e(be.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Xe(mw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Xe(mw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class j4 extends r2{constructor(e,n,a,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=MA(this.serializer,e),a=(function(u){if(!("targetChange"in u))return It.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?It.min():d.readTime?na(d.readTime):It.min()})(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=Qp(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=qp(g)?{documents:OA(u,g)}:{query:VA(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=$x(u,d.resumeToken);const y=Gp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(It.min())>0){p.readTime=Ed(u,d.snapshotVersion.toTimestamp());const y=Gp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const a=UA(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=Qp(this.serializer),n.removeTarget=e,this.K_(n)}}class R4 extends r2{constructor(e,n,a,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return bn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=LA(e.writeResults,e.commitTime),a=na(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Qp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>PA(this.serializer,a)))};this.K_(n)}}class C4{}class A4 extends C4{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new $e(be.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Kp(n,a),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new $e(be.UNKNOWN,u.toString())}))}jo(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Kp(n,a),o,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new $e(be.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function I4(s,e,n,a){return new A4(s,e,n,a)}class D4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ma(n),this.aa=!1):Xe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const wl="RemoteStore";class M4{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{a.enqueueAndForget((async()=>{kl(this)&&(Xe(wl,"Restarting streams for network reachability change."),await(async function(g){const y=Pt(g);y.Ea.add(4),await bu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Wd(y)})(this))}))})),this.Va=new D4(a,o)}}async function Wd(s){if(kl(s))for(const e of s.Ra)await e(!0)}async function bu(s){for(const e of s.Ra)await e(!1)}function a2(s,e){const n=Pt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Kg(n)?Gg(n):zo(n).O_()&&Wg(n,e))}function $g(s,e){const n=Pt(s),a=zo(n);n.Ia.delete(e),a.O_()&&i2(n,e),n.Ia.size===0&&(a.O_()?a.L_():kl(n)&&n.Va.set("Unknown"))}function Wg(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(It.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zo(s).Z_(e)}function i2(s,e){s.da.$e(e),zo(s).X_(e)}function Gg(s){s.da=new NA({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),zo(s).start(),s.Va.ua()}function Kg(s){return kl(s)&&!zo(s).x_()&&s.Ia.size>0}function kl(s){return Pt(s).Ea.size===0}function l2(s){s.da=void 0}async function P4(s){s.Va.set("Online")}async function L4(s){s.Ia.forEach(((e,n)=>{Wg(s,e)}))}async function O4(s,e){l2(s),Kg(s)?(s.Va.ha(e),Gg(s)):s.Va.set("Unknown")}async function V4(s,e,n){if(s.Va.set("Online"),e instanceof qx&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(a){Xe(wl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Sd(s,a)}else if(e instanceof id?s.da.Xe(e):e instanceof Hx?s.da.st(e):s.da.tt(e),!n.isEqual(It.min()))try{const a=await n2(s.localStore);n.compareTo(a)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=u.Ia.get(y);w&&u.Ia.set(y,w.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const w=u.Ia.get(g);if(!w)return;u.Ia.set(g,w.withResumeToken(Ts.EMPTY_BYTE_STRING,w.snapshotVersion)),i2(u,g);const T=new xi(w.target,g,y,w.sequenceNumber);Wg(u,T)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(a){Xe(wl,"Failed to raise snapshot:",a),await Sd(s,a)}}async function Sd(s,e,n){if(!Bo(e))throw e;s.Ea.add(1),await bu(s),s.Va.set("Offline"),n||(n=()=>n2(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Xe(wl,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Wd(s)}))}function o2(s,e){return e().catch((n=>Sd(s,n,e)))}async function Gd(s){const e=Pt(s),n=Ii(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cg;for(;B4(e);)try{const o=await b4(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,U4(e,o)}catch(o){await Sd(e,o)}c2(e)&&u2(e)}function B4(s){return kl(s)&&s.Ta.length<10}function U4(s,e){s.Ta.push(e);const n=Ii(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function c2(s){return kl(s)&&!Ii(s).x_()&&s.Ta.length>0}function u2(s){Ii(s).start()}async function z4(s){Ii(s).ra()}async function F4(s){const e=Ii(s);for(const n of s.Ta)e.ea(n.mutations)}async function H4(s,e,n){const a=s.Ta.shift(),o=Vg.from(a,e,n);await o2(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Gd(s)}async function q4(s,e){e&&Ii(s).Y_&&await(async function(a,o){if((function(d){return EA(d)&&d!==be.ABORTED})(o.code)){const u=a.Ta.shift();Ii(a).B_(),await o2(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Gd(a)}})(s,e),c2(s)&&u2(s)}async function pw(s,e){const n=Pt(s);n.asyncQueue.verifyOperationInProgress(),Xe(wl,"RemoteStore received new credentials");const a=kl(n);n.Ea.add(3),await bu(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wd(n)}async function $4(s,e){const n=Pt(s);e?(n.Ea.delete(2),await Wd(n)):e||(n.Ea.add(2),await bu(n),n.Va.set("Unknown"))}function zo(s){return s.ma||(s.ma=(function(n,a,o){const u=Pt(n);return u.sa(),new j4(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:P4.bind(null,s),Yo:L4.bind(null,s),t_:O4.bind(null,s),J_:V4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Kg(s)?Gg(s):s.Va.set("Unknown")):(await s.ma.stop(),l2(s))}))),s.ma}function Ii(s){return s.fa||(s.fa=(function(n,a,o){const u=Pt(n);return u.sa(),new R4(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:z4.bind(null,s),t_:q4.bind(null,s),ta:F4.bind(null,s),na:H4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Gd(s)):(await s.fa.stop(),s.Ta.length>0&&(Xe(wl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Yg{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new Ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const d=Date.now()+a,p=new Yg(e,n,d,o,u);return p.start(a),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $e(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qg(s,e){if(Ma("AsyncQueue",`${e}: ${s}`),Bo(s))return new $e(be.UNAVAILABLE,`${e}: ${s}`);throw s}class ko{static emptySet(e){return new ko(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||mt.comparator(n.key,a.key):(n,a)=>mt.comparator(n.key,a.key),this.keyedMap=Uc(),this.sortedSet=new Fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new ko;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class gw{constructor(){this.ga=new Fn(mt.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):kt(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class Io{constructor(e,n,a,o,u,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,a,o,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Io(e,n,ko.emptySet(n),d,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}class W4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class G4{constructor(){this.queries=yw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Pt(n),u=o.queries;o.queries=yw(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(a)}))})(this,new $e(be.ABORTED,"Firestore shutting down"))}}function yw(){return new El((s=>Cx(s)),Ud)}async function h2(s,e){const n=Pt(s);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(a=2):(u=new W4,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=Qg(d,`Initialization of query '${po(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Xg(n)}async function d2(s,e){const n=Pt(s),a=e.query;let o=3;const u=n.queries.get(a);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function K4(s,e){const n=Pt(s);let a=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(o)&&(a=!0);d.wa=o}}a&&Xg(n)}function Y4(s,e,n){const a=Pt(s),o=a.queries.get(e);if(o)for(const u of o.ba)u.onError(n);a.queries.delete(e)}function Xg(s){s.Ca.forEach((e=>{e.next()}))}var Zp,vw;(vw=Zp||(Zp={})).Ma="default",vw.Cache="cache";class f2{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Io(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zp.Cache}}class m2{constructor(e){this.key=e}}class p2{constructor(e){this.key=e}}class Q4{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=tn(),this.mutatedKeys=tn(),this.eu=Ax(e),this.tu=new ko(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new gw,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,T)=>{const k=o.get(w),P=zd(this.query,T)?T:null,W=!!k&&this.mutatedKeys.has(k.key),B=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let L=!1;k&&P?k.data.isEqual(P.data)?W!==B&&(a.track({type:3,doc:P}),L=!0):this.su(k,P)||(a.track({type:2,doc:P}),L=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(p=!0)):!k&&P?(a.track({type:0,doc:P}),L=!0):k&&!P&&(a.track({type:1,doc:k}),L=!0,(g||y)&&(p=!0)),L&&(P?(d=d.add(P),u=B?u.add(w):u.delete(w)):(d=d.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),u=u.delete(w.key),a.track({type:1,doc:w})}return{tu:d,iu:a,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,T)=>(function(P,W){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt(20277,{Vt:L})}};return B(P)-B(W)})(w.type,T.type)||this.eu(w.doc,T.doc))),this.ou(a),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Io(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=tn(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const n=[];return e.forEach((a=>{this.Ya.has(a)||n.push(new p2(a))})),this.Ya.forEach((a=>{e.has(a)||n.push(new m2(a))})),n}cu(e){this.Za=e.ks,this.Ya=tn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Jg="SyncEngine";class X4{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class J4{constructor(e){this.key=e,this.hu=!1}}class Z4{constructor(e,n,a,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new El((p=>Cx(p)),Ud),this.Iu=new Map,this.Eu=new Set,this.Ru=new Fn(mt.comparator),this.Au=new Map,this.Vu=new zg,this.du={},this.mu=new Map,this.fu=Ao.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eI(s,e,n=!0){const a=_2(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await g2(a,e,n,!0),o}async function tI(s,e){const n=_2(s);await g2(n,e,!0,!1)}async function g2(s,e,n,a){const o=await w4(s.localStore,ta(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return a&&(p=await nI(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&a2(s.remoteStore,o),p}async function nI(s,e,n,a,o){s.pu=(T,k,P)=>(async function(B,L,re,X){let he=L.view.ru(re);he.Ss&&(he=await uw(B.localStore,L.query,!1).then((({documents:I})=>L.view.ru(I,he))));const ke=X&&X.targetChanges.get(L.targetId),ze=X&&X.targetMismatches.get(L.targetId)!=null,Ae=L.view.applyChanges(he,B.isPrimaryClient,ke,ze);return ww(B,L.targetId,Ae.au),Ae.snapshot})(s,T,k,P);const u=await uw(s.localStore,e,!0),d=new Q4(e,u.ks),p=d.ru(u.documents),g=vu.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),y=d.applyChanges(p,s.isPrimaryClient,g);ww(s,n,y.au);const w=new X4(e,n,d);return s.Tu.set(e,w),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function sI(s,e,n){const a=Pt(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((d=>!Ud(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Xp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&$g(a.remoteStore,o.targetId),eg(a,o.targetId)})).catch(Vo)):(eg(a,o.targetId),await Xp(a.localStore,o.targetId,!0))}async function rI(s,e){const n=Pt(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),$g(n.remoteStore,a.targetId))}async function aI(s,e,n){const a=dI(s);try{const o=await(function(d,p){const g=Pt(d),y=ot.now(),w=p.reduce(((P,W)=>P.add(W.key)),tn());let T,k;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let W=Pa(),B=tn();return g.xs.getEntries(P,w).next((L=>{W=L,W.forEach(((re,X)=>{X.isValidDocument()||(B=B.add(re))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,W))).next((L=>{T=L;const re=[];for(const X of p){const he=bA(X,T.get(X.key).overlayedDocument);he!=null&&re.push(new Oi(X.key,he,xx(he.value.mapValue),pr.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,re,p)})).next((L=>{k=L;const re=L.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(P,L.batchId,re)}))})).then((()=>({batchId:k.batchId,changes:Dx(T)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new Fn(en)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(a,o.batchId,n),await wu(a,o.changes),await Gd(a.remoteStore)}catch(o){const u=Qg(o,"Failed to persist write");n.reject(u)}}async function y2(s,e){const n=Pt(s);try{const a=await y4(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(bn(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?bn(d.hu,14607):o.removedDocuments.size>0&&(bn(d.hu,42227),d.hu=!1))})),await wu(n,a,e)}catch(a){await Vo(a)}}function bw(s,e,n){const a=Pt(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Pt(d);g.onlineState=p;let y=!1;g.queries.forEach(((w,T)=>{for(const k of T.ba)k.va(p)&&(y=!0)})),y&&Xg(g)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function iI(s,e,n){const a=Pt(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let d=new Fn(mt.comparator);d=d.insert(u,Cs.newNoDocument(u,It.min()));const p=tn().add(u),g=new qd(It.min(),new Map,new Fn(en),d,p);await y2(a,g),a.Ru=a.Ru.remove(u),a.Au.delete(e),Zg(a)}else await Xp(a.localStore,e,!1).then((()=>eg(a,e,n))).catch(Vo)}async function lI(s,e){const n=Pt(s),a=e.batch.batchId;try{const o=await g4(n.localStore,e);b2(n,a,null),v2(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await wu(n,o)}catch(o){await Vo(o)}}async function oI(s,e,n){const a=Pt(s);try{const o=await(function(d,p){const g=Pt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next((T=>(bn(T!==null,37113),w=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(a.localStore,e);b2(a,e,n),v2(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await wu(a,o)}catch(o){await Vo(o)}}function v2(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function b2(s,e,n){const a=Pt(s);let o=a.du[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function eg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||w2(s,a)}))}function w2(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&($g(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),Zg(s))}function ww(s,e,n){for(const a of n)a instanceof m2?(s.Vu.addReference(a.key,e),cI(s,a)):a instanceof p2?(Xe(Jg,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||w2(s,a.key)):kt(19791,{wu:a})}function cI(s,e){const n=e.key,a=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(a)||(Xe(Jg,"New document in limbo: "+n),s.Eu.add(a),Zg(s))}function Zg(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new mt(Rn.fromString(e)),a=s.fu.next();s.Au.set(a,new J4(n)),s.Ru=s.Ru.insert(n,a),a2(s.remoteStore,new xi(ta(Pg(n.path)),a,"TargetPurposeLimboResolution",Od.ce))}}async function wu(s,e,n){const a=Pt(s),o=[],u=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((p,g)=>{d.push(a.pu(g,e,n).then((y=>{if((y||n)&&a.isPrimaryClient){const w=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;a.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Hg.Es(g.targetId,y);u.push(w)}})))})),await Promise.all(d),a.Pu.J_(o),await(async function(g,y){const w=Pt(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>xe.forEach(y,(k=>xe.forEach(k.Ts,(P=>w.persistence.referenceDelegate.addReference(T,k.targetId,P))).next((()=>xe.forEach(k.Is,(P=>w.persistence.referenceDelegate.removeReference(T,k.targetId,P)))))))))}catch(T){if(!Bo(T))throw T;Xe(qg,"Failed to update sequence numbers: "+T)}for(const T of y){const k=T.targetId;if(!T.fromCache){const P=w.vs.get(k),W=P.snapshotVersion,B=P.withLastLimboFreeSnapshotVersion(W);w.vs=w.vs.insert(k,B)}}})(a.localStore,u))}async function uI(s,e){const n=Pt(s);if(!n.currentUser.isEqual(e)){Xe(Jg,"User change. New user:",e.toKey());const a=await t2(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new $e(be.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await wu(n,a.Ns)}}function hI(s,e){const n=Pt(s),a=n.Au.get(e);if(a&&a.hu)return tn().add(a.key);{let o=tn();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function _2(s){const e=Pt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=y2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iI.bind(null,e),e.Pu.J_=K4.bind(null,e.eventManager),e.Pu.yu=Y4.bind(null,e.eventManager),e}function dI(s){const e=Pt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oI.bind(null,e),e}class Nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$d(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return p4(this.persistence,new d4,e.initialUser,this.serializer)}Cu(e){return new e2(Fg.Vi,this.serializer)}Du(e){return new x4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nd.provider={build:()=>new Nd};class fI extends Nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){bn(this.persistence.referenceDelegate instanceof kd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new XA(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Fs.withCacheSize(this.cacheSizeBytes):Fs.DEFAULT;return new e2((a=>kd.Vi(a,n)),this.serializer)}}class tg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>bw(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=uI.bind(null,this.syncEngine),await $4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new G4})()}createDatastore(e){const n=$d(e.databaseInfo.databaseId),a=N4(e.databaseInfo);return I4(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,d,p){return new M4(a,o,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>bw(this.syncEngine,n,0)),(function(){return fw.v()?new fw:new T4})())}createSyncEngine(e,n){return(function(o,u,d,p,g,y,w){const T=new Z4(o,u,d,p,g,y);return w&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=Pt(n);Xe(wl,"RemoteStore shutting down."),a.Ea.add(5),await bu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}tg.provider={build:()=>new tg};class x2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Di="FirestoreClient";class mI{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=o,this.user=js.UNAUTHENTICATED,this.clientId=Rg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async d=>{Xe(Di,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(Xe(Di,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=Qg(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function mp(s,e){s.asyncQueue.verifyOperationInProgress(),Xe(Di,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await t2(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function _w(s,e){s.asyncQueue.verifyOperationInProgress();const n=await pI(s);Xe(Di,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>pw(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>pw(e.remoteStore,o))),s._onlineComponents=e}async function pI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Xe(Di,"Using user provided OfflineComponentProvider");try{await mp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===be.FAILED_PRECONDITION||o.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await mp(s,new Nd)}}else Xe(Di,"Using default OfflineComponentProvider"),await mp(s,new fI(void 0));return s._offlineComponents}async function T2(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Xe(Di,"Using user provided OnlineComponentProvider"),await _w(s,s._uninitializedComponentsProvider._online)):(Xe(Di,"Using default OnlineComponentProvider"),await _w(s,new tg))),s._onlineComponents}function gI(s){return T2(s).then((e=>e.syncEngine))}async function E2(s){const e=await T2(s),n=e.eventManager;return n.onListen=eI.bind(null,e.syncEngine),n.onUnlisten=sI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rI.bind(null,e.syncEngine),n}function yI(s,e,n={}){const a=new Ca;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const w=new x2({next:k=>{w.Nu(),d.enqueueAndForget((()=>d2(u,T)));const P=k.docs.has(p);!P&&k.fromCache?y.reject(new $e(be.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&k.fromCache&&g&&g.source==="server"?y.reject(new $e(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(k)},error:k=>y.reject(k)}),T=new f2(Pg(p.path),w,{includeMetadataChanges:!0,Ka:!0});return h2(u,T)})(await E2(s),s.asyncQueue,e,n,a))),a.promise}function vI(s,e,n={}){const a=new Ca;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const w=new x2({next:k=>{w.Nu(),d.enqueueAndForget((()=>d2(u,T))),k.fromCache&&g.source==="server"?y.reject(new $e(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(k)},error:k=>y.reject(k)}),T=new f2(p,w,{includeMetadataChanges:!0,Ka:!0});return h2(u,T)})(await E2(s),s.asyncQueue,e,n,a))),a.promise}function bI(s,e){const n=new Ca;return s.asyncQueue.enqueueAndForget((async()=>aI(await gI(s),e,n))),n.promise}function k2(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const wI="ComponentProvider",xw=new Map;function _I(s,e,n,a,o){return new zC(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,k2(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const S2="firestore.googleapis.com",Tw=!0;class Ew{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $e(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=S2,this.ssl=Tw}else this.host=e.host,this.ssl=e.ssl??Tw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Zx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YA)throw new $e(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k2(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new $e(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new $e(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new $e(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kd{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ew({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $e(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $e(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ew(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new wC;switch(a.type){case"firstParty":return new EC(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new $e(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=xw.get(n);a&&(Xe(wI,"Removing Datastore"),xw.delete(n),a.terminate())})(this),Promise.resolve()}}function xI(s,e,n,a={}){s=Pr(s,Kd);const o=Mi(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(fg(`https://${p}`),mg("Firestore",!0)),u.host!==S2&&u.host!==p&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:a};if(!pl(g,d)&&(s._setSettings(g),a.mockUserToken)){let y,w;if(typeof a.mockUserToken=="string")y=a.mockUserToken,w=js.MOCK_USER;else{y=y_(a.mockUserToken,s._app?.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new $e(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new js(T)}s._authCredentials=new _C(new ux(y,w))}}class Sl{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Sl(this.firestore,e,this._query)}}class ts{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ts(this.firestore,e,this._key)}toJSON(){return{type:ts._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(gu(n,ts._jsonSchema))return new ts(e,a||null,new mt(Rn.fromString(n.referencePath)))}}ts._jsonSchemaVersion="firestore/documentReference/1.0",ts._jsonSchema={type:cs("string",ts._jsonSchemaVersion),referencePath:cs("string")};class Si extends Sl{constructor(e,n,a){super(e,n,Pg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ts(this.firestore,null,new mt(e))}withConverter(e){return new Si(this.firestore,e,this._path)}}function xs(s,e,...n){if(s=Vn(s),hx("collection","path",e),s instanceof Kd){const a=Rn.fromString(e,...n);return O1(a),new Si(s,null,a)}{if(!(s instanceof ts||s instanceof Si))throw new $e(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Rn.fromString(e,...n));return O1(a),new Si(s.firestore,null,a)}}function Tt(s,e,...n){if(s=Vn(s),arguments.length===1&&(e=Rg.newId()),hx("doc","path",e),s instanceof Kd){const a=Rn.fromString(e,...n);return L1(a),new ts(s,null,new mt(a))}{if(!(s instanceof ts||s instanceof Si))throw new $e(be.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Rn.fromString(e,...n));return L1(a),new ts(s.firestore,s instanceof Si?s.converter:null,new mt(a))}}const kw="AsyncQueue";class Sw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new s2(this,"async_queue_retry"),this._c=()=>{const a=fp();a&&Xe(kw,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=fp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Bo(e))throw e;Xe(kw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Ma("INTERNAL UNHANDLED ERROR: ",Nw(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Yg.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&kt(47125,{Pc:Nw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Nw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Nl extends Kd{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new Sw,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sw(e),this._firestoreClient=void 0,await e}}}function TI(s,e){const n=typeof s=="object"?s:vg(),a=typeof s=="string"?s:bd,o=Id(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=m_("firestore");u&&xI(o,...u)}return o}function ey(s){if(s._terminated)throw new $e(be.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||EI(s),s._firestoreClient}function EI(s){const e=s._freezeSettings(),n=_I(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new mI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mr(Ts.fromBase64String(e))}catch(n){throw new $e(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mr(Ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,mr._jsonSchema))return mr.fromBase64String(e.bytes)}}mr._jsonSchemaVersion="firestore/bytes/1.0",mr._jsonSchema={type:cs("string",mr._jsonSchemaVersion),bytes:cs("string")};class ty{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $e(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _s(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ny{constructor(e){this._methodName=e}}class sa{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $e(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $e(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sa._jsonSchemaVersion}}static fromJSON(e){if(gu(e,sa._jsonSchema))return new sa(e.latitude,e.longitude)}}sa._jsonSchemaVersion="firestore/geoPoint/1.0",sa._jsonSchema={type:cs("string",sa._jsonSchemaVersion),latitude:cs("number"),longitude:cs("number")};class Dr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,Dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Dr(e.vectorValues);throw new $e(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dr._jsonSchemaVersion="firestore/vectorValue/1.0",Dr._jsonSchema={type:cs("string",Dr._jsonSchemaVersion),vectorValues:cs("object")};const kI=/^__.*__$/;class SI{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}class N2{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function j2(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt(40011,{dataSource:s})}}class sy{constructor(e,n,a,o,u,d){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new sy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return jd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(j2(this.dataSource)&&kI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class NI{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||$d(e)}createContext(e,n,a,o=!1){return new sy({dataSource:e,methodName:n,targetDoc:a,path:_s.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yd(s){const e=s._freezeSettings(),n=$d(s._databaseId);return new NI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function R2(s,e,n,a,o,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,n,o);ry("Data must be an object, but it was:",d,a);const p=C2(a,d);let g,y;if(u.merge)g=new tr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const w=[];for(const T of u.mergeFields){const k=_l(e,T,n);if(!d.contains(k))throw new $e(be.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);D2(w,k)||w.push(k)}g=new tr(w),y=d.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=d.fieldTransforms;return new SI(new Hs(p),g,y)}class Qd extends ny{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qd}}function jI(s,e,n,a){const o=s.createContext(1,e,n);ry("Data must be an object, but it was:",o,a);const u=[],d=Hs.empty();Li(a,((g,y)=>{const w=I2(e,g,n);y=Vn(y);const T=o.childContextForFieldPath(w);if(y instanceof Qd)u.push(w);else{const k=_u(y,T);k!=null&&(u.push(w),d.set(w,k))}}));const p=new tr(u);return new N2(d,p,o.fieldTransforms)}function RI(s,e,n,a,o,u){const d=s.createContext(1,e,n),p=[_l(e,a,n)],g=[o];if(u.length%2!=0)throw new $e(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<u.length;k+=2)p.push(_l(e,u[k])),g.push(u[k+1]);const y=[],w=Hs.empty();for(let k=p.length-1;k>=0;--k)if(!D2(y,p[k])){const P=p[k];let W=g[k];W=Vn(W);const B=d.childContextForFieldPath(P);if(W instanceof Qd)y.push(P);else{const L=_u(W,B);L!=null&&(y.push(P),w.set(P,L))}}const T=new tr(y);return new N2(w,T,d.fieldTransforms)}function CI(s,e,n,a=!1){return _u(n,s.createContext(a?4:3,e))}function _u(s,e){if(A2(s=Vn(s)))return ry("Unsupported field value:",e,s),C2(s,e);if(s instanceof ny)return(function(a,o){if(!j2(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const u=[];let d=0;for(const p of a){let g=_u(p,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=Vn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return fA(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=ot.fromDate(a);return{timestampValue:Ed(o.serializer,u)}}if(a instanceof ot){const u=new ot(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Ed(o.serializer,u)}}if(a instanceof sa)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof mr)return{bytesValue:$x(o.serializer,a._byteString)};if(a instanceof ts){const u=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(u))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ug(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Dr)return(function(d,p){const g=d instanceof Dr?d.toArray():d;return{mapValue:{fields:{[wx]:{stringValue:_x},[wd]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw p.createError("VectorValues must only contain numeric values.");return Lg(p.serializer,w)}))}}}}}})(a,o);if(Jx(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Ld(a)}`)})(s,e)}function C2(s,e){const n={};return mx(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Li(s,((a,o)=>{const u=_u(o,e.childContextForField(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function A2(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ot||s instanceof sa||s instanceof mr||s instanceof ts||s instanceof ny||s instanceof Dr||Jx(s))}function ry(s,e,n){if(!A2(n)||!dx(n)){const a=Ld(n);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function _l(s,e,n){if((e=Vn(e))instanceof ty)return e._internalPath;if(typeof e=="string")return I2(s,e);throw jd("Field path arguments must be of type string or ",s,!1,void 0,n)}const AI=new RegExp("[~\\*/\\[\\]]");function I2(s,e,n){if(e.search(AI)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new ty(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function jd(s,e,n,a,o){const u=a&&!a.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${a}`),d&&(g+=` in document ${o}`),g+=")"),new $e(be.INVALID_ARGUMENT,p+s+g)}function D2(s,e){return s.some((n=>n.isEqual(e)))}class II{convertValue(e,n="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return es(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw kt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Li(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){const n=e.fields?.[wd].arrayValue?.values?.map((a=>es(a.doubleValue)));return new Dr(n)}convertGeoPoint(e){return new sa(es(e.latitude),es(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Bd(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(nu(e));default:return null}}convertTimestamp(e){const n=Ri(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Rn.fromString(e);bn(Xx(a),9688,{name:e});const o=new su(a.get(1),a.get(3)),u=new mt(a.popFirst(5));return o.isEqual(n)||Ma(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class M2 extends II{constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ts(this.firestore,null,n)}}const jw="@firebase/firestore",Rw="4.10.0";class P2{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ts(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(_l("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DI extends P2{data(){return super.data()}}function MI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new $e(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ay{}class L2 extends ay{}function qs(s,e,...n){let a=[];e instanceof ay&&a.push(e),a=a.concat(n),(function(u){const d=u.filter((g=>g instanceof iy)).length,p=u.filter((g=>g instanceof Xd)).length;if(d>1||d>0&&p>0)throw new $e(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class Xd extends L2{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Xd(e,n,a)}_apply(e){const n=this._parse(e);return O2(e._query,n),new Sl(e.firestore,e.converter,$p(e._query,n))}_parse(e){const n=Yd(e.firestore);return(function(u,d,p,g,y,w,T){let k;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new $e(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Aw(T,w);const W=[];for(const B of T)W.push(Cw(g,u,B));k={arrayValue:{values:W}}}else k=Cw(g,u,T)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Aw(T,w),k=CI(p,d,T,w==="in"||w==="not-in");return os.create(y,w,k)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Rs(s,e,n){const a=e,o=_l("where",s);return Xd._create(o,a,n)}class iy extends ay{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new iy(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Lr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const p=u.getFlattenedFilters();for(const g of p)O2(d,g),d=$p(d,g)})(e._query,n),new Sl(e.firestore,e.converter,$p(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ly extends L2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ly(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new $e(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new $e(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new au(u,d)})(e._query,this._field,this._direction);return new Sl(e.firestore,e.converter,aA(e._query,n))}}function m3(s,e="asc"){const n=e,a=_l("orderBy",s);return ly._create(a,n)}function Cw(s,e,n){if(typeof(n=Vn(n))=="string"){if(n==="")throw new $e(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rx(e)&&n.indexOf("/")!==-1)throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Rn.fromString(n));if(!mt.isDocumentKey(a))throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return $1(s,new mt(a))}if(n instanceof ts)return $1(s,n._key);throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(n)}.`)}function Aw(s,e){if(!Array.isArray(s)||s.length===0)throw new $e(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O2(s,e){const n=(function(o,u){for(const d of o)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new $e(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $e(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function V2(s,e,n){let a;return a=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,a}class Fc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fl extends P2{constructor(e,n,a,o,u,d){super(e,n,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(_l("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $e(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fl._jsonSchemaVersion="firestore/documentSnapshot/1.0",fl._jsonSchema={type:cs("string",fl._jsonSchemaVersion),bundleSource:cs("string","DocumentSnapshot"),bundleName:cs("string"),bundle:cs("string")};class ld extends fl{data(e={}){return super.data(e)}}class So{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Fc(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new ld(this._firestore,this._userDataWriter,a.key,a,new Fc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $e(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new ld(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Fc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new ld(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Fc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),w=d.indexOf(p.doc.key)),{type:PI(p.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $e(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=So._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt(61501,{type:s})}}So._jsonSchemaVersion="firestore/querySnapshot/1.0",So._jsonSchema={type:cs("string",So._jsonSchemaVersion),bundleSource:cs("string","QuerySnapshot"),bundleName:cs("string"),bundle:cs("string")};function Gn(s){s=Pr(s,ts);const e=Pr(s.firestore,Nl),n=ey(e);return yI(n,s._key).then((a=>OI(e,s,a)))}function $s(s){s=Pr(s,Sl);const e=Pr(s.firestore,Nl),n=ey(e),a=new M2(e);return MI(s._query),vI(n,s._query).then((o=>new So(e,a,s,o)))}function Wn(s,e,n){s=Pr(s,ts);const a=Pr(s.firestore,Nl),o=V2(s.converter,e,n),u=Yd(a);return Jd(a,[R2(u,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,pr.none())])}function LI(s,e,n,...a){s=Pr(s,ts);const o=Pr(s.firestore,Nl),u=Yd(o);let d;return d=typeof(e=Vn(e))=="string"||e instanceof ty?RI(u,"updateDoc",s._key,e,n,a):jI(u,"updateDoc",s._key,e),Jd(o,[d.toMutation(s._key,pr.exists(!0))])}function oy(s){return Jd(Pr(s.firestore,Nl),[new Og(s._key,pr.none())])}function ng(s,e){const n=Pr(s.firestore,Nl),a=Tt(s),o=V2(s.converter,e),u=Yd(s.firestore);return Jd(n,[R2(u,"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,pr.exists(!1))]).then((()=>a))}function Jd(s,e){const n=ey(s);return bI(n,e)}function OI(s,e,n){const a=n.docs.get(e._key),o=new M2(s);return new fl(s,o,e._key,a,new Fc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){bC(Tl),gl(new Ni("firestore",((a,{instanceIdentifier:o,options:u})=>{const d=a.getProvider("app").getImmediate(),p=new Nl(new xC(a.getProvider("auth-internal")),new kC(d,a.getProvider("app-check-internal")),FC(d,o),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Jr(jw,Rw,e),Jr(jw,Rw,"esm2020")})();var VI="firebase",BI="12.8.0";Jr(VI,BI,"app");const B2="firebasestorage.googleapis.com",U2="storageBucket",UI=120*1e3,zI=600*1e3;class Yn extends ia{constructor(e,n,a=0){super(pp(e),`Firebase Storage: ${n} (${pp(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kn||(Kn={}));function pp(s){return"storage/"+s}function cy(){const s="An unknown error occurred, please check the error payload for server response.";return new Yn(Kn.UNKNOWN,s)}function FI(s){return new Yn(Kn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function HI(s){return new Yn(Kn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yn(Kn.UNAUTHENTICATED,s)}function $I(){return new Yn(Kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WI(s){return new Yn(Kn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function GI(){return new Yn(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KI(){return new Yn(Kn.CANCELED,"User canceled the upload/download.")}function YI(s){return new Yn(Kn.INVALID_URL,"Invalid URL '"+s+"'.")}function QI(s){return new Yn(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function XI(){return new Yn(Kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+U2+"' property when initializing the app?")}function JI(){return new Yn(Kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZI(){return new Yn(Kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function eD(s){return new Yn(Kn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sg(s){return new Yn(Kn.INVALID_ARGUMENT,s)}function z2(){return new Yn(Kn.APP_DELETED,"The Firebase app was deleted.")}function tD(s){return new Yn(Kn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yc(s,e){return new Yn(Kn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Mc(s){throw new Yn(Kn.INTERNAL_ERROR,"Internal error: "+s)}class Ls{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=Ls.makeFromUrl(e,n)}catch{return new Ls(e,"")}if(a.path==="")return a;throw QI(e)}static makeFromUrl(e,n){let a=null;const o="([A-Za-z0-9.\\-_]+)";function u(ke){ke.path.charAt(ke.path.length-1)==="/"&&(ke.path_=ke.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(ke){ke.path_=decodeURIComponent(ke.path)}const w="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),k="(/([^?#]*).*)?$",P=new RegExp(`^https?://${T}/${w}/b/${o}/o${k}`,"i"),W={bucket:1,path:3},B=n===B2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",re=new RegExp(`^https?://${B}/${o}/${L}`,"i"),he=[{regex:p,indices:g,postModify:u},{regex:P,indices:W,postModify:y},{regex:re,indices:{bucket:1,path:2},postModify:y}];for(let ke=0;ke<he.length;ke++){const ze=he[ke],Ae=ze.regex.exec(e);if(Ae){const I=Ae[ze.indices.bucket];let S=Ae[ze.indices.path];S||(S=""),a=new Ls(I,S),ze.postModify(a);break}}if(a==null)throw YI(e);return a}}class nD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sD(s,e,n){let a=1,o=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function w(...L){y||(y=!0,e.apply(null,L))}function T(L){o=setTimeout(()=>{o=null,s(P,g())},L)}function k(){u&&clearTimeout(u)}function P(L,...re){if(y){k();return}if(L){k(),w.call(null,L,...re);return}if(g()||d){k(),w.call(null,L,...re);return}a<64&&(a*=2);let he;p===1?(p=2,he=0):he=(a+Math.random())*1e3,T(he)}let W=!1;function B(L){W||(W=!0,k(),!y&&(o!==null?(L||(p=2),clearTimeout(o),T(0)):L||(p=1)))}return T(0),u=setTimeout(()=>{d=!0,B(!0)},n),B}function rD(s){s(!1)}function aD(s){return s!==void 0}function iD(s){return typeof s=="object"&&!Array.isArray(s)}function uy(s){return typeof s=="string"||s instanceof String}function Iw(s){return hy()&&s instanceof Blob}function hy(){return typeof Blob<"u"}function rg(s,e,n,a){if(a<e)throw sg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>n)throw sg(`Invalid value for '${s}'. Expected ${n} or less.`)}function Zd(s,e,n){let a=e;return n==null&&(a=`https://${e}`),`${n}://${a}/v0${s}`}function F2(s){const e=encodeURIComponent;let n="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);n=n+o+"&"}return n=n.slice(0,-1),n}var ml;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ml||(ml={}));function lD(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}class oD{constructor(e,n,a,o,u,d,p,g,y,w,T,k=!0,P=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=T,this.retry=k,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,B)=>{this.resolve_=W,this.reject_=B,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new qh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===ml.NO_ERROR,g=u.getStatus();if(!p||lD(g,this.additionalRetryCodes_)&&this.retry){const w=u.getErrorCode()===ml.ABORT;a(!1,new qh(!1,null,w));return}const y=this.successCodes_.indexOf(g)!==-1;a(!0,new qh(y,u))})},n=(a,o)=>{const u=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());aD(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=cy();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?z2():KI();d(g)}else{const g=GI();d(g)}};this.canceled_?n(!1,new qh(!1,null,!0)):this.backoffId_=sD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qh{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function cD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function uD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function dD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function fD(s,e,n,a,o,u,d=!0,p=!1){const g=F2(s.urlParams),y=s.url+g,w=Object.assign({},s.headers);return hD(w,e),cD(w,n),uD(w,u),dD(w,a),new oD(y,s.method,w,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,p)}function mD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pD(...s){const e=mD();if(e!==void 0){const n=new e;for(let a=0;a<s.length;a++)n.append(s[a]);return n.getBlob()}else{if(hy())return new Blob(s);throw new Yn(Kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gD(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function yD(s){if(typeof atob>"u")throw eD("base-64");return atob(s)}const Xr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gp{constructor(e,n){this.data=e,this.contentType=n||null}}function vD(s,e){switch(s){case Xr.RAW:return new gp(H2(e));case Xr.BASE64:case Xr.BASE64URL:return new gp(q2(s,e));case Xr.DATA_URL:return new gp(wD(e),_D(e))}throw cy()}function H2(s){const e=[];for(let n=0;n<s.length;n++){let a=s.charCodeAt(n);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=a,d=s.charCodeAt(++n);a=65536|(u&1023)<<10|d&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function bD(s){let e;try{e=decodeURIComponent(s)}catch{throw Yc(Xr.DATA_URL,"Malformed data URL.")}return H2(e)}function q2(s,e){switch(s){case Xr.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw Yc(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Xr.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw Yc(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=yD(e)}catch(o){throw o.message.includes("polyfill")?o:Yc(s,"Invalid character found")}const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a}class $2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Yc(Xr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=n[1]||null;a!=null&&(this.base64=xD(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function wD(s){const e=new $2(s);return e.base64?q2(Xr.BASE64,e.rest):bD(e.rest)}function _D(s){return new $2(s).contentType}function xD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class _i{constructor(e,n){let a=0,o="";Iw(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(Iw(this.data_)){const a=this.data_,o=gD(a,e,n);return o===null?null:new _i(o)}else{const a=new Uint8Array(this.data_.buffer,e,n-e);return new _i(a,!0)}}static getBlob(...e){if(hy()){const n=e.map(a=>a instanceof _i?a.data_:a);return new _i(pD.apply(null,n))}else{const n=e.map(d=>uy(d)?vD(Xr.RAW,d).data:d.data_);let a=0;n.forEach(d=>{a+=d.byteLength});const o=new Uint8Array(a);let u=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)o[u++]=d[p]}),new _i(o,!0)}}uploadData(){return this.data_}}function dy(s){let e;try{e=JSON.parse(s)}catch{return null}return iD(e)?e:null}function TD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function ED(s,e){const n=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?n:s+"/"+n}function W2(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function kD(s,e){return e}class Ps{constructor(e,n,a,o){this.server=e,this.local=n||e,this.writable=!!a,this.xform=o||kD}}let $h=null;function SD(s){return!uy(s)||s.length<2?s:W2(s)}function G2(){if($h)return $h;const s=[];s.push(new Ps("bucket")),s.push(new Ps("generation")),s.push(new Ps("metageneration")),s.push(new Ps("name","fullPath",!0));function e(u,d){return SD(d)}const n=new Ps("name");n.xform=e,s.push(n);function a(u,d){return d!==void 0?Number(d):d}const o=new Ps("size");return o.xform=a,s.push(o),s.push(new Ps("timeCreated")),s.push(new Ps("updated")),s.push(new Ps("md5Hash",null,!0)),s.push(new Ps("cacheControl",null,!0)),s.push(new Ps("contentDisposition",null,!0)),s.push(new Ps("contentEncoding",null,!0)),s.push(new Ps("contentLanguage",null,!0)),s.push(new Ps("contentType",null,!0)),s.push(new Ps("metadata","customMetadata",!0)),$h=s,$h}function ND(s,e){function n(){const a=s.bucket,o=s.fullPath,u=new Ls(a,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function jD(s,e,n){const a={};a.type="file";const o=n.length;for(let u=0;u<o;u++){const d=n[u];a[d.local]=d.xform(a,e[d.server])}return ND(a,s),a}function K2(s,e,n){const a=dy(e);return a===null?null:jD(s,a,n)}function RD(s,e,n,a){const o=dy(e);if(o===null||!uy(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const w=s.bucket,T=s.fullPath,k="/b/"+d(w)+"/o/"+d(T),P=Zd(k,n,a),W=F2({alt:"media",token:y});return P+W})[0]}function CD(s,e){const n={},a=e.length;for(let o=0;o<a;o++){const u=e[o];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}const Dw="prefixes",Mw="items";function AD(s,e,n){const a={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Dw])for(const o of n[Dw]){const u=o.replace(/\/$/,""),d=s._makeStorageReference(new Ls(e,u));a.prefixes.push(d)}if(n[Mw])for(const o of n[Mw]){const u=s._makeStorageReference(new Ls(e,o.name));a.items.push(u)}return a}function ID(s,e,n){const a=dy(n);return a===null?null:AD(s,e,a)}class fy{constructor(e,n,a,o){this.url=e,this.method=n,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function my(s){if(!s)throw cy()}function DD(s,e){function n(a,o){const u=K2(s,o,e);return my(u!==null),u}return n}function MD(s,e){function n(a,o){const u=ID(s,e,o);return my(u!==null),u}return n}function PD(s,e){function n(a,o){const u=K2(s,o,e);return my(u!==null),RD(u,o,s.host,s._protocol)}return n}function py(s){function e(n,a){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=$I():o=qI():n.getStatus()===402?o=HI(s.bucket):n.getStatus()===403?o=WI(s.path):o=a,o.status=n.getStatus(),o.serverResponse=a.serverResponse,o}return e}function LD(s){const e=py(s);function n(a,o){let u=e(a,o);return a.getStatus()===404&&(u=FI(s.path)),u.serverResponse=o.serverResponse,u}return n}function OD(s,e,n,a,o){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),a&&(u.pageToken=a),o&&(u.maxResults=o);const d=e.bucketOnlyServerUrl(),p=Zd(d,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,w=new fy(p,g,MD(s,e.bucket),y);return w.urlParams=u,w.errorHandler=py(e),w}function VD(s,e,n){const a=e.fullServerUrl(),o=Zd(a,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new fy(o,u,PD(s,n),d);return p.errorHandler=LD(e),p}function BD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function UD(s,e,n){const a=Object.assign({},n);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=BD(null,e)),a}function zD(s,e,n,a,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let he="";for(let ke=0;ke<2;ke++)he=he+Math.random().toString().slice(2);return he}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=UD(e,a,o),w=CD(y,n),T="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,k=`\r
--`+g+"--",P=_i.getBlob(T,a,k);if(P===null)throw JI();const W={name:y.fullPath},B=Zd(u,s.host,s._protocol),L="POST",re=s.maxUploadRetryTime,X=new fy(B,L,DD(s,n),re);return X.urlParams=W,X.headers=d,X.body=P.uploadData(),X.errorHandler=py(e),X}class FD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ml.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ml.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ml.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,a,o,u){if(this.sent_)throw Mc("cannot .send() more than once");if(Mi(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class HD extends FD{initXhr(){this.xhr_.responseType="text"}}function gy(){return new HD}class xl{constructor(e,n){this._service=e,n instanceof Ls?this._location=n:this._location=Ls.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xl(e,n)}get root(){const e=new Ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W2(this._location.path)}get storage(){return this._service}get parent(){const e=TD(this._location.path);if(e===null)return null;const n=new Ls(this._location.bucket,e);return new xl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tD(e)}}function qD(s,e,n){s._throwIfRoot("uploadBytes");const a=zD(s.storage,s._location,G2(),new _i(e,!0),n);return s.storage.makeRequestWithTokens(a,gy).then(o=>({metadata:o,ref:s}))}function $D(s){const e={prefixes:[],items:[]};return Y2(s,e).then(()=>e)}async function Y2(s,e,n){const o=await WD(s,{pageToken:n});e.prefixes.push(...o.prefixes),e.items.push(...o.items),o.nextPageToken!=null&&await Y2(s,e,o.nextPageToken)}function WD(s,e){e!=null&&typeof e.maxResults=="number"&&rg("options.maxResults",1,1e3,e.maxResults);const n=e||{},a=OD(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(a,gy)}function GD(s){s._throwIfRoot("getDownloadURL");const e=VD(s.storage,s._location,G2());return s.storage.makeRequestWithTokens(e,gy).then(n=>{if(n===null)throw ZI();return n})}function KD(s,e){const n=ED(s._location.path,e),a=new Ls(s._location.bucket,n);return new xl(s.storage,a)}function YD(s){return/^[A-Za-z]+:\/\//.test(s)}function QD(s,e){return new xl(s,e)}function Q2(s,e){if(s instanceof yy){const n=s;if(n._bucket==null)throw XI();const a=new xl(n,n._bucket);return e!=null?Q2(a,e):a}else return e!==void 0?KD(s,e):s}function XD(s,e){if(e&&YD(e)){if(s instanceof yy)return QD(s,e);throw sg("To use ref(service, url), the first argument must be a Storage instance.")}else return Q2(s,e)}function Pw(s,e){const n=e?.[U2];return n==null?null:Ls.makeFromBucketSpec(n,s)}function JD(s,e,n,a={}){s.host=`${e}:${n}`;const o=Mi(e);o&&(fg(`https://${s.host}/b`),mg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=a;u&&(s._overrideAuthToken=typeof u=="string"?u:y_(u,s.app.options.projectId))}class yy{constructor(e,n,a,o,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=B2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UI,this._maxUploadRetryTime=zI,this._requests=new Set,o!=null?this._bucket=Ls.makeFromBucketSpec(o,this._host):this._bucket=Pw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ls.makeFromBucketSpec(this._url,e):this._bucket=Pw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xl(this,e)}_makeRequest(e,n,a,o,u=!0){if(this._deleted)return new nD(z2());{const d=fD(e,this._appId,a,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,o).getPromise()}}const Lw="@firebase/storage",Ow="0.14.0";const X2="storage";function ZD(s,e,n){return s=Vn(s),qD(s,e,n)}function Vw(s){return s=Vn(s),$D(s)}function Qc(s){return s=Vn(s),GD(s)}function bo(s,e){return s=Vn(s),XD(s,e)}function eM(s=vg(),e){s=Vn(s);const a=Id(s,X2).getImmediate({identifier:e}),o=m_("storage");return o&&tM(a,...o),a}function tM(s,e,n,a={}){JD(s,e,n,a)}function nM(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new yy(n,a,o,e,Tl)}function sM(){gl(new Ni(X2,nM,"PUBLIC").setMultipleInstances(!0)),Jr(Lw,Ow,""),Jr(Lw,Ow,"esm2020")}sM();const J2={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},vy=yg(J2),Pc=nx(vy),tt=TI(vy),wo=eM(vy),rM=yg(J2,"secondary"),p3=nx(rM),aM="EYdciKDOi3UYBLk1u8hHams5tmO2",Z2=x.createContext();function la(){return x.useContext(Z2)}function iM({children:s}){const[e,n]=x.useState(null),[a,o]=x.useState(!1),[u,d]=x.useState(!1),[p,g]=x.useState(null),[y,w]=x.useState(!0);x.useEffect(()=>lR(Pc,async re=>{if(n(re),re)if(re.uid===aM)o(!0),d(!1),g(null);else{o(!1);try{const X=qs(xs(tt,"clients"),Rs("uid","==",re.uid)),he=await $s(X);if(he.empty)d(!1),g(null);else{const ke=he.docs[0];d(!0),g({id:ke.id,...ke.data()})}}catch(X){console.error("Error fetching client data:",X),d(!1),g(null)}}else o(!1),d(!1),g(null);w(!1)}),[]);const B={currentUser:e,isAdmin:a,isClient:u,clientData:p,updateClientData:L=>{g(re=>re&&{...re,...L})},login:async(L,re,X=!0)=>(await rR(Pc,X?K_:kg),await sR(Pc,L,re)),logout:()=>oR(Pc),resetPassword:L=>nR(Pc,L),loading:y};return i.jsx(Z2.Provider,{value:B,children:s})}const eT=x.createContext();function Vi(){return x.useContext(eT)}function lM({children:s}){const[e,n]=x.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[a,o]=x.useState(()=>localStorage.getItem("accent")||"red");x.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),x.useEffect(()=>{localStorage.setItem("accent",a)},[a]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:a,setAccent:g=>o(g)};return i.jsx(eT.Provider,{value:p,children:s})}function oM(){const[s,e]=x.useState(""),[n,a]=x.useState(""),[o,u]=x.useState(!0),[d,p]=x.useState(""),[g,y]=x.useState(!1),[w,T]=x.useState(!1),[k,P]=x.useState(!1),{login:W,resetPassword:B,currentUser:L,isAdmin:re,isClient:X,clientData:he,loading:ke}=la(),ze=Ws();if(x.useEffect(()=>{if(!ke&&L){if(re)ze("/dashboard");else if(X){const S=he?.clientType;ze(S==="core_buddy"?"/client/core-buddy":S==="circuit_vip"||S==="circuit_dropin"?"/client/circuit":"/client")}}},[ke,L,re,X,he,ze]),ke)return null;const Ae=async S=>{S.preventDefault(),p(""),y(!0);try{await W(s,n,o)}catch(C){p(C.message||"Failed to log in"),y(!1)}},I=async S=>{if(S.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await B(s.trim()),P(!0)}catch(C){C.code==="auth/user-not-found"?p("No account found with this email"):p(C.message||"Failed to send reset email")}y(!1)};return i.jsx("div",{className:"login-container",children:i.jsxs("div",{className:"login-card",children:[i.jsxs("div",{className:"login-header",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),i.jsx("p",{children:w?"Reset Password":"Client Portal"})]}),d&&i.jsx("div",{className:"error-message",children:d}),k?i.jsxs("div",{className:"reset-sent",children:[i.jsx("div",{className:"reset-sent-icon",children:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),i.jsx("p",{children:"Reset email sent!"}),i.jsx("span",{children:"Check your inbox for a password reset link"}),i.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{T(!1),P(!1),p("")},children:"Back to Log In"})]}):w?i.jsxs("form",{onSubmit:I,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email"}),i.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),placeholder:"Enter your email",required:!0})]}),i.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),i.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!1),p("")},children:"Back to Log In"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:Ae,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email"}),i.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"password",children:"Password"}),i.jsx("input",{type:"password",id:"password",value:n,onChange:S=>a(S.target.value),required:!0})]}),i.jsx("div",{className:"remember-me",children:i.jsxs("label",{children:[i.jsx("input",{type:"checkbox",checked:o,onChange:S=>u(S.target.checked)}),i.jsx("span",{children:"Remember me"})]})}),i.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),i.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!0),p("")},children:"Forgot password?"})]}),i.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function jl({active:s}){const e=Ws(),{clientData:n}=la(),a=n?.clientType==="block"&&n?.coreBuddyAccess;return i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),i.jsx("span",{children:"Workouts"})]}),i.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),i.jsx("span",{children:"Nutrition"})]}),i.jsxs("button",{className:`block-nav-tab${s==="progress"?" active":""}`,onClick:()=>e("/client/personal-bests?mode=corebuddy"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"Progress"})]}),a&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),i.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),i.jsx("span",{children:"Block"})]})]})}function xu(s,e,n,a,o){const u=[];for(let d=0;d<s;d++){const p=(d*(360/s)-90)*(Math.PI/180);u.push({x1:e+a*Math.cos(p),y1:n+a*Math.sin(p),x2:e+o*Math.cos(p),y2:n+o*Math.sin(p),thick:d%5===0})}return u}const by=xu(60,100,100,85,96),dl=xu(60,100,100,78,94),cM=xu(60,100,100,82,94);xu(60,50,50,38,46);const uM=xu(60,40,40,30,37),yp=[10,25,50,100,200,500,1e3],pi=5;function co(s){return s.toISOString().split("T")[0]}function hM(s){let e=0;for(const n of yp){if(s<n)return{prev:e,next:n};e=n}return{prev:yp[yp.length-1],next:s+100}}const dM={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},fM={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},vp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}],Bw=[{id:"first_workout",icon:"",name:"First Rep",desc:"Complete your first workout",category:"workouts"},{id:"workouts_10",icon:"",name:"On Fire",desc:"Complete 10 workouts",category:"workouts"},{id:"workouts_25",icon:"",name:"Lightning",desc:"Complete 25 workouts",category:"workouts"},{id:"workouts_50",icon:"",name:"Iron Will",desc:"Complete 50 workouts",category:"workouts"},{id:"workouts_100",icon:"",name:"Century Club",desc:"Complete 100 workouts",category:"workouts"},{id:"streak_2",icon:"",name:"2 Week Warrior",desc:"2-week workout streak",category:"streak"},{id:"streak_4",icon:"",name:"Month Strong",desc:"4-week workout streak",category:"streak"},{id:"streak_8",icon:"",name:"Unbreakable",desc:"8-week workout streak",category:"streak"},{id:"programme_done",icon:"",name:"Finisher",desc:"Complete a programme",category:"programme"},{id:"habits_7",icon:"",name:"Habit Machine",desc:"7-day perfect habit streak",category:"habits"},{id:"nutrition_7",icon:"",name:"Fuel Master",desc:"Log nutrition 7 days in a row",category:"nutrition"},{id:"first_pb",icon:"",name:"Record Breaker",desc:"Set your first PB",category:"pbs"},{id:"pbs_5",icon:"",name:"Climbing",desc:"Set 5 personal bests",category:"pbs"},{id:"leaderboard_join",icon:"",name:"Competitor",desc:"Join the leaderboard",category:"social"}];function mM(){const{currentUser:s,isClient:e,clientData:n,logout:a,updateClientData:o,loading:u}=la(),{isDark:d,toggleTheme:p}=Vi(),g=Ws(),[y,w]=x.useState({hours:0,minutes:0,seconds:0}),[T,k]=x.useState(0),[P,W]=x.useState(0),[B,L]=x.useState(""),[re,X]=x.useState(0),[he,ke]=x.useState(0),[ze,Ae]=x.useState(!1),[I,S]=x.useState({protein:0,carbs:0,fats:0,calories:0}),[C,D]=x.useState(null),[M,H]=x.useState(0),[A,We]=x.useState(null),[jt,Y]=x.useState(!1),[Te,De]=x.useState(!1),[ct,rt]=x.useState(0),[V,G]=x.useState(0),[ge,Se]=x.useState([]),[Ve,Me]=x.useState([]),[nt,ht]=x.useState(null),[pt,Wt]=x.useState(!1),pn=x.useRef(null),[Rt,wt]=x.useState([]),[ne,gn]=x.useState(null),[zt,vt]=x.useState(0),[Ct,at]=x.useState(0),[He,Gt]=x.useState(0),[ns,At]=x.useState(0),[Bt,Dn]=x.useState(null),Ht=x.useCallback((we,Ke="info")=>{Dn({message:we,type:Ke}),setTimeout(()=>Dn(null),4e3)},[]);x.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),x.useEffect(()=>{n?.photoURL&&ht(n.photoURL)},[n]);const wn=async we=>{const Ke=we.target.files?.[0];if(!(!Ke||!n)){if(!Ke.type.startsWith("image/")){Ht("Please select an image file","error");return}if(Ke.size>5*1024*1024){Ht("Image must be under 5MB","error");return}Wt(!0);try{const st=await new Promise(Fe=>{const xt=new Image;xt.onload=()=>{const St=document.createElement("canvas"),Dt=400;let Ft=xt.width,bt=xt.height;Ft>bt?(bt=bt/Ft*Dt,Ft=Dt):(Ft=Ft/bt*Dt,bt=Dt),St.width=Ft,St.height=bt,St.getContext("2d").drawImage(xt,0,0,Ft,bt),St.toBlob(nn=>Fe(nn),"image/jpeg",.75)},xt.src=URL.createObjectURL(Ke)}),_t=bo(wo,`profilePhotos/${n.id}`);await ZD(_t,st);const qt=await Qc(_t);await LI(Tt(tt,"clients",n.id),{photoURL:qt}),ht(qt),o({photoURL:qt}),Ht("Profile photo updated!","success")}catch(st){console.error("Photo upload error:",st),Ht("Failed to upload photo","error")}Wt(!1),pn.current&&(pn.current.value="")}};x.useEffect(()=>{const we=()=>{const st=new Date,_t=new Date(st);_t.setHours(23,59,59,999);const qt=_t-st,Fe=Math.floor(qt/(1e3*60*60)),xt=Math.floor(qt%(1e3*60*60)/(1e3*60)),St=Math.floor(qt%(1e3*60)/1e3);w({hours:Fe,minutes:xt,seconds:St}),k(60-St)};we();const Ke=setInterval(we,1e3);return()=>clearInterval(Ke)},[]),x.useEffect(()=>{const we=setInterval(()=>{At(Ke=>(Ke+1)%vp.length)},8e3);return()=>clearInterval(we)},[]),x.useEffect(()=>{if(!s||!n)return;(async()=>{let Ke=null,st=0,_t=[],qt=!1;try{const Fe=co(new Date),xt=await Gn(Tt(tt,"clientProgrammes",n.id));if(xt.exists()){const Be=xt.data(),ut=dM[Be.templateId];if(Y(!0),ut){const Ye=Be.completedSessions||{},lt=Object.keys(Ye).length,dt=ut.duration*ut.daysPerWeek;W(dt>0?Math.round(lt/dt*100):0);const rn=Be.templateId.replace(/_/g," ").replace(/\b\w/g,Hn=>Hn.toUpperCase());L(rn);const Es=fM[Be.templateId];let Bn=!1;for(let Hn=1;Hn<=ut.duration&&!Bn;Hn++)for(let hn=0;hn<ut.daysPerWeek&&!Bn;hn++)Ye[`w${Hn}d${hn}`]||(We({week:Hn,dayIdx:hn,label:Es?.[hn]||`Day ${hn+1}`}),Bn=!0);Bn||(De(!0),qt=!0)}}const St=xs(tt,"workoutLogs"),Dt=qs(St,Rs("clientId","==",n.id));Ke=await $s(Dt);const Ft=Ke.docs.filter(Be=>Be.data().type!=="programme").length;X(Ft);const bt=new Date,nn=bt.getDay(),$t=nn===0?6:nn-1,sn=new Date(bt);sn.setDate(bt.getDate()-$t),sn.setHours(0,0,0,0);const on=co(sn),un=Ke.docs.filter(Be=>(Be.data().date||"")>=on).length;rt(un);const Nn=xs(tt,"habitLogs"),z=qs(Nn,Rs("clientId","==",n.id),Rs("date","==",Fe)),ue=await $s(z);let fe=0;if(!ue.empty){const Be=ue.docs[0].data().habits||{};fe=Object.values(Be).filter(Boolean).length}ke(Math.round(fe/pi*100)),H(fe);const pe=await Gn(Tt(tt,"nutritionTargets",n.id));pe.exists()&&D(pe.data());const ce=await Gn(Tt(tt,"nutritionLogs",`${n.id}_${Fe}`));if(ce.exists()){const ut=(ce.data().entries||[]).reduce((Ye,lt)=>({protein:Ye.protein+(lt.protein||0),carbs:Ye.carbs+(lt.carbs||0),fats:Ye.fats+(lt.fats||0),calories:Ye.calories+(lt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});S(ut)}}catch(Fe){console.error("Error loading dashboard stats:",Fe)}try{let Fe=[];const xt=await Gn(Tt(tt,"coreBuddyPBs",n.id));if(xt.exists()){const St=xt.data().exercises||{};G(Object.keys(St).length),st=Object.keys(St).length,Fe=Object.entries(St).sort(([,Dt],[,Ft])=>(Ft.weight||0)-(Dt.weight||0)).slice(0,3).map(([Dt,Ft])=>({name:Dt,weight:Ft.weight,reps:Ft.reps}))}if(Fe.length===0){const St={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},Dt=qs(xs(tt,"personalBests"),Rs("clientId","==",n.id)),Ft=await $s(Dt);if(!Ft.empty){const bt={};Ft.docs.forEach($t=>{const sn=$t.data().benchmarks||{};Object.entries(sn).forEach(([on,un])=>{if(!un.weight||!St[on])return;const Nn=(un.weight||0)*(un.reps||1);(!bt[on]||Nn>(bt[on].weight||0)*(bt[on].reps||1))&&(bt[on]={name:St[on],weight:un.weight,reps:un.reps})})});const nn=Object.values(bt);G(nn.length),st=nn.length,Fe=nn.sort(($t,sn)=>(sn.weight||0)-($t.weight||0)).slice(0,3)}}_t=Fe,Se(Fe)}catch(Fe){console.error("PB fetch error:",Fe)}try{const Fe=xs(tt,"clients"),xt=qs(Fe,Rs("leaderboardOptIn","==",!0)),Dt=(await $s(xt)).docs.map(Ft=>({id:Ft.id,name:Ft.data().name}));Me(Dt.slice(0,3))}catch(Fe){console.error("Leaderboard preview error:",Fe)}try{let Fe=0;if(Ke){const $t=Ke.docs.map(sn=>sn.data().date).filter(Boolean).sort().reverse();if($t.length>0){const sn=new Date;let on=new Date(sn);e:for(let un=0;un<52;un++){const Nn=new Date(on),z=Nn.getDay(),ue=z===0?6:z-1;Nn.setDate(Nn.getDate()-ue),Nn.setHours(0,0,0,0);const fe=new Date(Nn);fe.setDate(fe.getDate()+7);const pe=co(Nn),ce=co(fe);if($t.some(ut=>ut>=pe&&ut<ce))Fe++;else{if(un>0)break e;break}on.setDate(on.getDate()-7)}}}vt(Fe);let xt=0;for(let $t=0;$t<30;$t++){const sn=new Date;sn.setDate(sn.getDate()-$t);const on=co(sn);try{const un=await $s(qs(xs(tt,"habitLogs"),Rs("clientId","==",n.id),Rs("date","==",on)));if(un.empty)break;{const Nn=un.docs[0].data().habits||{};if(Object.values(Nn).filter(Boolean).length>=pi)xt++;else break}}catch{break}}at(xt);let St=0;for(let $t=0;$t<30;$t++){const sn=new Date;sn.setDate(sn.getDate()-$t);const on=co(sn);try{const un=await Gn(Tt(tt,"nutritionLogs",`${n.id}_${on}`));if(un.exists()&&(un.data().entries||[]).length>0)St++;else break}catch{break}}Gt(St);const Dt=Ke?Ke.docs.length:0,Ft=[],bt=$t=>Ft.push($t);Dt>=1&&bt("first_workout"),Dt>=10&&bt("workouts_10"),Dt>=25&&bt("workouts_25"),Dt>=50&&bt("workouts_50"),Dt>=100&&bt("workouts_100"),Fe>=2&&bt("streak_2"),Fe>=4&&bt("streak_4"),Fe>=8&&bt("streak_8"),qt&&bt("programme_done"),xt>=7&&bt("habits_7"),St>=7&&bt("nutrition_7"),(st>0||_t.length>0)&&bt("first_pb"),st>=5&&bt("pbs_5"),n.leaderboardOptIn&&bt("leaderboard_join"),wt(Ft);const nn={};Ft.forEach($t=>{nn[$t]={unlockedAt:new Date().toISOString()}}),Wn(Tt(tt,"achievements",n.id),{badges:nn,updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(Fe){console.error("Achievement computation error:",Fe)}Ae(!0)})()},[s,n]);const de=we=>{const Ke=we.currentTarget,st=Ke.querySelector(".ripple");st&&st.remove();const _t=Ke.getBoundingClientRect(),qt=Math.max(_t.width,_t.height),Fe=we.clientX-_t.left-qt/2,xt=we.clientY-_t.top-qt/2,St=document.createElement("span");St.className="ripple",St.style.cssText=`width:${qt}px;height:${qt}px;left:${Fe}px;top:${xt}px;`,Ke.appendChild(St),setTimeout(()=>St.remove(),600)},ve=n?.name?.split(" ")[0]||"there",{prev:Ne,next:Qe}=hM(re),qe=Qe>Ne?Math.round((re-Ne)/(Qe-Ne)*100):100,Pe=[{label:"Programme",value:`${P}%`,pct:P,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${re}`,pct:qe,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${he}%`,pct:he,color:"#38B6FF",size:"normal"}],Ge=we=>!C||!C[we]?0:Math.min(Math.round(I[we]/C[we]*100),100),Ue=(()=>{const we=new Date().getHours();return ze&&M>=pi&&I.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:we>=5&&we<12?{main:"Rise and grind,",sub:"let's get after it!"}:we>=12&&we<17?{main:"Oye",sub:"crack on and make it count!"}:we>=17&&we<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),Ie=ze?jt&&A&&!Te?{label:"NEXT SESSION",message:`Week ${A.week}, Day ${A.dayIdx+1}  ${A.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:P,ringLabel:`${P}%`}:M<pi?{label:"DAILY HABITS",message:`${M}/${pi} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:he,ringLabel:`${M}/${pi}`}:I.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:jt?Te?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null;return i.jsxs("div",{className:"cb-dashboard","data-theme":d?"dark":"light",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsxs("div",{className:"header-actions",children:[i.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:d?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),i.jsx("button",{onClick:a,"aria-label":"Log out",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),i.jsx("polyline",{points:"16 17 21 12 16 7"}),i.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),i.jsxs("main",{className:"cb-main",children:[i.jsxs("div",{className:"cb-ring-container",children:[i.jsxs("div",{className:"cb-ring",children:[i.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:by.map((we,Ke)=>{const st=Ke<T;return i.jsx("line",{x1:we.x1,y1:we.y1,x2:we.x2,y2:we.y2,className:`ring-tick ${st?"elapsed":"remaining"}`,strokeWidth:we.thick?"3":"2"},Ke)})}),i.jsxs("div",{className:"cb-ring-center",children:[i.jsxs("div",{className:"cb-ring-logo",onClick:()=>pn.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[i.jsx("img",{src:nt||"/Logo.webp",alt:nt?"Profile":"Mind Core Fitness"}),i.jsx("div",{className:`cb-photo-overlay${pt?" uploading":""}`,children:pt?i.jsx("div",{className:"cb-photo-spinner"}):i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[i.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),i.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),i.jsx("input",{ref:pn,type:"file",accept:"image/*",onChange:wn,style:{display:"none"}})]}),i.jsxs("div",{className:"cb-ring-countdown",children:[i.jsx("span",{className:"cb-timer-digit",children:String(y.hours).padStart(2,"0")}),i.jsx("span",{className:"cb-timer-colon",children:":"}),i.jsx("span",{className:"cb-timer-digit",children:String(y.minutes).padStart(2,"0")}),i.jsx("span",{className:"cb-timer-colon",children:":"}),i.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(y.seconds).padStart(2,"0")})]}),i.jsx("div",{className:"cb-ring-label",children:"remaining today"})]})]}),i.jsxs("p",{className:"cb-ring-tagline",children:[vp[ns].text," ",i.jsx("strong",{children:vp[ns].bold})]},ns)]}),i.jsx("div",{className:"cb-stats-row",children:Pe.map(we=>{const Ke=(we.size==="large",38),st=2*Math.PI*Ke,_t=st-we.pct/100*st;return i.jsxs("div",{className:`cb-stat-item${we.size==="large"?" cb-stat-large":""}`,children:[i.jsxs("div",{className:"cb-stat-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:Ke}),i.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:Ke,style:{stroke:we.color},strokeDasharray:st,strokeDashoffset:_t})]}),i.jsx("span",{className:"cb-stat-value",style:{color:we.color},children:we.value})]}),i.jsx("span",{className:"cb-stat-label",children:we.label})]},we.label)})}),i.jsxs("p",{className:"cb-coach-msg",children:[Ue.main," ",i.jsx("strong",{children:ve}),"  ",Ue.sub]}),Ie&&i.jsxs("button",{className:"cb-nudge-card",onClick:Ie.action||void 0,style:Ie.action?void 0:{cursor:"default"},children:[i.jsxs("div",{className:"cb-nudge-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),i.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-Ie.pct/100*2*Math.PI*38})]}),i.jsx("span",{className:"cb-nudge-ring-val",children:Ie.ringLabel})]}),i.jsxs("div",{className:"cb-nudge-info",children:[i.jsx("span",{className:"cb-nudge-label",children:Ie.label}),i.jsx("span",{className:"cb-nudge-title",children:Ie.message}),Ie.cta&&i.jsxs("span",{className:"cb-nudge-cta",children:[Ie.cta," "]})]})]}),i.jsxs("div",{className:"cb-features",children:[i.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:we=>{de(we),g("/client/core-buddy/nutrition")},children:[i.jsxs("div",{className:"cb-card-top-row",children:[i.jsx("div",{className:"cb-card-content",children:i.jsx("h3",{children:"Today's Nutrition"})}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsx("div",{className:"cb-card-preview-row",children:i.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:Ge("protein"),color:"#14b8a6"},{label:"C",pct:Ge("carbs"),color:"var(--color-primary)"},{label:"F",pct:Ge("fats"),color:"#eab308"},{label:"Cal",pct:Ge("calories"),color:"#38B6FF"}].map(we=>{const st=2*Math.PI*38,_t=st-we.pct/100*st;return i.jsxs("div",{className:"cb-mini-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),i.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:we.color},strokeDasharray:st,strokeDashoffset:_t})]}),i.jsx("span",{style:{color:we.color},children:we.label})]},we.label)})})}),i.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),i.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:we=>{de(we),g("/client/core-buddy/workouts")},children:[i.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),i.jsxs("div",{className:"cb-hero-stats",children:[i.jsxs("span",{children:[ct," this week"]}),i.jsx("span",{className:"cb-hero-dot",children:""}),i.jsxs("span",{children:[re," total"]})]}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("div",{className:"cb-grid-row",children:[i.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:we=>{de(we),g("/client/core-buddy/consistency")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"Habits"}),i.jsx("div",{className:"cb-habit-dots",children:Array.from({length:pi},(we,Ke)=>i.jsx("span",{className:`cb-habit-dot${Ke<M?" done":""}`},Ke))}),i.jsxs("span",{className:"cb-habit-dots-label",children:[M,"/",pi," today"]})]}),i.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:we=>{de(we),g("/client/personal-bests?mode=corebuddy")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"PBs"}),ge.length>0?i.jsx("div",{className:"cb-pb-preview",children:ge.slice(0,2).map(we=>i.jsxs("div",{className:"cb-pb-entry",children:[i.jsx("span",{className:"cb-pb-name",children:we.name}),i.jsxs("span",{className:"cb-pb-value",children:[we.weight,"kg"]})]},we.name))}):i.jsxs("div",{className:"cb-progress-preview",children:[i.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),i.jsx("span",{children:"Start lifting!"})]})]}),i.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),i.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:we=>{de(we),g("/client/leaderboard")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"Leaderboard"}),Ve.length>0?i.jsx("div",{className:"cb-lb-preview",children:Ve.map((we,Ke)=>{const st=["#FFD700","#A8B4C0","#CD7F32"][Ke],_t=we.name?we.name.split(" ").map(Fe=>Fe[0]).join("").slice(0,2).toUpperCase():"?",qt=we.id===n?.id;return i.jsxs("div",{className:`cb-lb-entry${qt?" cb-lb-me":""}`,children:[i.jsx("div",{className:"cb-lb-avatar",style:{borderColor:st},children:i.jsx("span",{children:_t})}),i.jsxs("span",{className:"cb-lb-rank",style:{color:st},children:["#",Ke+1]})]},we.id)})}):i.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("div",{className:"cb-achievements-section",children:[i.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),i.jsx("div",{className:"cb-badges-scroll",children:Bw.map(we=>{const Ke=Rt.includes(we.id);return i.jsxs("button",{className:`cb-badge${Ke?" unlocked":" locked"}`,onClick:()=>gn(ne?.id===we.id?null:we),children:[i.jsx("span",{className:"cb-badge-icon",children:we.icon}),i.jsx("span",{className:"cb-badge-name",children:we.name})]},we.id)})}),ne&&i.jsxs("div",{className:"cb-badge-detail",children:[i.jsx("span",{className:"cb-badge-detail-icon",children:ne.icon}),i.jsxs("div",{className:"cb-badge-detail-info",children:[i.jsx("strong",{children:ne.name}),i.jsx("span",{children:ne.desc}),Rt.includes(ne.id)?i.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):i.jsx("span",{className:"cb-badge-status locked",children:"Locked"})]})]}),i.jsxs("p",{className:"cb-badges-count",children:[Rt.length,"/",Bw.length," unlocked"]})]})]})]}),i.jsx(jl,{active:"home"}),Bt&&i.jsxs("div",{className:`toast-notification ${Bt.type}`,children:[Bt.type==="info"&&i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),i.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Bt.message]})]})}const bp=new Map;function gi(){return new Date().toISOString().split("T")[0]}const pM=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],gM={breakfast:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),i.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),i.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),i.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),i.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function yM(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function vM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:o,toggleTheme:u,accent:d}=Vi(),p=Ws(),[g,y]=x.useState("loading"),[w,T]=x.useState(null),[k,P]=x.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[W,B]=x.useState(null),[L,re]=x.useState(gi()),[X,he]=x.useState({entries:[],water:0}),[ke,ze]=x.useState({protein:0,carbs:0,fats:0,calories:0}),[Ae,I]=x.useState(!1),[S,C]=x.useState(!1),[D,M]=x.useState(()=>{const E=new Date;return{year:E.getFullYear(),month:E.getMonth()}}),[H,A]=x.useState(yM),[We,jt]=x.useState(null),[Y,Te]=x.useState(null),[De,ct]=x.useState(!1),[rt,V]=x.useState(null),[G,ge]=x.useState(""),[Se,Ve]=x.useState(!1),[Me,nt]=x.useState(""),[ht,pt]=x.useState([]),[Wt,pn]=x.useState(!1),[Rt,wt]=x.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[ne,gn]=x.useState(null),[zt,vt]=x.useState("100"),[Ct,at]=x.useState(0),[He,Gt]=x.useState("weight"),[ns,At]=x.useState(0),[Bt,Dn]=x.useState(null);x.useRef(null);const Ht=x.useRef(!1),wn=x.useRef(null),de=x.useRef(null),ve=x.useRef(null),Ne=x.useCallback((E,R="info")=>{Dn({message:E,type:R}),setTimeout(()=>Dn(null),3e3)},[]);x.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),x.useEffect(()=>{if(!n?.id)return;(async()=>{try{const R=await Gn(Tt(tt,"nutritionTargets",n.id));R.exists()?(T(R.data()),y("dashboard")):y("setup")}catch(R){console.error("Error loading nutrition data:",R),y("setup")}})()},[n?.id]),x.useEffect(()=>{if(!n?.id)return;(async()=>{try{const R=await Gn(Tt(tt,"nutritionLogs",`${n.id}_${L}`));if(R.exists()){const $=R.data();he({entries:$.entries||[],water:$.water||0})}else he({entries:[],water:0})}catch(R){console.error("Error loading log:",R),he({entries:[],water:0})}})()},[n?.id,L]),x.useEffect(()=>{const E=X.entries.reduce((R,$)=>({protein:R.protein+($.protein||0),carbs:R.carbs+($.carbs||0),fats:R.fats+($.fats||0),calories:R.calories+($.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});ze(E)},[X.entries]);const Qe=async E=>{try{await Wn(Tt(tt,"nutritionLogs",`${n.id}_${L}`),{clientId:n.id,date:L,entries:E.entries,water:E.water,updatedAt:ot.now()})}catch(R){console.error("Error saving nutrition log:",R)}},qe=L===gi(),Pe=(E,R)=>new Date(E,R+1,0).getDate(),Ge=(E,R)=>new Date(E,R,1).getDay(),Ue=["January","February","March","April","May","June","July","August","September","October","November","December"],Ie=["Su","Mo","Tu","We","Th","Fr","Sa"],we=()=>{let E=parseFloat(k.weight);k.weightUnit==="lbs"&&(E*=.453592);let R;k.heightUnit==="cm"?R=parseFloat(k.height):R=(parseFloat(k.heightFeet)||0)*30.48+(parseFloat(k.heightInches)||0)*2.54;const $=parseInt(k.age);let J=k.gender==="male"?10*E+6.25*R-5*$+5:10*E+6.25*R-5*$-161;const Ce=J*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[k.dailyActivity],Re={low:100,moderate:200,high:300,daily:400},Lt=Math.round(Ce+Re[k.trainingFrequency]);let gt=Lt,q,oe;switch(k.goal){case"lose":gt=Lt*(1-{light:.15,moderate:.2,harsh:.25}[k.deficitLevel]),q=2.2,oe=.3;break;case"build":gt=Lt*1.1,q=2,oe=.22;break;default:q=1.8,oe=.25}gt=Math.max(gt,k.gender==="male"?1400:1100);const se=Math.round(E*q),Ee=Math.round(gt*oe/9),je=Math.max(0,Math.round((gt-se*4-Ee*9)/4));B({calories:Math.round(gt),protein:se,carbs:je,fats:Ee,bmr:Math.round(J),neat:Math.round(Ce),exerciseAdd:Re[k.trainingFrequency],tdee:Math.round(Lt)})},Ke=async()=>{if(W)try{const E={clientId:n.id,calories:W.calories,protein:W.protein,carbs:W.carbs,fats:W.fats,waterGoal:8,goal:k.goal,updatedAt:ot.now()};await Wn(Tt(tt,"nutritionTargets",n.id),E),T(E),y("dashboard"),Ne("Macro targets saved!","success")}catch(E){console.error("Error saving targets:",E),Ne("Failed to save targets. Please try again.","error")}},st=()=>{const E=k.weight&&parseFloat(k.weight)>0,R=k.age&&parseInt(k.age)>0,$=k.heightUnit==="cm"?k.height&&parseFloat(k.height)>0:k.heightFeet&&parseFloat(k.heightFeet)>0||k.heightInches&&parseFloat(k.heightInches)>0;return E&&R&&$},_t="nut_favourite_foods",qt=()=>{try{return JSON.parse(localStorage.getItem(_t)||"[]")}catch{return[]}},Fe=E=>qt().some(R=>R.name.toLowerCase()===(E||"").toLowerCase()),xt=E=>{const R=qt(),$=R.findIndex(J=>J.name.toLowerCase()===E.name.toLowerCase());$>=0?R.splice($,1):R.unshift({name:E.name,protein:E.protein,carbs:E.carbs,fats:E.fats,calories:E.calories,serving:E.serving,per100g:E.per100g||null,servingUnit:E.servingUnit||"g",portion:E.portion||null}),localStorage.setItem(_t,JSON.stringify(R)),At(J=>J+1)},St=E=>{const R=[...X.entries,{...E,meal:H,id:Date.now(),addedAt:new Date().toISOString()}],$={...X,entries:R};he($),Qe($),Te(null),gn(null),vt("100"),at(0),Gt("weight"),wt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),Ne("Food added!","success")},Dt=E=>{const R=X.entries.filter(J=>J.id!==E),$={...X,entries:R};he($),Qe($)},Ft=x.useRef(null),bt=async()=>{ct(!0);const E=document.querySelector("#barcode-reader");if(!E){ct(!1),Ne("Scanner container not found.","error");return}if(!Ft.current)try{const $=await yr(()=>import("./quagga.min-BbicSfvA.js").then(J=>J.q),[]);Ft.current=$.default}catch($){console.error("Failed to load barcode scanner:",$),ct(!1),Ne("Could not load scanner.","error");return}const R=Ft.current;R.init({inputStream:{type:"LiveStream",target:E,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},$=>{if($){console.error("Quagga init error:",$),ct(!1),Ne("Could not access camera. Check permissions.","error");return}R.start(),Ht.current=!0}),R.onDetected($=>{const J=$.codeResult.decodedCodes?.filter(Ce=>Ce.error!==void 0)?.map(Ce=>Ce.error)||[];if((J.length>0?J.reduce((Ce,Re)=>Ce+Re,0)/J.length:1)<.15){const Ce=$.codeResult.code;R.offDetected(),V(Ce)}})},nn=()=>{const E=Ft.current;Ht.current&&E&&(E.stop(),E.offDetected(),Ht.current=!1),ct(!1)},$t=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,sn=E=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((E||"").replace(/\s/g,"")),on=E=>{if(!E)return{value:100,unit:"g"};const R=E.toLowerCase().replace(/\s/g,""),$=R.match(/([\d.]+)/),J=$?parseFloat($[1]):100;return sn(E)?/cl/.test(R)?{value:J*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(R)&&!/ml/.test(R)?{value:J*1e3,unit:"ml"}:{value:J,unit:"ml"}:{value:J,unit:"g"}},un=E=>{if(sn(E.serving_size)||sn(E.quantity))return"ml";const R=E.product_name||E.product_name_en||"";return $t.test(R)?"ml":"g"},Nn=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],z=(E,R)=>{const $=E||"",J=$.match(/\((\d+\.?\d*)\s*g\)/i),Le=$.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(J&&Le){const Lt=parseFloat(J[1]);let gt=Le[1].replace(/^\d+\s*/,"").trim();if(gt&&Lt>0)return{label:gt,weight:Lt}}const Ce=$.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Ce){const Lt=parseFloat(Ce[1]);let gt=Ce[2].replace(/^\d+\s*/,"").trim();if(gt&&Lt>0)return{label:gt,weight:Lt}}const Re=R||"";for(const{pattern:Lt,label:gt,weight:q}of Nn)if(Lt.test(Re))return{label:gt,weight:q};return null},ue=E=>{const R=E.nutriments||{},$=un(E),J=on(E.serving_size),Le=$==="ml"?J.unit==="ml"?J.value:100:J.value,Ce=E.product_name||E.product_name_en||"Unknown Product",Re=z(E.serving_size,Ce);return{name:Ce,brand:E.brands||"",image:E.image_small_url||E.image_url||null,servingSize:E.serving_size||"100g",servingValue:Le,servingUnit:$,portion:Re,protein:Math.round(R.proteins_100g||R.proteins||0),carbs:Math.round(R.carbohydrates_100g||R.carbohydrates||0),fats:Math.round(R.fat_100g||R.fat||0),calories:Math.round(R["energy-kcal_100g"]||R["energy-kcal"]||(R.energy_100g?R.energy_100g/4.184:0)),per100g:!0}},fe=async E=>{Ve(!0);try{const R=`https://world.openfoodfacts.org/api/v2/product/${E}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,$=await fetch(R);if(!$.ok)throw new Error(`HTTP ${$.status}`);const J=await $.json();if(J.status==="success"||J.status===1||J.product){const Le=ue(J.product);Le.calories===0&&Le.protein===0&&Le.carbs===0?Ne("Product found but no nutrition data available.","error"):(gn(Le),Le.portion?(at(1),vt(String(Le.portion.weight)),Gt("portion")):(at(0),vt(String(Le.servingValue||100)),Gt("weight")),ge(""))}else Ne("Product not found. Try search or manual entry.","error")}catch(R){console.error("Barcode lookup error:",R),Ne("Failed to look up product. Check your connection.","error")}Ve(!1)},pe=(E,R,$)=>{const J=E.toLowerCase().trim(),Le=R.toLowerCase().trim(),Ce=$.toLowerCase().trim();let Re=0;return(J===Ce||J===Ce+"s"||J+"s"===Ce)&&(Re+=100),(J.endsWith(" "+Ce)||J.endsWith(" "+Ce+"s"))&&(Re+=40),(J.startsWith(Ce+" ")||J.startsWith(Ce+"s "))&&(Re+=15),Ce.split(/\s+/).some(gt=>Le===gt||Le.startsWith(gt))&&(Re+=30),Re+=Math.max(0,30-J.length),Re},ce=async()=>{if(!Me.trim())return;wn.current&&wn.current.abort();const E=new AbortController;wn.current=E;const R=Me.trim().toLowerCase(),$=R.split(/\s+/).filter(Boolean);if(bp.has(R)){pt(bp.get(R));return}pn(!0);try{const Le=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Me.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Ce=await fetch(Le,{signal:E.signal});if(!Ce.ok)throw new Error(`HTTP ${Ce.status}`);const Lt=((await Ce.json()).products||[]).map(gt=>ue(gt)).filter(gt=>gt.name!=="Unknown Product"&&(gt.calories>0||gt.protein>0)).filter(gt=>{const q=(gt.name+" "+gt.brand).toLowerCase();return $.every(oe=>q.includes(oe))}).sort((gt,q)=>pe(q.name,q.brand,R)-pe(gt.name,gt.brand,R)).slice(0,10);bp.set(R,Lt),pt(Lt),Lt.length===0&&Ne("No results found. Try a different search.","info")}catch(J){if(J.name==="AbortError")return;console.error("Search error:",J),Ne("Search failed. Check your connection.","error")}pn(!1)};x.useEffect(()=>{if(de.current&&clearTimeout(de.current),!(!Me.trim()||Y!=="search"||ne))return de.current=setTimeout(()=>{ce()},700),()=>clearTimeout(de.current)},[Me]);const Be=()=>{const E={...X,water:X.water+1};he(E),Qe(E)},ut=()=>{if(X.water<=0)return;const E={...X,water:X.water-1};he(E),Qe(E)},Ye={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},lt=80,dt=2*Math.PI*lt,rn=(E,R,$,J,Le)=>{const Ce=J>0?Math.min(100,Math.round($/J*100)):0,Re=dt-Ce/100*dt,Lt=Ye[Le]||"#14b8a6";return i.jsxs("div",{className:"nut-ring-wrap",children:[i.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[i.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:lt}),i.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:lt,style:{stroke:Lt},strokeDasharray:dt,strokeDashoffset:Re})]}),i.jsxs("div",{className:"nut-ring-center",children:[i.jsx("span",{className:"nut-ring-value",style:{color:Lt},children:Math.round($)}),i.jsxs("span",{className:"nut-ring-target",children:["/ ",J,E==="Calories"?"":"g"]}),i.jsx("span",{className:"nut-ring-label",style:{color:Lt},children:R})]}),i.jsxs("span",{className:"nut-ring-pct",style:{color:Lt},children:[Ce,"%"]})]})};if(x.useEffect(()=>{if(!rt)return;const E=setTimeout(()=>{const R=rt;nn(),V(null),fe(R)},1500);return()=>clearTimeout(E)},[rt]),x.useEffect(()=>()=>{const E=Ft.current;if(Ht.current&&E){try{E.stop(),E.offDetected()}catch{}Ht.current=!1}},[]),a||g==="loading")return i.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsx("div",{className:"nut-loading-inline",children:i.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return i.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"nut-main",children:[i.jsxs("div",{className:"nut-setup-intro",children:[i.jsx("h2",{children:"Set Your Daily Targets"}),i.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),i.jsxs("div",{className:"nut-calc-form",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Gender"}),i.jsxs("div",{className:"nut-toggle-group",children:[i.jsx("button",{className:k.gender==="male"?"active":"",onClick:()=>{P(E=>({...E,gender:"male"})),B(null)},children:"Male"}),i.jsx("button",{className:k.gender==="female"?"active":"",onClick:()=>{P(E=>({...E,gender:"female"})),B(null)},children:"Female"})]})]}),i.jsxs("div",{className:"nut-form-row",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Age"}),i.jsx("input",{type:"number",value:k.age,onChange:E=>{P(R=>({...R,age:E.target.value})),B(null)},placeholder:"Years",min:"15",max:"100"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Weight"}),i.jsxs("div",{className:"nut-input-unit",children:[i.jsx("input",{type:"number",value:k.weight,onChange:E=>{P(R=>({...R,weight:E.target.value})),B(null)},placeholder:k.weightUnit,min:"30",max:"300"}),i.jsxs("div",{className:"nut-unit-toggle",children:[i.jsx("button",{className:k.weightUnit==="kg"?"active":"",onClick:()=>{P(E=>({...E,weightUnit:"kg"})),B(null)},children:"kg"}),i.jsx("button",{className:k.weightUnit==="lbs"?"active":"",onClick:()=>{P(E=>({...E,weightUnit:"lbs"})),B(null)},children:"lbs"})]})]})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Height"}),i.jsxs("div",{className:"nut-input-unit",children:[k.heightUnit==="cm"?i.jsx("input",{type:"number",value:k.height,onChange:E=>{P(R=>({...R,height:E.target.value})),B(null)},placeholder:"cm",min:"100",max:"250"}):i.jsxs("div",{className:"nut-height-imperial",children:[i.jsx("input",{type:"number",value:k.heightFeet,onChange:E=>{P(R=>({...R,heightFeet:E.target.value})),B(null)},placeholder:"ft",min:"4",max:"7"}),i.jsx("input",{type:"number",value:k.heightInches,onChange:E=>{P(R=>({...R,heightInches:E.target.value})),B(null)},placeholder:"in",min:"0",max:"11"})]}),i.jsxs("div",{className:"nut-unit-toggle",children:[i.jsx("button",{className:k.heightUnit==="cm"?"active":"",onClick:()=>{P(E=>({...E,heightUnit:"cm"})),B(null)},children:"cm"}),i.jsx("button",{className:k.heightUnit==="ft"?"active":"",onClick:()=>{P(E=>({...E,heightUnit:"ft"})),B(null)},children:"ft/in"})]})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Daily Activity (outside of training)"}),i.jsxs("select",{value:k.dailyActivity,onChange:E=>{P(R=>({...R,dailyActivity:E.target.value})),B(null)},children:[i.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),i.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),i.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),i.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Training Sessions per Week"}),i.jsxs("select",{value:k.trainingFrequency,onChange:E=>{P(R=>({...R,trainingFrequency:E.target.value})),B(null)},children:[i.jsx("option",{value:"low",children:"1-2 sessions"}),i.jsx("option",{value:"moderate",children:"3-4 sessions"}),i.jsx("option",{value:"high",children:"5-6 sessions"}),i.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Fitness Goal"}),i.jsxs("div",{className:"nut-goal-options",children:[i.jsxs("button",{className:k.goal==="lose"?"active":"",onClick:()=>{P(E=>({...E,goal:"lose"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"-"}),i.jsx("span",{children:"Lose Weight"})]}),i.jsxs("button",{className:k.goal==="maintain"?"active":"",onClick:()=>{P(E=>({...E,goal:"maintain"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"="}),i.jsx("span",{children:"Maintain"})]}),i.jsxs("button",{className:k.goal==="build"?"active":"",onClick:()=>{P(E=>({...E,goal:"build"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"+"}),i.jsx("span",{children:"Build Muscle"})]})]})]}),k.goal==="lose"&&i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Deficit Level"}),i.jsxs("div",{className:"nut-deficit-options",children:[i.jsxs("button",{className:k.deficitLevel==="light"?"active":"",onClick:()=>{P(E=>({...E,deficitLevel:"light"})),B(null)},children:[i.jsx("strong",{children:"Mild"}),i.jsx("span",{children:"15% below TDEE"})]}),i.jsxs("button",{className:k.deficitLevel==="moderate"?"active":"",onClick:()=>{P(E=>({...E,deficitLevel:"moderate"})),B(null)},children:[i.jsx("strong",{children:"Moderate"}),i.jsx("span",{children:"20% below TDEE"})]}),i.jsxs("button",{className:k.deficitLevel==="harsh"?"active":"",onClick:()=>{P(E=>({...E,deficitLevel:"harsh"})),B(null)},children:[i.jsx("strong",{children:"Aggressive"}),i.jsx("span",{children:"25% below TDEE"})]})]})]}),i.jsx("button",{className:"nut-calc-btn",onClick:we,disabled:!st(),children:"Calculate Macros"})]}),W&&i.jsxs("div",{className:"nut-calc-results",children:[i.jsx("h3",{children:"Your Daily Targets"}),i.jsxs("div",{className:"nut-calc-rings",children:[rn("Protein","Protein",W.protein,W.protein,"ring-protein"),rn("Carbs","Carbs",W.carbs,W.carbs,"ring-carbs"),rn("Fats","Fats",W.fats,W.fats,"ring-fats"),rn("Calories","Calories",W.calories,W.calories,"ring-cals")]}),i.jsxs("div",{className:"nut-calc-info",children:[i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"BMR (body at rest)"}),i.jsxs("span",{children:[W.bmr," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"+ Daily activity (NEAT)"}),i.jsxs("span",{children:[W.neat," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"+ Training sessions"}),i.jsxs("span",{children:["+",W.exerciseAdd," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[i.jsx("span",{children:"TDEE (total burn)"}),i.jsxs("span",{children:[W.tdee," cal"]})]})]}),i.jsx("button",{className:"nut-save-targets-btn",onClick:Ke,children:"Set as My Daily Targets"})]})]}),Bt&&i.jsx("div",{className:`toast-notification ${Bt.type}`,children:Bt.message})]});const Es=E=>{const R=new Date(E+"T12:00:00"),$=R.getDay(),J=new Date(R);J.setDate(R.getDate()-($+6)%7);const Le=[];for(let Ce=0;Ce<7;Ce++){const Re=new Date(J);Re.setDate(J.getDate()+Ce),Le.push(Re.toISOString().split("T")[0])}return Le},Bn=["M","T","W","T","F","S","S"],Hn=(E,R="search")=>{A(E),R==="scan"?(Te("scan"),gn(null)):R==="manual"?(Te("manual"),wt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):R==="favourites"?Te("favourites"):(Te("search"),pt([]),nt(""))},hn=Es(L),U=new Date(L+"T12:00:00"),ie=`${Ue[U.getMonth()]} ${U.getFullYear()}`;return i.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"nut-dark-zone",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsxs("div",{className:"header-actions",children:[i.jsx("button",{onClick:()=>{y("setup"),B(null)},"aria-label":"Recalculate macros",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),i.jsxs("div",{className:"nut-dark-content",children:[i.jsxs("div",{className:"nut-week-strip",children:[i.jsxs("div",{className:"nut-week-header",children:[i.jsx("button",{className:"nut-week-arrow",onClick:()=>{const E=new Date(L+"T12:00:00");E.setDate(E.getDate()-7);const R=E.toISOString().split("T")[0];re(R)},"aria-label":"Previous week",children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:i.jsx("polyline",{points:"15 18 9 12 15 6"})})}),i.jsx("button",{className:"nut-week-month-label",onClick:()=>{I(!Ae),M({year:U.getFullYear(),month:U.getMonth()})},children:ie}),i.jsx("button",{className:"nut-week-arrow",onClick:()=>{const E=new Date(L+"T12:00:00");E.setDate(E.getDate()+7);const R=E.toISOString().split("T")[0];R<=gi()&&re(R)},"aria-label":"Next week",disabled:hn[6]>=gi(),children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:i.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),i.jsx("div",{className:"nut-week-days",children:hn.map((E,R)=>{const $=new Date(E+"T12:00:00").getDate(),J=E===L,Le=E>gi(),Ce=E===gi();return i.jsxs("button",{className:`nut-week-day${J?" selected":""}${Ce?" today":""}${Le?" future":""}`,disabled:Le,onClick:()=>re(E),children:[i.jsx("span",{className:"nut-week-day-letter",children:Bn[R]}),i.jsx("span",{className:"nut-week-day-num",children:$})]},E)})})]}),Ae&&i.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[i.jsxs("div",{className:"nut-cal-header",children:[i.jsx("button",{onClick:()=>M(E=>{let R=E.month-1,$=E.year;return R<0&&(R=11,$--),{year:$,month:R}}),children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"15 18 9 12 15 6"})})}),i.jsxs("span",{children:[Ue[D.month]," ",D.year]}),i.jsx("button",{onClick:()=>M(E=>{let R=E.month+1,$=E.year;return R>11&&(R=0,$++),{year:$,month:R}}),disabled:D.year===new Date().getFullYear()&&D.month>=new Date().getMonth(),children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),i.jsx("div",{className:"nut-cal-days-header",children:Ie.map(E=>i.jsx("span",{children:E},E))}),i.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Ge(D.year,D.month))].map((E,R)=>i.jsx("span",{},`e${R}`)),[...Array(Pe(D.year,D.month))].map((E,R)=>{const $=R+1,J=`${D.year}-${String(D.month+1).padStart(2,"0")}-${String($).padStart(2,"0")}`,Le=J>gi(),Ce=J===L,Re=J===gi();return i.jsx("button",{className:`nut-cal-day${Ce?" selected":""}${Re?" today":""}${Le?" future":""}`,disabled:Le,onClick:()=>{re(J),I(!1)},children:$},$)})]})]}),i.jsxs("div",{className:"nut-rings-row",children:[rn("Protein","Protein",ke.protein,w.protein,"ring-protein"),rn("Carbs","Carbs",ke.carbs,w.carbs,"ring-carbs"),rn("Fats","Fats",ke.fats,w.fats,"ring-fats"),rn("Calories","kCal",ke.calories,w.calories,"ring-cals")]})]})]}),i.jsx("div",{className:"nut-light-zone",children:i.jsxs("div",{className:"nut-light-content",children:[qe&&i.jsxs("button",{className:"nut-water-quick",onClick:()=>C(!0),children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),i.jsxs("span",{className:"nut-water-quick-count",children:[X.water," / ",w?.waterGoal||8]}),i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),i.jsx("div",{className:"nut-log-section",children:i.jsx("div",{className:"nut-meals-list",children:pM.map(E=>{const R=X.entries.filter(J=>(J.meal||"snacks")===E.key),$=R.reduce((J,Le)=>({protein:J.protein+(Le.protein||0),carbs:J.carbs+(Le.carbs||0),fats:J.fats+(Le.fats||0),calories:J.calories+(Le.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return i.jsxs("div",{className:"nut-meal-card",children:[i.jsxs("div",{className:"nut-meal-card-header",children:[i.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${E.key}`,children:gM[E.key]}),i.jsx("span",{className:"nut-meal-card-title",children:E.label}),R.length>0&&i.jsxs("span",{className:"nut-meal-card-cal",children:[$.calories," cal"]}),qe&&i.jsxs("div",{className:"nut-add-wrapper",children:[i.jsx("button",{className:"nut-meal-add-btn",onClick:()=>jt(We===E.key?null:E.key),"aria-label":`Add to ${E.label}`,children:i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),We===E.key&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>jt(null)}),i.jsxs("div",{className:"nut-add-picker",children:[i.jsxs("button",{onClick:()=>{jt(null),Hn(E.key,"scan")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),i.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),i.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),i.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),i.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),i.jsx("span",{children:"Scan"})]}),i.jsxs("button",{onClick:()=>{jt(null),Hn(E.key,"search")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),i.jsx("span",{children:"Search"})]}),i.jsxs("button",{onClick:()=>{jt(null),Hn(E.key,"manual")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),i.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),i.jsx("span",{children:"Manual"})]}),i.jsxs("button",{onClick:()=>{jt(null),Hn(E.key,"favourites")},children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),i.jsx("span",{children:"Favs"})]})]})]})]})]}),R.length>0&&i.jsxs("div",{className:"nut-meal-bars",children:[i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,w.protein>0?$.protein/w.protein*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[$.protein,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,w.carbs>0?$.carbs/w.carbs*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[$.carbs,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,w.fats>0?$.fats/w.fats*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[$.fats,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,w.calories>0?$.calories/w.calories*100:0)}%`}})}),i.jsx("span",{className:"nut-meal-bar-val",children:$.calories})]})]}),R.length>0&&i.jsx("div",{className:"nut-log-list",children:R.map(J=>i.jsxs("div",{className:"nut-log-item",children:[i.jsxs("div",{className:"nut-log-item-info",children:[i.jsx("span",{className:"nut-log-item-name",children:J.name}),J.serving&&i.jsx("span",{className:"nut-log-item-serving",children:J.serving})]}),i.jsxs("div",{className:"nut-log-item-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[J.protein,"p"]}),i.jsxs("span",{className:"nut-macro-c",children:[J.carbs,"c"]}),i.jsxs("span",{className:"nut-macro-f",children:[J.fats,"f"]}),i.jsx("span",{className:"nut-macro-cal",children:J.calories})]}),qe&&i.jsx("button",{className:"nut-log-delete",onClick:()=>Dt(J.id),"aria-label":"Remove",children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},J.id))}),R.length===0&&i.jsx("div",{className:"nut-meal-empty",children:i.jsx("p",{children:qe?"Tap + to add food":"No entries"})})]},E.key)})})})]})}),S&&i.jsx("div",{className:"nut-modal-overlay",onClick:()=>C(!1),children:i.jsxs("div",{className:"nut-water-popup",onClick:E=>E.stopPropagation(),children:[i.jsxs("div",{className:"nut-water-popup-header",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),i.jsx("span",{children:"Water Intake"}),i.jsx("button",{className:"nut-modal-close",onClick:()=>C(!1),children:i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),i.jsxs("div",{className:"nut-water-popup-body",children:[i.jsx("div",{className:"nut-water-glasses",children:[...Array(w?.waterGoal||8)].map((E,R)=>i.jsx("div",{className:`nut-water-glass ${R<X.water?"filled":""}`,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:R<X.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},R))}),i.jsxs("div",{className:"nut-water-popup-count",children:[X.water," / ",w?.waterGoal||8," glasses"]}),i.jsxs("div",{className:"nut-water-btns",children:[i.jsx("button",{onClick:ut,disabled:X.water<=0,children:"-"}),i.jsx("button",{onClick:Be,children:"+"})]})]})]})}),Y&&i.jsx("div",{className:"nut-modal-overlay",onClick:()=>{nn(),V(null),Te(null),gn(null)},children:i.jsxs("div",{className:"nut-modal",onClick:E=>E.stopPropagation(),children:[i.jsxs("div",{className:"nut-modal-header",children:[i.jsx("h3",{children:Y==="scan"?"Scan Barcode":Y==="search"?"Search Food":Y==="favourites"?"Favourites":"Manual Entry"}),i.jsx("button",{className:"nut-modal-close",onClick:()=>{nn(),V(null),Te(null),gn(null)},children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Y==="scan"&&!ne&&i.jsxs("div",{className:"nut-scan-area",children:[i.jsxs("div",{className:"nut-scanner-wrapper",children:[i.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),De&&!rt&&i.jsx("div",{className:"nut-scan-line"}),rt&&i.jsxs("div",{className:"nut-scan-detected-overlay",children:[i.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})}),i.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),i.jsx("p",{className:"nut-scan-detected-code",children:rt})]})]}),!De&&i.jsxs("button",{className:"nut-scan-start-btn",onClick:bt,children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),i.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),i.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),i.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),i.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),De&&!rt&&i.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),i.jsx("div",{className:"nut-barcode-divider",children:i.jsx("span",{children:"or enter barcode manually"})}),i.jsxs("div",{className:"nut-barcode-manual",children:[i.jsx("input",{type:"text",inputMode:"numeric",value:G,onChange:E=>ge(E.target.value),onKeyDown:E=>E.key==="Enter"&&G.trim()&&fe(G.trim()),placeholder:"Enter barcode number"}),i.jsx("button",{onClick:()=>G.trim()&&fe(G.trim()),disabled:!G.trim()||Se,children:Se?"...":"Look Up"})]})]}),Y==="scan"&&ne&&(()=>{const E=ne.servingUnit||"g",R=ne.portion,$=He==="portion"&&R?Ct*R.weight:parseFloat(zt)||0,J=$/100,Le=E==="ml"?[100,200,250,500]:[50,100,150,200],Ce=He==="portion"&&R?`${Ct} ${R.label}${Ct!==1?"s":""} (${Math.round($)}${E})`:`${Math.round($)}${E}`;return i.jsxs("div",{className:"nut-product-result",children:[ne.image&&i.jsx("img",{src:ne.image,alt:ne.name||"Product",className:"nut-product-img",loading:"lazy"}),i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:ne.name}),i.jsx("button",{className:`nut-fav-star confirm${Fe(ne.name)?" active":""}`,onClick:()=>xt({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Fe(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ne.brand&&i.jsx("p",{className:"nut-product-brand",children:ne.brand}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",E,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),R&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:He==="portion"?"active":"",onClick:()=>{Gt("portion"),Ct<1&&at(1)},children:"Portions"}),i.jsxs("button",{className:He==="weight"?"active":"",onClick:()=>{Gt("weight"),vt(String(Math.round($)||100))},children:["Custom (",E,")"]})]}),He==="portion"&&R?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Math.max(1,Ct-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:Ct}),i.jsxs("span",{className:"nut-stepper-label",children:[R.label,Ct!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round($),E]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Ct+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",E,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:zt,onChange:Re=>vt(Re.target.value),onFocus:Re=>Re.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Le.map(Re=>i.jsxs("button",{className:`nut-quick-btn${zt===String(Re)?" active":""}`,onClick:()=>vt(String(Re)),children:[Re,E]},Re))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>{gn(null),Te("scan")},children:"Scan Again"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>St({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Ce}),children:"Add"})]})]})})(),Y==="search"&&!ne&&i.jsxs("div",{className:"nut-search-area",children:[i.jsxs("div",{className:"nut-search-bar",children:[i.jsx("input",{type:"text",ref:ve,value:Me,onChange:E=>nt(E.target.value),onKeyDown:E=>{E.key==="Enter"&&(clearTimeout(de.current),ce())},onFocus:()=>setTimeout(()=>ve.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),i.jsx("button",{onClick:ce,disabled:Wt,children:Wt?"...":"Search"})]}),i.jsxs("div",{className:"nut-search-results",children:[ht.map((E,R)=>i.jsxs("button",{className:"nut-search-item",onClick:()=>{gn(E),E.portion?(at(1),vt(String(E.portion.weight)),Gt("portion")):(at(0),vt(String(E.servingValue||100)),Gt("weight"))},children:[E.image&&i.jsx("img",{src:E.image,alt:E.name||"Product",loading:"lazy"}),i.jsxs("div",{className:"nut-search-item-info",children:[i.jsx("span",{className:"nut-search-item-name",children:E.name}),E.brand&&i.jsx("span",{className:"nut-search-item-brand",children:E.brand}),i.jsxs("span",{className:"nut-search-item-macros",children:[E.calories," cal  ",E.protein,"p  ",E.carbs,"c  ",E.fats,"f per 100",E.servingUnit||"g"]})]})]},R)),ht.length===0&&Me&&!Wt&&i.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Y==="search"&&ne&&(()=>{const E=ne.servingUnit||"g",R=ne.portion,$=He==="portion"&&R?Ct*R.weight:parseFloat(zt)||0,J=$/100,Le=E==="ml"?[100,200,250,500]:[50,100,150,200],Ce=He==="portion"&&R?`${Ct} ${R.label}${Ct!==1?"s":""} (${Math.round($)}${E})`:`${Math.round($)}${E}`;return i.jsxs("div",{className:"nut-product-result",children:[ne.image&&i.jsx("img",{src:ne.image,alt:ne.name||"Product",className:"nut-product-img",loading:"lazy"}),i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:ne.name}),i.jsx("button",{className:`nut-fav-star confirm${Fe(ne.name)?" active":""}`,onClick:()=>xt({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Fe(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ne.brand&&i.jsx("p",{className:"nut-product-brand",children:ne.brand}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",E,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),R&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:He==="portion"?"active":"",onClick:()=>{Gt("portion"),Ct<1&&at(1)},children:"Portions"}),i.jsxs("button",{className:He==="weight"?"active":"",onClick:()=>{Gt("weight"),vt(String(Math.round($)||100))},children:["Custom (",E,")"]})]}),He==="portion"&&R?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Math.max(1,Ct-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:Ct}),i.jsxs("span",{className:"nut-stepper-label",children:[R.label,Ct!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round($),E]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Ct+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",E,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:zt,onChange:Re=>vt(Re.target.value),onFocus:Re=>Re.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Le.map(Re=>i.jsxs("button",{className:`nut-quick-btn${zt===String(Re)?" active":""}`,onClick:()=>vt(String(Re)),children:[Re,E]},Re))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>gn(null),children:"Back to Search"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>St({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Ce}),children:"Add"})]})]})})(),Y==="manual"&&i.jsxs("div",{className:"nut-manual-form",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Food Name"}),i.jsx("input",{type:"text",value:Rt.name,onChange:E=>wt(R=>({...R,name:E.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Serving Size (optional)"}),i.jsx("input",{type:"text",value:Rt.serving,onChange:E=>wt(R=>({...R,serving:E.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),i.jsxs("div",{className:"nut-manual-macros",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Protein (g)"}),i.jsx("input",{type:"number",value:Rt.protein,onChange:E=>wt(R=>({...R,protein:E.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Carbs (g)"}),i.jsx("input",{type:"number",value:Rt.carbs,onChange:E=>wt(R=>({...R,carbs:E.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Fats (g)"}),i.jsx("input",{type:"number",value:Rt.fats,onChange:E=>wt(R=>({...R,fats:E.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Calories"}),i.jsx("input",{type:"number",value:Rt.calories,onChange:E=>wt(R=>({...R,calories:E.target.value})),min:"0"})]})]}),i.jsx("button",{className:"nut-btn-primary",disabled:!Rt.name.trim(),onClick:()=>St({name:Rt.name,protein:parseFloat(Rt.protein)||0,carbs:parseFloat(Rt.carbs)||0,fats:parseFloat(Rt.fats)||0,calories:parseFloat(Rt.calories)||0,serving:Rt.serving||""}),children:"Add Food"})]}),Y==="favourites"&&!ne&&(()=>{const E=qt(),R=$=>{if($.per100g){const J=$.per100g;gn({name:$.name,brand:"",image:null,servingSize:$.serving||"100g",servingValue:100,servingUnit:$.servingUnit||"g",portion:$.portion||null,protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories,per100g:!0}),$.portion?(at(1),vt(String($.portion.weight)),Gt("portion")):(at(0),vt("100"),Gt("weight"))}else St({name:$.name,protein:$.protein,carbs:$.carbs,fats:$.fats,calories:$.calories,serving:$.serving||""})};return i.jsx("div",{className:"nut-recent-area",children:E.length===0?i.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):i.jsx("div",{className:"nut-recent-list",children:E.map(($,J)=>i.jsxs("div",{className:"nut-recent-item-row",children:[i.jsx("button",{className:"nut-fav-star active",onClick:Le=>{Le.stopPropagation(),xt($)},children:i.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("button",{className:"nut-recent-item",onClick:()=>R($),children:[i.jsxs("div",{className:"nut-recent-item-info",children:[i.jsx("span",{className:"nut-recent-item-name",children:$.name}),i.jsx("span",{className:"nut-recent-item-serving",children:$.serving||""})]}),i.jsxs("span",{className:"nut-recent-item-macros",children:[$.calories," cal"]})]})]},J))})})})(),Y==="favourites"&&ne&&(()=>{const E=ne.servingUnit||"g",R=ne.portion,$=He==="portion"&&R?Ct*R.weight:parseFloat(zt)||0,J=$/100,Le=E==="ml"?[100,200,250,500]:[50,100,150,200],Ce=He==="portion"&&R?`${Ct} ${R.label}${Ct!==1?"s":""} (${Math.round($)}${E})`:`${Math.round($)}${E}`;return i.jsxs("div",{className:"nut-product-result",children:[i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:ne.name}),i.jsx("button",{className:`nut-fav-star confirm${Fe(ne.name)?" active":""}`,onClick:()=>xt({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Fe(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",E,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),R&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:He==="portion"?"active":"",onClick:()=>{Gt("portion"),Ct<1&&at(1)},children:"Portions"}),i.jsxs("button",{className:He==="weight"?"active":"",onClick:()=>{Gt("weight"),vt(String(Math.round($)||100))},children:["Custom (",E,")"]})]}),He==="portion"&&R?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Math.max(1,Ct-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:Ct}),i.jsxs("span",{className:"nut-stepper-label",children:[R.label,Ct!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round($),E]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>at(Ct+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",E,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:zt,onChange:Re=>vt(Re.target.value),onFocus:Re=>Re.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Le.map(Re=>i.jsxs("button",{className:`nut-quick-btn${zt===String(Re)?" active":""}`,onClick:()=>vt(String(Re)),children:[Re,E]},Re))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>gn(null),children:"Back to Favourites"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>St({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Ce}),children:"Add"})]})]})})()]})}),i.jsx(jl,{active:"nutrition"}),Bt&&i.jsx("div",{className:`toast-notification ${Bt.type}`,children:Bt.message})]})}const Uw="/login/assets/randomiser-glq9YJkL.jpg",bM="/login/assets/programme-card-workout-CnNzTYkz.webp",wM="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",_M="/login/assets/mg-arms-BeOQU3wx.jpg",zw=60,wp=5,xM=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],TM={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},EM={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},kM={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},_p={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},xp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:wM},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Lc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:_M},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],Fw={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},Hw=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Tp=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],uo=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],SM=[5,10,15,20,30];function NM(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function jM(s){const e=[...s];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e}function RM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:o,toggleTheme:u,accent:d}=Vi(),p=Ws(),[g,y]=x.useState("menu"),[w,T]=x.useState(["bodyweight"]),[k,P]=x.useState("core"),[W,B]=x.useState("intermediate"),[L,re]=x.useState(15),[X,he]=x.useState([]),[ke,ze]=x.useState(!1),Ae=x.useRef(!1),I=x.useRef([]),[S,C]=x.useState([]),[D,M]=x.useState(2),[H,A]=x.useState(uo[1]),[We,jt]=x.useState(1),[Y,Te]=x.useState(0),[De,ct]=x.useState("work"),[rt,V]=x.useState(0),[G,ge]=x.useState(!1),[Se,Ve]=x.useState(0),[Me,nt]=x.useState(null),ht=x.useRef(null);x.useRef(null),x.useRef(null);const[pt,Wt]=x.useState(null),pn=x.useCallback((q,oe="info")=>{Wt({message:q,type:oe}),setTimeout(()=>Wt(null),3e3)},[]),[Rt,wt]=x.useState(null),[ne,gn]=x.useState(null),[zt,vt]=x.useState(0),[Ct,at]=x.useState(0),[He,Gt]=x.useState([]),[ns,At]=x.useState(""),[Bt,Dn]=x.useState(""),[Ht,wn]=x.useState(!1),[de,ve]=x.useState(0),[Ne,Qe]=x.useState(!1),[qe,Pe]=x.useState({}),Ge=x.useRef(null),Ue=x.useRef(null),[Ie,we]=x.useState([]),[Ke,st]=x.useState(null),[_t,qt]=x.useState(0),[Fe,xt]=x.useState(0),[St,Dt]=x.useState(0),[Ft,bt]=x.useState(0),[nn,$t]=x.useState(0),[sn,on]=x.useState(0),[un,Nn]=x.useState({beginner:0,intermediate:0,advanced:0}),[z,ue]=x.useState(null),[fe,pe]=x.useState(""),[ce,Be]=x.useState(!1);x.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),x.useEffect(()=>{if(!s||!n)return;(async()=>{try{const oe=xs(tt,"workoutLogs"),se=qs(oe,Rs("clientId","==",n.id)),je=(await $s(se)).docs.map(cn=>cn.data()),Je=je.filter(cn=>cn.type!=="programme");bt(Je.length);const Nt=Je.reduce((cn,Un)=>cn+(Un.duration||0),0);$t(Nt);const Ze={beginner:0,intermediate:0,advanced:0};Je.forEach(cn=>{cn.level&&Ze[cn.level]!==void 0&&Ze[cn.level]++}),Nn(Ze);const Qt=new Date,Mn=Qt.getDay(),dn=Mn===0?-6:1-Mn,Cn=new Date(Qt);Cn.setDate(Qt.getDate()+dn),Cn.setHours(0,0,0,0);const Va=Cn.getTime(),Bi=je.filter(cn=>{const Un=cn.completedAt;return Un?(Un.toDate?Un.toDate().getTime():new Date(Un).getTime())>=Va:!1});qt(Bi.filter(cn=>cn.type!=="programme").length);let Ba=0;if(n)try{const cn=await Gn(Tt(tt,"clientProgrammes",n.id));if(cn.exists()){const Un=cn.data(),zn=Un.templateId;Ba=Bi.filter(ms=>ms.type==="programme"&&ms.programmeId===zn).length,ue(zn);const br=xp.find(ms=>ms.id===zn);br&&pe(br.name);const wr=EM[zn];if(wr){const ms=Object.keys(Un.completedSessions||{}).length,ks=wr.duration*wr.daysPerWeek;Dt(ks>0?Math.round(ms/ks*100):0)}}else ue(null),pe(""),Dt(0)}catch{}xt(Ba);const vr=Je.map(cn=>cn.completedAt).filter(Boolean).map(cn=>cn.toDate?cn.toDate().getTime():new Date(cn).getTime()).sort((cn,Un)=>Un-cn);if(vr.length===0)on(0);else{const cn=new Set;vr.forEach(ks=>{const Vr=new Date(ks),_r=Vr.getDay(),Ua=_r===0?-6:1-_r,Is=new Date(Vr);Is.setDate(Vr.getDate()+Ua),Is.setHours(0,0,0,0),cn.add(Is.getTime())});const Un=[...cn].sort((ks,Vr)=>Vr-ks);let zn=0;const br=new Date(Qt),wr=Qt.getDay()===0?-6:1-Qt.getDay();br.setDate(Qt.getDate()+wr),br.setHours(0,0,0,0);let ms=br.getTime();Un.includes(ms)||(ms-=10080*60*1e3);for(let ks=0;ks<200&&Un.includes(ms);ks++)zn++,ms-=10080*60*1e3;on(zn)}}catch(oe){console.error("Error loading workout stats:",oe)}finally{Be(!0)}})()},[s,n,g]);const ut=()=>{const q=[];let oe;k==="mix"?oe=["core","upper","lower"]:k==="fullbody"?oe=["upper","lower"]:oe=[k];for(const se of w)for(const Ee of oe)q.push(`exercises/${se}/${Ee}`);return q},Ye=async()=>{if(Ae.current){for(;Ae.current;)await new Promise(q=>setTimeout(q,200));return I.current}Ae.current=!0,ze(!0);try{const q=ut(),oe=[];for(const Je of q)try{const Nt=bo(wo,Je),Ze=await Vw(Nt);oe.push(...Ze.items)}catch{console.warn(`Folder ${Je} not found, skipping.`)}if(oe.length===0&&w.includes("bodyweight")&&k==="core")try{const Je=bo(wo,"core"),Nt=await Vw(Je);oe.push(...Nt.items)}catch{console.warn("Legacy core/ folder not found either.")}if(oe.length===0){const Je=w.map(Ze=>Hw.find(Qt=>Qt.key===Ze)?.label).join(" + "),Nt=Tp.find(Ze=>Ze.key===k)?.label;return pn(`No exercises found for ${Je} / ${Nt}. Upload videos to Firebase Storage.`,"error"),Ae.current=!1,ze(!1),[]}const se=new Set,Ee=oe.filter(Je=>{const Nt=Je.name.replace(/\.(mp4|gif)$/i,"");return se.has(Nt)?!1:(se.add(Nt),!0)}),je=await Promise.all(Ee.map(async Je=>{const Nt=await Qc(Je),Ze=NM(Je.name.replace(/\.(mp4|gif)$/i,"")),Qt=/\.gif$/i.test(Je.name);return{name:Ze,videoUrl:Nt,isGif:Qt}}));return I.current=je,he(je),Ae.current=!1,ze(!1),je}catch(q){console.error("Error loading exercises:",q);const oe=q.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${q.message||q.code||"Unknown error"}`;return pn(oe,"error"),Ae.current=!1,ze(!1),[]}},lt=async()=>{y("spinning"),I.current=[];const q=await Ye();if(q.length===0){y("setup");return}const oe=uo.find(Mn=>Mn.key===W);A(oe);const se=oe.work+oe.rest,Ee=L*60,je=Math.floor(Ee/se);let Je,Nt;je<=6?(Je=Math.max(3,Math.floor(je/2)),Nt=Math.floor(je/Je)):je<=12?(Je=Math.min(6,Math.floor(je/2)),Nt=Math.floor(je/Je)):(Je=Math.min(10,Math.floor(je/2)),Nt=Math.floor(je/Je)),Nt=Math.max(2,Nt);const Ze=jM(q),Qt=Ze.slice(0,Math.min(Je,Ze.length));C(Qt),M(Nt),setTimeout(()=>y("preview"),2e3)},dt=()=>{y("countdown"),Ve(3)};x.useEffect(()=>{if(g!=="countdown")return;if(Se<=0){y("workout"),jt(1),Te(0),ct("work"),V(H.work),ge(!1),Ce();return}Le();const q=setTimeout(()=>Ve(oe=>oe-1),1e3);return()=>clearTimeout(q)},[Se,g]),x.useEffect(()=>{if(g!=="workout"||G)return;if(rt<=0){rn();return}rt<=3&&Le();const q=setTimeout(()=>V(oe=>oe-1),1e3);return()=>clearTimeout(q)},[rt,g,G]);const rn=()=>{if(De==="work")ct("rest"),V(H.rest);else{const q=Y+1;if(q>=S.length){const oe=We+1;if(oe>D){y("complete"),Es();return}jt(oe),Te(0)}else Te(q);ct("work"),V(H.work),Ce()}},Es=async()=>{if(s)try{await ng(xs(tt,"workoutLogs"),{clientId:n.id,level:W,duration:L,equipment:w,focus:k,exerciseCount:S.length,rounds:D,exercises:S.map(q=>q.name),completedAt:ot.now()}),qt(q=>q+1),bt(q=>q+1),$t(q=>q+L),Nn(q=>({...q,[W]:(q[W]||0)+1}))}catch(q){console.error("Error saving workout log:",q)}},Bn=async(q,oe,se)=>{if(!(!n||!oe))try{const Ee=n.id,je=await Gn(Tt(tt,"coreBuddyPBs",Ee)),Nt=(je.exists()?je.data():null)?.exercises||{},Ze=Nt[q];let Qt=!1;if(Ze?(oe>(Ze.weight||0)||oe===(Ze.weight||0)&&se>(Ze.reps||0))&&(Qt=!0):Qt=!0,Qt){const Mn={...Nt,[q]:{weight:oe,reps:se,achievedAt:ot.now()}};await Wn(Tt(tt,"coreBuddyPBs",Ee),{clientId:n.id,exercises:Mn,updatedAt:ot.now()}),pn(`New PB! ${oe}kg  ${se} reps`,"success"),Le(),await Hn(q,oe)}}catch(Ee){console.error("Error checking PB:",Ee)}},Hn=async(q,oe)=>{if(n)try{const se=await Gn(Tt(tt,"coreBuddyTargets",n.id));if(!se.exists())return;const je=(se.data().targets||{})[q];if(!je||oe<je.targetWeight)return;const Je=await Gn(Tt(tt,"coreBuddyAchievements",n.id)),Nt=Je.exists()?Je.data():{clientId:n.id,badges:[],totalVolume:0};if(Nt.badges.some(dn=>dn.type==="pb_target"&&dn.exercise===q&&dn.targetWeight===je.targetWeight))return;const Qt={type:"pb_target",exercise:q,group:TM[q]||"push",targetWeight:je.targetWeight,achievedAt:ot.now()},Mn=[...Nt.badges,Qt];await Wn(Tt(tt,"coreBuddyAchievements",n.id),{...Nt,badges:Mn,updatedAt:ot.now()}),we(dn=>[...dn,Qt])}catch(se){console.error("Error checking target badge:",se)}},hn=async q=>{if(!(!n||q<=0))try{const oe=await Gn(Tt(tt,"coreBuddyAchievements",n.id)),se=oe.exists()?oe.data():{clientId:n.id,badges:[],totalVolume:0},Ee=se.totalVolume||0,je=Ee+q,Je=[];xM.forEach(Ze=>{je>=Ze.threshold&&Ee<Ze.threshold&&(se.badges.some(Mn=>Mn.type==="volume_milestone"&&Mn.milestone===Ze.threshold)||Je.push({type:"volume_milestone",milestone:Ze.threshold,label:Ze.label,achievedAt:ot.now()}))});const Nt=[...se.badges,...Je];await Wn(Tt(tt,"coreBuddyAchievements",n.id),{clientId:n.id,badges:Nt,totalVolume:Math.round(je),updatedAt:ot.now()}),Je.length>0&&we(Ze=>[...Ze,...Je])}catch(oe){console.error("Error updating volume:",oe)}},U=async q=>{if(gn(q),q.interval){const Ee=[];for(const je of q.exercises){let Je=null,Nt=!1;if(je.storagePath)try{const Ze=bo(wo,je.storagePath);Je=await Qc(Ze),Nt=/\.gif$/i.test(je.storagePath)}catch{}Ee.push({name:je.name,videoUrl:Je,isGif:Nt})}C(Ee),M(q.rounds),A({work:q.work,rest:q.rest}),y("preview");return}const oe={};for(const Ee of q.exercises)if(Ee.storagePath)try{const je=bo(wo,Ee.storagePath);oe[Ee.name]={url:await Qc(je),isGif:/\.gif$/i.test(Ee.storagePath)}}catch{}Pe(oe);const se=q.exercises.map(Ee=>({name:Ee.name,type:Ee.type,targetSets:Ee.sets,targetReps:Ee.reps||0,targetTime:Ee.time||0,sets:[]}));Gt(se),vt(0),at(0),At(""),Dn(""),Qe(!1),wn(!1),ve(0),we([]),st(null),y("muscle_workout")},ie=()=>{const q=Ge.current;q&&(q.paused?(q.play(),Qe(!0)):(q.pause(),Qe(!1)))};x.useEffect(()=>{if(g!=="muscle_workout"||!Ht||de<=0){g==="muscle_workout"&&Ht&&de<=0&&(wn(!1),Le());return}return Ue.current=setTimeout(()=>ve(q=>q-1),1e3),()=>clearTimeout(Ue.current)},[g,Ht,de]);const E=async()=>{const q=He[zt];let oe={};if(q.type==="weighted"){const je=parseFloat(ns)||0,Je=parseInt(Bt)||0;if(Je===0){pn("Enter your reps","error");return}oe={weight:je,reps:Je}}else if(q.type==="reps"){const je=parseInt(Bt)||0;if(je===0){pn("Enter your reps","error");return}oe={reps:je}}else if(q.type==="timed"){const je=q.targetTime-de;oe={time:Math.max(je,1)}}const se=[...He];se[zt]={...q,sets:[...q.sets,oe]},Gt(se),q.type==="weighted"&&oe.weight>0&&await Bn(q.name,oe.weight,oe.reps);const Ee=q.sets.length+1;if(Ee<q.targetSets)at(Ee),Dn(""),wn(!1),ve(0);else if(zt+1<He.length){const je=zt+1;vt(je),at(0),At(""),Dn(""),Qe(!1),wn(!1),ve(0)}else await R(se),y("muscle_complete")},R=async q=>{if(!(!s||!n))try{const oe=q.reduce((Ee,je)=>Ee+je.sets.reduce((Je,Nt)=>Je+(Nt.weight||0)*(Nt.reps||0),0),0),se=q.reduce((Ee,je)=>Ee+je.sets.length,0);await ng(xs(tt,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:Rt,sessionId:ne?.id,sessionName:ne?.name,exerciseCount:q.length,totalSets:se,duration:Math.round(se*1.5),volume:Math.round(oe),exercises:q.map(Ee=>({name:Ee.name,type:Ee.type,sets:Ee.sets})),completedAt:ot.now()}),oe>0&&await hn(oe),Ie.length>0&&st({badges:[...Ie]})}catch(oe){console.error("Error saving muscle group workout log:",oe)}},$=x.useRef(null),J=()=>($.current||($.current=new(window.AudioContext||window.webkitAudioContext)),$.current),Le=()=>{try{const q=J(),oe=q.createOscillator(),se=q.createGain();oe.connect(se),se.connect(q.destination),oe.frequency.value=880,se.gain.value=.3,oe.start(q.currentTime),oe.stop(q.currentTime+.15)}catch{}},Ce=()=>{try{const q=J(),oe=q.createOscillator(),se=q.createGain();oe.connect(se),se.connect(q.destination),oe.frequency.value=1200,se.gain.value=.4,oe.start(q.currentTime),oe.stop(q.currentTime+.3)}catch{}};x.useEffect(()=>{if(g!=="workout"||De!=="work"||!S[Y]?.isGif)return;const oe=setInterval(()=>{const se=ht.current;if(!se)return;const Ee=se.getAttribute("src");se.removeAttribute("src"),setTimeout(()=>{ht.current&&ht.current.setAttribute("src",Ee)},0)},4e3);return()=>clearInterval(oe)},[g,De,Y,We,S]);const Re=(q,oe,se)=>{const Ee=Math.round(q/oe*zw);return i.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:cM.map((je,Je)=>i.jsx("line",{x1:je.x1,y1:je.y1,x2:je.x2,y2:je.y2,className:Je<Ee?`wk-tick-filled ${se}`:"wk-tick-empty",strokeWidth:je.thick?"3":"2"},Je))})},Lt=()=>{const q=S.length*D;return((We-1)*S.length+Y+(De==="rest"?.5:0))/q},gt=pt&&i.jsx("div",{className:`toast-notification ${pt.type}`,children:pt.message});if(a)return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsx("div",{className:"wk-loading-inline",children:i.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[i.jsxs("div",{className:"wk-menu-heading",children:[i.jsx("h2",{children:"Choose Your Workout"}),i.jsx("p",{children:"No excuses. Just results."})]}),i.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:i.jsx("img",{src:Uw,alt:"Randomise Workout",className:"wk-hero-bg"})}),i.jsxs("div",{className:"wk-section-header",children:[i.jsx("h2",{children:"Programmes"}),i.jsxs("span",{className:"wk-section-count",children:[xp.length," available"]})]}),i.jsx("div",{className:"wk-prog-scroll-wrap",children:i.jsx("div",{className:"wk-prog-scroll",children:xp.map((q,oe)=>q.image?i.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:q.id}}),style:{animationDelay:`${oe*.06}s`},children:[i.jsx("img",{src:q.image,alt:q.name,className:"wk-prog-img"}),oe===0&&i.jsx("div",{className:"wk-swipe-arrow",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},q.id):i.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:q.id}}),style:{animationDelay:`${oe*.06}s`},children:[i.jsx("img",{src:bM,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),i.jsx("div",{className:"wk-prog-hero-overlay",style:{background:kM[q.focus]}}),i.jsxs("div",{className:"wk-prog-hero-content",children:[i.jsxs("div",{className:"wk-prog-hero-top",children:[i.jsxs("span",{className:"wk-prog-hero-badge",children:[q.duration," WEEKS"]}),i.jsx("span",{className:"wk-prog-hero-level",children:q.level})]}),i.jsxs("div",{className:"wk-prog-hero-bottom",children:[i.jsx("h3",{children:q.name.toUpperCase()}),i.jsxs("p",{children:[q.daysPerWeek,"x per week  ",q.focus==="fullbody"?"Full Body":q.focus.charAt(0).toUpperCase()+q.focus.slice(1)," Focus"]}),i.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),oe===0&&i.jsx("div",{className:"wk-swipe-arrow",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},q.id))})}),i.jsxs("div",{className:"wk-section-header",children:[i.jsx("h2",{children:"Muscle Groups"}),i.jsxs("span",{className:"wk-section-count",children:[Lc.length," groups"]})]}),i.jsx("div",{className:"wk-muscle-grid",children:Lc.map((q,oe)=>i.jsx("button",{className:`wk-muscle-hero-card${q.image?" wk-muscle-thumb":""}`,onClick:()=>{wt(q.key),y("muscle_sessions")},style:{animationDelay:`${oe*.05}s`},children:q.image?i.jsx("img",{src:q.image,alt:q.label,className:"wk-muscle-thumb-img"}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:Uw,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),i.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:_p[q.key]}}),i.jsxs("div",{className:"wk-muscle-hero-content",children:[i.jsx("div",{className:"wk-muscle-hero-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:q.icon})})}),i.jsxs("div",{className:"wk-muscle-hero-text",children:[i.jsx("span",{className:"wk-muscle-hero-name",children:q.label}),i.jsxs("span",{className:"wk-muscle-hero-count",children:[Fw[q.key]?.length||0," sessions"]})]})]})]})},q.key))})]}),i.jsx(jl,{active:"workouts"}),gt]});if(g==="setup"){const q=Tp.find(se=>se.key===k)?.label||k,oe=uo.find(se=>se.key===W)?.label||W;return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main wk-setup-main",children:[i.jsxs("div",{className:"wk-stats-strip",children:[i.jsxs("div",{className:"wk-stats-strip-ring",children:[i.jsx("svg",{viewBox:"0 0 200 200",children:dl.map((se,Ee)=>{const je=Math.round(Math.min(_t,wp)/wp*zw);return i.jsx("line",{x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,className:Ee<je?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:se.thick?"3":"2"},Ee)})}),i.jsxs("span",{className:"wk-stats-strip-ring-num",children:[_t,i.jsxs("small",{children:["/",wp]})]})]}),i.jsxs("div",{className:"wk-stats-strip-items",children:[i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:Ft}),i.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:nn}),i.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:sn}),i.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Focus Area"}),i.jsx("div",{className:"wk-focus-grid",children:Tp.map(se=>i.jsxs("button",{className:`wk-equip-btn${k===se.key?" active":""}${se.key==="mix"?" wk-mix-btn":""}`,onClick:()=>P(se.key),children:[i.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:se.icon})}),i.jsx("span",{children:se.label})]},se.key))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Level"}),i.jsx("div",{className:"wk-level-cards",children:uo.map(se=>i.jsxs("button",{className:`wk-level-card wk-level-${se.key}${W===se.key?" active":""}`,onClick:()=>B(se.key),children:[i.jsx("span",{className:"wk-level-name",children:se.label}),i.jsx("span",{className:"wk-level-desc",children:se.desc})]},se.key))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Time"}),i.jsx("div",{className:"wk-time-options",children:SM.map(se=>i.jsxs("button",{className:`wk-time-btn${L===se?" active":""}`,onClick:()=>re(se),children:[i.jsx("span",{className:"wk-time-num",children:se}),i.jsx("span",{className:"wk-time-unit",children:"min"})]},se))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Equipment"}),i.jsx("div",{className:"wk-equip-options",children:Hw.map(se=>{const Ee=w.includes(se.key);return i.jsxs("button",{className:`wk-equip-btn${Ee?" active":""}`,onClick:()=>{T(je=>Ee&&je.length===1?je:Ee?je.filter(Je=>Je!==se.key):[...je,se.key])},children:[i.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:se.icon})}),i.jsx("span",{children:se.label})]},se.key)})})]}),i.jsx("div",{className:"wk-setup-summary",children:i.jsxs("span",{children:[q,"  ",oe,"  ",L," min"]})})]}),i.jsx("div",{className:"wk-go-sticky",children:i.jsx("button",{className:"wk-randomise-btn",onClick:lt,disabled:ke,children:ke?"Loading exercises...":"Randomise Workout"})}),gt]})}if(g==="spinning")return i.jsxs("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"wk-spin-container",children:[i.jsxs("div",{className:"wk-spin-ring",children:[i.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:dl.map((q,oe)=>i.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:"wk-spin-tick",strokeWidth:q.thick?"3.5":"2",style:{animationDelay:`${oe*.03}s`}},oe))}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),i.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),gt]});if(g==="preview"){const q=ne?.interval?{work:ne.work,rest:ne.rest}:uo.find(se=>se.key===W),oe=S.length*D*(q.work+q.rest);return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y(ne?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[ne?.interval&&i.jsx("h2",{className:"mg-preview-title",children:ne.name}),i.jsxs("div",{className:"wk-preview-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:S.length}),i.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:D}),i.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.ceil(oe/60)}),i.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsxs("span",{className:"wk-stat-val",children:[q.work,"/",q.rest]}),i.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),i.jsx("div",{className:"wk-preview-list",children:S.map((se,Ee)=>i.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${Ee*.06}s`},onClick:()=>nt(se),children:[i.jsx("span",{className:"wk-preview-num",children:Ee+1}),i.jsx("div",{className:"wk-preview-thumb",children:se.isGif?i.jsx("img",{src:se.videoUrl,alt:se.name,loading:"lazy"}):i.jsx("video",{src:`${se.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),i.jsx("span",{className:"wk-preview-name",children:se.name}),i.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},Ee))}),Me&&i.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>nt(null),children:i.jsxs("div",{className:"wk-preview-modal",onClick:se=>se.stopPropagation(),children:[i.jsx("button",{className:"wk-preview-modal-close",onClick:()=>nt(null),"aria-label":"Close preview",children:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),i.jsx("div",{className:"wk-preview-modal-video",children:Me.isGif?i.jsx("img",{src:Me.videoUrl,alt:Me.name}):i.jsx("video",{src:Me.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),i.jsx("h3",{className:"wk-preview-modal-title",children:Me.name})]})}),i.jsxs("div",{className:"wk-preview-actions",children:[!ne?.interval&&i.jsxs("button",{className:"wk-btn-secondary",onClick:()=>lt(),children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("polyline",{points:"1 4 1 10 7 10"}),i.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),i.jsx("button",{className:"wk-btn-primary",onClick:dt,children:"Start Workout"})]})]})]})}if(g==="countdown")return i.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":o?"dark":"light","data-accent":d,children:i.jsxs("div",{className:"wk-countdown-big",children:[i.jsx("span",{className:"wk-countdown-num",children:Se}),i.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const q=S[Y],oe=De==="work"?H.work:H.rest,se=De==="rest"?Y+1<S.length?S[Y+1]:We<D?S[0]:null:null;return i.jsxs("div",{className:"wk-page wk-page-workout","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"wk-video-container",children:De==="work"?q.isGif?i.jsx("img",{ref:ht,className:"wk-video",src:q.videoUrl,alt:q.name},q.videoUrl):i.jsx("video",{className:"wk-video",src:q.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},q.videoUrl):i.jsxs("div",{className:"wk-rest-screen",children:[i.jsx("span",{className:"wk-rest-label",children:"REST"}),se&&i.jsxs("span",{className:"wk-next-label",children:["Next: ",se.name]})]})}),i.jsx("div",{className:"wk-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"wk-exercise-info",children:[i.jsxs("span",{className:"wk-exercise-counter",children:[Y+1," / ",S.length]}),i.jsx("h2",{className:"wk-exercise-name",children:q.name}),i.jsxs("span",{className:"wk-round-label",children:["Round ",We," of ",D]})]}),i.jsx("div",{className:"wk-timer-section",children:i.jsxs("div",{className:"wk-timer-ring-wrap",children:[Re(rt,oe,De==="work"?"wk-tick-work":"wk-tick-rest"),i.jsxs("div",{className:"wk-timer-center",children:[i.jsx("span",{className:"wk-timer-time",children:rt}),i.jsx("span",{className:`wk-timer-phase ${De}`,children:De==="work"?"WORK":"REST"})]})]})}),i.jsxs("div",{className:"wk-controls",children:[i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>ge(!G),children:G?i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),i.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{V(0)},children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),i.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),i.jsx("div",{className:"wk-progress-bar",children:i.jsx("div",{className:"wk-progress-fill",style:{width:`${Lt()*100}%`}})})]})}if(g==="complete"){const q=uo.find(se=>se.key===W),oe=S.length*D*(q.work+q.rest);return i.jsx("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":d,children:i.jsxs("div",{className:"wk-complete",children:[i.jsxs("div",{className:"wk-complete-ring",children:[i.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:dl.map((se,Ee)=>i.jsx("line",{x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,className:"wk-tick-complete",strokeWidth:se.thick?"3.5":"2",style:{animationDelay:`${Ee*.02}s`}},Ee))}),i.jsx("div",{className:"wk-complete-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),i.jsxs("div",{className:"wk-complete-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.ceil(oe/60)}),i.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:S.length*D}),i.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:D}),i.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),i.jsx("div",{className:"wk-complete-actions",children:i.jsx("button",{className:"wk-btn-primary",onClick:()=>{gn(null),wt(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const q=Lc.find(se=>se.key===Rt),oe=Fw[Rt]||[];return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[i.jsxs("div",{className:"mg-sessions-header",children:[i.jsx("div",{className:"mg-sessions-icon",style:{background:_p[Rt]},children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:q?.icon})})}),i.jsxs("h2",{children:[q?.label," Workouts"]}),i.jsxs("p",{children:[oe.length," sessions available"]})]}),i.jsx("div",{className:"mg-sessions-list",children:oe.map((se,Ee)=>i.jsxs("button",{className:"mg-session-card",onClick:()=>{gn(se),y("muscle_overview")},style:{animationDelay:`${Ee*.08}s`},children:[i.jsxs("div",{className:"mg-session-info",children:[i.jsx("h3",{children:se.name}),i.jsx("p",{children:se.desc}),i.jsx("div",{className:"mg-session-meta",children:se.interval?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),i.jsxs("span",{className:"mg-session-tag",children:[se.exercises.length," exercises"]}),i.jsxs("span",{className:"mg-session-tag",children:[se.rounds," rounds"]})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),i.jsxs("span",{className:"mg-session-tag",children:[se.exercises.length," exercises"]}),i.jsx("span",{className:"mg-session-tag",children:(()=>{const je=se.exercises.map(Ze=>Ze.sets||0),Je=Math.min(...je),Nt=Math.max(...je);return Je===Nt?`${Je} sets each`:`${Je}-${Nt} sets each`})()})]})})]}),i.jsx("div",{className:"mg-session-arrow",children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},se.id))})]}),gt]})}if(g==="muscle_overview"){const q=ne;if(!q)return null;const oe=Lc.find(se=>se.key===Rt);return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main mg-overview-main",children:[i.jsx("div",{className:"mg-overview-hero",style:{background:_p[Rt]},children:i.jsx("div",{className:"mg-overview-hero-content",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:i.jsx("path",{d:oe?.icon})})})}),i.jsxs("div",{className:"mg-overview-header",children:[i.jsxs("div",{className:"mg-overview-title-row",children:[i.jsx("h2",{children:q.name}),q.level&&i.jsx("span",{className:"mg-overview-level",children:q.level})]}),i.jsx("p",{className:"mg-overview-desc",children:q.desc})]}),q.overview&&i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),i.jsx("p",{children:q.overview})]}),q.tips&&q.tips.length>0&&i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),i.jsx("ul",{className:"mg-overview-tips",children:q.tips.map((se,Ee)=>i.jsx("li",{children:se},Ee))})]}),i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),i.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),i.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",q.exercises.length,")"]}),i.jsx("div",{className:"mg-overview-exercises",children:q.exercises.map((se,Ee)=>i.jsxs("div",{className:"mg-overview-exercise",children:[i.jsx("span",{className:"mg-overview-ex-num",children:Ee+1}),i.jsxs("div",{className:"mg-overview-ex-info",children:[i.jsx("span",{className:"mg-overview-ex-name",children:se.name}),q.interval?i.jsxs("span",{className:"mg-overview-ex-detail",children:[q.work,"s work / ",q.rest,"s rest"]}):i.jsxs("span",{className:"mg-overview-ex-detail",children:[se.sets," sets  ",se.reps?`${se.reps} reps`:`${se.time}s`,se.type==="weighted"&&"  weighted"]})]})]},Ee))})]}),i.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>U(q),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),gt]})}if(g==="muscle_workout"){const q=ne;if(!q)return null;const oe=q.exercises[zt],se=He[zt];if(!oe||!se)return null;const Ee=se.sets.length,je=q.exercises.length,Je=q.exercises.reduce((dn,Cn)=>dn+(Cn.sets||0),0),Ze=He.reduce((dn,Cn)=>dn+Cn.sets.length,0)/Je*100,Qt=qe[oe.name];oe.type==="timed"&&de===0&&!Ht&&Ee===Ct&&setTimeout(()=>ve(oe.time),0);const Mn=Ee+1<oe.sets?"Log Set":zt+1<je?"Log Set  Next Exercise":"Log Set  Complete";return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"mg-session-progress",children:i.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Ze}%`}})}),i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsxs("span",{className:"mg-header-info",children:["Exercise ",zt+1,"/",je]}),i.jsx("div",{style:{width:22}})]})}),i.jsxs("main",{className:"wk-main",children:[Qt?i.jsxs("div",{className:"mg-video-container",onClick:ie,children:[Qt.isGif?i.jsx("img",{className:"mg-video",src:Qt.url,alt:oe.name}):i.jsx("video",{ref:Ge,className:"mg-video",src:Qt.url,loop:!0,muted:!0,playsInline:!0},oe.name),!Ne&&!Qt.isGif&&i.jsxs("div",{className:"mg-video-overlay",children:[i.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),i.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):i.jsxs("div",{className:"mg-video-placeholder",children:[i.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[i.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),i.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),i.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),i.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),i.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),i.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),i.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),i.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),i.jsx("span",{children:"Video coming soon"})]}),i.jsx("div",{className:"wk-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"mg-exercise-card",children:[i.jsx("h2",{className:"mg-ex-name",children:oe.name}),i.jsx("span",{className:`mg-ex-type-badge ${oe.type}`,children:oe.type==="weighted"?"Weight + Reps":oe.type==="reps"?"Reps Only":"Timed"}),i.jsxs("div",{className:"mg-ex-set-info",children:[i.jsxs("span",{className:"mg-ex-set-num",children:["Set ",Ee+1," of ",oe.sets]}),oe.type!=="timed"&&i.jsxs("span",{className:"mg-ex-target",children:["Target: ",oe.reps," reps"]}),oe.type==="timed"&&i.jsxs("span",{className:"mg-ex-target",children:["Target: ",oe.time,"s"]})]}),oe.type==="weighted"&&i.jsxs("div",{className:"mg-input-area",children:[i.jsxs("div",{className:"mg-input-group",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:ns,onChange:dn=>At(dn.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"mg-input-group",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Bt,onChange:dn=>Dn(dn.target.value),placeholder:"0"})]})]}),oe.type==="reps"&&i.jsx("div",{className:"mg-input-area",children:i.jsxs("div",{className:"mg-input-group mg-input-single",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Bt,onChange:dn=>Dn(dn.target.value),placeholder:"0"})]})}),oe.type==="timed"&&i.jsxs("div",{className:"mg-timer-area",children:[i.jsx("div",{className:"mg-timer-display",children:i.jsxs("span",{className:"mg-timer-value",children:[de,"s"]})}),Ht?i.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>wn(!1),children:"Stop"}):i.jsx("button",{className:"mg-timer-btn",onClick:()=>{de===0&&ve(oe.time),wn(!0)},children:de<oe.time&&de>0?"Resume":"Start Timer"})]}),i.jsx("button",{className:"mg-log-set-btn",onClick:E,children:Mn}),se.sets.length>0&&i.jsx("div",{className:"mg-completed-sets",children:se.sets.map((dn,Cn)=>i.jsxs("div",{className:"mg-completed-set",children:[i.jsx("span",{className:"mg-completed-set-check",children:""}),i.jsxs("span",{children:["Set ",Cn+1,": ",dn.weight!=null?`${dn.weight}kg  ${dn.reps}`:dn.reps!=null?`${dn.reps} reps`:`${dn.time}s`]})]},Cn))})]})]}),gt]})}if(g==="muscle_complete"){const q=He.reduce((Ee,je)=>Ee+je.sets.length,0),oe=He.reduce((Ee,je)=>Ee+je.sets.reduce((Je,Nt)=>Je+(Nt.weight||0)*(Nt.reps||0),0),0),se=Lc.find(Ee=>Ee.key===Rt)?.label||"";return i.jsxs("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"wk-complete",children:[i.jsxs("div",{className:"wk-complete-ring",children:[i.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:dl.map((Ee,je)=>i.jsx("line",{x1:Ee.x1,y1:Ee.y1,x2:Ee.x2,y2:Ee.y2,className:"wk-tick-complete",strokeWidth:Ee.thick?"3.5":"2",style:{animationDelay:`${je*.02}s`}},je))}),i.jsx("div",{className:"wk-complete-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsxs("h2",{className:"wk-complete-title",children:[se," Complete!"]}),i.jsx("p",{className:"mg-complete-session-name",children:ne?.name}),i.jsxs("div",{className:"wk-complete-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:He.length}),i.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:q}),i.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),oe>0&&i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.round(oe).toLocaleString()}),i.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),i.jsx("div",{className:"wk-complete-actions",children:i.jsx("button",{className:"wk-btn-primary",onClick:()=>{gn(null),wt(null),st(null),y("menu")},children:"Done"})})]}),Ke&&i.jsx("div",{className:"mg-badge-celebration",onClick:()=>st(null),children:i.jsxs("div",{className:"mg-badge-celebration-card",children:[i.jsx("div",{className:"mg-badge-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),i.jsx("h3",{className:"mg-badge-celebration-title",children:Ke.badges.length===1?"Badge Earned!":`${Ke.badges.length} Badges Earned!`}),i.jsx("div",{className:"mg-badge-celebration-list",children:Ke.badges.map((Ee,je)=>i.jsx("div",{className:"mg-badge-celebration-item",children:Ee.type==="pb_target"?`${Ee.exercise}  ${Ee.targetWeight}kg`:Ee.label},je))}),i.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const CM=60,AM={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},IM=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],qw=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function Wh(s,e,n){const a=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,o=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:a,time:o}}const DM={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function MM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:o,toggleTheme:u,accent:d}=Vi(),p=Ws(),g=Or(),[y,w]=x.useState("loading"),[T,k]=x.useState(null),P=x.useRef(!1),[W,B]=x.useState(null),[L,re]=x.useState(1),[X,he]=x.useState(0),[ke,ze]=x.useState(0),[Ae,I]=x.useState(0),[S,C]=x.useState([]),[D,M]=x.useState(""),[H,A]=x.useState(""),[We,jt]=x.useState(!1),[Y,Te]=x.useState(0),De=x.useRef(null),[ct,rt]=x.useState({}),[V,G]=x.useState(!1),ge=x.useRef(null),[Se,Ve]=x.useState(null),[Me,nt]=x.useState([]);x.useEffect(()=>{window.scrollTo(0,0)},[y]);const[ht,pt]=x.useState(null),Wt=x.useCallback((de,ve="info")=>{pt({message:de,type:ve}),setTimeout(()=>pt(null),4e3)},[]),pn=x.useRef(null),Rt=()=>(pn.current||(pn.current=new(window.AudioContext||window.webkitAudioContext)),pn.current),wt=()=>{try{const de=Rt(),ve=de.createOscillator(),Ne=de.createGain();ve.connect(Ne),Ne.connect(de.destination),ve.frequency.value=1200,Ne.gain.value=.4,ve.start(de.currentTime),ve.stop(de.currentTime+.3)}catch{}};x.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),x.useEffect(()=>{if(!n)return;(async()=>{try{const ve=Tt(tt,"clientProgrammes",n.id),Ne=await Gn(ve);Ne.exists()?(B(Ne.data()),w("dashboard")):g.state?.templateId?w("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(ve){console.error("Error loading programme:",ve),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),x.useEffect(()=>{if(P.current||y==="loading")return;const de=g.state?.templateId;if(!de)return;const ve=qw.find(Ne=>Ne.id===de);ve&&(P.current=!0,k(ve),w("overview"))},[y,g.state]),x.useEffect(()=>{if(!We||Y<=0){We&&Y<=0&&(jt(!1),wt());return}return De.current=setTimeout(()=>Te(de=>de-1),1e3),()=>clearTimeout(De.current)},[We,Y]);const ne=async de=>{if(n)try{await Wn(Tt(tt,"clientProgrammes",n.id),de),B(de)}catch(ve){console.error("Error saving programme:",ve),Wt("Failed to save. Check Firestore rules for clientProgrammes.","error")}},gn=async de=>{const ve={templateId:de.id,startDate:ot.now(),completedSessions:{}};await ne(ve),w("dashboard")},zt=async()=>{if(n)try{await oy(Tt(tt,"clientProgrammes",n.id)),B(null),w("browse")}catch(de){console.error("Error quitting programme:",de)}},vt=()=>W?qw.find(de=>de.id===W.templateId):null,Ct=()=>{if(!W)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const de=W.completedSessions||{},ve=Object.keys(de).length,Ne=vt();if(!Ne)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Qe=Ne.duration*Ne.daysPerWeek,qe=Math.min(Math.floor(ve/Ne.daysPerWeek)+1,Ne.duration),Pe=ve-(qe-1)*Ne.daysPerWeek;for(let Ge=1;Ge<=Ne.duration;Ge++)for(let Ue=0;Ue<Ne.daysPerWeek;Ue++){const Ie=`w${Ge}d${Ue}`;if(!de[Ie])return{currentWeek:Ge,completedThisWeek:Pe,nextDay:Ue,nextWeek:Ge,totalCompleted:ve,totalSessions:Qe}}return{currentWeek:Ne.duration,completedThisWeek:Ne.daysPerWeek,nextDay:-1,totalCompleted:ve,totalSessions:Qe,complete:!0}},at=(de,ve,Ne)=>{if(!W||de<=1)return null;const Qe=`w${de-1}d${ve}`,qe=W.completedSessions?.[Qe];if(!qe)return null;const Pe=qe.exercises?.find(Ge=>Ge.name===Ne);return Pe?.sets?.length?Pe.sets[Pe.sets.length-1]:null},He=(de,ve)=>{const Ne=vt();if(!Ne)return;re(de),he(ve),ze(0),I(0),C([]),A(""),jt(!1),Te(0),G(!1),rt({});const Qe=Ne.days[ve],qe=Qe.exercises.map(Ie=>{const we=Wh(Ie,de,Ne);return{name:Ie.name,type:Ie.type,pbKey:Ie.pbKey,targetSets:we.sets,targetReps:we.reps,targetTime:we.time,sets:[]}});C(qe);const Pe=Qe.exercises[0],Ge=at(de,ve,Pe.name);Ge?.weight&&Pe.type==="weighted"?M(String(Ge.weight)):M(""),(async()=>{const Ie={};for(const we of Qe.exercises)if(we.storagePath)try{const Ke=bo(wo,we.storagePath),st=await Qc(Ke);Ie[we.name]={url:st,isGif:/\.gif$/i.test(we.storagePath)}}catch(Ke){console.warn(`Video not found for ${we.name}:`,Ke)}rt(Ie)})(),w("session")},Gt=async()=>{vt();const de=S[ke];if(!de)return;let ve={};if(de.type==="weighted"){const qe=parseFloat(D)||0,Pe=parseInt(H)||0;if(Pe===0){Wt("Enter your reps","error");return}ve={weight:qe,reps:Pe}}else if(de.type==="reps"){const qe=parseInt(H)||0;if(qe===0){Wt("Enter your reps","error");return}ve={reps:qe}}else if(de.type==="timed"){const qe=de.targetTime-Y;ve={time:Math.max(qe,1)}}const Ne=[...S];Ne[ke]={...de,sets:[...de.sets,ve]},C(Ne),de.type==="weighted"&&ve.weight>0&&await Bt(de.name,ve.weight,ve.reps);const Qe=de.sets.length+1;if(Qe<de.targetSets)I(Qe),M(ve.weight?String(ve.weight):""),A(""),jt(!1),Te(0);else if(ke+1<S.length){const qe=ke+1;ze(qe),I(0),G(!1);const Ge=vt()?.days[X]?.exercises[qe],Ue=at(L,X,Ge?.name);Ue?.weight&&Ge?.type==="weighted"?M(String(Ue.weight)):M(""),A(""),jt(!1),Te(0)}else await ns(Ne)},ns=async de=>{if(!W||!n)return;const ve=`w${L}d${X}`,Ne={...W.completedSessions,[ve]:{completedAt:new Date().toISOString(),exercises:de.map(Pe=>({name:Pe.name,type:Pe.type,sets:Pe.sets}))}},Qe={...W,completedSessions:Ne};await ne(Qe);const qe=de.reduce((Pe,Ge)=>Pe+Ge.sets.reduce((Ue,Ie)=>Ue+(Ie.weight||0)*(Ie.reps||0),0),0);qe>0&&await At(qe);try{const Pe=vt();await ng(xs(tt,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:Pe?.id,programmeName:Pe?.name,week:L,day:X+1,exerciseCount:de.length,duration:Math.round(de.reduce((Ge,Ue)=>Ge+Ue.sets.length*1.5,0)),volume:Math.round(qe),completedAt:ot.now()})}catch(Pe){console.error("Error saving workout log:",Pe)}Me.length>0&&(Ve({badges:[...Me]}),nt([])),w("sessionComplete")},At=async de=>{if(n)try{const ve=await Gn(Tt(tt,"coreBuddyAchievements",n.id)),Ne=ve.exists()?ve.data():{clientId:n.id,badges:[],totalVolume:0},Qe=Ne.totalVolume||0,qe=Qe+de,Pe=[];IM.forEach(Ue=>{qe>=Ue.threshold&&Qe<Ue.threshold&&(Ne.badges.some(we=>we.type==="volume_milestone"&&we.milestone===Ue.threshold)||Pe.push({type:"volume_milestone",milestone:Ue.threshold,label:Ue.label,achievedAt:ot.now()}))});const Ge=[...Ne.badges,...Pe];await Wn(Tt(tt,"coreBuddyAchievements",n.id),{clientId:n.id,badges:Ge,totalVolume:Math.round(qe),updatedAt:ot.now()}),Pe.length>0&&nt(Ue=>[...Ue,...Pe])}catch(ve){console.error("Error updating volume:",ve)}},Bt=async(de,ve,Ne)=>{if(n)try{const Qe=n.id,qe=await Gn(Tt(tt,"coreBuddyPBs",Qe)),Ge=(qe.exists()?qe.data():null)?.exercises||{},Ue=Ge[de];let Ie=!1;if(Ue?(ve>(Ue.weight||0)||ve===(Ue.weight||0)&&Ne>(Ue.reps||0))&&(Ie=!0):Ie=!0,Ie){const we={...Ge,[de]:{weight:ve,reps:Ne,achievedAt:ot.now()}};await Wn(Tt(tt,"coreBuddyPBs",Qe),{clientId:n.id,exercises:we,updatedAt:ot.now()}),Wt(`New PB! ${ve}kg  ${Ne} reps`,"success"),wt(),await Dn(de,ve)}}catch(Qe){console.error("Error checking PB:",Qe)}},Dn=async(de,ve)=>{if(n)try{const Ne=await Gn(Tt(tt,"coreBuddyTargets",n.id));if(!Ne.exists())return;const qe=(Ne.data().targets||{})[de];if(!qe||ve<qe.targetWeight)return;const Pe=await Gn(Tt(tt,"coreBuddyAchievements",n.id)),Ge=Pe.exists()?Pe.data():{clientId:n.id,badges:[],totalVolume:0};if(Ge.badges.some(Ke=>Ke.type==="pb_target"&&Ke.exercise===de&&Ke.targetWeight===qe.targetWeight))return;const Ie={type:"pb_target",exercise:de,group:AM[de]||"push",targetWeight:qe.targetWeight,achievedAt:ot.now()},we=[...Ge.badges,Ie];await Wn(Tt(tt,"coreBuddyAchievements",n.id),{...Ge,badges:we,updatedAt:ot.now()}),nt(Ke=>[...Ke,Ie])}catch(Ne){console.error("Error checking target badge:",Ne)}},Ht=ht&&i.jsxs("div",{className:`toast-notification ${ht.type}`,children:[ht.type==="success"&&i.jsx("span",{children:" "}),ht.message]}),wn=(de,ve)=>i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:ve,"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(a||y==="loading")return i.jsx("div",{className:"cb-loading",children:i.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&T){const de=T;return i.jsxs("div",{className:"pg-page","data-theme":o?"dark":"light","data-accent":d,children:[wn(de.name,()=>p("/client/core-buddy/workouts")),i.jsxs("main",{className:"pg-main",children:[i.jsxs("div",{className:"pg-overview-hero",children:[i.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:DM[de.focus]})}),i.jsx("h2",{className:"pg-overview-name",children:de.name}),i.jsx("p",{className:"pg-overview-desc",children:de.description}),i.jsxs("div",{className:"pg-overview-stats",children:[i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:de.duration}),i.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:de.daysPerWeek}),i.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:de.duration*de.daysPerWeek}),i.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),i.jsx("div",{className:"pg-overview-days",children:de.days.map((ve,Ne)=>i.jsxs("div",{className:"pg-day-card",children:[i.jsxs("div",{className:"pg-day-header",children:[i.jsx("span",{className:"pg-day-name",children:ve.name}),i.jsx("span",{className:"pg-day-label",children:ve.label})]}),i.jsx("div",{className:"pg-day-exercises",children:ve.exercises.map((Qe,qe)=>{const Pe=Wh(Qe,1,de);return i.jsxs("div",{className:"pg-day-ex",children:[i.jsx("span",{className:"pg-day-ex-name",children:Qe.name}),i.jsx("span",{className:"pg-day-ex-target",children:Qe.type==="timed"?`${Pe.sets}${Pe.time}s`:`${Pe.sets}${Pe.reps}`}),i.jsx("span",{className:`pg-day-ex-badge pg-badge-${Qe.type}`,children:Qe.type==="weighted"?"WT":Qe.type==="timed"?"TMR":"BW"})]},qe)})})]},Ne))}),i.jsxs("div",{className:"pg-overview-note",children:[i.jsx("strong",{children:"Progressive Overload:"})," +",de.repProg," reps/week",de.timeProg?`, +${de.timeProg}s/week for timed`:""]}),i.jsx("button",{className:"pg-start-btn",onClick:()=>gn(de),children:"Start Programme"})]}),Ht]})}if(y==="dashboard"){const de=vt();if(!de)return w("browse"),null;const ve=Ct(),Ne=W?.completedSessions||{},Qe=ve.totalSessions?Math.round(ve.totalCompleted/ve.totalSessions*100):0,qe=Math.round(ve.totalCompleted/(ve.totalSessions||1)*CM);return i.jsxs("div",{className:"pg-page","data-theme":o?"dark":"light","data-accent":d,children:[wn("Programme",()=>p("/client/core-buddy/workouts")),i.jsxs("main",{className:"pg-main",children:[i.jsxs("div",{className:"pg-dash-hero",children:[i.jsxs("div",{className:"pg-dash-ring-wrap",children:[i.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:dl.map((Pe,Ge)=>i.jsx("line",{x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,className:Ge<qe?"pg-tick-filled":"pg-tick-empty",strokeWidth:Pe.thick?"3":"2"},Ge))}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),i.jsx("h2",{className:"pg-dash-name",children:de.name}),i.jsxs("div",{className:"pg-dash-progress-text",children:[i.jsxs("span",{className:"pg-dash-pct",children:[Qe,"%"]}),i.jsxs("span",{className:"pg-dash-week",children:["Week ",ve.currentWeek," of ",de.duration]})]})]}),i.jsx("div",{className:"pg-weeks",children:Array.from({length:de.duration},(Pe,Ge)=>{const Ue=Ge+1;return i.jsxs("div",{className:`pg-week-row${Ue===ve.currentWeek?" pg-week-current":""}`,children:[i.jsxs("span",{className:"pg-week-label",children:["W",Ue]}),i.jsx("div",{className:"pg-week-days",children:de.days.map((Ie,we)=>{const Ke=`w${Ue}d${we}`,st=!!Ne[Ke],_t=!ve.complete&&Ue===ve.nextWeek&&we===ve.nextDay;return i.jsx("button",{className:`pg-day-dot${st?" done":""}${_t?" next":""}`,disabled:st,onClick:()=>{_t&&He(Ue,we)},children:st?i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})}):i.jsx("span",{children:Ie.name.replace("Day ","")})},we)})})]},Ge)})}),!ve.complete&&ve.nextDay>=0&&i.jsxs("div",{className:"pg-next-session",children:[i.jsx("h3",{children:"Next Session"}),i.jsxs("p",{className:"pg-next-info",children:["Week ",ve.nextWeek,"  ",de.days[ve.nextDay].name,": ",de.days[ve.nextDay].label]}),i.jsx("div",{className:"pg-next-exercises",children:de.days[ve.nextDay].exercises.map((Pe,Ge)=>{const Ue=Wh(Pe,ve.nextWeek,de);return i.jsxs("div",{className:"pg-next-ex",children:[i.jsx("span",{className:"pg-next-ex-name",children:Pe.name}),i.jsx("span",{className:"pg-next-ex-target",children:Pe.type==="timed"?`${Ue.sets}${Ue.time}s`:`${Ue.sets}${Ue.reps}`})]},Ge)})}),i.jsx("button",{className:"pg-start-btn",onClick:()=>He(ve.nextWeek,ve.nextDay),children:"Start Session"})]}),ve.complete&&i.jsxs("div",{className:"pg-complete-msg",children:[i.jsx("h3",{children:"Programme Complete! "}),i.jsxs("p",{children:["You finished all ",ve.totalSessions," sessions."]}),i.jsx("button",{className:"pg-start-btn",onClick:zt,children:"Choose New Programme"})]}),i.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&zt()},children:"Quit Programme"})]}),i.jsx(jl,{active:"workouts"}),Ht]})}if(y==="session"){const de=vt();if(!de)return null;const ve=de.days[X],Ne=ve.exercises[ke],Qe=Wh(Ne,L,de),qe=S[ke],Pe=qe?.sets?.length||0,Ge=ve.exercises.length,Ue=(ke+Pe/Qe.sets)/Ge,Ie=ct[Ne.name],we=at(L,X,Ne.name);Ne.type==="timed"&&Y===0&&!We&&Pe===Ae&&setTimeout(()=>Te(Qe.time),0);const Ke=()=>{Ie?.isGif?G(!V):ge.current&&(V?ge.current.pause():ge.current.play(),G(!V))};return i.jsxs("div",{className:"pg-page pg-page-session","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"pg-session-progress",children:i.jsx("div",{className:"pg-session-progress-fill",style:{width:`${Ue*100}%`}})}),i.jsxs("div",{className:"pg-session-header",children:[i.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&w("dashboard")},children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),i.jsxs("div",{className:"pg-session-title",children:[i.jsxs("span",{className:"pg-session-counter",children:[ke+1," / ",Ge]}),i.jsxs("span",{className:"pg-session-week",children:["Week ",L,"  ",ve.name]})]})]}),Ie&&i.jsxs("div",{className:"pg-video-container",onClick:Ke,children:[Ie.isGif?i.jsx("img",{className:"pg-video",src:Ie.url,alt:Ne.name}):i.jsx("video",{ref:ge,className:"pg-video",src:Ie.url,loop:!0,muted:!0,playsInline:!0},Ne.name),!V&&i.jsxs("div",{className:"pg-video-overlay",children:[i.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),i.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),i.jsx("div",{className:"pg-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"pg-exercise-card",children:[i.jsx("h2",{className:"pg-ex-name",children:Ne.name}),i.jsx("span",{className:`pg-ex-type-badge pg-badge-${Ne.type}`,children:Ne.type==="weighted"?"Weight + Reps":Ne.type==="timed"?"Timed":"Reps Only"}),Ne.type==="weighted"&&we&&i.jsxs("div",{className:"pg-last-week",children:[i.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),i.jsxs("span",{className:"pg-last-week-value",children:[we.weight,"kg x ",we.reps," reps"]})]}),i.jsxs("div",{className:"pg-ex-set-info",children:[i.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Pe+1," of ",Qe.sets]}),i.jsxs("span",{className:"pg-ex-target",children:["Target: ",Ne.type==="timed"?`${Qe.time}s hold`:`${Qe.reps} reps`]})]}),Ne.type==="weighted"&&i.jsxs("div",{className:"pg-input-area",children:[i.jsxs("div",{className:"pg-input-group",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",value:D,onChange:st=>M(st.target.value),placeholder:"0",className:"pg-input"})]}),i.jsxs("div",{className:"pg-input-group",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:st=>A(st.target.value),placeholder:String(Qe.reps),className:"pg-input"})]})]}),Ne.type==="reps"&&i.jsx("div",{className:"pg-input-area",children:i.jsxs("div",{className:"pg-input-group pg-input-single",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:st=>A(st.target.value),placeholder:String(Qe.reps),className:"pg-input"})]})}),Ne.type==="timed"&&i.jsxs("div",{className:"pg-timer-area",children:[i.jsx("div",{className:"pg-timer-display",children:i.jsxs("span",{className:"pg-timer-value",children:[Y,"s"]})}),We?i.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>jt(!1),children:"Stop"}):i.jsx("button",{className:"pg-timer-btn",onClick:()=>{Y===0&&Te(Qe.time),jt(!0)},children:Y<Qe.time&&Y>0?"Resume":"Start Timer"})]}),i.jsx("button",{className:"pg-log-set-btn",onClick:Gt,disabled:Ne.type==="timed"&&We,children:Pe+1<Qe.sets?"Log Set":ke+1<Ge?"Log Set  Next Exercise":"Log Set  Complete"}),qe?.sets?.length>0&&i.jsx("div",{className:"pg-completed-sets",children:qe.sets.map((st,_t)=>i.jsxs("div",{className:"pg-completed-set",children:[i.jsx("span",{className:"pg-completed-set-check",children:""}),i.jsxs("span",{children:["Set ",_t+1,": ",st.weight!==void 0?`${st.weight}kg  ${st.reps}`:st.time!==void 0?`${st.time}s`:`${st.reps} reps`]})]},_t))})]}),Ht]})}if(y==="sessionComplete"){const ve=vt()?.days[X],Ne=S.reduce((qe,Pe)=>qe+Pe.sets.length,0),Qe=S.reduce((qe,Pe)=>qe+Pe.sets.reduce((Ge,Ue)=>Ge+(Ue.weight||0)*(Ue.reps||0),0),0);return i.jsxs("div",{className:"pg-page pg-page-center","data-theme":o?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"pg-session-done",children:[i.jsxs("div",{className:"pg-done-ring",children:[i.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:dl.map((qe,Pe)=>i.jsx("line",{x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,className:"pg-tick-complete",strokeWidth:qe.thick?"3.5":"2",style:{animationDelay:`${Pe*.02}s`}},Pe))}),i.jsx("div",{className:"pg-done-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),i.jsxs("p",{className:"pg-done-subtitle",children:["Week ",L,"  ",ve?.name,": ",ve?.label]}),i.jsxs("div",{className:"pg-done-stats",children:[i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:S.length}),i.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:Ne}),i.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),Qe>0&&i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:Math.round(Qe).toLocaleString()}),i.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),i.jsx("button",{className:"pg-start-btn",onClick:()=>w("dashboard"),children:"Back to Programme"})]}),Se&&i.jsx("div",{className:"pg-badge-celebration",onClick:()=>Ve(null),children:i.jsxs("div",{className:"pg-badge-celebration-card",onClick:qe=>qe.stopPropagation(),children:[i.jsx("div",{className:"pg-badge-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pg-badge-celebration-title",children:Se.badges.length===1?"Badge Earned!":`${Se.badges.length} Badges Earned!`}),i.jsx("div",{className:"pg-badge-celebration-list",children:Se.badges.map((qe,Pe)=>i.jsx("div",{className:"pg-badge-celebration-item",children:qe.type==="pb_target"?`${qe.exercise}  ${qe.targetWeight}kg`:qe.label},Pe))}),i.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Ve(null),children:"Tap to dismiss"})]})}),Ht]})}return null}const PM={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},LM={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Ep=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function OM(s){return PM[s]||"push"}function VM(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function BM(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function UM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:o,toggleTheme:u,accent:d}=Vi(),p=Ws(),[g,y]=x.useState(!0),[w,T]=x.useState(null),[k,P]=x.useState({});x.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),x.useEffect(()=>{if(!n)return;(async()=>{try{const[C,D]=await Promise.all([Gn(Tt(tt,"coreBuddyAchievements",n.id)),Gn(Tt(tt,"coreBuddyPBs",n.id))]);C.exists()&&T(C.data()),D.exists()&&P(D.data().exercises||{})}catch(C){console.error("Error loading achievements:",C)}y(!1)})()},[n]);const W=w?.badges||[],B=w?.totalVolume||0,L=W.filter(S=>S.type==="pb_target"),re=W.filter(S=>S.type==="volume_milestone"),X={push:[],pull:[],lower:[],core:[]};L.forEach(S=>{const C=S.group||OM(S.exercise);X[C]&&X[C].push(S)});const he=Ep.find(S=>B<S.threshold),ke=Ep.filter(S=>B>=S.threshold).pop()?.threshold||0,ze=he?(B-ke)/(he.threshold-ke):1;if(a||g)return i.jsxs("div",{className:"ach-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsx("div",{className:"ach-loading-inline",children:i.jsx("div",{className:"cb-loading-spinner"})})]});const Ae=W.length,I=Ae>0||B>0;return i.jsxs("div",{className:"ach-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"ach-main",children:[i.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),i.jsxs("div",{className:"ach-stats-banner",children:[i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:Ae}),i.jsx("span",{className:"ach-stat-label",children:Ae===1?"Badge":"Badges"})]}),i.jsx("div",{className:"ach-stat-divider"}),i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:VM(B)}),i.jsxs("span",{className:"ach-stat-label",children:[BM(B)," lifted"]})]}),i.jsx("div",{className:"ach-stat-divider"}),i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:Object.keys(k).length}),i.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!I&&i.jsxs("div",{className:"ach-empty",children:[i.jsx("div",{className:"ach-empty-icon",children:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[i.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),i.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),i.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),i.jsx("h4",{children:"No achievements yet"}),i.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),i.jsxs("div",{className:"ach-section",children:[i.jsxs("h3",{className:"ach-section-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),i.jsxs("div",{className:"ach-volume-hero",children:[i.jsxs("div",{className:"ach-volume-ring",children:[i.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:dl.map((S,C)=>{const D=C<Math.round(ze*60);return i.jsx("line",{x1:S.x1,y1:S.y1,x2:S.x2,y2:S.y2,className:D?"ach-tick-filled":"ach-tick-empty",strokeWidth:S.thick?"3":"2"},C)})}),i.jsxs("div",{className:"ach-volume-center",children:[i.jsx("span",{className:"ach-volume-number",children:Math.round(B).toLocaleString()}),i.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),he&&i.jsxs("div",{className:"ach-volume-next",children:["Next: ",i.jsx("strong",{children:he.label})," (",(he.threshold-B).toLocaleString(),"kg to go)"]})]}),i.jsx("div",{className:"ach-milestone-shelf",children:Ep.map((S,C)=>{const D=B>=S.threshold,M=re.find(H=>H.milestone===S.threshold);return i.jsxs("div",{className:`ach-milestone ${D?"unlocked":"locked"}`,children:[i.jsx("div",{className:"ach-milestone-hex",children:i.jsx("span",{className:"ach-milestone-icon",children:S.icon})}),i.jsx("span",{className:"ach-milestone-label",children:S.label}),M?.achievedAt&&i.jsx("span",{className:"ach-milestone-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},C)})})]}),i.jsxs("div",{className:"ach-section",children:[i.jsxs("h3",{className:"ach-section-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),L.length===0?i.jsx("div",{className:"ach-pb-empty",children:i.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",i.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(X).map(([S,C])=>{if(C.length===0)return null;const D=LM[S];return i.jsxs("div",{className:"ach-group",children:[i.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:D.color},children:[i.jsx("span",{className:"ach-group-label",style:{color:D.color},children:D.label}),i.jsx("span",{className:"ach-group-count",children:C.length})]}),i.jsx("div",{className:"ach-badge-grid",children:C.map((M,H)=>i.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${H*.06}s`,"--group-color":D.color},children:[i.jsx("div",{className:"ach-badge-hex",style:{borderColor:D.color,boxShadow:`0 0 12px ${D.color}33`},children:i.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:D.color,strokeWidth:"2",strokeLinecap:"round",children:i.jsx("path",{d:D.icon})})}),i.jsxs("div",{className:"ach-badge-info",children:[i.jsx("span",{className:"ach-badge-exercise",children:M.exercise}),i.jsxs("span",{className:"ach-badge-value",style:{color:D.color},children:[M.targetWeight,"kg"]}),M.achievedAt&&i.jsx("span",{className:"ach-badge-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},H))})]},S)})]})]}),i.jsx(jl,{active:"home"})]})}const Gh=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function zM(s){const e=new Date(s),n=e.getDay(),a=n===0?-6:1-n;return e.setDate(e.getDate()+a),e.setHours(0,0,0,0),e}function kp(s){return s.toISOString().split("T")[0]}function FM(s){return Array.from({length:7},(e,n)=>{const a=new Date(s);return a.setDate(s.getDate()+n),a})}function HM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=la(),{isDark:o,toggleTheme:u,accent:d}=Vi(),p=Ws(),[g,y]=x.useState({}),[w,T]=x.useState(!0),[k,P]=x.useState(!1),[W,B]=x.useState(0),[L,re]=x.useState(null),[X,he]=x.useState(null),[ke,ze]=x.useState(!1),Ae=x.useRef([]),I=x.useRef([]),S=x.useCallback((G,ge="info")=>{re({message:G,type:ge}),setTimeout(()=>re(null),3e3)},[]),C=new Date,D=kp(C),M=zM(C),H=FM(M),A=["M","T","W","T","F","S","S"];x.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),x.useEffect(()=>{if(!s||!n)return;(async()=>{try{const ge=xs(tt,"habitLogs"),Se=qs(ge,Rs("clientId","==",n.id)),Ve=await $s(Se),Me={};Ve.docs.forEach(pt=>{const Wt=pt.data();Me[Wt.date]={...Wt,_id:pt.id}}),y(Me);let nt=0;const ht=new Date(C);for(;;){const pt=kp(ht),Wt=Me[pt];if(Wt)if(Object.values(Wt.habits||{}).filter(Boolean).length>=3)nt++,ht.setDate(ht.getDate()-1);else break;else if(pt===D)ht.setDate(ht.getDate()-1);else break}B(nt)}catch(ge){console.error("Error loading habit logs:",ge)}finally{T(!1)}})()},[s,n]);const We=g[D]||{habits:{}},jt=async G=>{if(!s||k)return;const ge=We.habits?.[G]||!1;ge||(Ae.current=[...Array(10)].map((Se,Ve)=>{const Me=Ve/10*2*Math.PI,nt=18+Math.random()*20;return{tx:Math.cos(Me)*nt,ty:Math.sin(Me)*nt,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),he(G),setTimeout(()=>he(null),700)),P(!0);try{const Se=We.habits||{},Ve={...Se,[G]:!Se[G]},Me=We._id||`${n.id}_${D}`;await Wn(Tt(tt,"habitLogs",Me),{clientId:n.id,date:D,habits:Ve}),y(ht=>({...ht,[D]:{clientId:n.id,date:D,habits:Ve,_id:Me}})),Object.values(Ve).filter(Boolean).length===Gh.length&&!ge&&(I.current=[...Array(50)].map((ht,pt)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][pt%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{ze(!0),setTimeout(()=>ze(!1),3500)},500))}catch(Se){console.error("Error saving habit:",Se),S("Failed to save. Try again.","error")}finally{P(!1)}},Y=H.map(G=>{const ge=kp(G),Se=g[ge],Ve=Se?Object.values(Se.habits||{}).filter(Boolean).length:0;return{date:G,dateStr:ge,completed:Ve,total:Gh.length}}),Te=Y.reduce((G,ge)=>G+ge.completed,0),De=Y.reduce((G,ge)=>G+ge.total,0),ct=De>0?Math.round(Te/De*100):0,rt=Object.values(We.habits||{}).filter(Boolean).length,V=Math.round(rt/Gh.length*100);return i.jsxs("div",{className:"cbc-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a||w?i.jsx("div",{className:"cbc-loading-inline",children:i.jsx("div",{className:"cbc-loading-spinner"})}):i.jsxs("main",{className:"cbc-main",children:[i.jsxs("div",{className:"cbc-ring-section",children:[i.jsxs("div",{className:"cbc-progress-ring",children:[i.jsxs("svg",{viewBox:"0 0 200 200",children:[i.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),i.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-V/100*2*Math.PI*80})]}),i.jsxs("div",{className:"cbc-ring-center",children:[i.jsxs("span",{className:"cbc-ring-pct",children:[V,"%"]}),i.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),i.jsxs("div",{className:"cbc-streak",children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),i.jsx("span",{className:"cbc-streak-count",children:W}),i.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),i.jsxs("div",{className:"cbc-section",children:[i.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),i.jsx("div",{className:"cbc-habits",children:Gh.map(G=>{const ge=We.habits?.[G.key]||!1,Se=X===G.key;return i.jsxs("button",{className:`cbc-habit-btn cbc-habit-${G.key} ${ge?"cbc-habit-done":""} ${Se?"cbc-habit-just-checked":""}`,onClick:()=>jt(G.key),disabled:k,children:[i.jsx("div",{className:"cbc-habit-check",children:ge?i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${Se?"cbc-check-animate":""}`})}):i.jsx("div",{className:"cbc-habit-circle"})}),Se&&i.jsx("div",{className:"cbc-particles",children:Ae.current.map((Ve,Me)=>i.jsx("span",{className:"cbc-particle",style:{"--tx":`${Ve.tx}px`,"--ty":`${Ve.ty}px`,"--size":`${Ve.size}px`,animationDuration:`${Ve.duration}s`}},Me))}),i.jsx("div",{className:`cbc-habit-icon cbc-icon-${G.key}`,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:i.jsx("path",{d:G.icon})})}),i.jsx("span",{className:"cbc-habit-label",children:G.label})]},G.key)})})]}),i.jsxs("div",{className:"cbc-section",children:[i.jsx("h2",{className:"cbc-section-title",children:"This Week"}),i.jsx("div",{className:"cbc-week-grid",children:Y.map((G,ge)=>{const Se=G.dateStr===D,Ve=G.total>0?G.completed/G.total:0,Me=38,nt=2*Math.PI*Me,ht=nt-Ve*nt;return i.jsxs("div",{className:`cbc-day-ring ${Se?"cbc-day-today":""} ${G.completed>0?"cbc-day-active":""}`,children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Me}),i.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Me,strokeDasharray:nt,strokeDashoffset:ht})]}),i.jsx("span",{className:"cbc-day-label",children:A[ge]}),i.jsxs("span",{className:"cbc-day-count",children:[G.completed,"/",G.total]})]},ge)})}),i.jsxs("div",{className:"cbc-week-summary",children:[i.jsx("div",{className:"cbc-week-summary-bar",children:i.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${ct}%`}})}),i.jsxs("span",{className:"cbc-week-summary-text",children:[Te," / ",De," habits this week (",ct,"%)"]})]})]})]}),i.jsx(jl,{active:"home"}),ke&&i.jsxs("div",{className:"cbc-celebration",onClick:()=>ze(!1),children:[i.jsx("div",{className:"cbc-confetti-container",children:I.current.map((G,ge)=>i.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${G.x}%`,"--delay":`${G.delay}s`,"--color":G.color,"--drift":`${G.drift}px`,"--spin":`${G.spin}deg`,"--duration":`${G.duration}s`,width:`${G.width}px`,height:`${G.height}px`}},ge))}),i.jsxs("div",{className:"cbc-celebration-card",children:[i.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),i.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),i.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),L&&i.jsx("div",{className:`toast-notification ${L.type}`,children:L.message})]})}const Rr=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],ol=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function qM(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Cr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function $M(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function WM(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function Kh(s,e){if(!e)return"-";switch(s.unit){case"weight":return WM(e.weight,e.reps);case"time":return $M(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function ho(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function Sp(s,e){return!e||e===0?null:(s-e)/e*100}function GM({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return i.jsx("div",{className:"pb-trend-empty",children:i.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(B=>{const L=B.benchmarks?.[e];if(!L)return 0;switch(n){case"weight":return(L.weight||0)*(L.reps||0);case"time":return L.time||0;case"reps":return L.reps||0;case"distance":return L.distance||0;default:return 0}}),o=Math.max(...a),u=Math.min(...a),d=o-u||1,p=300,g=100,y=20,w=p-y*2,T=g-y*2,k=a.map((B,L)=>{const re=y+L/(a.length-1)*w,X=y+T-(B-u)/d*T;return{x:re,y:X,value:B}}),P=k.map((B,L)=>`${L===0?"M":"L"} ${B.x} ${B.y}`).join(" "),W=P+` L ${k[k.length-1].x} ${y+T} L ${k[0].x} ${y+T} Z`;return i.jsxs("div",{className:"pb-trend-chart",children:[i.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),i.jsx("path",{d:W,fill:"url(#trendGradientJr)"}),i.jsx("path",{d:P,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),k.map((B,L)=>i.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},L))]}),i.jsx("div",{className:"pb-trend-labels",children:s.map((B,L)=>i.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},L))})]})}function KM(){const[s,e]=x.useState("bests"),[n,a]=x.useState([]),[o,u]=x.useState(!0),[d,p]=x.useState(!1),[g,y]=x.useState(0),[w,T]=x.useState(!1),[k,P]=x.useState(!1),[W,B]=x.useState(!1),[L,re]=x.useState({}),[X,he]=x.useState({}),[ke,ze]=x.useState({}),[Ae,I]=x.useState({}),[S,C]=x.useState({}),[D,M]=x.useState(!1),[H,A]=x.useState({}),[We,jt]=x.useState([]),[Y,Te]=x.useState(null),[De,ct]=x.useState(null),[rt,V]=x.useState(!1),[G,ge]=x.useState(""),[Se,Ve]=x.useState(""),Me=x.useRef(null),nt=x.useRef(0),ht=x.useRef(0),pt=x.useRef("right"),Wt=x.useCallback(z=>{y(ue=>{const fe=Math.max(0,Math.min(Rr.length-1,z));return fe===ue?ue:(pt.current=fe>ue?"right":"left",fe)})},[]),{currentUser:pn,isClient:Rt,clientData:wt,loading:ne}=la(),{isDark:gn}=Vi(),zt=Ws(),vt=x.useCallback((z,ue="info")=>{ct({message:z,type:ue}),setTimeout(()=>ct(null),4e3)},[]);x.useEffect(()=>{!ne&&(!pn||!Rt)&&zt("/")},[pn,Rt,ne,zt]),x.useEffect(()=>{wt&&Ct()},[wt]);const Ct=async()=>{try{const z=qs(xs(tt,"juniorPBs"),Rs("clientId","==",wt.id)),fe=(await $s(z)).docs.map(Ye=>({id:Ye.id,...Ye.data()}));fe.sort((Ye,lt)=>Ye.month.localeCompare(lt.month)),a(fe);const pe=qs(xs(tt,"juniorPBTargets"),Rs("clientId","==",wt.id)),ce=await $s(pe);if(!ce.empty){const Ye=ce.docs[0].data();ze(Ye.targets||{}),I(Ye.metricTargets||{}),C(Ye.targets||{}),A(Ye.metricTargets||{})}const Be=qs(xs(tt,"juniorAchievements"),Rs("clientId","==",wt.id)),ut=await $s(Be);ut.empty||jt(ut.docs[0].data().badges||[])}catch(z){console.error("Error fetching junior personal bests:",z)}u(!1)},at=qM(),He=n.find(z=>z.month===at),Gt=n.filter(z=>z.month<at),ns=Gt.length>0?Gt[Gt.length-1]:null;x.useEffect(()=>{He?(re(He.benchmarks||{}),he(He.bodyMetrics||{})):(re({}),he({}))},[He?.id]);const At=async(z,ue)=>{const fe=[];if(z==="strength"?Rr.forEach(pe=>{const ce=ke[pe.key];if(!ce)return;const Be=ue[pe.key];if(!Be)return;let ut;if(ce.targetType==="time"){if(!ce.targetValue)return;const Ye=ce.startValue||0,lt=Be.time||0,dt=ce.targetValue-Ye;ut=dt===0?lt>=ce.targetValue?1:0:Math.max(0,(lt-Ye)/dt)}else if(ce.targetType==="reps"){if(!ce.targetReps)return;const Ye=ce.startReps||0,lt=Be.reps||0,dt=ce.targetReps-Ye;ut=dt===0?lt>=ce.targetReps?1:0:Math.max(0,(lt-Ye)/dt)}else if(ce.targetType==="distance"){if(!ce.targetDistance)return;const Ye=ce.startDistance||0,lt=Be.distance||0,dt=ce.targetDistance-Ye;ut=dt===0?lt>=ce.targetDistance?1:0:Math.max(0,(lt-Ye)/dt)}else{if(!ce.targetWeight&&!ce.targetReps)return;const Ye=(ce.startWeight||0)*(ce.startReps||0),lt=(ce.targetWeight||0)*(ce.targetReps||0),dt=(Be.weight||0)*(Be.reps||0),rn=lt-Ye;ut=rn===0?dt>=lt?1:0:Math.max(0,(dt-Ye)/rn)}if(ut>=1){let Ye,lt;ce.targetType==="time"?(Ye=We.some(dt=>dt.type==="strength"&&dt.key===pe.key&&dt.targetValue===ce.targetValue),lt=`${pe.name} ${ce.targetValue}s`):ce.targetType==="reps"?(Ye=We.some(dt=>dt.type==="strength"&&dt.key===pe.key&&dt.targetReps===ce.targetReps),lt=`${pe.name} ${ce.targetReps} reps`):ce.targetType==="distance"?(Ye=We.some(dt=>dt.type==="strength"&&dt.key===pe.key&&dt.targetDistance===ce.targetDistance),lt=`${pe.name} ${ce.targetDistance}cm`):(Ye=We.some(dt=>dt.type==="strength"&&dt.key===pe.key&&dt.targetWeight===ce.targetWeight&&dt.targetReps===ce.targetReps),lt=`${pe.name} ${ce.targetWeight}kg  ${ce.targetReps}`),Ye||fe.push({type:"strength",key:pe.key,...ce.targetType==="time"?{targetType:"time",targetValue:ce.targetValue}:ce.targetType==="reps"?{targetType:"reps",targetReps:ce.targetReps}:ce.targetType==="distance"?{targetType:"distance",targetDistance:ce.targetDistance}:{targetWeight:ce.targetWeight,targetReps:ce.targetReps},achievedMonth:at,label:lt})}}):ol.forEach(pe=>{const ce=Ae[pe.key];if(!ce||!ce.targetValue)return;const Be=ue[pe.key];if(Be==null)return;const ut=ce.startValue||0,Ye=ce.targetValue,lt=Ye-ut;(lt===0?Be===Ye?1:0:Math.max(0,(Be-ut)/lt))>=1&&(We.some(Es=>Es.type==="metric"&&Es.key===pe.key&&Es.targetValue===Ye)||fe.push({type:"metric",key:pe.key,targetValue:Ye,achievedMonth:at,label:`${pe.name} ${Ye}${pe.suffix}`}))}),fe.length>0){const pe=[...We,...fe];await Wn(Tt(tt,"juniorAchievements",wt.id),{clientId:wt.id,badges:pe,updatedAt:ot.now()}),jt(pe),Te(fe),setTimeout(()=>Te(null),5e3)}},Bt=(z,ue)=>{if(z==="strength"){const fe=ke[ue];if(!fe)return!1;switch(Rr.find(ce=>ce.key===ue)?.unit){case"time":return We.some(ce=>ce.type==="strength"&&ce.key===ue&&ce.targetValue===fe.targetValue);case"reps":return We.some(ce=>ce.type==="strength"&&ce.key===ue&&ce.targetReps===fe.targetReps);case"distance":return We.some(ce=>ce.type==="strength"&&ce.key===ue&&ce.targetDistance===fe.targetDistance);default:return!fe.targetWeight&&!fe.targetReps?!1:We.some(ce=>ce.type==="strength"&&ce.key===ue&&ce.targetWeight===fe.targetWeight&&ce.targetReps===fe.targetReps)}}else{const fe=Ae[ue];return!fe||!fe.targetValue?!1:We.some(pe=>pe.type==="metric"&&pe.key===ue&&pe.targetValue===fe.targetValue)}},Dn=async()=>{p(!0);try{const z=`${wt.id}_${at}`,ue=He||{};await Wn(Tt(tt,"juniorPBs",z),{clientId:wt.id,month:at,benchmarks:L,bodyMetrics:ue.bodyMetrics||X||{},createdAt:ue.createdAt||ot.now(),updatedAt:ot.now()}),await At("strength",L),vt("Benchmarks saved!","success"),T(!1),await Ct()}catch(z){console.error("Error saving benchmarks:",z),vt("Failed to save. Please try again.","error")}p(!1)},Ht=async()=>{p(!0);try{const z=`${wt.id}_${at}`,ue=He||{};await Wn(Tt(tt,"juniorPBs",z),{clientId:wt.id,month:at,benchmarks:ue.benchmarks||L||{},bodyMetrics:X,createdAt:ue.createdAt||ot.now(),updatedAt:ot.now()}),await At("metric",X),vt("Body metrics saved!","success"),P(!1),await Ct()}catch(z){console.error("Error saving metrics:",z),vt("Failed to save. Please try again.","error")}p(!1)},wn=(z,ue,fe)=>{re(pe=>({...pe,[z]:{...pe[z],[ue]:fe===""?"":parseFloat(fe)}}))},de=(z,ue)=>{he(fe=>({...fe,[z]:ue===""?"":parseFloat(ue)}))},ve=(z,ue,fe)=>{C(pe=>({...pe,[z]:{...pe[z],[ue]:fe===""?"":parseFloat(fe)}}))},Ne=async()=>{p(!0);try{const z=`targets_${wt.id}`,ue=He?.benchmarks||{},fe={};Rr.forEach(pe=>{const ce=ue[pe.key];switch(pe.unit){case"time":S[pe.key]?.targetValue&&(fe[pe.key]={targetType:"time",targetValue:S[pe.key].targetValue,startValue:ce?.time||0});break;case"reps":S[pe.key]?.targetReps&&(fe[pe.key]={targetType:"reps",targetReps:S[pe.key].targetReps,startReps:ce?.reps||0});break;case"distance":S[pe.key]?.targetDistance&&(fe[pe.key]={targetType:"distance",targetDistance:S[pe.key].targetDistance,startDistance:ce?.distance||0});break;default:(S[pe.key]?.targetWeight||S[pe.key]?.targetReps)&&(fe[pe.key]={targetWeight:S[pe.key].targetWeight||0,targetReps:S[pe.key].targetReps||0,startWeight:ce?.weight||0,startReps:ce?.reps||0})}}),await Wn(Tt(tt,"juniorPBTargets",z),{clientId:wt.id,targets:fe,metricTargets:Ae,updatedAt:ot.now()}),ze(fe),C(fe),vt("Targets saved!","success"),B(!1)}catch(z){console.error("Error saving targets:",z),vt("Failed to save targets.","error")}p(!1)},Qe=(z,ue)=>{A(fe=>({...fe,[z]:{...fe[z],targetValue:ue===""?"":parseFloat(ue)}}))},qe=async()=>{p(!0);try{const z=`targets_${wt.id}`,ue={};ol.forEach(fe=>{if(H[fe.key]?.targetValue){const pe=He?.bodyMetrics?.[fe.key]||0;ue[fe.key]={targetValue:H[fe.key].targetValue,startValue:pe}}}),await Wn(Tt(tt,"juniorPBTargets",z),{clientId:wt.id,targets:ke,metricTargets:ue,updatedAt:ot.now()}),I(ue),A(ue),vt("Metric targets saved!","success"),M(!1)}catch(z){console.error("Error saving metric targets:",z),vt("Failed to save targets.","error")}p(!1)},Pe=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const z=Tt(tt,"juniorPBTargets",`targets_${wt.id}`);await oy(z),ze({}),I({}),C({}),A({}),vt("All goals have been reset","success")}catch(z){console.error("Error resetting targets:",z),vt("Failed to reset goals","error")}p(!1)}},Ge=(z,ue)=>{const fe=ke[z];if(!fe||!ue)return null;if(fe.targetType==="time"){if(!fe.targetValue)return null;const Ye=fe.startValue||0,lt=fe.targetValue,dt=ue.time||0,rn=lt-Ye;return rn<=0?dt>=lt?1:0:Math.max(0,Math.min((dt-Ye)/rn,1))}if(fe.targetType==="reps"){if(!fe.targetReps)return null;const Ye=fe.startReps||0,lt=fe.targetReps,dt=ue.reps||0,rn=lt-Ye;return rn<=0?dt>=lt?1:0:Math.max(0,Math.min((dt-Ye)/rn,1))}if(fe.targetType==="distance"){if(!fe.targetDistance)return null;const Ye=fe.startDistance||0,lt=fe.targetDistance,dt=ue.distance||0,rn=lt-Ye;return rn<=0?dt>=lt?1:0:Math.max(0,Math.min((dt-Ye)/rn,1))}if(!fe.targetWeight&&!fe.targetReps)return null;const pe=(fe.startWeight||0)*(fe.startReps||0),ce=(fe.targetWeight||0)*(fe.targetReps||0),Be=(ue.weight||0)*(ue.reps||0),ut=ce-pe;return ut<=0?Be>=ce?1:0:Math.max(0,Math.min((Be-pe)/ut,1))},Ue=z=>{const ue=Ae[z];if(!ue||!ue.targetValue)return null;const fe=He?.bodyMetrics?.[z];if(fe==null)return null;const pe=ue.startValue||0,ce=ue.targetValue,Be=ce-pe;return Be===0?fe===ce?1:0:Math.max(0,Math.min((fe-pe)/Be,1))},Ie=z=>{nt.current=z.touches[0].clientX,ht.current=0},we=z=>{ht.current=z.touches[0].clientX-nt.current},Ke=()=>{ht.current<-50?Wt(g+1):ht.current>50&&Wt(g-1),ht.current=0},st=z=>{const ue=He?.bodyMetrics?.[z],fe=ns?.bodyMetrics?.[z];return ue==null||fe==null?null:parseFloat((ue-fe).toFixed(2))},_t=n.find(z=>z.month===G),qt=n.find(z=>z.month===Se);if(ne||o)return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsxs("main",{className:"pb-main",children:[i.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),i.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!pn||!Rt||!wt)return null;const Fe=Rr[g],xt=He?.benchmarks?.[Fe.key],St=ns?.benchmarks?.[Fe.key],Dt=ho(Fe,xt),Ft=ho(Fe,St),bt=Sp(Dt,Ft),nn=Ge(Fe.key,xt),$t=nn!==null,sn=nn!==null&&nn>=1,on=$t?Math.round(nn*60):Dt>0?15:0,un=ke[Fe.key],Nn=z=>z?z.targetType==="time"?`${z.startValue||0}s  ${z.targetValue}s`:z.targetType==="reps"?`${z.startReps||0}  ${z.targetReps} reps`:z.targetType==="distance"?`${z.startDistance||0}  ${z.targetDistance}cm`:`${z.startWeight||0}kg${z.startReps||0}  ${z.targetWeight}kg${z.targetReps}`:null;return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>zt("/client"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsxs("main",{className:"pb-main page-transition-enter",children:[i.jsxs("div",{className:"pb-intro",children:[i.jsx("h2",{children:"Junior Strength Tests"}),i.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),i.jsxs("div",{className:"pb-tabs",children:[i.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),i.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),i.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&i.jsxs("div",{className:"pb-strength-section",children:[!w&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-carousel",ref:Me,onTouchStart:Ie,onTouchMove:we,onTouchEnd:Ke,children:[i.jsx("div",{className:`pb-ring-container slide-from-${pt.current}`,children:i.jsxs("div",{className:"pb-ring",children:[i.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:by.map((z,ue)=>{const fe=ue<Math.round(on);return i.jsx("line",{x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,className:`pb-ring-tick ${fe?sn?"hit":"filled":"empty"}`,strokeWidth:z.thick?"3":"2"},ue)})}),i.jsxs("div",{className:"pb-ring-center",children:[i.jsx("div",{className:"pb-ring-category",children:Fe.category}),i.jsxs("div",{className:"pb-ring-exercise",children:[Fe.name,Bt("strength",Fe.key)&&i.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),i.jsx("div",{className:"pb-ring-value",children:xt?Kh(Fe,xt):"-"}),bt!==null&&i.jsxs("div",{className:`pb-ring-change ${bt>=0?"positive":"negative"}`,children:[bt>=0?"+":"",bt.toFixed(1),"%"]}),bt===null&&xt&&i.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),un&&i.jsx("div",{className:`pb-ring-target ${sn?"hit":""}`,children:sn?"Target hit!":Nn(un)}),!un&&i.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),i.jsx("div",{className:"pb-carousel-dots",children:Rr.map((z,ue)=>i.jsx("button",{className:`pb-dot ${ue===g?"active":""}`,onClick:()=>Wt(ue)},ue))}),i.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Wt(g-1),disabled:g===0,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),i.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Wt(g+1),disabled:g===Rr.length-1,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),i.jsxs("div",{className:"pb-trend-section",children:[i.jsx("h4",{children:"Trend"}),i.jsx(GM,{data:n,exerciseKey:Fe.key,unit:Fe.unit})]})]}),!w&&!W&&i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:He?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(ke).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ke).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Pe,disabled:d,children:"Reset All Goals"})]}),w&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Benchmarks - ",Cr(at)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),re(He?.benchmarks||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:Rr.map(z=>i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),z.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:L[z.key]?.weight??"",onChange:ue=>wn(z.key,"weight",ue.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",value:L[z.key]?.reps??"",onChange:ue=>wn(z.key,"reps",ue.target.value),placeholder:"0"})]})]}):z.unit==="reps"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Reps (max in 1 min)"}),i.jsx("input",{type:"number",value:L[z.key]?.reps??"",onChange:ue=>wn(z.key,"reps",ue.target.value),placeholder:"0"})]})}):z.unit==="distance"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Distance (cm)"}),i.jsx("input",{type:"number",step:"0.5",value:L[z.key]?.distance??"",onChange:ue=>wn(z.key,"distance",ue.target.value),placeholder:"0"})]})}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Time (seconds)"}),i.jsx("input",{type:"number",step:"0.01",value:L[z.key]?.time??"",onChange:ue=>wn(z.key,"time",ue.target.value),placeholder:"0"})]})})]},z.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),re(He?.benchmarks||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Dn,disabled:d,children:d?"Saving...":"Save"})]})]}),W&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Set Your Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),C(ke)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Rr.map(z=>{const ue=He?.benchmarks?.[z.key];let fe="-";if(ue)switch(z.unit){case"weight":(ue.weight||ue.reps)&&(fe=`${ue.weight||0}kg  ${ue.reps||0}`);break;case"time":ue.time&&(fe=`${ue.time}s`);break;case"reps":ue.reps&&(fe=`${ue.reps} reps`);break;case"distance":ue.distance&&(fe=`${ue.distance} cm`);break}return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",fe]})]}),z.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:S[z.key]?.targetWeight??"",onChange:pe=>ve(z.key,"targetWeight",pe.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Reps"}),i.jsx("input",{type:"number",value:S[z.key]?.targetReps??"",onChange:pe=>ve(z.key,"targetReps",pe.target.value),placeholder:"0"})]})]}):z.unit==="reps"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target Reps (in 1 min)"}),i.jsx("input",{type:"number",value:S[z.key]?.targetReps??"",onChange:pe=>ve(z.key,"targetReps",pe.target.value),placeholder:"0"})]})}):z.unit==="distance"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target Distance (cm)"}),i.jsx("input",{type:"number",step:"0.5",value:S[z.key]?.targetDistance??"",onChange:pe=>ve(z.key,"targetDistance",pe.target.value),placeholder:"0"})]})}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target (seconds)"}),i.jsx("input",{type:"number",step:"1",value:S[z.key]?.targetValue??"",onChange:pe=>ve(z.key,"targetValue",pe.target.value),placeholder:"0"})]})})]},z.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),C(ke)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ne,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&i.jsxs("div",{className:"pb-metrics-section",children:[!k&&!D&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-metrics-card",children:[i.jsx("h3",{children:"Body Measurements"}),i.jsx("p",{className:"pb-metrics-month",children:Cr(at)}),i.jsx("div",{className:"pb-metrics-list",children:ol.map(z=>{const ue=He?.bodyMetrics?.[z.key],fe=st(z.key),pe=Ae[z.key],ce=Ue(z.key),Be=ce!==null&&ce>=1;return i.jsxs("div",{className:"pb-metric-row",children:[i.jsxs("div",{className:"pb-metric-top",children:[i.jsxs("div",{className:"pb-metric-left",children:[i.jsxs("span",{className:"pb-metric-name",children:[z.name,Bt("metric",z.key)&&i.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),pe&&i.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",pe.targetValue," ",z.suffix]})]}),i.jsxs("div",{className:"pb-metric-values",children:[i.jsx("span",{className:"pb-metric-current",children:ue!=null?`${ue} ${z.suffix}`:"-"}),fe!==null&&i.jsxs("span",{className:`pb-metric-change ${fe>0?"up":fe<0?"down":"same"}`,children:[fe>0?"+":"",fe," ",z.suffix]})]})]}),ce!==null&&i.jsxs("div",{className:"pb-metric-progress",children:[i.jsx("div",{className:"pb-metric-bar",children:i.jsx("div",{className:`pb-metric-bar-fill ${Be?"hit":""}`,style:{width:`${Math.round(ce*100)}%`}})}),i.jsx("span",{className:`pb-metric-percent ${Be?"hit":""}`,children:Be?"Hit!":`${Math.round(ce*100)}%`})]})]},z.key)})})]}),i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>P(!0),children:He?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ke).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Pe,disabled:d,children:"Reset All Goals"})]})]}),k&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Measurements - ",Cr(at)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{P(!1),he(He?.bodyMetrics||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:ol.map(z=>i.jsx("div",{className:"pb-edit-metric",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:[z.name," (",z.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:X[z.key]??"",onChange:ue=>de(z.key,ue.target.value),placeholder:"0"})]})},z.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{P(!1),he(He?.bodyMetrics||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ht,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Body Metric Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),A(Ae)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),ol.map(z=>{const ue=He?.bodyMetrics?.[z.key];return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ue!=null?`${ue} ${z.suffix}`:"-"]})]}),i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:["Target (",z.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:H[z.key]?.targetValue??"",onChange:fe=>Qe(z.key,fe.target.value),placeholder:"0"})]})})]},z.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),A(Ae)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:qe,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&i.jsx("div",{className:"pb-history-section",children:n.length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("h4",{children:"No records yet"}),i.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):i.jsxs(i.Fragment,{children:[We.length>0&&i.jsxs("div",{className:"pb-achievements-wall",children:[i.jsxs("h4",{className:"pb-achievements-wall-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),i.jsx("div",{className:"pb-achievements-list",children:[...We].reverse().map((z,ue)=>i.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ue*.05}s`},children:[i.jsx("div",{className:"pb-achievement-star",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("div",{className:"pb-achievement-info",children:[i.jsx("span",{className:"pb-achievement-label",children:z.label}),i.jsx("span",{className:"pb-achievement-date",children:Cr(z.achievedMonth)})]})]},ue))})]}),i.jsx("div",{className:"pb-history-controls",children:i.jsx("button",{className:`pb-compare-toggle ${rt?"active":""}`,onClick:()=>{V(!rt),!rt&&n.length>=2&&(ge(n[0].month),Ve(n[n.length-1].month))},children:rt?"Back to Timeline":"Compare Months"})}),rt?i.jsxs("div",{className:"pb-compare",children:[i.jsxs("div",{className:"pb-compare-selectors",children:[i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"From"}),i.jsx("select",{value:G,onChange:z=>ge(z.target.value),children:n.map(z=>i.jsx("option",{value:z.month,children:Cr(z.month)},z.month))})]}),i.jsx("div",{className:"pb-compare-vs",children:"vs"}),i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"To"}),i.jsx("select",{value:Se,onChange:z=>Ve(z.target.value),children:n.map(z=>i.jsx("option",{value:z.month,children:Cr(z.month)},z.month))})]})]}),_t&&qt&&i.jsxs("div",{className:"pb-compare-results",children:[i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Strength Tests"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Exercise"}),i.jsx("span",{children:Cr(G).split(" ")[0]}),i.jsx("span",{children:Cr(Se).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),Rr.map(z=>{const ue=_t.benchmarks?.[z.key],fe=qt.benchmarks?.[z.key],pe=ho(z,ue),ce=ho(z,fe),Be=Sp(ce,pe);return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:z.name}),i.jsx("span",{className:"pb-compare-val",children:ue?Kh(z,ue):"-"}),i.jsx("span",{className:"pb-compare-val",children:fe?Kh(z,fe):"-"}),i.jsx("span",{className:`pb-compare-change ${Be!==null?Be>=0?"positive":"negative":""}`,children:Be!==null?`${Be>=0?"+":""}${Be.toFixed(1)}%`:"-"})]},z.key)})]})]}),i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Body Measurements"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Measurement"}),i.jsx("span",{children:Cr(G).split(" ")[0]}),i.jsx("span",{children:Cr(Se).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),ol.map(z=>{const ue=_t.bodyMetrics?.[z.key],fe=qt.bodyMetrics?.[z.key],pe=ue!=null&&fe!=null?parseFloat((fe-ue).toFixed(2)):null;return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:z.name}),i.jsx("span",{className:"pb-compare-val",children:ue!=null?`${ue}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:fe!=null?`${fe}`:"-"}),i.jsx("span",{className:`pb-compare-change ${pe!==null?pe>0?"positive":pe<0?"negative":"neutral":""}`,children:pe!==null?`${pe>0?"+":""}${pe} ${z.suffix}`:"-"})]},z.key)})]})]})]})]}):i.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((z,ue)=>{const fe=n.filter(pe=>pe.month<z.month).pop();return i.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ue*.05}s`},children:[i.jsx("div",{className:"pb-timeline-dot"}),i.jsxs("div",{className:"pb-timeline-card",children:[i.jsx("h4",{children:Cr(z.month)}),z.benchmarks&&Object.keys(z.benchmarks).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Strength Tests"}),Rr.map(pe=>{const ce=z.benchmarks[pe.key];if(!ce)return null;const Be=fe?.benchmarks?.[pe.key],ut=ho(pe,ce),Ye=ho(pe,Be),lt=Sp(ut,Ye);return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:pe.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsx("span",{className:"pb-timeline-value",children:Kh(pe,ce)}),lt!==null&&i.jsxs("span",{className:`pb-timeline-change ${lt>=0?"positive":"negative"}`,children:[lt>=0?"+":"",lt.toFixed(1),"%"]})]})]},pe.key)})]}),z.bodyMetrics&&Object.keys(z.bodyMetrics).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Body Measurements"}),ol.map(pe=>{const ce=z.bodyMetrics[pe.key];if(ce==null)return null;const Be=fe?.bodyMetrics?.[pe.key],ut=Be!=null?parseFloat((ce-Be).toFixed(2)):null;return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:pe.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsxs("span",{className:"pb-timeline-value",children:[ce," ",pe.suffix]}),ut!==null&&i.jsxs("span",{className:`pb-timeline-change ${ut>0?"positive":ut<0?"negative":"neutral"}`,children:[ut>0?"+":"",ut," ",pe.suffix]})]})]},pe.key)})]})]})]},z.id)})})]})})]}),Y&&i.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Te(null),children:i.jsxs("div",{className:"pb-celebration-card",children:[i.jsx("div",{className:"pb-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),i.jsx("div",{className:"pb-celebration-badges",children:Y.map((z,ue)=>i.jsx("div",{className:"pb-celebration-badge",children:z.label},ue))}),i.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),De&&i.jsxs("div",{className:`toast-notification ${De.type}`,children:[i.jsx("span",{className:"toast-icon",children:De.type==="success"?i.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),i.jsx("span",{className:"toast-message",children:De.message}),i.jsx("button",{className:"toast-close",onClick:()=>ct(null),children:""})]}),i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:"block-nav-tab",onClick:()=>zt("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>zt("/client/forms"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),i.jsx("span",{children:"Forms"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>zt("/client/tools"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),i.jsx("span",{children:"Tools"})]}),i.jsxs("button",{className:"block-nav-tab active",children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"PBs"})]}),wt?.circuitAccess&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>zt("/client/circuit"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 6v6l4 2"})]}),i.jsx("span",{children:"Circuit"})]})]})]})}const Yr=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],cl=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function YM(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Ar(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function Yh(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function $w(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function fo(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Np(s,e){return!e||e===0?null:(s-e)/e*100}function QM({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return i.jsx("div",{className:"pb-trend-empty",children:i.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(B=>{const L=B.benchmarks?.[e];return L?n==="time"?L.time||0:(L.weight||0)*(L.reps||0):0}),o=Math.max(...a),u=Math.min(...a),d=o-u||1,p=300,g=100,y=20,w=p-y*2,T=g-y*2,k=a.map((B,L)=>{const re=y+L/(a.length-1)*w,X=y+T-(B-u)/d*T;return{x:re,y:X,value:B}}),P=k.map((B,L)=>`${L===0?"M":"L"} ${B.x} ${B.y}`).join(" "),W=P+` L ${k[k.length-1].x} ${y+T} L ${k[0].x} ${y+T} Z`;return i.jsxs("div",{className:"pb-trend-chart",children:[i.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),i.jsx("path",{d:W,fill:"url(#trendGradient)"}),i.jsx("path",{d:P,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),k.map((B,L)=>i.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},L))]}),i.jsx("div",{className:"pb-trend-labels",children:s.map((B,L)=>i.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},L))})]})}function XM(){const[s,e]=x.useState("bests"),[n,a]=x.useState([]),[o,u]=x.useState(!0),[d,p]=x.useState(!1),[g,y]=x.useState(0),[w,T]=x.useState(!1),[k,P]=x.useState(!1),[W,B]=x.useState(!1),[L,re]=x.useState({}),[X,he]=x.useState({}),[ke,ze]=x.useState({}),[Ae,I]=x.useState({}),[S,C]=x.useState({}),[D,M]=x.useState(!1),[H,A]=x.useState({}),[We,jt]=x.useState([]),[Y,Te]=x.useState(null),[De,ct]=x.useState(null),[rt,V]=x.useState(!1),[G,ge]=x.useState(""),[Se,Ve]=x.useState(""),[Me,nt]=x.useState({}),[ht,pt]=x.useState({}),[Wt,pn]=x.useState(null),[Rt,wt]=x.useState(null),[ne,gn]=x.useState(""),zt=x.useRef(null),vt=x.useRef(0),Ct=x.useRef(0),at=x.useRef("right"),He=x.useCallback(U=>{y(ie=>{const E=Math.max(0,Math.min(Yr.length-1,U));return E===ie?ie:(at.current=E>ie?"right":"left",E)})},[]),{currentUser:Gt,isClient:ns,clientData:At,loading:Bt}=la(),{isDark:Dn}=Vi(),Ht=Ws(),[wn]=gS(),de=wn.get("mode")==="corebuddy",ve=!de&&(!At?.clientType||At.clientType==="block"),Ne=x.useCallback((U,ie="info")=>{ct({message:U,type:ie}),setTimeout(()=>ct(null),4e3)},[]);x.useEffect(()=>{!Bt&&(!Gt||!ns)&&Ht("/")},[Gt,ns,Bt,Ht]),x.useEffect(()=>{At&&(ve?Qe():(async()=>{try{const[ie,E,R]=await Promise.all([Gn(Tt(tt,"coreBuddyPBs",At.id)),Gn(Tt(tt,"coreBuddyTargets",At.id)),Gn(Tt(tt,"coreBuddyAchievements",At.id))]);ie.exists()&&nt(ie.data().exercises||{}),E.exists()&&pt(E.data().targets||{}),R.exists()&&pn(R.data())}catch(ie){console.error("Error loading Core Buddy PBs:",ie)}u(!1)})())},[At]);const Qe=async()=>{try{const U=qs(xs(tt,"personalBests"),Rs("clientId","==",At.id)),E=(await $s(U)).docs.map(Ce=>({id:Ce.id,...Ce.data()}));E.sort((Ce,Re)=>Ce.month.localeCompare(Re.month)),a(E);const R=qs(xs(tt,"personalBestTargets"),Rs("clientId","==",At.id)),$=await $s(R);if(!$.empty){const Ce=$.docs[0].data();ze(Ce.targets||{}),I(Ce.metricTargets||{}),C(Ce.targets||{}),A(Ce.metricTargets||{})}const J=qs(xs(tt,"achievements"),Rs("clientId","==",At.id)),Le=await $s(J);Le.empty||jt(Le.docs[0].data().badges||[])}catch(U){console.error("Error fetching personal bests:",U)}u(!1)},qe=async()=>{if(!Rt||!ne||!At)return;const U=parseFloat(ne),ie=Me[Rt];if(!ie||U<=ie.weight){Ne("Target must be higher than current PB","error");return}p(!0);try{const E={...ht,[Rt]:{targetWeight:U,setAt:ot.now(),currentPBWhenSet:ie.weight}};await Wn(Tt(tt,"coreBuddyTargets",At.id),{clientId:At.id,targets:E,updatedAt:ot.now()}),pt(E),wt(null),gn(""),Ne("Target set!","success")}catch(E){console.error("Error saving target:",E),Ne("Failed to save target","error")}p(!1)},Pe=U=>{if(!Wt?.badges)return!1;const ie=ht[U];return ie?Wt.badges.some(E=>E.type==="pb_target"&&E.exercise===U&&E.targetWeight===ie.targetWeight):!1},Ge=U=>{const ie=ht[U];if(!ie)return null;const E=Me[U];if(!E)return 0;const R=ie.currentPBWhenSet||0,$=ie.targetWeight,J=$-R;return J<=0?E.weight>=$?1:0:Math.max(0,Math.min((E.weight-R)/J,1))},Ue=YM(),Ie=n.find(U=>U.month===Ue),we=n.filter(U=>U.month<Ue),Ke=we.length>0?we[we.length-1]:null;x.useEffect(()=>{Ie?(re(Ie.benchmarks||{}),he(Ie.bodyMetrics||{})):(re({}),he({}))},[Ie?.id]);const st=async(U,ie)=>{const E=[];if(U==="strength"?Yr.forEach(R=>{const $=ke[R.key];if(!$)return;const J=ie[R.key];if(!J)return;let Le;if($.targetType==="time"){if(!$.targetValue)return;const Ce=$.startValue||0,Re=J.time||0,Lt=$.targetValue-Ce;Le=Lt===0?Re>=$.targetValue?1:0:Math.max(0,(Re-Ce)/Lt)}else{if(!$.targetWeight&&!$.targetReps)return;const Ce=($.startWeight||0)*($.startReps||0),Re=($.targetWeight||0)*($.targetReps||0),Lt=(J.weight||0)*(J.reps||0),gt=Re-Ce;Le=gt===0?Lt>=Re?1:0:Math.max(0,(Lt-Ce)/gt)}if(Le>=1&&!($.targetType==="time"?We.some(Re=>Re.type==="strength"&&Re.key===R.key&&Re.targetValue===$.targetValue):We.some(Re=>Re.type==="strength"&&Re.key===R.key&&Re.targetWeight===$.targetWeight&&Re.targetReps===$.targetReps))){const Re=$.targetType==="time"?`${R.name} ${$.targetValue}s`:`${R.name} ${$.targetWeight}kg  ${$.targetReps}`;E.push({type:"strength",key:R.key,...$.targetType==="time"?{targetType:"time",targetValue:$.targetValue}:{targetWeight:$.targetWeight,targetReps:$.targetReps},achievedMonth:Ue,label:Re})}}):cl.forEach(R=>{const $=Ae[R.key];if(!$||!$.targetValue)return;const J=ie[R.key];if(J==null)return;const Le=$.startValue||0,Ce=$.targetValue,Re=Ce-Le;(Re===0?J===Ce?1:0:Math.max(0,(J-Le)/Re))>=1&&(We.some(q=>q.type==="metric"&&q.key===R.key&&q.targetValue===Ce)||E.push({type:"metric",key:R.key,targetValue:Ce,achievedMonth:Ue,label:`${R.name} ${Ce}${R.suffix}`}))}),E.length>0){const R=[...We,...E];await Wn(Tt(tt,"achievements",At.id),{clientId:At.id,badges:R,updatedAt:ot.now()}),jt(R),Te(E),setTimeout(()=>Te(null),5e3)}},_t=(U,ie)=>{if(U==="strength"){const E=ke[ie];return E?E.targetType==="time"?We.some(R=>R.type==="strength"&&R.key===ie&&R.targetValue===E.targetValue):!E.targetWeight&&!E.targetReps?!1:We.some(R=>R.type==="strength"&&R.key===ie&&R.targetWeight===E.targetWeight&&R.targetReps===E.targetReps):!1}else{const E=Ae[ie];return!E||!E.targetValue?!1:We.some(R=>R.type==="metric"&&R.key===ie&&R.targetValue===E.targetValue)}},qt=async()=>{p(!0);try{const U=`${At.id}_${Ue}`,ie=Ie||{};await Wn(Tt(tt,"personalBests",U),{clientId:At.id,month:Ue,benchmarks:L,bodyMetrics:ie.bodyMetrics||X||{},createdAt:ie.createdAt||ot.now(),updatedAt:ot.now()}),await st("strength",L),Ne("Benchmarks saved!","success"),T(!1),await Qe()}catch(U){console.error("Error saving benchmarks:",U),Ne("Failed to save. Please try again.","error")}p(!1)},Fe=async()=>{p(!0);try{const U=`${At.id}_${Ue}`,ie=Ie||{};await Wn(Tt(tt,"personalBests",U),{clientId:At.id,month:Ue,benchmarks:ie.benchmarks||L||{},bodyMetrics:X,createdAt:ie.createdAt||ot.now(),updatedAt:ot.now()}),await st("metric",X),Ne("Body metrics saved!","success"),P(!1),await Qe()}catch(U){console.error("Error saving metrics:",U),Ne("Failed to save. Please try again.","error")}p(!1)},xt=(U,ie,E)=>{re(R=>({...R,[U]:{...R[U],[ie]:E===""?"":parseFloat(E)}}))},St=(U,ie)=>{he(E=>({...E,[U]:ie===""?"":parseFloat(ie)}))},Dt=(U,ie,E)=>{C(R=>({...R,[U]:{...R[U],[ie]:E===""?"":parseFloat(E)}}))},Ft=async()=>{p(!0);try{const U=`targets_${At.id}`,ie=Ie?.benchmarks||{},E={};Yr.forEach(R=>{const $=ie[R.key];R.unit==="time"?S[R.key]?.targetValue&&(E[R.key]={targetType:"time",targetValue:S[R.key].targetValue,startValue:$?.time||0}):(S[R.key]?.targetWeight||S[R.key]?.targetReps)&&(E[R.key]={targetWeight:S[R.key].targetWeight||0,targetReps:S[R.key].targetReps||0,startWeight:$?.weight||0,startReps:$?.reps||0})}),await Wn(Tt(tt,"personalBestTargets",U),{clientId:At.id,targets:E,metricTargets:Ae,updatedAt:ot.now()}),ze(E),C(E),Ne("Targets saved!","success"),B(!1)}catch(U){console.error("Error saving targets:",U),Ne("Failed to save targets.","error")}p(!1)},bt=(U,ie)=>{A(E=>({...E,[U]:{...E[U],targetValue:ie===""?"":parseFloat(ie)}}))},nn=async()=>{p(!0);try{const U=`targets_${At.id}`,ie={};cl.forEach(E=>{if(H[E.key]?.targetValue){const R=Ie?.bodyMetrics?.[E.key]||0;ie[E.key]={targetValue:H[E.key].targetValue,startValue:R}}}),await Wn(Tt(tt,"personalBestTargets",U),{clientId:At.id,targets:ke,metricTargets:ie,updatedAt:ot.now()}),I(ie),A(ie),Ne("Metric targets saved!","success"),M(!1)}catch(U){console.error("Error saving metric targets:",U),Ne("Failed to save targets.","error")}p(!1)},$t=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const U=Tt(tt,"personalBestTargets",`targets_${At.id}`);await oy(U),ze({}),I({}),C({}),A({}),Ne("All goals have been reset","success")}catch(U){console.error("Error resetting targets:",U),Ne("Failed to reset goals","error")}p(!1)}},sn=(U,ie)=>{const E=ke[U];if(!E||!ie)return null;if(E.targetType==="time"){if(!E.targetValue)return null;const Ce=E.startValue||0,Re=E.targetValue,Lt=ie.time||0,gt=Re-Ce;return gt<=0?Lt>=Re?1:0:Math.max(0,Math.min((Lt-Ce)/gt,1))}if(!E.targetWeight&&!E.targetReps)return null;const R=(E.startWeight||0)*(E.startReps||0),$=(E.targetWeight||0)*(E.targetReps||0),J=(ie.weight||0)*(ie.reps||0),Le=$-R;return Le<=0?J>=$?1:0:Math.max(0,Math.min((J-R)/Le,1))},on=U=>{const ie=Ae[U];if(!ie||!ie.targetValue)return null;const E=Ie?.bodyMetrics?.[U];if(E==null)return null;const R=ie.startValue||0,$=ie.targetValue,J=$-R;return J===0?E===$?1:0:Math.max(0,Math.min((E-R)/J,1))},un=U=>{vt.current=U.touches[0].clientX,Ct.current=0},Nn=U=>{Ct.current=U.touches[0].clientX-vt.current},z=()=>{Ct.current<-50?He(g+1):Ct.current>50&&He(g-1),Ct.current=0},ue=U=>{const ie=Ie?.bodyMetrics?.[U],E=Ke?.bodyMetrics?.[U];return ie==null||E==null?null:parseFloat((ie-E).toFixed(2))},fe=n.find(U=>U.month===G),pe=n.find(U=>U.month===Se);if(Bt||o)return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsxs("main",{className:"pb-main",children:[i.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),i.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Gt||!ns||!At)return null;if(ve&&At?.isJunior)return i.jsx(KM,{});const ce=Yr[g],Be=Ie?.benchmarks?.[ce.key],ut=Ke?.benchmarks?.[ce.key],Ye=fo(ce,Be),lt=fo(ce,ut),dt=Np(Ye,lt),rn=sn(ce.key,Be),Es=rn!==null,Bn=rn!==null&&rn>=1,Hn=Es?Math.round(rn*60):Ye>0?15:0,hn=ke[ce.key];return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>Ht(de?"/client/core-buddy":"/client"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsxs("main",{className:"pb-main page-transition-enter",children:[i.jsxs("div",{className:"pb-intro",children:[i.jsx("h2",{children:"Personal Bests"}),i.jsx("p",{children:ve?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!ve&&i.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Me).length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("div",{className:"pb-cb-empty-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),i.jsx("h4",{children:"No personal bests yet"}),i.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):i.jsx("div",{className:"pb-cb-grid",children:Object.entries(Me).sort(([U],[ie])=>U.localeCompare(ie)).map(([U,ie],E)=>{const R=ht[U],$=Ge(U),J=$!==null&&$>=1,Le=Pe(U),Ce=$!==null?Math.round($*60):60;return i.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${E*.05}s`},children:[i.jsxs("div",{className:"pb-cb-card-ring",children:[i.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:uM.map((Re,Lt)=>{const gt=Lt<Ce;return i.jsx("line",{x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,className:`pb-ring-tick ${gt?J?"hit":"filled":"empty"}`,strokeWidth:Re.thick?"2":"1.5"},Lt)})}),i.jsx("div",{className:"pb-cb-ring-icon",children:Le?i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),i.jsxs("div",{className:"pb-cb-card-info",children:[i.jsx("h4",{className:"pb-cb-card-name",children:U}),i.jsxs("div",{className:"pb-cb-card-value",children:[ie.weight,"kg  ",ie.reps]}),ie.achievedAt&&i.jsx("div",{className:"pb-cb-card-date",children:(ie.achievedAt.toDate?ie.achievedAt.toDate():new Date(ie.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),R&&!J&&i.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",R.targetWeight,"kg (",Math.round(($||0)*100),"%)"]}),R&&J&&!Le&&i.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),Le&&i.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),i.jsx("div",{className:"pb-cb-card-action",children:R?J&&Le?i.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{wt(U),gn("")},children:i.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:i.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{wt(U),gn("")},children:i.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("circle",{cx:"12",cy:"12",r:"6"}),i.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},U)})}),Object.keys(Me).length>0&&i.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>Ht("/client/core-buddy/achievements"),children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",i.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),Rt&&i.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>wt(null),children:i.jsxs("div",{className:"pb-cb-target-modal",onClick:U=>U.stopPropagation(),children:[i.jsx("h3",{children:"Set Target"}),i.jsx("p",{className:"pb-cb-target-exercise-name",children:Rt}),i.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",i.jsxs("strong",{children:[Me[Rt]?.weight,"kg"]})]}),i.jsxs("div",{className:"pb-cb-target-input-wrap",children:[i.jsx("label",{children:"Your target (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:ne,onChange:U=>gn(U.target.value),placeholder:String((Me[Rt]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),i.jsxs("div",{className:"pb-cb-target-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>wt(null),children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:qe,disabled:d,children:d?"Saving...":"Set Target"})]})]})})]}),ve&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-tabs",children:[i.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),i.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),i.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&i.jsxs("div",{className:"pb-strength-section",children:[!w&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-carousel",ref:zt,onTouchStart:un,onTouchMove:Nn,onTouchEnd:z,children:[i.jsx("div",{className:`pb-ring-container slide-from-${at.current}`,children:i.jsxs("div",{className:"pb-ring",children:[i.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:by.map((U,ie)=>{const E=ie<Math.round(Hn);return i.jsx("line",{x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,className:`pb-ring-tick ${E?Bn?"hit":"filled":"empty"}`,strokeWidth:U.thick?"3":"2"},ie)})}),i.jsxs("div",{className:"pb-ring-center",children:[i.jsx("div",{className:"pb-ring-category",children:ce.category}),i.jsxs("div",{className:"pb-ring-exercise",children:[ce.name,_t("strength",ce.key)&&i.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),i.jsx("div",{className:"pb-ring-value",children:Be?ce.unit==="time"?Yh(Be.time):$w(Be.weight,Be.reps):"-"}),dt!==null&&i.jsxs("div",{className:`pb-ring-change ${dt>=0?"positive":"negative"}`,children:[dt>=0?"+":"",dt.toFixed(1),"%"]}),dt===null&&Be&&i.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),hn&&i.jsx("div",{className:`pb-ring-target ${Bn?"hit":""}`,children:Bn?"Target hit!":hn.targetType==="time"?`${hn.startValue||0}s  ${hn.targetValue}s`:`${hn.startWeight||0}kg${hn.startReps||0}  ${hn.targetWeight}kg${hn.targetReps}`}),!hn&&i.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),i.jsx("div",{className:"pb-carousel-dots",children:Yr.map((U,ie)=>i.jsx("button",{className:`pb-dot ${ie===g?"active":""}`,onClick:()=>He(ie)},ie))}),i.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>He(g-1),disabled:g===0,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),i.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>He(g+1),disabled:g===Yr.length-1,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),i.jsxs("div",{className:"pb-trend-section",children:[i.jsx("h4",{children:"Trend"}),i.jsx(QM,{data:n,exerciseKey:ce.key,unit:ce.unit})]})]}),!w&&!W&&i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:Ie?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(ke).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ke).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:$t,disabled:d,children:"Reset All Goals"})]}),w&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Benchmarks - ",Ar(Ue)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),re(Ie?.benchmarks||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:Yr.map(U=>i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),U.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:L[U.key]?.weight??"",onChange:ie=>xt(U.key,"weight",ie.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",value:L[U.key]?.reps??"",onChange:ie=>xt(U.key,"reps",ie.target.value),placeholder:"0"})]})]}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Time (seconds)"}),i.jsx("input",{type:"number",step:"0.01",value:L[U.key]?.time??"",onChange:ie=>xt(U.key,"time",ie.target.value),placeholder:"0"})]})})]},U.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),re(Ie?.benchmarks||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:qt,disabled:d,children:d?"Saving...":"Save"})]})]}),W&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Set Your Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),C(ke)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Yr.map(U=>{const ie=Ie?.benchmarks?.[U.key];let E="-";return ie&&(U.unit==="time"&&ie.time?E=`${ie.time}s`:(ie.weight||ie.reps)&&(E=`${ie.weight||0}kg  ${ie.reps||0}`)),i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",E]})]}),U.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:S[U.key]?.targetWeight??"",onChange:R=>Dt(U.key,"targetWeight",R.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Reps"}),i.jsx("input",{type:"number",value:S[U.key]?.targetReps??"",onChange:R=>Dt(U.key,"targetReps",R.target.value),placeholder:"0"})]})]}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target (seconds)"}),i.jsx("input",{type:"number",step:"1",value:S[U.key]?.targetValue??"",onChange:R=>Dt(U.key,"targetValue",R.target.value),placeholder:"0"})]})})]},U.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),C(ke)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ft,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&i.jsxs("div",{className:"pb-metrics-section",children:[!k&&!D&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-metrics-card",children:[i.jsx("h3",{children:"Body Measurements"}),i.jsx("p",{className:"pb-metrics-month",children:Ar(Ue)}),i.jsx("div",{className:"pb-metrics-list",children:cl.map(U=>{const ie=Ie?.bodyMetrics?.[U.key],E=ue(U.key),R=Ae[U.key],$=on(U.key),J=$!==null&&$>=1;return i.jsxs("div",{className:"pb-metric-row",children:[i.jsxs("div",{className:"pb-metric-top",children:[i.jsxs("div",{className:"pb-metric-left",children:[i.jsxs("span",{className:"pb-metric-name",children:[U.name,_t("metric",U.key)&&i.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),R&&i.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",R.targetValue," ",U.suffix]})]}),i.jsxs("div",{className:"pb-metric-values",children:[i.jsx("span",{className:"pb-metric-current",children:ie!=null?`${ie} ${U.suffix}`:"-"}),E!==null&&i.jsxs("span",{className:`pb-metric-change ${E>0?"up":E<0?"down":"same"}`,children:[E>0?"+":"",E," ",U.suffix]})]})]}),$!==null&&i.jsxs("div",{className:"pb-metric-progress",children:[i.jsx("div",{className:"pb-metric-bar",children:i.jsx("div",{className:`pb-metric-bar-fill ${J?"hit":""}`,style:{width:`${Math.round($*100)}%`}})}),i.jsx("span",{className:`pb-metric-percent ${J?"hit":""}`,children:J?"Hit!":`${Math.round($*100)}%`})]})]},U.key)})})]}),i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>P(!0),children:Ie?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ke).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:$t,disabled:d,children:"Reset All Goals"})]})]}),k&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Measurements - ",Ar(Ue)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{P(!1),he(Ie?.bodyMetrics||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:cl.map(U=>i.jsx("div",{className:"pb-edit-metric",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:[U.name," (",U.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:X[U.key]??"",onChange:ie=>St(U.key,ie.target.value),placeholder:"0"})]})},U.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{P(!1),he(Ie?.bodyMetrics||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Fe,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Body Metric Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),A(Ae)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),cl.map(U=>{const ie=Ie?.bodyMetrics?.[U.key];return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ie!=null?`${ie} ${U.suffix}`:"-"]})]}),i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:["Target (",U.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:H[U.key]?.targetValue??"",onChange:E=>bt(U.key,E.target.value),placeholder:"0"})]})})]},U.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),A(Ae)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:nn,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&i.jsx("div",{className:"pb-history-section",children:n.length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("h4",{children:"No records yet"}),i.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):i.jsxs(i.Fragment,{children:[We.length>0&&i.jsxs("div",{className:"pb-achievements-wall",children:[i.jsxs("h4",{className:"pb-achievements-wall-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),i.jsx("div",{className:"pb-achievements-list",children:[...We].reverse().map((U,ie)=>i.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ie*.05}s`},children:[i.jsx("div",{className:"pb-achievement-star",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("div",{className:"pb-achievement-info",children:[i.jsx("span",{className:"pb-achievement-label",children:U.label}),i.jsx("span",{className:"pb-achievement-date",children:Ar(U.achievedMonth)})]})]},ie))})]}),i.jsx("div",{className:"pb-history-controls",children:i.jsx("button",{className:`pb-compare-toggle ${rt?"active":""}`,onClick:()=>{V(!rt),!rt&&n.length>=2&&(ge(n[0].month),Ve(n[n.length-1].month))},children:rt?"Back to Timeline":"Compare Months"})}),rt?i.jsxs("div",{className:"pb-compare",children:[i.jsxs("div",{className:"pb-compare-selectors",children:[i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"From"}),i.jsx("select",{value:G,onChange:U=>ge(U.target.value),children:n.map(U=>i.jsx("option",{value:U.month,children:Ar(U.month)},U.month))})]}),i.jsx("div",{className:"pb-compare-vs",children:"vs"}),i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"To"}),i.jsx("select",{value:Se,onChange:U=>Ve(U.target.value),children:n.map(U=>i.jsx("option",{value:U.month,children:Ar(U.month)},U.month))})]})]}),fe&&pe&&i.jsxs("div",{className:"pb-compare-results",children:[i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Strength Benchmarks"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Exercise"}),i.jsx("span",{children:Ar(G).split(" ")[0]}),i.jsx("span",{children:Ar(Se).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),Yr.map(U=>{const ie=fe.benchmarks?.[U.key],E=pe.benchmarks?.[U.key],R=fo(U,ie),$=fo(U,E),J=Np($,R);return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:U.name}),i.jsx("span",{className:"pb-compare-val",children:ie?U.unit==="time"?Yh(ie.time):`${ie.weight}x${ie.reps}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:E?U.unit==="time"?Yh(E.time):`${E.weight}x${E.reps}`:"-"}),i.jsx("span",{className:`pb-compare-change ${J!==null?J>=0?"positive":"negative":""}`,children:J!==null?`${J>=0?"+":""}${J.toFixed(1)}%`:"-"})]},U.key)})]})]}),i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Body Measurements"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Measurement"}),i.jsx("span",{children:Ar(G).split(" ")[0]}),i.jsx("span",{children:Ar(Se).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),cl.map(U=>{const ie=fe.bodyMetrics?.[U.key],E=pe.bodyMetrics?.[U.key],R=ie!=null&&E!=null?parseFloat((E-ie).toFixed(2)):null;return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:U.name}),i.jsx("span",{className:"pb-compare-val",children:ie!=null?`${ie}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:E!=null?`${E}`:"-"}),i.jsx("span",{className:`pb-compare-change ${R!==null?R>0?"positive":R<0?"negative":"neutral":""}`,children:R!==null?`${R>0?"+":""}${R} ${U.suffix}`:"-"})]},U.key)})]})]})]})]}):i.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((U,ie)=>{const E=n.find(R=>R.month<U.month&&n.indexOf(R)===n.indexOf(U)-1)||n.filter(R=>R.month<U.month).pop();return i.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ie*.05}s`},children:[i.jsx("div",{className:"pb-timeline-dot"}),i.jsxs("div",{className:"pb-timeline-card",children:[i.jsx("h4",{children:Ar(U.month)}),U.benchmarks&&Object.keys(U.benchmarks).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Strength Benchmarks"}),Yr.map(R=>{const $=U.benchmarks[R.key];if(!$)return null;const J=E?.benchmarks?.[R.key],Le=fo(R,$),Ce=fo(R,J),Re=Np(Le,Ce);return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:R.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsx("span",{className:"pb-timeline-value",children:R.unit==="time"?Yh($.time):$w($.weight,$.reps)}),Re!==null&&i.jsxs("span",{className:`pb-timeline-change ${Re>=0?"positive":"negative"}`,children:[Re>=0?"+":"",Re.toFixed(1),"%"]})]})]},R.key)})]}),U.bodyMetrics&&Object.keys(U.bodyMetrics).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Body Measurements"}),cl.map(R=>{const $=U.bodyMetrics[R.key];if($==null)return null;const J=E?.bodyMetrics?.[R.key],Le=J!=null?parseFloat(($-J).toFixed(2)):null;return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:R.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsxs("span",{className:"pb-timeline-value",children:[$," ",R.suffix]}),Le!==null&&i.jsxs("span",{className:`pb-timeline-change ${Le>0?"positive":Le<0?"negative":"neutral"}`,children:[Le>0?"+":"",Le," ",R.suffix]})]})]},R.key)})]})]})]},U.id)})})]})})]})]}),Y&&i.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Te(null),children:i.jsxs("div",{className:"pb-celebration-card",children:[i.jsx("div",{className:"pb-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),i.jsx("div",{className:"pb-celebration-badges",children:Y.map((U,ie)=>i.jsx("div",{className:"pb-celebration-badge",children:U.label},ie))}),i.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),De&&i.jsxs("div",{className:`toast-notification ${De.type}`,children:[i.jsx("span",{className:"toast-icon",children:De.type==="success"?i.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),i.jsx("span",{className:"toast-message",children:De.message}),i.jsx("button",{className:"toast-close",onClick:()=>ct(null),children:""})]}),ve&&i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/forms"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),i.jsx("span",{children:"Forms"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/tools"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),i.jsx("span",{children:"Tools"})]}),i.jsxs("button",{className:"block-nav-tab active",children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"PBs"})]}),At?.circuitAccess&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/circuit"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 6v6l4 2"})]}),i.jsx("span",{children:"Circuit"})]})]}),de&&i.jsx(jl,{active:"progress"})]})}const JM=x.lazy(()=>yr(()=>import("./Dashboard-COg8zA6_.js"),__vite__mapDeps([0,1]))),ZM=x.lazy(()=>yr(()=>import("./AddClient-DIsKKAr6.js"),__vite__mapDeps([2,3]))),e3=x.lazy(()=>yr(()=>import("./ClientDashboard-BdxajE20.js"),[])),t3=x.lazy(()=>yr(()=>import("./ClientForms-CQuJRKB7.js"),__vite__mapDeps([4,5]))),n3=x.lazy(()=>yr(()=>import("./ClientTools-Df6gBCsv.js"),__vite__mapDeps([6,7]))),s3=x.lazy(()=>yr(()=>import("./MacroCalculator-C4v5yVp_.js"),__vite__mapDeps([8,7]))),r3=x.lazy(()=>yr(()=>import("./ProteinSnacks-DV-4NfjU.js"),__vite__mapDeps([9,7]))),a3=x.lazy(()=>yr(()=>import("./DailyMotivation-DghTdmCV.js"),__vite__mapDeps([10,7]))),i3=x.lazy(()=>yr(()=>import("./CircuitDashboard-27dFKEri.js"),__vite__mapDeps([11,12]))),l3=x.lazy(()=>yr(()=>import("./CircuitBooking-PbxkMrRD.js"),__vite__mapDeps([13,14,12]))),o3=x.lazy(()=>yr(()=>import("./Leaderboard-BOdjyxn3.js"),__vite__mapDeps([15,16])));function c3({children:s}){const{pathname:e}=Or();return x.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),x.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function u3(){const s=Ws();return x.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function h3(){return i.jsx(lM,{children:i.jsx(iM,{children:i.jsxs(hS,{basename:"/login",children:[i.jsx(u3,{}),i.jsx(c3,{children:i.jsx(x.Suspense,{fallback:null,children:i.jsxs(Uk,{children:[i.jsx(Zn,{path:"/",element:i.jsx(oM,{})}),i.jsx(Zn,{path:"/dashboard",element:i.jsx(JM,{})}),i.jsx(Zn,{path:"/add-client",element:i.jsx(ZM,{})}),i.jsx(Zn,{path:"/client",element:i.jsx(e3,{})}),i.jsx(Zn,{path:"/client/forms",element:i.jsx(t3,{})}),i.jsx(Zn,{path:"/client/tools",element:i.jsx(n3,{})}),i.jsx(Zn,{path:"/client/tools/macros",element:i.jsx(s3,{})}),i.jsx(Zn,{path:"/client/tools/snacks",element:i.jsx(r3,{})}),i.jsx(Zn,{path:"/client/tools/motivation",element:i.jsx(a3,{})}),i.jsx(Zn,{path:"/client/personal-bests",element:i.jsx(XM,{})}),i.jsx(Zn,{path:"/client/circuit",element:i.jsx(i3,{})}),i.jsx(Zn,{path:"/client/circuit/booking",element:i.jsx(l3,{})}),i.jsx(Zn,{path:"/client/core-buddy",element:i.jsx(mM,{})}),i.jsx(Zn,{path:"/client/core-buddy/nutrition",element:i.jsx(vM,{})}),i.jsx(Zn,{path:"/client/core-buddy/workouts",element:i.jsx(RM,{})}),i.jsx(Zn,{path:"/client/core-buddy/programmes",element:i.jsx(MM,{})}),i.jsx(Zn,{path:"/client/core-buddy/achievements",element:i.jsx(UM,{})}),i.jsx(Zn,{path:"/client/core-buddy/consistency",element:i.jsx(HM,{})}),i.jsx(Zn,{path:"/client/leaderboard",element:i.jsx(o3,{})}),i.jsx(Zn,{path:"*",element:i.jsx(Vk,{to:"/",replace:!0})})]})})})]})})})}UE.createRoot(document.getElementById("root")).render(i.jsx(x.StrictMode,{children:i.jsx(h3,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{jl as C,ot as T,ng as a,oy as b,xs as c,tt as d,Tt as e,d3 as f,$s as g,oR as h,Gn as i,i as j,la as k,Vi as l,Ws as m,by as n,m3 as o,Wn as p,qs as q,x as r,p3 as s,LI as u,Rs as w};
