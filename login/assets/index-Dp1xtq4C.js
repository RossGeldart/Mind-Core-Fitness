const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Bx4SVhY2.js","assets/scheduleUtils-a2tn0x12.js","assets/Dashboard-BvdLF0uv.css","assets/AddClient-zRC8JJPf.js","assets/AddClient-DH1OFzHo.css","assets/ClientDashboard-FElfB5Vd.js","assets/ClientDashboard-BI8UXFpK.css","assets/ClientForms-D2M0h8a4.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-Dv0ltVBQ.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-EZnHZUFS.js","assets/ProteinSnacks-D_MyQjSZ.js","assets/DailyMotivation-CVICS-Nd.js","assets/CircuitDashboard-D-iQv7qj.js","assets/CircuitDashboard-C8T0uect.css","assets/CircuitBooking-f-xyE3MU.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/PersonalBests-YpY7LWFv.js","assets/PersonalBests-BkG3fixu.css","assets/Leaderboard-DdfTFuus.js","assets/Leaderboard-Dq-r5svP.css","assets/UpgradePage-K4jYFHtJ.js","assets/stripe-Da7IPrZW.js","assets/UpgradePage-Chom0F_j.css","assets/Onboarding-BvlZu6En.js","assets/Onboarding-DvZF-mkH.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=t(l);fetch(l.href,u)}})();var op={exports:{}},Rc={};var ob;function ok(){if(ob)return Rc;ob=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return Rc.Fragment=e,Rc.jsx=t,Rc.jsxs=t,Rc}var lb;function lk(){return lb||(lb=1,op.exports=ok()),op.exports}var o=lk(),lp={exports:{}},Rt={};var cb;function ck(){if(cb)return Rt;cb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function M(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,U={};function ae(L,X,xe){this.props=L,this.context=X,this.refs=U,this.updater=xe||q}ae.prototype.isReactComponent={},ae.prototype.setState=function(L,X){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,X,"setState")},ae.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function $(){}$.prototype=ae.prototype;function ie(L,X,xe){this.props=L,this.context=X,this.refs=U,this.updater=xe||q}var de=ie.prototype=new $;de.constructor=ie,H(de,ae.prototype),de.isPureReactComponent=!0;var _e=Array.isArray;function ve(){}var N={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function D(L,X,xe){var ke=xe.ref;return{$$typeof:s,type:L,key:X,ref:ke!==void 0?ke:null,props:xe}}function V(L,X){return D(L.type,X,L.props)}function O(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function I(L){var X={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(xe){return X[xe]})}var A=/\/+/g;function Me(L,X){return typeof L=="object"&&L!==null&&L.key!=null?I(""+L.key):X.toString(36)}function Ze(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(ve,ve):(L.status="pending",L.then(function(X){L.status==="pending"&&(L.status="fulfilled",L.value=X)},function(X){L.status==="pending"&&(L.status="rejected",L.reason=X)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Q(L,X,xe,ke,Ee){var be=typeof L;(be==="undefined"||be==="boolean")&&(L=null);var Ke=!1;if(L===null)Ke=!0;else switch(be){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(L.$$typeof){case s:case e:Ke=!0;break;case b:return Ke=L._init,Q(Ke(L._payload),X,xe,ke,Ee)}}if(Ke)return Ee=Ee(L),Ke=ke===""?"."+Me(L,0):ke,_e(Ee)?(xe="",Ke!=null&&(xe=Ke.replace(A,"$&/")+"/"),Q(Ee,X,xe,"",function(sn){return sn})):Ee!=null&&(O(Ee)&&(Ee=V(Ee,xe+(Ee.key==null||L&&L.key===Ee.key?"":(""+Ee.key).replace(A,"$&/")+"/")+Ke)),X.push(Ee)),1;Ke=0;var ct=ke===""?".":ke+":";if(_e(L))for(var Ve=0;Ve<L.length;Ve++)ke=L[Ve],be=ct+Me(ke,Ve),Ke+=Q(ke,X,xe,be,Ee);else if(Ve=M(L),typeof Ve=="function")for(L=Ve.call(L),Ve=0;!(ke=L.next()).done;)ke=ke.value,be=ct+Me(ke,Ve++),Ke+=Q(ke,X,xe,be,Ee);else if(be==="object"){if(typeof L.then=="function")return Q(Ze(L),X,xe,ke,Ee);throw X=String(L),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function Te(L,X,xe){if(L==null)return L;var ke=[],Ee=0;return Q(L,ke,"","",function(be){return X.call(xe,be,Ee++)}),ke}function Ie(L){if(L._status===-1){var X=L._result;X=X(),X.then(function(xe){(L._status===0||L._status===-1)&&(L._status=1,L._result=xe)},function(xe){(L._status===0||L._status===-1)&&(L._status=2,L._result=xe)}),L._status===-1&&(L._status=0,L._result=X)}if(L._status===1)return L._result.default;throw L._result}var qe=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ee={map:Te,forEach:function(L,X,xe){Te(L,function(){X.apply(this,arguments)},xe)},count:function(L){var X=0;return Te(L,function(){X++}),X},toArray:function(L){return Te(L,function(X){return X})||[]},only:function(L){if(!O(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Rt.Activity=E,Rt.Children=ee,Rt.Component=ae,Rt.Fragment=t,Rt.Profiler=l,Rt.PureComponent=ie,Rt.StrictMode=i,Rt.Suspense=g,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(L){return N.H.useMemoCache(L)}},Rt.cache=function(L){return function(){return L.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(L,X,xe){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ke=H({},L.props),Ee=L.key;if(X!=null)for(be in X.key!==void 0&&(Ee=""+X.key),X)!S.call(X,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&X.ref===void 0||(ke[be]=X[be]);var be=arguments.length-2;if(be===1)ke.children=xe;else if(1<be){for(var Ke=Array(be),ct=0;ct<be;ct++)Ke[ct]=arguments[ct+2];ke.children=Ke}return D(L.type,Ee,ke)},Rt.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},Rt.createElement=function(L,X,xe){var ke,Ee={},be=null;if(X!=null)for(ke in X.key!==void 0&&(be=""+X.key),X)S.call(X,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(Ee[ke]=X[ke]);var Ke=arguments.length-2;if(Ke===1)Ee.children=xe;else if(1<Ke){for(var ct=Array(Ke),Ve=0;Ve<Ke;Ve++)ct[Ve]=arguments[Ve+2];Ee.children=ct}if(L&&L.defaultProps)for(ke in Ke=L.defaultProps,Ke)Ee[ke]===void 0&&(Ee[ke]=Ke[ke]);return D(L,be,Ee)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(L){return{$$typeof:p,render:L}},Rt.isValidElement=O,Rt.lazy=function(L){return{$$typeof:b,_payload:{_status:-1,_result:L},_init:Ie}},Rt.memo=function(L,X){return{$$typeof:y,type:L,compare:X===void 0?null:X}},Rt.startTransition=function(L){var X=N.T,xe={};N.T=xe;try{var ke=L(),Ee=N.S;Ee!==null&&Ee(xe,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(ve,qe)}catch(be){qe(be)}finally{X!==null&&xe.types!==null&&(X.types=xe.types),N.T=X}},Rt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Rt.use=function(L){return N.H.use(L)},Rt.useActionState=function(L,X,xe){return N.H.useActionState(L,X,xe)},Rt.useCallback=function(L,X){return N.H.useCallback(L,X)},Rt.useContext=function(L){return N.H.useContext(L)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(L,X){return N.H.useDeferredValue(L,X)},Rt.useEffect=function(L,X){return N.H.useEffect(L,X)},Rt.useEffectEvent=function(L){return N.H.useEffectEvent(L)},Rt.useId=function(){return N.H.useId()},Rt.useImperativeHandle=function(L,X,xe){return N.H.useImperativeHandle(L,X,xe)},Rt.useInsertionEffect=function(L,X){return N.H.useInsertionEffect(L,X)},Rt.useLayoutEffect=function(L,X){return N.H.useLayoutEffect(L,X)},Rt.useMemo=function(L,X){return N.H.useMemo(L,X)},Rt.useOptimistic=function(L,X){return N.H.useOptimistic(L,X)},Rt.useReducer=function(L,X,xe){return N.H.useReducer(L,X,xe)},Rt.useRef=function(L){return N.H.useRef(L)},Rt.useState=function(L){return N.H.useState(L)},Rt.useSyncExternalStore=function(L,X,xe){return N.H.useSyncExternalStore(L,X,xe)},Rt.useTransition=function(){return N.H.useTransition()},Rt.version="19.2.4",Rt}var ub;function xg(){return ub||(ub=1,lp.exports=ck()),lp.exports}var w=xg(),cp={exports:{}},Ic={},up={exports:{}},hp={};var hb;function uk(){return hb||(hb=1,(function(s){function e(Q,Te){var Ie=Q.length;Q.push(Te);e:for(;0<Ie;){var qe=Ie-1>>>1,ee=Q[qe];if(0<l(ee,Te))Q[qe]=Te,Q[Ie]=ee,Ie=qe;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var Te=Q[0],Ie=Q.pop();if(Ie!==Te){Q[0]=Ie;e:for(var qe=0,ee=Q.length,L=ee>>>1;qe<L;){var X=2*(qe+1)-1,xe=Q[X],ke=X+1,Ee=Q[ke];if(0>l(xe,Ie))ke<ee&&0>l(Ee,xe)?(Q[qe]=Ee,Q[ke]=Ie,qe=ke):(Q[qe]=xe,Q[X]=Ie,qe=X);else if(ke<ee&&0>l(Ee,Ie))Q[qe]=Ee,Q[ke]=Ie,qe=ke;else break e}}return Te}function l(Q,Te){var Ie=Q.sortIndex-Te.sortIndex;return Ie!==0?Ie:Q.id-Te.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],b=1,E=null,T=3,M=!1,q=!1,H=!1,U=!1,ae=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function de(Q){for(var Te=t(y);Te!==null;){if(Te.callback===null)i(y);else if(Te.startTime<=Q)i(y),Te.sortIndex=Te.expirationTime,e(g,Te);else break;Te=t(y)}}function _e(Q){if(H=!1,de(Q),!q)if(t(g)!==null)q=!0,ve||(ve=!0,I());else{var Te=t(y);Te!==null&&Ze(_e,Te.startTime-Q)}}var ve=!1,N=-1,S=5,D=-1;function V(){return U?!0:!(s.unstable_now()-D<S)}function O(){if(U=!1,ve){var Q=s.unstable_now();D=Q;var Te=!0;try{e:{q=!1,H&&(H=!1,$(N),N=-1),M=!0;var Ie=T;try{t:{for(de(Q),E=t(g);E!==null&&!(E.expirationTime>Q&&V());){var qe=E.callback;if(typeof qe=="function"){E.callback=null,T=E.priorityLevel;var ee=qe(E.expirationTime<=Q);if(Q=s.unstable_now(),typeof ee=="function"){E.callback=ee,de(Q),Te=!0;break t}E===t(g)&&i(g),de(Q)}else i(g);E=t(g)}if(E!==null)Te=!0;else{var L=t(y);L!==null&&Ze(_e,L.startTime-Q),Te=!1}}break e}finally{E=null,T=Ie,M=!1}Te=void 0}}finally{Te?I():ve=!1}}}var I;if(typeof ie=="function")I=function(){ie(O)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Me=A.port2;A.port1.onmessage=O,I=function(){Me.postMessage(null)}}else I=function(){ae(O,0)};function Ze(Q,Te){N=ae(function(){Q(s.unstable_now())},Te)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var Te=3;break;default:Te=T}var Ie=T;T=Te;try{return Q()}finally{T=Ie}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(Q,Te){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Ie=T;T=Q;try{return Te()}finally{T=Ie}},s.unstable_scheduleCallback=function(Q,Te,Ie){var qe=s.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?qe+Ie:qe):Ie=qe,Q){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Ie+ee,Q={id:b++,callback:Te,priorityLevel:Q,startTime:Ie,expirationTime:ee,sortIndex:-1},Ie>qe?(Q.sortIndex=Ie,e(y,Q),t(g)===null&&Q===t(y)&&(H?($(N),N=-1):H=!0,Ze(_e,Ie-qe))):(Q.sortIndex=ee,e(g,Q),q||M||(q=!0,ve||(ve=!0,I()))),Q},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(Q){var Te=T;return function(){var Ie=T;T=Te;try{return Q.apply(this,arguments)}finally{T=Ie}}}})(hp)),hp}var db;function hk(){return db||(db=1,up.exports=uk()),up.exports}var dp={exports:{}},Hs={};var fb;function dk(){if(fb)return Hs;fb=1;var s=xg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:g,containerInfo:y,implementation:b}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Hs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Hs.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,b)},Hs.flushSync=function(g){var y=h.T,b=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=b,i.d.f()}},Hs.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Hs.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Hs.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,M=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:M}):b==="script"&&i.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:M,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Hs.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Hs.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Hs.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Hs.requestFormReset=function(g){i.d.r(g)},Hs.unstable_batchedUpdates=function(g,y){return g(y)},Hs.useFormState=function(g,y,b){return h.H.useFormState(g,y,b)},Hs.useFormStatus=function(){return h.H.useHostTransitionStatus()},Hs.version="19.2.4",Hs}var mb;function fk(){if(mb)return dp.exports;mb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),dp.exports=dk(),dp.exports}var pb;function mk(){if(pb)return Ic;pb=1;var s=hk(),e=xg(),t=fk();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function y(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(i(188));return r!==n?null:n}for(var a=n,c=r;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return g(f),n;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(a.return!==c.return)a=f,c=m;else{for(var _=!1,k=f.child;k;){if(k===a){_=!0,a=f,c=m;break}if(k===c){_=!0,c=f,a=m;break}k=k.sibling}if(!_){for(k=m.child;k;){if(k===a){_=!0,a=m,c=f;break}if(k===c){_=!0,c=m,a=f;break}k=k.sibling}if(!_)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function I(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var A=Symbol.for("react.client.reference");function Me(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===A?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case ae:return"Profiler";case U:return"StrictMode";case _e:return"Suspense";case ve:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case q:return"Portal";case ie:return n.displayName||"Context";case $:return(n._context.displayName||"Context")+".Consumer";case de:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return r=n.displayName||null,r!==null?r:Me(n.type)||"Memo";case S:r=n._payload,n=n._init;try{return Me(n(r))}catch{}}return null}var Ze=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie={pending:!1,data:null,method:null,action:null},qe=[],ee=-1;function L(n){return{current:n}}function X(n){0>ee||(n.current=qe[ee],qe[ee]=null,ee--)}function xe(n,r){ee++,qe[ee]=n.current,n.current=r}var ke=L(null),Ee=L(null),be=L(null),Ke=L(null);function ct(n,r){switch(xe(be,r),xe(Ee,n),xe(ke,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?A1(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=A1(r),n=R1(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}X(ke),xe(ke,n)}function Ve(){X(ke),X(Ee),X(be)}function sn(n){n.memoizedState!==null&&xe(Ke,n);var r=ke.current,a=R1(r,n.type);r!==a&&(xe(Ee,n),xe(ke,a))}function Sn(n){Ee.current===n&&(X(ke),X(Ee)),Ke.current===n&&(X(Ke),jc._currentValue=Ie)}var Hn,Ut;function tt(n){if(Hn===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Hn=r&&r[1]||"",Ut=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hn+n+Ut}var bt=!1;function ht(n,r){if(!n||bt)return"";bt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ge=function(){throw Error()};if(Object.defineProperty(ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ge,[])}catch(ue){var se=ue}Reflect.construct(n,[],ge)}else{try{ge.call()}catch(ue){se=ue}n.call(ge.prototype)}}else{try{throw Error()}catch(ue){se=ue}(ge=n())&&typeof ge.catch=="function"&&ge.catch(function(){})}}catch(ue){if(ue&&se&&typeof ue.stack=="string")return[ue.stack,se.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),_=m[0],k=m[1];if(_&&k){var B=_.split(`
`),Z=k.split(`
`);for(f=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(c===B.length||f===Z.length)for(c=B.length-1,f=Z.length-1;1<=c&&0<=f&&B[c]!==Z[f];)f--;for(;1<=c&&0<=f;c--,f--)if(B[c]!==Z[f]){if(c!==1||f!==1)do if(c--,f--,0>f||B[c]!==Z[f]){var fe=`
`+B[c].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=c&&0<=f);break}}}finally{bt=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?tt(a):""}function Dn(n,r){switch(n.tag){case 26:case 27:case 5:return tt(n.type);case 16:return tt("Lazy");case 13:return n.child!==r&&r!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return ht(n.type,!1);case 11:return ht(n.type.render,!1);case 1:return ht(n.type,!0);case 31:return tt("Activity");default:return""}}function he(n){try{var r="",a=null;do r+=Dn(n,a),a=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var pt=Object.prototype.hasOwnProperty,At=s.unstable_scheduleCallback,Ot=s.unstable_cancelCallback,at=s.unstable_shouldYield,dt=s.unstable_requestPaint,St=s.unstable_now,Vt=s.unstable_getCurrentPriorityLevel,js=s.unstable_ImmediatePriority,bs=s.unstable_UserBlockingPriority,un=s.unstable_NormalPriority,J=s.unstable_LowPriority,Ce=s.unstable_IdlePriority,wt=s.log,_t=s.unstable_setDisableYieldValue,ot=null,He=null;function st(n){if(typeof wt=="function"&&_t(n),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(ot,n)}catch{}}var $e=Math.clz32?Math.clz32:Gn,Jt=Math.log,qt=Math.LN2;function Gn(n){return n>>>=0,n===0?32:31-(Jt(n)/qt|0)|0}var jn=256,Kn=262144,tn=4194304;function Vn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Mn(n,r,a){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var k=c&134217727;return k!==0?(c=k&~m,c!==0?f=Vn(c):(_&=k,_!==0?f=Vn(_):a||(a=k&~n,a!==0&&(f=Vn(a))))):(k=c&~m,k!==0?f=Vn(k):_!==0?f=Vn(_):a||(a=c&~n,a!==0&&(f=Vn(a)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,a=r&-r,m>=a||m===32&&(a&4194048)!==0)?r:f}function rn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Qs(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function le(){var n=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),n}function Ae(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Ye(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gt(n,r,a,c,f,m){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var k=n.entanglements,B=n.expirationTimes,Z=n.hiddenUpdates;for(a=_&~a;0<a;){var fe=31-$e(a),ge=1<<fe;k[fe]=0,B[fe]=-1;var se=Z[fe];if(se!==null)for(Z[fe]=null,fe=0;fe<se.length;fe++){var ue=se[fe];ue!==null&&(ue.lane&=-536870913)}a&=~ge}c!==0&&lt(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~r))}function lt(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-$e(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|a&261930}function hn(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-$e(a),f=1<<c;f&r|n[c]&r&&(n[c]|=r),a&=~f}}function Un(n,r){var a=r&-r;return a=(a&42)!==0?1:pn(a),(a&(n.suspendedLanes|r))!==0?0:a}function pn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function gn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function _s(){var n=Te.p;return n!==0?n:(n=window.event,n===void 0?32:eb(n.type))}function ws(n,r){var a=Te.p;try{return Te.p=n,r()}finally{Te.p=a}}var ns=Math.random().toString(36).slice(2),dn="__reactFiber$"+ns,Cn="__reactProps$"+ns,Cs="__reactContainer$"+ns,rr="__reactEvents$"+ns,li="__reactListeners$"+ns,Ar="__reactHandles$"+ns,Rr="__reactResources$"+ns,xs="__reactMarker$"+ns;function Es(n){delete n[dn],delete n[Cn],delete n[rr],delete n[li],delete n[Ar]}function Ts(n){var r=n[dn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Cs]||a[dn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=V1(n);n!==null;){if(a=n[dn])return a;n=V1(n)}return r}n=a,a=n.parentNode}return null}function Yn(n){if(n=n[dn]||n[Cs]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function bn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function Qn(n){var r=n[Rr];return r||(r=n[Rr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ht(n){n[xs]=!0}var pr=new Set,Kr={};function hs(n,r){ss(n,r),ss(n+"Capture",r)}function ss(n,r){for(Kr[n]=r,n=0;n<r.length;n++)pr.add(r[n])}var rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yr={},R={};function z(n){return pt.call(R,n)?!0:pt.call(Yr,n)?!1:rs.test(n)?R[n]=!0:(Yr[n]=!0,!1)}function re(n,r,a){if(z(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function oe(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Oe(n,r,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+c)}}function Pe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Be(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function $t(n,r,a){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ge(n){if(!n._valueTracker){var r=Be(n)?"checked":"value";n._valueTracker=$t(n,r,""+n[r])}}function $n(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Be(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function is(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var qs=/[\n"\\]/g;function as(n){return n.replace(qs,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xs(n,r,a,c,f,m,_,k){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),r!=null?_==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Pe(r)):n.value!==""+Pe(r)&&(n.value=""+Pe(r)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),r!=null?Ni(n,_,Pe(r)):a!=null?Ni(n,_,Pe(a)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.name=""+Pe(k):n.removeAttribute("name")}function oa(n,r,a,c,f,m,_,k){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ge(n);return}a=a!=null?""+Pe(a):"",r=r!=null?""+Pe(r):a,k||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=k?n.checked:!!c,n.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Ge(n)}function Ni(n,r,a){r==="number"&&is(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ir(n,r,a,c){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Pe(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function la(n,r,a){if(r!=null&&(r=""+Pe(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+Pe(a):""}function Dr(n,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(i(92));if(Ze(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=Pe(r),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c),Ge(n)}function j(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var G=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ne(n,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,a):typeof a!="number"||a===0||G.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function Re(n,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&a[f]!==c&&Ne(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Ne(n,m,r[m])}function ze(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ut=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Et(n){return Xe.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function jt(){}var Zt=null;function P(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var te=null,ne=null;function we(n){var r=Yn(n);if(r&&(n=r.stateNode)){var a=n[Cn]||null;e:switch(n=r.stateNode,r.type){case"input":if(Xs(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+as(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var f=c[Cn]||null;if(!f)throw Error(i(90));Xs(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===n.form&&$n(c)}break e;case"textarea":la(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ir(n,!!a.multiple,r,!1)}}}var je=!1;function De(n,r,a){if(je)return n(r,a);je=!0;try{var c=n(r);return c}finally{if(je=!1,(te!==null||ne!==null)&&(kh(),te&&(r=te,n=ne,ne=te=null,we(r),n)))for(r=0;r<n.length;r++)we(n[r])}}function Fe(n,r){var a=n.stateNode;if(a===null)return null;var c=a[Cn]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var mt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ct=!1;if(mt)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Ct=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{Ct=!1}var Tt=null,_n=null,gr=null;function kt(){if(gr)return gr;var n,r=_n,a=r.length,c,f="value"in Tt?Tt.value:Tt.textContent,m=f.length;for(n=0;n<a&&r[n]===f[n];n++);var _=a-n;for(c=1;c<=_&&r[a-c]===f[m-c];c++);return gr=f.slice(n,1<c?1-c:void 0)}function An(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Bn(){return!0}function xt(){return!1}function Bt(n){function r(a,c,f,m,_){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Bn:xt,this.isPropagationStopped=xt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){},isPersistent:Bn}),r}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=Bt(Ns),ir=E({},Ns,{view:0,detail:0}),Ms=Bt(ir),As,Mr,yr,ca=E({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ua,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yr&&(yr&&n.type==="mousemove"?(As=n.screenX-yr.screenX,Mr=n.screenY-yr.screenY):Mr=As=0,yr=n),As)},movementY:function(n){return"movementY"in n?n.movementY:Mr}}),Ai=Bt(ca),so=E({},ca,{dataTransfer:0}),Du=Bt(so),Mu=E({},ir,{relatedTarget:0}),ro=Bt(Mu),Kl=E({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=Bt(Kl),Ho=E({},Ns,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ou=Bt(Ho),Pu=E({},Ns,{data:0}),ci=Bt(Pu),Vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Bu[n])?!!r[n]:!1}function ua(){return zu}var Js=E({},ir,{key:function(n){if(n.key){var r=Vu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=An(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Uu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ua,charCode:function(n){return n.type==="keypress"?An(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?An(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fu=Bt(Js),qu=E({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ri=Bt(qu),d=E({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ua}),v=Bt(d),x=E({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=Bt(x),K=E({},ca,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=Bt(K),Le=E({},Ns,{newState:0,oldState:0}),Dt=Bt(Le),os=[9,13,27,32],ln=mt&&"CompositionEvent"in window,zn=null;mt&&"documentMode"in document&&(zn=document.documentMode);var Lr=mt&&"TextEvent"in window&&!zn,ui=mt&&(!ln||zn&&8<zn&&11>=zn),Qr=" ",Xr=!1;function io(n,r){switch(n){case"keyup":return os.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $o(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Wo=!1;function RE(n,r){switch(n){case"compositionend":return $o(r);case"keypress":return r.which!==32?null:(Xr=!0,Qr);case"textInput":return n=r.data,n===Qr&&Xr?null:n;default:return null}}function IE(n,r){if(Wo)return n==="compositionend"||!ln&&io(n,r)?(n=kt(),gr=_n=Tt=null,Wo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ui&&r.locale!=="ko"?null:r.data;default:return null}}var DE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zy(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!DE[n.type]:r==="textarea"}function Fy(n,r,a,c){te?ne?ne.push(c):ne=[c]:te=c,r=Ih(r,"onChange"),0<r.length&&(a=new Ds("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Yl=null,Ql=null;function ME(n){T1(n,0)}function Hu(n){var r=bn(n);if($n(r))return n}function qy(n,r){if(n==="change")return r}var Hy=!1;if(mt){var mf;if(mt){var pf="oninput"in document;if(!pf){var $y=document.createElement("div");$y.setAttribute("oninput","return;"),pf=typeof $y.oninput=="function"}mf=pf}else mf=!1;Hy=mf&&(!document.documentMode||9<document.documentMode)}function Wy(){Yl&&(Yl.detachEvent("onpropertychange",Gy),Ql=Yl=null)}function Gy(n){if(n.propertyName==="value"&&Hu(Ql)){var r=[];Fy(r,Ql,n,P(n)),De(ME,r)}}function LE(n,r,a){n==="focusin"?(Wy(),Yl=r,Ql=a,Yl.attachEvent("onpropertychange",Gy)):n==="focusout"&&Wy()}function OE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hu(Ql)}function PE(n,r){if(n==="click")return Hu(r)}function VE(n,r){if(n==="input"||n==="change")return Hu(r)}function UE(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var vr=typeof Object.is=="function"?Object.is:UE;function Xl(n,r){if(vr(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!pt.call(r,f)||!vr(n[f],r[f]))return!1}return!0}function Ky(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Yy(n,r){var a=Ky(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ky(a)}}function Qy(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Qy(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Xy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=is(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=is(n.document)}return r}function gf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var BE=mt&&"documentMode"in document&&11>=document.documentMode,Go=null,yf=null,Jl=null,vf=!1;function Jy(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vf||Go==null||Go!==is(c)||(c=Go,"selectionStart"in c&&gf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Jl&&Xl(Jl,c)||(Jl=c,c=Ih(yf,"onSelect"),0<c.length&&(r=new Ds("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Go)))}function ao(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Ko={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionrun:ao("Transition","TransitionRun"),transitionstart:ao("Transition","TransitionStart"),transitioncancel:ao("Transition","TransitionCancel"),transitionend:ao("Transition","TransitionEnd")},bf={},Zy={};mt&&(Zy=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function oo(n){if(bf[n])return bf[n];if(!Ko[n])return n;var r=Ko[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Zy)return bf[n]=r[a];return n}var ev=oo("animationend"),tv=oo("animationiteration"),nv=oo("animationstart"),zE=oo("transitionrun"),FE=oo("transitionstart"),qE=oo("transitioncancel"),sv=oo("transitionend"),rv=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function Jr(n,r){rv.set(n,r),hs(r,[n])}var $u=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Or=[],Yo=0,wf=0;function Wu(){for(var n=Yo,r=wf=Yo=0;r<n;){var a=Or[r];Or[r++]=null;var c=Or[r];Or[r++]=null;var f=Or[r];Or[r++]=null;var m=Or[r];if(Or[r++]=null,c!==null&&f!==null){var _=c.pending;_===null?f.next=f:(f.next=_.next,_.next=f),c.pending=f}m!==0&&iv(a,f,m)}}function Gu(n,r,a,c){Or[Yo++]=n,Or[Yo++]=r,Or[Yo++]=a,Or[Yo++]=c,wf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function xf(n,r,a,c){return Gu(n,r,a,c),Ku(n)}function lo(n,r){return Gu(n,null,null,r),Ku(n)}function iv(n,r,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var f=!1,m=n.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-$e(a),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=a|536870912),m):null}function Ku(n){if(50<_c)throw _c=0,Rm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Qo={};function HE(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(n,r,a,c){return new HE(n,r,a,c)}function Ef(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ii(n,r){var a=n.alternate;return a===null?(a=br(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function av(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Yu(n,r,a,c,f,m){var _=0;if(c=n,typeof n=="function")Ef(n)&&(_=1);else if(typeof n=="string")_=YT(n,a,ke.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case D:return n=br(31,a,r,f),n.elementType=D,n.lanes=m,n;case H:return co(a.children,f,m,r);case U:_=8,f|=24;break;case ae:return n=br(12,a,r,f|2),n.elementType=ae,n.lanes=m,n;case _e:return n=br(13,a,r,f),n.elementType=_e,n.lanes=m,n;case ve:return n=br(19,a,r,f),n.elementType=ve,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:_=10;break e;case $:_=9;break e;case de:_=11;break e;case N:_=14;break e;case S:_=16,c=null;break e}_=29,a=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=br(_,a,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function co(n,r,a,c){return n=br(7,n,c,r),n.lanes=a,n}function Tf(n,r,a){return n=br(6,n,null,r),n.lanes=a,n}function ov(n){var r=br(18,null,null,0);return r.stateNode=n,r}function kf(n,r,a){return r=br(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var lv=new WeakMap;function Pr(n,r){if(typeof n=="object"&&n!==null){var a=lv.get(n);return a!==void 0?a:(r={value:n,source:r,stack:he(r)},lv.set(n,r),r)}return{value:n,source:r,stack:he(r)}}var Xo=[],Jo=0,Qu=null,Zl=0,Vr=[],Ur=0,ha=null,hi=1,di="";function Di(n,r){Xo[Jo++]=Zl,Xo[Jo++]=Qu,Qu=n,Zl=r}function cv(n,r,a){Vr[Ur++]=hi,Vr[Ur++]=di,Vr[Ur++]=ha,ha=n;var c=hi;n=di;var f=32-$e(c)-1;c&=~(1<<f),a+=1;var m=32-$e(r)+f;if(30<m){var _=f-f%5;m=(c&(1<<_)-1).toString(32),c>>=_,f-=_,hi=1<<32-$e(r)+f|a<<f|c,di=m+n}else hi=1<<m|a<<f|c,di=n}function Sf(n){n.return!==null&&(Di(n,1),cv(n,1,0))}function jf(n){for(;n===Qu;)Qu=Xo[--Jo],Xo[Jo]=null,Zl=Xo[--Jo],Xo[Jo]=null;for(;n===ha;)ha=Vr[--Ur],Vr[Ur]=null,di=Vr[--Ur],Vr[Ur]=null,hi=Vr[--Ur],Vr[Ur]=null}function uv(n,r){Vr[Ur++]=hi,Vr[Ur++]=di,Vr[Ur++]=ha,hi=r.id,di=r.overflow,ha=n}var Ls=null,Ln=null,en=!1,da=null,Br=!1,Cf=Error(i(519));function fa(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ec(Pr(r,n)),Cf}function hv(n){var r=n.stateNode,a=n.type,c=n.memoizedProps;switch(r[dn]=n,r[Cn]=c,a){case"dialog":Ft("cancel",r),Ft("close",r);break;case"iframe":case"object":case"embed":Ft("load",r);break;case"video":case"audio":for(a=0;a<xc.length;a++)Ft(xc[a],r);break;case"source":Ft("error",r);break;case"img":case"image":case"link":Ft("error",r),Ft("load",r);break;case"details":Ft("toggle",r);break;case"input":Ft("invalid",r),oa(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ft("invalid",r);break;case"textarea":Ft("invalid",r),Dr(r,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||C1(r.textContent,a)?(c.popover!=null&&(Ft("beforetoggle",r),Ft("toggle",r)),c.onScroll!=null&&Ft("scroll",r),c.onScrollEnd!=null&&Ft("scrollend",r),c.onClick!=null&&(r.onclick=jt),r=!0):r=!1,r||fa(n,!0)}function dv(n){for(Ls=n.return;Ls;)switch(Ls.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:Ls=Ls.return}}function Zo(n){if(n!==Ls)return!1;if(!en)return dv(n),en=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Wm(n.type,n.memoizedProps)),a=!a),a&&Ln&&fa(n),dv(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ln=P1(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ln=P1(n)}else r===27?(r=Ln,ja(n.type)?(n=Xm,Xm=null,Ln=n):Ln=r):Ln=Ls?Fr(n.stateNode.nextSibling):null;return!0}function uo(){Ln=Ls=null,en=!1}function Nf(){var n=da;return n!==null&&(cr===null?cr=n:cr.push.apply(cr,n),da=null),n}function ec(n){da===null?da=[n]:da.push(n)}var Af=L(null),ho=null,Mi=null;function ma(n,r,a){xe(Af,r._currentValue),r._currentValue=a}function Li(n){n._currentValue=Af.current,X(Af)}function Rf(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function If(n,r,a,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var k=m;m=f;for(var B=0;B<r.length;B++)if(k.context===r[B]){m.lanes|=a,k=m.alternate,k!==null&&(k.lanes|=a),Rf(m.return,a,n),c||(_=null);break e}m=k.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),Rf(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function el(n,r,a,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var k=f.type;vr(f.pendingProps.value,_.value)||(n!==null?n.push(k):n=[k])}}else if(f===Ke.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(jc):n=[jc])}f=f.return}n!==null&&If(r,n,a,c),r.flags|=262144}function Xu(n){for(n=n.firstContext;n!==null;){if(!vr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function fo(n){ho=n,Mi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Os(n){return fv(ho,n)}function Ju(n,r){return ho===null&&fo(n),fv(n,r)}function fv(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Mi===null){if(n===null)throw Error(i(308));Mi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Mi=Mi.next=r;return a}var $E=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},WE=s.unstable_scheduleCallback,GE=s.unstable_NormalPriority,ds={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new $E,data:new Map,refCount:0}}function tc(n){n.refCount--,n.refCount===0&&WE(GE,function(){n.controller.abort()})}var nc=null,Mf=0,tl=0,nl=null;function KE(n,r){if(nc===null){var a=nc=[];Mf=0,tl=Pm(),nl={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Mf++,r.then(mv,mv),r}function mv(){if(--Mf===0&&nc!==null){nl!==null&&(nl.status="fulfilled");var n=nc;nc=null,tl=0,nl=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function YE(n,r){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var pv=Q.S;Q.S=function(n,r){J0=St(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&KE(n,r),pv!==null&&pv(n,r)};var mo=L(null);function Lf(){var n=mo.current;return n!==null?n:Nn.pooledCache}function Zu(n,r){r===null?xe(mo,mo.current):xe(mo,r.pool)}function gv(){var n=Lf();return n===null?null:{parent:ds._currentValue,pool:n}}var sl=Error(i(460)),Of=Error(i(474)),eh=Error(i(542)),th={then:function(){}};function yv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function vv(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(jt,jt),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,_v(n),n;default:if(typeof r.status=="string")r.then(jt,jt);else{if(n=Nn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,_v(n),n}throw go=r,sl}}function po(n){try{var r=n._init;return r(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(go=a,sl):a}}var go=null;function bv(){if(go===null)throw Error(i(459));var n=go;return go=null,n}function _v(n){if(n===sl||n===eh)throw Error(i(483))}var rl=null,sc=0;function nh(n){var r=sc;return sc+=1,rl===null&&(rl=[]),vv(rl,n,r)}function rc(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function sh(n,r){throw r.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function wv(n){function r(W,F){if(n){var Y=W.deletions;Y===null?(W.deletions=[F],W.flags|=16):Y.push(F)}}function a(W,F){if(!n)return null;for(;F!==null;)r(W,F),F=F.sibling;return null}function c(W){for(var F=new Map;W!==null;)W.key!==null?F.set(W.key,W):F.set(W.index,W),W=W.sibling;return F}function f(W,F){return W=Ii(W,F),W.index=0,W.sibling=null,W}function m(W,F,Y){return W.index=Y,n?(Y=W.alternate,Y!==null?(Y=Y.index,Y<F?(W.flags|=67108866,F):Y):(W.flags|=67108866,F)):(W.flags|=1048576,F)}function _(W){return n&&W.alternate===null&&(W.flags|=67108866),W}function k(W,F,Y,pe){return F===null||F.tag!==6?(F=Tf(Y,W.mode,pe),F.return=W,F):(F=f(F,Y),F.return=W,F)}function B(W,F,Y,pe){var rt=Y.type;return rt===H?fe(W,F,Y.props.children,pe,Y.key):F!==null&&(F.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===S&&po(rt)===F.type)?(F=f(F,Y.props),rc(F,Y),F.return=W,F):(F=Yu(Y.type,Y.key,Y.props,null,W.mode,pe),rc(F,Y),F.return=W,F)}function Z(W,F,Y,pe){return F===null||F.tag!==4||F.stateNode.containerInfo!==Y.containerInfo||F.stateNode.implementation!==Y.implementation?(F=kf(Y,W.mode,pe),F.return=W,F):(F=f(F,Y.children||[]),F.return=W,F)}function fe(W,F,Y,pe,rt){return F===null||F.tag!==7?(F=co(Y,W.mode,pe,rt),F.return=W,F):(F=f(F,Y),F.return=W,F)}function ge(W,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Tf(""+F,W.mode,Y),F.return=W,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case M:return Y=Yu(F.type,F.key,F.props,null,W.mode,Y),rc(Y,F),Y.return=W,Y;case q:return F=kf(F,W.mode,Y),F.return=W,F;case S:return F=po(F),ge(W,F,Y)}if(Ze(F)||I(F))return F=co(F,W.mode,Y,null),F.return=W,F;if(typeof F.then=="function")return ge(W,nh(F),Y);if(F.$$typeof===ie)return ge(W,Ju(W,F),Y);sh(W,F)}return null}function se(W,F,Y,pe){var rt=F!==null?F.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return rt!==null?null:k(W,F,""+Y,pe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case M:return Y.key===rt?B(W,F,Y,pe):null;case q:return Y.key===rt?Z(W,F,Y,pe):null;case S:return Y=po(Y),se(W,F,Y,pe)}if(Ze(Y)||I(Y))return rt!==null?null:fe(W,F,Y,pe,null);if(typeof Y.then=="function")return se(W,F,nh(Y),pe);if(Y.$$typeof===ie)return se(W,F,Ju(W,Y),pe);sh(W,Y)}return null}function ue(W,F,Y,pe,rt){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return W=W.get(Y)||null,k(F,W,""+pe,rt);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case M:return W=W.get(pe.key===null?Y:pe.key)||null,B(F,W,pe,rt);case q:return W=W.get(pe.key===null?Y:pe.key)||null,Z(F,W,pe,rt);case S:return pe=po(pe),ue(W,F,Y,pe,rt)}if(Ze(pe)||I(pe))return W=W.get(Y)||null,fe(F,W,pe,rt,null);if(typeof pe.then=="function")return ue(W,F,Y,nh(pe),rt);if(pe.$$typeof===ie)return ue(W,F,Y,Ju(F,pe),rt);sh(F,pe)}return null}function Qe(W,F,Y,pe){for(var rt=null,an=null,et=F,Pt=F=0,Gt=null;et!==null&&Pt<Y.length;Pt++){et.index>Pt?(Gt=et,et=null):Gt=et.sibling;var on=se(W,et,Y[Pt],pe);if(on===null){et===null&&(et=Gt);break}n&&et&&on.alternate===null&&r(W,et),F=m(on,F,Pt),an===null?rt=on:an.sibling=on,an=on,et=Gt}if(Pt===Y.length)return a(W,et),en&&Di(W,Pt),rt;if(et===null){for(;Pt<Y.length;Pt++)et=ge(W,Y[Pt],pe),et!==null&&(F=m(et,F,Pt),an===null?rt=et:an.sibling=et,an=et);return en&&Di(W,Pt),rt}for(et=c(et);Pt<Y.length;Pt++)Gt=ue(et,W,Pt,Y[Pt],pe),Gt!==null&&(n&&Gt.alternate!==null&&et.delete(Gt.key===null?Pt:Gt.key),F=m(Gt,F,Pt),an===null?rt=Gt:an.sibling=Gt,an=Gt);return n&&et.forEach(function(Ia){return r(W,Ia)}),en&&Di(W,Pt),rt}function ft(W,F,Y,pe){if(Y==null)throw Error(i(151));for(var rt=null,an=null,et=F,Pt=F=0,Gt=null,on=Y.next();et!==null&&!on.done;Pt++,on=Y.next()){et.index>Pt?(Gt=et,et=null):Gt=et.sibling;var Ia=se(W,et,on.value,pe);if(Ia===null){et===null&&(et=Gt);break}n&&et&&Ia.alternate===null&&r(W,et),F=m(Ia,F,Pt),an===null?rt=Ia:an.sibling=Ia,an=Ia,et=Gt}if(on.done)return a(W,et),en&&Di(W,Pt),rt;if(et===null){for(;!on.done;Pt++,on=Y.next())on=ge(W,on.value,pe),on!==null&&(F=m(on,F,Pt),an===null?rt=on:an.sibling=on,an=on);return en&&Di(W,Pt),rt}for(et=c(et);!on.done;Pt++,on=Y.next())on=ue(et,W,Pt,on.value,pe),on!==null&&(n&&on.alternate!==null&&et.delete(on.key===null?Pt:on.key),F=m(on,F,Pt),an===null?rt=on:an.sibling=on,an=on);return n&&et.forEach(function(ak){return r(W,ak)}),en&&Di(W,Pt),rt}function En(W,F,Y,pe){if(typeof Y=="object"&&Y!==null&&Y.type===H&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case M:e:{for(var rt=Y.key;F!==null;){if(F.key===rt){if(rt=Y.type,rt===H){if(F.tag===7){a(W,F.sibling),pe=f(F,Y.props.children),pe.return=W,W=pe;break e}}else if(F.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===S&&po(rt)===F.type){a(W,F.sibling),pe=f(F,Y.props),rc(pe,Y),pe.return=W,W=pe;break e}a(W,F);break}else r(W,F);F=F.sibling}Y.type===H?(pe=co(Y.props.children,W.mode,pe,Y.key),pe.return=W,W=pe):(pe=Yu(Y.type,Y.key,Y.props,null,W.mode,pe),rc(pe,Y),pe.return=W,W=pe)}return _(W);case q:e:{for(rt=Y.key;F!==null;){if(F.key===rt)if(F.tag===4&&F.stateNode.containerInfo===Y.containerInfo&&F.stateNode.implementation===Y.implementation){a(W,F.sibling),pe=f(F,Y.children||[]),pe.return=W,W=pe;break e}else{a(W,F);break}else r(W,F);F=F.sibling}pe=kf(Y,W.mode,pe),pe.return=W,W=pe}return _(W);case S:return Y=po(Y),En(W,F,Y,pe)}if(Ze(Y))return Qe(W,F,Y,pe);if(I(Y)){if(rt=I(Y),typeof rt!="function")throw Error(i(150));return Y=rt.call(Y),ft(W,F,Y,pe)}if(typeof Y.then=="function")return En(W,F,nh(Y),pe);if(Y.$$typeof===ie)return En(W,F,Ju(W,Y),pe);sh(W,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,F!==null&&F.tag===6?(a(W,F.sibling),pe=f(F,Y),pe.return=W,W=pe):(a(W,F),pe=Tf(Y,W.mode,pe),pe.return=W,W=pe),_(W)):a(W,F)}return function(W,F,Y,pe){try{sc=0;var rt=En(W,F,Y,pe);return rl=null,rt}catch(et){if(et===sl||et===eh)throw et;var an=br(29,et,null,W.mode);return an.lanes=pe,an.return=W,an}}}var yo=wv(!0),xv=wv(!1),pa=!1;function Pf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ga(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ya(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(cn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Ku(n),iv(n,null,a),r}return Gu(n,c,r,a),Ku(n)}function ic(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,hn(n,a)}}function Uf(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?f=m=r:m=m.next=r}else f=m=r;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Bf=!1;function ac(){if(Bf){var n=nl;if(n!==null)throw n}}function oc(n,r,a,c){Bf=!1;var f=n.updateQueue;pa=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var B=k,Z=B.next;B.next=null,_===null?m=Z:_.next=Z,_=B;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,k=fe.lastBaseUpdate,k!==_&&(k===null?fe.firstBaseUpdate=Z:k.next=Z,fe.lastBaseUpdate=B))}if(m!==null){var ge=f.baseState;_=0,fe=Z=B=null,k=m;do{var se=k.lane&-536870913,ue=se!==k.lane;if(ue?(Wt&se)===se:(c&se)===se){se!==0&&se===tl&&(Bf=!0),fe!==null&&(fe=fe.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Qe=n,ft=k;se=r;var En=a;switch(ft.tag){case 1:if(Qe=ft.payload,typeof Qe=="function"){ge=Qe.call(En,ge,se);break e}ge=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=ft.payload,se=typeof Qe=="function"?Qe.call(En,ge,se):Qe,se==null)break e;ge=E({},ge,se);break e;case 2:pa=!0}}se=k.callback,se!==null&&(n.flags|=64,ue&&(n.flags|=8192),ue=f.callbacks,ue===null?f.callbacks=[se]:ue.push(se))}else ue={lane:se,tag:k.tag,payload:k.payload,callback:k.callback,next:null},fe===null?(Z=fe=ue,B=ge):fe=fe.next=ue,_|=se;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;ue=k,k=ue.next,ue.next=null,f.lastBaseUpdate=ue,f.shared.pending=null}}while(!0);fe===null&&(B=ge),f.baseState=B,f.firstBaseUpdate=Z,f.lastBaseUpdate=fe,m===null&&(f.shared.lanes=0),xa|=_,n.lanes=_,n.memoizedState=ge}}function Ev(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function Tv(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Ev(a[n],r)}var il=L(null),rh=L(0);function kv(n,r){n=Hi,xe(rh,n),xe(il,r),Hi=n|r.baseLanes}function zf(){xe(rh,Hi),xe(il,il.current)}function Ff(){Hi=rh.current,X(il),X(rh)}var _r=L(null),zr=null;function va(n){var r=n.alternate;xe(ls,ls.current&1),xe(_r,n),zr===null&&(r===null||il.current!==null||r.memoizedState!==null)&&(zr=n)}function qf(n){xe(ls,ls.current),xe(_r,n),zr===null&&(zr=n)}function Sv(n){n.tag===22?(xe(ls,ls.current),xe(_r,n),zr===null&&(zr=n)):ba()}function ba(){xe(ls,ls.current),xe(_r,_r.current)}function wr(n){X(_r),zr===n&&(zr=null),X(ls)}var ls=L(0);function ih(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ym(a)||Qm(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Oi=0,Mt=null,wn=null,fs=null,ah=!1,al=!1,vo=!1,oh=0,lc=0,ol=null,QE=0;function Xn(){throw Error(i(321))}function Hf(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!vr(n[a],r[a]))return!1;return!0}function $f(n,r,a,c,f,m){return Oi=m,Mt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=n===null||n.memoizedState===null?c0:am,vo=!1,m=a(c,f),vo=!1,al&&(m=Cv(r,a,c,f)),jv(n),m}function jv(n){Q.H=hc;var r=wn!==null&&wn.next!==null;if(Oi=0,fs=wn=Mt=null,ah=!1,lc=0,ol=null,r)throw Error(i(300));n===null||ms||(n=n.dependencies,n!==null&&Xu(n)&&(ms=!0))}function Cv(n,r,a,c){Mt=n;var f=0;do{if(al&&(ol=null),lc=0,al=!1,25<=f)throw Error(i(301));if(f+=1,fs=wn=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=u0,m=r(a,c)}while(al);return m}function XE(){var n=Q.H,r=n.useState()[0];return r=typeof r.then=="function"?cc(r):r,n=n.useState()[0],(wn!==null?wn.memoizedState:null)!==n&&(Mt.flags|=1024),r}function Wf(){var n=oh!==0;return oh=0,n}function Gf(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function Kf(n){if(ah){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ah=!1}Oi=0,fs=wn=Mt=null,al=!1,lc=oh=0,ol=null}function Zs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fs===null?Mt.memoizedState=fs=n:fs=fs.next=n,fs}function cs(){if(wn===null){var n=Mt.alternate;n=n!==null?n.memoizedState:null}else n=wn.next;var r=fs===null?Mt.memoizedState:fs.next;if(r!==null)fs=r,wn=n;else{if(n===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));wn=n,n={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},fs===null?Mt.memoizedState=fs=n:fs=fs.next=n}return fs}function lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cc(n){var r=lc;return lc+=1,ol===null&&(ol=[]),n=vv(ol,n,r),r=Mt,(fs===null?r.memoizedState:fs.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?c0:am),n}function ch(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return cc(n);if(n.$$typeof===ie)return Os(n)}throw Error(i(438,String(n)))}function Yf(n){var r=null,a=Mt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Mt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=lh(),Mt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),c=0;c<n;c++)a[c]=V;return r.index++,a}function Pi(n,r){return typeof r=="function"?r(n):r}function uh(n){var r=cs();return Qf(r,wn,n)}function Qf(n,r,a){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var k=_=null,B=null,Z=r,fe=!1;do{var ge=Z.lane&-536870913;if(ge!==Z.lane?(Wt&ge)===ge:(Oi&ge)===ge){var se=Z.revertLane;if(se===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ge===tl&&(fe=!0);else if((Oi&se)===se){Z=Z.next,se===tl&&(fe=!0);continue}else ge={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(k=B=ge,_=m):B=B.next=ge,Mt.lanes|=se,xa|=se;ge=Z.action,vo&&a(m,ge),m=Z.hasEagerState?Z.eagerState:a(m,ge)}else se={lane:ge,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(k=B=se,_=m):B=B.next=se,Mt.lanes|=ge,xa|=ge;Z=Z.next}while(Z!==null&&Z!==r);if(B===null?_=m:B.next=k,!vr(m,n.memoizedState)&&(ms=!0,fe&&(a=nl,a!==null)))throw a;n.memoizedState=m,n.baseState=_,n.baseQueue=B,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Xf(n){var r=cs(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,m=r.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);vr(m,r.memoizedState)||(ms=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,c]}function Nv(n,r,a){var c=Mt,f=cs(),m=en;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=r();var _=!vr((wn||f).memoizedState,a);if(_&&(f.memoizedState=a,ms=!0),f=f.queue,em(Iv.bind(null,c,f,n),[n]),f.getSnapshot!==r||_||fs!==null&&fs.memoizedState.tag&1){if(c.flags|=2048,ll(9,{destroy:void 0},Rv.bind(null,c,f,a,r),null),Nn===null)throw Error(i(349));m||(Oi&127)!==0||Av(c,r,a)}return a}function Av(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Mt.updateQueue,r===null?(r=lh(),Mt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Rv(n,r,a,c){r.value=a,r.getSnapshot=c,Dv(r)&&Mv(n)}function Iv(n,r,a){return a(function(){Dv(r)&&Mv(n)})}function Dv(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!vr(n,a)}catch{return!0}}function Mv(n){var r=lo(n,2);r!==null&&ur(r,n,2)}function Jf(n){var r=Zs();if(typeof n=="function"){var a=n;if(n=a(),vo){st(!0);try{a()}finally{st(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:n},r}function Lv(n,r,a,c){return n.baseState=a,Qf(n,wn,typeof c=="function"?c:Pi)}function JE(n,r,a,c,f){if(fh(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};Q.T!==null?a(!0):m.isTransition=!1,c(m),a=r.pending,a===null?(m.next=r.pending=m,Ov(r,m)):(m.next=a.next,r.pending=a.next=m)}}function Ov(n,r){var a=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=Q.T,_={};Q.T=_;try{var k=a(f,c),B=Q.S;B!==null&&B(_,k),Pv(n,r,k)}catch(Z){Zf(n,r,Z)}finally{m!==null&&_.types!==null&&(m.types=_.types),Q.T=m}}else try{m=a(f,c),Pv(n,r,m)}catch(Z){Zf(n,r,Z)}}function Pv(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Vv(n,r,c)},function(c){return Zf(n,r,c)}):Vv(n,r,a)}function Vv(n,r,a){r.status="fulfilled",r.value=a,Uv(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,Ov(n,a)))}function Zf(n,r,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,Uv(r),r=r.next;while(r!==c)}n.action=null}function Uv(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Bv(n,r){return r}function zv(n,r){if(en){var a=Nn.formState;if(a!==null){e:{var c=Mt;if(en){if(Ln){t:{for(var f=Ln,m=Br;f.nodeType!==8;){if(!m){f=null;break t}if(f=Fr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ln=Fr(f.nextSibling),c=f.data==="F!";break e}}fa(c)}c=!1}c&&(r=a[0])}}return a=Zs(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bv,lastRenderedState:r},a.queue=c,a=a0.bind(null,Mt,c),c.dispatch=a,c=Jf(!1),m=im.bind(null,Mt,!1,c.queue),c=Zs(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,a=JE.bind(null,Mt,f,m,a),f.dispatch=a,c.memoizedState=n,[r,a,!1]}function Fv(n){var r=cs();return qv(r,wn,n)}function qv(n,r,a){if(r=Qf(n,r,Bv)[0],n=uh(Pi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=cc(r)}catch(_){throw _===sl?eh:_}else c=r;r=cs();var f=r.queue,m=f.dispatch;return a!==r.memoizedState&&(Mt.flags|=2048,ll(9,{destroy:void 0},ZE.bind(null,f,a),null)),[c,m,n]}function ZE(n,r){n.action=r}function Hv(n){var r=cs(),a=wn;if(a!==null)return qv(r,a,n);cs(),r=r.memoizedState,a=cs();var c=a.queue.dispatch;return a.memoizedState=n,[r,c,!1]}function ll(n,r,a,c){return n={tag:n,create:a,deps:c,inst:r,next:null},r=Mt.updateQueue,r===null&&(r=lh(),Mt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n),n}function $v(){return cs().memoizedState}function hh(n,r,a,c){var f=Zs();Mt.flags|=n,f.memoizedState=ll(1|r,{destroy:void 0},a,c===void 0?null:c)}function dh(n,r,a,c){var f=cs();c=c===void 0?null:c;var m=f.memoizedState.inst;wn!==null&&c!==null&&Hf(c,wn.memoizedState.deps)?f.memoizedState=ll(r,m,a,c):(Mt.flags|=n,f.memoizedState=ll(1|r,m,a,c))}function Wv(n,r){hh(8390656,8,n,r)}function em(n,r){dh(2048,8,n,r)}function eT(n){Mt.flags|=4;var r=Mt.updateQueue;if(r===null)r=lh(),Mt.updateQueue=r,r.events=[n];else{var a=r.events;a===null?r.events=[n]:a.push(n)}}function Gv(n){var r=cs().memoizedState;return eT({ref:r,nextImpl:n}),function(){if((cn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Kv(n,r){return dh(4,2,n,r)}function Yv(n,r){return dh(4,4,n,r)}function Qv(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Xv(n,r,a){a=a!=null?a.concat([n]):null,dh(4,4,Qv.bind(null,r,n),a)}function tm(){}function Jv(n,r){var a=cs();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Hf(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Zv(n,r){var a=cs();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Hf(r,c[1]))return c[0];if(c=n(),vo){st(!0);try{n()}finally{st(!1)}}return a.memoizedState=[c,r],c}function nm(n,r,a){return a===void 0||(Oi&1073741824)!==0&&(Wt&261930)===0?n.memoizedState=r:(n.memoizedState=a,n=e1(),Mt.lanes|=n,xa|=n,a)}function e0(n,r,a,c){return vr(a,r)?a:il.current!==null?(n=nm(n,a,c),vr(n,r)||(ms=!0),n):(Oi&42)===0||(Oi&1073741824)!==0&&(Wt&261930)===0?(ms=!0,n.memoizedState=a):(n=e1(),Mt.lanes|=n,xa|=n,r)}function t0(n,r,a,c,f){var m=Te.p;Te.p=m!==0&&8>m?m:8;var _=Q.T,k={};Q.T=k,im(n,!1,r,a);try{var B=f(),Z=Q.S;if(Z!==null&&Z(k,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var fe=YE(B,c);uc(n,r,fe,Tr(n))}else uc(n,r,c,Tr(n))}catch(ge){uc(n,r,{then:function(){},status:"rejected",reason:ge},Tr())}finally{Te.p=m,_!==null&&k.types!==null&&(_.types=k.types),Q.T=_}}function tT(){}function sm(n,r,a,c){if(n.tag!==5)throw Error(i(476));var f=n0(n).queue;t0(n,f,r,Ie,a===null?tT:function(){return s0(n),a(c)})}function n0(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Ie,baseState:Ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:Ie},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function s0(n){var r=n0(n);r.next===null&&(r=n.alternate.memoizedState),uc(n,r.next.queue,{},Tr())}function rm(){return Os(jc)}function r0(){return cs().memoizedState}function i0(){return cs().memoizedState}function nT(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Tr();n=ga(a);var c=ya(r,n,a);c!==null&&(ur(c,r,a),ic(c,r,a)),r={cache:Df()},n.payload=r;return}r=r.return}}function sT(n,r,a){var c=Tr();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},fh(n)?o0(r,a):(a=xf(n,r,a,c),a!==null&&(ur(a,n,c),l0(a,r,c)))}function a0(n,r,a){var c=Tr();uc(n,r,a,c)}function uc(n,r,a,c){var f={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(fh(n))o0(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,k=m(_,a);if(f.hasEagerState=!0,f.eagerState=k,vr(k,_))return Gu(n,r,f,0),Nn===null&&Wu(),!1}catch{}if(a=xf(n,r,f,c),a!==null)return ur(a,n,c),l0(a,r,c),!0}return!1}function im(n,r,a,c){if(c={lane:2,revertLane:Pm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},fh(n)){if(r)throw Error(i(479))}else r=xf(n,a,c,2),r!==null&&ur(r,n,2)}function fh(n){var r=n.alternate;return n===Mt||r!==null&&r===Mt}function o0(n,r){al=ah=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function l0(n,r,a){if((a&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,hn(n,a)}}var hc={readContext:Os,use:ch,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useLayoutEffect:Xn,useInsertionEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useSyncExternalStore:Xn,useId:Xn,useHostTransitionStatus:Xn,useFormState:Xn,useActionState:Xn,useOptimistic:Xn,useMemoCache:Xn,useCacheRefresh:Xn};hc.useEffectEvent=Xn;var c0={readContext:Os,use:ch,useCallback:function(n,r){return Zs().memoizedState=[n,r===void 0?null:r],n},useContext:Os,useEffect:Wv,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,hh(4194308,4,Qv.bind(null,r,n),a)},useLayoutEffect:function(n,r){return hh(4194308,4,n,r)},useInsertionEffect:function(n,r){hh(4,2,n,r)},useMemo:function(n,r){var a=Zs();r=r===void 0?null:r;var c=n();if(vo){st(!0);try{n()}finally{st(!1)}}return a.memoizedState=[c,r],c},useReducer:function(n,r,a){var c=Zs();if(a!==void 0){var f=a(r);if(vo){st(!0);try{a(r)}finally{st(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=sT.bind(null,Mt,n),[c.memoizedState,n]},useRef:function(n){var r=Zs();return n={current:n},r.memoizedState=n},useState:function(n){n=Jf(n);var r=n.queue,a=a0.bind(null,Mt,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:tm,useDeferredValue:function(n,r){var a=Zs();return nm(a,n,r)},useTransition:function(){var n=Jf(!1);return n=t0.bind(null,Mt,n.queue,!0,!1),Zs().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var c=Mt,f=Zs();if(en){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),Nn===null)throw Error(i(349));(Wt&127)!==0||Av(c,r,a)}f.memoizedState=a;var m={value:a,getSnapshot:r};return f.queue=m,Wv(Iv.bind(null,c,m,n),[n]),c.flags|=2048,ll(9,{destroy:void 0},Rv.bind(null,c,m,a,r),null),a},useId:function(){var n=Zs(),r=Nn.identifierPrefix;if(en){var a=di,c=hi;a=(c&~(1<<32-$e(c)-1)).toString(32)+a,r="_"+r+"R_"+a,a=oh++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=QE++,r="_"+r+"r_"+a.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:rm,useFormState:zv,useActionState:zv,useOptimistic:function(n){var r=Zs();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=im.bind(null,Mt,!0,a),a.dispatch=r,[n,r]},useMemoCache:Yf,useCacheRefresh:function(){return Zs().memoizedState=nT.bind(null,Mt)},useEffectEvent:function(n){var r=Zs(),a={impl:n};return r.memoizedState=a,function(){if((cn&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},am={readContext:Os,use:ch,useCallback:Jv,useContext:Os,useEffect:em,useImperativeHandle:Xv,useInsertionEffect:Kv,useLayoutEffect:Yv,useMemo:Zv,useReducer:uh,useRef:$v,useState:function(){return uh(Pi)},useDebugValue:tm,useDeferredValue:function(n,r){var a=cs();return e0(a,wn.memoizedState,n,r)},useTransition:function(){var n=uh(Pi)[0],r=cs().memoizedState;return[typeof n=="boolean"?n:cc(n),r]},useSyncExternalStore:Nv,useId:r0,useHostTransitionStatus:rm,useFormState:Fv,useActionState:Fv,useOptimistic:function(n,r){var a=cs();return Lv(a,wn,n,r)},useMemoCache:Yf,useCacheRefresh:i0};am.useEffectEvent=Gv;var u0={readContext:Os,use:ch,useCallback:Jv,useContext:Os,useEffect:em,useImperativeHandle:Xv,useInsertionEffect:Kv,useLayoutEffect:Yv,useMemo:Zv,useReducer:Xf,useRef:$v,useState:function(){return Xf(Pi)},useDebugValue:tm,useDeferredValue:function(n,r){var a=cs();return wn===null?nm(a,n,r):e0(a,wn.memoizedState,n,r)},useTransition:function(){var n=Xf(Pi)[0],r=cs().memoizedState;return[typeof n=="boolean"?n:cc(n),r]},useSyncExternalStore:Nv,useId:r0,useHostTransitionStatus:rm,useFormState:Hv,useActionState:Hv,useOptimistic:function(n,r){var a=cs();return wn!==null?Lv(a,wn,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Yf,useCacheRefresh:i0};u0.useEffectEvent=Gv;function om(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:E({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var lm={enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Tr(),f=ga(c);f.payload=r,a!=null&&(f.callback=a),r=ya(n,f,c),r!==null&&(ur(r,n,c),ic(r,n,c))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Tr(),f=ga(c);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=ya(n,f,c),r!==null&&(ur(r,n,c),ic(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Tr(),c=ga(a);c.tag=2,r!=null&&(c.callback=r),r=ya(n,c,a),r!==null&&(ur(r,n,a),ic(r,n,a))}};function h0(n,r,a,c,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,_):r.prototype&&r.prototype.isPureReactComponent?!Xl(a,c)||!Xl(f,m):!0}function d0(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&lm.enqueueReplaceState(r,r.state,null)}function bo(n,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(n=n.defaultProps){a===r&&(a=E({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function f0(n){$u(n)}function m0(n){console.error(n)}function p0(n){$u(n)}function mh(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function g0(n,r,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function cm(n,r,a){return a=ga(a),a.tag=3,a.payload={element:null},a.callback=function(){mh(n,r)},a}function y0(n){return n=ga(n),n.tag=3,n}function v0(n,r,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){g0(r,a,c)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){g0(r,a,c),typeof f!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})})}function rT(n,r,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&el(r,a,f,!0),a=_r.current,a!==null){switch(a.tag){case 31:case 13:return zr===null?Sh():a.alternate===null&&Jn===0&&(Jn=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===th?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Mm(n,c,f)),!1;case 22:return a.flags|=65536,c===th?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Mm(n,c,f)),!1}throw Error(i(435,a.tag))}return Mm(n,c,f),Sh(),!1}if(en)return r=_r.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Cf&&(n=Error(i(422),{cause:c}),ec(Pr(n,a)))):(c!==Cf&&(r=Error(i(423),{cause:c}),ec(Pr(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Pr(c,a),f=cm(n.stateNode,c,f),Uf(n,f),Jn!==4&&(Jn=2)),!1;var m=Error(i(520),{cause:c});if(m=Pr(m,a),bc===null?bc=[m]:bc.push(m),Jn!==4&&(Jn=2),r===null)return!0;c=Pr(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=cm(a.stateNode,c,n),Uf(a,n),!1;case 1:if(r=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ea===null||!Ea.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=y0(f),v0(f,n,a,c),Uf(a,f),!1}a=a.return}while(a!==null);return!1}var um=Error(i(461)),ms=!1;function Ps(n,r,a,c){r.child=n===null?xv(r,null,a,c):yo(r,n.child,a,c)}function b0(n,r,a,c,f){a=a.render;var m=r.ref;if("ref"in c){var _={};for(var k in c)k!=="ref"&&(_[k]=c[k])}else _=c;return fo(r),c=$f(n,r,a,_,m,f),k=Wf(),n!==null&&!ms?(Gf(n,r,f),Vi(n,r,f)):(en&&k&&Sf(r),r.flags|=1,Ps(n,r,c,f),r.child)}function _0(n,r,a,c,f){if(n===null){var m=a.type;return typeof m=="function"&&!Ef(m)&&m.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=m,w0(n,r,m,c,f)):(n=Yu(a.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!vm(n,f)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Xl,a(_,c)&&n.ref===r.ref)return Vi(n,r,f)}return r.flags|=1,n=Ii(m,c),n.ref=r.ref,n.return=r,r.child=n}function w0(n,r,a,c,f){if(n!==null){var m=n.memoizedProps;if(Xl(m,c)&&n.ref===r.ref)if(ms=!1,r.pendingProps=c=m,vm(n,f))(n.flags&131072)!==0&&(ms=!0);else return r.lanes=n.lanes,Vi(n,r,f)}return hm(n,r,a,c,f)}function x0(n,r,a,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return E0(n,r,m,a,c)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Zu(r,m!==null?m.cachePool:null),m!==null?kv(r,m):zf(),Sv(r);else return c=r.lanes=536870912,E0(n,r,m!==null?m.baseLanes|a:a,a,c)}else m!==null?(Zu(r,m.cachePool),kv(r,m),ba(),r.memoizedState=null):(n!==null&&Zu(r,null),zf(),ba());return Ps(n,r,f,a),r.child}function dc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function E0(n,r,a,c,f){var m=Lf();return m=m===null?null:{parent:ds._currentValue,pool:m},r.memoizedState={baseLanes:a,cachePool:m},n!==null&&Zu(r,null),zf(),Sv(r),n!==null&&el(n,r,c,!0),r.childLanes=f,null}function ph(n,r){return r=yh({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function T0(n,r,a){return yo(r,n.child,null,a),n=ph(r,r.pendingProps),n.flags|=2,wr(r),r.memoizedState=null,n}function iT(n,r,a){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(en){if(c.mode==="hidden")return n=ph(r,c),r.lanes=536870912,dc(null,n);if(qf(r),(n=Ln)?(n=O1(n,Br),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ha!==null?{id:hi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},a=ov(n),a.return=r,r.child=a,Ls=r,Ln=null)):n=null,n===null)throw fa(r);return r.lanes=536870912,null}return ph(r,c)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(qf(r),f)if(r.flags&256)r.flags&=-257,r=T0(n,r,a);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(ms||el(n,r,a,!1),f=(a&n.childLanes)!==0,ms||f){if(c=Nn,c!==null&&(_=Un(c,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,lo(n,_),ur(c,n,_),um;Sh(),r=T0(n,r,a)}else n=m.treeContext,Ln=Fr(_.nextSibling),Ls=r,en=!0,da=null,Br=!1,n!==null&&uv(r,n),r=ph(r,c),r.flags|=4096;return r}return n=Ii(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function gh(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function hm(n,r,a,c,f){return fo(r),a=$f(n,r,a,c,void 0,f),c=Wf(),n!==null&&!ms?(Gf(n,r,f),Vi(n,r,f)):(en&&c&&Sf(r),r.flags|=1,Ps(n,r,a,f),r.child)}function k0(n,r,a,c,f,m){return fo(r),r.updateQueue=null,a=Cv(r,c,a,f),jv(n),c=Wf(),n!==null&&!ms?(Gf(n,r,m),Vi(n,r,m)):(en&&c&&Sf(r),r.flags|=1,Ps(n,r,a,m),r.child)}function S0(n,r,a,c,f){if(fo(r),r.stateNode===null){var m=Qo,_=a.contextType;typeof _=="object"&&_!==null&&(m=Os(_)),m=new a(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=lm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Pf(r),_=a.contextType,m.context=typeof _=="object"&&_!==null?Os(_):Qo,m.state=r.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(om(r,a,_,c),m.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&lm.enqueueReplaceState(m,m.state,null),oc(r,c,m,f),ac(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var k=r.memoizedProps,B=bo(a,k);m.props=B;var Z=m.context,fe=a.contextType;_=Qo,typeof fe=="object"&&fe!==null&&(_=Os(fe));var ge=a.getDerivedStateFromProps;fe=typeof ge=="function"||typeof m.getSnapshotBeforeUpdate=="function",k=r.pendingProps!==k,fe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(k||Z!==_)&&d0(r,m,c,_),pa=!1;var se=r.memoizedState;m.state=se,oc(r,c,m,f),ac(),Z=r.memoizedState,k||se!==Z||pa?(typeof ge=="function"&&(om(r,a,ge,c),Z=r.memoizedState),(B=pa||h0(r,a,B,c,se,Z,_))?(fe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Z),m.props=c,m.state=Z,m.context=_,c=B):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Vf(n,r),_=r.memoizedProps,fe=bo(a,_),m.props=fe,ge=r.pendingProps,se=m.context,Z=a.contextType,B=Qo,typeof Z=="object"&&Z!==null&&(B=Os(Z)),k=a.getDerivedStateFromProps,(Z=typeof k=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ge||se!==B)&&d0(r,m,c,B),pa=!1,se=r.memoizedState,m.state=se,oc(r,c,m,f),ac();var ue=r.memoizedState;_!==ge||se!==ue||pa||n!==null&&n.dependencies!==null&&Xu(n.dependencies)?(typeof k=="function"&&(om(r,a,k,c),ue=r.memoizedState),(fe=pa||h0(r,a,fe,c,se,ue,B)||n!==null&&n.dependencies!==null&&Xu(n.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ue,B),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ue,B)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&se===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&se===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ue),m.props=c,m.state=ue,m.context=B,c=fe):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&se===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&se===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,gh(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=yo(r,n.child,null,f),r.child=yo(r,null,a,f)):Ps(n,r,a,f),r.memoizedState=m.state,n=r.child):n=Vi(n,r,f),n}function j0(n,r,a,c){return uo(),r.flags|=256,Ps(n,r,a,c),r.child}var dm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fm(n){return{baseLanes:n,cachePool:gv()}}function mm(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=Er),n}function C0(n,r,a){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(ls.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,n===null){if(en){if(f?va(r):ba(),(n=Ln)?(n=O1(n,Br),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ha!==null?{id:hi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},a=ov(n),a.return=r,r.child=a,Ls=r,Ln=null)):n=null,n===null)throw fa(r);return Qm(n)?r.lanes=32:r.lanes=536870912,null}var k=c.children;return c=c.fallback,f?(ba(),f=r.mode,k=yh({mode:"hidden",children:k},f),c=co(c,f,a,null),k.return=r,c.return=r,k.sibling=c,r.child=k,c=r.child,c.memoizedState=fm(a),c.childLanes=mm(n,_,a),r.memoizedState=dm,dc(null,c)):(va(r),pm(r,k))}var B=n.memoizedState;if(B!==null&&(k=B.dehydrated,k!==null)){if(m)r.flags&256?(va(r),r.flags&=-257,r=gm(n,r,a)):r.memoizedState!==null?(ba(),r.child=n.child,r.flags|=128,r=null):(ba(),k=c.fallback,f=r.mode,c=yh({mode:"visible",children:c.children},f),k=co(k,f,a,null),k.flags|=2,c.return=r,k.return=r,c.sibling=k,r.child=c,yo(r,n.child,null,a),c=r.child,c.memoizedState=fm(a),c.childLanes=mm(n,_,a),r.memoizedState=dm,r=dc(null,c));else if(va(r),Qm(k)){if(_=k.nextSibling&&k.nextSibling.dataset,_)var Z=_.dgst;_=Z,c=Error(i(419)),c.stack="",c.digest=_,ec({value:c,source:null,stack:null}),r=gm(n,r,a)}else if(ms||el(n,r,a,!1),_=(a&n.childLanes)!==0,ms||_){if(_=Nn,_!==null&&(c=Un(_,a),c!==0&&c!==B.retryLane))throw B.retryLane=c,lo(n,c),ur(_,n,c),um;Ym(k)||Sh(),r=gm(n,r,a)}else Ym(k)?(r.flags|=192,r.child=n.child,r=null):(n=B.treeContext,Ln=Fr(k.nextSibling),Ls=r,en=!0,da=null,Br=!1,n!==null&&uv(r,n),r=pm(r,c.children),r.flags|=4096);return r}return f?(ba(),k=c.fallback,f=r.mode,B=n.child,Z=B.sibling,c=Ii(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,Z!==null?k=Ii(Z,k):(k=co(k,f,a,null),k.flags|=2),k.return=r,c.return=r,c.sibling=k,r.child=c,dc(null,c),c=r.child,k=n.child.memoizedState,k===null?k=fm(a):(f=k.cachePool,f!==null?(B=ds._currentValue,f=f.parent!==B?{parent:B,pool:B}:f):f=gv(),k={baseLanes:k.baseLanes|a,cachePool:f}),c.memoizedState=k,c.childLanes=mm(n,_,a),r.memoizedState=dm,dc(n.child,c)):(va(r),a=n.child,n=a.sibling,a=Ii(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,n!==null&&(_=r.deletions,_===null?(r.deletions=[n],r.flags|=16):_.push(n)),r.child=a,r.memoizedState=null,a)}function pm(n,r){return r=yh({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function yh(n,r){return n=br(22,n,null,r),n.lanes=0,n}function gm(n,r,a){return yo(r,n.child,null,a),n=pm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function N0(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Rf(n.return,r,a)}function ym(n,r,a,c,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f,treeForkCount:m}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=a,_.tailMode=f,_.treeForkCount=m)}function A0(n,r,a){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var _=ls.current,k=(_&2)!==0;if(k?(_=_&1|2,r.flags|=128):_&=1,xe(ls,_),Ps(n,r,c,a),c=en?Zl:0,!k&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&N0(n,a,r);else if(n.tag===19)N0(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&ih(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),ym(r,!1,f,a,m,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&ih(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}ym(r,!0,a,null,m,c);break;case"together":ym(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Vi(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),xa|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(el(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,a=Ii(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Ii(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function vm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Xu(n)))}function aT(n,r,a){switch(r.tag){case 3:ct(r,r.stateNode.containerInfo),ma(r,ds,n.memoizedState.cache),uo();break;case 27:case 5:sn(r);break;case 4:ct(r,r.stateNode.containerInfo);break;case 10:ma(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,qf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(va(r),r.flags|=128,null):(a&r.child.childLanes)!==0?C0(n,r,a):(va(r),n=Vi(n,r,a),n!==null?n.sibling:null);va(r);break;case 19:var f=(n.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(el(n,r,a,!1),c=(a&r.childLanes)!==0),f){if(c)return A0(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),xe(ls,ls.current),c)break;return null;case 22:return r.lanes=0,x0(n,r,a,r.pendingProps);case 24:ma(r,ds,n.memoizedState.cache)}return Vi(n,r,a)}function R0(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)ms=!0;else{if(!vm(n,a)&&(r.flags&128)===0)return ms=!1,aT(n,r,a);ms=(n.flags&131072)!==0}else ms=!1,en&&(r.flags&1048576)!==0&&cv(r,Zl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=po(r.elementType),r.type=n,typeof n=="function")Ef(n)?(c=bo(n,c),r.tag=1,r=S0(null,r,n,c,a)):(r.tag=0,r=hm(null,r,n,c,a));else{if(n!=null){var f=n.$$typeof;if(f===de){r.tag=11,r=b0(null,r,n,c,a);break e}else if(f===N){r.tag=14,r=_0(null,r,n,c,a);break e}}throw r=Me(n)||n,Error(i(306,r,""))}}return r;case 0:return hm(n,r,r.type,r.pendingProps,a);case 1:return c=r.type,f=bo(c,r.pendingProps),S0(n,r,c,f,a);case 3:e:{if(ct(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Vf(n,r),oc(r,c,null,a);var _=r.memoizedState;if(c=_.cache,ma(r,ds,c),c!==m.cache&&If(r,[ds],a,!0),ac(),c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=j0(n,r,c,a);break e}else if(c!==f){f=Pr(Error(i(424)),r),ec(f),r=j0(n,r,c,a);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ln=Fr(n.firstChild),Ls=r,en=!0,da=null,Br=!0,a=xv(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(uo(),c===f){r=Vi(n,r,a);break e}Ps(n,r,c,a)}r=r.child}return r;case 26:return gh(n,r),n===null?(a=F1(r.type,null,r.pendingProps,null))?r.memoizedState=a:en||(a=r.type,n=r.pendingProps,c=Dh(be.current).createElement(a),c[dn]=r,c[Cn]=n,Vs(c,a,n),Ht(c),r.stateNode=c):r.memoizedState=F1(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return sn(r),n===null&&en&&(c=r.stateNode=U1(r.type,r.pendingProps,be.current),Ls=r,Br=!0,f=Ln,ja(r.type)?(Xm=f,Ln=Fr(c.firstChild)):Ln=f),Ps(n,r,r.pendingProps.children,a),gh(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&en&&((f=c=Ln)&&(c=OT(c,r.type,r.pendingProps,Br),c!==null?(r.stateNode=c,Ls=r,Ln=Fr(c.firstChild),Br=!1,f=!0):f=!1),f||fa(r)),sn(r),f=r.type,m=r.pendingProps,_=n!==null?n.memoizedProps:null,c=m.children,Wm(f,m)?c=null:_!==null&&Wm(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=$f(n,r,XE,null,null,a),jc._currentValue=f),gh(n,r),Ps(n,r,c,a),r.child;case 6:return n===null&&en&&((n=a=Ln)&&(a=PT(a,r.pendingProps,Br),a!==null?(r.stateNode=a,Ls=r,Ln=null,n=!0):n=!1),n||fa(r)),null;case 13:return C0(n,r,a);case 4:return ct(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=yo(r,null,c,a):Ps(n,r,c,a),r.child;case 11:return b0(n,r,r.type,r.pendingProps,a);case 7:return Ps(n,r,r.pendingProps,a),r.child;case 8:return Ps(n,r,r.pendingProps.children,a),r.child;case 12:return Ps(n,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,ma(r,r.type,c.value),Ps(n,r,c.children,a),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,fo(r),f=Os(f),c=c(f),r.flags|=1,Ps(n,r,c,a),r.child;case 14:return _0(n,r,r.type,r.pendingProps,a);case 15:return w0(n,r,r.type,r.pendingProps,a);case 19:return A0(n,r,a);case 31:return iT(n,r,a);case 22:return x0(n,r,a,r.pendingProps);case 24:return fo(r),c=Os(ds),n===null?(f=Lf(),f===null&&(f=Nn,m=Df(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),r.memoizedState={parent:c,cache:f},Pf(r),ma(r,ds,f)):((n.lanes&a)!==0&&(Vf(n,r),oc(r,null,null,a),ac()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ma(r,ds,c)):(c=m.cache,ma(r,ds,c),c!==f.cache&&If(r,[ds],a,!0))),Ps(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ui(n){n.flags|=4}function bm(n,r,a,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(r1())n.flags|=8192;else throw go=th,Of}else n.flags&=-16777217}function I0(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!G1(r))if(r1())n.flags|=8192;else throw go=th,Of}function vh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?le():536870912,n.lanes|=r,dl|=r)}function fc(n,r){if(!en)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function On(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function oT(n,r,a){var c=r.pendingProps;switch(jf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(r),null;case 1:return On(r),null;case 3:return a=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Li(ds),Ve(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Zo(r)?Ui(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nf())),On(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(Ui(r),m!==null?(On(r),I0(r,m)):(On(r),bm(r,f,null,c,a))):m?m!==n.memoizedState?(Ui(r),On(r),I0(r,m)):(On(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&Ui(r),On(r),bm(r,f,n,c,a)),null;case 27:if(Sn(r),a=be.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Ui(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return On(r),null}n=ke.current,Zo(r)?hv(r):(n=U1(f,c,a),r.stateNode=n,Ui(r))}return On(r),null;case 5:if(Sn(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Ui(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return On(r),null}if(m=ke.current,Zo(r))hv(r);else{var _=Dh(be.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?_.createElement(f,{is:c.is}):_.createElement(f)}}m[dn]=r,m[Cn]=c;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=m;e:switch(Vs(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ui(r)}}return On(r),bm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,a),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&Ui(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=be.current,Zo(r)){if(n=r.stateNode,a=r.memoizedProps,c=null,f=Ls,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[dn]=r,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||C1(n.nodeValue,a)),n||fa(r,!0)}else n=Dh(n).createTextNode(c),n[dn]=r,r.stateNode=n}return On(r),null;case 31:if(a=r.memoizedState,n===null||n.memoizedState!==null){if(c=Zo(r),a!==null){if(n===null){if(!c)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[dn]=r}else uo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;On(r),n=!1}else a=Nf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return r.flags&256?(wr(r),r):(wr(r),null);if((r.flags&128)!==0)throw Error(i(558))}return On(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Zo(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[dn]=r}else uo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;On(r),f=!1}else f=Nf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(wr(r),r):(wr(r),null)}return wr(r),(r.flags&128)!==0?(r.lanes=a,r):(a=c!==null,n=n!==null&&n.memoizedState!==null,a&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),a!==n&&a&&(r.child.flags|=8192),vh(r,r.updateQueue),On(r),null);case 4:return Ve(),n===null&&zm(r.stateNode.containerInfo),On(r),null;case 10:return Li(r.type),On(r),null;case 19:if(X(ls),c=r.memoizedState,c===null)return On(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)fc(c,!1);else{if(Jn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=ih(n),m!==null){for(r.flags|=128,fc(c,!1),n=m.updateQueue,r.updateQueue=n,vh(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)av(a,n),a=a.sibling;return xe(ls,ls.current&1|2),en&&Di(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&St()>Eh&&(r.flags|=128,f=!0,fc(c,!1),r.lanes=4194304)}else{if(!f)if(n=ih(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,vh(r,n),fc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!en)return On(r),null}else 2*St()-c.renderingStartTime>Eh&&a!==536870912&&(r.flags|=128,f=!0,fc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=St(),n.sibling=null,a=ls.current,xe(ls,f?a&1|2:a&1),en&&Di(r,c.treeForkCount),n):(On(r),null);case 22:case 23:return wr(r),Ff(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(On(r),r.subtreeFlags&6&&(r.flags|=8192)):On(r),a=r.updateQueue,a!==null&&vh(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),n!==null&&X(mo),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Li(ds),On(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function lT(n,r){switch(jf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Li(ds),Ve(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Sn(r),null;case 31:if(r.memoizedState!==null){if(wr(r),r.alternate===null)throw Error(i(340));uo()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(wr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));uo()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return X(ls),null;case 4:return Ve(),null;case 10:return Li(r.type),null;case 22:case 23:return wr(r),Ff(),n!==null&&X(mo),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Li(ds),null;case 25:return null;default:return null}}function D0(n,r){switch(jf(r),r.tag){case 3:Li(ds),Ve();break;case 26:case 27:case 5:Sn(r);break;case 4:Ve();break;case 31:r.memoizedState!==null&&wr(r);break;case 13:wr(r);break;case 19:X(ls);break;case 10:Li(r.type);break;case 22:case 23:wr(r),Ff(),n!==null&&X(mo);break;case 24:Li(ds)}}function mc(n,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&n)===n){c=void 0;var m=a.create,_=a.inst;c=m(),_.destroy=c}a=a.next}while(a!==f)}}catch(k){vn(r,r.return,k)}}function _a(n,r,a){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var _=c.inst,k=_.destroy;if(k!==void 0){_.destroy=void 0,f=r;var B=a,Z=k;try{Z()}catch(fe){vn(f,B,fe)}}}c=c.next}while(c!==m)}}catch(fe){vn(r,r.return,fe)}}function M0(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{Tv(r,a)}catch(c){vn(n,n.return,c)}}}function L0(n,r,a){a.props=bo(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){vn(n,r,c)}}function pc(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof a=="function"?n.refCleanup=a(c):a.current=c}}catch(f){vn(n,r,f)}}function fi(n,r){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){vn(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){vn(n,r,f)}else a.current=null}function O0(n){var r=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){vn(n,n.return,f)}}function _m(n,r,a){try{var c=n.stateNode;AT(c,n.type,a,r),c[Cn]=r}catch(f){vn(n,n.return,f)}}function P0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ja(n.type)||n.tag===4}function wm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||P0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ja(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xm(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=jt));else if(c!==4&&(c===27&&ja(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(xm(n,r,a),n=n.sibling;n!==null;)xm(n,r,a),n=n.sibling}function bh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(c===27&&ja(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(bh(n,r,a),n=n.sibling;n!==null;)bh(n,r,a),n=n.sibling}function V0(n){var r=n.stateNode,a=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Vs(r,c,a),r[dn]=n,r[Cn]=a}catch(m){vn(n,n.return,m)}}var Bi=!1,ps=!1,Em=!1,U0=typeof WeakSet=="function"?WeakSet:Set,Rs=null;function cT(n,r){if(n=n.containerInfo,Hm=Bh,n=Xy(n),gf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,k=-1,B=-1,Z=0,fe=0,ge=n,se=null;t:for(;;){for(var ue;ge!==a||f!==0&&ge.nodeType!==3||(k=_+f),ge!==m||c!==0&&ge.nodeType!==3||(B=_+c),ge.nodeType===3&&(_+=ge.nodeValue.length),(ue=ge.firstChild)!==null;)se=ge,ge=ue;for(;;){if(ge===n)break t;if(se===a&&++Z===f&&(k=_),se===m&&++fe===c&&(B=_),(ue=ge.nextSibling)!==null)break;ge=se,se=ge.parentNode}ge=ue}a=k===-1||B===-1?null:{start:k,end:B}}else a=null}a=a||{start:0,end:0}}else a=null;for($m={focusedElem:n,selectionRange:a},Bh=!1,Rs=r;Rs!==null;)if(r=Rs,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Rs=n;else for(;Rs!==null;){switch(r=Rs,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=r,f=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var Qe=bo(a.type,f);n=c.getSnapshotBeforeUpdate(Qe,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(ft){vn(a,a.return,ft)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)Km(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Km(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Rs=n;break}Rs=r.return}}function B0(n,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Fi(n,a),c&4&&mc(5,a);break;case 1:if(Fi(n,a),c&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(_){vn(a,a.return,_)}else{var f=bo(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(_){vn(a,a.return,_)}}c&64&&M0(a),c&512&&pc(a,a.return);break;case 3:if(Fi(n,a),c&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Tv(n,r)}catch(_){vn(a,a.return,_)}}break;case 27:r===null&&c&4&&V0(a);case 26:case 5:Fi(n,a),r===null&&c&4&&O0(a),c&512&&pc(a,a.return);break;case 12:Fi(n,a);break;case 31:Fi(n,a),c&4&&q0(n,a);break;case 13:Fi(n,a),c&4&&H0(n,a),c&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=vT.bind(null,a),VT(n,a))));break;case 22:if(c=a.memoizedState!==null||Bi,!c){r=r!==null&&r.memoizedState!==null||ps,f=Bi;var m=ps;Bi=c,(ps=r)&&!m?qi(n,a,(a.subtreeFlags&8772)!==0):Fi(n,a),Bi=f,ps=m}break;case 30:break;default:Fi(n,a)}}function z0(n){var r=n.alternate;r!==null&&(n.alternate=null,z0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Es(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Fn=null,ar=!1;function zi(n,r,a){for(a=a.child;a!==null;)F0(n,r,a),a=a.sibling}function F0(n,r,a){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(ot,a)}catch{}switch(a.tag){case 26:ps||fi(a,r),zi(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ps||fi(a,r);var c=Fn,f=ar;ja(a.type)&&(Fn=a.stateNode,ar=!1),zi(n,r,a),Tc(a.stateNode),Fn=c,ar=f;break;case 5:ps||fi(a,r);case 6:if(c=Fn,f=ar,Fn=null,zi(n,r,a),Fn=c,ar=f,Fn!==null)if(ar)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(a.stateNode)}catch(m){vn(a,r,m)}else try{Fn.removeChild(a.stateNode)}catch(m){vn(a,r,m)}break;case 18:Fn!==null&&(ar?(n=Fn,M1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),_l(n)):M1(Fn,a.stateNode));break;case 4:c=Fn,f=ar,Fn=a.stateNode.containerInfo,ar=!0,zi(n,r,a),Fn=c,ar=f;break;case 0:case 11:case 14:case 15:_a(2,a,r),ps||_a(4,a,r),zi(n,r,a);break;case 1:ps||(fi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&L0(a,r,c)),zi(n,r,a);break;case 21:zi(n,r,a);break;case 22:ps=(c=ps)||a.memoizedState!==null,zi(n,r,a),ps=c;break;default:zi(n,r,a)}}function q0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_l(n)}catch(a){vn(r,r.return,a)}}}function H0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_l(n)}catch(a){vn(r,r.return,a)}}function uT(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new U0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new U0),r;default:throw Error(i(435,n.tag))}}function _h(n,r){var a=uT(n);r.forEach(function(c){if(!a.has(c)){a.add(c);var f=bT.bind(null,n,c);c.then(f,f)}})}function or(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],m=n,_=r,k=_;e:for(;k!==null;){switch(k.tag){case 27:if(ja(k.type)){Fn=k.stateNode,ar=!1;break e}break;case 5:Fn=k.stateNode,ar=!1;break e;case 3:case 4:Fn=k.stateNode.containerInfo,ar=!0;break e}k=k.return}if(Fn===null)throw Error(i(160));F0(m,_,f),Fn=null,ar=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)$0(r,n),r=r.sibling}var Zr=null;function $0(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:or(r,n),lr(n),c&4&&(_a(3,n,n.return),mc(3,n),_a(5,n,n.return));break;case 1:or(r,n),lr(n),c&512&&(ps||a===null||fi(a,a.return)),c&64&&Bi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=Zr;if(or(r,n),lr(n),c&512&&(ps||a===null||fi(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[xs]||m[dn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Vs(m,c,a),m[dn]=n,Ht(m),c=m;break e;case"link":var _=$1("link","href",f).get(c+(a.href||""));if(_){for(var k=0;k<_.length;k++)if(m=_[k],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(k,1);break t}}m=f.createElement(c),Vs(m,c,a),f.head.appendChild(m);break;case"meta":if(_=$1("meta","content",f).get(c+(a.content||""))){for(k=0;k<_.length;k++)if(m=_[k],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(k,1);break t}}m=f.createElement(c),Vs(m,c,a),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[dn]=n,Ht(m),c=m}n.stateNode=c}else W1(f,n.type,n.stateNode);else n.stateNode=H1(f,c,n.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?W1(f,n.type,n.stateNode):H1(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&_m(n,n.memoizedProps,a.memoizedProps)}break;case 27:or(r,n),lr(n),c&512&&(ps||a===null||fi(a,a.return)),a!==null&&c&4&&_m(n,n.memoizedProps,a.memoizedProps);break;case 5:if(or(r,n),lr(n),c&512&&(ps||a===null||fi(a,a.return)),n.flags&32){f=n.stateNode;try{j(f,"")}catch(Qe){vn(n,n.return,Qe)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,_m(n,f,a!==null?a.memoizedProps:f)),c&1024&&(Em=!0);break;case 6:if(or(r,n),lr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(Qe){vn(n,n.return,Qe)}}break;case 3:if(Oh=null,f=Zr,Zr=Mh(r.containerInfo),or(r,n),Zr=f,lr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{_l(r.containerInfo)}catch(Qe){vn(n,n.return,Qe)}Em&&(Em=!1,W0(n));break;case 4:c=Zr,Zr=Mh(n.stateNode.containerInfo),or(r,n),lr(n),Zr=c;break;case 12:or(r,n),lr(n);break;case 31:or(r,n),lr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,_h(n,c)));break;case 13:or(r,n),lr(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xh=St()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,_h(n,c)));break;case 22:f=n.memoizedState!==null;var B=a!==null&&a.memoizedState!==null,Z=Bi,fe=ps;if(Bi=Z||f,ps=fe||B,or(r,n),ps=fe,Bi=Z,lr(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||B||Bi||ps||_o(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){B=a=r;try{if(m=B.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{k=B.stateNode;var ge=B.memoizedProps.style,se=ge!=null&&ge.hasOwnProperty("display")?ge.display:null;k.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Qe){vn(B,B.return,Qe)}}}else if(r.tag===6){if(a===null){B=r;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(Qe){vn(B,B.return,Qe)}}}else if(r.tag===18){if(a===null){B=r;try{var ue=B.stateNode;f?L1(ue,!0):L1(B.stateNode,!1)}catch(Qe){vn(B,B.return,Qe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,_h(n,a))));break;case 19:or(r,n),lr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,_h(n,c)));break;case 30:break;case 21:break;default:or(r,n),lr(n)}}function lr(n){var r=n.flags;if(r&2){try{for(var a,c=n.return;c!==null;){if(P0(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=wm(n);bh(n,m,f);break;case 5:var _=a.stateNode;a.flags&32&&(j(_,""),a.flags&=-33);var k=wm(n);bh(n,k,_);break;case 3:case 4:var B=a.stateNode.containerInfo,Z=wm(n);xm(n,Z,B);break;default:throw Error(i(161))}}catch(fe){vn(n,n.return,fe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function W0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;W0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Fi(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)B0(n,r.alternate,r),r=r.sibling}function _o(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:_a(4,r,r.return),_o(r);break;case 1:fi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&L0(r,r.return,a),_o(r);break;case 27:Tc(r.stateNode);case 26:case 5:fi(r,r.return),_o(r);break;case 22:r.memoizedState===null&&_o(r);break;case 30:_o(r);break;default:_o(r)}n=n.sibling}}function qi(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,_=m.flags;switch(m.tag){case 0:case 11:case 15:qi(f,m,a),mc(4,m);break;case 1:if(qi(f,m,a),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){vn(c,c.return,Z)}if(c=m,f=c.updateQueue,f!==null){var k=c.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)Ev(B[f],k)}catch(Z){vn(c,c.return,Z)}}a&&_&64&&M0(m),pc(m,m.return);break;case 27:V0(m);case 26:case 5:qi(f,m,a),a&&c===null&&_&4&&O0(m),pc(m,m.return);break;case 12:qi(f,m,a);break;case 31:qi(f,m,a),a&&_&4&&q0(f,m);break;case 13:qi(f,m,a),a&&_&4&&H0(f,m);break;case 22:m.memoizedState===null&&qi(f,m,a),pc(m,m.return);break;case 30:break;default:qi(f,m,a)}r=r.sibling}}function Tm(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&tc(a))}function km(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&tc(n))}function ei(n,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)G0(n,r,a,c),r=r.sibling}function G0(n,r,a,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ei(n,r,a,c),f&2048&&mc(9,r);break;case 1:ei(n,r,a,c);break;case 3:ei(n,r,a,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&tc(n)));break;case 12:if(f&2048){ei(n,r,a,c),n=r.stateNode;try{var m=r.memoizedProps,_=m.id,k=m.onPostCommit;typeof k=="function"&&k(_,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(B){vn(r,r.return,B)}}else ei(n,r,a,c);break;case 31:ei(n,r,a,c);break;case 13:ei(n,r,a,c);break;case 23:break;case 22:m=r.stateNode,_=r.alternate,r.memoizedState!==null?m._visibility&2?ei(n,r,a,c):gc(n,r):m._visibility&2?ei(n,r,a,c):(m._visibility|=2,cl(n,r,a,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Tm(_,r);break;case 24:ei(n,r,a,c),f&2048&&km(r.alternate,r);break;default:ei(n,r,a,c)}}function cl(n,r,a,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,_=r,k=a,B=c,Z=_.flags;switch(_.tag){case 0:case 11:case 15:cl(m,_,k,B,f),mc(8,_);break;case 23:break;case 22:var fe=_.stateNode;_.memoizedState!==null?fe._visibility&2?cl(m,_,k,B,f):gc(m,_):(fe._visibility|=2,cl(m,_,k,B,f)),f&&Z&2048&&Tm(_.alternate,_);break;case 24:cl(m,_,k,B,f),f&&Z&2048&&km(_.alternate,_);break;default:cl(m,_,k,B,f)}r=r.sibling}}function gc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,c=r,f=c.flags;switch(c.tag){case 22:gc(a,c),f&2048&&Tm(c.alternate,c);break;case 24:gc(a,c),f&2048&&km(c.alternate,c);break;default:gc(a,c)}r=r.sibling}}var yc=8192;function ul(n,r,a){if(n.subtreeFlags&yc)for(n=n.child;n!==null;)K0(n,r,a),n=n.sibling}function K0(n,r,a){switch(n.tag){case 26:ul(n,r,a),n.flags&yc&&n.memoizedState!==null&&QT(a,Zr,n.memoizedState,n.memoizedProps);break;case 5:ul(n,r,a);break;case 3:case 4:var c=Zr;Zr=Mh(n.stateNode.containerInfo),ul(n,r,a),Zr=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=yc,yc=16777216,ul(n,r,a),yc=c):ul(n,r,a));break;default:ul(n,r,a)}}function Y0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function vc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Rs=c,X0(c,n)}Y0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Q0(n),n=n.sibling}function Q0(n){switch(n.tag){case 0:case 11:case 15:vc(n),n.flags&2048&&_a(9,n,n.return);break;case 3:vc(n);break;case 12:vc(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,wh(n)):vc(n);break;default:vc(n)}}function wh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Rs=c,X0(c,n)}Y0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:_a(8,r,r.return),wh(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,wh(r));break;default:wh(r)}n=n.sibling}}function X0(n,r){for(;Rs!==null;){var a=Rs;switch(a.tag){case 0:case 11:case 15:_a(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:tc(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Rs=c;else e:for(a=n;Rs!==null;){c=Rs;var f=c.sibling,m=c.return;if(z0(c),c===a){Rs=null;break e}if(f!==null){f.return=m,Rs=f;break e}Rs=m}}}var hT={getCacheForType:function(n){var r=Os(ds),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a},cacheSignal:function(){return Os(ds).controller.signal}},dT=typeof WeakMap=="function"?WeakMap:Map,cn=0,Nn=null,zt=null,Wt=0,yn=0,xr=null,wa=!1,hl=!1,Sm=!1,Hi=0,Jn=0,xa=0,wo=0,jm=0,Er=0,dl=0,bc=null,cr=null,Cm=!1,xh=0,J0=0,Eh=1/0,Th=null,Ea=null,ks=0,Ta=null,fl=null,$i=0,Nm=0,Am=null,Z0=null,_c=0,Rm=null;function Tr(){return(cn&2)!==0&&Wt!==0?Wt&-Wt:Q.T!==null?Pm():_s()}function e1(){if(Er===0)if((Wt&536870912)===0||en){var n=Kn;Kn<<=1,(Kn&3932160)===0&&(Kn=262144),Er=n}else Er=536870912;return n=_r.current,n!==null&&(n.flags|=32),Er}function ur(n,r,a){(n===Nn&&(yn===2||yn===9)||n.cancelPendingCommit!==null)&&(ml(n,0),ka(n,Wt,Er,!1)),Ye(n,a),((cn&2)===0||n!==Nn)&&(n===Nn&&((cn&2)===0&&(wo|=a),Jn===4&&ka(n,Wt,Er,!1)),mi(n))}function t1(n,r,a){if((cn&6)!==0)throw Error(i(327));var c=!a&&(r&127)===0&&(r&n.expiredLanes)===0||rn(n,r),f=c?pT(n,r):Dm(n,r,!0),m=c;do{if(f===0){hl&&!c&&ka(n,r,0,!1);break}else{if(a=n.current.alternate,m&&!fT(a)){f=Dm(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var k=n;f=bc;var B=k.current.memoizedState.isDehydrated;if(B&&(ml(k,_).flags|=256),_=Dm(k,_,!1),_!==2){if(Sm&&!B){k.errorRecoveryDisabledLanes|=m,wo|=m,f=4;break e}m=cr,cr=f,m!==null&&(cr===null?cr=m:cr.push.apply(cr,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){ml(n,0),ka(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ka(c,r,Er,!wa);break e;case 2:cr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=xh+300-St(),10<f)){if(ka(c,r,Er,!wa),Mn(c,0,!0)!==0)break e;$i=r,c.timeoutHandle=I1(n1.bind(null,c,a,cr,Th,Cm,r,Er,wo,dl,wa,m,"Throttled",-0,0),f);break e}n1(c,a,cr,Th,Cm,r,Er,wo,dl,wa,m,null,-0,0)}}break}while(!0);mi(n)}function n1(n,r,a,c,f,m,_,k,B,Z,fe,ge,se,ue){if(n.timeoutHandle=-1,ge=r.subtreeFlags,ge&8192||(ge&16785408)===16785408){ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:jt},K0(r,m,ge);var Qe=(m&62914560)===m?xh-St():(m&4194048)===m?J0-St():0;if(Qe=XT(ge,Qe),Qe!==null){$i=m,n.cancelPendingCommit=Qe(u1.bind(null,n,r,m,a,c,f,_,k,B,fe,ge,null,se,ue)),ka(n,m,_,!Z);return}}u1(n,r,m,a,c,f,_,k,B)}function fT(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!vr(m(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ka(n,r,a,c){r&=~jm,r&=~wo,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-$e(f),_=1<<m;c[m]=-1,f&=~_}a!==0&&lt(n,a,r)}function kh(){return(cn&6)===0?(wc(0),!1):!0}function Im(){if(zt!==null){if(yn===0)var n=zt.return;else n=zt,Mi=ho=null,Kf(n),rl=null,sc=0,n=zt;for(;n!==null;)D0(n.alternate,n),n=n.return;zt=null}}function ml(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,DT(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),$i=0,Im(),Nn=n,zt=a=Ii(n.current,null),Wt=r,yn=0,xr=null,wa=!1,hl=rn(n,r),Sm=!1,dl=Er=jm=wo=xa=Jn=0,cr=bc=null,Cm=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-$e(c),m=1<<f;r|=n[f],c&=~m}return Hi=r,Wu(),a}function s1(n,r){Mt=null,Q.H=hc,r===sl||r===eh?(r=bv(),yn=3):r===Of?(r=bv(),yn=4):yn=r===um?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,xr=r,zt===null&&(Jn=1,mh(n,Pr(r,n.current)))}function r1(){var n=_r.current;return n===null?!0:(Wt&4194048)===Wt?zr===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?n===zr:!1}function i1(){var n=Q.H;return Q.H=hc,n===null?hc:n}function a1(){var n=Q.A;return Q.A=hT,n}function Sh(){Jn=4,wa||(Wt&4194048)!==Wt&&_r.current!==null||(hl=!0),(xa&134217727)===0&&(wo&134217727)===0||Nn===null||ka(Nn,Wt,Er,!1)}function Dm(n,r,a){var c=cn;cn|=2;var f=i1(),m=a1();(Nn!==n||Wt!==r)&&(Th=null,ml(n,r)),r=!1;var _=Jn;e:do try{if(yn!==0&&zt!==null){var k=zt,B=xr;switch(yn){case 8:Im(),_=6;break e;case 3:case 2:case 9:case 6:_r.current===null&&(r=!0);var Z=yn;if(yn=0,xr=null,pl(n,k,B,Z),a&&hl){_=0;break e}break;default:Z=yn,yn=0,xr=null,pl(n,k,B,Z)}}mT(),_=Jn;break}catch(fe){s1(n,fe)}while(!0);return r&&n.shellSuspendCounter++,Mi=ho=null,cn=c,Q.H=f,Q.A=m,zt===null&&(Nn=null,Wt=0,Wu()),_}function mT(){for(;zt!==null;)o1(zt)}function pT(n,r){var a=cn;cn|=2;var c=i1(),f=a1();Nn!==n||Wt!==r?(Th=null,Eh=St()+500,ml(n,r)):hl=rn(n,r);e:do try{if(yn!==0&&zt!==null){r=zt;var m=xr;t:switch(yn){case 1:yn=0,xr=null,pl(n,r,m,1);break;case 2:case 9:if(yv(m)){yn=0,xr=null,l1(r);break}r=function(){yn!==2&&yn!==9||Nn!==n||(yn=7),mi(n)},m.then(r,r);break e;case 3:yn=7;break e;case 4:yn=5;break e;case 7:yv(m)?(yn=0,xr=null,l1(r)):(yn=0,xr=null,pl(n,r,m,7));break;case 5:var _=null;switch(zt.tag){case 26:_=zt.memoizedState;case 5:case 27:var k=zt;if(_?G1(_):k.stateNode.complete){yn=0,xr=null;var B=k.sibling;if(B!==null)zt=B;else{var Z=k.return;Z!==null?(zt=Z,jh(Z)):zt=null}break t}}yn=0,xr=null,pl(n,r,m,5);break;case 6:yn=0,xr=null,pl(n,r,m,6);break;case 8:Im(),Jn=6;break e;default:throw Error(i(462))}}gT();break}catch(fe){s1(n,fe)}while(!0);return Mi=ho=null,Q.H=c,Q.A=f,cn=a,zt!==null?0:(Nn=null,Wt=0,Wu(),Jn)}function gT(){for(;zt!==null&&!at();)o1(zt)}function o1(n){var r=R0(n.alternate,n,Hi);n.memoizedProps=n.pendingProps,r===null?jh(n):zt=r}function l1(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=k0(a,r,r.pendingProps,r.type,void 0,Wt);break;case 11:r=k0(a,r,r.pendingProps,r.type.render,r.ref,Wt);break;case 5:Kf(r);default:D0(a,r),r=zt=av(r,Hi),r=R0(a,r,Hi)}n.memoizedProps=n.pendingProps,r===null?jh(n):zt=r}function pl(n,r,a,c){Mi=ho=null,Kf(r),rl=null,sc=0;var f=r.return;try{if(rT(n,f,r,a,Wt)){Jn=1,mh(n,Pr(a,n.current)),zt=null;return}}catch(m){if(f!==null)throw zt=f,m;Jn=1,mh(n,Pr(a,n.current)),zt=null;return}r.flags&32768?(en||c===1?n=!0:hl||(Wt&536870912)!==0?n=!1:(wa=n=!0,(c===2||c===9||c===3||c===6)&&(c=_r.current,c!==null&&c.tag===13&&(c.flags|=16384))),c1(r,n)):jh(r)}function jh(n){var r=n;do{if((r.flags&32768)!==0){c1(r,wa);return}n=r.return;var a=oT(r.alternate,r,Hi);if(a!==null){zt=a;return}if(r=r.sibling,r!==null){zt=r;return}zt=r=n}while(r!==null);Jn===0&&(Jn=5)}function c1(n,r){do{var a=lT(n.alternate,n);if(a!==null){a.flags&=32767,zt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){zt=n;return}zt=n=a}while(n!==null);Jn=6,zt=null}function u1(n,r,a,c,f,m,_,k,B){n.cancelPendingCommit=null;do Ch();while(ks!==0);if((cn&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=wf,gt(n,a,m,_,k,B),n===Nn&&(zt=Nn=null,Wt=0),fl=r,Ta=n,$i=a,Nm=m,Am=f,Z0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,_T(un,function(){return p1(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,f=Te.p,Te.p=2,_=cn,cn|=4;try{cT(n,r,a)}finally{cn=_,Te.p=f,Q.T=c}}ks=1,h1(),d1(),f1()}}function h1(){if(ks===1){ks=0;var n=Ta,r=fl,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var c=Te.p;Te.p=2;var f=cn;cn|=4;try{$0(r,n);var m=$m,_=Xy(n.containerInfo),k=m.focusedElem,B=m.selectionRange;if(_!==k&&k&&k.ownerDocument&&Qy(k.ownerDocument.documentElement,k)){if(B!==null&&gf(k)){var Z=B.start,fe=B.end;if(fe===void 0&&(fe=Z),"selectionStart"in k)k.selectionStart=Z,k.selectionEnd=Math.min(fe,k.value.length);else{var ge=k.ownerDocument||document,se=ge&&ge.defaultView||window;if(se.getSelection){var ue=se.getSelection(),Qe=k.textContent.length,ft=Math.min(B.start,Qe),En=B.end===void 0?ft:Math.min(B.end,Qe);!ue.extend&&ft>En&&(_=En,En=ft,ft=_);var W=Yy(k,ft),F=Yy(k,En);if(W&&F&&(ue.rangeCount!==1||ue.anchorNode!==W.node||ue.anchorOffset!==W.offset||ue.focusNode!==F.node||ue.focusOffset!==F.offset)){var Y=ge.createRange();Y.setStart(W.node,W.offset),ue.removeAllRanges(),ft>En?(ue.addRange(Y),ue.extend(F.node,F.offset)):(Y.setEnd(F.node,F.offset),ue.addRange(Y))}}}}for(ge=[],ue=k;ue=ue.parentNode;)ue.nodeType===1&&ge.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ge.length;k++){var pe=ge[k];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}Bh=!!Hm,$m=Hm=null}finally{cn=f,Te.p=c,Q.T=a}}n.current=r,ks=2}}function d1(){if(ks===2){ks=0;var n=Ta,r=fl,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var c=Te.p;Te.p=2;var f=cn;cn|=4;try{B0(n,r.alternate,r)}finally{cn=f,Te.p=c,Q.T=a}}ks=3}}function f1(){if(ks===4||ks===3){ks=0,dt();var n=Ta,r=fl,a=$i,c=Z0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ks=5:(ks=0,fl=Ta=null,m1(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ea=null),gn(a),r=r.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(ot,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Q.T,f=Te.p,Te.p=2,Q.T=null;try{for(var m=n.onRecoverableError,_=0;_<c.length;_++){var k=c[_];m(k.value,{componentStack:k.stack})}}finally{Q.T=r,Te.p=f}}($i&3)!==0&&Ch(),mi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===Rm?_c++:(_c=0,Rm=n):_c=0,wc(0)}}function m1(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,tc(r)))}function Ch(){return h1(),d1(),f1(),p1()}function p1(){if(ks!==5)return!1;var n=Ta,r=Nm;Nm=0;var a=gn($i),c=Q.T,f=Te.p;try{Te.p=32>a?32:a,Q.T=null,a=Am,Am=null;var m=Ta,_=$i;if(ks=0,fl=Ta=null,$i=0,(cn&6)!==0)throw Error(i(331));var k=cn;if(cn|=4,Q0(m.current),G0(m,m.current,_,a),cn=k,wc(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(ot,m)}catch{}return!0}finally{Te.p=f,Q.T=c,m1(n,r)}}function g1(n,r,a){r=Pr(a,r),r=cm(n.stateNode,r,2),n=ya(n,r,2),n!==null&&(Ye(n,2),mi(n))}function vn(n,r,a){if(n.tag===3)g1(n,n,a);else for(;r!==null;){if(r.tag===3){g1(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ea===null||!Ea.has(c))){n=Pr(a,n),a=y0(2),c=ya(r,a,2),c!==null&&(v0(a,c,r,n),Ye(c,2),mi(c));break}}r=r.return}}function Mm(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new dT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(a)||(Sm=!0,f.add(a),n=yT.bind(null,n,r,a),r.then(n,n))}function yT(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Nn===n&&(Wt&a)===a&&(Jn===4||Jn===3&&(Wt&62914560)===Wt&&300>St()-xh?(cn&2)===0&&ml(n,0):jm|=a,dl===Wt&&(dl=0)),mi(n)}function y1(n,r){r===0&&(r=le()),n=lo(n,r),n!==null&&(Ye(n,r),mi(n))}function vT(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),y1(n,a)}function bT(n,r){var a=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),y1(n,a)}function _T(n,r){return At(n,r)}var Nh=null,gl=null,Lm=!1,Ah=!1,Om=!1,Sa=0;function mi(n){n!==gl&&n.next===null&&(gl===null?Nh=gl=n:gl=gl.next=n),Ah=!0,Lm||(Lm=!0,xT())}function wc(n,r){if(!Om&&Ah){Om=!0;do for(var a=!1,c=Nh;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var _=c.suspendedLanes,k=c.pingedLanes;m=(1<<31-$e(42|n)+1)-1,m&=f&~(_&~k),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,w1(c,m))}else m=Wt,m=Mn(c,c===Nn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||rn(c,m)||(a=!0,w1(c,m));c=c.next}while(a);Om=!1}}function wT(){v1()}function v1(){Ah=Lm=!1;var n=0;Sa!==0&&IT()&&(n=Sa);for(var r=St(),a=null,c=Nh;c!==null;){var f=c.next,m=b1(c,r);m===0?(c.next=null,a===null?Nh=f:a.next=f,f===null&&(gl=a)):(a=c,(n!==0||(m&3)!==0)&&(Ah=!0)),c=f}ks!==0&&ks!==5||wc(n),Sa!==0&&(Sa=0)}function b1(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-$e(m),k=1<<_,B=f[_];B===-1?((k&a)===0||(k&c)!==0)&&(f[_]=Qs(k,r)):B<=r&&(n.expiredLanes|=k),m&=~k}if(r=Nn,a=Wt,a=Mn(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,a===0||n===r&&(yn===2||yn===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ot(c),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||rn(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(c!==null&&Ot(c),gn(a)){case 2:case 8:a=bs;break;case 32:a=un;break;case 268435456:a=Ce;break;default:a=un}return c=_1.bind(null,n),a=At(a,c),n.callbackPriority=r,n.callbackNode=a,r}return c!==null&&c!==null&&Ot(c),n.callbackPriority=2,n.callbackNode=null,2}function _1(n,r){if(ks!==0&&ks!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Ch()&&n.callbackNode!==a)return null;var c=Wt;return c=Mn(n,n===Nn?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(t1(n,c,r),b1(n,St()),n.callbackNode!=null&&n.callbackNode===a?_1.bind(null,n):null)}function w1(n,r){if(Ch())return null;t1(n,r,!0)}function xT(){MT(function(){(cn&6)!==0?At(js,wT):v1()})}function Pm(){if(Sa===0){var n=tl;n===0&&(n=jn,jn<<=1,(jn&261888)===0&&(jn=256)),Sa=n}return Sa}function x1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Et(""+n)}function E1(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function ET(n,r,a,c,f){if(r==="submit"&&a&&a.stateNode===f){var m=x1((f[Cn]||null).action),_=c.submitter;_&&(r=(r=_[Cn]||null)?x1(r.formAction):_.getAttribute("formAction"),r!==null&&(m=r,_=null));var k=new Ds("action","action",null,c,f);n.push({event:k,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Sa!==0){var B=_?E1(f,_):new FormData(f);sm(a,{pending:!0,data:B,method:f.method,action:m},null,B)}}else typeof m=="function"&&(k.preventDefault(),B=_?E1(f,_):new FormData(f),sm(a,{pending:!0,data:B,method:f.method,action:m},m,B))},currentTarget:f}]})}}for(var Vm=0;Vm<_f.length;Vm++){var Um=_f[Vm],TT=Um.toLowerCase(),kT=Um[0].toUpperCase()+Um.slice(1);Jr(TT,"on"+kT)}Jr(ev,"onAnimationEnd"),Jr(tv,"onAnimationIteration"),Jr(nv,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(zE,"onTransitionRun"),Jr(FE,"onTransitionStart"),Jr(qE,"onTransitionCancel"),Jr(sv,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ST=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xc));function T1(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var _=c.length-1;0<=_;_--){var k=c[_],B=k.instance,Z=k.currentTarget;if(k=k.listener,B!==m&&f.isPropagationStopped())break e;m=k,f.currentTarget=Z;try{m(f)}catch(fe){$u(fe)}f.currentTarget=null,m=B}else for(_=0;_<c.length;_++){if(k=c[_],B=k.instance,Z=k.currentTarget,k=k.listener,B!==m&&f.isPropagationStopped())break e;m=k,f.currentTarget=Z;try{m(f)}catch(fe){$u(fe)}f.currentTarget=null,m=B}}}}function Ft(n,r){var a=r[rr];a===void 0&&(a=r[rr]=new Set);var c=n+"__bubble";a.has(c)||(k1(r,n,2,!1),a.add(c))}function Bm(n,r,a){var c=0;r&&(c|=4),k1(a,n,c,r)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function zm(n){if(!n[Rh]){n[Rh]=!0,pr.forEach(function(a){a!=="selectionchange"&&(ST.has(a)||Bm(a,!1,n),Bm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Rh]||(r[Rh]=!0,Bm("selectionchange",!1,r))}}function k1(n,r,a,c){switch(eb(r)){case 2:var f=ek;break;case 8:f=tk;break;default:f=np}a=f.bind(null,r,a,n),f=void 0,!Ct||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function Fm(n,r,a,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var k=c.stateNode.containerInfo;if(k===f)break;if(_===4)for(_=c.return;_!==null;){var B=_.tag;if((B===3||B===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;k!==null;){if(_=Ts(k),_===null)return;if(B=_.tag,B===5||B===6||B===26||B===27){c=m=_;continue e}k=k.parentNode}}c=c.return}De(function(){var Z=m,fe=P(a),ge=[];e:{var se=rv.get(n);if(se!==void 0){var ue=Ds,Qe=n;switch(n){case"keypress":if(An(a)===0)break e;case"keydown":case"keyup":ue=Fu;break;case"focusin":Qe="focus",ue=ro;break;case"focusout":Qe="blur",ue=ro;break;case"beforeblur":case"afterblur":ue=ro;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Ai;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Du;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=v;break;case ev:case tv:case nv:ue=Lu;break;case sv:ue=C;break;case"scroll":case"scrollend":ue=Ms;break;case"wheel":ue=ce;break;case"copy":case"cut":case"paste":ue=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=Ri;break;case"toggle":case"beforetoggle":ue=Dt}var ft=(r&4)!==0,En=!ft&&(n==="scroll"||n==="scrollend"),W=ft?se!==null?se+"Capture":null:se;ft=[];for(var F=Z,Y;F!==null;){var pe=F;if(Y=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||Y===null||W===null||(pe=Fe(F,W),pe!=null&&ft.push(Ec(F,pe,Y))),En)break;F=F.return}0<ft.length&&(se=new ue(se,Qe,null,a,fe),ge.push({event:se,listeners:ft}))}}if((r&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",se&&a!==Zt&&(Qe=a.relatedTarget||a.fromElement)&&(Ts(Qe)||Qe[Cs]))break e;if((ue||se)&&(se=fe.window===fe?fe:(se=fe.ownerDocument)?se.defaultView||se.parentWindow:window,ue?(Qe=a.relatedTarget||a.toElement,ue=Z,Qe=Qe?Ts(Qe):null,Qe!==null&&(En=u(Qe),ft=Qe.tag,Qe!==En||ft!==5&&ft!==27&&ft!==6)&&(Qe=null)):(ue=null,Qe=Z),ue!==Qe)){if(ft=Ai,pe="onMouseLeave",W="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(ft=Ri,pe="onPointerLeave",W="onPointerEnter",F="pointer"),En=ue==null?se:bn(ue),Y=Qe==null?se:bn(Qe),se=new ft(pe,F+"leave",ue,a,fe),se.target=En,se.relatedTarget=Y,pe=null,Ts(fe)===Z&&(ft=new ft(W,F+"enter",Qe,a,fe),ft.target=Y,ft.relatedTarget=En,pe=ft),En=pe,ue&&Qe)t:{for(ft=jT,W=ue,F=Qe,Y=0,pe=W;pe;pe=ft(pe))Y++;pe=0;for(var rt=F;rt;rt=ft(rt))pe++;for(;0<Y-pe;)W=ft(W),Y--;for(;0<pe-Y;)F=ft(F),pe--;for(;Y--;){if(W===F||F!==null&&W===F.alternate){ft=W;break t}W=ft(W),F=ft(F)}ft=null}else ft=null;ue!==null&&S1(ge,se,ue,ft,!1),Qe!==null&&En!==null&&S1(ge,En,Qe,ft,!0)}}e:{if(se=Z?bn(Z):window,ue=se.nodeName&&se.nodeName.toLowerCase(),ue==="select"||ue==="input"&&se.type==="file")var an=qy;else if(zy(se))if(Hy)an=VE;else{an=OE;var et=LE}else ue=se.nodeName,!ue||ue.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?Z&&ze(Z.elementType)&&(an=qy):an=PE;if(an&&(an=an(n,Z))){Fy(ge,an,a,fe);break e}et&&et(n,se,Z),n==="focusout"&&Z&&se.type==="number"&&Z.memoizedProps.value!=null&&Ni(se,"number",se.value)}switch(et=Z?bn(Z):window,n){case"focusin":(zy(et)||et.contentEditable==="true")&&(Go=et,yf=Z,Jl=null);break;case"focusout":Jl=yf=Go=null;break;case"mousedown":vf=!0;break;case"contextmenu":case"mouseup":case"dragend":vf=!1,Jy(ge,a,fe);break;case"selectionchange":if(BE)break;case"keydown":case"keyup":Jy(ge,a,fe)}var Pt;if(ln)e:{switch(n){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else Wo?io(n,a)&&(Gt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Gt="onCompositionStart");Gt&&(ui&&a.locale!=="ko"&&(Wo||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Wo&&(Pt=kt()):(Tt=fe,_n="value"in Tt?Tt.value:Tt.textContent,Wo=!0)),et=Ih(Z,Gt),0<et.length&&(Gt=new ci(Gt,n,null,a,fe),ge.push({event:Gt,listeners:et}),Pt?Gt.data=Pt:(Pt=$o(a),Pt!==null&&(Gt.data=Pt)))),(Pt=Lr?RE(n,a):IE(n,a))&&(Gt=Ih(Z,"onBeforeInput"),0<Gt.length&&(et=new ci("onBeforeInput","beforeinput",null,a,fe),ge.push({event:et,listeners:Gt}),et.data=Pt)),ET(ge,n,Z,a,fe)}T1(ge,r)})}function Ec(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Ih(n,r){for(var a=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Fe(n,a),f!=null&&c.unshift(Ec(n,f,m)),f=Fe(n,r),f!=null&&c.push(Ec(n,f,m))),n.tag===3)return c;n=n.return}return[]}function jT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function S1(n,r,a,c,f){for(var m=r._reactName,_=[];a!==null&&a!==c;){var k=a,B=k.alternate,Z=k.stateNode;if(k=k.tag,B!==null&&B===c)break;k!==5&&k!==26&&k!==27||Z===null||(B=Z,f?(Z=Fe(a,m),Z!=null&&_.unshift(Ec(a,Z,B))):f||(Z=Fe(a,m),Z!=null&&_.push(Ec(a,Z,B)))),a=a.return}_.length!==0&&n.push({event:r,listeners:_})}var CT=/\r\n?/g,NT=/\u0000|\uFFFD/g;function j1(n){return(typeof n=="string"?n:""+n).replace(CT,`
`).replace(NT,"")}function C1(n,r){return r=j1(r),j1(n)===r}function xn(n,r,a,c,f,m){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||j(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&j(n,""+c);break;case"className":oe(n,"class",c);break;case"tabIndex":oe(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":oe(n,a,c);break;case"style":Re(n,c,m);break;case"data":if(r!=="object"){oe(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Et(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(r!=="input"&&xn(n,r,"name",f.name,f,null),xn(n,r,"formEncType",f.formEncType,f,null),xn(n,r,"formMethod",f.formMethod,f,null),xn(n,r,"formTarget",f.formTarget,f,null)):(xn(n,r,"encType",f.encType,f,null),xn(n,r,"method",f.method,f,null),xn(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Et(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=jt);break;case"onScroll":c!=null&&Ft("scroll",n);break;case"onScrollEnd":c!=null&&Ft("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=Et(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":Ft("beforetoggle",n),Ft("toggle",n),re(n,"popover",c);break;case"xlinkActuate":Oe(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Oe(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Oe(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Oe(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Oe(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Oe(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Oe(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Oe(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Oe(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":re(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ut.get(a)||a,re(n,a,c))}}function qm(n,r,a,c,f,m){switch(a){case"style":Re(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof c=="string"?j(n,c):(typeof c=="number"||typeof c=="bigint")&&j(n,""+c);break;case"onScroll":c!=null&&Ft("scroll",n);break;case"onScrollEnd":c!=null&&Ft("scrollend",n);break;case"onClick":c!=null&&(n.onclick=jt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),m=n[Cn]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,c,f);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):re(n,a,c)}}}function Vs(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ft("error",n),Ft("load",n);var c=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:xn(n,r,m,_,a,null)}}f&&xn(n,r,"srcSet",a.srcSet,a,null),c&&xn(n,r,"src",a.src,a,null);return;case"input":Ft("invalid",n);var k=m=_=f=null,B=null,Z=null;for(c in a)if(a.hasOwnProperty(c)){var fe=a[c];if(fe!=null)switch(c){case"name":f=fe;break;case"type":_=fe;break;case"checked":B=fe;break;case"defaultChecked":Z=fe;break;case"value":m=fe;break;case"defaultValue":k=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,r));break;default:xn(n,r,c,fe,a,null)}}oa(n,m,k,B,Z,_,f,!1);return;case"select":Ft("invalid",n),c=_=m=null;for(f in a)if(a.hasOwnProperty(f)&&(k=a[f],k!=null))switch(f){case"value":m=k;break;case"defaultValue":_=k;break;case"multiple":c=k;default:xn(n,r,f,k,a,null)}r=m,a=_,n.multiple=!!c,r!=null?Ir(n,!!c,r,!1):a!=null&&Ir(n,!!c,a,!0);return;case"textarea":Ft("invalid",n),m=f=c=null;for(_ in a)if(a.hasOwnProperty(_)&&(k=a[_],k!=null))switch(_){case"value":c=k;break;case"defaultValue":f=k;break;case"children":m=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:xn(n,r,_,k,a,null)}Dr(n,c,f,m);return;case"option":for(B in a)a.hasOwnProperty(B)&&(c=a[B],c!=null)&&(B==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":xn(n,r,B,c,a,null));return;case"dialog":Ft("beforetoggle",n),Ft("toggle",n),Ft("cancel",n),Ft("close",n);break;case"iframe":case"object":Ft("load",n);break;case"video":case"audio":for(c=0;c<xc.length;c++)Ft(xc[c],n);break;case"image":Ft("error",n),Ft("load",n);break;case"details":Ft("toggle",n);break;case"embed":case"source":case"link":Ft("error",n),Ft("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in a)if(a.hasOwnProperty(Z)&&(c=a[Z],c!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:xn(n,r,Z,c,a,null)}return;default:if(ze(r)){for(fe in a)a.hasOwnProperty(fe)&&(c=a[fe],c!==void 0&&qm(n,r,fe,c,a,void 0));return}}for(k in a)a.hasOwnProperty(k)&&(c=a[k],c!=null&&xn(n,r,k,c,a,null))}function AT(n,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,k=null,B=null,Z=null,fe=null;for(ue in a){var ge=a[ue];if(a.hasOwnProperty(ue)&&ge!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":B=ge;default:c.hasOwnProperty(ue)||xn(n,r,ue,null,c,ge)}}for(var se in c){var ue=c[se];if(ge=a[se],c.hasOwnProperty(se)&&(ue!=null||ge!=null))switch(se){case"type":m=ue;break;case"name":f=ue;break;case"checked":Z=ue;break;case"defaultChecked":fe=ue;break;case"value":_=ue;break;case"defaultValue":k=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,r));break;default:ue!==ge&&xn(n,r,se,ue,c,ge)}}Xs(n,_,k,B,Z,fe,m,f);return;case"select":ue=_=k=se=null;for(m in a)if(B=a[m],a.hasOwnProperty(m)&&B!=null)switch(m){case"value":break;case"multiple":ue=B;default:c.hasOwnProperty(m)||xn(n,r,m,null,c,B)}for(f in c)if(m=c[f],B=a[f],c.hasOwnProperty(f)&&(m!=null||B!=null))switch(f){case"value":se=m;break;case"defaultValue":k=m;break;case"multiple":_=m;default:m!==B&&xn(n,r,f,m,c,B)}r=k,a=_,c=ue,se!=null?Ir(n,!!a,se,!1):!!c!=!!a&&(r!=null?Ir(n,!!a,r,!0):Ir(n,!!a,a?[]:"",!1));return;case"textarea":ue=se=null;for(k in a)if(f=a[k],a.hasOwnProperty(k)&&f!=null&&!c.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:xn(n,r,k,null,c,f)}for(_ in c)if(f=c[_],m=a[_],c.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":se=f;break;case"defaultValue":ue=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&xn(n,r,_,f,c,m)}la(n,se,ue);return;case"option":for(var Qe in a)se=a[Qe],a.hasOwnProperty(Qe)&&se!=null&&!c.hasOwnProperty(Qe)&&(Qe==="selected"?n.selected=!1:xn(n,r,Qe,null,c,se));for(B in c)se=c[B],ue=a[B],c.hasOwnProperty(B)&&se!==ue&&(se!=null||ue!=null)&&(B==="selected"?n.selected=se&&typeof se!="function"&&typeof se!="symbol":xn(n,r,B,se,c,ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in a)se=a[ft],a.hasOwnProperty(ft)&&se!=null&&!c.hasOwnProperty(ft)&&xn(n,r,ft,null,c,se);for(Z in c)if(se=c[Z],ue=a[Z],c.hasOwnProperty(Z)&&se!==ue&&(se!=null||ue!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,r));break;default:xn(n,r,Z,se,c,ue)}return;default:if(ze(r)){for(var En in a)se=a[En],a.hasOwnProperty(En)&&se!==void 0&&!c.hasOwnProperty(En)&&qm(n,r,En,void 0,c,se);for(fe in c)se=c[fe],ue=a[fe],!c.hasOwnProperty(fe)||se===ue||se===void 0&&ue===void 0||qm(n,r,fe,se,c,ue);return}}for(var W in a)se=a[W],a.hasOwnProperty(W)&&se!=null&&!c.hasOwnProperty(W)&&xn(n,r,W,null,c,se);for(ge in c)se=c[ge],ue=a[ge],!c.hasOwnProperty(ge)||se===ue||se==null&&ue==null||xn(n,r,ge,se,c,ue)}function N1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var f=a[c],m=f.transferSize,_=f.initiatorType,k=f.duration;if(m&&k&&N1(_)){for(_=0,k=f.responseEnd,c+=1;c<a.length;c++){var B=a[c],Z=B.startTime;if(Z>k)break;var fe=B.transferSize,ge=B.initiatorType;fe&&N1(ge)&&(B=B.responseEnd,_+=fe*(B<k?1:(k-Z)/(B-Z)))}if(--c,r+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Hm=null,$m=null;function Dh(n){return n.nodeType===9?n:n.ownerDocument}function A1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function R1(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Wm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Gm=null;function IT(){var n=window.event;return n&&n.type==="popstate"?n===Gm?!1:(Gm=n,!0):(Gm=null,!1)}var I1=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,D1=typeof Promise=="function"?Promise:void 0,MT=typeof queueMicrotask=="function"?queueMicrotask:typeof D1<"u"?function(n){return D1.resolve(null).then(n).catch(LT)}:I1;function LT(n){setTimeout(function(){throw n})}function ja(n){return n==="head"}function M1(n,r){var a=r,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(c===0){n.removeChild(f),_l(r);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Tc(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Tc(a);for(var m=a.firstChild;m;){var _=m.nextSibling,k=m.nodeName;m[xs]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Tc(n.ownerDocument.body);a=f}while(a);_l(r)}function L1(n,r){var a=n;n=0;do{var c=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=c}while(a)}function Km(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Km(a),Es(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function OT(n,r,a,c){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[xs])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Fr(n.nextSibling),n===null)break}return null}function PT(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Fr(n.nextSibling),n===null))return null;return n}function O1(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Fr(n.nextSibling),n===null))return null;return n}function Ym(n){return n.data==="$?"||n.data==="$~"}function Qm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function VT(n,r){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||a.readyState!=="loading")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Fr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Xm=null;function P1(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(r===0)return Fr(n.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}n=n.nextSibling}return null}function V1(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return n;r--}else a!=="/$"&&a!=="/&"||r++}n=n.previousSibling}return null}function U1(n,r,a){switch(r=Dh(a),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Tc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Es(n)}var qr=new Map,B1=new Set;function Mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Wi=Te.d;Te.d={f:UT,r:BT,D:zT,C:FT,L:qT,m:HT,X:WT,S:$T,M:GT};function UT(){var n=Wi.f(),r=kh();return n||r}function BT(n){var r=Yn(n);r!==null&&r.tag===5&&r.type==="form"?s0(r):Wi.r(n)}var yl=typeof document>"u"?null:document;function z1(n,r,a){var c=yl;if(c&&typeof r=="string"&&r){var f=as(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),B1.has(f)||(B1.add(f),n={rel:n,crossOrigin:a,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Vs(r,"link",n),Ht(r),c.head.appendChild(r)))}}function zT(n){Wi.D(n),z1("dns-prefetch",n,null)}function FT(n,r){Wi.C(n,r),z1("preconnect",n,r)}function qT(n,r,a){Wi.L(n,r,a);var c=yl;if(c&&n&&r){var f='link[rel="preload"][as="'+as(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+as(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+as(a.imageSizes)+'"]')):f+='[href="'+as(n)+'"]';var m=f;switch(r){case"style":m=vl(n);break;case"script":m=bl(n)}qr.has(m)||(n=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),qr.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(kc(m))||r==="script"&&c.querySelector(Sc(m))||(r=c.createElement("link"),Vs(r,"link",n),Ht(r),c.head.appendChild(r)))}}function HT(n,r){Wi.m(n,r);var a=yl;if(a&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+as(c)+'"][href="'+as(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=bl(n)}if(!qr.has(m)&&(n=E({rel:"modulepreload",href:n},r),qr.set(m,n),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sc(m)))return}c=a.createElement("link"),Vs(c,"link",n),Ht(c),a.head.appendChild(c)}}}function $T(n,r,a){Wi.S(n,r,a);var c=yl;if(c&&n){var f=Qn(c).hoistableStyles,m=vl(n);r=r||"default";var _=f.get(m);if(!_){var k={loading:0,preload:null};if(_=c.querySelector(kc(m)))k.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},a),(a=qr.get(m))&&Jm(n,a);var B=_=c.createElement("link");Ht(B),Vs(B,"link",n),B._p=new Promise(function(Z,fe){B.onload=Z,B.onerror=fe}),B.addEventListener("load",function(){k.loading|=1}),B.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Lh(_,r,c)}_={type:"stylesheet",instance:_,count:1,state:k},f.set(m,_)}}}function WT(n,r){Wi.X(n,r);var a=yl;if(a&&n){var c=Qn(a).hoistableScripts,f=bl(n),m=c.get(f);m||(m=a.querySelector(Sc(f)),m||(n=E({src:n,async:!0},r),(r=qr.get(f))&&Zm(n,r),m=a.createElement("script"),Ht(m),Vs(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function GT(n,r){Wi.M(n,r);var a=yl;if(a&&n){var c=Qn(a).hoistableScripts,f=bl(n),m=c.get(f);m||(m=a.querySelector(Sc(f)),m||(n=E({src:n,async:!0,type:"module"},r),(r=qr.get(f))&&Zm(n,r),m=a.createElement("script"),Ht(m),Vs(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function F1(n,r,a,c){var f=(f=be.current)?Mh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=vl(a.href),a=Qn(f).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=vl(a.href);var m=Qn(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(kc(n)))&&!m._p&&(_.instance=m,_.state.loading=5),qr.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qr.set(n,a),m||KT(f,n,a,_.state))),r&&c===null)throw Error(i(528,""));return _}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=bl(a),a=Qn(f).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function vl(n){return'href="'+as(n)+'"'}function kc(n){return'link[rel="stylesheet"]['+n+"]"}function q1(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function KT(n,r,a,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Vs(r,"link",a),Ht(r),n.head.appendChild(r))}function bl(n){return'[src="'+as(n)+'"]'}function Sc(n){return"script[async]"+n}function H1(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+as(a.href)+'"]');if(c)return r.instance=c,Ht(c),c;var f=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ht(c),Vs(c,"style",f),Lh(c,a.precedence,n),r.instance=c;case"stylesheet":f=vl(a.href);var m=n.querySelector(kc(f));if(m)return r.state.loading|=4,r.instance=m,Ht(m),m;c=q1(a),(f=qr.get(f))&&Jm(c,f),m=(n.ownerDocument||n).createElement("link"),Ht(m);var _=m;return _._p=new Promise(function(k,B){_.onload=k,_.onerror=B}),Vs(m,"link",c),r.state.loading|=4,Lh(m,a.precedence,n),r.instance=m;case"script":return m=bl(a.src),(f=n.querySelector(Sc(m)))?(r.instance=f,Ht(f),f):(c=a,(f=qr.get(m))&&(c=E({},a),Zm(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ht(f),Vs(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Lh(c,a.precedence,n));return r.instance}function Lh(n,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,_=0;_<c.length;_++){var k=c[_];if(k.dataset.precedence===r)m=k;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function Jm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Zm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Oh=null;function $1(n,r,a){if(Oh===null){var c=new Map,f=Oh=new Map;f.set(a,c)}else f=Oh,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var m=a[f];if(!(m[xs]||m[dn]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(r)||"";_=n+_;var k=c.get(_);k?k.push(m):c.set(_,[m])}}return c}function W1(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function YT(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function G1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function QT(n,r,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=vl(c.href),m=r.querySelector(kc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Ph.bind(n),r.then(n,n)),a.state.loading|=4,a.instance=m,Ht(m);return}m=r.ownerDocument||r,c=q1(c),(f=qr.get(f))&&Jm(c,f),m=m.createElement("link"),Ht(m);var _=m;_._p=new Promise(function(k,B){_.onload=k,_.onerror=B}),Vs(m,"link",c),a.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Ph.bind(n),r.addEventListener("load",a),r.addEventListener("error",a))}}var ep=0;function XT(n,r){return n.stylesheets&&n.count===0&&Uh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var c=setTimeout(function(){if(n.stylesheets&&Uh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&ep===0&&(ep=62500*RT());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Uh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>ep?50:800)+r);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Vh=null;function Uh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Vh=new Map,r.forEach(JT,n),Vh=null,Ph.call(n))}function JT(n,r){if(!(r.state.loading&4)){var a=Vh.get(n);if(a)var c=a.get(null);else{a=new Map,Vh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),c=_)}c&&a.set(null,c)}f=r.instance,_=f.getAttribute("data-precedence"),m=a.get(_)||c,m===c&&a.set(null,f),a.set(_,f),this.count++,c=Ph.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var jc={$$typeof:ie,Provider:null,Consumer:null,_currentValue:Ie,_currentValue2:Ie,_threadCount:0};function ZT(n,r,a,c,f,m,_,k,B){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function K1(n,r,a,c,f,m,_,k,B,Z,fe,ge){return n=new ZT(n,r,a,_,B,Z,fe,ge,k),r=1,m===!0&&(r|=24),m=br(3,null,null,r),n.current=m,m.stateNode=n,r=Df(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:r},Pf(m),n}function Y1(n){return n?(n=Qo,n):Qo}function Q1(n,r,a,c,f,m){f=Y1(f),c.context===null?c.context=f:c.pendingContext=f,c=ga(r),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=ya(n,c,r),a!==null&&(ur(a,n,r),ic(a,n,r))}function X1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function tp(n,r){X1(n,r),(n=n.alternate)&&X1(n,r)}function J1(n){if(n.tag===13||n.tag===31){var r=lo(n,67108864);r!==null&&ur(r,n,67108864),tp(n,67108864)}}function Z1(n){if(n.tag===13||n.tag===31){var r=Tr();r=pn(r);var a=lo(n,r);a!==null&&ur(a,n,r),tp(n,r)}}var Bh=!0;function ek(n,r,a,c){var f=Q.T;Q.T=null;var m=Te.p;try{Te.p=2,np(n,r,a,c)}finally{Te.p=m,Q.T=f}}function tk(n,r,a,c){var f=Q.T;Q.T=null;var m=Te.p;try{Te.p=8,np(n,r,a,c)}finally{Te.p=m,Q.T=f}}function np(n,r,a,c){if(Bh){var f=sp(c);if(f===null)Fm(n,r,c,zh,a),tb(n,c);else if(sk(f,n,r,a,c))c.stopPropagation();else if(tb(n,c),r&4&&-1<nk.indexOf(n)){for(;f!==null;){var m=Yn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Vn(m.pendingLanes);if(_!==0){var k=m;for(k.pendingLanes|=2,k.entangledLanes|=2;_;){var B=1<<31-$e(_);k.entanglements[1]|=B,_&=~B}mi(m),(cn&6)===0&&(Eh=St()+500,wc(0))}}break;case 31:case 13:k=lo(m,2),k!==null&&ur(k,m,2),kh(),tp(m,2)}if(m=sp(c),m===null&&Fm(n,r,c,zh,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else Fm(n,r,c,null,a)}}function sp(n){return n=P(n),rp(n)}var zh=null;function rp(n){if(zh=null,n=Ts(n),n!==null){var r=u(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=h(r),n!==null)return n;n=null}else if(a===31){if(n=p(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return zh=n,null}function eb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case js:return 2;case bs:return 8;case un:case J:return 32;case Ce:return 268435456;default:return 32}default:return 32}}var ip=!1,Ca=null,Na=null,Aa=null,Cc=new Map,Nc=new Map,Ra=[],nk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tb(n,r){switch(n){case"focusin":case"focusout":Ca=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":Cc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nc.delete(r.pointerId)}}function Ac(n,r,a,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Yn(r),r!==null&&J1(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function sk(n,r,a,c,f){switch(r){case"focusin":return Ca=Ac(Ca,n,r,a,c,f),!0;case"dragenter":return Na=Ac(Na,n,r,a,c,f),!0;case"mouseover":return Aa=Ac(Aa,n,r,a,c,f),!0;case"pointerover":var m=f.pointerId;return Cc.set(m,Ac(Cc.get(m)||null,n,r,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Nc.set(m,Ac(Nc.get(m)||null,n,r,a,c,f)),!0}return!1}function nb(n){var r=Ts(n.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){n.blockedOn=r,ws(n.priority,function(){Z1(a)});return}}else if(r===31){if(r=p(a),r!==null){n.blockedOn=r,ws(n.priority,function(){Z1(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=sp(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Zt=c,a.target.dispatchEvent(c),Zt=null}else return r=Yn(a),r!==null&&J1(r),n.blockedOn=a,!1;r.shift()}return!0}function sb(n,r,a){Fh(n)&&a.delete(r)}function rk(){ip=!1,Ca!==null&&Fh(Ca)&&(Ca=null),Na!==null&&Fh(Na)&&(Na=null),Aa!==null&&Fh(Aa)&&(Aa=null),Cc.forEach(sb),Nc.forEach(sb)}function qh(n,r){n.blockedOn===r&&(n.blockedOn=null,ip||(ip=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,rk)))}var Hh=null;function rb(n){Hh!==n&&(Hh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Hh===n&&(Hh=null);for(var r=0;r<n.length;r+=3){var a=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(rp(c||a)===null)continue;break}var m=Yn(a);m!==null&&(n.splice(r,3),r-=3,sm(m,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function _l(n){function r(B){return qh(B,n)}Ca!==null&&qh(Ca,n),Na!==null&&qh(Na,n),Aa!==null&&qh(Aa,n),Cc.forEach(r),Nc.forEach(r);for(var a=0;a<Ra.length;a++){var c=Ra[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ra.length&&(a=Ra[0],a.blockedOn===null);)nb(a),a.blockedOn===null&&Ra.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],_=f[Cn]||null;if(typeof m=="function")_||rb(a);else if(_){var k=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Cn]||null)k=_.formAction;else if(rp(f)!==null)continue}else k=_.action;typeof k=="function"?a[c+1]=k:(a.splice(c,3),c-=3),rb(a)}}}function ib(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function ap(n){this._internalRoot=n}$h.prototype.render=ap.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,c=Tr();Q1(a,c,n,r,null,null)},$h.prototype.unmount=ap.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Q1(n.current,2,null,n,null,null),kh(),r[Cs]=null}};function $h(n){this._internalRoot=n}$h.prototype.unstable_scheduleHydration=function(n){if(n){var r=_s();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Ra.length&&r!==0&&r<Ra[a].priority;a++);Ra.splice(a,0,n),a===0&&nb(n)}};var ab=e.version;if(ab!=="19.2.4")throw Error(i(527,ab,"19.2.4"));Te.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var ik={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wh.isDisabled&&Wh.supportsFiber)try{ot=Wh.inject(ik),He=Wh}catch{}}return Ic.createRoot=function(n,r){if(!l(n))throw Error(i(299));var a=!1,c="",f=f0,m=m0,_=p0;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=K1(n,1,!1,null,null,a,c,null,f,m,_,ib),n[Cs]=r.current,zm(n),new ap(r)},Ic.hydrateRoot=function(n,r,a){if(!l(n))throw Error(i(299));var c=!1,f="",m=f0,_=m0,k=p0,B=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(k=a.onRecoverableError),a.formState!==void 0&&(B=a.formState)),r=K1(n,1,!0,r,a??null,c,f,B,m,_,k,ib),r.context=Y1(null),a=r.current,c=Tr(),c=pn(c),f=ga(c),f.callback=null,ya(a,f,c),a=c,r.current.lanes=a,Ye(r,a),mi(r),n[Cs]=r.current,zm(n),new $h(r)},Ic.version="19.2.4",Ic}var gb;function pk(){if(gb)return cp.exports;gb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),cp.exports=mk(),cp.exports}var gk=pk();const yk="modulepreload",vk=function(s){return"/login/"+s},yb={},Ys=function(e,t,i){let l=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(t.map(y=>{if(y=vk(y),y in yb)return;yb[y]=!0;const b=y.endsWith(".css"),E=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${E}`))return;const T=document.createElement("link");if(T.rel=b?"stylesheet":yk,b||(T.as="script"),T.crossOrigin="",T.href=y,p&&T.setAttribute("nonce",p),document.head.appendChild(T),b)return new Promise((M,q)=>{T.addEventListener("load",M),T.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var vb="popstate";function bk(s={}){function e(i,l){let{pathname:u,search:h,hash:p}=i.location;return qp("",{pathname:u,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){return typeof l=="string"?l:Jc(l)}return wk(e,t,null,s)}function qn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Gr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _k(){return Math.random().toString(36).substring(2,10)}function bb(s,e){return{usr:s.state,key:s.key,idx:e}}function qp(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ul(e):e,state:t,key:e&&e.key||i||_k()}}function Jc({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Ul(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function wk(s,e,t,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,y=b();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function b(){return(h.state||{idx:null}).idx}function E(){p="POP";let U=b(),ae=U==null?null:U-y;y=U,g&&g({action:p,location:H.location,delta:ae})}function T(U,ae){p="PUSH";let $=qp(H.location,U,ae);y=b()+1;let ie=bb($,y),de=H.createHref($);try{h.pushState(ie,"",de)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;l.location.assign(de)}u&&g&&g({action:p,location:H.location,delta:1})}function M(U,ae){p="REPLACE";let $=qp(H.location,U,ae);y=b();let ie=bb($,y),de=H.createHref($);h.replaceState(ie,"",de),u&&g&&g({action:p,location:H.location,delta:0})}function q(U){return xk(U)}let H={get action(){return p},get location(){return s(l,h)},listen(U){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(vb,E),g=U,()=>{l.removeEventListener(vb,E),g=null}},createHref(U){return e(l,U)},createURL:q,encodeLocation(U){let ae=q(U);return{pathname:ae.pathname,search:ae.search,hash:ae.hash}},push:T,replace:M,go(U){return h.go(U)}};return H}function xk(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),qn(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Jc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function __(s,e,t="/"){return Ek(s,e,t,!1)}function Ek(s,e,t,i){let l=typeof e=="string"?Ul(e):e,u=Ji(l.pathname||"/",t);if(u==null)return null;let h=w_(s);Tk(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=Lk(u);p=Dk(h[g],y,i)}return p}function w_(s,e=[],t=[],i="",l=!1){let u=(h,p,g=l,y)=>{let b={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;qn(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let E=Yi([i,b.relativePath]),T=t.concat(b);h.children&&h.children.length>0&&(qn(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),w_(h.children,e,T,E,g)),!(h.path==null&&!h.index)&&e.push({path:E,score:Rk(E,h.index),routesMeta:T})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of x_(h.path))u(h,p,!0,g)}),e}function x_(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,l=t.endsWith("?"),u=t.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=x_(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function Tk(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Ik(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var kk=/^:[\w-]+$/,Sk=3,jk=2,Ck=1,Nk=10,Ak=-2,_b=s=>s==="*";function Rk(s,e){let t=s.split("/"),i=t.length;return t.some(_b)&&(i+=Ak),e&&(i+=jk),t.filter(l=>!_b(l)).reduce((l,u)=>l+(kk.test(u)?Sk:u===""?Ck:Nk),i)}function Ik(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function Dk(s,e,t=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=u==="/"?e:e.slice(u.length)||"/",E=_d({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),T=g.route;if(!E&&y&&t&&!i[i.length-1].route.index&&(E=_d({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!E)return null;Object.assign(l,E.params),h.push({params:l,pathname:Yi([u,E.pathname]),pathnameBase:Uk(Yi([u,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(u=Yi([u,E.pathnameBase]))}return h}function _d(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=Mk(s.path,s.caseSensitive,s.end),l=e.match(t);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:E},T)=>{if(b==="*"){let q=p[T]||"";h=u.slice(0,u.length-q.length).replace(/(.)\/+$/,"$1")}const M=p[T];return E&&!M?y[b]=void 0:y[b]=(M||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function Mk(s,e=!1,t=!0){Gr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function Lk(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ji(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var Ok=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Pk(s,e="/"){let{pathname:t,search:i="",hash:l=""}=typeof s=="string"?Ul(s):s,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=wb(t.substring(1),"/"):u=wb(t,e)):u=e,{pathname:u,search:Bk(i),hash:zk(l)}}function wb(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function fp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Vk(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Eg(s){let e=Vk(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Tg(s,e,t,i=!1){let l;typeof s=="string"?l=Ul(s):(l={...s},qn(!l.pathname||!l.pathname.includes("?"),fp("?","pathname","search",l)),qn(!l.pathname||!l.pathname.includes("#"),fp("#","pathname","hash",l)),qn(!l.search||!l.search.includes("#"),fp("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=t;else{let E=e.length-1;if(!i&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),E-=1;l.pathname=T.join("/")}p=E>=0?e[E]:"/"}let g=Pk(l,p),y=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var Yi=s=>s.join("/").replace(/\/\/+/g,"/"),Uk=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Bk=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,zk=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Fk=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function qk(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Hk(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var E_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function T_(s,e){let t=s;if(typeof t!="string"||!Ok.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,l=!1;if(E_)try{let u=new URL(window.location.href),h=t.startsWith("//")?new URL(u.protocol+t):new URL(t),p=Ji(h.pathname,e);h.origin===u.origin&&p!=null?t=p+h.search+h.hash:l=!0}catch{Gr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var k_=["POST","PUT","PATCH","DELETE"];new Set(k_);var $k=["GET",...k_];new Set($k);var Bl=w.createContext(null);Bl.displayName="DataRouter";var zd=w.createContext(null);zd.displayName="DataRouterState";var Wk=w.createContext(!1),S_=w.createContext({isTransitioning:!1});S_.displayName="ViewTransition";var Gk=w.createContext(new Map);Gk.displayName="Fetchers";var Kk=w.createContext(null);Kk.displayName="Await";var Cr=w.createContext(null);Cr.displayName="Navigation";var fu=w.createContext(null);fu.displayName="Location";var oi=w.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var kg=w.createContext(null);kg.displayName="RouteError";var j_="REACT_ROUTER_ERROR",Yk="REDIRECT",Qk="ROUTE_ERROR_RESPONSE";function Xk(s){if(s.startsWith(`${j_}:${Yk}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Jk(s){if(s.startsWith(`${j_}:${Qk}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Fk(e.status,e.statusText,e.data)}catch{}}function Zk(s,{relative:e}={}){qn(zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=w.useContext(Cr),{hash:l,pathname:u,search:h}=mu(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:Yi([t,u])),i.createHref({pathname:p,search:h,hash:l})}function zl(){return w.useContext(fu)!=null}function Si(){return qn(zl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(fu).location}var C_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function N_(s){w.useContext(Cr).static||w.useLayoutEffect(s)}function Nr(){let{isDataRoute:s}=w.useContext(oi);return s?fS():eS()}function eS(){qn(zl(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(Bl),{basename:e,navigator:t}=w.useContext(Cr),{matches:i}=w.useContext(oi),{pathname:l}=Si(),u=JSON.stringify(Eg(i)),h=w.useRef(!1);return N_(()=>{h.current=!0}),w.useCallback((g,y={})=>{if(Gr(h.current,C_),!h.current)return;if(typeof g=="number"){t.go(g);return}let b=Tg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Yi([e,b.pathname])),(y.replace?t.replace:t.push)(b,y.state,y)},[e,t,u,l,s])}w.createContext(null);function tS(){let{matches:s}=w.useContext(oi),e=s[s.length-1];return e?e.params:{}}function mu(s,{relative:e}={}){let{matches:t}=w.useContext(oi),{pathname:i}=Si(),l=JSON.stringify(Eg(t));return w.useMemo(()=>Tg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function nS(s,e){return A_(s,e)}function A_(s,e,t,i,l){qn(zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(Cr),{matches:h}=w.useContext(oi),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",E=p&&p.route;{let $=E&&E.path||"";I_(y,!E||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=Si(),M;if(e){let $=typeof e=="string"?Ul(e):e;qn(b==="/"||$.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${$.pathname}" was given in the \`location\` prop.`),M=$}else M=T;let q=M.pathname||"/",H=q;if(b!=="/"){let $=b.replace(/^\//,"").split("/");H="/"+q.replace(/^\//,"").split("/").slice($.length).join("/")}let U=__(s,{pathname:H});Gr(E||U!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Gr(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ae=oS(U&&U.map($=>Object.assign({},$,{params:Object.assign({},g,$.params),pathname:Yi([b,u.encodeLocation?u.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?b:Yi([b,u.encodeLocation?u.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),h,t,i,l);return e&&ae?w.createElement(fu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},ae):ae}function sS(){let s=dS(),e=qk(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:l},t):null,h)}var rS=w.createElement(sS,null),R_=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=Jk(s.digest);t&&(s=t)}let e=s!==void 0?w.createElement(oi.Provider,{value:this.props.routeContext},w.createElement(kg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?w.createElement(iS,{error:s},e):e}};R_.contextType=Wk;var mp=new WeakMap;function iS({children:s,error:e}){let{basename:t}=w.useContext(Cr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=Xk(e.digest);if(i){let l=mp.get(e);if(l)throw l;let u=T_(i.location,t);if(E_&&!mp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw mp.set(e,h),h}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function aS({routeContext:s,match:e,children:t}){let i=w.useContext(Bl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(oi.Provider,{value:s},t)}function oS(s,e=[],t=null,i=null,l=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,h=t?.errors;if(h!=null){let b=u.findIndex(E=>E.route.id&&h?.[E.route.id]!==void 0);qn(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(t)for(let b=0;b<u.length;b++){let E=u[b];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=b),E.route.id){let{loaderData:T,errors:M}=t,q=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!M||M[E.route.id]===void 0);if(E.route.lazy||q){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=t&&i?(b,E)=>{i(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:Hk(t.matches),errorInfo:E})}:void 0;return u.reduceRight((b,E,T)=>{let M,q=!1,H=null,U=null;t&&(M=h&&E.route.id?h[E.route.id]:void 0,H=E.route.errorElement||rS,p&&(g<0&&T===0?(I_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),q=!0,U=null):g===T&&(q=!0,U=E.route.hydrateFallbackElement||null)));let ae=e.concat(u.slice(0,T+1)),$=()=>{let ie;return M?ie=H:q?ie=U:E.route.Component?ie=w.createElement(E.route.Component,null):E.route.element?ie=E.route.element:ie=b,w.createElement(aS,{match:E,routeContext:{outlet:b,matches:ae,isDataRoute:t!=null},children:ie})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?w.createElement(R_,{location:t.location,revalidation:t.revalidation,component:H,error:M,children:$(),routeContext:{outlet:null,matches:ae,isDataRoute:!0},onError:y}):$()},null)}function Sg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lS(s){let e=w.useContext(Bl);return qn(e,Sg(s)),e}function cS(s){let e=w.useContext(zd);return qn(e,Sg(s)),e}function uS(s){let e=w.useContext(oi);return qn(e,Sg(s)),e}function jg(s){let e=uS(s),t=e.matches[e.matches.length-1];return qn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function hS(){return jg("useRouteId")}function dS(){let s=w.useContext(kg),e=cS("useRouteError"),t=jg("useRouteError");return s!==void 0?s:e.errors?.[t]}function fS(){let{router:s}=lS("useNavigate"),e=jg("useNavigate"),t=w.useRef(!1);return N_(()=>{t.current=!0}),w.useCallback(async(l,u={})=>{Gr(t.current,C_),t.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var xb={};function I_(s,e,t){!e&&!xb[s]&&(xb[s]=!0,Gr(!1,t))}w.memo(mS);function mS({routes:s,future:e,state:t,onError:i}){return A_(s,void 0,t,i,e)}function D_({to:s,replace:e,state:t,relative:i}){qn(zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=w.useContext(Cr);Gr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=w.useContext(oi),{pathname:h}=Si(),p=Nr(),g=Tg(s,Eg(u),h,i==="path"),y=JSON.stringify(g);return w.useEffect(()=>{p(JSON.parse(y),{replace:e,state:t,relative:i})},[p,y,i,e,t]),null}function Pn(s){qn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pS({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){qn(!zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof t=="string"&&(t=Ul(t));let{pathname:y="/",search:b="",hash:E="",state:T=null,key:M="default"}=t,q=w.useMemo(()=>{let H=Ji(y,p);return H==null?null:{location:{pathname:H,search:b,hash:E,state:T,key:M},navigationType:i}},[p,y,b,E,T,M,i]);return Gr(q!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${E}" because it does not start with the basename, so the <Router> won't render anything.`),q==null?null:w.createElement(Cr.Provider,{value:g},w.createElement(fu.Provider,{children:e,value:q}))}function gS({children:s,location:e}){return nS(Hp(s),e)}function Hp(s,e=[]){let t=[];return w.Children.forEach(s,(i,l)=>{if(!w.isValidElement(i))return;let u=[...e,l];if(i.type===w.Fragment){t.push.apply(t,Hp(i.props.children,u));return}qn(i.type===Pn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Hp(i.props.children,u)),t.push(h)}),t}var od="get",ld="application/x-www-form-urlencoded";function Fd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function yS(s){return Fd(s)&&s.tagName.toLowerCase()==="button"}function vS(s){return Fd(s)&&s.tagName.toLowerCase()==="form"}function bS(s){return Fd(s)&&s.tagName.toLowerCase()==="input"}function _S(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function wS(s,e){return s.button===0&&(!e||e==="_self")&&!_S(s)}function $p(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let i=s[t];return e.concat(Array.isArray(i)?i.map(l=>[t,l]):[[t,i]])},[]))}function xS(s,e){let t=$p(s);return e&&e.forEach((i,l)=>{t.has(l)||e.getAll(l).forEach(u=>{t.append(l,u)})}),t}var Gh=null;function ES(){if(Gh===null)try{new FormData(document.createElement("form"),0),Gh=!1}catch{Gh=!0}return Gh}var TS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pp(s){return s!=null&&!TS.has(s)?(Gr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ld}"`),null):s}function kS(s,e){let t,i,l,u,h;if(vS(s)){let p=s.getAttribute("action");i=p?Ji(p,e):null,t=s.getAttribute("method")||od,l=pp(s.getAttribute("enctype"))||ld,u=new FormData(s)}else if(yS(s)||bS(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?Ji(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||od,l=pp(s.getAttribute("formenctype"))||pp(p.getAttribute("enctype"))||ld,u=new FormData(p,s),!ES()){let{name:y,type:b,value:E}=s;if(b==="image"){let T=y?`${y}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else y&&u.append(y,E)}}else{if(Fd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=od,i=null,l=ld,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:t.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function SS(s,e,t,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&Ji(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function jS(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function NS(s,e,t){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await jS(u,t);return h.links?h.links():[]}return[]}));return DS(i.flat(1).filter(CS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Eb(s,e,t,i,l,u){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,p=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function AS(s,e,{includeHydrateFallback:t}={}){return RS(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function RS(s){return[...new Set(s)]}function IS(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function DS(s,e){let t=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(IS(l));return t.has(u)||(t.add(u),i.push({key:u,link:l})),i},[])}function M_(){let s=w.useContext(Bl);return Cg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function MS(){let s=w.useContext(zd);return Cg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Ng=w.createContext(void 0);Ng.displayName="FrameworkContext";function L_(){let s=w.useContext(Ng);return Cg(s,"You must render this element inside a <HydratedRouter> element"),s}function LS(s,e){let t=w.useContext(Ng),[i,l]=w.useState(!1),[u,h]=w.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:E}=e,T=w.useRef(null);w.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let H=ae=>{ae.forEach($=>{h($.isIntersecting)})},U=new IntersectionObserver(H,{threshold:.5});return T.current&&U.observe(T.current),()=>{U.disconnect()}}},[s]),w.useEffect(()=>{if(i){let H=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(H)}}},[i]);let M=()=>{l(!0)},q=()=>{l(!1),h(!1)};return t?s!=="intent"?[u,T,{}]:[u,T,{onFocus:Dc(p,M),onBlur:Dc(g,q),onMouseEnter:Dc(y,M),onMouseLeave:Dc(b,q),onTouchStart:Dc(E,M)}]:[!1,T,{}]}function Dc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function OS({page:s,...e}){let{router:t}=M_(),i=w.useMemo(()=>__(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?w.createElement(VS,{page:s,matches:i,...e}):null}function PS(s){let{manifest:e,routeModules:t}=L_(),[i,l]=w.useState([]);return w.useEffect(()=>{let u=!1;return NS(s,e,t).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,t]),i}function VS({page:s,matches:e,...t}){let i=Si(),{future:l,manifest:u,routeModules:h}=L_(),{basename:p}=M_(),{loaderData:g,matches:y}=MS(),b=w.useMemo(()=>Eb(s,e,y,u,i,"data"),[s,e,y,u,i]),E=w.useMemo(()=>Eb(s,e,y,u,i,"assets"),[s,e,y,u,i]),T=w.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let H=new Set,U=!1;if(e.forEach($=>{let ie=u.routes[$.route.id];!ie||!ie.hasLoader||(!b.some(de=>de.route.id===$.route.id)&&$.route.id in g&&h[$.route.id]?.shouldRevalidate||ie.hasClientLoader?U=!0:H.add($.route.id))}),H.size===0)return[];let ae=SS(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return U&&H.size>0&&ae.searchParams.set("_routes",e.filter($=>H.has($.route.id)).map($=>$.route.id).join(",")),[ae.pathname+ae.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,b,e,s,h]),M=w.useMemo(()=>AS(E,u),[E,u]),q=PS(E);return w.createElement(w.Fragment,null,T.map(H=>w.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...t})),M.map(H=>w.createElement("link",{key:H,rel:"modulepreload",href:H,...t})),q.map(({key:H,link:U})=>w.createElement("link",{key:H,nonce:t.nonce,...U,crossOrigin:U.crossOrigin??t.crossOrigin})))}function US(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var BS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{BS&&(window.__reactRouterVersion="7.13.0")}catch{}function zS({basename:s,children:e,unstable_useTransitions:t,window:i}){let l=w.useRef();l.current==null&&(l.current=bk({window:i,v5Compat:!0}));let u=l.current,[h,p]=w.useState({action:u.action,location:u.location}),g=w.useCallback(y=>{t===!1?p(y):w.startTransition(()=>p(y))},[t]);return w.useLayoutEffect(()=>u.listen(g),[u,g]),w.createElement(pS,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:t})}var O_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,P_=w.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T,...M},q){let{basename:H,unstable_useTransitions:U}=w.useContext(Cr),ae=typeof y=="string"&&O_.test(y),$=T_(y,H);y=$.to;let ie=Zk(y,{relative:l}),[de,_e,ve]=LS(i,M),N=$S(y,{replace:h,state:p,target:g,preventScrollReset:b,relative:l,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:U});function S(V){e&&e(V),V.defaultPrevented||N(V)}let D=w.createElement("a",{...M,...ve,href:$.absoluteURL||ie,onClick:$.isExternal||u?e:S,ref:US(q,_e),target:g,"data-discover":!ae&&t==="render"?"true":void 0});return de&&!ae?w.createElement(w.Fragment,null,D,w.createElement(OS,{page:ie})):D});P_.displayName="Link";var FS=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...y},b){let E=mu(h,{relative:y.relative}),T=Si(),M=w.useContext(zd),{navigator:q,basename:H}=w.useContext(Cr),U=M!=null&&QS(E)&&p===!0,ae=q.encodeLocation?q.encodeLocation(E).pathname:E.pathname,$=T.pathname,ie=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;t||($=$.toLowerCase(),ie=ie?ie.toLowerCase():null,ae=ae.toLowerCase()),ie&&H&&(ie=Ji(ie,H)||ie);const de=ae!=="/"&&ae.endsWith("/")?ae.length-1:ae.length;let _e=$===ae||!l&&$.startsWith(ae)&&$.charAt(de)==="/",ve=ie!=null&&(ie===ae||!l&&ie.startsWith(ae)&&ie.charAt(ae.length)==="/"),N={isActive:_e,isPending:ve,isTransitioning:U},S=_e?e:void 0,D;typeof i=="function"?D=i(N):D=[i,_e?"active":null,ve?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(N):u;return w.createElement(P_,{...y,"aria-current":S,className:D,ref:b,style:V,to:h,viewTransition:p},typeof g=="function"?g(N):g)});FS.displayName="NavLink";var qS=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:l,state:u,method:h=od,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T,...M},q)=>{let{unstable_useTransitions:H}=w.useContext(Cr),U=KS(),ae=YS(p,{relative:y}),$=h.toLowerCase()==="get"?"get":"post",ie=typeof p=="string"&&O_.test(p),de=_e=>{if(g&&g(_e),_e.defaultPrevented)return;_e.preventDefault();let ve=_e.nativeEvent.submitter,N=ve?.getAttribute("formmethod")||h,S=()=>U(ve||_e.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:l,state:u,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T});H&&t!==!1?w.startTransition(()=>S()):S()};return w.createElement("form",{ref:q,method:$,action:ae,onSubmit:i?g:de,...M,"data-discover":!ie&&s==="render"?"true":void 0})});qS.displayName="Form";function HS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V_(s){let e=w.useContext(Bl);return qn(e,HS(s)),e}function $S(s,{target:e,replace:t,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Nr(),b=Si(),E=mu(s,{relative:u});return w.useCallback(T=>{if(wS(T,e)){T.preventDefault();let M=t!==void 0?t:Jc(b)===Jc(E),q=()=>y(s,{replace:M,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?w.startTransition(()=>q()):q()}},[b,y,E,t,i,e,s,l,u,h,p,g])}function l3(s){Gr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef($p(s)),t=w.useRef(!1),i=Si(),l=w.useMemo(()=>xS(i.search,t.current?null:e.current),[i.search]),u=Nr(),h=w.useCallback((p,g)=>{const y=$p(typeof p=="function"?p(new URLSearchParams(l)):p);t.current=!0,u("?"+y,g)},[u,l]);return[l,h]}var WS=0,GS=()=>`__${String(++WS)}__`;function KS(){let{router:s}=V_("useSubmit"),{basename:e}=w.useContext(Cr),t=hS(),i=s.fetch,l=s.navigate;return w.useCallback(async(u,h={})=>{let{action:p,method:g,encType:y,formData:b,body:E}=kS(u,e);if(h.navigate===!1){let T=h.fetcherKey||GS();await i(T,t,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:E,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:E,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:t,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,t])}function YS(s,{relative:e}={}){let{basename:t}=w.useContext(Cr),i=w.useContext(oi);qn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...mu(s||".",{relative:e})},h=Si();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(E=>E).forEach(E=>p.append("index",E));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:Yi([t,u.pathname])),Jc(u)}function QS(s,{relative:e}={}){let t=w.useContext(S_);qn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=V_("useViewTransitionState"),l=mu(s,{relative:e});if(!t.isTransitioning)return!1;let u=Ji(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=Ji(t.nextLocation.pathname,i)||t.nextLocation.pathname;return _d(l.pathname,h)!=null||_d(l.pathname,u)!=null}const XS=()=>{};var Tb={};const U_=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},JS=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const l=s[t++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[t++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[t++],h=s[t++],p=s[t++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},B_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,b=u>>2,E=(u&3)<<4|p>>4;let T=(p&15)<<2|y>>6,M=y&63;g||(M=64,h||(T=64)),i.push(t[b],t[E],t[T],t[M])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(U_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):JS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=t[s.charAt(l++)],p=l<s.length?t[s.charAt(l)]:0;++l;const y=l<s.length?t[s.charAt(l)]:64;++l;const E=l<s.length?t[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||E==null)throw new ZS;const T=u<<2|p>>4;if(i.push(T),y!==64){const M=p<<4&240|y>>2;if(i.push(M),E!==64){const q=y<<6&192|E;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class ZS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ej=function(s){const e=U_(s);return B_.encodeByteArray(e,!0)},wd=function(s){return ej(s).replace(/\./g,"")},z_=function(s){try{return B_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const nj=()=>tj().__FIREBASE_DEFAULTS__,sj=()=>{if(typeof process>"u"||typeof Tb>"u")return;const s=Tb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},rj=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&z_(s[1]);return e&&JSON.parse(e)},qd=()=>{try{return XS()||nj()||sj()||rj()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},F_=s=>qd()?.emulatorHosts?.[s],q_=s=>{const e=F_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},H_=()=>qd()?.config,$_=s=>qd()?.[`_${s}`];class ij{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Za(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ag(s){return(await fetch(s,{credentials:"include"})).ok}function W_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[wd(JSON.stringify(t)),wd(JSON.stringify(h)),""].join(".")}const $c={};function aj(){const s={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?s.emulator.push(e):s.prod.push(e);return s}function oj(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let kb=!1;function Rg(s,e){if(typeof window>"u"||typeof document>"u"||!Za(window.location.host)||$c[s]===e||$c[s]||kb)return;$c[s]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",u=aj().prod.length>0;function h(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,M){T.setAttribute("width","24"),T.setAttribute("id",M),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{kb=!0,h()},T}function b(T,M){T.setAttribute("id",M),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=oj(i),M=t("text"),q=document.getElementById(M)||document.createElement("span"),H=t("learnmore"),U=document.getElementById(H)||document.createElement("a"),ae=t("preprendIcon"),$=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const ie=T.element;p(ie),b(U,H);const de=y();g($,ae),ie.append($,q,U,de),document.body.appendChild(ie)}u?(q.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Ks(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ks())}function cj(){const s=qd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hj(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function dj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fj(){const s=Ks();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function mj(){return!cj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pj(){try{return typeof indexedDB=="object"}catch{return!1}}function gj(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}const yj="FirebaseError";class ji extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=yj,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pu.prototype.create)}}class pu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?vj(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new ji(l,p,i)}}function vj(s,e){return s.replace(bj,(t,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const bj=/\{\$([^}]+)}/g;function _j(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ro(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const l of t){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(Sb(u)&&Sb(h)){if(!Ro(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!t.includes(l))return!1;return!0}function Sb(s){return s!==null&&typeof s=="object"}function gu(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Uc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Bc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function wj(s,e){const t=new xj(s,e);return t.subscribe.bind(t)}class xj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let l;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Ej(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:i},l.next===void 0&&(l.next=gp),l.error===void 0&&(l.error=gp),l.complete===void 0&&(l.complete=gp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ej(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function gp(){}function kn(s){return s&&s._delegate?s._delegate:s}class Wa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const To="[DEFAULT]";class Tj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ij;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sj(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const l of i)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kj(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kj(s){return s===To?void 0:s}function Sj(s){return s.instantiationMode==="EAGER"}class jj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Kt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Kt||(Kt={}));const Cj={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},Nj=Kt.INFO,Aj={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},Rj=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=Aj[e];if(l)console[l](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ig{constructor(e){this.name=e,this._logLevel=Nj,this._logHandler=Rj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const Ij=(s,e)=>e.some(t=>s instanceof t);let jb,Cb;function Dj(){return jb||(jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mj(){return Cb||(Cb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G_=new WeakMap,Wp=new WeakMap,K_=new WeakMap,yp=new WeakMap,Dg=new WeakMap;function Lj(s){const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(Fa(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&G_.set(t,s)}).catch(()=>{}),Dg.set(e,s),e}function Oj(s){if(Wp.has(s))return;const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Wp.set(s,e)}let Gp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Wp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||K_.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fa(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Pj(s){Gp=s(Gp)}function Vj(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(vp(this),e,...t);return K_.set(i,e.sort?e.sort():[e]),Fa(i)}:Mj().includes(s)?function(...e){return s.apply(vp(this),e),Fa(G_.get(this))}:function(...e){return Fa(s.apply(vp(this),e))}}function Uj(s){return typeof s=="function"?Vj(s):(s instanceof IDBTransaction&&Oj(s),Ij(s,Dj())?new Proxy(s,Gp):s)}function Fa(s){if(s instanceof IDBRequest)return Lj(s);if(yp.has(s))return yp.get(s);const e=Uj(s);return e!==s&&(yp.set(s,e),Dg.set(e,s)),e}const vp=s=>Dg.get(s);function Bj(s,e,{blocked:t,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=Fa(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Fa(h.result),g.oldVersion,g.newVersion,Fa(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const zj=["get","getKey","getAll","getAllKeys","count"],Fj=["put","add","delete","clear"],bp=new Map;function Nb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(bp.get(e))return bp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,l=Fj.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(l||zj.includes(t)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),l&&g.done]))[0]};return bp.set(e,u),u}Pj(s=>({...s,get:(e,t,i)=>Nb(e,t)||s.get(e,t,i),has:(e,t)=>!!Nb(e,t)||s.has(e,t)}));class qj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Hj(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Hj(s){return s.getComponent()?.type==="VERSION"}const Kp="@firebase/app",Ab="0.14.7";const Zi=new Ig("@firebase/app"),$j="@firebase/app-compat",Wj="@firebase/analytics-compat",Gj="@firebase/analytics",Kj="@firebase/app-check-compat",Yj="@firebase/app-check",Qj="@firebase/auth",Xj="@firebase/auth-compat",Jj="@firebase/database",Zj="@firebase/data-connect",eC="@firebase/database-compat",tC="@firebase/functions",nC="@firebase/functions-compat",sC="@firebase/installations",rC="@firebase/installations-compat",iC="@firebase/messaging",aC="@firebase/messaging-compat",oC="@firebase/performance",lC="@firebase/performance-compat",cC="@firebase/remote-config",uC="@firebase/remote-config-compat",hC="@firebase/storage",dC="@firebase/storage-compat",fC="@firebase/firestore",mC="@firebase/ai",pC="@firebase/firestore-compat",gC="firebase",yC="12.8.0";const Yp="[DEFAULT]",vC={[Kp]:"fire-core",[$j]:"fire-core-compat",[Gj]:"fire-analytics",[Wj]:"fire-analytics-compat",[Yj]:"fire-app-check",[Kj]:"fire-app-check-compat",[Qj]:"fire-auth",[Xj]:"fire-auth-compat",[Jj]:"fire-rtdb",[Zj]:"fire-data-connect",[eC]:"fire-rtdb-compat",[tC]:"fire-fn",[nC]:"fire-fn-compat",[sC]:"fire-iid",[rC]:"fire-iid-compat",[iC]:"fire-fcm",[aC]:"fire-fcm-compat",[oC]:"fire-perf",[lC]:"fire-perf-compat",[cC]:"fire-rc",[uC]:"fire-rc-compat",[hC]:"fire-gcs",[dC]:"fire-gcs-compat",[fC]:"fire-fst",[pC]:"fire-fst-compat",[mC]:"fire-vertex","fire-js":"fire-js",[gC]:"fire-js-all"};const xd=new Map,bC=new Map,Qp=new Map;function Rb(s,e){try{s.container.addComponent(e)}catch(t){Zi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Io(s){const e=s.name;if(Qp.has(e))return Zi.debug(`There were multiple attempts to register component ${e}.`),!1;Qp.set(e,s);for(const t of xd.values())Rb(t,s);for(const t of bC.values())Rb(t,s);return!0}function Hd(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function kr(s){return s==null?!1:s.settings!==void 0}const _C={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qa=new pu("app","Firebase",_C);class wC{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qa.create("app-deleted",{appName:this._name})}}const Uo=yC;function Mg(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Yp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw qa.create("bad-app-name",{appName:String(l)});if(t||(t=H_()),!t)throw qa.create("no-options");const u=xd.get(l);if(u){if(Ro(t,u.options)&&Ro(i,u.config))return u;throw qa.create("duplicate-app",{appName:l})}const h=new jj(l);for(const g of Qp.values())h.addComponent(g);const p=new wC(t,i,h);return xd.set(l,p),p}function Lg(s=Yp){const e=xd.get(s);if(!e&&s===Yp&&H_())return Mg();if(!e)throw qa.create("no-app",{appName:s});return e}function vi(s,e,t){let i=vC[s]??s;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zi.warn(h.join(" "));return}Io(new Wa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const xC="firebase-heartbeat-database",EC=1,Zc="firebase-heartbeat-store";let _p=null;function Y_(){return _p||(_p=Bj(xC,EC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Zc)}catch(t){console.warn(t)}}}}).catch(s=>{throw qa.create("idb-open",{originalErrorMessage:s.message})})),_p}async function TC(s){try{const t=(await Y_()).transaction(Zc),i=await t.objectStore(Zc).get(Q_(s));return await t.done,i}catch(e){if(e instanceof ji)Zi.warn(e.message);else{const t=qa.create("idb-get",{originalErrorMessage:e?.message});Zi.warn(t.message)}}}async function Ib(s,e){try{const i=(await Y_()).transaction(Zc,"readwrite");await i.objectStore(Zc).put(e,Q_(s)),await i.done}catch(t){if(t instanceof ji)Zi.warn(t.message);else{const i=qa.create("idb-set",{originalErrorMessage:t?.message});Zi.warn(i.message)}}}function Q_(s){return`${s.name}!${s.options.appId}`}const kC=1024,SC=30;class jC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Db();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>SC){const l=AC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Zi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Db(),{heartbeatsToSend:t,unsentEntries:i}=CC(this._heartbeatsCache.heartbeats),l=wd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Zi.warn(e),""}}}function Db(){return new Date().toISOString().substring(0,10)}function CC(s,e=kC){const t=[];let i=s.slice();for(const l of s){const u=t.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),Mb(t)>e){u.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),Mb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class NC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pj()?gj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await TC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Mb(s){return wd(JSON.stringify({version:2,heartbeats:s})).length}function AC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function RC(s){Io(new Wa("platform-logger",e=>new qj(e),"PRIVATE")),Io(new Wa("heartbeat",e=>new jC(e),"PRIVATE")),vi(Kp,Ab,s),vi(Kp,Ab,"esm2020"),vi("fire-js","")}RC("");function X_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IC=X_,J_=new pu("auth","Firebase",X_());const Ed=new Ig("@firebase/auth");function DC(s,...e){Ed.logLevel<=Kt.WARN&&Ed.warn(`Auth (${Uo}): ${s}`,...e)}function cd(s,...e){Ed.logLevel<=Kt.ERROR&&Ed.error(`Auth (${Uo}): ${s}`,...e)}function ii(s,...e){throw Og(s,...e)}function bi(s,...e){return Og(s,...e)}function Z_(s,e,t){const i={...IC(),[e]:t};return new pu("auth","Firebase",i).create(e,{appName:s.name})}function Qi(s){return Z_(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Og(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return J_.create(s,...e)}function yt(s,e,...t){if(!s)throw Og(e,...t)}function Gi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw cd(e),new Error(e)}function ea(s,e){s||Gi(e)}function Xp(){return typeof self<"u"&&self.location?.href||""}function MC(){return Lb()==="http:"||Lb()==="https:"}function Lb(){return typeof self<"u"&&self.location?.protocol||null}function LC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MC()||hj()||"connection"in navigator)?navigator.onLine:!0}function OC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ea(t>e,"Short delay should be less than long delay!"),this.isMobile=lj()||dj()}get(){return LC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pg(s,e){ea(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ew{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const PC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const VC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UC=new yu(3e4,6e4);function ra(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ia(s,e,t,i,l={}){return tw(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=gu({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return uj()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Za(s.emulatorConfig.host)&&(y.credentials="include"),ew.fetch()(await nw(s,s.config.apiHost,t,p),y)})}async function tw(s,e,t){s._canInitEmulator=!1;const i={...PC,...e};try{const l=new zC(s),u=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Kh(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Kh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Kh(s,"user-disabled",h);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Z_(s,b,y);ii(s,b)}}catch(l){if(l instanceof ji)throw l;ii(s,"network-request-failed",{message:String(l)})}}async function vu(s,e,t,i,l={}){const u=await ia(s,e,t,i,l);return"mfaPendingCredential"in u&&ii(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function nw(s,e,t,i){const l=`${e}${t}?${i}`,u=s,h=u.config.emulator?Pg(s.config,l):`${s.config.apiScheme}://${l}`;return VC.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function BC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(bi(this.auth,"network-request-failed")),UC.get())})}}function Kh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const l=bi(s,e,i);return l.customData._tokenResponse=t,l}function Ob(s){return s!==void 0&&s.enterprise!==void 0}class FC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qC(s,e){return ia(s,"GET","/v2/recaptchaConfig",ra(s,e))}async function HC(s,e){return ia(s,"POST","/v1/accounts:delete",e)}async function Td(s,e){return ia(s,"POST","/v1/accounts:lookup",e)}function Wc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $C(s,e=!1){const t=kn(s),i=await t.getIdToken(e),l=Vg(i);yt(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Wc(wp(l.auth_time)),issuedAtTime:Wc(wp(l.iat)),expirationTime:Wc(wp(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function wp(s){return Number(s)*1e3}function Vg(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{const l=z_(t);return l?JSON.parse(l):(cd("Failed to decode base64 JWT payload"),null)}catch(l){return cd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Pb(s){const e=Vg(s);return yt(e,"internal-error"),yt(typeof e.exp<"u","internal-error"),yt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function eu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ji&&WC(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function WC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class GC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Jp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wc(this.lastLoginAt),this.creationTime=Wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kd(s){const e=s.auth,t=await s.getIdToken(),i=await eu(s,Td(e,{idToken:t}));yt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?sw(l.providerUserInfo):[],h=YC(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,y=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Jp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function KC(s){const e=kn(s);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YC(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function sw(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function QC(s,e){const t=await tw(s,{},async()=>{const i=gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await nw(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&Za(s.emulatorConfig.host)&&(g.credentials="include"),ew.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function XC(s,e){return ia(s,"POST","/v2/accounts:revokeToken",ra(s,e))}class Cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt(typeof e.idToken<"u","internal-error"),yt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){yt(e.length!==0,"internal-error");const t=Pb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:l,expiresIn:u}=await QC(e,t);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:l,expirationTime:u}=t,h=new Cl;return i&&(yt(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(yt(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(yt(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cl,this.toJSON())}_performRefresh(){return Gi("not implemented")}}function Da(s,e){yt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ni{constructor({uid:e,auth:t,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new GC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Jp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await eu(this,this.stsTokenManager.getToken(this.auth,e));return yt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $C(this,e)}reload(){return KC(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await kd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(Qi(this.auth));const e=await this.getIdToken();return await eu(this,HC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,l=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:M,providerData:q,stsTokenManager:H}=t;yt(E&&H,e,"internal-error");const U=Cl.fromJSON(this.name,H);yt(typeof E=="string",e,"internal-error"),Da(i,e.name),Da(l,e.name),yt(typeof T=="boolean",e,"internal-error"),yt(typeof M=="boolean",e,"internal-error"),Da(u,e.name),Da(h,e.name),Da(p,e.name),Da(g,e.name),Da(y,e.name),Da(b,e.name);const ae=new ni({uid:E,auth:e,email:l,emailVerified:T,displayName:i,isAnonymous:M,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:U,createdAt:y,lastLoginAt:b});return q&&Array.isArray(q)&&(ae.providerData=q.map($=>({...$}))),g&&(ae._redirectEventId=g),ae}static async _fromIdTokenResponse(e,t,i=!1){const l=new Cl;l.updateFromServerResponse(t);const u=new ni({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await kd(u),u}static async _fromGetAccountInfoResponse(e,t,i){const l=t.users[0];yt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?sw(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new Cl;p.updateFromIdToken(i);const g=new ni({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Jp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const Vb=new Map;function Ki(s){ea(s instanceof Function,"Expected a class definition");let e=Vb.get(s);return e?(ea(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Vb.set(s,e),e)}class rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rw.type="NONE";const Ub=rw;function ud(s,e,t){return`firebase:${s}:${e}:${t}`}class Nl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=ud(this.userKey,l.apiKey,u),this.fullPersistenceKey=ud("persistence",l.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Td(this.auth,{idToken:e}).catch(()=>{});return t?ni._fromGetAccountInfoResponse(this.auth,t,e):null}return ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Nl(Ki(Ub),e,i);const l=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Ki(Ub);const h=ud(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const b=await y._get(h);if(b){let E;if(typeof b=="string"){const T=await Td(e,{idToken:b}).catch(()=>{});if(!T)break;E=await ni._fromGetAccountInfoResponse(e,T,b)}else E=ni._fromJSON(e,b);y!==u&&(p=E),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Nl(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new Nl(u,e,i))}}function Bb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uw(e))return"Blackberry";if(hw(e))return"Webos";if(aw(e))return"Safari";if((e.includes("chrome/")||ow(e))&&!e.includes("edge/"))return"Chrome";if(cw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function iw(s=Ks()){return/firefox\//i.test(s)}function aw(s=Ks()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ow(s=Ks()){return/crios\//i.test(s)}function lw(s=Ks()){return/iemobile/i.test(s)}function cw(s=Ks()){return/android/i.test(s)}function uw(s=Ks()){return/blackberry/i.test(s)}function hw(s=Ks()){return/webos/i.test(s)}function Ug(s=Ks()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function JC(s=Ks()){return Ug(s)&&!!window.navigator?.standalone}function ZC(){return fj()&&document.documentMode===10}function dw(s=Ks()){return Ug(s)||cw(s)||hw(s)||uw(s)||/windows phone/i.test(s)||lw(s)}function fw(s,e=[]){let t;switch(s){case"Browser":t=Bb(Ks());break;case"Worker":t=`${Bb(Ks())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uo}/${i}`}class eN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function tN(s,e={}){return ia(s,"GET","/v2/passwordPolicy",ra(s,e))}const nN=6;class sN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??nN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class rN{constructor(e,t,i,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zb(this),this.idTokenSubscription=new zb(this),this.beforeStateQueue=new eN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ki(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Nl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Td(this,{idToken:e}),i=await ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(kr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kr(this.app))return Promise.reject(Qi(this));const t=e?kn(e):null;return t&&yt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(Qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kr(this.app)?Promise.reject(Qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tN(this),t=new sN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await XC(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ki(e)||this._popupRedirectResolver;yt(t,this,"argument-error"),this.redirectPersistenceManager=await Nl.create(this,[Ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,l){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&DC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function eo(s){return kn(s)}class zb{constructor(e){this.auth=e,this.observer=null,this.addObserver=wj(t=>this.observer=t)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iN(s){$d=s}function mw(s){return $d.loadJS(s)}function aN(){return $d.recaptchaEnterpriseScript}function oN(){return $d.gapiScript}function lN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class cN{constructor(){this.enterprise=new uN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const hN="recaptcha-enterprise",pw="NO_RECAPTCHA";class dN{constructor(e){this.type=hN,this.auth=eo(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{qC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new FC(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;Ob(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(pw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cN().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!t&&Ob(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=aN();g.length!==0&&(g+=p),mw(g).then(()=>{l(p,u,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function Fb(s,e,t,i=!1,l=!1){const u=new dN(s);let h;if(l)h=pw;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Sd(s,e,t,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Fb(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Fb(s,e,t,t==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function fN(s,e){const t=Hd(s,"auth");if(t.isInitialized()){const l=t.getImmediate(),u=t.getOptions();if(Ro(u,e??{}))return l;ii(l,"already-initialized")}return t.initialize({options:e})}function mN(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ki);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function pN(s,e,t){const i=eo(s);yt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=gw(e),{host:h,port:p}=gN(e),g=p===null?"":`:${p}`,y={url:`${u}//${h}${g}/`},b=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){yt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),yt(Ro(y,i.config.emulator)&&Ro(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,Za(h)?(Ag(`${u}//${h}${g}`),Rg("Auth",!0)):yN()}function gw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function gN(s){const e=gw(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:qb(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:qb(h)}}}function qb(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function yN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Bg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gi("not implemented")}_getIdTokenResponse(e){return Gi("not implemented")}_linkToIdToken(e,t){return Gi("not implemented")}_getReauthenticationResolver(e){return Gi("not implemented")}}async function vN(s,e){return ia(s,"POST","/v1/accounts:signUp",e)}async function bN(s,e){return vu(s,"POST","/v1/accounts:signInWithPassword",ra(s,e))}async function yw(s,e){return ia(s,"POST","/v1/accounts:sendOobCode",ra(s,e))}async function _N(s,e){return yw(s,e)}async function wN(s,e){return yw(s,e)}async function xN(s,e){return vu(s,"POST","/v1/accounts:signInWithEmailLink",ra(s,e))}async function EN(s,e){return vu(s,"POST","/v1/accounts:signInWithEmailLink",ra(s,e))}class tu extends Bg{constructor(e,t,i,l=null){super("password",i),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new tu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new tu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sd(e,t,"signInWithPassword",bN);case"emailLink":return xN(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sd(e,i,"signUpPassword",vN);case"emailLink":return EN(e,{idToken:t,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Al(s,e){return vu(s,"POST","/v1/accounts:signInWithIdp",ra(s,e))}const TN="http://localhost";class Do extends Bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ii("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=t;if(!i||!l)return null;const h=new Do(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Al(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Al(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Al(e,t)}buildRequest(){const e={requestUri:TN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gu(t)}return e}}function kN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SN(s){const e=Uc(Bc(s)).link,t=e?Uc(Bc(e)).deep_link_id:null,i=Uc(Bc(s)).deep_link_id;return(i?Uc(Bc(i)).link:null)||i||t||e||s}class zg{constructor(e){const t=Uc(Bc(e)),i=t.apiKey??null,l=t.oobCode??null,u=kN(t.mode??null);yt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=SN(e);try{return new zg(t)}catch{return null}}}class Fl{constructor(){this.providerId=Fl.PROVIDER_ID}static credential(e,t){return tu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=zg.parseLink(t);return yt(i,"argument-error"),tu._fromEmailAndCode(e,i.code,i.tenantId)}}Fl.PROVIDER_ID="password";Fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class vw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class bu extends vw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ma extends bu{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:Ma.PROVIDER_ID,signInMethod:Ma.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ma.credentialFromTaggedObject(e)}static credentialFromError(e){return Ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ma.credential(e.oauthAccessToken)}catch{return null}}}Ma.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ma.PROVIDER_ID="facebook.com";class La extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:La.PROVIDER_ID,signInMethod:La.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return La.credentialFromTaggedObject(e)}static credentialFromError(e){return La.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return La.credential(t,i)}catch{return null}}}La.GOOGLE_SIGN_IN_METHOD="google.com";La.PROVIDER_ID="google.com";class Oa extends bu{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:Oa.PROVIDER_ID,signInMethod:Oa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oa.credentialFromTaggedObject(e)}static credentialFromError(e){return Oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oa.credential(e.oauthAccessToken)}catch{return null}}}Oa.GITHUB_SIGN_IN_METHOD="github.com";Oa.PROVIDER_ID="github.com";class Pa extends bu{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:Pa.PROVIDER_ID,signInMethod:Pa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pa.credentialFromTaggedObject(e)}static credentialFromError(e){return Pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Pa.credential(t,i)}catch{return null}}}Pa.TWITTER_SIGN_IN_METHOD="twitter.com";Pa.PROVIDER_ID="twitter.com";async function jN(s,e){return vu(s,"POST","/v1/accounts:signUp",ra(s,e))}class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,l=!1){const u=await ni._fromIdTokenResponse(e,i,l),h=Hb(i);return new Mo({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const l=Hb(i);return new Mo({user:e,providerId:l,_tokenResponse:i,operationType:t})}}function Hb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class jd extends ji{constructor(e,t,i,l){super(t.code,t.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,l){return new jd(e,t,i,l)}}function bw(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(s,u,e,i):u})}async function CN(s,e,t=!1){const i=await eu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Mo._forOperation(s,"link",i)}async function NN(s,e,t=!1){const{auth:i}=s;if(kr(i.app))return Promise.reject(Qi(i));const l="reauthenticate";try{const u=await eu(s,bw(i,l,e,s),t);yt(u.idToken,i,"internal-error");const h=Vg(u.idToken);yt(h,i,"internal-error");const{sub:p}=h;return yt(s.uid===p,i,"user-mismatch"),Mo._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&ii(i,"user-mismatch"),u}}async function _w(s,e,t=!1){if(kr(s.app))return Promise.reject(Qi(s));const i="signIn",l=await bw(s,i,e),u=await Mo._fromIdTokenResponse(s,i,l);return t||await s._updateCurrentUser(u.user),u}async function AN(s,e){return _w(eo(s),e)}async function ww(s){const e=eo(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RN(s,e,t){const i=eo(s);await Sd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",wN)}async function IN(s,e,t){if(kr(s.app))return Promise.reject(Qi(s));const i=eo(s),h=await Sd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jN).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&ww(s),g}),p=await Mo._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function DN(s,e,t){return kr(s.app)?Promise.reject(Qi(s)):AN(kn(s),Fl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ww(s),i})}async function c3(s,e){const t=kn(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:u}=await _N(t.auth,l);u!==s.email&&await s.reload()}function $b(s,e){return kn(s).setPersistence(e)}function MN(s,e,t,i){return kn(s).onIdTokenChanged(e,t,i)}function LN(s,e,t){return kn(s).beforeAuthStateChanged(e,t)}function ON(s,e,t,i){return kn(s).onAuthStateChanged(e,t,i)}function PN(s){return kn(s).signOut()}const Cd="__sak";class xw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const VN=1e3,UN=10;class Ew extends xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),l=this.localCache[t];i!==l&&e(t,l,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);ZC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,UN):l()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},VN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ew.type="LOCAL";const Zp=Ew;class Tw extends xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tw.type="SESSION";const Fg=Tw;function BN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const i=new Wd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:l,data:u}=t.data,h=this.handlersMap[l];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async y=>y(t.origin,u)),g=await BN(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];function qg(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class zN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const y=qg("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(T.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function _i(){return window}function FN(s){_i().location.href=s}function kw(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function qN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HN(){return navigator?.serviceWorker?.controller||null}function $N(){return kw()?self:null}const Sw="firebaseLocalStorageDb",WN=1,Nd="firebaseLocalStorage",jw="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gd(s,e){return s.transaction([Nd],e?"readwrite":"readonly").objectStore(Nd)}function GN(){const s=indexedDB.deleteDatabase(Sw);return new _u(s).toPromise()}function eg(){const s=indexedDB.open(Sw,WN);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Nd,{keyPath:jw})}catch(l){t(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Nd)?e(i):(i.close(),await GN(),e(await eg()))})})}async function Wb(s,e,t){const i=Gd(s,!0).put({[jw]:e,value:t});return new _u(i).toPromise()}async function KN(s,e){const t=Gd(s,!1).get(e),i=await new _u(t).toPromise();return i===void 0?null:i.value}function Gb(s,e){const t=Gd(s,!0).delete(e);return new _u(t).toPromise()}const YN=800,QN=3;class Cw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>QN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance($N()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await qN(),!this.activeServiceWorker)return;this.sender=new zN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eg();return await Wb(e,Cd,"1"),await Gb(e,Cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>KN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Gd(l,!1).getAll();return new _u(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cw.type="LOCAL";const XN=Cw;new yu(3e4,6e4);function JN(s,e){return e?Ki(e):(yt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Hg extends Bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Al(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Al(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Al(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ZN(s){return _w(s.auth,new Hg(s),s.bypassAuthState)}function eA(s){const{auth:e,user:t}=s;return yt(t,e,"internal-error"),NN(t,new Hg(s),s.bypassAuthState)}async function tA(s){const{auth:e,user:t}=s;return yt(t,e,"internal-error"),CN(t,new Hg(s),s.bypassAuthState)}class Nw{constructor(e,t,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZN;case"linkViaPopup":case"linkViaRedirect":return tA;case"reauthViaPopup":case"reauthViaRedirect":return eA;default:ii(this.auth,"internal-error")}}resolve(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ea(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nA=new yu(2e3,1e4);class jl extends Nw{constructor(e,t,i,l,u){super(e,t,l,u),this.provider=i,this.authWindow=null,this.pollId=null,jl.currentPopupAction&&jl.currentPopupAction.cancel(),jl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yt(e,this.auth,"internal-error"),e}async onExecution(){ea(this.filter.length===1,"Popup operations only handle one event");const e=qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nA.get())};e()}}jl.currentPopupAction=null;const sA="pendingRedirect",hd=new Map;class rA extends Nw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=hd.get(this.auth._key());if(!e){try{const i=await iA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}hd.set(this.auth._key(),e)}return this.bypassAuthState||hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iA(s,e){const t=lA(e),i=oA(s);if(!await i._isAvailable())return!1;const l=await i._get(t)==="true";return await i._remove(t),l}function aA(s,e){hd.set(s._key(),e)}function oA(s){return Ki(s._redirectPersistence)}function lA(s){return ud(sA,s.config.apiKey,s.name)}async function cA(s,e,t=!1){if(kr(s.app))return Promise.reject(Qi(s));const i=eo(s),l=JN(i,e),h=await new rA(i,l,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const uA=600*1e3;class hA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Aw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(bi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kb(e))}saveEventToCache(e){this.cachedEventUids.add(Kb(e)),this.lastProcessedEventTime=Date.now()}}function Kb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Aw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function dA(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Aw(s);default:return!1}}async function fA(s,e={}){return ia(s,"GET","/v1/projects",e)}const mA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pA=/^https?/;async function gA(s){if(s.config.emulator)return;const{authorizedDomains:e}=await fA(s);for(const t of e)try{if(yA(t))return}catch{}ii(s,"unauthorized-domain")}function yA(s){const e=Xp(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!pA.test(t))return!1;if(mA.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const vA=new yu(3e4,6e4);function Yb(){const s=_i().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function bA(s){return new Promise((e,t)=>{function i(){Yb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yb(),t(bi(s,"network-request-failed"))},timeout:vA.get()})}if(_i().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_i().gapi?.load)i();else{const l=lN("iframefcb");return _i()[l]=()=>{gapi.load?i():t(bi(s,"network-request-failed"))},mw(`${oN()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw dd=null,e})}let dd=null;function _A(s){return dd=dd||bA(s),dd}const wA=new yu(5e3,15e3),xA="__/auth/iframe",EA="emulator/auth/iframe",TA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SA(s){const e=s.config;yt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Pg(e,EA):`https://${s.config.authDomain}/${xA}`,i={apiKey:e.apiKey,appName:s.name,v:Uo},l=kA.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${gu(i).slice(1)}`}async function jA(s){const e=await _A(s),t=_i().gapi;return yt(t,s,"internal-error"),e.open({where:document.body,url:SA(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TA,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=bi(s,"network-request-failed"),p=_i().setTimeout(()=>{u(h)},wA.get());function g(){_i().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const CA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NA=500,AA=600,RA="_blank",IA="http://localhost";class Qb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DA(s,e,t,i=NA,l=AA){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...CA,width:i.toString(),height:l.toString(),top:u,left:h},y=Ks().toLowerCase();t&&(p=ow(y)?RA:t),iw(y)&&(e=e||IA,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[M,q])=>`${T}${M}=${q},`,"");if(JC(y)&&p!=="_self")return MA(e||"",p),new Qb(null);const E=window.open(e||"",p,b);yt(E,s,"popup-blocked");try{E.focus()}catch{}return new Qb(E)}function MA(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const LA="__/auth/handler",OA="emulator/auth/handler",PA=encodeURIComponent("fac");async function Xb(s,e,t,i,l,u){yt(s.config.authDomain,s,"auth-domain-config-required"),yt(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Uo,eventId:l};if(e instanceof vw){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",_j(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))h[b]=E}if(e instanceof bu){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),y=g?`#${PA}=${encodeURIComponent(g)}`:"";return`${VA(s)}?${gu(p).slice(1)}${y}`}function VA({config:s}){return s.emulator?Pg(s,OA):`https://${s.authDomain}/${LA}`}const xp="webStorageSupport";class UA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fg,this._completeRedirectFn=cA,this._overrideRedirectResult=aA}async _openPopup(e,t,i,l){ea(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Xb(e,t,i,Xp(),l);return DA(e,u,qg())}async _openRedirect(e,t,i,l){await this._originValidation(e);const u=await Xb(e,t,i,Xp(),l);return FN(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:u}=this.eventManagers[t];return l?Promise.resolve(l):(ea(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await jA(e),i=new hA(e);return t.register("authEvent",l=>(yt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xp,{type:xp},l=>{const u=l?.[0]?.[xp];u!==void 0&&t(!!u),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dw()||aw()||Ug()}}const BA=UA;var Jb="@firebase/auth",Zb="1.12.0";class zA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function FA(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qA(s){Io(new Wa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;yt(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fw(s)},y=new rN(i,l,u,g);return mN(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Io(new Wa("auth-internal",e=>{const t=eo(e.getProvider("auth").getImmediate());return(i=>new zA(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(Jb,Zb,FA(s)),vi(Jb,Zb,"esm2020")}const HA=300,$A=$_("authIdTokenMaxAge")||HA;let e2=null;const WA=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>$A)return;const l=t?.token;e2!==l&&(e2=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Rw(s=Lg()){const e=Hd(s,"auth");if(e.isInitialized())return e.getImmediate();const t=fN(s,{popupRedirectResolver:BA,persistence:[XN,Zp,Fg]}),i=$_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=WA(u.toString());LN(t,h,()=>h(t.currentUser)),MN(t,p=>h(p))}}const l=F_("auth");return l&&pN(t,`http://${l}`),t}function GA(){return document.getElementsByTagName("head")?.[0]??document}iN({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=bi("internal-error");u.customData=l,t(u)},i.type="text/javascript",i.charset="UTF-8",GA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qA("Browser");var t2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ha,Iw;(function(){var s;function e(N,S){function D(){}D.prototype=S.prototype,N.F=S.prototype,N.prototype=new D,N.prototype.constructor=N,N.D=function(V,O,I){for(var A=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)A[Me-2]=arguments[Me];return S.prototype[O].apply(V,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,S,D){D||(D=0);const V=Array(16);if(typeof S=="string")for(var O=0;O<16;++O)V[O]=S.charCodeAt(D++)|S.charCodeAt(D++)<<8|S.charCodeAt(D++)<<16|S.charCodeAt(D++)<<24;else for(O=0;O<16;++O)V[O]=S[D++]|S[D++]<<8|S[D++]<<16|S[D++]<<24;S=N.g[0],D=N.g[1],O=N.g[2];let I=N.g[3],A;A=S+(I^D&(O^I))+V[0]+3614090360&4294967295,S=D+(A<<7&4294967295|A>>>25),A=I+(O^S&(D^O))+V[1]+3905402710&4294967295,I=S+(A<<12&4294967295|A>>>20),A=O+(D^I&(S^D))+V[2]+606105819&4294967295,O=I+(A<<17&4294967295|A>>>15),A=D+(S^O&(I^S))+V[3]+3250441966&4294967295,D=O+(A<<22&4294967295|A>>>10),A=S+(I^D&(O^I))+V[4]+4118548399&4294967295,S=D+(A<<7&4294967295|A>>>25),A=I+(O^S&(D^O))+V[5]+1200080426&4294967295,I=S+(A<<12&4294967295|A>>>20),A=O+(D^I&(S^D))+V[6]+2821735955&4294967295,O=I+(A<<17&4294967295|A>>>15),A=D+(S^O&(I^S))+V[7]+4249261313&4294967295,D=O+(A<<22&4294967295|A>>>10),A=S+(I^D&(O^I))+V[8]+1770035416&4294967295,S=D+(A<<7&4294967295|A>>>25),A=I+(O^S&(D^O))+V[9]+2336552879&4294967295,I=S+(A<<12&4294967295|A>>>20),A=O+(D^I&(S^D))+V[10]+4294925233&4294967295,O=I+(A<<17&4294967295|A>>>15),A=D+(S^O&(I^S))+V[11]+2304563134&4294967295,D=O+(A<<22&4294967295|A>>>10),A=S+(I^D&(O^I))+V[12]+1804603682&4294967295,S=D+(A<<7&4294967295|A>>>25),A=I+(O^S&(D^O))+V[13]+4254626195&4294967295,I=S+(A<<12&4294967295|A>>>20),A=O+(D^I&(S^D))+V[14]+2792965006&4294967295,O=I+(A<<17&4294967295|A>>>15),A=D+(S^O&(I^S))+V[15]+1236535329&4294967295,D=O+(A<<22&4294967295|A>>>10),A=S+(O^I&(D^O))+V[1]+4129170786&4294967295,S=D+(A<<5&4294967295|A>>>27),A=I+(D^O&(S^D))+V[6]+3225465664&4294967295,I=S+(A<<9&4294967295|A>>>23),A=O+(S^D&(I^S))+V[11]+643717713&4294967295,O=I+(A<<14&4294967295|A>>>18),A=D+(I^S&(O^I))+V[0]+3921069994&4294967295,D=O+(A<<20&4294967295|A>>>12),A=S+(O^I&(D^O))+V[5]+3593408605&4294967295,S=D+(A<<5&4294967295|A>>>27),A=I+(D^O&(S^D))+V[10]+38016083&4294967295,I=S+(A<<9&4294967295|A>>>23),A=O+(S^D&(I^S))+V[15]+3634488961&4294967295,O=I+(A<<14&4294967295|A>>>18),A=D+(I^S&(O^I))+V[4]+3889429448&4294967295,D=O+(A<<20&4294967295|A>>>12),A=S+(O^I&(D^O))+V[9]+568446438&4294967295,S=D+(A<<5&4294967295|A>>>27),A=I+(D^O&(S^D))+V[14]+3275163606&4294967295,I=S+(A<<9&4294967295|A>>>23),A=O+(S^D&(I^S))+V[3]+4107603335&4294967295,O=I+(A<<14&4294967295|A>>>18),A=D+(I^S&(O^I))+V[8]+1163531501&4294967295,D=O+(A<<20&4294967295|A>>>12),A=S+(O^I&(D^O))+V[13]+2850285829&4294967295,S=D+(A<<5&4294967295|A>>>27),A=I+(D^O&(S^D))+V[2]+4243563512&4294967295,I=S+(A<<9&4294967295|A>>>23),A=O+(S^D&(I^S))+V[7]+1735328473&4294967295,O=I+(A<<14&4294967295|A>>>18),A=D+(I^S&(O^I))+V[12]+2368359562&4294967295,D=O+(A<<20&4294967295|A>>>12),A=S+(D^O^I)+V[5]+4294588738&4294967295,S=D+(A<<4&4294967295|A>>>28),A=I+(S^D^O)+V[8]+2272392833&4294967295,I=S+(A<<11&4294967295|A>>>21),A=O+(I^S^D)+V[11]+1839030562&4294967295,O=I+(A<<16&4294967295|A>>>16),A=D+(O^I^S)+V[14]+4259657740&4294967295,D=O+(A<<23&4294967295|A>>>9),A=S+(D^O^I)+V[1]+2763975236&4294967295,S=D+(A<<4&4294967295|A>>>28),A=I+(S^D^O)+V[4]+1272893353&4294967295,I=S+(A<<11&4294967295|A>>>21),A=O+(I^S^D)+V[7]+4139469664&4294967295,O=I+(A<<16&4294967295|A>>>16),A=D+(O^I^S)+V[10]+3200236656&4294967295,D=O+(A<<23&4294967295|A>>>9),A=S+(D^O^I)+V[13]+681279174&4294967295,S=D+(A<<4&4294967295|A>>>28),A=I+(S^D^O)+V[0]+3936430074&4294967295,I=S+(A<<11&4294967295|A>>>21),A=O+(I^S^D)+V[3]+3572445317&4294967295,O=I+(A<<16&4294967295|A>>>16),A=D+(O^I^S)+V[6]+76029189&4294967295,D=O+(A<<23&4294967295|A>>>9),A=S+(D^O^I)+V[9]+3654602809&4294967295,S=D+(A<<4&4294967295|A>>>28),A=I+(S^D^O)+V[12]+3873151461&4294967295,I=S+(A<<11&4294967295|A>>>21),A=O+(I^S^D)+V[15]+530742520&4294967295,O=I+(A<<16&4294967295|A>>>16),A=D+(O^I^S)+V[2]+3299628645&4294967295,D=O+(A<<23&4294967295|A>>>9),A=S+(O^(D|~I))+V[0]+4096336452&4294967295,S=D+(A<<6&4294967295|A>>>26),A=I+(D^(S|~O))+V[7]+1126891415&4294967295,I=S+(A<<10&4294967295|A>>>22),A=O+(S^(I|~D))+V[14]+2878612391&4294967295,O=I+(A<<15&4294967295|A>>>17),A=D+(I^(O|~S))+V[5]+4237533241&4294967295,D=O+(A<<21&4294967295|A>>>11),A=S+(O^(D|~I))+V[12]+1700485571&4294967295,S=D+(A<<6&4294967295|A>>>26),A=I+(D^(S|~O))+V[3]+2399980690&4294967295,I=S+(A<<10&4294967295|A>>>22),A=O+(S^(I|~D))+V[10]+4293915773&4294967295,O=I+(A<<15&4294967295|A>>>17),A=D+(I^(O|~S))+V[1]+2240044497&4294967295,D=O+(A<<21&4294967295|A>>>11),A=S+(O^(D|~I))+V[8]+1873313359&4294967295,S=D+(A<<6&4294967295|A>>>26),A=I+(D^(S|~O))+V[15]+4264355552&4294967295,I=S+(A<<10&4294967295|A>>>22),A=O+(S^(I|~D))+V[6]+2734768916&4294967295,O=I+(A<<15&4294967295|A>>>17),A=D+(I^(O|~S))+V[13]+1309151649&4294967295,D=O+(A<<21&4294967295|A>>>11),A=S+(O^(D|~I))+V[4]+4149444226&4294967295,S=D+(A<<6&4294967295|A>>>26),A=I+(D^(S|~O))+V[11]+3174756917&4294967295,I=S+(A<<10&4294967295|A>>>22),A=O+(S^(I|~D))+V[2]+718787259&4294967295,O=I+(A<<15&4294967295|A>>>17),A=D+(I^(O|~S))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+I&4294967295}i.prototype.v=function(N,S){S===void 0&&(S=N.length);const D=S-this.blockSize,V=this.C;let O=this.h,I=0;for(;I<S;){if(O==0)for(;I<=D;)l(this,N,I),I+=this.blockSize;if(typeof N=="string"){for(;I<S;)if(V[O++]=N.charCodeAt(I++),O==this.blockSize){l(this,V),O=0;break}}else for(;I<S;)if(V[O++]=N[I++],O==this.blockSize){l(this,V),O=0;break}}this.h=O,this.o+=S},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;S=this.o*8;for(var D=N.length-8;D<N.length;++D)N[D]=S&255,S/=256;for(this.v(N),N=Array(16),S=0,D=0;D<4;++D)for(let V=0;V<32;V+=8)N[S++]=this.g[D]>>>V&255;return N};function u(N,S){var D=p;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=S(N)}function h(N,S){this.h=S;const D=[];let V=!0;for(let O=N.length-1;O>=0;O--){const I=N[O]|0;V&&I==S||(D[O]=I,V=!1)}this.g=D}var p={};function g(N){return-128<=N&&N<128?u(N,function(S){return new h([S|0],S<0?-1:0)}):new h([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return U(y(-N));const S=[];let D=1;for(let V=0;N>=D;V++)S[V]=N/D|0,D*=4294967296;return new h(S,0)}function b(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return U(b(N.substring(1),S));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=y(Math.pow(S,8));let V=E;for(let I=0;I<N.length;I+=8){var O=Math.min(8,N.length-I);const A=parseInt(N.substring(I,I+O),S);O<8?(O=y(Math.pow(S,O)),V=V.j(O).add(y(A))):(V=V.j(D),V=V.add(y(A)))}return V}var E=g(0),T=g(1),M=g(16777216);s=h.prototype,s.m=function(){if(H(this))return-U(this).m();let N=0,S=1;for(let D=0;D<this.g.length;D++){const V=this.i(D);N+=(V>=0?V:4294967296+V)*S,S*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(q(this))return"0";if(H(this))return"-"+U(this).toString(N);const S=y(Math.pow(N,6));var D=this;let V="";for(;;){const O=de(D,S).g;D=ae(D,O.j(S));let I=((D.g.length>0?D.g[0]:D.h)>>>0).toString(N);if(D=O,q(D))return I+V;for(;I.length<6;)I="0"+I;V=I+V}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function q(N){if(N.h!=0)return!1;for(let S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function H(N){return N.h==-1}s.l=function(N){return N=ae(this,N),H(N)?-1:q(N)?0:1};function U(N){const S=N.g.length,D=[];for(let V=0;V<S;V++)D[V]=~N.g[V];return new h(D,~N.h).add(T)}s.abs=function(){return H(this)?U(this):this},s.add=function(N){const S=Math.max(this.g.length,N.g.length),D=[];let V=0;for(let O=0;O<=S;O++){let I=V+(this.i(O)&65535)+(N.i(O)&65535),A=(I>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);V=A>>>16,I&=65535,A&=65535,D[O]=A<<16|I}return new h(D,D[D.length-1]&-2147483648?-1:0)};function ae(N,S){return N.add(U(S))}s.j=function(N){if(q(this)||q(N))return E;if(H(this))return H(N)?U(this).j(U(N)):U(U(this).j(N));if(H(N))return U(this.j(U(N)));if(this.l(M)<0&&N.l(M)<0)return y(this.m()*N.m());const S=this.g.length+N.g.length,D=[];for(var V=0;V<2*S;V++)D[V]=0;for(V=0;V<this.g.length;V++)for(let O=0;O<N.g.length;O++){const I=this.i(V)>>>16,A=this.i(V)&65535,Me=N.i(O)>>>16,Ze=N.i(O)&65535;D[2*V+2*O]+=A*Ze,$(D,2*V+2*O),D[2*V+2*O+1]+=I*Ze,$(D,2*V+2*O+1),D[2*V+2*O+1]+=A*Me,$(D,2*V+2*O+1),D[2*V+2*O+2]+=I*Me,$(D,2*V+2*O+2)}for(N=0;N<S;N++)D[N]=D[2*N+1]<<16|D[2*N];for(N=S;N<2*S;N++)D[N]=0;return new h(D,0)};function $(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function ie(N,S){this.g=N,this.h=S}function de(N,S){if(q(S))throw Error("division by zero");if(q(N))return new ie(E,E);if(H(N))return S=de(U(N),S),new ie(U(S.g),U(S.h));if(H(S))return S=de(N,U(S)),new ie(U(S.g),S.h);if(N.g.length>30){if(H(N)||H(S))throw Error("slowDivide_ only works with positive integers.");for(var D=T,V=S;V.l(N)<=0;)D=_e(D),V=_e(V);var O=ve(D,1),I=ve(V,1);for(V=ve(V,2),D=ve(D,2);!q(V);){var A=I.add(V);A.l(N)<=0&&(O=O.add(D),I=A),V=ve(V,1),D=ve(D,1)}return S=ae(N,O.j(S)),new ie(O,S)}for(O=E;N.l(S)>=0;){for(D=Math.max(1,Math.floor(N.m()/S.m())),V=Math.ceil(Math.log(D)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),I=y(D),A=I.j(S);H(A)||A.l(N)>0;)D-=V,I=y(D),A=I.j(S);q(I)&&(I=T),O=O.add(I),N=ae(N,A)}return new ie(O,N)}s.B=function(N){return de(this,N).h},s.and=function(N){const S=Math.max(this.g.length,N.g.length),D=[];for(let V=0;V<S;V++)D[V]=this.i(V)&N.i(V);return new h(D,this.h&N.h)},s.or=function(N){const S=Math.max(this.g.length,N.g.length),D=[];for(let V=0;V<S;V++)D[V]=this.i(V)|N.i(V);return new h(D,this.h|N.h)},s.xor=function(N){const S=Math.max(this.g.length,N.g.length),D=[];for(let V=0;V<S;V++)D[V]=this.i(V)^N.i(V);return new h(D,this.h^N.h)};function _e(N){const S=N.g.length+1,D=[];for(let V=0;V<S;V++)D[V]=N.i(V)<<1|N.i(V-1)>>>31;return new h(D,N.h)}function ve(N,S){const D=S>>5;S%=32;const V=N.g.length-D,O=[];for(let I=0;I<V;I++)O[I]=S>0?N.i(I+D)>>>S|N.i(I+D+1)<<32-S:N.i(I+D);return new h(O,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Iw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=b,Ha=h}).apply(typeof t2<"u"?t2:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Dw,zc,Mw,fd,tg,Lw,Ow,Pw;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var v=0;v<d.length;++v){var x=d[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=t(this);function l(d,v){if(v)e:{var x=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var K=d[C];if(!(K in x))break e;x=x[K]}d=d[d.length-1],C=x[d],v=v(C),v!=C&&v!=null&&e(x,d,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(v){var x=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&x.push([C,v[C]]);return x}});var u=u||{},h=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,x){return d.call.apply(d.bind,arguments)}function y(d,v,x){return y=g,y.apply(null,arguments)}function b(d,v){var x=Array.prototype.slice.call(arguments,1);return function(){var C=x.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function E(d,v){function x(){}x.prototype=v.prototype,d.Z=v.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(C,K,ce){for(var Le=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)Le[Dt-2]=arguments[Dt];return v.prototype[K].apply(C,Le)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function M(d){const v=d.length;if(v>0){const x=Array(v);for(let C=0;C<v;C++)x[C]=d[C];return x}return[]}function q(d,v){for(let C=1;C<arguments.length;C++){const K=arguments[C];var x=typeof K;if(x=x!="object"?x:K?Array.isArray(K)?"array":x:"null",x=="array"||x=="object"&&typeof K.length=="number"){x=d.length||0;const ce=K.length||0;d.length=x+ce;for(let Le=0;Le<ce;Le++)d[x+Le]=K[Le]}else d.push(K)}}class H{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(d){h.setTimeout(()=>{throw d},0)}function ae(){var d=N;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class ${constructor(){this.h=this.g=null}add(v,x){const C=ie.get();C.set(v,x),this.h?this.h.next=C:this.g=C,this.h=C}}var ie=new H(()=>new de,d=>d.reset());class de{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,ve=!1,N=new $,S=()=>{const d=Promise.resolve(void 0);_e=()=>{d.then(D)}};function D(){for(var d;d=ae();){try{d.h.call(d.g)}catch(x){U(x)}var v=ie;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}ve=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};h.addEventListener("test",x,v),h.removeEventListener("test",x,v)}catch{}return d})();function A(d){return/^[\s\xa0]*$/.test(d)}function Me(d,v){O.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}E(Me,O),Me.prototype.init=function(d,v){const x=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(x=="mouseover"?v=d.fromElement:x=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),Q=0;function Te(d,v,x,C,K){this.listener=d,this.proxy=null,this.src=v,this.type=x,this.capture=!!C,this.ha=K,this.key=++Q,this.da=this.fa=!1}function Ie(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function qe(d,v,x){for(const C in d)v.call(x,d[C],C,d)}function ee(d,v){for(const x in d)v.call(void 0,d[x],x,d)}function L(d){const v={};for(const x in d)v[x]=d[x];return v}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(d,v){let x,C;for(let K=1;K<arguments.length;K++){C=arguments[K];for(x in C)d[x]=C[x];for(let ce=0;ce<X.length;ce++)x=X[ce],Object.prototype.hasOwnProperty.call(C,x)&&(d[x]=C[x])}}function ke(d){this.src=d,this.g={},this.h=0}ke.prototype.add=function(d,v,x,C,K){const ce=d.toString();d=this.g[ce],d||(d=this.g[ce]=[],this.h++);const Le=be(d,v,C,K);return Le>-1?(v=d[Le],x||(v.fa=!1)):(v=new Te(v,this.src,ce,!!C,K),v.fa=x,d.push(v)),v};function Ee(d,v){const x=v.type;if(x in d.g){var C=d.g[x],K=Array.prototype.indexOf.call(C,v,void 0),ce;(ce=K>=0)&&Array.prototype.splice.call(C,K,1),ce&&(Ie(v),d.g[x].length==0&&(delete d.g[x],d.h--))}}function be(d,v,x,C){for(let K=0;K<d.length;++K){const ce=d[K];if(!ce.da&&ce.listener==v&&ce.capture==!!x&&ce.ha==C)return K}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),ct={};function Ve(d,v,x,C,K){if(Array.isArray(v)){for(let ce=0;ce<v.length;ce++)Ve(d,v[ce],x,C,K);return null}return x=he(x),d&&d[Ze]?d.J(v,x,p(C)?!!C.capture:!1,K):sn(d,v,x,!1,C,K)}function sn(d,v,x,C,K,ce){if(!v)throw Error("Invalid event type");const Le=p(K)?!!K.capture:!!K;let Dt=ht(d);if(Dt||(d[Ke]=Dt=new ke(d)),x=Dt.add(v,x,C,Le,ce),x.proxy)return x;if(C=Sn(),x.proxy=C,C.src=d,C.listener=x,d.addEventListener)I||(K=Le),K===void 0&&(K=!1),d.addEventListener(v.toString(),C,K);else if(d.attachEvent)d.attachEvent(tt(v.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Sn(){function d(x){return v.call(d.src,d.listener,x)}const v=bt;return d}function Hn(d,v,x,C,K){if(Array.isArray(v))for(var ce=0;ce<v.length;ce++)Hn(d,v[ce],x,C,K);else C=p(C)?!!C.capture:!!C,x=he(x),d&&d[Ze]?(d=d.i,ce=String(v).toString(),ce in d.g&&(v=d.g[ce],x=be(v,x,C,K),x>-1&&(Ie(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete d.g[ce],d.h--)))):d&&(d=ht(d))&&(v=d.g[v.toString()],d=-1,v&&(d=be(v,x,C,K)),(x=d>-1?v[d]:null)&&Ut(x))}function Ut(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Ze])Ee(v.i,d);else{var x=d.type,C=d.proxy;v.removeEventListener?v.removeEventListener(x,C,d.capture):v.detachEvent?v.detachEvent(tt(x),C):v.addListener&&v.removeListener&&v.removeListener(C),(x=ht(v))?(Ee(x,d),x.h==0&&(x.src=null,v[Ke]=null)):Ie(d)}}}function tt(d){return d in ct?ct[d]:ct[d]="on"+d}function bt(d,v){if(d.da)d=!0;else{v=new Me(v,this);const x=d.listener,C=d.ha||d.src;d.fa&&Ut(d),d=x.call(C,v)}return d}function ht(d){return d=d[Ke],d instanceof ke?d:null}var Dn="__closure_events_fn_"+(Math.random()*1e9>>>0);function he(d){return typeof d=="function"?d:(d[Dn]||(d[Dn]=function(v){return d.handleEvent(v)}),d[Dn])}function pt(){V.call(this),this.i=new ke(this),this.M=this,this.G=null}E(pt,V),pt.prototype[Ze]=!0,pt.prototype.removeEventListener=function(d,v,x,C){Hn(this,d,v,x,C)};function At(d,v){var x,C=d.G;if(C)for(x=[];C;C=C.G)x.push(C);if(d=d.M,C=v.type||v,typeof v=="string")v=new O(v,d);else if(v instanceof O)v.target=v.target||d;else{var K=v;v=new O(C,d),xe(v,K)}K=!0;let ce,Le;if(x)for(Le=x.length-1;Le>=0;Le--)ce=v.g=x[Le],K=Ot(ce,C,!0,v)&&K;if(ce=v.g=d,K=Ot(ce,C,!0,v)&&K,K=Ot(ce,C,!1,v)&&K,x)for(Le=0;Le<x.length;Le++)ce=v.g=x[Le],K=Ot(ce,C,!1,v)&&K}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const x=d.g[v];for(let C=0;C<x.length;C++)Ie(x[C]);delete d.g[v],d.h--}}this.G=null},pt.prototype.J=function(d,v,x,C){return this.i.add(String(d),v,!1,x,C)},pt.prototype.K=function(d,v,x,C){return this.i.add(String(d),v,!0,x,C)};function Ot(d,v,x,C){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let K=!0;for(let ce=0;ce<v.length;++ce){const Le=v[ce];if(Le&&!Le.da&&Le.capture==x){const Dt=Le.listener,os=Le.ha||Le.src;Le.fa&&Ee(d.i,Le),K=Dt.call(os,C)!==!1&&K}}return K&&!C.defaultPrevented}function at(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function dt(d){d.g=at(()=>{d.g=null,d.i&&(d.i=!1,dt(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class St extends V{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vt(d){V.call(this),this.h=d,this.g={}}E(Vt,V);var js=[];function bs(d){qe(d.g,function(v,x){this.g.hasOwnProperty(x)&&Ut(v)},d),d.g={}}Vt.prototype.N=function(){Vt.Z.N.call(this),bs(this)},Vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var un=h.JSON.stringify,J=h.JSON.parse,Ce=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function wt(){}function _t(){}var ot={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function He(){O.call(this,"d")}E(He,O);function st(){O.call(this,"c")}E(st,O);var $e={},Jt=null;function qt(){return Jt=Jt||new pt}$e.Ia="serverreachability";function Gn(d){O.call(this,$e.Ia,d)}E(Gn,O);function jn(d){const v=qt();At(v,new Gn(v))}$e.STAT_EVENT="statevent";function Kn(d,v){O.call(this,$e.STAT_EVENT,d),this.stat=v}E(Kn,O);function tn(d){const v=qt();At(v,new Kn(v,d))}$e.Ja="timingevent";function Vn(d,v){O.call(this,$e.Ja,d),this.size=v}E(Vn,O);function Mn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function rn(){this.g=!0}rn.prototype.ua=function(){this.g=!1};function Qs(d,v,x,C,K,ce){d.info(function(){if(d.g)if(ce){var Le="",Dt=ce.split("&");for(let ln=0;ln<Dt.length;ln++){var os=Dt[ln].split("=");if(os.length>1){const zn=os[0];os=os[1];const Lr=zn.split("_");Le=Lr.length>=2&&Lr[1]=="type"?Le+(zn+"="+os+"&"):Le+(zn+"=redacted&")}}}else Le=null;else Le=ce;return"XMLHTTP REQ ("+C+") [attempt "+K+"]: "+v+`
`+x+`
`+Le})}function le(d,v,x,C,K,ce,Le){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+K+"]: "+v+`
`+x+`
`+ce+" "+Le})}function Ae(d,v,x,C){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+gt(d,x)+(C?" "+C:"")})}function Ye(d,v){d.info(function(){return"TIMEOUT: "+v})}rn.prototype.info=function(){};function gt(d,v){if(!d.g)return v;if(!v)return null;try{const ce=JSON.parse(v);if(ce){for(d=0;d<ce.length;d++)if(Array.isArray(ce[d])){var x=ce[d];if(!(x.length<2)){var C=x[1];if(Array.isArray(C)&&!(C.length<1)){var K=C[0];if(K!="noop"&&K!="stop"&&K!="close")for(let Le=1;Le<C.length;Le++)C[Le]=""}}}}return un(ce)}catch{return v}}var lt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Un;function pn(){}E(pn,wt),pn.prototype.g=function(){return new XMLHttpRequest},Un=new pn;function gn(d){return encodeURIComponent(String(d))}function _s(d){var v=1;d=d.split(":");const x=[];for(;v>0&&d.length;)x.push(d.shift()),v--;return d.length&&x.push(d.join(":")),x}function ws(d,v,x,C){this.j=d,this.i=v,this.l=x,this.S=C||1,this.V=new Vt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ns}function ns(){this.i=null,this.g="",this.h=!1}var dn={},Cn={};function Cs(d,v,x){d.M=1,d.A=$n(Oe(v)),d.u=x,d.R=!0,rr(d,null)}function rr(d,v){d.F=Date.now(),xs(d),d.B=Oe(d.A);var x=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),ze(x.i,"t",C),d.C=0,x=d.j.L,d.h=new ns,d.g=Bu(d.j,x?v:null,!d.u),d.P>0&&(d.O=new St(y(d.Y,d,d.g),d.P)),v=d.V,x=d.g,C=d.ba;var K="readystatechange";Array.isArray(K)||(K&&(js[0]=K.toString()),K=js);for(let ce=0;ce<K.length;ce++){const Le=Ve(x,K[ce],C||v.handleEvent,!1,v.h||v);if(!Le)break;v.g[Le.key]=Le}v=d.J?L(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),jn(),Qs(d.i,d.v,d.B,d.l,d.S,d.u)}ws.prototype.ba=function(d){d=d.target;const v=this.O;v&&xt(d)==3?v.j():this.Y(d)},ws.prototype.Y=function(d){try{if(d==this.g)e:{const Dt=xt(this.g),os=this.g.ya(),ln=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||Bt(this.g)))){this.K||Dt!=4||os==7||(os==8||ln<=0?jn(3):jn(2)),Ts(this);var v=this.g.ca();this.X=v;var x=li(this);if(this.o=v==200,le(this.i,this.v,this.B,this.l,this.S,Dt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var C,K=this.g;if((C=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(C)){var ce=C;break t}}ce=null}if(d=ce)Ae(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qn(this,d);else{this.o=!1,this.m=3,tn(12),bn(this),Yn(this);break e}}if(this.R){d=!0;let zn;for(;!this.K&&this.C<x.length;)if(zn=Rr(this,x),zn==Cn){Dt==4&&(this.m=4,tn(14),d=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==dn){this.m=4,tn(15),Ae(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else Ae(this.i,this.l,zn,null),Qn(this,zn);if(Ar(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||x.length!=0||this.h.h||(this.m=1,tn(16),d=!1),this.o=this.o&&d,!d)Ae(this.i,this.l,x,"[Invalid Chunked Response]"),bn(this),Yn(this);else if(x.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Kl(Le),Le.P=!0,tn(11))}}else Ae(this.i,this.l,x,null),Qn(this,x);Dt==4&&bn(this),this.o&&!this.K&&(Dt==4?Ou(this.j,this):(this.o=!1,xs(this)))}else Ns(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,tn(12)):(this.m=0,tn(13)),bn(this),Yn(this)}}}catch{}};function li(d){if(!Ar(d))return d.g.la();const v=Bt(d.g);if(v==="")return"";let x="";const C=v.length,K=xt(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return bn(d),Yn(d),"";d.h.i=new h.TextDecoder}for(let ce=0;ce<C;ce++)d.h.h=!0,x+=d.h.i.decode(v[ce],{stream:!(K&&ce==C-1)});return v.length=0,d.h.g+=x,d.C=0,d.h.g}function Ar(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Rr(d,v){var x=d.C,C=v.indexOf(`
`,x);return C==-1?Cn:(x=Number(v.substring(x,C)),isNaN(x)?dn:(C+=1,C+x>v.length?Cn:(v=v.slice(C,C+x),d.C=C+x,v)))}ws.prototype.cancel=function(){this.K=!0,bn(this)};function xs(d){d.T=Date.now()+d.H,Es(d,d.H)}function Es(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Mn(y(d.aa,d),v)}function Ts(d){d.D&&(h.clearTimeout(d.D),d.D=null)}ws.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ye(this.i,this.B),this.M!=2&&(jn(),tn(17)),bn(this),this.m=2,Yn(this)):Es(this,this.T-d)};function Yn(d){d.j.I==0||d.K||Ou(d.j,d)}function bn(d){Ts(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,bs(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function Qn(d,v){try{var x=d.j;if(x.I!=0&&(x.g==d||ss(x.h,d))){if(!d.L&&ss(x.h,d)&&x.I==3){try{var C=x.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var K=C;if(K[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)Ho(x),As(x);else break e;ro(x),tn(18)}}else x.xa=K[1],0<x.xa-x.K&&K[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Mn(y(x.Va,x),6e3));hs(x.h)<=1&&x.ta&&(x.ta=void 0)}else ci(x,11)}else if((d.L||x.g==d)&&Ho(x),!A(v))for(K=x.Ba.g.parse(v),v=0;v<K.length;v++){let ln=K[v];const zn=ln[0];if(!(zn<=x.K))if(x.K=zn,ln=ln[1],x.I==2)if(ln[0]=="c"){x.M=ln[1],x.ba=ln[2];const Lr=ln[3];Lr!=null&&(x.ka=Lr,x.j.info("VER="+x.ka));const ui=ln[4];ui!=null&&(x.za=ui,x.j.info("SVER="+x.za));const Qr=ln[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(C=1.5*Qr,x.O=C,x.j.info("backChannelRequestTimeoutMs_="+C)),C=x;const Xr=d.g;if(Xr){const io=Xr.g?Xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var ce=C.h;ce.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(rs(ce,ce.h),ce.h=null))}if(C.G){const $o=Xr.g?Xr.g.getResponseHeader("X-HTTP-Session-Id"):null;$o&&(C.wa=$o,Ge(C.J,C.G,$o))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),C=x;var Le=d;if(C.na=Uu(C,C.L?C.ba:null,C.W),Le.L){Yr(C.h,Le);var Dt=Le,os=C.O;os&&(Dt.H=os),Dt.D&&(Ts(Dt),xs(Dt)),C.g=Le}else Mu(C);x.i.length>0&&yr(x)}else ln[0]!="stop"&&ln[0]!="close"||ci(x,7);else x.I==3&&(ln[0]=="stop"||ln[0]=="close"?ln[0]=="stop"?ci(x,7):Ms(x):ln[0]!="noop"&&x.l&&x.l.qa(ln),x.A=0)}}jn(4)}catch{}}var Ht=class{constructor(d,v){this.g=d,this.map=v}};function pr(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Kr(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function hs(d){return d.h?1:d.g?d.g.size:0}function ss(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function rs(d,v){d.g?d.g.add(v):d.h=v}function Yr(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}pr.prototype.cancel=function(){if(this.i=R(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function R(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const x of d.g.values())v=v.concat(x.G);return v}return M(d.i)}var z=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function re(d,v){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const C=d[x].indexOf("=");let K,ce=null;C>=0?(K=d[x].substring(0,C),ce=d[x].substring(C+1)):K=d[x],v(K,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function oe(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof oe?(this.l=d.l,Pe(this,d.j),this.o=d.o,this.g=d.g,Be(this,d.u),this.h=d.h,$t(this,ut(d.i)),this.m=d.m):d&&(v=String(d).match(z))?(this.l=!1,Pe(this,v[1]||"",!0),this.o=is(v[2]||""),this.g=is(v[3]||"",!0),Be(this,v[4]),this.h=is(v[5]||"",!0),$t(this,v[6]||"",!0),this.m=is(v[7]||"")):(this.l=!1,this.i=new Dr(null,this.l))}oe.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(qs(v,Xs,!0),":");var x=this.g;return(x||v=="file")&&(d.push("//"),(v=this.o)&&d.push(qs(v,Xs,!0),"@"),d.push(gn(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(qs(x,x.charAt(0)=="/"?Ni:oa,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",qs(x,la)),d.join("")},oe.prototype.resolve=function(d){const v=Oe(this);let x=!!d.j;x?Pe(v,d.j):x=!!d.o,x?v.o=d.o:x=!!d.g,x?v.g=d.g:x=d.u!=null;var C=d.h;if(x)Be(v,d.u);else if(x=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var K=v.h.lastIndexOf("/");K!=-1&&(C=v.h.slice(0,K+1)+C)}if(K=C,K==".."||K==".")C="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){C=K.lastIndexOf("/",0)==0,K=K.split("/");const ce=[];for(let Le=0;Le<K.length;){const Dt=K[Le++];Dt=="."?C&&Le==K.length&&ce.push(""):Dt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),C&&Le==K.length&&ce.push("")):(ce.push(Dt),C=!0)}C=ce.join("/")}else C=K}return x?v.h=C:x=d.i.toString()!=="",x?$t(v,ut(d.i)):x=!!d.m,x&&(v.m=d.m),v};function Oe(d){return new oe(d)}function Pe(d,v,x){d.j=x?is(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Be(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function $t(d,v,x){v instanceof Dr?(d.i=v,Et(d.i,d.l)):(x||(v=qs(v,Ir)),d.i=new Dr(v,d.l))}function Ge(d,v,x){d.i.set(v,x)}function $n(d){return Ge(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function is(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function qs(d,v,x){return typeof d=="string"?(d=encodeURI(d).replace(v,as),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function as(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Xs=/[#\/\?@]/g,oa=/[#\?:]/g,Ni=/[#\?]/g,Ir=/[#\?@]/g,la=/#/g;function Dr(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function j(d){d.g||(d.g=new Map,d.h=0,d.i&&re(d.i,function(v,x){d.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}s=Dr.prototype,s.add=function(d,v){j(this),this.i=null,d=Xe(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(v),this.h+=1,this};function G(d,v){j(d),v=Xe(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Ne(d,v){return j(d),v=Xe(d,v),d.g.has(v)}s.forEach=function(d,v){j(this),this.g.forEach(function(x,C){x.forEach(function(K){d.call(v,K,C,this)},this)},this)};function Re(d,v){j(d);let x=[];if(typeof v=="string")Ne(d,v)&&(x=x.concat(d.g.get(Xe(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)x=x.concat(d[v]);return x}s.set=function(d,v){return j(this),this.i=null,d=Xe(this,d),Ne(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=Re(this,d),d.length>0?String(d[0]):v):v};function ze(d,v,x){G(d,v),x.length>0&&(d.i=null,d.g.set(Xe(d,v),M(x)),d.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var x=v[C];const K=gn(x);x=Re(this,x);for(let ce=0;ce<x.length;ce++){let Le=K;x[ce]!==""&&(Le+="="+gn(x[ce])),d.push(Le)}}return this.i=d.join("&")};function ut(d){const v=new Dr;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Xe(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Et(d,v){v&&!d.j&&(j(d),d.i=null,d.g.forEach(function(x,C){const K=C.toLowerCase();C!=K&&(G(this,C),ze(this,K,x))},d)),d.j=v}function jt(d,v){const x=new rn;if(h.Image){const C=new Image;C.onload=b(P,x,"TestLoadImage: loaded",!0,v,C),C.onerror=b(P,x,"TestLoadImage: error",!1,v,C),C.onabort=b(P,x,"TestLoadImage: abort",!1,v,C),C.ontimeout=b(P,x,"TestLoadImage: timeout",!1,v,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else v(!1)}function Zt(d,v){const x=new rn,C=new AbortController,K=setTimeout(()=>{C.abort(),P(x,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:C.signal}).then(ce=>{clearTimeout(K),ce.ok?P(x,"TestPingServer: ok",!0,v):P(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(K),P(x,"TestPingServer: error",!1,v)})}function P(d,v,x,C,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),C(x)}catch{}}function te(){this.g=new Ce}function ne(d){this.i=d.Sb||null,this.h=d.ab||!1}E(ne,wt),ne.prototype.g=function(){return new we(this.i,this.h)};function we(d,v){pt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(we,pt),s=we.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Fe(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,De(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Fe(this)),this.g&&(this.readyState=3,Fe(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;je(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function je(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?De(this):Fe(this),this.readyState==3&&je(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,De(this))},s.Na=function(d){this.g&&(this.response=d,De(this))},s.ga=function(){this.g&&De(this)};function De(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Fe(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=v.next();return d.join(`\r
`)};function Fe(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(we.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function mt(d){let v="";return qe(d,function(x,C){v+=C,v+=":",v+=x,v+=`\r
`}),v}function Ct(d,v,x){e:{for(C in x){var C=!1;break e}C=!0}C||(x=mt(x),typeof d=="string"?x!=null&&gn(x):Ge(d,v,x))}function Je(d){pt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Je,pt);var Tt=/^https?$/i,_n=["POST","PUT"];s=Je.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,x,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Un.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(ce){gr(this,ce);return}if(d=x||"",x=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var K in C)x.set(K,C[K]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ce of C.keys())x.set(ce,C.get(ce));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(x.keys()).find(ce=>ce.toLowerCase()=="content-type"),K=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(_n,v,void 0)>=0)||C||K||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Le]of x)this.g.setRequestHeader(ce,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ce){gr(this,ce)}};function gr(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,kt(d),Bn(d)}function kt(d){d.A||(d.A=!0,At(d,"complete"),At(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,At(this,"complete"),At(this,"abort"),Bn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),Je.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?An(this):this.Xa())},s.Xa=function(){An(this)};function An(d){if(d.h&&typeof u<"u"){if(d.v&&xt(d)==4)setTimeout(d.Ca.bind(d),0);else if(At(d,"readystatechange"),xt(d)==4){d.h=!1;try{const ce=d.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var C;if(C=ce===0){let Le=String(d.D).match(z)[1]||null;!Le&&h.self&&h.self.location&&(Le=h.self.location.protocol.slice(0,-1)),C=!Tt.test(Le?Le.toLowerCase():"")}x=C}if(x)At(d,"complete"),At(d,"success");else{d.o=6;try{var K=xt(d)>2?d.g.statusText:""}catch{K=""}d.l=K+" ["+d.ca()+"]",kt(d)}}finally{Bn(d)}}}}function Bn(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,v||At(d,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function xt(d){return d.g?d.g.readyState:0}s.ca=function(){try{return xt(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),J(v)}};function Bt(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ns(d){const v={};d=(d.g&&xt(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(A(d[C]))continue;var x=_s(d[C]);const K=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ce=v[K]||[];v[K]=ce,ce.push(x)}ee(v,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(d,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||v}function ir(d){this.za=0,this.i=[],this.j=new rn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ds("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ds("baseRetryDelayMs",5e3,d),this.Za=Ds("retryDelaySeedMs",1e4,d),this.Ta=Ds("forwardChannelMaxRetries",2,d),this.va=Ds("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new pr(d&&d.concurrentRequestLimit),this.Ba=new te,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ir.prototype,s.ka=8,s.I=1,s.connect=function(d,v,x,C){tn(0),this.W=d,this.H=v||{},x&&C!==void 0&&(this.H.OSID=x,this.H.OAID=C),this.F=this.X,this.J=Uu(this,null,this.W),yr(this)};function Ms(d){if(Mr(d),d.I==3){var v=d.V++,x=Oe(d.J);if(Ge(x,"SID",d.M),Ge(x,"RID",v),Ge(x,"TYPE","terminate"),so(d,x),v=new ws(d,d.j,v),v.M=2,v.A=$n(Oe(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&h.Image&&(new Image().src=v.A,x=!0),x||(v.g=Bu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),xs(v)}Vu(d)}function As(d){d.g&&(Kl(d),d.g.cancel(),d.g=null)}function Mr(d){As(d),d.v&&(h.clearTimeout(d.v),d.v=null),Ho(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function yr(d){if(!Kr(d.h)&&!d.m){d.m=!0;var v=d.Ea;_e||S(),ve||(_e(),ve=!0),N.add(v,d),d.D=0}}function ca(d,v){return hs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Mn(y(d.Ea,d,v),Pu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const K=new ws(this,this.j,d);let ce=this.o;if(this.U&&(ce?(ce=L(ce),xe(ce,this.U)):ce=this.U),this.u!==null||this.R||(K.J=ce,ce=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var C=this.i[x];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=Du(this,K,v),x=Oe(this.J),Ge(x,"RID",d),Ge(x,"CVER",22),this.G&&Ge(x,"X-HTTP-Session-Id",this.G),so(this,x),ce&&(this.R?v="headers="+gn(mt(ce))+"&"+v:this.u&&Ct(x,this.u,ce)),rs(this.h,K),this.Ra&&Ge(x,"TYPE","init"),this.S?(Ge(x,"$req",v),Ge(x,"SID","null"),K.U=!0,Cs(K,x,null)):Cs(K,x,v),this.I=2}}else this.I==3&&(d?Ai(this,d):this.i.length==0||Kr(this.h)||Ai(this))};function Ai(d,v){var x;v?x=v.l:x=d.V++;const C=Oe(d.J);Ge(C,"SID",d.M),Ge(C,"RID",x),Ge(C,"AID",d.K),so(d,C),d.u&&d.o&&Ct(C,d.u,d.o),x=new ws(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),v&&(d.i=v.G.concat(d.i)),v=Du(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),rs(d.h,x),Cs(x,C,v)}function so(d,v){d.H&&qe(d.H,function(x,C){Ge(v,C,x)}),d.l&&qe({},function(x,C){Ge(v,C,x)})}function Du(d,v,x){x=Math.min(d.i.length,x);const C=d.l?y(d.l.Ka,d.l,d):null;e:{var K=d.i;let Dt=-1;for(;;){const os=["count="+x];Dt==-1?x>0?(Dt=K[0].g,os.push("ofs="+Dt)):Dt=0:os.push("ofs="+Dt);let ln=!0;for(let zn=0;zn<x;zn++){var ce=K[zn].g;const Lr=K[zn].map;if(ce-=Dt,ce<0)Dt=Math.max(0,K[zn].g-100),ln=!1;else try{ce="req"+ce+"_"||"";try{var Le=Lr instanceof Map?Lr:Object.entries(Lr);for(const[ui,Qr]of Le){let Xr=Qr;p(Qr)&&(Xr=un(Qr)),os.push(ce+ui+"="+encodeURIComponent(Xr))}}catch(ui){throw os.push(ce+"type="+encodeURIComponent("_badmap")),ui}}catch{C&&C(Lr)}}if(ln){Le=os.join("&");break e}}Le=void 0}return d=d.i.splice(0,x),v.G=d,Le}function Mu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;_e||S(),ve||(_e(),ve=!0),N.add(v,d),d.A=0}}function ro(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Mn(y(d.Da,d),Pu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Mn(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tn(10),As(this),Lu(this))};function Kl(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Lu(d){d.g=new ws(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Oe(d.na);Ge(v,"RID","rpc"),Ge(v,"SID",d.M),Ge(v,"AID",d.K),Ge(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ge(v,"TO",d.ia),Ge(v,"TYPE","xmlhttp"),so(d,v),d.u&&d.o&&Ct(v,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=$n(Oe(v)),x.u=null,x.R=!0,rr(x,d)}s.Va=function(){this.C!=null&&(this.C=null,As(this),ro(this),tn(19))};function Ho(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Ou(d,v){var x=null;if(d.g==v){Ho(d),Kl(d),d.g=null;var C=2}else if(ss(d.h,v))x=v.G,Yr(d.h,v),C=1;else return;if(d.I!=0){if(v.o)if(C==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var K=d.D;C=qt(),At(C,new Vn(C,x)),yr(d)}else Mu(d);else if(K=v.m,K==3||K==0&&v.X>0||!(C==1&&ca(d,v)||C==2&&ro(d)))switch(x&&x.length>0&&(v=d.h,v.i=v.i.concat(x)),K){case 1:ci(d,5);break;case 4:ci(d,10);break;case 3:ci(d,6);break;default:ci(d,2)}}}function Pu(d,v){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*v}function ci(d,v){if(d.j.info("Error code "+v),v==2){var x=y(d.bb,d),C=d.Ua;const K=!C;C=new oe(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Pe(C,"https"),$n(C),K?jt(C.toString(),x):Zt(C.toString(),x)}else tn(2);d.I=0,d.l&&d.l.pa(v),Vu(d),Mr(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function Vu(d){if(d.I=0,d.ja=[],d.l){const v=R(d.h);(v.length!=0||d.i.length!=0)&&(q(d.ja,v),q(d.ja,d.i),d.h.i.length=0,M(d.i),d.i.length=0),d.l.oa()}}function Uu(d,v,x){var C=x instanceof oe?Oe(x):new oe(x);if(C.g!="")v&&(C.g=v+"."+C.g),Be(C,C.u);else{var K=h.location;C=K.protocol,v=v?v+"."+K.hostname:K.hostname,K=+K.port;const ce=new oe(null);C&&Pe(ce,C),v&&(ce.g=v),K&&Be(ce,K),x&&(ce.h=x),C=ce}return x=d.G,v=d.wa,x&&v&&Ge(C,x,v),Ge(C,"VER",d.ka),so(d,C),C}function Bu(d,v,x){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new Je(new ne({ab:x})):new Je(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}s=zu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ua(){}ua.prototype.g=function(d,v){return new Js(d,v)};function Js(d,v){pt.call(this),this.g=new ir(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!A(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Ri(this)}E(Js,pt),Js.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Js.prototype.close=function(){Ms(this.g)},Js.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=un(d),d=x);v.i.push(new Ht(v.Ya++,d)),v.I==3&&yr(v)},Js.prototype.N=function(){this.g.l=null,delete this.j,Ms(this.g),delete this.g,Js.Z.N.call(this)};function Fu(d){He.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const x in v){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}E(Fu,He);function qu(){st.call(this),this.status=1}E(qu,st);function Ri(d){this.g=d}E(Ri,zu),Ri.prototype.ra=function(){At(this.g,"a")},Ri.prototype.qa=function(d){At(this.g,new Fu(d))},Ri.prototype.pa=function(d){At(this.g,new qu)},Ri.prototype.oa=function(){At(this.g,"b")},ua.prototype.createWebChannel=ua.prototype.g,Js.prototype.send=Js.prototype.o,Js.prototype.open=Js.prototype.m,Js.prototype.close=Js.prototype.close,Pw=function(){return new ua},Ow=function(){return qt()},Lw=$e,tg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},lt.NO_ERROR=0,lt.TIMEOUT=8,lt.HTTP_ERROR=6,fd=lt,hn.COMPLETE="complete",Mw=hn,_t.EventType=ot,ot.OPEN="a",ot.CLOSE="b",ot.ERROR="c",ot.MESSAGE="d",pt.prototype.listen=pt.prototype.J,zc=_t,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,Dw=Je}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});class Ws{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ws.UNAUTHENTICATED=new Ws(null),Ws.GOOGLE_CREDENTIALS=new Ws("google-credentials-uid"),Ws.FIRST_PARTY=new Ws("first-party-uid"),Ws.MOCK_USER=new Ws("mock-user");let ql="12.8.0";function KA(s){ql=s}const Lo=new Ig("@firebase/firestore");function El(){return Lo.logLevel}function We(s,...e){if(Lo.logLevel<=Kt.DEBUG){const t=e.map($g);Lo.debug(`Firestore (${ql}): ${s}`,...t)}}function ta(s,...e){if(Lo.logLevel<=Kt.ERROR){const t=e.map($g);Lo.error(`Firestore (${ql}): ${s}`,...t)}}function Dl(s,...e){if(Lo.logLevel<=Kt.WARN){const t=e.map($g);Lo.warn(`Firestore (${ql}): ${s}`,...t)}}function $g(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function vt(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Vw(s,i,t)}function Vw(s,e,t){let i=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ta(i),new Error(i)}function mn(s,e,t,i){let l="Unexpected state";typeof t=="string"?l=t:i=t,s||Vw(e,l,i)}function It(s,e){return s}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Uw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ws.UNAUTHENTICATED)))}shutdown(){}}class QA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class XA{constructor(e){this.t=e,this.currentUser=Ws.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mn(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Xi,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Xi)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mn(typeof i.accessToken=="string",31837,{l:i}),new Uw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mn(e===null||typeof e=="string",2055,{h:e}),new Ws(e)}}class JA{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ws.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ZA{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new JA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ws.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class n2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mn(this.o===void 0,3512);const i=u=>{u.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,We("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new n2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(mn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new n2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class Wg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=tR(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<t&&(i+=e.charAt(l[u]%62))}return i}}function Yt(s,e){return s<e?-1:s>e?1:0}function ng(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return Ep(l)===Ep(u)?Yt(l,u):Ep(l)?1:-1}return Yt(s.length,e.length)}const nR=55296,sR=57343;function Ep(s){const e=s.charCodeAt(0);return e>=nR&&e<=sR}function Ml(s,e,t){return s.length===e.length&&s.every(((i,l)=>t(i,e[l])))}const s2="__name__";class gi{constructor(e,t,i){t===void 0?t=0:t>e.length&&vt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&vt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let l=0;l<i;l++){const u=gi.compareSegments(e.get(l),t.get(l));if(u!==0)return u}return Yt(e.length,t.length)}static compareSegments(e,t){const i=gi.isNumericId(e),l=gi.isNumericId(t);return i&&!l?-1:!i&&l?1:i&&l?gi.extractNumericId(e).compare(gi.extractNumericId(t)):ng(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ha.fromString(e.substring(4,e.length-2))}}class In extends gi{construct(e,t,i){return new In(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ue(me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((l=>l.length>0)))}return new In(t)}static emptyPath(){return new In([])}}const rR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bs extends gi{construct(e,t,i){return new Bs(e,t,i)}static isValidIdentifier(e){return rR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===s2}static keyField(){return new Bs([s2])}static fromServerFormat(e){const t=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Ue(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ue(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ue(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new Ue(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bs(t)}static emptyPath(){return new Bs([])}}class it{constructor(e){this.path=e}static fromPath(e){return new it(In.fromString(e))}static fromName(e){return new it(In.fromString(e).popFirst(5))}static empty(){return new it(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&In.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new In(e.slice()))}}function Bw(s,e,t){if(!t)throw new Ue(me.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function iR(s,e,t,i){if(e===!0&&i===!0)throw new Ue(me.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function r2(s){if(!it.isDocumentKey(s))throw new Ue(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function i2(s){if(it.isDocumentKey(s))throw new Ue(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function zw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Kd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":vt(12329,{type:typeof s})}function nr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ue(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kd(s);throw new Ue(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function aR(s,e){if(e<=0)throw new Ue(me.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function vs(s,e){const t={typeString:s};return e&&(t.value=e),t}function wu(s,e){if(!zw(s))throw new Ue(me.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){t=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new Ue(me.INVALID_ARGUMENT,t);return!0}const a2=-62135596800,o2=1e6;class Qt{static now(){return Qt.fromMillis(Date.now())}static fromDate(e){return Qt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*o2);return new Qt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<a2)throw new Ue(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/o2}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wu(e,Qt._jsonSchema))return new Qt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-a2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qt._jsonSchemaVersion="firestore/timestamp/1.0",Qt._jsonSchema={type:vs("string",Qt._jsonSchemaVersion),seconds:vs("number"),nanoseconds:vs("number")};class Nt{static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new Qt(0,0))}static max(){return new Nt(new Qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nu=-1;function oR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=Nt.fromTimestamp(i===1e9?new Qt(t+1,0):new Qt(t,i));return new Ga(l,it.empty(),e)}function lR(s){return new Ga(s.readTime,s.key,nu)}class Ga{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ga(Nt.min(),it.empty(),nu)}static max(){return new Ga(Nt.max(),it.empty(),nu)}}function cR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=it.comparator(s.documentKey,e.documentKey),t!==0?t:Yt(s.largestBatchId,e.largestBatchId))}const uR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Hl(s){if(s.code!==me.FAILED_PRECONDITION||s.message!==uR)throw s;We("LocalStore","Unexpectedly lost primary lease")}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.reject(t)}static resolve(e){return new ye(((t,i)=>{t(e)}))}static reject(e){return new ye(((t,i)=>{i(e)}))}static waitFor(e){return new ye(((t,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&t()}),(g=>i(g)))})),h=!0,u===l&&t()}))}static or(e){let t=ye.resolve(!1);for(const i of e)t=t.next((l=>l?ye.resolve(l):i()));return t}static forEach(e,t){const i=[];return e.forEach(((l,u)=>{i.push(t.call(this,l,u))})),this.waitFor(i)}static mapArray(e,t){return new ye(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next((b=>{h[y]=b,++p,p===u&&i(h)}),(b=>l(b)))}}))}static doWhile(e,t){return new ye(((i,l)=>{const u=()=>{e()===!0?t().next((()=>{u()}),l):i()};u()}))}}function dR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $l(s){return s.name==="IndexedDbTransactionError"}class Yd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yd.ce=-1;const Gg=-1;function Qd(s){return s==null}function Ad(s){return s===0&&1/s==-1/0}function fR(s){return typeof s=="number"&&Number.isInteger(s)&&!Ad(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Fw="";function mR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=l2(e)),e=pR(s.get(t),e);return l2(e)}function pR(s,e){let t=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":t+="";break;case Fw:t+="";break;default:t+=u}}return t}function l2(s){return s+Fw+""}function c2(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function to(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function qw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Wn{constructor(e,t){this.comparator=e,this.root=t||Us.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Us.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Us.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return t+i.left.size;l<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qh(this.root,e,this.comparator,!0)}}class Qh{constructor(e,t,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Us{constructor(e,t,i,l,u){this.key=e,this.value=t,this.color=i??Us.RED,this.left=l??Us.EMPTY,this.right=u??Us.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,l,u){return new Us(e??this.key,t??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,t,i),null):u===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Us.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Us.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw vt(27949);return e+(this.isRed()?0:1)}}Us.EMPTY=null,Us.RED=!0,Us.BLACK=!1;Us.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(e,t,i,l,u){return this}insert(e,t,i){return new Us(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ss{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new u2(this.data.getIterator())}getIteratorFrom(e){return new u2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ss)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ss(this.comparator);return t.data=e,t}}class u2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jr{constructor(e){this.fields=e,e.sort(Bs.comparator)}static empty(){return new jr([])}unionWith(e){let t=new Ss(Bs.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new jr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Hw("Invalid base64 string: "+u):u}})(e);return new Fs(t)}static fromUint8Array(e){const t=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new Fs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fs.EMPTY_BYTE_STRING=new Fs("");const gR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ka(s){if(mn(!!s,39018),typeof s=="string"){let e=0;const t=gR.exec(s);if(mn(!!t,46558,{timestamp:s}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:us(s.seconds),nanos:us(s.nanos)}}function us(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ya(s){return typeof s=="string"?Fs.fromBase64String(s):Fs.fromUint8Array(s)}const $w="server_timestamp",Ww="__type__",Gw="__previous_value__",Kw="__local_write_time__";function Kg(s){return(s?.mapValue?.fields||{})[Ww]?.stringValue===$w}function Xd(s){const e=s.mapValue.fields[Gw];return Kg(e)?Xd(e):e}function su(s){const e=Ka(s.mapValue.fields[Kw].timestampValue);return new Qt(e.seconds,e.nanos)}class yR{constructor(e,t,i,l,u,h,p,g,y,b,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=E}}const Rd="(default)";class ru{constructor(e,t){this.projectId=e,this.database=t||Rd}static empty(){return new ru("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof ru&&e.projectId===this.projectId&&e.database===this.database}}function vR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ue(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(s.options.projectId,e)}const Yw="__type__",bR="__max__",Xh={mapValue:{}},Qw="__vector__",Id="value";function Qa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Kg(s)?4:wR(s)?9007199254740991:_R(s)?10:11:vt(28295,{value:s})}function Ti(s,e){if(s===e)return!0;const t=Qa(s);if(t!==Qa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return su(s).isEqual(su(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=Ka(l.timestampValue),p=Ka(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Ya(l.bytesValue).isEqual(Ya(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return us(l.geoPointValue.latitude)===us(u.geoPointValue.latitude)&&us(l.geoPointValue.longitude)===us(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return us(l.integerValue)===us(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=us(l.doubleValue),p=us(u.doubleValue);return h===p?Ad(h)===Ad(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return Ml(s.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(c2(h)!==c2(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Ti(h[g],p[g])))return!1;return!0})(s,e);default:return vt(52216,{left:s})}}function iu(s,e){return(s.values||[]).find((t=>Ti(t,e)))!==void 0}function Ll(s,e){if(s===e)return 0;const t=Qa(s),i=Qa(e);if(t!==i)return Yt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=us(u.integerValue||u.doubleValue),g=us(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return h2(s.timestampValue,e.timestampValue);case 4:return h2(su(s),su(e));case 5:return ng(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=Ya(u),g=Ya(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Yt(p[y],g[y]);if(b!==0)return b}return Yt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=Yt(us(u.latitude),us(h.latitude));return p!==0?p:Yt(us(u.longitude),us(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return d2(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},y=p[Id]?.arrayValue,b=g[Id]?.arrayValue,E=Yt(y?.values?.length||0,b?.values?.length||0);return E!==0?E:d2(y,b)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Xh.mapValue&&h===Xh.mapValue)return 0;if(u===Xh.mapValue)return 1;if(h===Xh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=h.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let E=0;E<g.length&&E<b.length;++E){const T=ng(g[E],b[E]);if(T!==0)return T;const M=Ll(p[g[E]],y[b[E]]);if(M!==0)return M}return Yt(g.length,b.length)})(s.mapValue,e.mapValue);default:throw vt(23264,{he:t})}}function h2(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Yt(s,e);const t=Ka(s),i=Ka(e),l=Yt(t.seconds,i.seconds);return l!==0?l:Yt(t.nanos,i.nanos)}function d2(s,e){const t=s.values||[],i=e.values||[];for(let l=0;l<t.length&&l<i.length;++l){const u=Ll(t[l],i[l]);if(u)return u}return Yt(t.length,i.length)}function Ol(s){return sg(s)}function sg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Ka(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ya(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return it.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",l=!0;for(const u of t.values||[])l?l=!1:i+=",",i+=sg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${sg(t.fields[h])}`;return l+"}"})(s.mapValue):vt(61005,{value:s})}function md(s){switch(Qa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xd(s);return e?16+md(e):16;case 5:return 2*s.stringValue.length;case 6:return Ya(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+md(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return to(i.fields,((u,h)=>{l+=u.length+md(h)})),l})(s.mapValue);default:throw vt(13486,{value:s})}}function f2(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function rg(s){return!!s&&"integerValue"in s}function Yg(s){return!!s&&"arrayValue"in s}function m2(s){return!!s&&"nullValue"in s}function p2(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function pd(s){return!!s&&"mapValue"in s}function _R(s){return(s?.mapValue?.fields||{})[Yw]?.stringValue===Qw}function Gc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return to(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Gc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gc(s.arrayValue.values[t]);return e}return{...s}}function wR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===bR}class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!pd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gc(t)}setAll(e){let t=Bs.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,l),i={},l=[],t=p.popLast()}h?i[p.lastSegment()]=Gc(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,l)}delete(e){const t=this.field(e.popLast());pd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=t.mapValue.fields[e.get(i)];pd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,i){to(t,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new dr(Gc(this.value))}}function Xw(s){const e=[];return to(s.fields,((t,i)=>{const l=new Bs([t]);if(pd(i)){const u=Xw(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new jr(e)}class Gs{constructor(e,t,i,l,u,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Gs(e,0,Nt.min(),Nt.min(),Nt.min(),dr.empty(),0)}static newFoundDocument(e,t,i,l){return new Gs(e,1,t,Nt.min(),i,l,0)}static newNoDocument(e,t){return new Gs(e,2,t,Nt.min(),Nt.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new Gs(e,3,t,Nt.min(),Nt.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dd{constructor(e,t){this.position=e,this.inclusive=t}}function g2(s,e,t){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=it.comparator(it.fromName(h.referenceValue),t.key):i=Ll(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function y2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ti(s.position[t],e.position[t]))return!1;return!0}class au{constructor(e,t="asc"){this.field=e,this.dir=t}}function xR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Jw{}class ys extends Jw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new TR(e,t,i):t==="array-contains"?new jR(e,i):t==="in"?new CR(e,i):t==="not-in"?new NR(e,i):t==="array-contains-any"?new AR(e,i):new ys(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new kR(e,i):new SR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ll(t,this.value)):t!==null&&Qa(this.value)===Qa(t)&&this.matchesComparison(Ll(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends Jw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ai(e,t)}matches(e){return Zw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zw(s){return s.op==="and"}function ex(s){return ER(s)&&Zw(s)}function ER(s){for(const e of s.filters)if(e instanceof ai)return!1;return!0}function ig(s){if(s instanceof ys)return s.field.canonicalString()+s.op.toString()+Ol(s.value);if(ex(s))return s.filters.map((e=>ig(e))).join(",");{const e=s.filters.map((t=>ig(t))).join(",");return`${s.op}(${e})`}}function tx(s,e){return s instanceof ys?(function(i,l){return l instanceof ys&&i.op===l.op&&i.field.isEqual(l.field)&&Ti(i.value,l.value)})(s,e):s instanceof ai?(function(i,l){return l instanceof ai&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&tx(h,l.filters[p])),!0):!1})(s,e):void vt(19439)}function nx(s){return s instanceof ys?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ol(t.value)}`})(s):s instanceof ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(nx).join(" ,")+"}"})(s):"Filter"}class TR extends ys{constructor(e,t,i){super(e,t,i),this.key=it.fromName(i.referenceValue)}matches(e){const t=it.comparator(e.key,this.key);return this.matchesComparison(t)}}class kR extends ys{constructor(e,t){super(e,"in",t),this.keys=sx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SR extends ys{constructor(e,t){super(e,"not-in",t),this.keys=sx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sx(s,e){return(e.arrayValue?.values||[]).map((t=>it.fromName(t.referenceValue)))}class jR extends ys{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yg(t)&&iu(t.arrayValue,this.value)}}class CR extends ys{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&iu(this.value.arrayValue,t)}}class NR extends ys{constructor(e,t){super(e,"not-in",t)}matches(e){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!iu(this.value.arrayValue,t)}}class AR extends ys{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>iu(this.value.arrayValue,i)))}}class RR{constructor(e,t=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function v2(s,e=null,t=[],i=[],l=null,u=null,h=null){return new RR(s,e,t,i,l,u,h)}function Qg(s){const e=It(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ig(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Qd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ol(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ol(i))).join(",")),e.Te=t}return e.Te}function Xg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!xR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!tx(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!y2(s.startAt,e.startAt)&&y2(s.endAt,e.endAt)}function ag(s){return it.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Wl{constructor(e,t=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function IR(s,e,t,i,l,u,h,p){return new Wl(s,e,t,i,l,u,h,p)}function Jd(s){return new Wl(s)}function b2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function DR(s){return it.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function rx(s){return s.collectionGroup!==null}function Kc(s){const e=It(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Ss(Bs.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new au(u,i))})),t.has(Bs.keyField().canonicalString())||e.Ie.push(new au(Bs.keyField(),i))}return e.Ie}function wi(s){const e=It(s);return e.Ee||(e.Ee=MR(e,Kc(s))),e.Ee}function MR(s,e){if(s.limitType==="F")return v2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new au(l.field,u)}));const t=s.endAt?new Dd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Dd(s.startAt.position,s.startAt.inclusive):null;return v2(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function og(s,e){const t=s.filters.concat([e]);return new Wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function LR(s,e){const t=s.explicitOrderBy.concat([e]);return new Wl(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Md(s,e,t){return new Wl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Zd(s,e){return Xg(wi(s),wi(e))&&s.limitType===e.limitType}function ix(s){return`${Qg(wi(s))}|lt:${s.limitType}`}function Tl(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((l=>nx(l))).join(", ")}]`),Qd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((l=>Ol(l))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((l=>Ol(l))).join(",")),`Target(${i})`})(wi(s))}; limitType=${s.limitType})`}function ef(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):it.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of Kc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const y=g2(h,p,g);return h.inclusive?y<=0:y<0})(i.startAt,Kc(i),l)||i.endAt&&!(function(h,p,g){const y=g2(h,p,g);return h.inclusive?y>=0:y>0})(i.endAt,Kc(i),l))})(s,e)}function OR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ax(s){return(e,t)=>{let i=!1;for(const l of Kc(s)){const u=PR(l,e,t);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function PR(s,e,t){const i=s.field.isKeyField()?it.comparator(e.key,t.key):(function(u,h,p){const g=h.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Ll(g,y):vt(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return vt(19790,{direction:s.dir})}}class Bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[t]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,((t,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return qw(this.inner)}size(){return this.innerSize}}const VR=new Wn(it.comparator);function na(){return VR}const ox=new Wn(it.comparator);function Fc(...s){let e=ox;for(const t of s)e=e.insert(t.key,t);return e}function lx(s){let e=ox;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ko(){return Yc()}function cx(){return Yc()}function Yc(){return new Bo((s=>s.toString()),((s,e)=>s.isEqual(e)))}const UR=new Wn(it.comparator),BR=new Ss(it.comparator);function Xt(...s){let e=BR;for(const t of s)e=e.add(t);return e}const zR=new Ss(Yt);function FR(){return zR}function Jg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function ux(s){return{integerValue:""+s}}function hx(s,e){return fR(e)?ux(e):Jg(s,e)}class tf{constructor(){this._=void 0}}function qR(s,e,t){return s instanceof ou?(function(l,u){const h={fields:{[Ww]:{stringValue:$w},[Kw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Kg(u)&&(u=Xd(u)),u&&(h.fields[Gw]=u),{mapValue:h}})(t,e):s instanceof lu?fx(s,e):s instanceof cu?mx(s,e):(function(l,u){const h=dx(l,u),p=_2(h)+_2(l.Ae);return rg(h)&&rg(l.Ae)?ux(p):Jg(l.serializer,p)})(s,e)}function HR(s,e,t){return s instanceof lu?fx(s,e):s instanceof cu?mx(s,e):t}function dx(s,e){return s instanceof uu?(function(i){return rg(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class ou extends tf{}class lu extends tf{constructor(e){super(),this.elements=e}}function fx(s,e){const t=px(e);for(const i of s.elements)t.some((l=>Ti(l,i)))||t.push(i);return{arrayValue:{values:t}}}class cu extends tf{constructor(e){super(),this.elements=e}}function mx(s,e){let t=px(e);for(const i of s.elements)t=t.filter((l=>!Ti(l,i)));return{arrayValue:{values:t}}}class uu extends tf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function _2(s){return us(s.integerValue||s.doubleValue)}function px(s){return Yg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class gx{constructor(e,t){this.field=e,this.transform=t}}function $R(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof lu&&l instanceof lu||i instanceof cu&&l instanceof cu?Ml(i.elements,l.elements,Ti):i instanceof uu&&l instanceof uu?Ti(i.Ae,l.Ae):i instanceof ou&&l instanceof ou})(s.transform,e.transform)}class WR{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class nf{}function yx(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new sf(s.key,sr.none()):new xu(s.key,s.data,sr.none());{const t=s.data,i=dr.empty();let l=new Ss(Bs.comparator);for(let u of e.fields)if(!l.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new no(s.key,i,new jr(l.toArray()),sr.none())}}function GR(s,e,t){s instanceof xu?(function(l,u,h){const p=l.value.clone(),g=x2(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,t):s instanceof no?(function(l,u,h){if(!gd(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=x2(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(vx(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Qc(s,e,t,i){return s instanceof xu?(function(u,h,p,g){if(!gd(u.precondition,h))return p;const y=u.value.clone(),b=E2(u.fieldTransforms,g,h);return y.setAll(b),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,t,i):s instanceof no?(function(u,h,p,g){if(!gd(u.precondition,h))return p;const y=E2(u.fieldTransforms,g,h),b=h.data;return b.setAll(vx(u)),b.setAll(y),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(s,e,t,i):(function(u,h,p){return gd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,t)}function KR(s,e){let t=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=dx(i.transform,l||null);u!=null&&(t===null&&(t=dr.empty()),t.set(i.field,u))}return t||null}function w2(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Ml(i,l,((u,h)=>$R(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class xu extends nf{constructor(e,t,i,l=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class no extends nf{constructor(e,t,i,l,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function vx(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function x2(s,e,t){const i=new Map;mn(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let l=0;l<t.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,HR(h,p,t[l]))}return i}function E2(s,e,t){const i=new Map;for(const l of s){const u=l.transform,h=t.data.field(l.field);i.set(l.field,qR(u,h,e))}return i}class sf extends nf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YR extends nf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QR{constructor(e,t,i,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&GR(u,e,i[l])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Qc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Qc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=cx();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=t.has(l.key)?null:p;const g=yx(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument(Nt.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xt())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,((t,i)=>w2(t,i)))&&Ml(this.baseMutations,e.baseMutations,((t,i)=>w2(t,i)))}}class Zg{constructor(e,t,i,l){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=l}static from(e,t,i){mn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return UR})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new Zg(e,t,i,l)}}class XR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class JR{constructor(e,t){this.count=e,this.unchangedNames=t}}var gs,nn;function ZR(s){switch(s){case me.OK:return vt(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return vt(15467,{code:s})}}function bx(s){if(s===void 0)return ta("GRPC error has no .code"),me.UNKNOWN;switch(s){case gs.OK:return me.OK;case gs.CANCELLED:return me.CANCELLED;case gs.UNKNOWN:return me.UNKNOWN;case gs.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case gs.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case gs.INTERNAL:return me.INTERNAL;case gs.UNAVAILABLE:return me.UNAVAILABLE;case gs.UNAUTHENTICATED:return me.UNAUTHENTICATED;case gs.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case gs.NOT_FOUND:return me.NOT_FOUND;case gs.ALREADY_EXISTS:return me.ALREADY_EXISTS;case gs.PERMISSION_DENIED:return me.PERMISSION_DENIED;case gs.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case gs.ABORTED:return me.ABORTED;case gs.OUT_OF_RANGE:return me.OUT_OF_RANGE;case gs.UNIMPLEMENTED:return me.UNIMPLEMENTED;case gs.DATA_LOSS:return me.DATA_LOSS;default:return vt(39323,{code:s})}}(nn=gs||(gs={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";function e4(){return new TextEncoder}const t4=new Ha([4294967295,4294967295],0);function T2(s){const e=e4().encode(s),t=new Iw;return t.update(e),new Uint8Array(t.digest())}function k2(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ha([t,i],0),new Ha([l,u],0)]}class ey{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new qc(`Invalid padding: ${t}`);if(i<0)throw new qc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new qc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ha.fromNumber(this.ge)}ye(e,t,i){let l=e.add(t.multiply(Ha.fromNumber(i)));return l.compare(t4)===1&&(l=new Ha([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=T2(e),[i,l]=k2(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,t,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new ey(u,l,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=T2(e),[i,l]=k2(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rf{constructor(e,t,i,l,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const l=new Map;return l.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new rf(Nt.min(),l,new Wn(Yt),na(),Xt())}}class Eu{constructor(e,t,i,l,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Eu(i,t,Xt(),Xt(),Xt())}}class yd{constructor(e,t,i,l){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=l}}class _x{constructor(e,t){this.targetId=e,this.Ce=t}}class wx{constructor(e,t,i=Fs.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=l}}class S2{constructor(){this.ve=0,this.Fe=j2(),this.Me=Fs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xt(),t=Xt(),i=Xt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:i=i.add(l);break;default:vt(38017,{changeType:u})}})),new Eu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=j2()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,mn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class n4{constructor(e){this.Ge=e,this.ze=new Map,this.je=na(),this.He=Jh(),this.Je=Jh(),this.Ze=new Wn(Yt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:vt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,i=e.Ce.count,l=this.ot(t);if(l){const u=l.target;if(ag(u))if(i===0){const h=new it(u.path);this.et(t,h,Gs.newNoDocument(h,Nt.min()))}else mn(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=t;let h,p;try{h=Ya(i).toUint8Array()}catch(g){if(g instanceof Hw)return Dl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new ey(h,l,u)}catch(g){return Dl(g instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&ag(p.target)){const g=new it(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Gs.newNoDocument(g,e))}u.Be&&(t.set(h,u.ke()),u.Ke())}}));let i=Xt();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new rf(e,t,this.Ze,this.je,i);return this.je=na(),this.He=Jh(),this.Je=Jh(),this.Ze=new Wn(Yt),l}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.qe(t,1):l.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new S2,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ss(Yt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ss(Yt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||We("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new S2),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jh(){return new Wn(it.comparator)}function j2(){return new Wn(it.comparator)}const s4={asc:"ASCENDING",desc:"DESCENDING"},r4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},i4={and:"AND",or:"OR"};class a4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lg(s,e){return s.useProto3Json||Qd(e)?e:{value:e}}function Ld(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xx(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function o4(s,e){return Ld(s,e.toTimestamp())}function xi(s){return mn(!!s,49232),Nt.fromTimestamp((function(t){const i=Ka(t);return new Qt(i.seconds,i.nanos)})(s))}function ty(s,e){return cg(s,e).canonicalString()}function cg(s,e){const t=(function(l){return new In(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?t:t.child(e)}function Ex(s){const e=In.fromString(s);return mn(Cx(e),10190,{key:e.toString()}),e}function ug(s,e){return ty(s.databaseId,e.path)}function Tp(s,e){const t=Ex(e);if(t.get(1)!==s.databaseId.projectId)throw new Ue(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ue(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new it(kx(t))}function Tx(s,e){return ty(s.databaseId,e)}function l4(s){const e=Ex(s);return e.length===4?In.emptyPath():kx(e)}function hg(s){return new In(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function kx(s){return mn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function C2(s,e,t){return{name:ug(s,e),fields:t.value.mapValue.fields}}function c4(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:vt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(mn(b===void 0||typeof b=="string",58123),Fs.fromBase64String(b||"")):(mn(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Fs.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const b=y.code===void 0?me.UNKNOWN:bx(y.code);return new Ue(b,y.message||"")})(h);t=new wx(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=Tp(s,i.document.name),u=xi(i.document.updateTime),h=i.document.createTime?xi(i.document.createTime):Nt.min(),p=new dr({mapValue:{fields:i.document.fields}}),g=Gs.newFoundDocument(l,u,h,p),y=i.targetIds||[],b=i.removedTargetIds||[];t=new yd(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=Tp(s,i.document),u=i.readTime?xi(i.readTime):Nt.min(),h=Gs.newNoDocument(l,u),p=i.removedTargetIds||[];t=new yd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=Tp(s,i.document),u=i.removedTargetIds||[];t=new yd([],u,l,null)}else{if(!("filter"in e))return vt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new JR(l,u),p=i.targetId;t=new _x(p,h)}}return t}function u4(s,e){let t;if(e instanceof xu)t={update:C2(s,e.key,e.value)};else if(e instanceof sf)t={delete:ug(s,e.key)};else if(e instanceof no)t={update:C2(s,e.key,e.data),updateMask:b4(e.fieldMask)};else{if(!(e instanceof YR))return vt(16599,{dt:e.type});t={verify:ug(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof ou)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof lu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof cu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof uu)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw vt(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:o4(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:vt(27497)})(s,e.precondition)),t}function h4(s,e){return s&&s.length>0?(mn(e!==void 0,14353),s.map((t=>(function(l,u){let h=l.updateTime?xi(l.updateTime):xi(u);return h.isEqual(Nt.min())&&(h=xi(u)),new WR(h,l.transformResults||[])})(t,e)))):[]}function d4(s,e){return{documents:[Tx(s,e.path)]}}function f4(s,e){const t={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Tx(s,l);const u=(function(y){if(y.length!==0)return jx(ai.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:kl(T.field),direction:g4(T.dir)}})(b)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=lg(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:l}}function m4(s){let e=l4(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let l=null;if(i>0){mn(i===1,65062);const b=t.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(E){const T=Sx(E);return T instanceof ai&&ex(T)?T.getFilters():[T]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((T=>(function(q){return new au(Sl(q.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let T;return T=typeof E=="object"?E.value:E,Qd(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(E){const T=!!E.before,M=E.values||[];return new Dd(M,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,M=E.values||[];return new Dd(M,T)})(t.endAt)),IR(e,l,h,u,p,"F",g,y)}function p4(s,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Sx(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Sl(t.unaryFilter.field);return ys.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Sl(t.unaryFilter.field);return ys.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Sl(t.unaryFilter.field);return ys.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Sl(t.unaryFilter.field);return ys.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return ys.create(Sl(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ai.create(t.compositeFilter.filters.map((i=>Sx(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return vt(1026)}})(t.compositeFilter.op))})(s):vt(30097,{filter:s})}function g4(s){return s4[s]}function y4(s){return r4[s]}function v4(s){return i4[s]}function kl(s){return{fieldPath:s.canonicalString()}}function Sl(s){return Bs.fromServerFormat(s.fieldPath)}function jx(s){return s instanceof ys?(function(t){if(t.op==="=="){if(p2(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NAN"}};if(m2(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(p2(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NAN"}};if(m2(t.value))return{unaryFilter:{field:kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kl(t.field),op:y4(t.op),value:t.value}}})(s):s instanceof ai?(function(t){const i=t.getFilters().map((l=>jx(l)));return i.length===1?i[0]:{compositeFilter:{op:v4(t.op),filters:i}}})(s):vt(54877,{filter:s})}function b4(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Cx(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function Nx(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ua{constructor(e,t,i,l,u=Nt.min(),h=Nt.min(),p=Fs.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ua(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ua(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _4{constructor(e){this.yt=e}}function w4(s){const e=m4({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Md(e,e.limit,"L"):e}class x4{constructor(){this.Sn=new E4}addToCollectionParentIndex(e,t){return this.Sn.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(Ga.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(Ga.min())}updateCollectionGroup(e,t,i){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class E4{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t]||new Ss(In.comparator),u=!l.has(i);return this.index[t]=l.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t];return l&&l.has(i)}getEntries(e){return(this.index[e]||new Ss(In.comparator)).toArray()}}const N2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ax=41943040;class hr{static withCacheSize(e){return new hr(e,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(Ax,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);class Pl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Pl(0)}static ar(){return new Pl(-1)}}const A2="LruGarbageCollector",T4=1048576;function R2([s,e],[t,i]){const l=Yt(s,t);return l===0?Yt(e,i):l}class k4{constructor(e){this.Pr=e,this.buffer=new Ss(R2),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();R2(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class S4{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){We(A2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$l(t)?We(A2,"Ignoring IndexedDB error during garbage collection: ",t):await Hl(t)}await this.Ar(3e5)}))}}class j4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ye.resolve(Yd.ce);const i=new k4(t);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(We("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(N2)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),N2):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,l,u,h,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,h=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,t)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),El()<=Kt.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function C4(s,e){return new j4(s,e)}class N4{constructor(){this.changes=new Bo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ye.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class A4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class R4{constructor(e,t,i,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(i!==null&&Qc(i.mutation,l,jr.empty(),Qt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Xt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Xt()){const l=ko();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,i).next((u=>{let h=Fc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=ko();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Xt())))}populateOverlays(e,t,i){const l=[];return i.forEach((u=>{t.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,l){let u=na();const h=Yc(),p=(function(){return Yc()})();return t.forEach(((g,y)=>{const b=i.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof no)?u=u.insert(y.key,y):b!==void 0?(h.set(y.key,b.mutation.getFieldMask()),Qc(b.mutation,y,b.mutation.getFieldMask(),Qt.now())):h.set(y.key,jr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,b)=>h.set(y,b))),t.forEach(((y,b)=>p.set(y,new A4(b,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=Yc();let l=new Wn(((h,p)=>h-p)),u=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let b=i.get(g)||jr.empty();b=p.applyToLocalView(y,b),i.set(g,b);const E=(l.get(p.batchId)||Xt()).add(g);l=l.insert(p.batchId,E)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,E=cx();b.forEach((T=>{if(!u.has(T)){const M=yx(t.get(T),i.get(T));M!==null&&E.set(T,M),u=u.add(T)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ye.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,l){return DR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,l):this.getDocumentsMatchingCollectionQuery(e,t,i,l)}getNextDocuments(e,t,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,l-u.size):ye.resolve(ko());let p=nu,g=u;return h.next((y=>ye.forEach(y,((b,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),u.get(b)?ye.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Xt()))).next((b=>({batchId:p,changes:lx(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new it(t)).next((i=>{let l=Fc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,l){const u=t.collectionGroup;let h=Fc();return this.indexManager.getCollectionParents(e,u).next((p=>ye.forEach(p,(g=>{const y=(function(E,T){return new Wl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((b=>{b.forEach(((E,T)=>{h=h.insert(E,T)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,l)))).next((h=>{u.forEach(((g,y)=>{const b=y.getKey();h.get(b)===null&&(h=h.insert(b,Gs.newInvalidDocument(b)))}));let p=Fc();return h.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Qc(b.mutation,y,jr.empty(),Qt.now()),ef(t,y)&&(p=p.insert(g,y))})),p}))}}class I4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ye.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:xi(l.createTime)}})(t)),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(l){return{name:l.name,query:w4(l.bundledQuery),readTime:xi(l.readTime)}})(t)),ye.resolve()}}class D4{constructor(){this.overlays=new Wn(it.comparator),this.Lr=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ko();return ye.forEach(t,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((l,u)=>{this.bt(e,t,u)})),ye.resolve()}removeOverlaysForBatchId(e,t,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),ye.resolve()}getOverlaysForCollection(e,t,i){const l=ko(),u=t.length+1,h=new it(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return ye.resolve(l)}getOverlaysForCollectionGroup(e,t,i,l){let u=new Wn(((y,b)=>y-b));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let b=u.get(y.largestBatchId);b===null&&(b=ko(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=ko(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=l)););return ye.resolve(p)}bt(e,t,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new XR(t,i));let u=this.Lr.get(t);u===void 0&&(u=Xt(),this.Lr.set(t,u)),this.Lr.set(t,u.add(i.key))}}class M4{constructor(){this.sessionToken=Fs.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}}class ny{constructor(){this.kr=new Ss(Is.Kr),this.qr=new Ss(Is.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Is(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Is(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new it(new In([])),i=new Is(t,e),l=new Is(t,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new it(new In([])),i=new Is(t,e),l=new Is(t,e+1);let u=Xt();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new Is(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Is{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return it.comparator(e.key,t.key)||Yt(e.Hr,t.Hr)}static Ur(e,t){return Yt(e.Hr,t.Hr)||it.comparator(e.key,t.key)}}class L4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ss(Is.Kr)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new QR(u,t,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new Is(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ye.resolve(h)}lookupMutationBatch(e,t){return ye.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,l=this.Xr(i),u=l<0?0:l;return ye.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?Gg:this.Yn-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Is(t,0),l=new Is(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),ye.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ss(Yt);return t.forEach((l=>{const u=new Is(l,0),h=new Is(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),ye.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,l=i.length+1;let u=i;it.isDocumentKey(u)||(u=u.child(""));const h=new Is(new it(u),0);let p=new Ss(Yt);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),h),ye.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){mn(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return ye.forEach(t.mutations,(l=>{const u=new Is(l.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Is(t,0),l=this.Jr.firstAfterOrEqual(i);return ye.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class O4{constructor(e){this.ti=e,this.docs=(function(){return new Wn(it.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ye.resolve(i?i.document.mutableCopy():Gs.newInvalidDocument(t))}getEntries(e,t){let i=na();return t.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Gs.newInvalidDocument(l))})),ye.resolve(i)}getDocumentsMatchingQuery(e,t,i,l){let u=na();const h=t.path,p=new it(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||cR(lR(b),i)<=0||(l.has(b.key)||ef(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ye.resolve(u)}getAllFromCollectionGroup(e,t,i,l){vt(9500)}ni(e,t){return ye.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new P4(this)}getSize(e){return ye.resolve(this.size)}}class P4 extends N4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?t.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),ye.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class V4{constructor(e){this.persistence=e,this.ri=new Bo((t=>Qg(t)),Xg),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.ii=0,this.si=new ny,this.targetCount=0,this.oi=Pl._r()}forEachTarget(e,t){return this.ri.forEach(((i,l)=>t(l))),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),ye.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Pl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.lr(t),ye.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),ye.waitFor(u).next((()=>l))}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return ye.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),ye.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const l=this.persistence.referenceDelegate,u=[];return l&&t.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),ye.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return ye.resolve(i)}containsKey(e,t){return ye.resolve(this.si.containsKey(t))}}class Rx{constructor(e,t){this._i={},this.overlays={},this.ai=new Yd(0),this.ui=!1,this.ui=!0,this.ci=new M4,this.referenceDelegate=e(this),this.li=new V4(this),this.indexManager=new x4,this.remoteDocumentCache=(function(l){return new O4(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new _4(t),this.Pi=new I4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new D4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new L4(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){We("MemoryPersistence","Starting transaction:",e);const l=new U4(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,t){return ye.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class U4 extends hR{constructor(e){super(),this.currentSequenceNumber=e}}class sy{constructor(e){this.persistence=e,this.Ri=new ny,this.Ai=null}static Vi(e){return new sy(e)}get di(){if(this.Ai)return this.Ai;throw vt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),ye.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.di,(i=>{const l=it.fromPath(i);return this.mi(e,l).next((u=>{u||t.removeEntry(l,Nt.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ye.or([()=>ye.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Od{constructor(e,t){this.persistence=e,this.fi=new Bo((i=>mR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=C4(this,t)}static Vi(e,t){return new Od(e,t)}Ti(){}Ii(e){return ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((l=>i+l))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return ye.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?ye.resolve():t(l)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,t).next((p=>{p||(i++,u.removeEntry(h,Nt.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ye.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ye.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ye.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=md(e.data.value)),t}wr(e,t,i){return ye.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.fi.get(t);return ye.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ry{constructor(e,t,i,l){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=l}static Es(e,t){let i=Xt(),l=Xt();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new ry(e,t.fromCache,i,l)}}class B4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class z4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return mj()?8:dR(Ks())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,l){const u={result:null};return this.gs(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,t,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new B4;return this.ys(e,t,h).next((p=>{if(u.result=p,this.As)return this.ws(e,t,h,p.size)}))})).next((()=>u.result))}ws(e,t,i,l){return i.documentReadCount<this.Vs?(El()<=Kt.DEBUG&&We("QueryEngine","SDK will not create cache indexes for query:",Tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ye.resolve()):(El()<=Kt.DEBUG&&We("QueryEngine","Query:",Tl(t),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(El()<=Kt.DEBUG&&We("QueryEngine","The SDK decides to create cache indexes for query:",Tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wi(t))):ye.resolve())}gs(e,t){if(b2(t))return ye.resolve(null);let i=wi(t);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Md(t,null,"F"),i=wi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=Xt(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,h,g.readTime)?this.gs(e,Md(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,l){return b2(t)||l.isEqual(Nt.min())?ye.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(t,u);return this.Ss(t,h,i,l)?ye.resolve(null):(El()<=Kt.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Tl(t)),this.Ds(e,h,t,oR(l,nu)).next((p=>p)))}))}bs(e,t){let i=new Ss(ax(e));return t.forEach(((l,u)=>{ef(e,u)&&(i=i.add(u))})),i}Ss(e,t,i,l){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,t,i){return El()<=Kt.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",Tl(t)),this.fs.getDocumentsMatchingQuery(e,t,Ga.min(),i)}Ds(e,t,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const iy="LocalStore",F4=3e8;class q4{constructor(e,t,i,l){this.persistence=e,this.Cs=t,this.serializer=l,this.vs=new Wn(Yt),this.Fs=new Bo((u=>Qg(u)),Xg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function H4(s,e,t,i){return new q4(s,e,t,i)}async function Ix(s,e){const t=It(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return t.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=Xt();for(const y of l){h.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function $4(s,e){const t=It(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const E=y.batch,T=E.keys();let M=ye.resolve();return T.forEach((q=>{M=M.next((()=>b.getEntry(g,q))).next((H=>{const U=y.docVersions.get(q);mn(U!==null,48541),H.version.compareTo(U)<0&&(E.applyToRemoteDocument(H,y),H.isValidDocument()&&(H.setReadTime(y.commitVersion),b.addEntry(H)))}))})),M.next((()=>p.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Xt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,l)))}))}function Dx(s){const e=It(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function W4(s,e){const t=It(s),i=e.snapshotVersion;let l=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});l=t.vs;const p=[];e.targetChanges.forEach(((b,E)=>{const T=l.get(E);if(!T)return;p.push(t.li.removeMatchingKeys(u,b.removedDocuments,E).next((()=>t.li.addMatchingKeys(u,b.addedDocuments,E))));let M=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(Fs.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):b.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(b.resumeToken,i)),l=l.insert(E,M),(function(H,U,ae){return H.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=F4?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(T,M,b)&&p.push(t.li.updateTargetData(u,M))}));let g=na(),y=Xt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(G4(u,h,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!i.isEqual(Nt.min())){const b=t.li.getLastRemoteSnapshotVersion(u).next((E=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(b)}return ye.waitFor(p).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(t.vs=l,u)))}function G4(s,e,t){let i=Xt(),l=Xt();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=na();return t.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Nt.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):We(iy,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function K4(s,e){const t=It(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Gg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Y4(s,e){const t=It(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return t.li.getTargetData(i,e).next((u=>u?(l=u,ye.resolve(l)):t.li.allocateTargetId(i).next((h=>(l=new Ua(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=t.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function dg(s,e,t){const i=It(s),l=i.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!$l(h))throw h;We(iy,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function I2(s,e,t){const i=It(s);let l=Nt.min(),u=Xt();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,b){const E=It(g),T=E.Fs.get(b);return T!==void 0?ye.resolve(E.vs.get(T)):E.li.getTargetData(y,b)})(i,h,wi(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?l:Nt.min(),t?u:Xt()))).next((p=>(Q4(i,OR(e),p),{documents:p,ks:u})))))}function Q4(s,e,t){let i=s.Ms.get(e)||Nt.min();t.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class D2{constructor(){this.activeTargetIds=FR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X4{constructor(){this.vo=new D2,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new D2,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class J4{Mo(e){}shutdown(){}}const M2="ConnectivityMonitor";class L2{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){We(M2,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){We(M2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zh=null;function fg(){return Zh===null?Zh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zh++,"0x"+Zh.toString(16)}const kp="RestConnection",Z4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class eI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Rd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,t,i,l,u){const h=fg(),p=this.Qo(e,t.toUriEncodedString());We(kp,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),b=Za(y);return this.zo(e,p,g,i,b).then((E=>(We(kp,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Dl(kp,`RPC '${e}' ${h} failed with error: `,E,"url: ",p,"request:",i),E}))}jo(e,t,i,l,u,h){return this.Wo(e,t,i,l,u)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ql})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,t){const i=Z4[e];let l=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class tI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const $s="WebChannelConnection",Mc=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Rl extends eI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Rl.c_){const e=Ow();Mc(e,Lw.STAT_EVENT,(t=>{t.stat===tg.PROXY?We($s,"STAT_EVENT: detected buffering proxy"):t.stat===tg.NOPROXY&&We($s,"STAT_EVENT: detected no buffering proxy")})),Rl.c_=!0}}zo(e,t,i,l,u){const h=fg();return new Promise(((p,g)=>{const y=new Dw;y.setWithCredentials(!0),y.listenOnce(Mw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case fd.NO_ERROR:const E=y.getResponseJson();We($s,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),p(E);break;case fd.TIMEOUT:We($s,`RPC '${e}' ${h} timed out`),g(new Ue(me.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:const T=y.getStatus();if(We($s,`RPC '${e}' ${h} failed with status:`,T,"response text:",y.getResponseText()),T>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const q=M?.error;if(q&&q.status&&q.message){const H=(function(ae){const $=ae.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf($)>=0?$:me.UNKNOWN})(q.status);g(new Ue(H,q.message))}else g(new Ue(me.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ue(me.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{We($s,`RPC '${e}' ${h} completed.`)}}));const b=JSON.stringify(l);We($s,`RPC '${e}' ${h} sending request:`,l),y.send(t,"POST",b,i,15)}))}T_(e,t,i){const l=fg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=u.join("");We($s,`Creating RPC '${e}' stream ${l}: ${y}`,p);const b=h.createWebChannel(y,p);this.I_(b);let E=!1,T=!1;const M=new tI({Ho:q=>{T?We($s,`Not sending because RPC '${e}' stream ${l} is closed:`,q):(E||(We($s,`Opening RPC '${e}' stream ${l} transport.`),b.open(),E=!0),We($s,`RPC '${e}' stream ${l} sending:`,q),b.send(q))},Jo:()=>b.close()});return Mc(b,zc.EventType.OPEN,(()=>{T||(We($s,`RPC '${e}' stream ${l} transport opened.`),M.i_())})),Mc(b,zc.EventType.CLOSE,(()=>{T||(T=!0,We($s,`RPC '${e}' stream ${l} transport closed`),M.o_(),this.E_(b))})),Mc(b,zc.EventType.ERROR,(q=>{T||(T=!0,Dl($s,`RPC '${e}' stream ${l} transport errored. Name:`,q.name,"Message:",q.message),M.o_(new Ue(me.UNAVAILABLE,"The operation could not be completed")))})),Mc(b,zc.EventType.MESSAGE,(q=>{if(!T){const H=q.data[0];mn(!!H,16349);const U=H,ae=U?.error||U[0]?.error;if(ae){We($s,`RPC '${e}' stream ${l} received error:`,ae);const $=ae.status;let ie=(function(ve){const N=gs[ve];if(N!==void 0)return bx(N)})($),de=ae.message;ie===void 0&&(ie=me.INTERNAL,de="Unknown error status: "+$+" with message "+ae.message),T=!0,M.o_(new Ue(ie,de)),b.close()}else We($s,`RPC '${e}' stream ${l} received:`,H),M.__(H)}})),Rl.u_(),setTimeout((()=>{M.s_()}),0),M}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Pw()}}function nI(s){return new Rl(s)}function Sp(){return typeof document<"u"?document:null}function af(s){return new a4(s,!0)}Rl.c_=!1;class Mx{constructor(e,t,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-i);l>0&&We("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const O2="PersistentStream";class Lx{constructor(e,t,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Mx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(ta(t.toString()),ta("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===t&&this.G_(i,l)}),(i=>{e((()=>{const l=new Ue(me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return We(O2,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(We(O2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sI extends Lx{constructor(e,t,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,l,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=c4(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Nt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Nt.min():h.readTime?xi(h.readTime):Nt.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=hg(this.serializer),t.addTarget=(function(u,h){let p;const g=h.target;if(p=ag(g)?{documents:d4(u,g)}:{query:f4(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=xx(u,h.resumeToken);const y=lg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(Nt.min())>0){p.readTime=Ld(u,h.snapshotVersion.toTimestamp());const y=lg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=p4(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=hg(this.serializer),t.removeTarget=e,this.K_(t)}}class rI extends Lx{constructor(e,t,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return mn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=h4(e.writeResults,e.commitTime),i=xi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=hg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>u4(this.serializer,i)))};this.K_(t)}}class iI{}class aI extends iI{constructor(e,t,i,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ue(me.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,cg(t,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ue(me.UNKNOWN,u.toString())}))}jo(e,t,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,cg(t,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ue(me.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function oI(s,e,t,i){return new aI(s,e,t,i)}class lI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ta(t),this.aa=!1):We("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Oo="RemoteStore";class cI{constructor(e,t,i,l,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{zo(this)&&(We(Oo,"Restarting streams for network reachability change."),await(async function(g){const y=It(g);y.Ea.add(4),await Tu(y),y.Va.set("Unknown"),y.Ea.delete(4),await of(y)})(this))}))})),this.Va=new lI(i,l)}}async function of(s){if(zo(s))for(const e of s.Ra)await e(!0)}async function Tu(s){for(const e of s.Ra)await e(!1)}function Ox(s,e){const t=It(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cy(t)?ly(t):Gl(t).O_()&&oy(t,e))}function ay(s,e){const t=It(s),i=Gl(t);t.Ia.delete(e),i.O_()&&Px(t,e),t.Ia.size===0&&(i.O_()?i.L_():zo(t)&&t.Va.set("Unknown"))}function oy(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gl(s).Z_(e)}function Px(s,e){s.da.$e(e),Gl(s).X_(e)}function ly(s){s.da=new n4({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Gl(s).start(),s.Va.ua()}function cy(s){return zo(s)&&!Gl(s).x_()&&s.Ia.size>0}function zo(s){return It(s).Ea.size===0}function Vx(s){s.da=void 0}async function uI(s){s.Va.set("Online")}async function hI(s){s.Ia.forEach(((e,t)=>{oy(s,e)}))}async function dI(s,e){Vx(s),cy(s)?(s.Va.ha(e),ly(s)):s.Va.set("Unknown")}async function fI(s,e,t){if(s.Va.set("Online"),e instanceof wx&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){We(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pd(s,i)}else if(e instanceof yd?s.da.Xe(e):e instanceof _x?s.da.st(e):s.da.tt(e),!t.isEqual(Nt.min()))try{const i=await Dx(s.localStore);t.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(Fs.EMPTY_BYTE_STRING,b.snapshotVersion)),Px(u,g);const E=new Ua(b.target,g,y,b.sequenceNumber);oy(u,E)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(i){We(Oo,"Failed to raise snapshot:",i),await Pd(s,i)}}async function Pd(s,e,t){if(!$l(e))throw e;s.Ea.add(1),await Tu(s),s.Va.set("Offline"),t||(t=()=>Dx(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{We(Oo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await of(s)}))}function Ux(s,e){return e().catch((t=>Pd(s,t,e)))}async function lf(s){const e=It(s),t=Xa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gg;for(;mI(e);)try{const l=await K4(e.localStore,i);if(l===null){e.Ta.length===0&&t.L_();break}i=l.batchId,pI(e,l)}catch(l){await Pd(e,l)}Bx(e)&&zx(e)}function mI(s){return zo(s)&&s.Ta.length<10}function pI(s,e){s.Ta.push(e);const t=Xa(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function Bx(s){return zo(s)&&!Xa(s).x_()&&s.Ta.length>0}function zx(s){Xa(s).start()}async function gI(s){Xa(s).ra()}async function yI(s){const e=Xa(s);for(const t of s.Ta)e.ea(t.mutations)}async function vI(s,e,t){const i=s.Ta.shift(),l=Zg.from(i,e,t);await Ux(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await lf(s)}async function bI(s,e){e&&Xa(s).Y_&&await(async function(i,l){if((function(h){return ZR(h)&&h!==me.ABORTED})(l.code)){const u=i.Ta.shift();Xa(i).B_(),await Ux(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await lf(i)}})(s,e),Bx(s)&&zx(s)}async function P2(s,e){const t=It(s);t.asyncQueue.verifyOperationInProgress(),We(Oo,"RemoteStore received new credentials");const i=zo(t);t.Ea.add(3),await Tu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await of(t)}async function _I(s,e){const t=It(s);e?(t.Ea.delete(2),await of(t)):e||(t.Ea.add(2),await Tu(t),t.Va.set("Unknown"))}function Gl(s){return s.ma||(s.ma=(function(t,i,l){const u=It(t);return u.sa(),new sI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:uI.bind(null,s),Yo:hI.bind(null,s),t_:dI.bind(null,s),J_:fI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),cy(s)?ly(s):s.Va.set("Unknown")):(await s.ma.stop(),Vx(s))}))),s.ma}function Xa(s){return s.fa||(s.fa=(function(t,i,l){const u=It(t);return u.sa(),new rI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:gI.bind(null,s),t_:bI.bind(null,s),ta:yI.bind(null,s),na:vI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await lf(s)):(await s.fa.stop(),s.Ta.length>0&&(We(Oo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class uy{constructor(e,t,i,l,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,l,u){const h=Date.now()+i,p=new uy(e,t,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(s,e){if(ta("AsyncQueue",`${e}: ${s}`),$l(s))return new Ue(me.UNAVAILABLE,`${e}: ${s}`);throw s}class Il{static emptySet(e){return new Il(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||it.comparator(t.key,i.key):(t,i)=>it.comparator(t.key,i.key),this.keyedMap=Fc(),this.sortedSet=new Wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Il)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Il;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class V2{constructor(){this.ga=new Wn(it.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):vt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Vl{constructor(e,t,i,l,u,h,p,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,l,u){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new Vl(e,t,Il.emptySet(t),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==i[l].type||!t[l].doc.isEqual(i[l].doc))return!1;return!0}}class wI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class xI{constructor(){this.queries=U2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const l=It(t),u=l.queries;l.queries=U2(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ue(me.ABORTED,"Firestore shutting down"))}}function U2(){return new Bo((s=>ix(s)),Zd)}async function dy(s,e){const t=It(s);let i=3;const l=e.query;let u=t.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new wI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(l,!0);break;case 1:u.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(h){const p=hy(h,`Initialization of query '${Tl(e.query)}' failed`);return void e.onError(p)}t.queries.set(l,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&my(t)}async function fy(s,e){const t=It(s),i=e.query;let l=3;const u=t.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function EI(s,e){const t=It(s);let i=!1;for(const l of e){const u=l.query,h=t.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&my(t)}function TI(s,e,t){const i=It(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(t);i.queries.delete(e)}function my(s){s.Ca.forEach((e=>{e.next()}))}var mg,B2;(B2=mg||(mg={})).Ma="default",B2.Cache="cache";class py{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Vl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mg.Cache}}class Fx{constructor(e){this.key=e}}class qx{constructor(e){this.key=e}}class kI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xt(),this.mutatedKeys=Xt(),this.eu=ax(e),this.tu=new Il(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new V2,l=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,E)=>{const T=l.get(b),M=ef(this.query,E)?E:null,q=!!T&&this.mutatedKeys.has(T.key),H=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let U=!1;T&&M?T.data.isEqual(M.data)?q!==H&&(i.track({type:3,doc:M}),U=!0):this.su(T,M)||(i.track({type:2,doc:M}),U=!0,(g&&this.eu(M,g)>0||y&&this.eu(M,y)<0)&&(p=!0)):!T&&M?(i.track({type:0,doc:M}),U=!0):T&&!M&&(i.track({type:1,doc:T}),U=!0,(g||y)&&(p=!0)),U&&(M?(h=h.add(M),u=H?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((b,E)=>(function(M,q){const H=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Vt:U})}};return H(M)-H(q)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(i),l=l??!1;const p=t&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new Vl(this.query,e.tu,u,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new V2,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new qx(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new Fx(i))})),t}cu(e){this.Za=e.ks,this.Ya=Xt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const gy="SyncEngine";class SI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class jI{constructor(e){this.key=e,this.hu=!1}}class CI{constructor(e,t,i,l,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Bo((p=>ix(p)),Zd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Wn(it.comparator),this.Au=new Map,this.Vu=new ny,this.du={},this.mu=new Map,this.fu=Pl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NI(s,e,t=!0){const i=Yx(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await Hx(i,e,t,!0),l}async function AI(s,e){const t=Yx(s);await Hx(t,e,!0,!1)}async function Hx(s,e,t,i){const l=await Y4(s.localStore,wi(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let p;return i&&(p=await RI(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&t&&Ox(s.remoteStore,l),p}async function RI(s,e,t,i,l){s.pu=(E,T,M)=>(async function(H,U,ae,$){let ie=U.view.ru(ae);ie.Ss&&(ie=await I2(H.localStore,U.query,!1).then((({documents:N})=>U.view.ru(N,ie))));const de=$&&$.targetChanges.get(U.targetId),_e=$&&$.targetMismatches.get(U.targetId)!=null,ve=U.view.applyChanges(ie,H.isPrimaryClient,de,_e);return F2(H,U.targetId,ve.au),ve.snapshot})(s,E,T,M);const u=await I2(s.localStore,e,!0),h=new kI(e,u.ks),p=h.ru(u.documents),g=Eu.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",l),y=h.applyChanges(p,s.isPrimaryClient,g);F2(s,t,y.au);const b=new SI(e,t,h);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function II(s,e,t){const i=It(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!Zd(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await dg(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),t&&ay(i.remoteStore,l.targetId),pg(i,l.targetId)})).catch(Hl)):(pg(i,l.targetId),await dg(i.localStore,l.targetId,!0))}async function DI(s,e){const t=It(s),i=t.Tu.get(e),l=t.Iu.get(i.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ay(t.remoteStore,i.targetId))}async function MI(s,e,t){const i=zI(s);try{const l=await(function(h,p){const g=It(h),y=Qt.now(),b=p.reduce(((M,q)=>M.add(q.key)),Xt());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let q=na(),H=Xt();return g.xs.getEntries(M,b).next((U=>{q=U,q.forEach(((ae,$)=>{$.isValidDocument()||(H=H.add(ae))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,q))).next((U=>{E=U;const ae=[];for(const $ of p){const ie=KR($,E.get($.key).overlayedDocument);ie!=null&&ae.push(new no($.key,ie,Xw(ie.value.mapValue),sr.exists(!0)))}return g.mutationQueue.addMutationBatch(M,y,ae,p)})).next((U=>{T=U;const ae=U.applyToLocalDocumentSet(E,H);return g.documentOverlayCache.saveOverlays(M,U.batchId,ae)}))})).then((()=>({batchId:T.batchId,changes:lx(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let y=h.du[h.currentUser.toKey()];y||(y=new Wn(Yt)),y=y.insert(p,g),h.du[h.currentUser.toKey()]=y})(i,l.batchId,t),await ku(i,l.changes),await lf(i.remoteStore)}catch(l){const u=hy(l,"Failed to persist write");t.reject(u)}}async function $x(s,e){const t=It(s);try{const i=await W4(t.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=t.Au.get(u);h&&(mn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?mn(h.hu,14607):l.removedDocuments.size>0&&(mn(h.hu,42227),h.hu=!1))})),await ku(t,i,e)}catch(i){await Hl(i)}}function z2(s,e,t){const i=It(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=It(h);g.onlineState=p;let y=!1;g.queries.forEach(((b,E)=>{for(const T of E.ba)T.va(p)&&(y=!0)})),y&&my(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function LI(s,e,t){const i=It(s);i.sharedClientState.updateQueryState(e,"rejected",t);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new Wn(it.comparator);h=h.insert(u,Gs.newNoDocument(u,Nt.min()));const p=Xt().add(u),g=new rf(Nt.min(),new Map,new Wn(Yt),h,p);await $x(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),yy(i)}else await dg(i.localStore,e,!1).then((()=>pg(i,e,t))).catch(Hl)}async function OI(s,e){const t=It(s),i=e.batch.batchId;try{const l=await $4(t.localStore,e);Gx(t,i,null),Wx(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ku(t,l)}catch(l){await Hl(l)}}async function PI(s,e,t){const i=It(s);try{const l=await(function(h,p){const g=It(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((E=>(mn(E!==null,37113),b=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);Gx(i,e,t),Wx(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ku(i,l)}catch(l){await Hl(l)}}function Wx(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function Gx(s,e,t){const i=It(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(t?u.reject(t):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function pg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||Kx(s,i)}))}function Kx(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(ay(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),yy(s))}function F2(s,e,t){for(const i of t)i instanceof Fx?(s.Vu.addReference(i.key,e),VI(s,i)):i instanceof qx?(We(gy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||Kx(s,i.key)):vt(19791,{wu:i})}function VI(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||(We(gy,"New document in limbo: "+t),s.Eu.add(i),yy(s))}function yy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new it(In.fromString(e)),i=s.fu.next();s.Au.set(i,new jI(t)),s.Ru=s.Ru.insert(t,i),Ox(s.remoteStore,new Ua(wi(Jd(t.path)),i,"TargetPurposeLimboResolution",Yd.ce))}}async function ku(s,e,t){const i=It(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const b=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=ry.Es(g.targetId,y);u.push(b)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,y){const b=It(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ye.forEach(y,(T=>ye.forEach(T.Ts,(M=>b.persistence.referenceDelegate.addReference(E,T.targetId,M))).next((()=>ye.forEach(T.Is,(M=>b.persistence.referenceDelegate.removeReference(E,T.targetId,M)))))))))}catch(E){if(!$l(E))throw E;We(iy,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const M=b.vs.get(T),q=M.snapshotVersion,H=M.withLastLimboFreeSnapshotVersion(q);b.vs=b.vs.insert(T,H)}}})(i.localStore,u))}async function UI(s,e){const t=It(s);if(!t.currentUser.isEqual(e)){We(gy,"User change. New user:",e.toKey());const i=await Ix(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ue(me.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ku(t,i.Ns)}}function BI(s,e){const t=It(s),i=t.Au.get(e);if(i&&i.hu)return Xt().add(i.key);{let l=Xt();const u=t.Iu.get(e);if(!u)return l;for(const h of u){const p=t.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function Yx(s){const e=It(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=$x.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LI.bind(null,e),e.Pu.J_=EI.bind(null,e.eventManager),e.Pu.yu=TI.bind(null,e.eventManager),e}function zI(s){const e=It(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PI.bind(null,e),e}class Vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return H4(this.persistence,new z4,e.initialUser,this.serializer)}Cu(e){return new Rx(sy.Vi,this.serializer)}Du(e){return new X4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vd.provider={build:()=>new Vd};class FI extends Vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mn(this.persistence.referenceDelegate instanceof Od,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new S4(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hr.withCacheSize(this.cacheSizeBytes):hr.DEFAULT;return new Rx((i=>Od.Vi(i,t)),this.serializer)}}class gg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>z2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UI.bind(null,this.syncEngine),await _I(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xI})()}createDatastore(e){const t=af(e.databaseInfo.databaseId),i=nI(e.databaseInfo);return oI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,l,u,h,p){return new cI(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>z2(this.syncEngine,t,0)),(function(){return L2.v()?new L2:new J4})())}createSyncEngine(e,t){return(function(l,u,h,p,g,y,b){const E=new CI(l,u,h,p,g,y);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=It(t);We(Oo,"RemoteStore shutting down."),i.Ea.add(5),await Tu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gg.provider={build:()=>new gg};class vy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ta("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ja="FirestoreClient";class qI{constructor(e,t,i,l,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=l,this.user=Ws.UNAUTHENTICATED,this.clientId=Wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{We(Ja,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(We(Ja,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=hy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jp(s,e){s.asyncQueue.verifyOperationInProgress(),We(Ja,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await Ix(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function q2(s,e){s.asyncQueue.verifyOperationInProgress();const t=await HI(s);We(Ja,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>P2(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>P2(e.remoteStore,l))),s._onlineComponents=e}async function HI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){We(Ja,"Using user provided OfflineComponentProvider");try{await jp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Dl("Error using user provided cache. Falling back to memory cache: "+t),await jp(s,new Vd)}}else We(Ja,"Using default OfflineComponentProvider"),await jp(s,new FI(void 0));return s._offlineComponents}async function Qx(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(We(Ja,"Using user provided OnlineComponentProvider"),await q2(s,s._uninitializedComponentsProvider._online)):(We(Ja,"Using default OnlineComponentProvider"),await q2(s,new gg))),s._onlineComponents}function $I(s){return Qx(s).then((e=>e.syncEngine))}async function Ud(s){const e=await Qx(s),t=e.eventManager;return t.onListen=NI.bind(null,e.syncEngine),t.onUnlisten=II.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=AI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DI.bind(null,e.syncEngine),t}function WI(s,e,t,i){const l=new vy(i),u=new py(e,l,t);return s.asyncQueue.enqueueAndForget((async()=>dy(await Ud(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>fy(await Ud(s),u)))}}function GI(s,e,t={}){const i=new Xi;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const b=new vy({next:T=>{b.Nu(),h.enqueueAndForget((()=>fy(u,E)));const M=T.docs.has(p);!M&&T.fromCache?y.reject(new Ue(me.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&T.fromCache&&g&&g.source==="server"?y.reject(new Ue(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new py(Jd(p.path),b,{includeMetadataChanges:!0,Ka:!0});return dy(u,E)})(await Ud(s),s.asyncQueue,e,t,i))),i.promise}function KI(s,e,t={}){const i=new Xi;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const b=new vy({next:T=>{b.Nu(),h.enqueueAndForget((()=>fy(u,E))),T.fromCache&&g.source==="server"?y.reject(new Ue(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new py(p,b,{includeMetadataChanges:!0,Ka:!0});return dy(u,E)})(await Ud(s),s.asyncQueue,e,t,i))),i.promise}function YI(s,e){const t=new Xi;return s.asyncQueue.enqueueAndForget((async()=>MI(await $I(s),e,t))),t.promise}function Xx(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const QI="ComponentProvider",H2=new Map;function XI(s,e,t,i,l){return new yR(s,e,t,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Xx(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const Jx="firestore.googleapis.com",$2=!0;class W2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jx,this.ssl=$2}else this.host=e.host,this.ssl=e.ssl??$2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ax;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T4)throw new Ue(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xx(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ue(me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ue(me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ue(me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cf{constructor(e,t,i,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new YA;switch(i.type){case"firstParty":return new ZA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ue(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=H2.get(t);i&&(We(QI,"Removing Datastore"),H2.delete(t),i.terminate())})(this),Promise.resolve()}}function JI(s,e,t,i={}){s=nr(s,cf);const l=Za(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;l&&(Ag(`https://${p}`),Rg("Firestore",!0)),u.host!==Jx&&u.host!==p&&Dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!Ro(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=Ws.MOCK_USER;else{y=W_(i.mockUserToken,s._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Ue(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Ws(E)}s._authCredentials=new QA(new Uw(y,b))}}class aa{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new aa(this.firestore,e,this._query)}}class Zn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zn(this.firestore,e,this._key)}toJSON(){return{type:Zn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(wu(t,Zn._jsonSchema))return new Zn(e,i||null,new it(In.fromString(t.referencePath)))}}Zn._jsonSchemaVersion="firestore/documentReference/1.0",Zn._jsonSchema={type:vs("string",Zn._jsonSchemaVersion),referencePath:vs("string")};class $a extends aa{constructor(e,t,i){super(e,t,Jd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zn(this.firestore,null,new it(e))}withConverter(e){return new $a(this.firestore,e,this._path)}}function Lt(s,e,...t){if(s=kn(s),Bw("collection","path",e),s instanceof cf){const i=In.fromString(e,...t);return i2(i),new $a(s,null,i)}{if(!(s instanceof Zn||s instanceof $a))throw new Ue(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(In.fromString(e,...t));return i2(i),new $a(s.firestore,null,i)}}function nt(s,e,...t){if(s=kn(s),arguments.length===1&&(e=Wg.newId()),Bw("doc","path",e),s instanceof cf){const i=In.fromString(e,...t);return r2(i),new Zn(s,null,new it(i))}{if(!(s instanceof Zn||s instanceof $a))throw new Ue(me.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(In.fromString(e,...t));return r2(i),new Zn(s.firestore,s instanceof $a?s.converter:null,new it(i))}}const G2="AsyncQueue";class K2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Mx(this,"async_queue_retry"),this._c=()=>{const i=Sp();i&&We(G2,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!$l(e))throw e;We(G2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ta("INTERNAL UNHANDLED ERROR: ",Y2(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=uy.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&vt(47125,{Pc:Y2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Y2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class ki extends cf{constructor(e,t,i,l){super(e,t,i,l),this.type="firestore",this._queue=new K2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new K2(e),this._firestoreClient=void 0,await e}}}function ZI(s,e){const t=typeof s=="object"?s:Lg(),i=typeof s=="string"?s:Rd,l=Hd(t,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=q_("firestore");u&&JI(l,...u)}return l}function Su(s){if(s._terminated)throw new Ue(me.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||eD(s),s._firestoreClient}function eD(s){const e=s._freezeSettings(),t=XI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new qI(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(Fs.fromBase64String(e))}catch(t){throw new Ue(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wr(Fs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wu(e,Wr._jsonSchema))return Wr.fromBase64String(e.bytes)}}Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:vs("string",Wr._jsonSchemaVersion),bytes:vs("string")};class uf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ue(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ju{constructor(e){this._methodName=e}}class Ei{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ei._jsonSchemaVersion}}static fromJSON(e){if(wu(e,Ei._jsonSchema))return new Ei(e.latitude,e.longitude)}}Ei._jsonSchemaVersion="firestore/geoPoint/1.0",Ei._jsonSchema={type:vs("string",Ei._jsonSchemaVersion),latitude:vs("number"),longitude:vs("number")};class ri{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wu(e,ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ri(e.vectorValues);throw new Ue(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ri._jsonSchemaVersion="firestore/vectorValue/1.0",ri._jsonSchema={type:vs("string",ri._jsonSchemaVersion),vectorValues:vs("object")};const tD=/^__.*__$/;class nD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new no(e,this.data,this.fieldMask,t,this.fieldTransforms):new xu(e,this.data,t,this.fieldTransforms)}}class Zx{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new no(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{dataSource:s})}}class by{constructor(e,t,i,l,u,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new by({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Bd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(eE(this.dataSource)&&tD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class sD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||af(e)}createContext(e,t,i,l=!1){return new by({dataSource:e,methodName:t,targetDoc:i,path:Bs.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cu(s){const e=s._freezeSettings(),t=af(s._databaseId);return new sD(s._databaseId,!!e.ignoreUndefinedProperties,t)}function _y(s,e,t,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,t,l);Ey("Data must be an object, but it was:",h,i);const p=sE(i,h);let g,y;if(u.merge)g=new jr(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const E of u.mergeFields){const T=Po(e,E,t);if(!h.contains(T))throw new Ue(me.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);aE(b,T)||b.push(T)}g=new jr(b),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new nD(new dr(p),g,y)}class hf extends ju{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}class wy extends ju{_toFieldTransform(e){return new gx(e.path,new ou)}isEqual(e){return e instanceof wy}}class xy extends ju{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new uu(e.serializer,hx(e.serializer,this.Vc));return new gx(e.path,t)}isEqual(e){return e instanceof xy&&this.Vc===e.Vc}}function tE(s,e,t,i){const l=s.createContext(1,e,t);Ey("Data must be an object, but it was:",l,i);const u=[],h=dr.empty();to(i,((g,y)=>{const b=iE(e,g,t);y=kn(y);const E=l.childContextForFieldPath(b);if(y instanceof hf)u.push(b);else{const T=Nu(y,E);T!=null&&(u.push(b),h.set(b,T))}}));const p=new jr(u);return new Zx(h,p,l.fieldTransforms)}function nE(s,e,t,i,l,u){const h=s.createContext(1,e,t),p=[Po(e,i,t)],g=[l];if(u.length%2!=0)throw new Ue(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)p.push(Po(e,u[T])),g.push(u[T+1]);const y=[],b=dr.empty();for(let T=p.length-1;T>=0;--T)if(!aE(y,p[T])){const M=p[T];let q=g[T];q=kn(q);const H=h.childContextForFieldPath(M);if(q instanceof hf)y.push(M);else{const U=Nu(q,H);U!=null&&(y.push(M),b.set(M,U))}}const E=new jr(y);return new Zx(b,E,h.fieldTransforms)}function rD(s,e,t,i=!1){return Nu(t,s.createContext(i?4:3,e))}function Nu(s,e){if(rE(s=kn(s)))return Ey("Unsupported field value:",e,s),sE(s,e);if(s instanceof ju)return(function(i,l){if(!eE(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=Nu(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=kn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return hx(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Qt.fromDate(i);return{timestampValue:Ld(l.serializer,u)}}if(i instanceof Qt){const u=new Qt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ld(l.serializer,u)}}if(i instanceof Ei)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wr)return{bytesValue:xx(l.serializer,i._byteString)};if(i instanceof Zn){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ty(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof ri)return(function(h,p){const g=h instanceof ri?h.toArray():h;return{mapValue:{fields:{[Yw]:{stringValue:Qw},[Id]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return Jg(p.serializer,b)}))}}}}}})(i,l);if(Nx(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Kd(i)}`)})(s,e)}function sE(s,e){const t={};return qw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(s,((i,l)=>{const u=Nu(l,e.childContextForField(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function rE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Qt||s instanceof Ei||s instanceof Wr||s instanceof Zn||s instanceof ju||s instanceof ri||Nx(s))}function Ey(s,e,t){if(!rE(t)||!zw(t)){const i=Kd(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Po(s,e,t){if((e=kn(e))instanceof uf)return e._internalPath;if(typeof e=="string")return iE(s,e);throw Bd("Field path arguments must be of type string or ",s,!1,void 0,t)}const iD=new RegExp("[~\\*/\\[\\]]");function iE(s,e,t){if(e.search(iD)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new uf(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Bd(s,e,t,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new Ue(me.INVALID_ARGUMENT,p+s+g)}function aE(s,e){return s.some((t=>t.isEqual(e)))}class aD{convertValue(e,t="none"){switch(Qa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return us(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ya(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw vt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return to(e,((l,u)=>{i[l]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[Id].arrayValue?.values?.map((i=>us(i.doubleValue)));return new ri(t)}convertGeoPoint(e){return new Ei(us(e.latitude),us(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Xd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const t=Ka(e);return new Qt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=In.fromString(e);mn(Cx(i),9688,{name:e});const l=new ru(i.get(1),i.get(3)),u=new it(i.popFirst(5));return l.isEqual(t)||ta(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class Ty extends aD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zn(this.firestore,null,t)}}function fr(){return new wy("serverTimestamp")}function So(s){return new xy("increment",s)}const Q2="@firebase/firestore",X2="4.10.0";function J2(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const l=t;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class oE{constructor(e,t,i,l,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Po("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oD extends oE{data(){return super.data()}}function lE(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ue(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ky{}class Sy extends ky{}function Rn(s,e,...t){let i=[];e instanceof ky&&i.push(e),i=i.concat(t),(function(u){const h=u.filter((g=>g instanceof jy)).length,p=u.filter((g=>g instanceof df)).length;if(h>1||h>0&&p>0)throw new Ue(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class df extends Sy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new df(e,t,i)}_apply(e){const t=this._parse(e);return cE(e._query,t),new aa(e.firestore,e.converter,og(e._query,t))}_parse(e){const t=Cu(e.firestore);return(function(u,h,p,g,y,b,E){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ue(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){e_(E,b);const q=[];for(const H of E)q.push(Z2(g,u,H));T={arrayValue:{values:q}}}else T=Z2(g,u,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||e_(E,b),T=rD(p,h,E,b==="in"||b==="not-in");return ys.create(y,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function fn(s,e,t){const i=e,l=Po("where",s);return df._create(l,i,t)}class jy extends ky{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ai.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)cE(h,g),h=og(h,g)})(e._query,t),new aa(e.firestore,e.converter,og(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cy extends Sy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Cy(e,t)}_apply(e){const t=(function(l,u,h){if(l.startAt!==null)throw new Ue(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ue(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new au(u,h)})(e._query,this._field,this._direction);return new aa(e.firestore,e.converter,LR(e._query,t))}}function hu(s,e="asc"){const t=e,i=Po("orderBy",s);return Cy._create(i,t)}class Ny extends Sy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Ny(e,t,i)}_apply(e){return new aa(e.firestore,e.converter,Md(e._query,this._limit,this._limitType))}}function du(s){return aR("limit",s),Ny._create("limit",s,"F")}function Z2(s,e,t){if(typeof(t=kn(t))=="string"){if(t==="")throw new Ue(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rx(e)&&t.indexOf("/")!==-1)throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(In.fromString(t));if(!it.isDocumentKey(i))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return f2(s,new it(i))}if(t instanceof Zn)return f2(s,t._key);throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(t)}.`)}function e_(s,e){if(!Array.isArray(s)||s.length===0)throw new Ue(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cE(s,e){const t=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ue(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ay(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class Hc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends oE{constructor(e,t,i,l,u,h){super(e,t,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Po("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=jo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:vs("string",jo._jsonSchemaVersion),bundleSource:vs("string","DocumentSnapshot"),bundleName:vs("string"),bundle:vs("string")};class vd extends jo{data(e={}){return super.data(e)}}class Co{constructor(e,t,i,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Hc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new vd(this._firestore,this._userDataWriter,i.key,i,new Hc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new vd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Hc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new vd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Hc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),b=h.indexOf(p.doc.key)),{type:lD(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ue(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:s})}}Co._jsonSchemaVersion="firestore/querySnapshot/1.0",Co._jsonSchema={type:vs("string",Co._jsonSchemaVersion),bundleSource:vs("string","QuerySnapshot"),bundleName:vs("string"),bundle:vs("string")};class cD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cu(e)}set(e,t,i){this._verifyNotCommitted();const l=Cp(e,this._firestore),u=Ay(l.converter,t,i),h=_y(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,i);return this._mutations.push(h.toMutation(l._key,sr.none())),this}update(e,t,i,...l){this._verifyNotCommitted();const u=Cp(e,this._firestore);let h;return h=typeof(t=kn(t))=="string"||t instanceof uf?nE(this._dataReader,"WriteBatch.update",u._key,t,i,l):tE(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cp(e,this._firestore);return this._mutations=this._mutations.concat(new sf(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cp(s,e){if((s=kn(s)).firestore!==e)throw new Ue(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function mr(s){s=nr(s,Zn);const e=nr(s.firestore,ki),t=Su(e);return GI(t,s._key).then((i=>hE(e,s,i)))}function Tn(s){s=nr(s,aa);const e=nr(s.firestore,ki),t=Su(e),i=new Ty(e);return lE(s._query),KI(t,s._query).then((l=>new Co(e,i,s,l)))}function zs(s,e,t){s=nr(s,Zn);const i=nr(s.firestore,ki),l=Ay(s.converter,e,t),u=Cu(i);return Au(i,[_y(u,"setDoc",s._key,l,s.converter!==null,t).toMutation(s._key,sr.none())])}function $r(s,e,t,...i){s=nr(s,Zn);const l=nr(s.firestore,ki),u=Cu(l);let h;return h=typeof(e=kn(e))=="string"||e instanceof uf?nE(u,"updateDoc",s._key,e,t,i):tE(u,"updateDoc",s._key,e),Au(l,[h.toMutation(s._key,sr.exists(!0))])}function Sr(s){return Au(nr(s.firestore,ki),[new sf(s._key,sr.none())])}function si(s,e){const t=nr(s.firestore,ki),i=nt(s),l=Ay(s.converter,e),u=Cu(s.firestore);return Au(t,[_y(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,sr.exists(!1))]).then((()=>i))}function uE(s,...e){s=kn(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||J2(e[i])||(t=e[i++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(J2(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,h,p;if(s instanceof Zn)h=nr(s.firestore,ki),p=Jd(s._key.path),u={next:y=>{e[i]&&e[i](hE(h,s,y))},error:e[i+1],complete:e[i+2]};else{const y=nr(s,aa);h=nr(y.firestore,ki),p=y._query;const b=new Ty(h);u={next:E=>{e[i]&&e[i](new Co(h,b,y,E))},error:e[i+1],complete:e[i+2]},lE(s._query)}const g=Su(h);return WI(g,p,l,u)}function Au(s,e){const t=Su(s);return YI(t,e)}function hE(s,e,t){const i=t.docs.get(e._key),l=new Ty(s);return new jo(s,l,e._key,i,new Hc(t.hasPendingWrites,t.fromCache),e.converter)}function t_(s){return s=nr(s,ki),Su(s),new cD(s,(e=>Au(s,e)))}(function(e,t=!0){KA(Uo),Io(new Wa("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new ki(new XA(i.getProvider("auth-internal")),new eR(h,i.getProvider("app-check-internal")),vR(h,l),h);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),vi(Q2,X2,e),vi(Q2,X2,"esm2020")})();var uD="firebase",hD="12.8.0";vi(uD,hD,"app");const dE="firebasestorage.googleapis.com",fE="storageBucket",dD=120*1e3,fD=600*1e3;class ts extends ji{constructor(e,t,i=0){super(Np(e),`Firebase Storage: ${t} (${Np(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ts.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Np(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var es;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(es||(es={}));function Np(s){return"storage/"+s}function Ry(){const s="An unknown error occurred, please check the error payload for server response.";return new ts(es.UNKNOWN,s)}function mD(s){return new ts(es.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function pD(s){return new ts(es.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gD(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ts(es.UNAUTHENTICATED,s)}function yD(){return new ts(es.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function vD(s){return new ts(es.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function bD(){return new ts(es.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _D(){return new ts(es.CANCELED,"User canceled the upload/download.")}function wD(s){return new ts(es.INVALID_URL,"Invalid URL '"+s+"'.")}function xD(s){return new ts(es.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function ED(){return new ts(es.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fE+"' property when initializing the app?")}function TD(){return new ts(es.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kD(){return new ts(es.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SD(s){return new ts(es.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yg(s){return new ts(es.INVALID_ARGUMENT,s)}function mE(){return new ts(es.APP_DELETED,"The Firebase app was deleted.")}function jD(s){return new ts(es.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xc(s,e){return new ts(es.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Lc(s){throw new ts(es.INTERNAL_ERROR,"Internal error: "+s)}class tr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=tr.makeFromUrl(e,t)}catch{return new tr(e,"")}if(i.path==="")return i;throw xD(e)}static makeFromUrl(e,t){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(de){de.path.charAt(de.path.length-1)==="/"&&(de.path_=de.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function y(de){de.path_=decodeURIComponent(de.path)}const b="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",M=new RegExp(`^https?://${E}/${b}/b/${l}/o${T}`,"i"),q={bucket:1,path:3},H=t===dE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",ae=new RegExp(`^https?://${H}/${l}/${U}`,"i"),ie=[{regex:p,indices:g,postModify:u},{regex:M,indices:q,postModify:y},{regex:ae,indices:{bucket:1,path:2},postModify:y}];for(let de=0;de<ie.length;de++){const _e=ie[de],ve=_e.regex.exec(e);if(ve){const N=ve[_e.indices.bucket];let S=ve[_e.indices.path];S||(S=""),i=new tr(N,S),_e.postModify(i);break}}if(i==null)throw wD(e);return i}}class CD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ND(s,e,t){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let y=!1;function b(...U){y||(y=!0,e.apply(null,U))}function E(U){l=setTimeout(()=>{l=null,s(M,g())},U)}function T(){u&&clearTimeout(u)}function M(U,...ae){if(y){T();return}if(U){T(),b.call(null,U,...ae);return}if(g()||h){T(),b.call(null,U,...ae);return}i<64&&(i*=2);let ie;p===1?(p=2,ie=0):ie=(i+Math.random())*1e3,E(ie)}let q=!1;function H(U){q||(q=!0,T(),!y&&(l!==null?(U||(p=2),clearTimeout(l),E(0)):U||(p=1)))}return E(0),u=setTimeout(()=>{h=!0,H(!0)},t),H}function AD(s){s(!1)}function RD(s){return s!==void 0}function ID(s){return typeof s=="object"&&!Array.isArray(s)}function Iy(s){return typeof s=="string"||s instanceof String}function n_(s){return Dy()&&s instanceof Blob}function Dy(){return typeof Blob<"u"}function vg(s,e,t,i){if(i<e)throw yg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw yg(`Invalid value for '${s}'. Expected ${t} or less.`)}function ff(s,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${s}`}function pE(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);t=t+l+"&"}return t=t.slice(0,-1),t}var No;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(No||(No={}));function DD(s,e){const t=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||l||u}class MD{constructor(e,t,i,l,u,h,p,g,y,b,E,T=!0,M=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,H)=>{this.resolve_=q,this.reject_=H,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new ed(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===No.NO_ERROR,g=u.getStatus();if(!p||DD(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===No.ABORT;i(!1,new ed(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new ed(y,u))})},t=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());RD(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=Ry();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?mE():_D();h(g)}else{const g=bD();h(g)}};this.canceled_?t(!1,new ed(!1,null,!0)):this.backoffId_=ND(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ed{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function LD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function OD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function VD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function UD(s,e,t,i,l,u,h=!0,p=!1){const g=pE(s.urlParams),y=s.url+g,b=Object.assign({},s.headers);return PD(b,e),LD(b,t),OD(b,u),VD(b,i),new MD(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function BD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zD(...s){const e=BD();if(e!==void 0){const t=new e;for(let i=0;i<s.length;i++)t.append(s[i]);return t.getBlob()}else{if(Dy())return new Blob(s);throw new ts(es.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function FD(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function qD(s){if(typeof atob>"u")throw SD("base-64");return atob(s)}const yi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ap{constructor(e,t){this.data=e,this.contentType=t||null}}function HD(s,e){switch(s){case yi.RAW:return new Ap(gE(e));case yi.BASE64:case yi.BASE64URL:return new Ap(yE(s,e));case yi.DATA_URL:return new Ap(WD(e),GD(e))}throw Ry()}function gE(s){const e=[];for(let t=0;t<s.length;t++){let i=s.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++t);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function $D(s){let e;try{e=decodeURIComponent(s)}catch{throw Xc(yi.DATA_URL,"Malformed data URL.")}return gE(e)}function yE(s,e){switch(s){case yi.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw Xc(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case yi.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw Xc(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=qD(e)}catch(l){throw l.message.includes("polyfill")?l:Xc(s,"Invalid character found")}const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i}class vE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Xc(yi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=KD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function WD(s){const e=new vE(s);return e.base64?yE(yi.BASE64,e.rest):$D(e.rest)}function GD(s){return new vE(s).contentType}function KD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Va{constructor(e,t){let i=0,l="";n_(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(n_(this.data_)){const i=this.data_,l=FD(i,e,t);return l===null?null:new Va(l)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Va(i,!0)}}static getBlob(...e){if(Dy()){const t=e.map(i=>i instanceof Va?i.data_:i);return new Va(zD.apply(null,t))}else{const t=e.map(h=>Iy(h)?HD(yi.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return t.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new Va(l,!0)}}uploadData(){return this.data_}}function My(s){let e;try{e=JSON.parse(s)}catch{return null}return ID(e)?e:null}function YD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function QD(s,e){const t=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?t:s+"/"+t}function bE(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function XD(s,e){return e}class er{constructor(e,t,i,l){this.server=e,this.local=t||e,this.writable=!!i,this.xform=l||XD}}let td=null;function JD(s){return!Iy(s)||s.length<2?s:bE(s)}function _E(){if(td)return td;const s=[];s.push(new er("bucket")),s.push(new er("generation")),s.push(new er("metageneration")),s.push(new er("name","fullPath",!0));function e(u,h){return JD(h)}const t=new er("name");t.xform=e,s.push(t);function i(u,h){return h!==void 0?Number(h):h}const l=new er("size");return l.xform=i,s.push(l),s.push(new er("timeCreated")),s.push(new er("updated")),s.push(new er("md5Hash",null,!0)),s.push(new er("cacheControl",null,!0)),s.push(new er("contentDisposition",null,!0)),s.push(new er("contentEncoding",null,!0)),s.push(new er("contentLanguage",null,!0)),s.push(new er("contentType",null,!0)),s.push(new er("metadata","customMetadata",!0)),td=s,td}function ZD(s,e){function t(){const i=s.bucket,l=s.fullPath,u=new tr(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function eM(s,e,t){const i={};i.type="file";const l=t.length;for(let u=0;u<l;u++){const h=t[u];i[h.local]=h.xform(i,e[h.server])}return ZD(i,s),i}function wE(s,e,t){const i=My(e);return i===null?null:eM(s,i,t)}function tM(s,e,t,i){const l=My(e);if(l===null||!Iy(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const b=s.bucket,E=s.fullPath,T="/b/"+h(b)+"/o/"+h(E),M=ff(T,t,i),q=pE({alt:"media",token:y});return M+q})[0]}function nM(s,e){const t={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}const s_="prefixes",r_="items";function sM(s,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[s_])for(const l of t[s_]){const u=l.replace(/\/$/,""),h=s._makeStorageReference(new tr(e,u));i.prefixes.push(h)}if(t[r_])for(const l of t[r_]){const u=s._makeStorageReference(new tr(e,l.name));i.items.push(u)}return i}function rM(s,e,t){const i=My(t);return i===null?null:sM(s,e,i)}class Ly{constructor(e,t,i,l){this.url=e,this.method=t,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Oy(s){if(!s)throw Ry()}function iM(s,e){function t(i,l){const u=wE(s,l,e);return Oy(u!==null),u}return t}function aM(s,e){function t(i,l){const u=rM(s,e,l);return Oy(u!==null),u}return t}function oM(s,e){function t(i,l){const u=wE(s,l,e);return Oy(u!==null),tM(u,l,s.host,s._protocol)}return t}function Py(s){function e(t,i){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=yD():l=gD():t.getStatus()===402?l=pD(s.bucket):t.getStatus()===403?l=vD(s.path):l=i,l.status=t.getStatus(),l.serverResponse=i.serverResponse,l}return e}function lM(s){const e=Py(s);function t(i,l){let u=e(i,l);return i.getStatus()===404&&(u=mD(s.path)),u.serverResponse=l.serverResponse,u}return t}function cM(s,e,t,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",t.length>0&&(u.delimiter=t),i&&(u.pageToken=i),l&&(u.maxResults=l);const h=e.bucketOnlyServerUrl(),p=ff(h,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,b=new Ly(p,g,aM(s,e.bucket),y);return b.urlParams=u,b.errorHandler=Py(e),b}function uM(s,e,t){const i=e.fullServerUrl(),l=ff(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new Ly(l,u,oM(s,t),h);return p.errorHandler=lM(e),p}function hM(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function dM(s,e,t){const i=Object.assign({},t);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=hM(null,e)),i}function fM(s,e,t,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let ie="";for(let de=0;de<2;de++)ie=ie+Math.random().toString().slice(2);return ie}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const y=dM(e,i,l),b=nM(y,t),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",M=Va.getBlob(E,i,T);if(M===null)throw TD();const q={name:y.fullPath},H=ff(u,s.host,s._protocol),U="POST",ae=s.maxUploadRetryTime,$=new Ly(H,U,iM(s,t),ae);return $.urlParams=q,$.headers=h,$.body=M.uploadData(),$.errorHandler=Py(e),$}class mM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=No.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=No.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=No.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,l,u){if(this.sent_)throw Lc("cannot .send() more than once");if(Za(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class pM extends mM{initXhr(){this.xhr_.responseType="text"}}function Vy(){return new pM}class Vo{constructor(e,t){this._service=e,t instanceof tr?this._location=t:this._location=tr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vo(e,t)}get root(){const e=new tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bE(this._location.path)}get storage(){return this._service}get parent(){const e=YD(this._location.path);if(e===null)return null;const t=new tr(this._location.bucket,e);return new Vo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw jD(e)}}function gM(s,e,t){s._throwIfRoot("uploadBytes");const i=fM(s.storage,s._location,_E(),new Va(e,!0),t);return s.storage.makeRequestWithTokens(i,Vy).then(l=>({metadata:l,ref:s}))}function yM(s){const e={prefixes:[],items:[]};return xE(s,e).then(()=>e)}async function xE(s,e,t){const l=await vM(s,{pageToken:t});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await xE(s,e,l.nextPageToken)}function vM(s,e){e!=null&&typeof e.maxResults=="number"&&vg("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=cM(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(i,Vy)}function bM(s){s._throwIfRoot("getDownloadURL");const e=uM(s.storage,s._location,_E());return s.storage.makeRequestWithTokens(e,Vy).then(t=>{if(t===null)throw kD();return t})}function _M(s,e){const t=QD(s._location.path,e),i=new tr(s._location.bucket,t);return new Vo(s.storage,i)}function wM(s){return/^[A-Za-z]+:\/\//.test(s)}function xM(s,e){return new Vo(s,e)}function EE(s,e){if(s instanceof Uy){const t=s;if(t._bucket==null)throw ED();const i=new Vo(t,t._bucket);return e!=null?EE(i,e):i}else return e!==void 0?_M(s,e):s}function EM(s,e){if(e&&wM(e)){if(s instanceof Uy)return xM(s,e);throw yg("To use ref(service, url), the first argument must be a Storage instance.")}else return EE(s,e)}function i_(s,e){const t=e?.[fE];return t==null?null:tr.makeFromBucketSpec(t,s)}function TM(s,e,t,i={}){s.host=`${e}:${t}`;const l=Za(e);l&&(Ag(`https://${s.host}/b`),Rg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:W_(u,s.app.options.projectId))}class Uy{constructor(e,t,i,l,u,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=dE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dD,this._maxUploadRetryTime=fD,this._requests=new Set,l!=null?this._bucket=tr.makeFromBucketSpec(l,this._host):this._bucket=i_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tr.makeFromBucketSpec(this._url,e):this._bucket=i_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vo(this,e)}_makeRequest(e,t,i,l,u=!0){if(this._deleted)return new CD(mE());{const h=UD(e,this._appId,i,l,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,l).getPromise()}}const a_="@firebase/storage",o_="0.14.0";const TE="storage";function bd(s,e,t){return s=kn(s),gM(s,e,t)}function l_(s){return s=kn(s),yM(s)}function Ao(s){return s=kn(s),bM(s)}function Ba(s,e){return s=kn(s),EM(s,e)}function kM(s=Lg(),e){s=kn(s);const i=Hd(s,TE).getImmediate({identifier:e}),l=q_("storage");return l&&SM(i,...l),i}function SM(s,e,t,i={}){TM(s,e,t,i)}function jM(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new Uy(t,i,l,e,Uo)}function CM(){Io(new Wa(TE,jM,"PUBLIC").setMultipleInstances(!0)),vi(a_,o_,""),vi(a_,o_,"esm2020")}CM();const kE={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},By=Mg(kE),xo=Rw(By),Se=ZI(By),za=kM(By),NM=Mg(kE,"secondary"),h3=Rw(NM),AM="EYdciKDOi3UYBLk1u8hHams5tmO2",SE=w.createContext();function Ci(){return w.useContext(SE)}function RM({children:s}){const[e,t]=w.useState(null),[i,l]=w.useState(!1),[u,h]=w.useState(!1),[p,g]=w.useState(null),[y,b]=w.useState(!0);w.useEffect(()=>{let $=null;const ie=ON(xo,de=>{if(t(de),$&&($(),$=null),de)if(de.uid===AM)l(!0),h(!1),g(null),b(!1);else{l(!1);const _e=Rn(Lt(Se,"clients"),fn("uid","==",de.uid)),ve=async()=>{const N=localStorage.getItem("mcf_clientId");if(N)try{const S=await mr(nt(Se,"clients",N));S.exists()&&(h(!0),g({id:S.id,...S.data()}))}catch(S){console.error("Direct client read failed:",S)}};$=uE(_e,async N=>{if(N.empty)await ve();else{const S=N.docs[0];h(!0),g({id:S.id,...S.data()});try{localStorage.setItem("mcf_clientId",S.id)}catch{}}b(!1)},async N=>{console.error("Error listening to client data:",N),await ve(),b(!1)})}else l(!1),h(!1),g(null),b(!1)});return()=>{ie(),$&&$()}},[]);const ae={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:$=>{g(ie=>ie?{...ie,...$}:$)},resolveClient:async()=>{if(p)return p;const $=localStorage.getItem("mcf_clientId");if($)try{const ie=await mr(nt(Se,"clients",$));if(ie.exists()){const de={id:ie.id,...ie.data()};return h(!0),g(de),de}}catch(ie){console.error("resolveClient direct read failed:",ie)}if(e){const ie=Rn(Lt(Se,"clients"),fn("uid","==",e.uid)),de=await Tn(ie);if(!de.empty){const _e={id:de.docs[0].id,...de.docs[0].data()};return h(!0),g(_e),_e}}return null},login:async($,ie,de=!0)=>(await $b(xo,de?Zp:Fg),await DN(xo,$,ie)),signup:async($,ie,de)=>{await $b(xo,Zp);const _e=await IN(xo,ie.trim().toLowerCase(),de),ve=_e.user,N=nt(Lt(Se,"clients")),S={uid:ve.uid,name:$.trim(),email:ie.trim().toLowerCase(),clientType:"core_buddy",coreBuddyAccess:!0,status:"active",tier:"free",subscriptionStatus:null,signupSource:"self_signup",createdAt:Qt.now()};await zs(N,S),h(!0),g({id:N.id,...S});try{localStorage.setItem("mcf_clientId",N.id)}catch{}return _e},logout:()=>{try{localStorage.removeItem("mcf_clientId")}catch{}return PN(xo)},resetPassword:$=>RN(xo,$),loading:y};return o.jsx(SE.Provider,{value:ae,children:s})}const jE=w.createContext();function Fo(){return w.useContext(jE)}function IM({children:s}){const[e,t]=w.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=w.useState(()=>localStorage.getItem("accent")||"red");w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),w.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),t(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return o.jsx(jE.Provider,{value:p,children:s})}const CE=w.createContext();function Ru(){return w.useContext(CE)}const DM=["nutrition","buddies"],MM=[5,10],LM=2,OM=1;function PM({children:s}){const{clientData:e,loading:t}=Ci(),i=w.useMemo(()=>{const l=e?.tier||"free",u=e?.subscriptionStatus||null,h=e&&e.signupSource!=="self_signup",p=l==="premium"||!!h;function g(y){return p?!0:!DM.includes(y)}return{tier:l,subscriptionStatus:u,isPremium:p,canAccess:g,loading:t,FREE_RANDOMISER_DURATIONS:MM,FREE_RANDOMISER_WEEKLY_LIMIT:LM,FREE_HABIT_LIMIT:OM}},[e?.tier,e?.subscriptionStatus,e?.signupSource,t]);return o.jsx(CE.Provider,{value:i,children:s})}function VM(s){if(s?.signupSource==="self_signup"&&!s?.onboardingComplete)return"/onboarding";const e=s?.clientType;return e==="core_buddy"?"/client/core-buddy":e==="circuit_vip"||e==="circuit_dropin"?"/client/circuit":"/client"}function UM({className:s=""}){const{isDark:e,toggleTheme:t}=Fo();return o.jsx("button",{className:s||"theme-toggle",onClick:t,"aria-label":e?"Switch to light mode":"Switch to dark mode",children:e?o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:o.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:o.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})})}function BM(){const[s,e]=w.useState(""),[t,i]=w.useState(""),[l,u]=w.useState(!0),[h,p]=w.useState(""),[g,y]=w.useState(!1),[b,E]=w.useState(!1),[T,M]=w.useState(!1),{login:q,resetPassword:H,currentUser:U,isAdmin:ae,isClient:$,clientData:ie,loading:de}=Ci(),_e=Nr();if(w.useEffect(()=>{if(!de&&U){if(!U.emailVerified&&ie?.signupSource==="self_signup"){_e("/signup");return}ae?_e("/dashboard"):$?_e(VM(ie)):(y(!1),p("No account found. Please sign up or contact your trainer."))}},[de,U,ae,$,ie,_e]),de||U)return o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"var(--bg-body)"},children:o.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})});const ve=async S=>{S.preventDefault(),p(""),y(!0);try{await q(s,t,l)}catch(D){p(D.message||"Failed to log in"),y(!1)}},N=async S=>{if(S.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await H(s.trim()),M(!0)}catch(D){D.code==="auth/user-not-found"?p("No account found with this email"):p(D.message||"Failed to send reset email")}y(!1)};return o.jsxs("div",{className:"login-container",children:[o.jsx(UM,{className:"login-theme-toggle"}),o.jsxs("div",{className:"login-card",children:[o.jsxs("div",{className:"login-header",children:[o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),o.jsx("p",{children:o.jsx("strong",{children:b?"Reset Password":"Sign in as 1-2-1 or a Core Buddy"})})]}),h&&o.jsx("div",{className:"error-message",children:h}),T?o.jsxs("div",{className:"reset-sent",children:[o.jsx("div",{className:"reset-sent-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsx("p",{children:"Reset email sent!"}),o.jsx("span",{children:"Check your inbox for a password reset link"}),o.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{E(!1),M(!1),p("")},children:"Back to Log In"})]}):b?o.jsxs("form",{onSubmit:N,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),placeholder:"Enter your email",required:!0})]}),o.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),o.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!1),p("")},children:"Back to Log In"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("form",{onSubmit:ve,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsx("input",{type:"password",id:"password",value:t,onChange:S=>i(S.target.value),required:!0})]}),o.jsx("div",{className:"remember-me",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:l,onChange:S=>u(S.target.checked)}),o.jsx("span",{children:"Remember me"})]})}),o.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),o.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!0),p("")},children:"Forgot password?"}),o.jsx("button",{type:"button",className:"login-btn login-btn-outline",onClick:()=>_e("/signup"),children:"Don't have an account? Create one free"})]}),o.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})]})}function nd({feature:s,children:e}){const{canAccess:t,loading:i}=Ru();return i||t(s)?e:o.jsx(D_,{to:"/upgrade",replace:!0})}function sa({active:s}){const e=Nr(),{clientData:t}=Ci(),{isPremium:i}=Ru(),l=t?.clientType==="block"&&t?.coreBuddyAccess;return o.jsxs("nav",{className:"block-bottom-nav",children:[o.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),o.jsx("span",{children:"Profile"})]}),o.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:o.jsx("path",{d:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"})}),o.jsx("span",{children:"Workout"})]}),i&&o.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),o.jsx("span",{children:"Nutrition"})]}),i&&o.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),o.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),o.jsx("span",{children:"Buddies"})]}),l&&o.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),o.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),o.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),o.jsx("span",{children:"Block"})]})]})}function qo({children:s,onRefresh:e}){const[t,i]=w.useState(0),[l,u]=w.useState(!1),h=w.useRef(null),p=w.useRef(0),g=w.useRef(!1),y=w.useCallback(T=>{window.scrollY<=0&&(p.current=T.touches[0].clientY,g.current=!0)},[]),b=w.useCallback(T=>{if(!g.current||l)return;const M=T.touches[0].clientY-p.current;M>20&&window.scrollY<=0&&(T.preventDefault(),i(Math.min((M-20)*.35,80)))},[l]),E=w.useCallback(async()=>{t>55&&!l&&(u(!0),e?await e():window.location.reload(),u(!1)),i(0),g.current=!1},[t,l,e]);return o.jsxs("div",{ref:h,onTouchStart:y,onTouchMove:b,onTouchEnd:E,children:[o.jsxs("div",{className:`pull-refresh-indicator ${t>0?"visible":""} ${l?"refreshing":""}`,style:{height:t},children:[o.jsx("div",{className:`refresh-spinner ${l?"spinning":""}`,children:o.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:o.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),o.jsx("span",{className:"refresh-text",children:l?"Refreshing...":"Pull to refresh"})]}),s]})}function Iu(s,e,t,i,l){const u=[];for(let h=0;h<s;h++){const p=(h*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:t+i*Math.sin(p),x2:e+l*Math.cos(p),y2:t+l*Math.sin(p),thick:h%5===0})}return u}const NE=Iu(60,100,100,85,96),zM=Iu(60,100,100,78,94),FM=Iu(60,100,100,82,94);Iu(60,50,50,38,46);const d3=Iu(60,40,40,30,37);function qM({steps:s,onFinish:e,active:t}){const[i,l]=w.useState(0),[u,h]=w.useState(null),[p,g]=w.useState("below"),[y,b]=w.useState(!1),E=w.useRef(null),T=w.useRef(t);T.current=t,w.useEffect(()=>{t||l(0)},[t]),w.useEffect(()=>{if(!t)return;const _e=ve=>ve.preventDefault();return document.addEventListener("touchmove",_e,{passive:!1}),document.addEventListener("wheel",_e,{passive:!1}),document.body.style.overflow="hidden",()=>{document.removeEventListener("touchmove",_e),document.removeEventListener("wheel",_e),document.body.style.overflow=""}},[t]);const M=w.useMemo(()=>t?s.filter(_e=>document.querySelector(_e.selector)):[],[t]),q=M[i],H=i===M.length-1,U=q?.selector,ae=w.useCallback(()=>{if(!U)return;const _e=document.querySelector(U);if(!_e){h(null);return}const ve=_e.getBoundingClientRect(),N=8;h({top:ve.top-N,left:ve.left-N,width:ve.width+N*2,height:ve.height+N*2});const S=window.innerHeight-ve.bottom;g(S<260?"above":"below")},[U]);if(w.useEffect(()=>{if(!t||!U)return;b(!0);const _e=document.querySelector(U);if(_e){document.body.style.overflow="",_e.scrollIntoView({behavior:"smooth",block:"center"});let ve=null,N=0,S=0;const D=60,V=()=>{S++;const A=_e.getBoundingClientRect(),Me=Math.round(A.top);if(ve!==null&&Me===ve?N++:N=0,ve=Me,N>=3||S>=D){T.current&&(document.body.style.overflow="hidden"),ae(),b(!1);return}O=requestAnimationFrame(V)};let O;const I=setTimeout(()=>{O=requestAnimationFrame(V)},120);return()=>{clearTimeout(I),O&&cancelAnimationFrame(O),T.current&&(document.body.style.overflow="hidden")}}},[t,i,U,ae]),w.useEffect(()=>{if(!t)return;const _e=()=>{E.current&&cancelAnimationFrame(E.current),E.current=requestAnimationFrame(ae)};return window.addEventListener("scroll",_e,!0),window.addEventListener("resize",_e),()=>{window.removeEventListener("scroll",_e,!0),window.removeEventListener("resize",_e),E.current&&cancelAnimationFrame(E.current)}},[t,ae]),!t||!q||M.length===0)return null;const $=()=>{H?e():l(i+1)},ie=()=>{i>0&&l(i-1)},de=()=>e();return o.jsxs("div",{className:"st-overlay",onClick:_e=>{_e.stopPropagation()},children:[o.jsx("div",{className:"st-backdrop",onClick:$}),u&&o.jsx("div",{className:`st-spotlight${y?" st-transitioning":""}`,style:{top:u.top,left:u.left,width:u.width,height:u.height}}),u&&o.jsxs("div",{className:`st-tooltip st-tooltip-${p}${y?" st-transitioning":""}`,style:{top:p==="below"?Math.min(Math.max(u.top+u.height+16,16),window.innerHeight-200):void 0,bottom:p==="above"?Math.min(Math.max(window.innerHeight-u.top+16,16),window.innerHeight-60):void 0,left:Math.max(16,Math.min(u.left,window.innerWidth-320))},children:[o.jsx("div",{className:"st-dots",children:M.map((_e,ve)=>o.jsx("span",{className:`st-dot${ve===i?" active":""}${ve<i?" done":""}`},ve))}),o.jsx("h3",{className:"st-title",children:q.title}),o.jsx("p",{className:"st-body",children:q.body}),o.jsxs("div",{className:"st-actions",children:[i>0&&o.jsx("button",{className:"st-btn st-btn-back",onClick:ie,children:"Back"}),o.jsx("button",{className:"st-btn st-btn-next",onClick:$,children:q.cta||(H?"Let's Go!":"Next")})]}),o.jsx("button",{className:"st-skip",onClick:de,children:"Skip tour"})]})]})}const c_=3,HM=5;function Rp(s){return s.toISOString().split("T")[0]}const Ip=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function Dp(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Oc(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function $M(s,e=800){return new Promise(t=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,h=i.height;u>h?u>e&&(h=Math.round(h*e/u),u=e):h>e&&(u=Math.round(u*e/h),h=e),l.width=u,l.height=h,l.getContext("2d").drawImage(i,0,0,u,h),l.toBlob(p=>t(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}function WM(){const{currentUser:s,isClient:e,clientData:t,logout:i,updateClientData:l,loading:u}=Ci(),{isDark:h,toggleTheme:p}=Fo(),{isPremium:g,FREE_HABIT_LIMIT:y}=Ru(),b=Nr(),E=g?HM:y,[T,M]=w.useState({hours:0,minutes:0,seconds:0}),[q,H]=w.useState(0),[U,ae]=w.useState(0),[$,ie]=w.useState(0),[de,_e]=w.useState(!1),[ve,N]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[S,D]=w.useState(null),[V,O]=w.useState(0),[I,A]=w.useState(0),[Me,Ze]=w.useState(c_),[Q,Te]=w.useState(!1),[Ie,qe]=w.useState(!1),[ee,L]=w.useState([]),[X,xe]=w.useState(null),[ke,Ee]=w.useState(!1),be=w.useRef(null),[Ke,ct]=w.useState(0),[Ve,sn]=w.useState(0),[Sn,Hn]=w.useState(null),Ut=w.useCallback((j,G="info")=>{Hn({message:j,type:G}),setTimeout(()=>Hn(null),4e3)},[]),[tt,bt]=w.useState([]),[ht,Dn]=w.useState(!1),[he,pt]=w.useState(""),[At,Ot]=w.useState(null),[at,dt]=w.useState(null),[St,Vt]=w.useState(!1),[js,bs]=w.useState(new Set),[un,J]=w.useState(new Set),[Ce,wt]=w.useState({}),[_t,ot]=w.useState({}),[He,st]=w.useState({}),[$e,Jt]=w.useState({}),[qt,Gn]=w.useState({}),[jn,Kn]=w.useState({}),tn=w.useRef(null),Vn=w.useRef(null),Mn=w.useRef({}),[rn,Qs]=w.useState([]),[le,Ae]=w.useState(!1),Ye=w.useRef(null),[gt,lt]=w.useState([]),[hn,Un]=w.useState(""),[pn,gn]=w.useState(!1),[_s,ws]=w.useState(null),[ns,dn]=w.useState([]),[Cn,Cs]=w.useState(null),[rr,li]=w.useState(!1),Ar=w.useRef(!1),Rr=(()=>{const j=[{selector:".cb-ring-container",title:"Your 24-Hour Countdown",body:"Every day resets. This ring tracks the time you have left  tap your photo to personalise your profile.",cta:"Next"},{selector:".cb-stats-row",title:"Progress at a Glance",body:"Your workout streak, sessions this week, and daily habits  all in one row. These fill up as you go."},{selector:".cb-nudge-card",title:"Smart Suggestions",body:"We'll highlight what needs your attention  your next session, unfinished habits, or a meal to log."},{selector:".cb-card-workouts-hero",title:"Workout",body:"Randomiser workouts  pick your focus, level and time. Save and replay your favourites.",cta:"Next"}];return g&&j.push({selector:".cb-card-nutrition",title:"Nutrition Tracking",body:"Set your macro targets, scan barcodes, and log meals to hit your daily goals."},{selector:".cb-card-consistency",title:"Daily Habits",body:"5 simple habits each day  train, hit protein, 10k steps, sleep, and hydrate. Build your streak."},{selector:".cb-card-buddies",title:"Buddies & Social",body:"Connect with other members, share your journey, and keep each other accountable."},{selector:".cb-journey-section",title:"Share Your Journey",body:"Post photos, updates, and milestones  your fitness journey in one place. Like and comment on each other's posts."}),j.push({selector:".block-bottom-nav",title:"You're All Set!",body:"Use the nav bar to jump between your profile, workouts, nutrition, and buddies. Time to get after it.",cta:"Let's Go!"}),j})();w.useEffect(()=>{!u&&!s&&b("/")},[u,s,b]),w.useEffect(()=>{!u&&t&&t.signupSource==="self_signup"&&!t.onboardingComplete&&b("/onboarding")},[u,t,b]),w.useEffect(()=>{let j=t?.tourComplete||Ar.current;if(!j&&t?.id)try{j=!!localStorage.getItem(`tourDone_${t.id}`)}catch{}if(de&&t&&!j){const G=setTimeout(()=>li(!0),600);return()=>clearTimeout(G)}},[de,t]),w.useEffect(()=>{if(!(!de||!t?.id)){try{if(localStorage.getItem(`targetHint_${t.id}`))return}catch{}if(!t?.weeklyWorkoutTarget){const j=setTimeout(()=>qe(!0),1500);return()=>clearTimeout(j)}}},[de,t]),w.useEffect(()=>{if(t)try{const j=sessionStorage.getItem(`cbDash_${t.id}`);if(j){const G=JSON.parse(j);ae(G.totalWorkouts??0),ie(G.habitWeekPct??0),N(G.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),D(G.nutritionTargetData??null),O(G.todayHabitsCount??0),A(G.weeklyWorkouts??0),Ze(G.weeklyWorkoutTarget??c_),L(G.leaderboardTop3??[]),ct(G.streakWeeks??0),_e(!0)}}catch{}},[t]),w.useEffect(()=>{t?.photoURL&&xe(t.photoURL),t?.weeklyWorkoutTarget&&Ze(t.weeklyWorkoutTarget)},[t]),w.useEffect(()=>{if(!t)return;const j=Rn(Lt(Se,"notifications"),fn("toId","==",t.id)),G=uE(j,Ne=>{const Re=Ne.docs.map(ze=>({id:ze.id,...ze.data()}));Re.sort((ze,ut)=>{const Xe=ze.createdAt?.toMillis?.()||0;return(ut.createdAt?.toMillis?.()||0)-Xe}),Qs(Re.slice(0,50))},Ne=>{console.error("Notification listener error:",Ne),Ne.code==="permission-denied"&&console.warn("Firestore rules may be missing for the notifications collection. Please update your Firestore rules in the Firebase Console.")});return()=>G()},[t]),w.useEffect(()=>{const j=G=>{Ye.current&&!Ye.current.contains(G.target)&&Ae(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),w.useEffect(()=>{if(!t)return;const j=t.id;(async()=>{try{const[G,Ne,Re]=await Promise.all([Tn(Rn(Lt(Se,"buddies"),fn("user1","==",j))),Tn(Rn(Lt(Se,"buddies"),fn("user2","==",j))),Tn(Lt(Se,"clients"))]),ze=new Set;[...G.docs,...Ne.docs].forEach(Xe=>{const Et=Xe.data();ze.add(Et.user1===j?Et.user2:Et.user1)});const ut={};Re.docs.forEach(Xe=>{ut[Xe.id]=Xe.data()}),lt(Array.from(ze).filter(Xe=>ut[Xe]).map(Xe=>({id:Xe,name:ut[Xe].name,photoURL:ut[Xe].photoURL||null})))}catch(G){console.error("Error loading buddies for mentions:",G)}})()},[t]);const xs=rn.filter(j=>!j.read).length,Es=async()=>{const j=rn.filter(Ne=>!Ne.read);if(!j.length)return;const G=t_(Se);j.forEach(Ne=>G.update(nt(Se,"notifications",Ne.id),{read:!0})),await G.commit()},Ts=async()=>{if(!rn.length)return;const j=t_(Se);rn.forEach(G=>j.delete(nt(Se,"notifications",G.id))),await j.commit()},Yn=async(j,G,Ne={})=>{if(!(!t||j===t.id))try{await si(Lt(Se,"notifications"),{toId:j,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:G,read:!1,createdAt:fr(),...Ne})}catch(Re){console.error("Notification create error:",Re),Re.code==="permission-denied"&&Ut("Notifications blocked  check Firestore rules","error")}},bn=(j,G)=>{const Ne=G==="compose"?tn.current?.selectionStart:null,ze=(Ne!=null?j.slice(0,Ne):j).match(/@(\w*)$/);if(ze){gn(!0),ws(G),Un(ze[1].toLowerCase());const ut=gt.filter(Xe=>Xe.name&&Xe.name.toLowerCase().includes(ze[1].toLowerCase())).slice(0,5);dn(ut)}else gn(!1),dn([])},Qn=(j,G)=>{if(G==="compose"){const Ne=tn.current,Re=he,ze=Ne?.selectionStart??Re.length,ut=Re.slice(0,ze),Xe=Re.slice(ze),Et=ut.replace(/@\w*$/,`@${j.name} `);pt(Et+Xe),setTimeout(()=>{Ne?.focus(),Ne.selectionStart=Ne.selectionEnd=Et.length},0)}else{const Re=(_t[G]||"").replace(/@\w*$/,`@${j.name} `);ot(ze=>({...ze,[G]:Re}))}gn(!1),dn([])},Ht=j=>j&&j.split(/(@\w[\w\s]*?\s)/g).map((Ne,Re)=>Ne.startsWith("@")&&gt.some(ze=>Ne.trim()===`@${ze.name}`)?o.jsx("span",{className:"mention-highlight",children:Ne.trim()},Re):Ne),pr=async j=>{const G=j.target.files?.[0];if(!(!G||!t)){if(!G.type.startsWith("image/")){Ut("Please select an image file","error");return}if(G.size>5*1024*1024){Ut("Image must be under 5MB","error");return}Ee(!0);try{const Ne=await new Promise(ut=>{const Xe=new Image;Xe.onload=()=>{const Et=document.createElement("canvas"),jt=400;let Zt=Xe.width,P=Xe.height;Zt>P?(P=P/Zt*jt,Zt=jt):(Zt=Zt/P*jt,P=jt),Et.width=Zt,Et.height=P,Et.getContext("2d").drawImage(Xe,0,0,Zt,P),Et.toBlob(te=>ut(te),"image/jpeg",.75)},Xe.src=URL.createObjectURL(G)}),Re=Ba(za,`profilePhotos/${t.id}`);await bd(Re,Ne);const ze=await Ao(Re);await $r(nt(Se,"clients",t.id),{photoURL:ze}),xe(ze),l({photoURL:ze}),Ut("Profile photo updated!","success")}catch(Ne){console.error("Photo upload error:",Ne),Ut("Failed to upload photo","error")}Ee(!1),be.current&&(be.current.value="")}};w.useEffect(()=>{const j=()=>{const Ne=new Date,Re=new Date(Ne);Re.setHours(23,59,59,999);const ze=Re-Ne,ut=Math.floor(ze/(1e3*60*60)),Xe=Math.floor(ze%(1e3*60*60)/(1e3*60)),Et=Math.floor(ze%(1e3*60)/1e3);M({hours:ut,minutes:Xe,seconds:Et}),H(60-Et)};j();const G=setInterval(j,1e3);return()=>clearInterval(G)},[]),w.useEffect(()=>{const j=setInterval(()=>{sn(G=>(G+1)%Ip.length)},8e3);return()=>clearInterval(j)},[]),w.useEffect(()=>{if(!s||!t)return;(async()=>{let G=null,Ne=null;try{const Re=Rp(new Date),ze=Lt(Se,"workoutLogs"),ut=Rn(ze,fn("clientId","==",t.id));G=await Tn(ut),ae(G.docs.length);const Xe=new Date,Et=Xe.getDay(),jt=Et===0?6:Et-1,Zt=new Date(Xe);Zt.setDate(Xe.getDate()-jt),Zt.setHours(0,0,0,0);const P=Zt.getTime(),te=G.docs.filter(Ct=>{const Je=Ct.data().completedAt;return Je?(Je.toDate?Je.toDate().getTime():new Date(Je).getTime())>=P:!1}).length;A(te);const ne=Lt(Se,"habitLogs"),we=Rn(ne,fn("clientId","==",t.id),fn("date","==",Re)),je=await Tn(we);let De=0;if(!je.empty){const Ct=je.docs[0].data().habits||{};De=Math.min(Object.values(Ct).filter(Boolean).length,E)}ie(Math.round(De/E*100)),O(De);const Fe=await mr(nt(Se,"nutritionTargets",t.id));Fe.exists()&&(D(Fe.data()),Ne=Fe.data());const mt=await mr(nt(Se,"nutritionLogs",`${t.id}_${Re}`));if(mt.exists()){const Je=(mt.data().entries||[]).reduce((Tt,_n)=>({protein:Tt.protein+(_n.protein||0),carbs:Tt.carbs+(_n.carbs||0),fats:Tt.fats+(_n.fats||0),calories:Tt.calories+(_n.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});N(Je)}}catch(Re){console.error("Error loading dashboard stats:",Re)}try{const Re=Lt(Se,"clients"),ze=Rn(Re,fn("leaderboardOptIn","==",!0)),Xe=(await Tn(ze)).docs.map(Et=>({id:Et.id,name:Et.data().name,photoURL:Et.data().photoURL||null}));L(Xe.slice(0,3))}catch(Re){console.error("Leaderboard preview error:",Re)}try{let Re=0;if(G){const ze=G.docs.map(ut=>ut.data().date).filter(Boolean).sort().reverse();if(ze.length>0){const ut=new Date;let Xe=new Date(ut);e:for(let Et=0;Et<52;Et++){const jt=new Date(Xe),Zt=jt.getDay(),P=Zt===0?6:Zt-1;jt.setDate(jt.getDate()-P),jt.setHours(0,0,0,0);const te=new Date(jt);te.setDate(te.getDate()+7);const ne=Rp(jt),we=Rp(te);if(ze.some(De=>De>=ne&&De<we))Re++;else{if(Et>0)break e;break}Xe.setDate(Xe.getDate()-7)}}}ct(Re)}catch(Re){console.error("Streak computation error:",Re)}_e(!0)})()},[s,t,E]),w.useEffect(()=>{if(!(!de||!t))try{sessionStorage.setItem(`cbDash_${t.id}`,JSON.stringify({totalWorkouts:U,habitWeekPct:$,nutritionTotals:ve,nutritionTargetData:S,todayHabitsCount:V,weeklyWorkouts:I,weeklyWorkoutTarget:Me,leaderboardTop3:ee,streakWeeks:Ke}))}catch{}},[de,U,$,ve,S,V,I,Me,ee,Ke,t]);const Kr=w.useCallback(async()=>{if(Ar.current=!0,li(!1),l({tourComplete:!0}),t?.id){try{localStorage.setItem(`tourDone_${t.id}`,"1")}catch{}try{await $r(nt(Se,"clients",t.id),{tourComplete:!0})}catch(j){console.error("Failed to save tour completion:",j)}}},[t,l]),hs=w.useCallback(async j=>{if(Ze(j),Te(!1),qe(!1),t?.id){try{localStorage.setItem(`targetHint_${t.id}`,"1")}catch{}try{await $r(nt(Se,"clients",t.id),{weeklyWorkoutTarget:j})}catch(G){console.error("Failed to save weekly target:",G)}}},[t]),ss=j=>{const G=j.currentTarget,Ne=G.querySelector(".ripple");Ne&&Ne.remove();const Re=G.getBoundingClientRect(),ze=Math.max(Re.width,Re.height),ut=j.clientX-Re.left-ze/2,Xe=j.clientY-Re.top-ze/2,Et=document.createElement("span");Et.className="ripple",Et.style.cssText=`width:${ze}px;height:${ze}px;left:${ut}px;top:${Xe}px;`,G.appendChild(Et),setTimeout(()=>Et.remove(),600)},rs=t?.name?.split(" ")[0]||"there",Yr=Math.min(Math.round(I/Me*100),100),R=Ke>0?Math.min(Math.round(Ke/12*100),100):0,z=[{label:"Wk Streak",value:`${Ke}`,pct:R,color:"var(--color-primary)",size:"normal"},{label:"Workouts",value:`${I}/${Me}`,pct:Yr,color:"var(--color-primary)",size:"large",editable:!0},{label:"Habits Today",value:`${$}%`,pct:$,color:"var(--color-primary)",size:"normal"}],re=j=>!S||!S[j]?0:Math.min(Math.round(ve[j]/S[j]*100),100),oe=(()=>{const j=new Date().getHours();return de&&V>=E&&ve.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:j>=5&&j<12?{main:"Rise and grind,",sub:"let's get after it!"}:j>=12&&j<17?{main:"Oye",sub:"crack on and make it count!"}:j>=17&&j<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),Oe=de?I===0?{label:"WORKOUT",message:"No workouts this week yet",cta:"Start One",action:()=>b("/client/core-buddy/workouts"),pct:0,ringLabel:"0"}:V<E?{label:"DAILY HABITS",message:`${V}/${E} completed`,cta:"Open Habits",action:()=>b("/client/core-buddy/consistency"),pct:$,ringLabel:`${V}/${E}`}:g&&ve.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>b("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:null,Pe=w.useCallback(async()=>{if(t){Dn(!0);try{const j=await Tn(Rn(Lt(Se,"posts"),fn("authorId","==",t.id),hu("createdAt","desc"),du(30)));bt(j.docs.map(Ne=>({id:Ne.id,...Ne.data()})));const G=await Tn(Rn(Lt(Se,"postLikes"),fn("userId","==",t.id)));bs(new Set(G.docs.map(Ne=>Ne.data().postId)))}catch(j){console.error("Error loading journey:",j)}finally{Dn(!1)}}},[t]);w.useEffect(()=>{de&&t&&Pe()},[de,t,Pe]);const Be=j=>{const G=j.target.files?.[0];if(G){if(!G.type.startsWith("image/")){Ut("Please select an image file","error");return}if(G.size>10*1024*1024){Ut("Image must be under 10MB","error");return}Ot(G),dt(URL.createObjectURL(G))}},$t=()=>{Ot(null),at&&URL.revokeObjectURL(at),dt(null),Vn.current&&(Vn.current.value="")},Ge=async()=>{if(!(!he.trim()&&!At||St||!t)){Vt(!0);try{let j=null;if(At){const Re=await $M(At),ze=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,ut=Ba(za,`postImages/${t.id}/${ze}`);await bd(ut,Re),j=await Ao(ut)}await si(Lt(Se,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:he.trim(),type:j?"image":"text",imageURL:j||null,createdAt:fr(),likeCount:0,commentCount:0});const Ne=he.trim().match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Ne){const Re=new Set;Ne.forEach(ze=>{const ut=ze.slice(1).trim(),Xe=gt.find(Et=>Et.name&&Et.name.toLowerCase()===ut.toLowerCase());Xe&&!Re.has(Xe.id)&&(Re.add(Xe.id),Yn(Xe.id,"mention",{}))})}pt(""),$t(),tn.current&&(tn.current.style.height="auto"),await Pe(),Ut("Posted!","success")}catch(j){console.error("Error posting:",j),Ut(j?.message||"Failed to post","error")}finally{Vt(!1)}}},$n=async j=>{if(window.confirm("Delete this post?"))try{await Sr(nt(Se,"posts",j)),bt(G=>G.filter(Ne=>Ne.id!==j)),Ut("Post deleted","info")}catch(G){console.error("Delete error:",G),Ut("Failed to delete","error")}},is=async j=>{if(!t)return;const G=t.id,Ne=`${j}_${G}`,Re=js.has(j),ze=new Set(js);Re?ze.delete(j):ze.add(j),bs(ze),bt(ut=>ut.map(Xe=>Xe.id===j?{...Xe,likeCount:Math.max(0,(Xe.likeCount||0)+(Re?-1:1))}:Xe));try{if(Re)await Sr(nt(Se,"postLikes",Ne)),await $r(nt(Se,"posts",j),{likeCount:So(-1)});else{await zs(nt(Se,"postLikes",Ne),{postId:j,userId:G,createdAt:fr()}),await $r(nt(Se,"posts",j),{likeCount:So(1)});const ut=tt.find(Xe=>Xe.id===j);ut&&Yn(ut.authorId,"like",{postId:j})}}catch(ut){console.error("Like error:",ut),Pe()}},qs=async j=>{try{const G=await Tn(Rn(Lt(Se,"postComments"),fn("postId","==",j),hu("createdAt","asc"),du(50)));wt(Ne=>({...Ne,[j]:G.docs.map(Re=>({id:Re.id,...Re.data()}))}))}catch(G){console.error("Error loading comments:",G)}},as=j=>{const G=new Set(un);G.has(j)?G.delete(j):(G.add(j),Ce[j]||qs(j)),J(G)},Xs=async j=>{const G=(_t[j]||"").trim(),Ne=qt[j];if(!(!G&&!Ne||!t)){st(Re=>({...Re,[j]:!0}));try{let Re=null;if(Ne){const jt=Ba(za,`comment-images/${Date.now()}_${Ne.name}`);await bd(jt,Ne),Re=await Ao(jt)}const ze={postId:j,authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:G||"",createdAt:fr()};Re&&(ze.imageURL=Re);const ut=$e[j];ut&&(ze.replyToId=ut.id,ze.replyToName=ut.authorName),await si(Lt(Se,"postComments"),ze),await $r(nt(Se,"posts",j),{commentCount:So(1)});const Xe=tt.find(jt=>jt.id===j);Xe&&Yn(Xe.authorId,"comment",{postId:j});const Et=G.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Et){const jt=new Set;Et.forEach(Zt=>{const P=Zt.slice(1).trim(),te=gt.find(ne=>ne.name&&ne.name.toLowerCase()===P.toLowerCase());te&&!jt.has(te.id)&&(jt.add(te.id),Yn(te.id,"mention",{postId:j}))})}ot(jt=>({...jt,[j]:""})),Gn(jt=>({...jt,[j]:null})),Kn(jt=>({...jt,[j]:null})),Jt(jt=>({...jt,[j]:null})),Mn.current[j]&&(Mn.current[j].value=""),bt(jt=>jt.map(Zt=>Zt.id===j?{...Zt,commentCount:(Zt.commentCount||0)+1}:Zt)),await qs(j)}catch(Re){console.error("Comment error:",Re),Ut("Failed to comment","error")}finally{st(Re=>({...Re,[j]:!1}))}}},oa=async(j,G)=>{try{await Sr(nt(Se,"postComments",G)),await $r(nt(Se,"posts",j),{commentCount:So(-1)}),wt(Ne=>({...Ne,[j]:(Ne[j]||[]).filter(Re=>Re.id!==G)})),bt(Ne=>Ne.map(Re=>Re.id===j?{...Re,commentCount:Math.max((Re.commentCount||1)-1,0)}:Re))}catch(Ne){console.error("Delete comment error:",Ne),Ut("Failed to delete comment","error")}},Ni=(j,G)=>{const Ne=G.target.files?.[0];if(!Ne)return;if(Ne.size>5*1024*1024){Ut("Image must be under 5MB","error");return}Gn(ze=>({...ze,[j]:Ne}));const Re=new FileReader;Re.onload=ze=>Kn(ut=>({...ut,[j]:ze.target.result})),Re.readAsDataURL(Ne)},Ir=j=>{Gn(G=>({...G,[j]:null})),Kn(G=>({...G,[j]:null})),Mn.current[j]&&(Mn.current[j].value="")},la=j=>{pt(j.target.value),j.target.style.height="auto",j.target.style.height=Math.min(j.target.scrollHeight,120)+"px",bn(j.target.value,"compose")},Dr=(j,G)=>{ot(Ne=>({...Ne,[j]:G})),bn(G,j)};return o.jsx(qo,{children:o.jsxs("div",{className:"cb-dashboard","data-theme":h?"dark":"light",children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsxs("div",{className:"header-notif-wrap",ref:Ye,children:[o.jsxs("button",{className:"header-notif-btn",onClick:()=>{Ae(!le),le||Es()},"aria-label":"Notifications",children:[o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),o.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),xs>0&&o.jsx("span",{className:"header-notif-badge",children:xs>9?"9+":xs})]}),le&&o.jsxs("div",{className:"notif-panel",children:[o.jsxs("div",{className:"notif-panel-header",children:[o.jsx("span",{className:"notif-panel-title",children:"Notifications"}),rn.length>0&&o.jsx("button",{className:"notif-clear-btn",onClick:Ts,children:"Clear all"})]}),o.jsx("div",{className:"notif-panel-list",children:rn.length===0?o.jsx("div",{className:"notif-empty",children:"No notifications yet"}):rn.map(j=>o.jsxs("div",{className:`notif-item${j.read?"":" unread"}`,onClick:()=>{if(Ae(!1),j.type==="buddy_request"||j.type==="buddy_accept")b(g?"/client/core-buddy/buddies":"/upgrade");else if((j.type==="like"||j.type==="comment")&&j.postId){if(!un.has(j.postId)){const G=new Set(un);G.add(j.postId),J(G),Ce[j.postId]||qs(j.postId)}setTimeout(()=>{const G=document.getElementById(`post-${j.postId}`);G&&G.scrollIntoView({behavior:"smooth",block:"center"})},150)}else j.type==="like"||j.type==="comment"?document.querySelector(".cb-journey-section")?.scrollIntoView({behavior:"smooth"}):j.type==="mention"&&b(`/client/core-buddy/profile/${j.fromId}`)},children:[o.jsx("div",{className:"notif-item-avatar",children:j.fromPhotoURL?o.jsx("img",{src:j.fromPhotoURL,alt:""}):o.jsx("span",{children:(j.fromName||"?")[0]})}),o.jsxs("div",{className:"notif-item-body",children:[o.jsxs("p",{className:"notif-item-text",children:[o.jsx("strong",{children:j.fromName})," ",j.type==="buddy_request"&&"sent you a buddy request",j.type==="buddy_accept"&&"accepted your buddy request",j.type==="like"&&"liked your post",j.type==="comment"&&"commented on your post",j.type==="mention"&&"mentioned you"]}),o.jsx("span",{className:"notif-item-time",children:Dp(j.createdAt)})]})]},j.id))})]})]}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsxs("div",{className:"header-actions",children:[o.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:h?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),o.jsx("button",{onClick:i,"aria-label":"Log out",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),o.jsx("polyline",{points:"16 17 21 12 16 7"}),o.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),o.jsxs("main",{className:"cb-main",children:[o.jsxs("div",{className:"cb-ring-container",children:[o.jsxs("div",{className:"cb-ring",children:[o.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:NE.map((j,G)=>{const Ne=G<q;return o.jsx("line",{x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,className:`ring-tick ${Ne?"elapsed":"remaining"}`,strokeWidth:j.thick?"3":"2"},G)})}),o.jsxs("div",{className:"cb-ring-center",children:[o.jsxs("div",{className:"cb-ring-logo",onClick:()=>be.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[o.jsx("img",{src:X||"/Logo.webp",alt:X?"Profile":"Mind Core Fitness"}),o.jsx("div",{className:`cb-photo-overlay${ke?" uploading":""}`,children:ke?o.jsx("div",{className:"cb-photo-spinner"}):o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[o.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),o.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),o.jsx("input",{ref:be,type:"file",accept:"image/*",onChange:pr,style:{display:"none"}})]}),!X&&!ke&&o.jsx("div",{className:"cb-photo-badge",onClick:()=>be.current?.click(),children:o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[o.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),o.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),o.jsxs("div",{className:"cb-ring-countdown",children:[o.jsx("span",{className:"cb-timer-digit",children:String(T.hours).padStart(2,"0")}),o.jsx("span",{className:"cb-timer-colon",children:":"}),o.jsx("span",{className:"cb-timer-digit",children:String(T.minutes).padStart(2,"0")}),o.jsx("span",{className:"cb-timer-colon",children:":"}),o.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(T.seconds).padStart(2,"0")})]}),o.jsx("span",{className:"cb-ring-label",children:"remaining today"}),o.jsxs("p",{className:"cb-ring-tagline",children:[Ip[Ve].text," ",o.jsx("strong",{children:Ip[Ve].bold})]},Ve)]}),o.jsx("div",{className:"cb-stats-row",children:z.map(j=>{const G=(j.size==="large",38),Ne=2*Math.PI*G,Re=Ne-j.pct/100*Ne,ze=j.editable;return o.jsxs("div",{className:`cb-stat-item${j.size==="large"?" cb-stat-large":""}`,children:[o.jsxs("div",{className:`cb-stat-ring${ze?" cb-stat-tappable":""}${ze&&Ie?" cb-stat-hint":""}`,onClick:ze?()=>{Te(!0),qe(!1)}:void 0,children:[o.jsxs("svg",{viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:G}),o.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:G,style:{stroke:j.color},strokeDasharray:Ne,strokeDashoffset:Re})]}),o.jsx("span",{className:"cb-stat-value",style:{color:j.color},children:j.value})]}),o.jsx("span",{className:"cb-stat-label",children:j.label})]},j.label)})}),Q&&o.jsx("div",{className:"cb-target-overlay",onClick:()=>Te(!1),children:o.jsxs("div",{className:"cb-target-picker",onClick:j=>j.stopPropagation(),children:[o.jsx("h4",{children:"Weekly workout goal"}),o.jsx("p",{children:"How many sessions per week?"}),o.jsx("div",{className:"cb-target-options",children:[1,2,3,4,5,6,7].map(j=>o.jsx("button",{className:`cb-target-option${j===Me?" active":""}`,onClick:()=>hs(j),children:j},j))})]})}),o.jsxs("p",{className:"cb-coach-msg",children:[oe.main," ",o.jsx("strong",{children:rs}),"  ",oe.sub]}),Oe&&o.jsxs("button",{className:"cb-nudge-card",onClick:Oe.action||void 0,style:Oe.action?void 0:{cursor:"default"},children:[o.jsxs("div",{className:"cb-nudge-ring",children:[o.jsxs("svg",{viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),o.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-Oe.pct/100*2*Math.PI*38})]}),o.jsx("span",{className:"cb-nudge-ring-val",children:Oe.ringLabel})]}),o.jsxs("div",{className:"cb-nudge-info",children:[o.jsx("span",{className:"cb-nudge-label",children:Oe.label}),o.jsx("span",{className:"cb-nudge-title",children:Oe.message}),Oe.cta&&o.jsxs("span",{className:"cb-nudge-cta",children:[Oe.cta," "]})]})]}),o.jsxs("div",{className:"cb-features",children:[g&&o.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:j=>{ss(j),b("/client/core-buddy/nutrition")},children:[o.jsxs("div",{className:"cb-card-top-row",children:[o.jsx("div",{className:"cb-card-content",children:o.jsx("h3",{children:"Today's Nutrition"})}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsx("div",{className:"cb-card-preview-row",children:o.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:re("protein"),color:"var(--color-primary)"},{label:"C",pct:re("carbs"),color:"var(--color-primary)"},{label:"F",pct:re("fats"),color:"var(--color-primary)"},{label:"Cal",pct:re("calories"),color:"var(--color-primary)"}].map(j=>{const Ne=2*Math.PI*38,Re=Ne-j.pct/100*Ne;return o.jsxs("div",{className:"cb-mini-ring",children:[o.jsxs("svg",{viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),o.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:j.color},strokeDasharray:Ne,strokeDashoffset:Re})]}),o.jsx("span",{style:{color:j.color},children:j.label})]},j.label)})})}),o.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),o.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:j=>{ss(j),b("/client/core-buddy/workouts")},children:[o.jsx("h3",{className:"cb-hero-title",children:"Workout"}),o.jsxs("div",{className:"cb-hero-stats",children:[o.jsxs("span",{children:[I," this week"]}),o.jsx("span",{className:"cb-hero-dot",children:""}),o.jsxs("span",{children:[U," total"]})]}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsxs("button",{className:"cb-feature-card cb-card-consistency ripple-btn",onClick:j=>{ss(j),b("/client/core-buddy/consistency")},children:[o.jsxs("div",{className:"cb-card-content",children:[o.jsx("h3",{children:"Habits"}),o.jsx("div",{className:"cb-habit-dots",children:Array.from({length:E},(j,G)=>o.jsx("span",{className:`cb-habit-dot${G<V?" done":""}`},G))}),o.jsxs("span",{className:"cb-habit-dots-label",children:[V,"/",E," today"]})]}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:j=>{ss(j),b("/client/leaderboard")},children:[o.jsxs("div",{className:"cb-card-content",children:[o.jsx("h3",{children:"Leaderboard"}),ee.length>0?o.jsx("div",{className:"cb-lb-preview",children:ee.map((j,G)=>{const Ne=["#FFD700","#A8B4C0","#CD7F32"][G],Re=j.name?j.name.split(" ").map(ut=>ut[0]).join("").slice(0,2).toUpperCase():"?",ze=j.id===t?.id;return o.jsxs("div",{className:`cb-lb-entry${ze?" cb-lb-me":""}`,children:[o.jsx("div",{className:"cb-lb-avatar",style:{borderColor:Ne},children:j.photoURL?o.jsx("img",{src:j.photoURL,alt:"",className:"cb-lb-avatar-img"}):o.jsx("span",{children:Re})}),o.jsxs("span",{className:"cb-lb-rank",style:{color:Ne},children:["#",G+1]})]},j.id)})}):o.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&o.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:j=>{ss(j),b("/client/core-buddy/buddies")},children:[o.jsxs("div",{className:"cb-card-content",children:[o.jsx("h3",{children:"Buddies"}),o.jsx("p",{children:"Connect with other members and track each other's progress"})]}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&o.jsxs("div",{className:"cb-journey-section",children:[o.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"journey-compose",children:[o.jsx("div",{className:"journey-compose-avatar",children:X?o.jsx("img",{src:X,alt:""}):o.jsx("span",{children:Oc(t?.name)})}),o.jsxs("div",{className:"journey-compose-body",style:{position:"relative"},children:[o.jsx("textarea",{ref:tn,placeholder:"Share your progress... (use @ to mention)",value:he,onChange:la,rows:1,maxLength:500}),pn&&_s==="compose"&&ns.length>0&&o.jsx("div",{className:"mention-dropdown",children:ns.map(j=>o.jsxs("button",{className:"mention-option",onClick:()=>Qn(j,"compose"),children:[o.jsx("div",{className:"mention-option-avatar",children:j.photoURL?o.jsx("img",{src:j.photoURL,alt:""}):o.jsx("span",{children:Oc(j.name)})}),o.jsx("span",{children:j.name})]},j.id))}),at&&o.jsxs("div",{className:"journey-image-preview",children:[o.jsx("img",{src:at,alt:"Preview"}),o.jsx("button",{className:"journey-image-remove",onClick:$t,"aria-label":"Remove image",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),o.jsxs("div",{className:"journey-compose-actions",children:[o.jsx("button",{className:"journey-image-btn",onClick:()=>Vn.current?.click(),"aria-label":"Add image",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),o.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),o.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),o.jsx("input",{ref:Vn,type:"file",accept:"image/*",onChange:Be,hidden:!0}),(he.trim()||At)&&o.jsx("button",{className:"journey-post-btn",onClick:Ge,disabled:St,children:St?o.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),ht?o.jsx("div",{className:"journey-loading",children:o.jsx("div",{className:"cb-spinner"})}):tt.length===0?o.jsxs("div",{className:"journey-empty",children:[o.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),o.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),o.jsx("path",{d:"M21 15l-5-5L5 21"})]}),o.jsx("p",{children:"Start sharing your fitness journey!"})]}):o.jsx("div",{className:"journey-list",children:tt.map(j=>o.jsxs("div",{id:`post-${j.id}`,className:"journey-post",children:[o.jsxs("div",{className:"journey-post-header",children:[o.jsx("div",{className:"journey-post-avatar",children:j.authorPhotoURL?o.jsx("img",{src:j.authorPhotoURL,alt:""}):o.jsx("span",{children:Oc(j.authorName)})}),o.jsxs("div",{className:"journey-post-meta",children:[o.jsx("span",{className:"journey-post-name",children:j.authorName}),o.jsx("span",{className:"journey-post-time",children:Dp(j.createdAt)})]}),o.jsx("button",{className:"journey-delete-btn",onClick:()=>$n(j.id),"aria-label":"Delete post",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),o.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),j.type==="workout_summary"&&j.metadata?o.jsxs("div",{className:"journey-card",children:[o.jsx("div",{className:"journey-card-logo-frame",children:o.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),o.jsx("h3",{className:"journey-card-title",children:j.metadata.title}),j.metadata.stats?.length>0&&o.jsx("p",{className:"journey-card-stats-line",children:j.metadata.stats.map(G=>`${G.value} ${G.label}`).join("    ")}),!j.metadata.stats?.length&&j.metadata.subtitle&&o.jsx("p",{className:"journey-card-stats-line",children:j.metadata.subtitle}),o.jsx("p",{className:"journey-card-cta",children:"I just completed a workout using Core Buddy "}),o.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):j.type==="badge_earned"&&j.metadata?o.jsxs("div",{className:"journey-card",children:[o.jsx("div",{className:"journey-card-logo-frame journey-card-logo-badge",children:o.jsx("img",{src:"/Logo.webp",alt:j.metadata.title,className:"journey-card-logo-img"})}),o.jsx("h3",{className:"journey-card-title",children:j.metadata.title}),j.metadata.badgeDesc&&o.jsx("p",{className:"journey-card-stats-line",children:j.metadata.badgeDesc}),o.jsx("p",{className:"journey-card-cta",children:"I just earned a badge on Core Buddy"}),o.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):j.type==="habits_summary"&&j.metadata?o.jsxs("div",{className:"journey-card",children:[o.jsx("div",{className:"journey-card-logo-frame",children:o.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),o.jsx("h3",{className:"journey-card-title",children:j.metadata.title}),j.metadata.stats?.length>0&&o.jsx("p",{className:"journey-card-stats-line",children:j.metadata.stats.map(G=>`${G.value} ${G.label}`).join("    ")}),j.metadata.subtitle&&o.jsx("p",{className:"journey-card-stats-line",children:j.metadata.subtitle}),o.jsx("p",{className:"journey-card-cta",children:"I just completed my daily habits with Core Buddy "}),o.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):o.jsxs(o.Fragment,{children:[j.content&&o.jsx("p",{className:"journey-post-content",children:Ht(j.content)}),j.imageURL&&o.jsx("div",{className:"journey-post-image",children:o.jsx("img",{src:j.imageURL,alt:"Post",loading:"lazy"})})]}),o.jsxs("div",{className:"journey-post-actions",children:[o.jsxs("button",{className:`journey-action-btn${js.has(j.id)?" liked":""}`,onClick:()=>is(j.id),children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:js.has(j.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),o.jsx("span",{children:j.likeCount||0})]}),o.jsxs("button",{className:`journey-action-btn${un.has(j.id)?" active":""}`,onClick:()=>as(j.id),children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),o.jsx("span",{children:j.commentCount||0})]})]}),un.has(j.id)&&o.jsxs("div",{className:"journey-comments",children:[Ce[j.id]?.length>0?Ce[j.id].map(G=>o.jsxs("div",{className:"journey-comment",children:[o.jsx("div",{className:"journey-comment-avatar",children:G.authorPhotoURL?o.jsx("img",{src:G.authorPhotoURL,alt:""}):o.jsx("span",{children:Oc(G.authorName)})}),o.jsxs("div",{className:"journey-comment-body",children:[o.jsxs("div",{className:"journey-comment-bubble",children:[o.jsx("span",{className:"journey-comment-name",children:G.authorName}),G.replyToName&&o.jsxs("span",{className:"journey-comment-reply-tag",children:[o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("polyline",{points:"9 14 4 9 9 4"}),o.jsx("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"})]}),G.replyToName]}),G.content&&o.jsx("span",{className:"journey-comment-text",children:Ht(G.content)}),G.imageURL&&o.jsx("img",{className:"journey-comment-image",src:G.imageURL,alt:"Comment",loading:"lazy"})]}),o.jsxs("div",{className:"journey-comment-actions-row",children:[o.jsx("span",{className:"journey-comment-time",children:Dp(G.createdAt)}),o.jsx("button",{className:"journey-comment-reply-btn",onClick:()=>Jt(Ne=>({...Ne,[j.id]:{id:G.id,authorName:G.authorName}})),children:"Reply"}),o.jsx("button",{className:"journey-comment-delete-btn",onClick:()=>oa(j.id,G.id),"aria-label":"Delete comment",children:o.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),o.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})]},G.id)):o.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),$e[j.id]&&o.jsxs("div",{className:"journey-comment-replying",children:[o.jsxs("span",{children:["Replying to ",o.jsx("strong",{children:$e[j.id].authorName})]}),o.jsx("button",{onClick:()=>Jt(G=>({...G,[j.id]:null})),"aria-label":"Cancel reply",children:o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),jn[j.id]&&o.jsxs("div",{className:"journey-comment-img-preview",children:[o.jsx("img",{src:jn[j.id],alt:"Preview"}),o.jsx("button",{onClick:()=>Ir(j.id),"aria-label":"Remove image",children:o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),o.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[o.jsx("button",{className:"journey-comment-img-btn",onClick:()=>Mn.current[j.id]?.click(),"aria-label":"Add image",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),o.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),o.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),o.jsx("input",{ref:G=>{Mn.current[j.id]=G},type:"file",accept:"image/*",onChange:G=>Ni(j.id,G),hidden:!0}),o.jsx("input",{type:"text",placeholder:"Comment",value:_t[j.id]||"",onChange:G=>Dr(j.id,G.target.value),onKeyDown:G=>{G.key==="Enter"&&Xs(j.id)},maxLength:300}),pn&&_s===j.id&&ns.length>0&&o.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:ns.map(G=>o.jsxs("button",{className:"mention-option",onClick:()=>Qn(G,j.id),children:[o.jsx("div",{className:"mention-option-avatar",children:G.photoURL?o.jsx("img",{src:G.photoURL,alt:""}):o.jsx("span",{children:Oc(G.name)})}),o.jsx("span",{children:G.name})]},G.id))}),o.jsx("button",{onClick:()=>Xs(j.id),disabled:!(_t[j.id]||"").trim()&&!qt[j.id]||He[j.id],children:He[j.id]?o.jsx("div",{className:"journey-btn-spinner-sm"}):o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),o.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},j.id))})]})]}),!g&&o.jsxs("button",{className:"cb-upgrade-cta",onClick:()=>b("/upgrade"),children:[o.jsx("span",{className:"cb-upgrade-cta-text",children:"Unlock the full experience"}),o.jsx("span",{className:"cb-upgrade-cta-sub",children:"Unlimited workout times, nutrition, buddies & more"}),o.jsxs("svg",{className:"cb-upgrade-cta-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M5 12h14"}),o.jsx("path",{d:"M12 5l7 7-7 7"})]})]})]})]}),o.jsx(sa,{active:"home"}),Sn&&o.jsxs("div",{className:`toast-notification ${Sn.type}`,children:[Sn.type==="info"&&o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Sn.message]}),o.jsx(qM,{steps:Rr,active:rr,onFinish:Kr})]})})}const Mp=new Map;function ti(){return new Date().toISOString().split("T")[0]}const u_=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],GM={breakfast:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function KM(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function YM(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Ci(),{isDark:l,toggleTheme:u,accent:h}=Fo(),p=Nr(),[g,y]=w.useState("loading"),[b,E]=w.useState(null),[T,M]=w.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[q,H]=w.useState(null),[U,ae]=w.useState(ti()),[$,ie]=w.useState({entries:[]}),[de,_e]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[ve,N]=w.useState(!1),[S,D]=w.useState(()=>{const R=new Date;return{year:R.getFullYear(),month:R.getMonth()}}),[V,O]=w.useState(!1),[I,A]=w.useState(()=>{const R=new Date;return{year:R.getFullYear(),month:R.getMonth()}}),[Me,Ze]=w.useState(!1),[Q,Te]=w.useState(KM),[Ie,qe]=w.useState(null),[ee,L]=w.useState(null),[X,xe]=w.useState(!1),[ke,Ee]=w.useState(null),[be,Ke]=w.useState(""),[ct,Ve]=w.useState(!1),[sn,Sn]=w.useState(""),[Hn,Ut]=w.useState([]),[tt,bt]=w.useState(!1),[ht,Dn]=w.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[he,pt]=w.useState(null),[At,Ot]=w.useState("100"),[at,dt]=w.useState(0),[St,Vt]=w.useState("weight"),[js,bs]=w.useState(0),[un,J]=w.useState(null);w.useRef(null);const Ce=w.useRef(!1),wt=w.useRef(null),_t=w.useRef(null),ot=w.useRef(null),He=w.useCallback((R,z="info")=>{J({message:R,type:z}),setTimeout(()=>J(null),3e3)},[]);w.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const z=await mr(nt(Se,"nutritionTargets",t.id));z.exists()?(E(z.data()),y("dashboard")):y("setup")}catch(z){console.error("Error loading nutrition data:",z),y("setup")}})()},[t?.id]),w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const z=await mr(nt(Se,"nutritionLogs",`${t.id}_${U}`));if(z.exists()){const re=z.data();ie({entries:re.entries||[]})}else ie({entries:[]})}catch(z){console.error("Error loading log:",z),ie({entries:[]})}})()},[t?.id,U]),w.useEffect(()=>{const R=$.entries.reduce((z,re)=>({protein:z.protein+(re.protein||0),carbs:z.carbs+(re.carbs||0),fats:z.fats+(re.fats||0),calories:z.calories+(re.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});_e(R)},[$.entries]);const st=async R=>{try{await zs(nt(Se,"nutritionLogs",`${t.id}_${U}`),{clientId:t.id,date:U,entries:R.entries,updatedAt:Qt.now()})}catch(z){console.error("Error saving nutrition log:",z)}},$e=U===ti(),Jt=(R,z)=>new Date(R,z+1,0).getDate(),qt=(R,z)=>new Date(R,z,1).getDay(),Gn=R=>{if(R===ti())return"Today";const z=new Date(R+"T12:00:00"),re=new Date;return re.setDate(re.getDate()-1),R===re.toISOString().split("T")[0]?"Yesterday":z.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})},jn=["January","February","March","April","May","June","July","August","September","October","November","December"],Kn=["Su","Mo","Tu","We","Th","Fr","Sa"],tn=()=>{let R=parseFloat(T.weight);T.weightUnit==="lbs"&&(R*=.453592);let z;T.heightUnit==="cm"?z=parseFloat(T.height):z=(parseFloat(T.heightFeet)||0)*30.48+(parseFloat(T.heightInches)||0)*2.54;const re=parseInt(T.age);let oe=T.gender==="male"?10*R+6.25*z-5*re+5:10*R+6.25*z-5*re-161;const Pe=oe*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[T.dailyActivity],Be={low:100,moderate:200,high:300,daily:400},$t=Math.round(Pe+Be[T.trainingFrequency]);let Ge=$t,$n,is;switch(T.goal){case"lose":Ge=$t*(1-{light:.15,moderate:.2,harsh:.25}[T.deficitLevel]),$n=2.2,is=.3;break;case"build":Ge=$t*1.1,$n=2,is=.22;break;default:$n=1.8,is=.25}Ge=Math.max(Ge,T.gender==="male"?1400:1100);const qs=Math.round(R*$n),as=Math.round(Ge*is/9),Xs=Math.max(0,Math.round((Ge-qs*4-as*9)/4));H({calories:Math.round(Ge),protein:qs,carbs:Xs,fats:as,bmr:Math.round(oe),neat:Math.round(Pe),exerciseAdd:Be[T.trainingFrequency],tdee:Math.round($t)})},Vn=async()=>{if(q)try{const R={clientId:t.id,calories:q.calories,protein:q.protein,carbs:q.carbs,fats:q.fats,goal:T.goal,updatedAt:Qt.now()};await zs(nt(Se,"nutritionTargets",t.id),R),E(R),y("dashboard"),He("Macro targets saved!","success")}catch(R){console.error("Error saving targets:",R),He("Failed to save targets. Please try again.","error")}},Mn=()=>{const R=T.weight&&parseFloat(T.weight)>0,z=T.age&&parseInt(T.age)>0,re=T.heightUnit==="cm"?T.height&&parseFloat(T.height)>0:T.heightFeet&&parseFloat(T.heightFeet)>0||T.heightInches&&parseFloat(T.heightInches)>0;return R&&z&&re},rn="nut_favourite_foods",Qs=()=>{try{return JSON.parse(localStorage.getItem(rn)||"[]")}catch{return[]}};w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const z=await mr(nt(Se,"favouriteFoods",t.id));if(z.exists()){const re=z.data().items||[];localStorage.setItem(rn,JSON.stringify(re)),bs(oe=>oe+1)}else{const re=Qs();re.length>0&&await zs(nt(Se,"favouriteFoods",t.id),{items:re,updatedAt:Qt.now()})}}catch(z){console.error("Error loading favourites:",z)}})()},[t?.id]);const le=R=>Qs().some(z=>z.name.toLowerCase()===(R||"").toLowerCase()),Ae=R=>{const z=Qs(),re=z.findIndex(oe=>oe.name.toLowerCase()===R.name.toLowerCase());re>=0?z.splice(re,1):z.unshift({name:R.name,protein:R.protein,carbs:R.carbs,fats:R.fats,calories:R.calories,serving:R.serving,per100g:R.per100g||null,servingUnit:R.servingUnit||"g",portion:R.portion||null}),localStorage.setItem(rn,JSON.stringify(z)),t?.id&&zs(nt(Se,"favouriteFoods",t.id),{items:z,updatedAt:Qt.now()}).catch(oe=>console.error("Error saving favourites:",oe)),bs(oe=>oe+1)},Ye=R=>{const z=[...$.entries,{...R,meal:Q,id:Date.now(),addedAt:new Date().toISOString()}],re={...$,entries:z};ie(re),st(re),L(null),pt(null),Ot("100"),dt(0),Vt("weight"),Dn({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),He("Food added!","success")},gt=R=>{const z=$.entries.filter(oe=>oe.id!==R),re={...$,entries:z};ie(re),st(re)},lt=async R=>{if(!(!t?.id||R===U)){Ze(!0);try{const z=await mr(nt(Se,"nutritionLogs",`${t.id}_${R}`));if(!z.exists()||!z.data().entries?.length){He("No food logged on that day","error");return}const re=z.data().entries.map(Pe=>({...Pe,id:Date.now()+Math.random(),addedAt:new Date().toISOString()})),oe=[...$.entries,...re],Oe={...$,entries:oe};ie(Oe),st(Oe),O(!1),He(`Copied ${re.length} items from ${Gn(R)}`,"success")}catch(z){console.error("Error copying day:",z),He("Failed to copy day","error")}finally{Ze(!1)}}},hn=w.useRef(null),Un=w.useRef([]),pn=3,gn=5,_s=async()=>{xe(!0);const R=document.querySelector("#barcode-reader");if(!R){xe(!1),He("Scanner container not found.","error");return}if(!hn.current)try{const re=await Ys(()=>import("./quagga.min-BbicSfvA.js").then(oe=>oe.q),[]);hn.current=re.default}catch(re){console.error("Failed to load barcode scanner:",re),xe(!1),He("Could not load scanner.","error");return}const z=hn.current;z.init({inputStream:{type:"LiveStream",target:R,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},re=>{if(re){console.error("Quagga init error:",re),xe(!1),He("Could not access camera. Check permissions.","error");return}z.start(),Ce.current=!0}),Un.current=[],z.onDetected(re=>{const oe=re.codeResult.decodedCodes?.filter(Pe=>Pe.error!==void 0)?.map(Pe=>Pe.error)||[];if((oe.length>0?oe.reduce((Pe,Be)=>Pe+Be,0)/oe.length:1)<.15){const Pe=re.codeResult.code,Be=Un.current;Be.push(Pe),Be.length>gn&&Be.shift(),Be.filter(Ge=>Ge===Pe).length>=pn&&(z.offDetected(),Un.current=[],Ee(Pe))}})},ws=()=>{const R=hn.current;Ce.current&&R&&(R.stop(),R.offDetected(),Ce.current=!1),xe(!1)},ns=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,dn=R=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((R||"").replace(/\s/g,"")),Cn=R=>{if(!R)return{value:100,unit:"g"};const z=R.toLowerCase().replace(/\s/g,""),re=z.match(/([\d.]+)/),oe=re?parseFloat(re[1]):100;return dn(R)?/cl/.test(z)?{value:oe*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(z)&&!/ml/.test(z)?{value:oe*1e3,unit:"ml"}:{value:oe,unit:"ml"}:{value:oe,unit:"g"}},Cs=R=>{if(dn(R.serving_size)||dn(R.quantity))return"ml";const z=R.product_name||R.product_name_en||"";return ns.test(z)?"ml":"g"},rr=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],li=(R,z)=>{const re=R||"",oe=re.match(/\((\d+\.?\d*)\s*g\)/i),Oe=re.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(oe&&Oe){const $t=parseFloat(oe[1]);let Ge=Oe[1].replace(/^\d+\s*/,"").trim();if(Ge&&$t>0)return{label:Ge,weight:$t}}const Pe=re.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Pe){const $t=parseFloat(Pe[1]);let Ge=Pe[2].replace(/^\d+\s*/,"").trim();if(Ge&&$t>0)return{label:Ge,weight:$t}}const Be=z||"";for(const{pattern:$t,label:Ge,weight:$n}of rr)if($t.test(Be))return{label:Ge,weight:$n};return null},Ar=R=>{const z=R.nutriments||{},re=Cs(R),oe=Cn(R.serving_size),Oe=re==="ml"?oe.unit==="ml"?oe.value:100:oe.value,Pe=R.product_name||R.product_name_en||"Unknown Product",Be=li(R.serving_size,Pe);return{name:Pe,brand:R.brands||"",image:R.image_small_url||R.image_url||null,servingSize:R.serving_size||"100g",servingValue:Oe,servingUnit:re,portion:Be,protein:Math.round(z.proteins_100g||z.proteins||0),carbs:Math.round(z.carbohydrates_100g||z.carbohydrates||0),fats:Math.round(z.fat_100g||z.fat||0),calories:Math.round(z["energy-kcal_100g"]||z["energy-kcal"]||(z.energy_100g?z.energy_100g/4.184:0)),per100g:!0}},Rr=async R=>{Ve(!0);try{const z=`https://world.openfoodfacts.org/api/v2/product/${R}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,re=await fetch(z);if(!re.ok)throw new Error(`HTTP ${re.status}`);const oe=await re.json();if(oe.status==="success"||oe.status===1||oe.product){const Oe=Ar(oe.product);Oe.calories===0&&Oe.protein===0&&Oe.carbs===0?He("Product found but no nutrition data available.","error"):(pt(Oe),Oe.portion?(dt(1),Ot(String(Oe.portion.weight)),Vt("portion")):(dt(0),Ot(String(Oe.servingValue||100)),Vt("weight")),Ke(""))}else He("Product not found. Try search or manual entry.","error")}catch(z){console.error("Barcode lookup error:",z),He("Failed to look up product. Check your connection.","error")}Ve(!1)},xs=(R,z,re)=>{const oe=R.toLowerCase().trim(),Oe=z.toLowerCase().trim(),Pe=re.toLowerCase().trim();let Be=0;return(oe===Pe||oe===Pe+"s"||oe+"s"===Pe)&&(Be+=100),(oe.endsWith(" "+Pe)||oe.endsWith(" "+Pe+"s"))&&(Be+=40),(oe.startsWith(Pe+" ")||oe.startsWith(Pe+"s "))&&(Be+=15),Pe.split(/\s+/).some(Ge=>Oe===Ge||Oe.startsWith(Ge))&&(Be+=30),Be+=Math.max(0,30-oe.length),Be},Es=async()=>{if(!sn.trim())return;wt.current&&wt.current.abort();const R=new AbortController;wt.current=R;const z=sn.trim().toLowerCase(),re=z.split(/\s+/).filter(Boolean);if(Mp.has(z)){Ut(Mp.get(z));return}bt(!0);try{const Oe=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(sn.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Pe=await fetch(Oe,{signal:R.signal});if(!Pe.ok)throw new Error(`HTTP ${Pe.status}`);const $t=((await Pe.json()).products||[]).map(Ge=>Ar(Ge)).filter(Ge=>Ge.name!=="Unknown Product"&&(Ge.calories>0||Ge.protein>0)).filter(Ge=>{const $n=(Ge.name+" "+Ge.brand).toLowerCase();return re.every(is=>$n.includes(is))}).sort((Ge,$n)=>xs($n.name,$n.brand,z)-xs(Ge.name,Ge.brand,z)).slice(0,10);Mp.set(z,$t),Ut($t),$t.length===0&&He("No results found. Try a different search.","info")}catch(oe){if(oe.name==="AbortError")return;console.error("Search error:",oe),He("Search failed. Check your connection.","error")}bt(!1)};w.useEffect(()=>{if(_t.current&&clearTimeout(_t.current),!(!sn.trim()||ee!=="search"||he))return _t.current=setTimeout(()=>{Es()},700),()=>clearTimeout(_t.current)},[sn]);const Ts=l,Yn={"ring-protein":Ts?"#2dd4bf":"#14b8a6","ring-carbs":Ts?"#fbbf24":"#f59e0b","ring-fats":Ts?"#a78bfa":"#8b5cf6","ring-cals":"var(--color-primary)"},bn=80,Qn=2*Math.PI*bn,Ht=(R,z,re,oe,Oe)=>{const Pe=oe>0?Math.min(100,Math.round(re/oe*100)):0,Be=Qn-Pe/100*Qn,$t=Yn[Oe]||"#14b8a6";return o.jsxs("div",{className:"nut-ring-wrap",children:[o.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[o.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:bn}),o.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:bn,style:{stroke:$t},strokeDasharray:Qn,strokeDashoffset:Be})]}),o.jsxs("div",{className:"nut-ring-center",children:[o.jsx("span",{className:"nut-ring-value",style:{color:$t},children:Math.round(re)}),o.jsxs("span",{className:"nut-ring-target",children:["/ ",oe,R==="Calories"?"":"g"]}),o.jsx("span",{className:"nut-ring-label",style:{color:$t},children:z})]}),o.jsxs("span",{className:"nut-ring-pct",style:{color:$t},children:[Pe,"%"]})]})};if(w.useEffect(()=>{if(!ke)return;const R=setTimeout(()=>{const z=ke;ws(),Ee(null),Rr(z)},1500);return()=>clearTimeout(R)},[ke]),w.useEffect(()=>()=>{const R=hn.current;if(Ce.current&&R){try{R.stop(),R.offDetected()}catch{}Ce.current=!1}},[]),i||g==="loading")return o.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),o.jsx("div",{className:"nut-loading-inline",children:o.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return o.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),o.jsxs("main",{className:"nut-main",children:[o.jsxs("div",{className:"nut-setup-intro",children:[o.jsx("h2",{children:"Set Your Daily Targets"}),o.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),o.jsxs("div",{className:"nut-calc-form",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Gender"}),o.jsxs("div",{className:"nut-toggle-group",children:[o.jsx("button",{className:T.gender==="male"?"active":"",onClick:()=>{M(R=>({...R,gender:"male"})),H(null)},children:"Male"}),o.jsx("button",{className:T.gender==="female"?"active":"",onClick:()=>{M(R=>({...R,gender:"female"})),H(null)},children:"Female"})]})]}),o.jsxs("div",{className:"nut-form-row",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Age"}),o.jsx("input",{type:"number",value:T.age,onChange:R=>{M(z=>({...z,age:R.target.value})),H(null)},placeholder:"Years",min:"15",max:"100"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Weight"}),o.jsxs("div",{className:"nut-input-unit",children:[o.jsx("input",{type:"number",value:T.weight,onChange:R=>{M(z=>({...z,weight:R.target.value})),H(null)},placeholder:T.weightUnit,min:"30",max:"300"}),o.jsxs("div",{className:"nut-unit-toggle",children:[o.jsx("button",{className:T.weightUnit==="kg"?"active":"",onClick:()=>{M(R=>({...R,weightUnit:"kg"})),H(null)},children:"kg"}),o.jsx("button",{className:T.weightUnit==="lbs"?"active":"",onClick:()=>{M(R=>({...R,weightUnit:"lbs"})),H(null)},children:"lbs"})]})]})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Height"}),o.jsxs("div",{className:"nut-input-unit",children:[T.heightUnit==="cm"?o.jsx("input",{type:"number",value:T.height,onChange:R=>{M(z=>({...z,height:R.target.value})),H(null)},placeholder:"cm",min:"100",max:"250"}):o.jsxs("div",{className:"nut-height-imperial",children:[o.jsx("input",{type:"number",value:T.heightFeet,onChange:R=>{M(z=>({...z,heightFeet:R.target.value})),H(null)},placeholder:"ft",min:"4",max:"7"}),o.jsx("input",{type:"number",value:T.heightInches,onChange:R=>{M(z=>({...z,heightInches:R.target.value})),H(null)},placeholder:"in",min:"0",max:"11"})]}),o.jsxs("div",{className:"nut-unit-toggle",children:[o.jsx("button",{className:T.heightUnit==="cm"?"active":"",onClick:()=>{M(R=>({...R,heightUnit:"cm"})),H(null)},children:"cm"}),o.jsx("button",{className:T.heightUnit==="ft"?"active":"",onClick:()=>{M(R=>({...R,heightUnit:"ft"})),H(null)},children:"ft/in"})]})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Daily Activity (outside of training)"}),o.jsxs("select",{value:T.dailyActivity,onChange:R=>{M(z=>({...z,dailyActivity:R.target.value})),H(null)},children:[o.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),o.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),o.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),o.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Training Sessions per Week"}),o.jsxs("select",{value:T.trainingFrequency,onChange:R=>{M(z=>({...z,trainingFrequency:R.target.value})),H(null)},children:[o.jsx("option",{value:"low",children:"1-2 sessions"}),o.jsx("option",{value:"moderate",children:"3-4 sessions"}),o.jsx("option",{value:"high",children:"5-6 sessions"}),o.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Fitness Goal"}),o.jsxs("div",{className:"nut-goal-options",children:[o.jsxs("button",{className:T.goal==="lose"?"active":"",onClick:()=>{M(R=>({...R,goal:"lose"})),H(null)},children:[o.jsx("span",{className:"nut-goal-icon",children:"-"}),o.jsx("span",{children:"Lose Weight"})]}),o.jsxs("button",{className:T.goal==="maintain"?"active":"",onClick:()=>{M(R=>({...R,goal:"maintain"})),H(null)},children:[o.jsx("span",{className:"nut-goal-icon",children:"="}),o.jsx("span",{children:"Maintain"})]}),o.jsxs("button",{className:T.goal==="build"?"active":"",onClick:()=>{M(R=>({...R,goal:"build"})),H(null)},children:[o.jsx("span",{className:"nut-goal-icon",children:"+"}),o.jsx("span",{children:"Build Muscle"})]})]})]}),T.goal==="lose"&&o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Deficit Level"}),o.jsxs("div",{className:"nut-deficit-options",children:[o.jsxs("button",{className:T.deficitLevel==="light"?"active":"",onClick:()=>{M(R=>({...R,deficitLevel:"light"})),H(null)},children:[o.jsx("strong",{children:"Mild"}),o.jsx("span",{children:"15% below TDEE"})]}),o.jsxs("button",{className:T.deficitLevel==="moderate"?"active":"",onClick:()=>{M(R=>({...R,deficitLevel:"moderate"})),H(null)},children:[o.jsx("strong",{children:"Moderate"}),o.jsx("span",{children:"20% below TDEE"})]}),o.jsxs("button",{className:T.deficitLevel==="harsh"?"active":"",onClick:()=>{M(R=>({...R,deficitLevel:"harsh"})),H(null)},children:[o.jsx("strong",{children:"Aggressive"}),o.jsx("span",{children:"25% below TDEE"})]})]})]}),o.jsx("button",{className:"nut-calc-btn",onClick:tn,disabled:!Mn(),children:"Calculate Macros"})]}),q&&o.jsxs("div",{className:"nut-calc-results",children:[o.jsx("h3",{children:"Your Daily Targets"}),o.jsxs("div",{className:"nut-calc-rings",children:[Ht("Protein","Protein",q.protein,q.protein,"ring-protein"),Ht("Carbs","Carbs",q.carbs,q.carbs,"ring-carbs"),Ht("Fats","Fats",q.fats,q.fats,"ring-fats"),Ht("Calories","Calories",q.calories,q.calories,"ring-cals")]}),o.jsxs("div",{className:"nut-calc-info",children:[o.jsxs("div",{className:"nut-calc-info-row",children:[o.jsx("span",{children:"BMR (body at rest)"}),o.jsxs("span",{children:[q.bmr," cal"]})]}),o.jsxs("div",{className:"nut-calc-info-row",children:[o.jsx("span",{children:"+ Daily activity (NEAT)"}),o.jsxs("span",{children:[q.neat," cal"]})]}),o.jsxs("div",{className:"nut-calc-info-row",children:[o.jsx("span",{children:"+ Training sessions"}),o.jsxs("span",{children:["+",q.exerciseAdd," cal"]})]}),o.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[o.jsx("span",{children:"TDEE (total burn)"}),o.jsxs("span",{children:[q.tdee," cal"]})]})]}),o.jsx("button",{className:"nut-save-targets-btn",onClick:Vn,children:"Set as My Daily Targets"})]})]}),un&&o.jsx("div",{className:`toast-notification ${un.type}`,children:un.message})]});const pr=R=>{const z=new Date(R+"T12:00:00"),re=z.getDay(),oe=new Date(z);oe.setDate(z.getDate()-(re+6)%7);const Oe=[];for(let Pe=0;Pe<7;Pe++){const Be=new Date(oe);Be.setDate(oe.getDate()+Pe),Oe.push(Be.toISOString().split("T")[0])}return Oe},Kr=["M","T","W","T","F","S","S"],hs=(R,z="search")=>{Te(R),z==="scan"?(L("scan"),pt(null)):z==="manual"?(L("manual"),Dn({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):z==="favourites"?L("favourites"):(L("search"),Ut([]),Sn(""))},ss=pr(U),rs=new Date(U+"T12:00:00"),Yr=`${jn[rs.getMonth()]} ${rs.getFullYear()}`;return o.jsx(qo,{children:o.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsxs("div",{className:"nut-dark-zone",children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsxs("div",{className:"header-actions",children:[o.jsx("button",{onClick:()=>{y("setup"),H(null)},"aria-label":"Recalculate macros",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),o.jsxs("div",{className:"nut-dark-content",children:[o.jsxs("div",{className:"nut-week-strip anim-fade-up",children:[o.jsxs("div",{className:"nut-week-header",children:[o.jsx("button",{className:"nut-week-arrow",onClick:()=>{const R=new Date(U+"T12:00:00");R.setDate(R.getDate()-7);const z=R.toISOString().split("T")[0];ae(z)},"aria-label":"Previous week",children:o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:o.jsx("polyline",{points:"15 18 9 12 15 6"})})}),o.jsx("button",{className:"nut-week-month-label",onClick:()=>{N(!ve),D({year:rs.getFullYear(),month:rs.getMonth()})},children:Yr}),o.jsx("button",{className:"nut-week-arrow",onClick:()=>{const R=new Date(U+"T12:00:00");R.setDate(R.getDate()+7);const z=R.toISOString().split("T")[0];z<=ti()&&ae(z)},"aria-label":"Next week",disabled:ss[6]>=ti(),children:o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:o.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),o.jsx("div",{className:"nut-week-days",children:ss.map((R,z)=>{const re=new Date(R+"T12:00:00").getDate(),oe=R===U,Oe=R>ti(),Pe=R===ti();return o.jsxs("button",{className:`nut-week-day${oe?" selected":""}${Pe?" today":""}${Oe?" future":""}`,disabled:Oe,onClick:()=>ae(R),children:[o.jsx("span",{className:"nut-week-day-letter",children:Kr[z]}),o.jsx("span",{className:"nut-week-day-num",children:re})]},R)})})]}),ve&&o.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[o.jsxs("div",{className:"nut-cal-header",children:[o.jsx("button",{onClick:()=>D(R=>{let z=R.month-1,re=R.year;return z<0&&(z=11,re--),{year:re,month:z}}),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"15 18 9 12 15 6"})})}),o.jsxs("span",{children:[jn[S.month]," ",S.year]}),o.jsx("button",{onClick:()=>D(R=>{let z=R.month+1,re=R.year;return z>11&&(z=0,re++),{year:re,month:z}}),disabled:S.year===new Date().getFullYear()&&S.month>=new Date().getMonth(),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),o.jsx("div",{className:"nut-cal-days-header",children:Kn.map(R=>o.jsx("span",{children:R},R))}),o.jsxs("div",{className:"nut-cal-grid",children:[[...Array(qt(S.year,S.month))].map((R,z)=>o.jsx("span",{},`e${z}`)),[...Array(Jt(S.year,S.month))].map((R,z)=>{const re=z+1,oe=`${S.year}-${String(S.month+1).padStart(2,"0")}-${String(re).padStart(2,"0")}`,Oe=oe>ti(),Pe=oe===U,Be=oe===ti();return o.jsx("button",{className:`nut-cal-day${Pe?" selected":""}${Be?" today":""}${Oe?" future":""}`,disabled:Oe,onClick:()=>{ae(oe),N(!1)},children:re},re)})]})]}),o.jsxs("div",{className:"nut-rings-row anim-fade-up-d2",children:[Ht("Protein","Protein",de.protein,b.protein,"ring-protein"),Ht("Carbs","Carbs",de.carbs,b.carbs,"ring-carbs"),Ht("Fats","Fats",de.fats,b.fats,"ring-fats"),Ht("Calories","kCal",de.calories,b.calories,"ring-cals")]})]})]}),o.jsx("div",{className:"nut-light-zone anim-fade-up-d4",children:o.jsxs("div",{className:"nut-light-content",children:[$e&&o.jsx("div",{className:"nut-quick-row",children:o.jsxs("button",{className:"nut-copy-day-btn",onClick:()=>{O(!0),A({year:new Date().getFullYear(),month:new Date().getMonth()})},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),o.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),o.jsx("span",{children:"Copy day"})]})}),o.jsx("div",{className:"nut-log-section",children:o.jsx("div",{className:"nut-meals-list",children:u_.map(R=>{const z=$.entries.filter(oe=>(oe.meal||"snacks")===R.key),re=z.reduce((oe,Oe)=>({protein:oe.protein+(Oe.protein||0),carbs:oe.carbs+(Oe.carbs||0),fats:oe.fats+(Oe.fats||0),calories:oe.calories+(Oe.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return o.jsxs("div",{className:"nut-meal-card",children:[o.jsxs("div",{className:"nut-meal-card-header",children:[o.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${R.key}`,children:GM[R.key]}),o.jsx("span",{className:"nut-meal-card-title",children:R.label}),z.length>0&&o.jsxs("span",{className:"nut-meal-card-cal",children:[re.calories," cal"]}),$e&&o.jsx("button",{className:"nut-meal-add-btn",onClick:()=>qe(Ie===R.key?null:R.key),"aria-label":`Add to ${R.label}`,children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),z.length>0&&o.jsxs("div",{className:"nut-meal-bars",children:[o.jsxs("div",{className:"nut-meal-bar-row",children:[o.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),o.jsx("div",{className:"nut-meal-bar-track",children:o.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,b.protein>0?re.protein/b.protein*100:0)}%`}})}),o.jsxs("span",{className:"nut-meal-bar-val",children:[re.protein,"g"]})]}),o.jsxs("div",{className:"nut-meal-bar-row",children:[o.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),o.jsx("div",{className:"nut-meal-bar-track",children:o.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,b.carbs>0?re.carbs/b.carbs*100:0)}%`}})}),o.jsxs("span",{className:"nut-meal-bar-val",children:[re.carbs,"g"]})]}),o.jsxs("div",{className:"nut-meal-bar-row",children:[o.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),o.jsx("div",{className:"nut-meal-bar-track",children:o.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,b.fats>0?re.fats/b.fats*100:0)}%`}})}),o.jsxs("span",{className:"nut-meal-bar-val",children:[re.fats,"g"]})]}),o.jsxs("div",{className:"nut-meal-bar-row",children:[o.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),o.jsx("div",{className:"nut-meal-bar-track",children:o.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,b.calories>0?re.calories/b.calories*100:0)}%`}})}),o.jsx("span",{className:"nut-meal-bar-val",children:re.calories})]})]}),z.length>0&&o.jsx("div",{className:"nut-log-list",children:z.map(oe=>o.jsxs("div",{className:"nut-log-item",children:[o.jsx("button",{className:`nut-fav-star log${le(oe.name)?" active":""}`,onClick:()=>Ae(oe),"aria-label":le(oe.name)?"Remove from favourites":"Add to favourites",children:o.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:le(oe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),o.jsxs("div",{className:"nut-log-item-info",children:[o.jsx("span",{className:"nut-log-item-name",children:oe.name}),oe.serving&&o.jsx("span",{className:"nut-log-item-serving",children:oe.serving})]}),o.jsxs("div",{className:"nut-log-item-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[oe.protein,"p"]}),o.jsxs("span",{className:"nut-macro-c",children:[oe.carbs,"c"]}),o.jsxs("span",{className:"nut-macro-f",children:[oe.fats,"f"]}),o.jsx("span",{className:"nut-macro-cal",children:oe.calories})]}),$e&&o.jsx("button",{className:"nut-log-delete",onClick:()=>gt(oe.id),"aria-label":"Remove",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},oe.id))}),z.length===0&&o.jsx("div",{className:"nut-meal-empty",children:o.jsx("p",{children:$e?"Tap + to add food":"No entries"})})]},R.key)})})})]})}),Ie&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>qe(null)}),o.jsxs("div",{className:"nut-add-picker",children:[o.jsx("div",{className:"nut-add-picker-handle"}),o.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",u_.find(R=>R.key===Ie)?.label]}),o.jsxs("div",{className:"nut-add-picker-options",children:[o.jsxs("button",{onClick:()=>{const R=Ie;qe(null),hs(R,"scan")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),o.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),o.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),o.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),o.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),o.jsx("span",{children:"Scan Barcode"})]}),o.jsxs("button",{onClick:()=>{const R=Ie;qe(null),hs(R,"search")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("span",{children:"Search Food"})]}),o.jsxs("button",{onClick:()=>{const R=Ie;qe(null),hs(R,"manual")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),o.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),o.jsx("span",{children:"Manual Entry"})]}),o.jsxs("button",{onClick:()=>{const R=Ie;qe(null),hs(R,"favourites")},children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),o.jsx("span",{children:"Favourites"})]})]})]})]}),V&&o.jsx("div",{className:"nut-modal-overlay",onClick:()=>O(!1),children:o.jsxs("div",{className:"nut-copy-from-popup",onClick:R=>R.stopPropagation(),children:[o.jsxs("div",{className:"nut-copy-from-header",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),o.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),o.jsx("span",{children:"Copy from..."}),o.jsx("button",{className:"nut-modal-close",onClick:()=>O(!1),children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),o.jsx("p",{className:"nut-copy-from-hint",children:"Pick a day to copy its food log into today"}),o.jsxs("div",{className:"nut-cal-header",children:[o.jsx("button",{onClick:()=>A(R=>{let z=R.month-1,re=R.year;return z<0&&(z=11,re--),{year:re,month:z}}),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"15 18 9 12 15 6"})})}),o.jsxs("span",{children:[jn[I.month]," ",I.year]}),o.jsx("button",{onClick:()=>A(R=>{let z=R.month+1,re=R.year;return z>11&&(z=0,re++),{year:re,month:z}}),disabled:I.year===new Date().getFullYear()&&I.month>=new Date().getMonth(),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),o.jsx("div",{className:"nut-cal-days-header",children:Kn.map(R=>o.jsx("span",{children:R},R))}),o.jsxs("div",{className:"nut-cal-grid",children:[[...Array(qt(I.year,I.month))].map((R,z)=>o.jsx("span",{},`e${z}`)),[...Array(Jt(I.year,I.month))].map((R,z)=>{const re=z+1,oe=`${I.year}-${String(I.month+1).padStart(2,"0")}-${String(re).padStart(2,"0")}`,Oe=oe>ti(),Pe=oe===U,Be=oe===ti(),$t=Oe||Pe;return o.jsx("button",{className:`nut-cal-day${Pe?" selected":""}${Be?" today":""}${Oe?" future":""}`,disabled:$t,onClick:()=>lt(oe),children:re},re)})]}),Me&&o.jsxs("div",{className:"nut-copy-from-loading",children:[o.jsx("div",{className:"wk-loading-spinner"}),o.jsx("span",{children:"Copying..."})]})]})}),ee&&o.jsx("div",{className:"nut-modal-overlay",onClick:()=>{ws(),Ee(null),L(null),pt(null)},children:o.jsxs("div",{className:"nut-modal",onClick:R=>R.stopPropagation(),children:[o.jsxs("div",{className:"nut-modal-header",children:[o.jsx("h3",{children:ee==="scan"?"Scan Barcode":ee==="search"?"Search Food":ee==="favourites"?"Favourites":"Manual Entry"}),o.jsx("button",{className:"nut-modal-close",onClick:()=>{ws(),Ee(null),L(null),pt(null)},children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),ee==="scan"&&!he&&o.jsxs("div",{className:"nut-scan-area",children:[o.jsxs("div",{className:"nut-scanner-wrapper",children:[o.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),X&&!ke&&o.jsx("div",{className:"nut-scan-line"}),ke&&o.jsxs("div",{className:"nut-scan-detected-overlay",children:[o.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M20 6L9 17l-5-5"})}),o.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),o.jsx("p",{className:"nut-scan-detected-code",children:ke})]})]}),!X&&o.jsxs("button",{className:"nut-scan-start-btn",onClick:_s,children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),o.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),o.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),o.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),o.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),X&&!ke&&o.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),o.jsx("div",{className:"nut-barcode-divider",children:o.jsx("span",{children:"or enter barcode manually"})}),o.jsxs("div",{className:"nut-barcode-manual",children:[o.jsx("input",{type:"text",inputMode:"numeric",value:be,onChange:R=>Ke(R.target.value),onKeyDown:R=>R.key==="Enter"&&be.trim()&&Rr(be.trim()),placeholder:"Enter barcode number"}),o.jsx("button",{onClick:()=>be.trim()&&Rr(be.trim()),disabled:!be.trim()||ct,children:ct?"...":"Look Up"})]})]}),ee==="scan"&&he&&(()=>{const R=he.servingUnit||"g",z=he.portion,re=St==="portion"&&z?at*z.weight:parseFloat(At)||0,oe=re/100,Oe=R==="ml"?[100,200,250,500]:[50,100,150,200],Pe=St==="portion"&&z?`${at} ${z.label}${at!==1?"s":""} (${Math.round(re)}${R})`:`${Math.round(re)}${R}`;return o.jsxs("div",{className:"nut-product-result",children:[he.image&&o.jsx("img",{src:he.image,alt:he.name||"Product",className:"nut-product-img",loading:"lazy"}),o.jsxs("div",{className:"nut-product-name-row",children:[o.jsx("h4",{children:he.name}),o.jsx("button",{className:`nut-fav-star confirm${le(he.name)?" active":""}`,onClick:()=>Ae({name:he.name,protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories,serving:he.servingSize,per100g:{protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories},servingUnit:he.servingUnit||"g",portion:he.portion||null}),children:o.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:le(he.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),he.brand&&o.jsx("p",{className:"nut-product-brand",children:he.brand}),o.jsxs("p",{className:"nut-product-per",children:["Per 100",R,":"]}),o.jsxs("div",{className:"nut-product-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[he.protein,"g P"]}),o.jsxs("span",{className:"nut-macro-c",children:[he.carbs,"g C"]}),o.jsxs("span",{className:"nut-macro-f",children:[he.fats,"g F"]}),o.jsxs("span",{className:"nut-macro-cal",children:[he.calories," cal"]})]}),z&&o.jsxs("div",{className:"nut-mode-toggle",children:[o.jsx("button",{className:St==="portion"?"active":"",onClick:()=>{Vt("portion"),at<1&&dt(1)},children:"Portions"}),o.jsxs("button",{className:St==="weight"?"active":"",onClick:()=>{Vt("weight"),Ot(String(Math.round(re)||100))},children:["Custom (",R,")"]})]}),St==="portion"&&z?o.jsxs("div",{className:"nut-portion-stepper",children:[o.jsx("button",{className:"nut-stepper-btn",onClick:()=>dt(Math.max(1,at-1)),children:"-"}),o.jsxs("div",{className:"nut-stepper-display",children:[o.jsx("span",{className:"nut-stepper-count",children:at}),o.jsxs("span",{className:"nut-stepper-label",children:[z.label,at!==1?"s":""]}),o.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),R]})]}),o.jsx("button",{className:"nut-stepper-btn",onClick:()=>dt(at+1),children:"+"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"nut-serving-adjust",children:[o.jsxs("label",{children:["Serving (",R,")"]}),o.jsx("input",{type:"number",inputMode:"numeric",value:At,onChange:Be=>Ot(Be.target.value),onFocus:Be=>Be.target.select(),min:"0"})]}),o.jsx("div",{className:"nut-quick-amounts",children:Oe.map(Be=>o.jsxs("button",{className:`nut-quick-btn${At===String(Be)?" active":""}`,onClick:()=>Ot(String(Be)),children:[Be,R]},Be))})]}),o.jsx("div",{className:"nut-product-total",children:o.jsxs("span",{children:["Total: ",Math.round(he.protein*oe),"p / ",Math.round(he.carbs*oe),"c / ",Math.round(he.fats*oe),"f / ",Math.round(he.calories*oe)," cal"]})}),o.jsxs("div",{className:"nut-product-actions",children:[o.jsx("button",{className:"nut-btn-secondary",onClick:()=>{pt(null),L("scan")},children:"Scan Again"}),o.jsx("button",{className:"nut-btn-primary",onClick:()=>Ye({name:he.name,protein:Math.round(he.protein*oe),carbs:Math.round(he.carbs*oe),fats:Math.round(he.fats*oe),calories:Math.round(he.calories*oe),serving:Pe}),children:"Add"})]})]})})(),ee==="search"&&!he&&o.jsxs("div",{className:"nut-search-area",children:[o.jsxs("div",{className:"nut-search-bar",children:[o.jsx("input",{type:"text",ref:ot,value:sn,onChange:R=>Sn(R.target.value),onKeyDown:R=>{R.key==="Enter"&&(clearTimeout(_t.current),Es())},onFocus:()=>setTimeout(()=>ot.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),o.jsx("button",{onClick:Es,disabled:tt,children:tt?"...":"Search"})]}),o.jsxs("div",{className:"nut-search-results",children:[Hn.map((R,z)=>o.jsxs("button",{className:"nut-search-item",onClick:()=>{pt(R),R.portion?(dt(1),Ot(String(R.portion.weight)),Vt("portion")):(dt(0),Ot(String(R.servingValue||100)),Vt("weight"))},children:[R.image&&o.jsx("img",{src:R.image,alt:R.name||"Product",loading:"lazy"}),o.jsxs("div",{className:"nut-search-item-info",children:[o.jsx("span",{className:"nut-search-item-name",children:R.name}),R.brand&&o.jsx("span",{className:"nut-search-item-brand",children:R.brand}),o.jsxs("span",{className:"nut-search-item-macros",children:[R.calories," cal  ",R.protein,"p  ",R.carbs,"c  ",R.fats,"f per 100",R.servingUnit||"g"]})]})]},z)),Hn.length===0&&sn&&!tt&&o.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),ee==="search"&&he&&(()=>{const R=he.servingUnit||"g",z=he.portion,re=St==="portion"&&z?at*z.weight:parseFloat(At)||0,oe=re/100,Oe=R==="ml"?[100,200,250,500]:[50,100,150,200],Pe=St==="portion"&&z?`${at} ${z.label}${at!==1?"s":""} (${Math.round(re)}${R})`:`${Math.round(re)}${R}`;return o.jsxs("div",{className:"nut-product-result",children:[he.image&&o.jsx("img",{src:he.image,alt:he.name||"Product",className:"nut-product-img",loading:"lazy"}),o.jsxs("div",{className:"nut-product-name-row",children:[o.jsx("h4",{children:he.name}),o.jsx("button",{className:`nut-fav-star confirm${le(he.name)?" active":""}`,onClick:()=>Ae({name:he.name,protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories,serving:he.servingSize,per100g:{protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories},servingUnit:he.servingUnit||"g",portion:he.portion||null}),children:o.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:le(he.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),he.brand&&o.jsx("p",{className:"nut-product-brand",children:he.brand}),o.jsxs("p",{className:"nut-product-per",children:["Per 100",R,":"]}),o.jsxs("div",{className:"nut-product-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[he.protein,"g P"]}),o.jsxs("span",{className:"nut-macro-c",children:[he.carbs,"g C"]}),o.jsxs("span",{className:"nut-macro-f",children:[he.fats,"g F"]}),o.jsxs("span",{className:"nut-macro-cal",children:[he.calories," cal"]})]}),z&&o.jsxs("div",{className:"nut-mode-toggle",children:[o.jsx("button",{className:St==="portion"?"active":"",onClick:()=>{Vt("portion"),at<1&&dt(1)},children:"Portions"}),o.jsxs("button",{className:St==="weight"?"active":"",onClick:()=>{Vt("weight"),Ot(String(Math.round(re)||100))},children:["Custom (",R,")"]})]}),St==="portion"&&z?o.jsxs("div",{className:"nut-portion-stepper",children:[o.jsx("button",{className:"nut-stepper-btn",onClick:()=>dt(Math.max(1,at-1)),children:"-"}),o.jsxs("div",{className:"nut-stepper-display",children:[o.jsx("span",{className:"nut-stepper-count",children:at}),o.jsxs("span",{className:"nut-stepper-label",children:[z.label,at!==1?"s":""]}),o.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),R]})]}),o.jsx("button",{className:"nut-stepper-btn",onClick:()=>dt(at+1),children:"+"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"nut-serving-adjust",children:[o.jsxs("label",{children:["Serving (",R,")"]}),o.jsx("input",{type:"number",inputMode:"numeric",value:At,onChange:Be=>Ot(Be.target.value),onFocus:Be=>Be.target.select(),min:"0"})]}),o.jsx("div",{className:"nut-quick-amounts",children:Oe.map(Be=>o.jsxs("button",{className:`nut-quick-btn${At===String(Be)?" active":""}`,onClick:()=>Ot(String(Be)),children:[Be,R]},Be))})]}),o.jsx("div",{className:"nut-product-total",children:o.jsxs("span",{children:["Total: ",Math.round(he.protein*oe),"p / ",Math.round(he.carbs*oe),"c / ",Math.round(he.fats*oe),"f / ",Math.round(he.calories*oe)," cal"]})}),o.jsxs("div",{className:"nut-product-actions",children:[o.jsx("button",{className:"nut-btn-secondary",onClick:()=>pt(null),children:"Back to Search"}),o.jsx("button",{className:"nut-btn-primary",onClick:()=>Ye({name:he.name,protein:Math.round(he.protein*oe),carbs:Math.round(he.carbs*oe),fats:Math.round(he.fats*oe),calories:Math.round(he.calories*oe),serving:Pe}),children:"Add"})]})]})})(),ee==="manual"&&o.jsxs("div",{className:"nut-manual-form",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Food Name"}),o.jsx("input",{type:"text",value:ht.name,onChange:R=>Dn(z=>({...z,name:R.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Serving Size (optional)"}),o.jsx("input",{type:"text",value:ht.serving,onChange:R=>Dn(z=>({...z,serving:R.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),o.jsxs("div",{className:"nut-manual-macros",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Protein (g)"}),o.jsx("input",{type:"number",value:ht.protein,onChange:R=>Dn(z=>({...z,protein:R.target.value})),min:"0"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Carbs (g)"}),o.jsx("input",{type:"number",value:ht.carbs,onChange:R=>Dn(z=>({...z,carbs:R.target.value})),min:"0"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Fats (g)"}),o.jsx("input",{type:"number",value:ht.fats,onChange:R=>Dn(z=>({...z,fats:R.target.value})),min:"0"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Calories"}),o.jsx("input",{type:"number",value:ht.calories,onChange:R=>Dn(z=>({...z,calories:R.target.value})),min:"0"})]})]}),o.jsx("button",{className:"nut-btn-primary",disabled:!ht.name.trim(),onClick:()=>Ye({name:ht.name,protein:parseFloat(ht.protein)||0,carbs:parseFloat(ht.carbs)||0,fats:parseFloat(ht.fats)||0,calories:parseFloat(ht.calories)||0,serving:ht.serving||""}),children:"Add Food"})]}),ee==="favourites"&&!he&&(()=>{const R=Qs(),z=re=>{if(re.per100g){const oe=re.per100g;pt({name:re.name,brand:"",image:null,servingSize:re.serving||"100g",servingValue:100,servingUnit:re.servingUnit||"g",portion:re.portion||null,protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories,per100g:!0}),re.portion?(dt(1),Ot(String(re.portion.weight)),Vt("portion")):(dt(0),Ot("100"),Vt("weight"))}else Ye({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.serving||""})};return o.jsx("div",{className:"nut-recent-area",children:R.length===0?o.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):o.jsx("div",{className:"nut-recent-list",children:R.map((re,oe)=>o.jsxs("div",{className:"nut-recent-item-row",children:[o.jsx("button",{className:"nut-fav-star active",onClick:Oe=>{Oe.stopPropagation(),Ae(re)},children:o.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),o.jsxs("button",{className:"nut-recent-item",onClick:()=>z(re),children:[o.jsxs("div",{className:"nut-recent-item-info",children:[o.jsx("span",{className:"nut-recent-item-name",children:re.name}),o.jsx("span",{className:"nut-recent-item-serving",children:re.serving||""})]}),o.jsxs("span",{className:"nut-recent-item-macros",children:[re.calories," cal"]})]})]},oe))})})})(),ee==="favourites"&&he&&(()=>{const R=he.servingUnit||"g",z=he.portion,re=St==="portion"&&z?at*z.weight:parseFloat(At)||0,oe=re/100,Oe=R==="ml"?[100,200,250,500]:[50,100,150,200],Pe=St==="portion"&&z?`${at} ${z.label}${at!==1?"s":""} (${Math.round(re)}${R})`:`${Math.round(re)}${R}`;return o.jsxs("div",{className:"nut-product-result",children:[o.jsxs("div",{className:"nut-product-name-row",children:[o.jsx("h4",{children:he.name}),o.jsx("button",{className:`nut-fav-star confirm${le(he.name)?" active":""}`,onClick:()=>Ae({name:he.name,protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories,serving:he.servingSize,per100g:{protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories},servingUnit:he.servingUnit||"g",portion:he.portion||null}),children:o.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:le(he.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),o.jsxs("p",{className:"nut-product-per",children:["Per 100",R,":"]}),o.jsxs("div",{className:"nut-product-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[he.protein,"g P"]}),o.jsxs("span",{className:"nut-macro-c",children:[he.carbs,"g C"]}),o.jsxs("span",{className:"nut-macro-f",children:[he.fats,"g F"]}),o.jsxs("span",{className:"nut-macro-cal",children:[he.calories," cal"]})]}),z&&o.jsxs("div",{className:"nut-mode-toggle",children:[o.jsx("button",{className:St==="portion"?"active":"",onClick:()=>{Vt("portion"),at<1&&dt(1)},children:"Portions"}),o.jsxs("button",{className:St==="weight"?"active":"",onClick:()=>{Vt("weight"),Ot(String(Math.round(re)||100))},children:["Custom (",R,")"]})]}),St==="portion"&&z?o.jsxs("div",{className:"nut-portion-stepper",children:[o.jsx("button",{className:"nut-stepper-btn",onClick:()=>dt(Math.max(1,at-1)),children:"-"}),o.jsxs("div",{className:"nut-stepper-display",children:[o.jsx("span",{className:"nut-stepper-count",children:at}),o.jsxs("span",{className:"nut-stepper-label",children:[z.label,at!==1?"s":""]}),o.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),R]})]}),o.jsx("button",{className:"nut-stepper-btn",onClick:()=>dt(at+1),children:"+"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"nut-serving-adjust",children:[o.jsxs("label",{children:["Serving (",R,")"]}),o.jsx("input",{type:"number",inputMode:"numeric",value:At,onChange:Be=>Ot(Be.target.value),onFocus:Be=>Be.target.select(),min:"0"})]}),o.jsx("div",{className:"nut-quick-amounts",children:Oe.map(Be=>o.jsxs("button",{className:`nut-quick-btn${At===String(Be)?" active":""}`,onClick:()=>Ot(String(Be)),children:[Be,R]},Be))})]}),o.jsx("div",{className:"nut-product-total",children:o.jsxs("span",{children:["Total: ",Math.round(he.protein*oe),"p / ",Math.round(he.carbs*oe),"c / ",Math.round(he.fats*oe),"f / ",Math.round(he.calories*oe)," cal"]})}),o.jsxs("div",{className:"nut-product-actions",children:[o.jsx("button",{className:"nut-btn-secondary",onClick:()=>pt(null),children:"Back to Favourites"}),o.jsx("button",{className:"nut-btn-primary",onClick:()=>Ye({name:he.name,protein:Math.round(he.protein*oe),carbs:Math.round(he.carbs*oe),fats:Math.round(he.fats*oe),calories:Math.round(he.calories*oe),serving:Pe}),children:"Add"})]})]})})()]})}),o.jsx(sa,{active:"nutrition"}),un&&o.jsx("div",{className:`toast-notification ${un.type}`,children:un.message})]})})}async function QM(s){const{type:e="workout",title:t="Workout Complete!",stats:i=[],badges:l=[],badgeImage:u,badgeDesc:h}=s,p=1080,g=1920,y=document.createElement("canvas");y.width=p,y.height=g;const b=y.getContext("2d"),E="#2a2a28",T="#ffffff",M="#A12F3A",q="#1a1a1a",H="#555555";b.fillStyle=E,b.fillRect(0,0,p,g);const U=Math.round(p*.82),ae=Math.round(g*.75),$=Math.round((p-U)/2),ie=Math.round((g-ae)/2),de=28,_e=5;b.save(),b.shadowColor="rgba(0, 0, 0, 0.45)",b.shadowBlur=40,b.shadowOffsetY=10,h_(b,$,ie,U,ae,de),b.fillStyle=T,b.fill(),b.restore(),b.save(),h_(b,$,ie,U,ae,de),b.strokeStyle=M,b.lineWidth=_e,b.stroke(),b.restore();const ve=220,N=50,S=52,D=68,V=10,O=36,I=48,A=30,Me=34,Ze=46,Q=30,Te=28;b.font=`bold ${S}px 'Orbitron', sans-serif`;const Ie=Pc(b,t.toUpperCase(),U-100);b.font=`500 ${O}px 'Montserrat', sans-serif`;let qe=[];e==="badge"&&h?qe=Pc(b,h,U-120):e==="badge"&&l.length>0?qe=Pc(b,l.join("    "),U-120):i.length>0&&(qe=Pc(b,i.map(bt=>`${bt.value} ${bt.label}`).join("    "),U-120));const ee=e==="badge"?"I just earned a badge on Core Buddy ":e==="habits"?"I just completed my daily habits with Core Buddy ":"I just completed a workout using Core Buddy ";b.font=`bold ${Me}px 'Montserrat', sans-serif`;const L=Pc(b,ee,U-80);let X=Ie.length*D;qe.length>0&&(X+=V+qe.length*I),X+=A+L.length*Ze,X+=Q+Te;const ke=ie+ae-60-X,be=ie+40,Ke=ke-N,ct=p/2,Ve=(be+Ke)/2,sn=e==="badge"&&u?u:"/Logo.webp";b.save();const Sn=e==="badge"?"rgba(255, 193, 7, 0.15)":"rgba(161, 47, 58, 0.12)",Hn=b.createRadialGradient(ct,Ve,ve*.6,ct,Ve,ve*1.5);Hn.addColorStop(0,Sn),Hn.addColorStop(1,"rgba(0, 0, 0, 0)"),b.fillStyle=Hn,b.fillRect(ct-ve*1.5,Ve-ve*1.5,ve*3,ve*3),b.restore(),b.beginPath(),b.arc(ct,Ve,ve+6,0,Math.PI*2),b.fillStyle=T,b.fill();const Ut=e==="badge"?"#ffc107":M;b.beginPath(),b.arc(ct,Ve,ve,0,Math.PI*2),b.strokeStyle=Ut,b.lineWidth=5,b.stroke();try{const bt=await XM(sn);b.save(),b.beginPath(),b.arc(ct,Ve,ve-6,0,Math.PI*2),b.clip();const ht=(ve-6)*2;b.drawImage(bt,ct-ve+6,Ve-ve+6,ht,ht),b.restore()}catch{b.textAlign="center",b.textBaseline="middle",b.fillStyle=M,b.font="bold 80px 'Orbitron', sans-serif",b.fillText(e==="badge"?"":"MCF",ct,Ve)}let tt=ke;b.textAlign="center",b.textBaseline="alphabetic",b.fillStyle=q,b.font=`bold ${S}px 'Orbitron', sans-serif`;for(const bt of Ie)b.fillText(bt,p/2,tt),tt+=D;if(qe.length>0){tt+=V,b.fillStyle=H,b.font=`500 ${O}px 'Montserrat', sans-serif`;for(const bt of qe)b.fillText(bt,p/2,tt),tt+=I}tt+=A,b.fillStyle=q,b.font=`bold ${Me}px 'Montserrat', sans-serif`;for(const bt of L)b.fillText(bt,p/2,tt),tt+=Ze;return tt+=Q,b.fillStyle=M,b.font=`600 ${Te}px 'Montserrat', sans-serif`,b.fillText("Make It Count with Core Buddy",p/2,tt),new Promise(bt=>{y.toBlob(ht=>bt(ht),"image/png")})}function h_(s,e,t,i,l,u){s.beginPath(),s.moveTo(e+u,t),s.lineTo(e+i-u,t),s.quadraticCurveTo(e+i,t,e+i,t+u),s.lineTo(e+i,t+l-u),s.quadraticCurveTo(e+i,t+l,e+i-u,t+l),s.lineTo(e+u,t+l),s.quadraticCurveTo(e,t+l,e,t+l-u),s.lineTo(e,t+u),s.quadraticCurveTo(e,t,e+u,t),s.closePath()}function XM(s){return new Promise((e,t)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>e(i),i.onerror=t,i.src=s})}function Pc(s,e,t){if(s.measureText(e).width<=t)return[e];const i=e.split(" "),l=[];let u="";for(const h of i){const p=u?`${u} ${h}`:h;s.measureText(p).width>t&&u?(l.push(u),u=h):u=p}return u&&l.push(u),l}function AE(){const s=w.useRef(null),e=w.useCallback(()=>{if(!s.current)try{s.current=new(window.AudioContext||window.webkitAudioContext)}catch{}const u=s.current;return u?.state==="suspended"&&u.resume(),u},[]),t=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate([40,60,30]);const u=e();if(!u)return;const h=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=50,y.gain.value=.3,y.gain.setTargetAtTime(0,h+.08,.04),g.connect(y).connect(p),g.start(h),g.stop(h+.2);const b=u.createOscillator(),E=u.createGain();b.type="sine",b.frequency.value=70,E.gain.value=.2,E.gain.setTargetAtTime(0,h+.22,.04),b.connect(E).connect(p),b.start(h+.15),b.stop(h+.35)},[e]),i=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate(30);const u=e();if(!u)return;const h=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=55,y.gain.value=.35,y.gain.setTargetAtTime(0,h+.08,.04),g.connect(y).connect(p),g.start(h),g.stop(h+.2)},[e]),l=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate([50,80,100]);const u=e();u&&[0,.12].forEach((h,p)=>{const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=p===0?523:784,y.gain.value=.12,y.gain.setTargetAtTime(0,u.currentTime+h+.15,.02),g.connect(y).connect(u.destination),g.start(u.currentTime+h),g.stop(u.currentTime+h+.2)})},[e]);return w.useEffect(()=>()=>{s.current?.close()},[]),{tap:i,tick:t,complete:l}}const JM=2e3,bg=42,wl=2*Math.PI*bg,ZM=1200,d_=["Another one in the bank!","Consistency beats everything.","You showed up  that's what counts.","Stronger every session."];function _g({title:s,subtitle:e,stats:t,onDone:i,onDismissStart:l,onShareJourney:u,userName:h,buttonLabel:p="Done",holdLabel:g="Hold To Complete Session",shareType:y="workout",hideShare:b=!1}){const[E,T]=w.useState("hold"),[M,q]=w.useState(!1),[H,U]=w.useState(0),[ae,$]=w.useState(!1),[ie,de]=w.useState(!1),[_e,ve]=w.useState(null),N=AE(),S=w.useRef(null),D=w.useRef(null),V=w.useRef(null),O=w.useRef(null),I=w.useRef(!1),A=w.useRef(!1),Me=w.useRef(0),Ze=w.useRef(d_[Math.floor(Math.random()*d_.length)]),Q=w.useRef([...Array(80)].map((Ee,be)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#ffffff","#000000"][be%3],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:be%3}))),Te=w.useCallback(()=>{if(I.current)return;I.current=!0,A.current=!1,Me.current=0,q(!0),U(0),O.current=performance.now(),N.tap(),S.current&&(S.current.style.strokeDashoffset=wl);const Ee=be=>{const Ke=be-O.current,ct=Math.min(Ke/JM,1);if(S.current&&(S.current.style.strokeDashoffset=wl-ct*wl),D.current){const Ve=8*(1-ct),sn=1-ct,Sn=1+ct*.15;D.current.style.filter=`blur(${Ve}px) grayscale(${sn})`,D.current.style.transform=`scale(${Sn})`}U(ct),Ke-Me.current>=ZM&&(Me.current=Ke,N.tick()),ct<1?V.current=requestAnimationFrame(Ee):(I.current=!1,A.current=!0,V.current=null,q(!1),U(1),N.complete(),T("celebrate"))};V.current=requestAnimationFrame(Ee)},[N]),Ie=w.useCallback(()=>{I.current&&(I.current=!1,V.current&&(cancelAnimationFrame(V.current),V.current=null),S.current&&(S.current.style.strokeDashoffset=wl),D.current&&(D.current.style.filter="",D.current.style.transform=""),q(!1),U(0))},[]),qe=w.useCallback(()=>{$(!0),l?.(),setTimeout(()=>{i?.()},300)},[i,l]),ee=w.useCallback(()=>{const Ee=[s||"Workout Complete!"];return e&&Ee.push(e),t?.length&&Ee.push(t.map(be=>`${be.value} ${be.label}`).join(" | ")),Ee.push("#MindCoreFitness"),Ee.join(`
`)},[s,e,t]),L=w.useCallback(async()=>{if(!(ie||!u))try{await u({type:y==="habits"?"habits_summary":"workout_summary",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Ze.current}),de(!0),ve("Posted to Journey!"),setTimeout(()=>ve(null),2500)}catch(Ee){console.error("Journey post failed:",Ee),ve(Ee?.message||"Failed to post"),setTimeout(()=>ve(null),3500)}},[ie,u,s,e,t]),[X,xe]=w.useState(!1),ke=w.useCallback(async()=>{xe(!0);try{const Ee=await QM({type:y||"workout",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Ze.current,userName:h}),be=ee();if(navigator.share&&navigator.canShare?.({files:[new File([Ee],"workout.png",{type:"image/png"})]})){const Ke=new File([Ee],"workout.png",{type:"image/png"});await navigator.share({title:"Mind Core Fitness",text:be,files:[Ke]})}else navigator.share?await navigator.share({title:"Mind Core Fitness",text:be}):(await navigator.clipboard.writeText(be),ve("Copied to clipboard!"),setTimeout(()=>ve(null),2500))}catch{try{await navigator.clipboard.writeText(ee()),ve("Copied to clipboard!"),setTimeout(()=>ve(null),2500)}catch{}}finally{xe(!1)}},[s,e,t,h,ee]);return E==="hold"?o.jsxs("div",{className:"wc-hold-page",children:[o.jsx("div",{className:"wc-hold-glow","aria-hidden":"true"}),o.jsx("p",{className:"wc-hold-label",children:g}),o.jsxs("div",{className:`wc-hold-ring-touch ${M?"wc-holding":""}`,onPointerDown:Ee=>{Ee.preventDefault(),Te()},onPointerUp:Ie,onPointerLeave:Ie,onPointerCancel:Ie,onClick:Ee=>{Ee.stopPropagation(),A.current&&(A.current=!1)},role:"button",tabIndex:0,"aria-label":"Press and hold to finish workout",onKeyDown:Ee=>{(Ee.key==="Enter"||Ee.key===" ")&&(Ee.preventDefault(),N.complete(),T("celebrate"))},children:[o.jsx("div",{className:"wc-hold-ring-glow","aria-hidden":"true"}),o.jsxs("svg",{className:"wc-hold-ring-svg",viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"wc-hold-ring-track",cx:"50",cy:"50",r:bg}),o.jsx("circle",{className:"wc-hold-ring-fill",ref:S,cx:"50",cy:"50",r:bg,style:{strokeDasharray:wl,strokeDashoffset:wl}})]}),o.jsx("img",{ref:D,src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-hold-logo",draggable:!1})]})]}):o.jsxs("div",{className:`wc-celeb-overlay ${ae?"wc-celeb-dismissing":""}`,children:[o.jsx("div",{className:"wc-celeb-confetti","aria-hidden":"true",children:Q.current.map((Ee,be)=>o.jsx("span",{className:`wc-celeb-confetti-piece wc-confetti-shape-${Ee.shape}`,style:{"--x":`${Ee.x}%`,"--delay":`${Ee.delay}s`,"--color":Ee.color,"--drift":`${Ee.drift}px`,"--spin":`${Ee.spin}deg`,"--duration":`${Ee.duration}s`,width:`${Ee.width}px`,height:`${Ee.height}px`}},be))}),o.jsxs("div",{className:"wc-celeb-content",children:[o.jsx("div",{className:"wc-celeb-logo-frame",children:o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-celeb-logo-img"})}),o.jsx("h2",{className:"wc-celeb-heading",children:s||"Congratulations!"}),e&&o.jsx("p",{className:"wc-celeb-subtext",children:e}),o.jsx("p",{className:"wc-celeb-quote",children:Ze.current}),t&&t.length>0&&o.jsx("div",{className:"wc-celeb-stats-row",children:t.map((Ee,be)=>o.jsxs("div",{className:"wc-celeb-stat",children:[o.jsx("span",{className:"wc-celeb-stat-val",children:Ee.value}),o.jsx("span",{className:"wc-celeb-stat-label",children:Ee.label})]},be))}),!b&&o.jsxs("div",{className:"wc-share-row",children:[u&&o.jsxs("button",{className:`wc-share-btn wc-share-journey ${ie?"wc-share-done":""}`,onClick:L,disabled:ie,children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M12 20h9"}),o.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z"})]}),ie?"Posted!":"Post to Journey"]}),o.jsxs("button",{className:"wc-share-btn wc-share-external",onClick:ke,disabled:X,children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"18",cy:"5",r:"3"}),o.jsx("circle",{cx:"6",cy:"12",r:"3"}),o.jsx("circle",{cx:"18",cy:"19",r:"3"}),o.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),o.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),X?"Generating...":"Share"]})]}),o.jsx("button",{className:"wc-celeb-btn",onClick:qe,children:p}),_e&&o.jsx("div",{className:"wc-share-toast",children:_e})]})]})}const f_="/login/assets/randomiser-glq9YJkL.jpg",m_="/login/assets/programme-card-workout-CnNzTYkz.webp",e6="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",t6="/login/assets/muscle-group-arms-C9AdZL4-.png",n6="/login/assets/arms-bicep-BUrmT1o-.png",s6="/login/assets/arms-tricep-D9tAnFnS.png",r6="/login/assets/arms-full-arms-BY3TvpJm.png",i6="/login/assets/muscle-group-chest-Cxfuc7XI.png",a6="/login/assets/chest-strength-BR4BAFTH.png",o6="/login/assets/chest-hypertrophy-B8yNrvjB.png",l6="/login/assets/chest-endurance-e-OSWtWO.png",c6="/login/assets/muscle-group-shoulders-DibNtCLF.png",u6="/login/assets/shoulders-strength-CKlZBF5A.png",h6="/login/assets/shoulders-hypertrophy-BUd76jiS.png",d6="/login/assets/shoulders-endurance-HuqNG5rD.png",f6="/login/assets/muscle-group-core-CPR-bdRg.png",m6="/login/assets/core-lower-abs-TVcqGMFJ.png",p6="/login/assets/core-obliques-rotation-Djb7Qlbk.png",g6="/login/assets/core-weighted-core-4Kwh9mTv.png",y6="/login/assets/muscle-group-back-8JPV-YUo.png",v6="/login/assets/back-strength-BmSRxnwo.png",b6="/login/assets/back-hypertrophy-CXHmsnCz.png",_6="/login/assets/back-endurance-C8qJ8l5I.png",w6="/login/assets/muscle-group-legs-B8jcbdov.png",x6="/login/assets/legs-quads-DbnfsebI.png",E6="/login/assets/legs-hamstrings-glutes-BrfsvvzX.png",T6="/login/assets/legs-power-plyo-D2qBXeUR.png",k6=60,Lp=5,S6={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},j6={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Op={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Pp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:e6},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Vc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:t6},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z",image:i6},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z",image:y6},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",image:c6},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z",image:w6},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",image:f6}],p_={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",image:a6,level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",image:o6,level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",image:l6,level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",image:v6,level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",image:b6,level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",image:_6,level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",image:u6,level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",image:h6,level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",image:d6,level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",image:n6,level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",image:s6,level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",image:r6,level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",image:x6,level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",image:E6,level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",image:T6,level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",image:m6,level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",image:p6,level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",image:g6,level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},Vp=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Hr=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],pi=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],Up=[5,10,15,20,30],sd={core:"#e85d04",upper:"#2196f3",lower:"#4caf50",fullbody:"#9c27b0",mix:"#ff9800"},g_=["Mix up your focus areas to build balanced strength.","Consistency beats intensity  show up and press play.","Try a new difficulty level to keep your body guessing.","Short on time? A 5-minute blast still counts.","Save your favourite combos so you can replay them anytime.","Your body adapts  switch equipment for fresh stimulus.","Rest days are growth days. Listen to your body.","Challenge yourself: go one level higher this week."];function C6(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function N6(s){const e=[...s];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function A6(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Ci(),{isDark:l,toggleTheme:u,accent:h}=Fo(),{isPremium:p,FREE_RANDOMISER_DURATIONS:g,FREE_RANDOMISER_WEEKLY_LIMIT:y}=Ru(),b=Nr(),{tap:E}=AE(),[T,M]=w.useState("randomiser_hub"),[q,H]=w.useState(["bodyweight"]),[U,ae]=w.useState("core"),[$,ie]=w.useState("intermediate"),[de,_e]=w.useState(p?15:5),[ve,N]=w.useState([]),[S,D]=w.useState(!1),V=w.useRef(!1),O=w.useRef([]),[I,A]=w.useState([]),[Me,Ze]=w.useState(2),[Q,Te]=w.useState(pi[1]),[Ie,qe]=w.useState(1),[ee,L]=w.useState(0),[X,xe]=w.useState("work"),[ke,Ee]=w.useState(0),[be,Ke]=w.useState(!1),[ct,Ve]=w.useState(0),[sn,Sn]=w.useState(!1),[Hn,Ut]=w.useState(!1),[tt,bt]=w.useState(null),ht=w.useRef(null);w.useRef(null),w.useRef(null);const[Dn,he]=w.useState(null),pt=w.useCallback((P,te="info")=>{he({message:P,type:te}),setTimeout(()=>he(null),3e3)},[]),At=w.useCallback(async P=>{if(!t)throw new Error("Not signed in");const te=P&&typeof P=="object"&&P.type;await si(Lt(Se,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:te?"":P,type:te?P.type:"text",imageURL:null,createdAt:fr(),likeCount:0,commentCount:0,...te?{metadata:{title:P.title||"",subtitle:P.subtitle||"",stats:P.stats||[],quote:P.quote||"",badges:P.badges||[]}}:{}})},[t]),[Ot,at]=w.useState(null),[dt,St]=w.useState(null),[Vt,js]=w.useState(0),[bs,un]=w.useState(0),[J,Ce]=w.useState([]),[wt,_t]=w.useState(""),[ot,He]=w.useState(""),[st,$e]=w.useState(!1),[Jt,qt]=w.useState(0),[Gn,jn]=w.useState(!1),[Kn,tn]=w.useState({}),Vn=w.useRef(null),Mn=w.useRef(null),[rn,Qs]=w.useState(0),[le,Ae]=w.useState(0),[Ye,gt]=w.useState(0),[lt,hn]=w.useState(0),[Un,pn]=w.useState(0),[gn,_s]=w.useState(0),[ws,ns]=w.useState({beginner:0,intermediate:0,advanced:0}),dn=p?Up:Up.filter(P=>g.includes(P)),Cn=!p&&rn>=y,[Cs,rr]=w.useState([]),[li,Ar]=w.useState(!1),[Rr,xs]=w.useState({}),[Es,Ts]=w.useState(!1),[Yn,bn]=w.useState(!1),[Qn,Ht]=w.useState(""),[pr,Kr]=w.useState(null),[hs,ss]=w.useState([]),[rs,Yr]=w.useState({total:0,favouriteFocus:null,streak:0}),[R,z]=w.useState(null),[re,oe]=w.useState(""),[Oe,Pe]=w.useState(!1);w.useEffect(()=>{!i&&(!s||!e)&&b("/")},[s,e,i,b]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const te=Lt(Se,"workoutLogs"),ne=Rn(te,fn("clientId","==",t.id)),je=(await Tn(ne)).docs.map(xt=>xt.data()),De=je.filter(xt=>xt.type!=="programme");hn(De.length);const Fe=De.reduce((xt,Bt)=>xt+(Bt.duration||0),0);pn(Fe);const mt={beginner:0,intermediate:0,advanced:0};De.forEach(xt=>{xt.level&&mt[xt.level]!==void 0&&mt[xt.level]++}),ns(mt);const Ct=new Date,Je=Ct.getDay(),Tt=Je===0?-6:1-Je,_n=new Date(Ct);_n.setDate(Ct.getDate()+Tt),_n.setHours(0,0,0,0);const gr=_n.getTime(),kt=je.filter(xt=>{const Bt=xt.completedAt;return Bt?(Bt.toDate?Bt.toDate().getTime():new Date(Bt).getTime())>=gr:!1});Qs(kt.filter(xt=>xt.type!=="programme").length);let An=0;if(t)try{const xt=await mr(nt(Se,"clientProgrammes",t.id));if(xt.exists()){const Bt=xt.data(),Ns=Bt.templateId;An=kt.filter(Ms=>Ms.type==="programme"&&Ms.programmeId===Ns).length,z(Ns);const Ds=Pp.find(Ms=>Ms.id===Ns);Ds&&oe(Ds.name);const ir=S6[Ns];if(ir){const Ms=Object.keys(Bt.completedSessions||{}).length,As=ir.duration*ir.daysPerWeek;gt(As>0?Math.round(Ms/As*100):0)}}else z(null),oe(""),gt(0)}catch{}Ae(An);const Bn=De.map(xt=>xt.completedAt).filter(Boolean).map(xt=>xt.toDate?xt.toDate().getTime():new Date(xt).getTime()).sort((xt,Bt)=>Bt-xt);if(Bn.length===0)_s(0);else{const xt=new Set;Bn.forEach(As=>{const Mr=new Date(As),yr=Mr.getDay(),ca=yr===0?-6:1-yr,Ai=new Date(Mr);Ai.setDate(Mr.getDate()+ca),Ai.setHours(0,0,0,0),xt.add(Ai.getTime())});const Bt=[...xt].sort((As,Mr)=>Mr-As);let Ns=0;const Ds=new Date(Ct),ir=Ct.getDay()===0?-6:1-Ct.getDay();Ds.setDate(Ct.getDate()+ir),Ds.setHours(0,0,0,0);let Ms=Ds.getTime();Bt.includes(Ms)||(Ms-=10080*60*1e3);for(let As=0;As<200&&Bt.includes(Ms);As++)Ns++,Ms-=10080*60*1e3;_s(Ns)}}catch(te){console.error("Error loading workout stats:",te)}finally{Pe(!0)}})()},[s,t,T]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const te=Rn(Lt(Se,"savedWorkouts"),fn("clientId","==",t.id)),we=(await Tn(te)).docs.map(je=>({id:je.id,...je.data()}));we.sort((je,De)=>{const Fe=je.savedAt?.toMillis?.()||je.savedAt?.seconds*1e3||0;return(De.savedAt?.toMillis?.()||De.savedAt?.seconds*1e3||0)-Fe}),rr(we)}catch(te){console.error("Error loading saved workouts:",te)}finally{Ar(!0)}})()},[s,t]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const te=Rn(Lt(Se,"workoutLogs"),fn("clientId","==",t.id),hu("completedAt","desc"),du(20)),je=(await Tn(te)).docs.map(kt=>kt.data()).filter(kt=>kt.type!=="programme"&&kt.type!=="muscle_group");ss(je.slice(0,3));const De=je.length,Fe={};je.forEach(kt=>{kt.focus&&(Fe[kt.focus]=(Fe[kt.focus]||0)+1)});const mt=Object.keys(Fe).sort((kt,An)=>Fe[An]-Fe[kt])[0]||null;let Ct=0;if(je.length>0){const kt=new Set;je.forEach(xt=>{const Bt=xt.completedAt?.toDate?xt.completedAt.toDate():xt.completedAt?new Date(xt.completedAt):null;Bt&&kt.add(new Date(Bt.getFullYear(),Bt.getMonth(),Bt.getDate()).toDateString())});const An=new Date;An.setHours(0,0,0,0);let Bn=new Date(An);for(kt.has(Bn.toDateString())||Bn.setDate(Bn.getDate()-1);kt.has(Bn.toDateString());)Ct++,Bn.setDate(Bn.getDate()-1)}Yr({total:De,favouriteFocus:mt,streak:Ct});const Je={core:null,upper:null,lower:null,fullbody:null};je.forEach(kt=>{if(kt.focus&&Je[kt.focus]===null&&kt.completedAt){const An=kt.completedAt.toDate?kt.completedAt.toDate():new Date(kt.completedAt);Je[kt.focus]=An}});let Tt=null,_n=new Date;const gr=["core","upper","lower","fullbody"];for(const kt of gr){if(Je[kt]===null){const An=Hr.find(Bn=>Bn.key===kt)?.label||kt;Tt={focus:kt,label:An,daysAgo:null,message:`You haven't tried ${An} yet`};break}if(Je[kt]<_n){_n=Je[kt];const An=Math.floor((Date.now()-Je[kt].getTime())/864e5);if(An>=5){const Bn=Hr.find(xt=>xt.key===kt)?.label||kt;Tt={focus:kt,label:Bn,daysAgo:An,message:`${Bn}  ${An} days ago`}}}}Kr(Tt)}catch(te){console.error("Error loading recent workouts:",te)}})()},[s,t,T]);const Be=async P=>{if(!(!s||!t||I.length===0)){Ts(!0);try{const te=Hr.find(je=>je.key===U)?.label||U,ne=P||`${te} ${de}min`,we=await si(Lt(Se,"savedWorkouts"),{clientId:t.id,name:ne,equipment:q,focus:U,level:$,duration:de,exercises:I.map(je=>({name:je.name,videoUrl:je.videoUrl,isGif:je.isGif||!1})),rounds:Me,savedAt:Qt.now()});rr(je=>[{id:we.id,clientId:t.id,name:ne,equipment:q,focus:U,level:$,duration:de,exercises:I.map(De=>({name:De.name,videoUrl:De.videoUrl,isGif:De.isGif||!1})),rounds:Me,savedAt:Qt.now()},...je]),pt("Workout saved!","success")}catch(te){console.error("Error saving workout:",te),pt("Failed to save workout","error")}finally{Ts(!1),bn(!1),Ht("")}}},$t=async P=>{try{await Sr(nt(Se,"savedWorkouts",P)),rr(te=>te.filter(ne=>ne.id!==P)),pt("Workout removed","info")}catch(te){console.error("Error deleting saved workout:",te),pt("Failed to remove workout","error")}},Ge=P=>{H(P.equipment||["bodyweight"]),ae(P.focus||"core"),ie(P.level||"intermediate"),_e(P.duration||15);const te=pi.find(ne=>ne.key===(P.level||"intermediate"));Te(te),A(P.exercises||[]),Ze(P.rounds||2),M("preview")},$n=async()=>{const P=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null");H(P?.equipment||["bodyweight"]),ae(P?.focus||"core"),ie(P?.level||"intermediate"),_e(P?.duration||15),setTimeout(()=>Xs(),50)},is=()=>{localStorage.setItem("mcf_last_randomiser",JSON.stringify({equipment:q,focus:U,level:$,duration:de}))};localStorage.getItem("mcf_last_randomiser");const qs=()=>{const P=[];let te;U==="mix"?te=["core","upper","lower"]:U==="fullbody"?te=["upper","lower"]:te=[U];for(const ne of q)for(const we of te)P.push(`exercises/${ne}/${we}`);return P},as=async()=>{if(V.current){for(;V.current;)await new Promise(P=>setTimeout(P,200));return O.current}V.current=!0,D(!0);try{const P=qs(),te=[];for(const De of P)try{const Fe=Ba(za,De),mt=await l_(Fe);te.push(...mt.items)}catch{console.warn(`Folder ${De} not found, skipping.`)}if(te.length===0&&q.includes("bodyweight")&&U==="core")try{const De=Ba(za,"core"),Fe=await l_(De);te.push(...Fe.items)}catch{console.warn("Legacy core/ folder not found either.")}if(te.length===0){const De=q.map(mt=>Vp.find(Ct=>Ct.key===mt)?.label).join(" + "),Fe=Hr.find(mt=>mt.key===U)?.label;return pt(`No exercises found for ${De} / ${Fe}. Upload videos to Firebase Storage.`,"error"),V.current=!1,D(!1),[]}const ne=new Set,we=te.filter(De=>{const Fe=De.name.replace(/\.(mp4|gif)$/i,"");return ne.has(Fe)?!1:(ne.add(Fe),!0)}),je=await Promise.all(we.map(async De=>{const Fe=await Ao(De),mt=C6(De.name.replace(/\.(mp4|gif)$/i,"")),Ct=/\.gif$/i.test(De.name);return{name:mt,videoUrl:Fe,isGif:Ct}}));return O.current=je,N(je),V.current=!1,D(!1),je}catch(P){console.error("Error loading exercises:",P);const te=P.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${P.message||P.code||"Unknown error"}`;return pt(te,"error"),V.current=!1,D(!1),[]}},Xs=async()=>{if(Cn)return;is(),M("spinning"),O.current=[];const P=await as();if(P.length===0){M("setup");return}const te=pi.find(Je=>Je.key===$);Te(te);const ne=te.work+te.rest,we=de*60,je=Math.floor(we/ne);let De,Fe;je<=6?(De=Math.max(3,Math.floor(je/2)),Fe=Math.floor(je/De)):je<=12?(De=Math.min(6,Math.floor(je/2)),Fe=Math.floor(je/De)):(De=Math.min(10,Math.floor(je/2)),Fe=Math.floor(je/De)),Fe=Math.max(2,Fe);const mt=N6(P),Ct=mt.slice(0,Math.min(De,mt.length));A(Ct),Ze(Fe),setTimeout(()=>M("preview"),2e3)},oa=()=>{M("countdown"),Ve(3)};w.useEffect(()=>{if(T!=="countdown")return;if(ct<=0){M("workout"),qe(1),L(0),xe("work"),Ee(Q.work),Ke(!1),Xe();return}ut();const P=setTimeout(()=>Ve(te=>te-1),1e3);return()=>clearTimeout(P)},[ct,T]),w.useEffect(()=>{if(T!=="workout"||be)return;if(ke<=0){Ni();return}ke<=3&&ut();const P=setTimeout(()=>Ee(te=>te-1),1e3);return()=>clearTimeout(P)},[ke,T,be]);const Ni=()=>{if(X==="work")xe("rest"),Ee(Q.rest);else{const P=ee+1;if(P>=I.length){const te=Ie+1;if(te>Me){Sn(!0),Ir();return}qe(te),L(0)}else L(P);xe("work"),Ee(Q.work),Xe()}},Ir=async()=>{if(s)try{await si(Lt(Se,"workoutLogs"),{clientId:t.id,level:$,duration:de,equipment:q,focus:U,exerciseCount:I.length,rounds:Me,exercises:I.map(P=>P.name),completedAt:Qt.now()}),typeof fbq=="function"&&fbq("trackCustom","WorkoutCompleted",{duration:de,level:$,focus_area:U,exercise_count:I.length}),Qs(P=>P+1),hn(P=>P+1),pn(P=>P+de),ns(P=>({...P,[$]:(P[$]||0)+1}))}catch(P){console.error("Error saving workout log:",P)}},la=async(P,te,ne)=>{if(!(!t||!te))try{const we=t.id,je=await mr(nt(Se,"coreBuddyPBs",we)),Fe=(je.exists()?je.data():null)?.exercises||{},mt=Fe[P];let Ct=!1;if(mt?(te>(mt.weight||0)||te===(mt.weight||0)&&ne>(mt.reps||0))&&(Ct=!0):Ct=!0,Ct){const Je={...Fe,[P]:{weight:te,reps:ne,achievedAt:Qt.now()}};await zs(nt(Se,"coreBuddyPBs",we),{clientId:t.id,exercises:Je,updatedAt:Qt.now()}),pt(`New PB! ${te}kg  ${ne} reps`,"success"),ut()}}catch(we){console.error("Error checking PB:",we)}},Dr=async P=>{if(St(P),P.interval){const we=[];for(const je of P.exercises){let De=null,Fe=!1;if(je.storagePath)try{const mt=Ba(za,je.storagePath);De=await Ao(mt),Fe=/\.gif$/i.test(je.storagePath)}catch{}we.push({name:je.name,videoUrl:De,isGif:Fe})}A(we),Ze(P.rounds),Te({work:P.work,rest:P.rest}),M("preview");return}const te={};for(const we of P.exercises)if(we.storagePath)try{const je=Ba(za,we.storagePath);te[we.name]={url:await Ao(je),isGif:/\.gif$/i.test(we.storagePath)}}catch{}tn(te);const ne=P.exercises.map(we=>({name:we.name,type:we.type,targetSets:we.sets,targetReps:we.reps||0,targetTime:we.time||0,sets:[]}));Ce(ne),js(0),un(0),_t(""),He(""),jn(!1),$e(!1),qt(0),setMgSessionBadges([]),setMgBadgeCelebration(null),M("muscle_workout")},j=()=>{const P=Vn.current;P&&(P.paused?(P.play(),jn(!0)):(P.pause(),jn(!1)))};w.useEffect(()=>{if(T!=="muscle_workout"||!st||Jt<=0){T==="muscle_workout"&&st&&Jt<=0&&($e(!1),ut());return}return Mn.current=setTimeout(()=>qt(P=>P-1),1e3),()=>clearTimeout(Mn.current)},[T,st,Jt]);const G=async()=>{const P=J[Vt];let te={};if(P.type==="weighted"){const je=parseFloat(wt)||0,De=parseInt(ot)||0;if(De===0){pt("Enter your reps","error");return}te={weight:je,reps:De}}else if(P.type==="reps"){const je=parseInt(ot)||0;if(je===0){pt("Enter your reps","error");return}te={reps:je}}else if(P.type==="timed"){const je=P.targetTime-Jt;te={time:Math.max(je,1)}}const ne=[...J];ne[Vt]={...P,sets:[...P.sets,te]},Ce(ne),P.type==="weighted"&&te.weight>0&&await la(P.name,te.weight,te.reps);const we=P.sets.length+1;if(we<P.targetSets)un(we),He(""),$e(!1),qt(0);else if(Vt+1<J.length){const je=Vt+1;js(je),un(0),_t(""),He(""),jn(!1),$e(!1),qt(0)}else await Ne(ne),Ut(!0)},Ne=async P=>{if(!(!s||!t))try{const te=P.reduce((ne,we)=>ne+we.sets.length,0);await si(Lt(Se,"workoutLogs"),{clientId:t.id,type:"muscle_group",muscleGroup:Ot,sessionId:dt?.id,sessionName:dt?.name,exerciseCount:P.length,totalSets:te,duration:Math.round(te*1.5),exercises:P.map(ne=>({name:ne.name,type:ne.type,sets:ne.sets})),completedAt:Qt.now()})}catch(te){console.error("Error saving muscle group workout log:",te)}},Re=w.useRef(null),ze=()=>(Re.current||(Re.current=new(window.AudioContext||window.webkitAudioContext)),Re.current),ut=()=>{try{const P=ze(),te=P.createOscillator(),ne=P.createGain();te.connect(ne),ne.connect(P.destination),te.frequency.value=880,ne.gain.value=.3,te.start(P.currentTime),te.stop(P.currentTime+.15)}catch{}},Xe=()=>{try{const P=ze(),te=P.createOscillator(),ne=P.createGain();te.connect(ne),ne.connect(P.destination),te.frequency.value=1200,ne.gain.value=.4,te.start(P.currentTime),te.stop(P.currentTime+.3)}catch{}};w.useEffect(()=>{if(T!=="workout"||X!=="work"||!I[ee]?.isGif)return;const te=setInterval(()=>{const ne=ht.current;if(!ne)return;const we=ne.getAttribute("src");ne.removeAttribute("src"),setTimeout(()=>{ht.current&&ht.current.setAttribute("src",we)},0)},4e3);return()=>clearInterval(te)},[T,X,ee,Ie,I]);const Et=(P,te,ne)=>{const we=Math.round(P/te*k6);return o.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:FM.map((je,De)=>o.jsx("line",{x1:je.x1,y1:je.y1,x2:je.x2,y2:je.y2,className:De<we?`wk-tick-filled ${ne}`:"wk-tick-empty",strokeWidth:je.thick?"3":"2"},De))})},jt=()=>{const P=I.length*Me;return((Ie-1)*I.length+ee+(X==="rest"?.5:0))/P},Zt=Dn&&o.jsx("div",{className:`toast-notification ${Dn.type}`,children:Dn.message});if(i)return o.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),o.jsx("div",{className:"wk-loading-inline",children:o.jsx("div",{className:"wk-loading-spinner"})})]});if(T==="menu")return o.jsx(qo,{children:o.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),o.jsxs("main",{className:"wk-main",children:[o.jsxs("div",{className:"wk-menu-heading",children:[o.jsx("h2",{children:"Choose Your Workout"}),o.jsx("p",{children:"No excuses. Just results."})]}),o.jsx("button",{className:"wk-hero-card",onClick:()=>M("randomiser_hub"),children:o.jsx("img",{src:f_,alt:"Randomise Workout",className:"wk-hero-bg"})}),!p&&o.jsxs("button",{className:"wk-hero-card wk-free-card-premium",onClick:()=>b("/upgrade"),children:[o.jsx("img",{src:m_,alt:"Programmes",className:"wk-hero-bg"}),o.jsx("div",{className:"wk-free-card-overlay"}),o.jsxs("div",{className:"wk-free-card-content",children:[o.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),o.jsx("span",{className:"wk-free-card-label",children:"Unlock Full Access"})]})]}),p&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"wk-section-header",children:[o.jsx("h2",{children:"Programmes"}),o.jsxs("span",{className:"wk-section-count",children:[Pp.length," available"]})]}),o.jsx("div",{className:"wk-prog-scroll-wrap",children:o.jsx("div",{className:"wk-prog-scroll",children:Pp.map((P,te)=>P.image?o.jsxs("button",{className:"wk-prog-img-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:P.id}}),style:{animationDelay:`${te*.06}s`},children:[o.jsx("img",{src:P.image,alt:P.name,className:"wk-prog-img"}),te===0&&o.jsx("div",{className:"wk-swipe-arrow",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})})]},P.id):o.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:P.id}}),style:{animationDelay:`${te*.06}s`},children:[o.jsx("img",{src:m_,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),o.jsx("div",{className:"wk-prog-hero-overlay",style:{background:j6[P.focus]}}),o.jsxs("div",{className:"wk-prog-hero-content",children:[o.jsxs("div",{className:"wk-prog-hero-top",children:[o.jsxs("span",{className:"wk-prog-hero-badge",children:[P.duration," WEEKS"]}),o.jsx("span",{className:"wk-prog-hero-level",children:P.level})]}),o.jsxs("div",{className:"wk-prog-hero-bottom",children:[o.jsx("h3",{children:P.name.toUpperCase()}),o.jsxs("p",{children:[P.daysPerWeek,"x per week  ",P.focus==="fullbody"?"Full Body":P.focus.charAt(0).toUpperCase()+P.focus.slice(1)," Focus"]}),o.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),te===0&&o.jsx("div",{className:"wk-swipe-arrow",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})})]},P.id))})})]}),p&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"wk-section-header",children:[o.jsx("h2",{children:"Muscle Groups"}),o.jsxs("span",{className:"wk-section-count",children:[Vc.length," groups"]})]}),o.jsx("div",{className:"wk-muscle-grid",children:Vc.map((P,te)=>o.jsx("button",{className:`wk-muscle-hero-card${P.image?" wk-muscle-thumb":""}`,onClick:()=>{at(P.key),M("muscle_sessions")},style:{animationDelay:`${te*.05}s`},children:P.image?o.jsx("img",{src:P.image,alt:P.label,className:"wk-muscle-thumb-img"}):o.jsxs(o.Fragment,{children:[o.jsx("img",{src:f_,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),o.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Op[P.key]}}),o.jsxs("div",{className:"wk-muscle-hero-content",children:[o.jsx("div",{className:"wk-muscle-hero-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:P.icon})})}),o.jsxs("div",{className:"wk-muscle-hero-text",children:[o.jsx("span",{className:"wk-muscle-hero-name",children:P.label}),o.jsxs("span",{className:"wk-muscle-hero-count",children:[p_[P.key]?.length||0," sessions"]})]})]})]})},P.key))})]})]}),o.jsx(sa,{active:"workouts"}),Zt]})});if(T==="randomiser_hub"){const P=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null")||{focus:"core",level:"intermediate",duration:15},te=Hr.find(we=>we.key===P.focus)?.label||P.focus,ne=pi.find(we=>we.key===P.level)?.label||P.level;return o.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),o.jsxs("main",{className:"wk-main",children:[o.jsxs("div",{className:"wk-hub-heading wk-hub-heading-hero",children:[o.jsxs("div",{className:"wk-hub-logo-wrap",children:[o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-hub-logo-img"}),o.jsx("div",{className:"wk-hub-dice-float",children:o.jsxs("svg",{className:"wk-hub-dice-icon",width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3"}),o.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.2",fill:"currentColor",stroke:"none"}),o.jsx("circle",{cx:"15.5",cy:"8.5",r:"1.2",fill:"currentColor",stroke:"none"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.2",fill:"currentColor",stroke:"none"}),o.jsx("circle",{cx:"8.5",cy:"15.5",r:"1.2",fill:"currentColor",stroke:"none"}),o.jsx("circle",{cx:"15.5",cy:"15.5",r:"1.2",fill:"currentColor",stroke:"none"})]})})]}),o.jsx("h2",{children:"Randomiser"}),o.jsx("p",{children:"Generate, save & replay workouts"})]}),rs.total>0&&o.jsxs("div",{className:"wk-hub-stats",children:[o.jsxs("div",{className:"wk-hub-stat",children:[o.jsx("span",{className:"wk-hub-stat-value",children:rs.total}),o.jsx("span",{className:"wk-hub-stat-label",children:"Workouts"})]}),rs.streak>0&&o.jsxs("div",{className:"wk-hub-stat",children:[o.jsxs("span",{className:"wk-hub-stat-value",children:[rs.streak,o.jsx("small",{children:"d"})]}),o.jsx("span",{className:"wk-hub-stat-label",children:"Streak"})]}),rs.favouriteFocus&&o.jsxs("div",{className:"wk-hub-stat",children:[o.jsx("span",{className:"wk-hub-stat-value wk-hub-stat-focus",style:{color:sd[rs.favouriteFocus]||"var(--color-primary)"},children:Hr.find(we=>we.key===rs.favouriteFocus)?.label||rs.favouriteFocus}),o.jsx("span",{className:"wk-hub-stat-label",children:"Top Focus"})]})]}),o.jsxs("div",{className:"wk-hub-tip",children:[o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),g_[Math.floor(Date.now()/864e5)%g_.length]]}),o.jsxs("div",{className:"wk-hub-actions",children:[o.jsxs("button",{className:"wk-hub-action-btn wk-hub-new wk-hub-new-glow",onClick:()=>M("setup"),children:[o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New Workout"]}),o.jsxs("button",{className:"wk-hub-action-btn wk-hub-quick",onClick:$n,disabled:Cn,children:[o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),"Quick Start",o.jsxs("span",{className:"wk-hub-quick-meta",children:[te,"  ",ne,"  ",P.duration,"min"]})]})]}),pr&&o.jsxs("div",{className:"wk-hub-section",children:[o.jsxs("h3",{className:"wk-hub-section-title",children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Suggested For You"]}),o.jsxs("button",{className:"wk-hub-suggestion",onClick:()=>{ae(pr.focus),M("setup")},children:[o.jsxs("div",{className:"wk-hub-suggestion-info",children:[o.jsx("span",{className:"wk-hub-suggestion-label",children:pr.message}),o.jsx("span",{className:"wk-hub-suggestion-cta",children:"Tap to set up "})]}),o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),p&&o.jsxs("div",{className:"wk-hub-section",children:[o.jsxs("h3",{className:"wk-hub-section-title",children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Saved Workouts",Cs.length>0&&o.jsx("span",{className:"wk-hub-count",children:Cs.length})]}),li?Cs.length===0?o.jsxs("div",{className:"wk-hub-empty wk-hub-empty-enhanced",children:[o.jsx("svg",{className:"wk-hub-empty-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),o.jsx("p",{children:o.jsx("strong",{children:"No saved workouts yet"})}),o.jsx("p",{className:"wk-hub-empty-sub",children:"Generate a workout and hit save to stash it here for quick replay."})]}):o.jsx("div",{className:"wk-hub-saved-categories",children:Hr.map(we=>{const je=Cs.filter(Fe=>Fe.focus===we.key);if(je.length===0)return null;const De=Rr[we.key]||!1;return o.jsxs("div",{className:"wk-hub-saved-cat",children:[o.jsxs("button",{className:`wk-hub-saved-cat-header${De?" wk-hub-saved-cat-open":""}`,style:{"--cat-color":sd[we.key]||"var(--color-primary)"},onClick:()=>xs(Fe=>({...Fe,[we.key]:!Fe[we.key]})),children:[o.jsxs("span",{className:"wk-hub-saved-cat-label",children:[o.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":sd[we.key]||"var(--color-primary)"},children:we.label}),o.jsx("span",{className:"wk-hub-saved-cat-count",children:je.length})]}),o.jsx("svg",{className:`wk-hub-saved-cat-chevron${De?" wk-hub-saved-cat-chevron-open":""}`,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),De&&o.jsx("div",{className:"wk-hub-saved-list",children:je.map((Fe,mt)=>{const Ct=(Fe.equipment||[]).map(Tt=>Vp.find(_n=>_n.key===Tt)?.label||Tt).join(", "),Je=pi.find(Tt=>Tt.key===Fe.level)?.label||Fe.level;return o.jsxs("div",{className:"wk-hub-saved-card",style:{animationDelay:`${mt*.05}s`},children:[o.jsxs("button",{className:"wk-hub-saved-main",onClick:()=>Ge(Fe),children:[o.jsxs("div",{className:"wk-hub-saved-info",children:[o.jsx("span",{className:"wk-hub-saved-name",children:Fe.name}),o.jsx("span",{className:"wk-hub-saved-tags",children:o.jsxs("span",{className:"wk-hub-saved-meta",children:[Je,"  ",Fe.duration,"min  ",(Fe.exercises||[]).length," ex"]})}),Ct&&o.jsx("span",{className:"wk-hub-saved-equip",children:Ct})]}),o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]}),o.jsx("button",{className:"wk-hub-saved-delete",onClick:()=>$t(Fe.id),"aria-label":"Remove saved workout",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},Fe.id)})})]},we.key)})}):o.jsx("div",{className:"wk-hub-empty",children:o.jsx("div",{className:"wk-loading-spinner"})})]}),hs.length>0&&o.jsxs("div",{className:"wk-hub-section",children:[o.jsxs("h3",{className:"wk-hub-section-title",children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Recent"]}),o.jsx("div",{className:"wk-hub-recent-list",children:hs.map((we,je)=>{const De=Hr.find(Je=>Je.key===we.focus)?.label||we.focus||"",Fe=pi.find(Je=>Je.key===we.level)?.label||we.level||"",mt=we.completedAt?.toDate?we.completedAt.toDate():we.completedAt?new Date(we.completedAt):null,Ct=mt?(()=>{const Je=Math.floor((Date.now()-mt.getTime())/1e3);return Je<3600?`${Math.floor(Je/60)}m ago`:Je<86400?`${Math.floor(Je/3600)}h ago`:`${Math.floor(Je/86400)}d ago`})():"";return o.jsxs("div",{className:"wk-hub-recent-card",style:{animationDelay:`${je*.05}s`},children:[o.jsx("div",{className:"wk-hub-recent-info",children:o.jsxs("span",{className:"wk-hub-recent-tags",children:[o.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":sd[we.focus]||"var(--color-primary)"},children:De}),o.jsxs("span",{className:"wk-hub-recent-meta",children:[Fe,"  ",we.duration||"?","min  ",we.exerciseCount||"?"," ex"]})]})}),o.jsx("span",{className:"wk-hub-recent-time",children:Ct})]},je)})})]})]}),o.jsx(sa,{active:"workouts"}),Zt]})}if(T==="setup"){const P=Hr.find(ne=>ne.key===U)?.label||U,te=pi.find(ne=>ne.key===$)?.label||$;return o.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>M("randomiser_hub"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),o.jsxs("main",{className:"wk-main wk-setup-main",children:[o.jsx("div",{className:"wk-stats-row",children:[{label:"Total",value:`${lt}`,pct:lt>0?Math.min(Math.round(lt/100*100),100):0,color:"#14b8a6",size:"normal"},{label:"This Week",value:`${rn}/${Lp}`,pct:Math.round(Math.min(rn,Lp)/Lp*100),color:"var(--color-primary)",size:"large"},{label:"Wk Streak",value:`${gn}`,pct:gn>0?Math.min(Math.round(gn/12*100),100):0,color:"#38B6FF",size:"normal"}].map(ne=>{const je=2*Math.PI*38,De=je-ne.pct/100*je;return o.jsxs("div",{className:`wk-stat-item${ne.size==="large"?" wk-stat-large":""}`,children:[o.jsxs("div",{className:"wk-stat-ring",children:[o.jsxs("svg",{viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"wk-stat-track",cx:"50",cy:"50",r:38}),o.jsx("circle",{className:"wk-stat-fill",cx:"50",cy:"50",r:38,style:{stroke:ne.color},strokeDasharray:je,strokeDashoffset:De})]}),o.jsx("span",{className:"wk-stat-value",style:{color:ne.color},children:ne.value})]}),o.jsx("span",{className:"wk-stat-label",children:ne.label})]},ne.label)})}),o.jsxs("div",{className:"wk-setup-flow",children:[o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Focus Area"}),o.jsx("div",{className:"wk-focus-grid",children:Hr.map(ne=>o.jsxs("button",{className:`wk-equip-btn${U===ne.key?" active":""}${ne.key==="mix"?" wk-mix-btn":""}`,onClick:()=>{E(),ae(ne.key)},children:[o.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:ne.icon})}),o.jsx("span",{children:ne.label})]},ne.key))})]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Level"}),o.jsx("div",{className:"wk-level-cards",children:pi.map(ne=>o.jsxs("button",{className:`wk-level-card wk-level-${ne.key}${$===ne.key?" active":""}`,onClick:()=>{E(),ie(ne.key)},children:[o.jsx("span",{className:"wk-level-name",children:ne.label}),o.jsx("span",{className:"wk-level-desc",children:ne.desc})]},ne.key))})]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Time"}),o.jsx("div",{className:"wk-time-options",children:Up.map(ne=>{const we=!dn.includes(ne);return o.jsxs("button",{className:`wk-time-btn${de===ne?" active":""}${we?" locked":""}`,onClick:()=>{we||(E(),_e(ne))},disabled:we,children:[o.jsx("span",{className:"wk-time-num",children:ne}),o.jsx("span",{className:"wk-time-unit",children:we?o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}):"min"})]},ne)})})]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Equipment"}),o.jsx("div",{className:"wk-equip-options",children:Vp.map(ne=>{const we=q.includes(ne.key);return o.jsxs("button",{className:`wk-equip-btn${we?" active":""}`,onClick:()=>{we&&q.length===1||(E(),H(je=>we&&je.length===1?je:we?je.filter(De=>De!==ne.key):[...je,ne.key]))},children:[o.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:ne.icon})}),o.jsx("span",{children:ne.label})]},ne.key)})})]}),o.jsx("div",{className:"wk-setup-summary",children:o.jsxs("span",{children:[P,"  ",te,"  ",de," min"]})})]})]}),o.jsxs("div",{className:"wk-go-sticky",children:[Cn&&o.jsx("p",{className:"wk-free-limit-msg",children:"You've used your free workout this week. Upgrade for unlimited access."}),o.jsx("button",{className:"wk-randomise-btn",onClick:Xs,disabled:S||Cn,children:S?"Loading exercises...":Cn?"Limit Reached":"Randomise Workout"})]}),Zt]})}if(T==="spinning")return o.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[o.jsxs("div",{className:"wk-spin-container",children:[o.jsxs("div",{className:"wk-spin-ring",children:[o.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:zM.map((P,te)=>o.jsx("line",{x1:P.x1,y1:P.y1,x2:P.x2,y2:P.y2,className:"wk-spin-tick",strokeWidth:P.thick?"3.5":"2",style:{animationDelay:`${te*.03}s`}},te))}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),o.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),Zt]});if(T==="preview"){const P=dt?.interval?{work:dt.work,rest:dt.rest}:pi.find(ne=>ne.key===$),te=I.length*Me*(P.work+P.rest);return o.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>M(dt?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),o.jsxs("main",{className:"wk-main",children:[dt?.interval&&o.jsx("h2",{className:"mg-preview-title",children:dt.name}),o.jsxs("div",{className:"wk-preview-stats",children:[o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:I.length}),o.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:Me}),o.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:Math.ceil(te/60)}),o.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsxs("span",{className:"wk-stat-val",children:[P.work,"/",P.rest]}),o.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),o.jsx("div",{className:"wk-preview-list",children:I.map((ne,we)=>o.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${we*.06}s`},onClick:()=>bt(ne),children:[o.jsx("span",{className:"wk-preview-num",children:we+1}),o.jsx("div",{className:"wk-preview-thumb",children:ne.isGif?o.jsx("img",{src:ne.videoUrl,alt:ne.name,loading:"lazy"}):o.jsx("video",{src:`${ne.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),o.jsx("span",{className:"wk-preview-name",children:ne.name}),o.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},we))}),tt&&o.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>bt(null),children:o.jsxs("div",{className:"wk-preview-modal",onClick:ne=>ne.stopPropagation(),children:[o.jsx("button",{className:"wk-preview-modal-close",onClick:()=>bt(null),"aria-label":"Close preview",children:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),o.jsx("div",{className:"wk-preview-modal-video",children:tt.isGif?o.jsx("img",{src:tt.videoUrl,alt:tt.name}):o.jsx("video",{src:tt.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),o.jsx("h3",{className:"wk-preview-modal-title",children:tt.name})]})}),o.jsxs("div",{className:"wk-preview-actions",children:[!dt?.interval&&o.jsxs("div",{className:"wk-preview-actions-row",children:[o.jsxs("button",{className:"wk-btn-secondary wk-btn-half",onClick:()=>Xs(),children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("polyline",{points:"1 4 1 10 7 10"}),o.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),p&&o.jsxs("button",{className:"wk-btn-secondary wk-btn-half",onClick:()=>bn(!0),disabled:Es,children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save"]})]}),o.jsx("button",{className:"wk-btn-primary wk-btn-full",onClick:oa,children:"Start Workout"})]}),Yn&&o.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>bn(!1),children:o.jsxs("div",{className:"wk-save-modal",onClick:ne=>ne.stopPropagation(),children:[o.jsx("h3",{children:"Save Workout"}),o.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),o.jsx("input",{type:"text",className:"wk-save-input",value:Qn,onChange:ne=>Ht(ne.target.value),placeholder:`${Hr.find(ne=>ne.key===U)?.label||U} ${de}min`,maxLength:40,autoFocus:!0}),o.jsxs("div",{className:"wk-save-modal-actions",children:[o.jsx("button",{className:"wk-btn-secondary",onClick:()=>bn(!1),children:"Cancel"}),o.jsx("button",{className:"wk-btn-primary",onClick:()=>Be(Qn),disabled:Es,children:Es?"Saving...":"Save"})]})]})})]})]})}if(T==="countdown")return o.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":h,children:o.jsxs("div",{className:"wk-countdown-big",children:[o.jsx("span",{className:"wk-countdown-num",children:ct}),o.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(T==="workout"){const P=I[ee],te=X==="work"?Q.work:Q.rest,ne=X==="rest"?ee+1<I.length?I[ee+1]:Ie<Me?I[0]:null:null;return o.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("div",{className:"wk-video-container",children:X==="work"?P.isGif?o.jsx("img",{ref:ht,className:"wk-video",src:P.videoUrl,alt:P.name},P.videoUrl):o.jsx("video",{className:"wk-video",src:P.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},P.videoUrl):o.jsxs("div",{className:"wk-rest-screen",children:[o.jsx("span",{className:"wk-rest-label",children:"REST"}),ne&&o.jsxs("span",{className:"wk-next-label",children:["Next: ",ne.name]})]})}),o.jsx("div",{className:"wk-back-row",children:o.jsxs("button",{className:"wk-back-btn",onClick:()=>{confirm("Leave workout?")&&M("randomiser_hub")},children:[o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),o.jsx("div",{className:"wk-spotify",children:o.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),o.jsxs("div",{className:"wk-exercise-info",children:[o.jsxs("span",{className:"wk-exercise-counter",children:[ee+1," / ",I.length]}),o.jsx("h2",{className:"wk-exercise-name",children:P.name}),o.jsxs("span",{className:"wk-round-label",children:["Round ",Ie," of ",Me]})]}),o.jsx("div",{className:"wk-timer-section",children:o.jsxs("div",{className:"wk-timer-ring-wrap",children:[Et(ke,te,X==="work"?"wk-tick-work":"wk-tick-rest"),o.jsxs("div",{className:"wk-timer-center",children:[o.jsx("span",{className:"wk-timer-time",children:ke}),o.jsx("span",{className:`wk-timer-phase ${X}`,children:X==="work"?"WORK":"REST"})]})]})}),o.jsxs("div",{className:"wk-controls",children:[o.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&M("randomiser_hub")},children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),o.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>Ke(!be),children:be?o.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):o.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),o.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),o.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{Ee(0)},children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),o.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),o.jsx("div",{className:"wk-progress-bar",children:o.jsx("div",{className:"wk-progress-fill",style:{width:`${jt()*100}%`}})}),sn&&(()=>{const we=pi.find(De=>De.key===$),je=I.length*Me*(we.work+we.rest);return o.jsxs(o.Fragment,{children:[o.jsx(_g,{title:"Workout Complete!",stats:[{value:Math.ceil(je/60),label:"Minutes"},{value:I.length*Me,label:"Intervals"},{value:Me,label:"Rounds"}],hideShare:!p,onShareJourney:t?At:null,userName:t?.name,onDismissStart:()=>M("randomiser_hub"),onDone:()=>{Sn(!1),St(null),at(null)}}),!dt?.interval&&o.jsxs("button",{className:"wk-complete-save-btn",onClick:()=>bn(!0),disabled:Es,children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save This Workout"]}),Yn&&o.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>bn(!1),style:{zIndex:10001},children:o.jsxs("div",{className:"wk-save-modal",onClick:De=>De.stopPropagation(),children:[o.jsx("h3",{children:"Save Workout"}),o.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),o.jsx("input",{type:"text",className:"wk-save-input",value:Qn,onChange:De=>Ht(De.target.value),placeholder:`${Hr.find(De=>De.key===U)?.label||U} ${de}min`,maxLength:40,autoFocus:!0}),o.jsxs("div",{className:"wk-save-modal-actions",children:[o.jsx("button",{className:"wk-btn-secondary",onClick:()=>bn(!1),children:"Cancel"}),o.jsx("button",{className:"wk-btn-primary",onClick:()=>Be(Qn),disabled:Es,children:Es?"Saving...":"Save"})]})]})})]})})()]})}if(T==="muscle_sessions"){const P=Vc.find(ne=>ne.key===Ot),te=p_[Ot]||[];return o.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>M("randomiser_hub"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),o.jsxs("main",{className:"wk-main",children:[o.jsxs("div",{className:"mg-sessions-header",children:[o.jsx("div",{className:"mg-sessions-icon",style:{background:Op[Ot]},children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:P?.icon})})}),o.jsxs("h2",{children:[P?.label," Workouts"]}),o.jsxs("p",{children:[te.length," sessions available"]})]}),o.jsx("div",{className:"mg-sessions-list",children:te.map((ne,we)=>o.jsxs("button",{className:"mg-session-card",onClick:()=>{St(ne),M("muscle_overview")},style:{animationDelay:`${we*.08}s`},children:[o.jsxs("div",{className:"mg-session-info",children:[o.jsx("h3",{children:ne.name}),o.jsx("p",{children:ne.desc}),o.jsx("div",{className:"mg-session-meta",children:ne.interval?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),o.jsxs("span",{className:"mg-session-tag",children:[ne.exercises.length," exercises"]}),o.jsxs("span",{className:"mg-session-tag",children:[ne.rounds," rounds"]})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),o.jsxs("span",{className:"mg-session-tag",children:[ne.exercises.length," exercises"]}),o.jsx("span",{className:"mg-session-tag",children:(()=>{const je=ne.exercises.map(mt=>mt.sets||0),De=Math.min(...je),Fe=Math.max(...je);return De===Fe?`${De} sets each`:`${De}-${Fe} sets each`})()})]})})]}),o.jsx("div",{className:"mg-session-arrow",children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})})]},ne.id))})]}),Zt]})}if(T==="muscle_overview"){const P=dt;if(!P)return null;const te=Vc.find(ne=>ne.key===Ot);return o.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>M("muscle_sessions"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),o.jsxs("main",{className:"wk-main mg-overview-main",children:[o.jsx("div",{className:"mg-overview-hero",style:P.image?void 0:{background:Op[Ot]},children:P.image?o.jsx("img",{src:P.image,alt:P.name,className:"mg-overview-hero-img"}):o.jsx("div",{className:"mg-overview-hero-content",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:o.jsx("path",{d:te?.icon})})})}),o.jsxs("div",{className:"mg-overview-header",children:[o.jsxs("div",{className:"mg-overview-title-row",children:[o.jsx("h2",{children:P.name}),P.level&&o.jsx("span",{className:"mg-overview-level",children:P.level})]}),o.jsx("p",{className:"mg-overview-desc",children:P.desc})]}),P.overview&&o.jsxs("div",{className:"mg-overview-section",children:[o.jsxs("h3",{children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),o.jsx("p",{children:P.overview})]}),P.tips&&P.tips.length>0&&o.jsxs("div",{className:"mg-overview-section",children:[o.jsxs("h3",{children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),o.jsx("ul",{className:"mg-overview-tips",children:P.tips.map((ne,we)=>o.jsx("li",{children:ne},we))})]}),o.jsxs("div",{className:"mg-overview-section",children:[o.jsxs("h3",{children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),o.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),o.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",P.exercises.length,")"]}),o.jsx("div",{className:"mg-overview-exercises",children:P.exercises.map((ne,we)=>o.jsxs("div",{className:"mg-overview-exercise",children:[o.jsx("span",{className:"mg-overview-ex-num",children:we+1}),o.jsxs("div",{className:"mg-overview-ex-info",children:[o.jsx("span",{className:"mg-overview-ex-name",children:ne.name}),P.interval?o.jsxs("span",{className:"mg-overview-ex-detail",children:[P.work,"s work / ",P.rest,"s rest"]}):o.jsxs("span",{className:"mg-overview-ex-detail",children:[ne.sets," sets  ",ne.reps?`${ne.reps} reps`:`${ne.time}s`,ne.type==="weighted"&&"  weighted"]})]})]},we))})]}),o.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>Dr(P),children:[o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),Zt]})}if(T==="muscle_workout"){const P=dt;if(!P)return null;const te=P.exercises[Vt],ne=J[Vt];if(!te||!ne)return null;const we=ne.sets.length,je=P.exercises.length,De=P.exercises.reduce((Tt,_n)=>Tt+(_n.sets||0),0),mt=J.reduce((Tt,_n)=>Tt+_n.sets.length,0)/De*100,Ct=Kn[te.name];te.type==="timed"&&Jt===0&&!st&&we===bs&&setTimeout(()=>qt(te.time),0);const Je=we+1<te.sets?"Log Set":Vt+1<je?"Log Set  Next Exercise":"Log Set  Complete";return o.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("div",{className:"mg-session-progress",children:o.jsx("div",{className:"mg-session-progress-fill",style:{width:`${mt}%`}})}),o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&M("muscle_overview")},"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsxs("span",{className:"mg-header-info",children:["Exercise ",Vt+1,"/",je]}),o.jsx("div",{style:{width:22}})]})}),o.jsxs("main",{className:"wk-main",children:[Ct?o.jsxs("div",{className:"mg-video-container",onClick:j,children:[Ct.isGif?o.jsx("img",{className:"mg-video",src:Ct.url,alt:te.name}):o.jsx("video",{ref:Vn,className:"mg-video",src:Ct.url,loop:!0,muted:!0,playsInline:!0},te.name),!Gn&&!Ct.isGif&&o.jsxs("div",{className:"mg-video-overlay",children:[o.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:o.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),o.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):o.jsxs("div",{className:"mg-video-placeholder",children:[o.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[o.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),o.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),o.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),o.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),o.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),o.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),o.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),o.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),o.jsx("span",{children:"Video coming soon"})]}),o.jsx("div",{className:"wk-spotify",children:o.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),o.jsxs("div",{className:"mg-exercise-card",children:[o.jsx("h2",{className:"mg-ex-name",children:te.name}),o.jsx("span",{className:`mg-ex-type-badge ${te.type}`,children:te.type==="weighted"?"Weight + Reps":te.type==="reps"?"Reps Only":"Timed"}),o.jsxs("div",{className:"mg-ex-set-info",children:[o.jsxs("span",{className:"mg-ex-set-num",children:["Set ",we+1," of ",te.sets]}),te.type!=="timed"&&o.jsxs("span",{className:"mg-ex-target",children:["Target: ",te.reps," reps"]}),te.type==="timed"&&o.jsxs("span",{className:"mg-ex-target",children:["Target: ",te.time,"s"]})]}),te.type==="weighted"&&o.jsxs("div",{className:"mg-input-area",children:[o.jsxs("div",{className:"mg-input-group",children:[o.jsx("label",{children:"Weight (kg)"}),o.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:wt,onChange:Tt=>_t(Tt.target.value),placeholder:"0"})]}),o.jsxs("div",{className:"mg-input-group",children:[o.jsx("label",{children:"Reps"}),o.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:ot,onChange:Tt=>He(Tt.target.value),placeholder:"0"})]})]}),te.type==="reps"&&o.jsx("div",{className:"mg-input-area",children:o.jsxs("div",{className:"mg-input-group mg-input-single",children:[o.jsx("label",{children:"Reps"}),o.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:ot,onChange:Tt=>He(Tt.target.value),placeholder:"0"})]})}),te.type==="timed"&&o.jsxs("div",{className:"mg-timer-area",children:[o.jsx("div",{className:"mg-timer-display",children:o.jsxs("span",{className:"mg-timer-value",children:[Jt,"s"]})}),st?o.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>$e(!1),children:"Stop"}):o.jsx("button",{className:"mg-timer-btn",onClick:()=>{Jt===0&&qt(te.time),$e(!0)},children:Jt<te.time&&Jt>0?"Resume":"Start Timer"})]}),o.jsx("button",{className:"mg-log-set-btn",onClick:G,children:Je}),ne.sets.length>0&&o.jsx("div",{className:"mg-completed-sets",children:ne.sets.map((Tt,_n)=>o.jsxs("div",{className:"mg-completed-set",children:[o.jsx("span",{className:"mg-completed-set-check",children:""}),o.jsxs("span",{children:["Set ",_n+1,": ",Tt.weight!=null?`${Tt.weight}kg  ${Tt.reps}`:Tt.reps!=null?`${Tt.reps} reps`:`${Tt.time}s`]})]},_n))})]})]}),Zt,Hn&&(()=>{const Tt=J.reduce((kt,An)=>kt+An.sets.length,0),_n=Vc.find(kt=>kt.key===Ot)?.label||"",gr=[{value:J.length,label:"Exercises"},{value:Tt,label:"Sets"}];return o.jsx(_g,{title:`${_n} Complete!`,subtitle:dt?.name,stats:gr,hideShare:!p,onShareJourney:t?At:null,userName:t?.name,onDismissStart:()=>M("randomiser_hub"),onDone:()=>{Ut(!1),St(null),at(null)}})})()]})}return null}const R6=[{key:"trained",label:"Trained",icon:"M4 10v4M8 7v10M8 12h8M16 7v10M20 10v4",color:"#A12F3A",darkColor:"#E8475A"},{key:"protein",label:"Hit Protein",icon:"M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zM12 18c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z",color:"#4caf50",darkColor:"#5CDB61"},{key:"steps",label:"10k Steps",icon:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20M4 12.5A2.5 2.5 0 0 1 6.5 10H20M4 5.5A2.5 2.5 0 0 1 6.5 3H20",color:"#ff9800",darkColor:"#FFB020"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",color:"#7c3aed",darkColor:"#9B5AF2"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z",color:"#2196f3",darkColor:"#42A5F5"}],I6="M12 2l2.4 7.2L22 12l-7.6 2.8L12 22l-2.4-7.2L2 12l7.6-2.8z",D6="#e91e63",M6="#FF4D88",L6=700,wg=42,xl=2*Math.PI*wg,rd=["Every day counts. See you tomorrow!","Consistency is your superpower.","Perfect day  keep the streak alive!","You showed up for yourself today."];function O6(s){const e=new Date(s),t=e.getDay(),i=t===0?-6:1-t;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Eo(s){return s.toISOString().split("T")[0]}function P6(s){return Array.from({length:7},(e,t)=>{const i=new Date(s);return i.setDate(s.getDate()+t),i})}function V6(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Ci(),{isDark:l,toggleTheme:u,accent:h}=Fo(),{isPremium:p,FREE_HABIT_LIMIT:g}=Ru(),y=Nr(),[b,E]=w.useState({}),[T,M]=w.useState([]),[q,H]=w.useState(!0),[U,ae]=w.useState(!1),[$,ie]=w.useState(0),[de,_e]=w.useState(null),[ve,N]=w.useState(null),[S,D]=w.useState(!1),[V,O]=w.useState(!1),[I,A]=w.useState(!1),[Me,Ze]=w.useState(!1),[Q,Te]=w.useState(""),[Ie,qe]=w.useState(null),[ee,L]=w.useState([]),[X,xe]=w.useState(null),ke=w.useRef(null),Ee=w.useRef(null),be=w.useRef(null),Ke=w.useRef(null),ct=w.useRef(!1),Ve=w.useRef({}),sn=w.useRef([]),Sn=w.useRef([]),Hn=w.useRef(null),Ut=w.useRef(rd[Math.floor(Math.random()*rd.length)]),tt=w.useCallback((le,Ae="info")=>{_e({message:le,type:Ae}),setTimeout(()=>_e(null),3e3)},[]),bt=new Date,ht=Eo(bt),Dn=O6(bt),he=P6(Dn),pt=["M","T","W","T","F","S","S"],At=(le,Ae)=>l&&Ae?Ae:le,Ot=[...R6.filter(le=>!ee.includes(le.key)).map(le=>({...le,color:At(le.color,le.darkColor)})),...T.map(le=>({key:`custom_${le.id}`,label:le.label,icon:I6,color:At(D6,M6),isCustom:!0,id:le.id}))],at=p?Ot:Ot.slice(0,g);w.useEffect(()=>{!i&&(!s||!e)&&y("/")},[s,e,i,y]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const Ae=Lt(Se,"habitLogs"),Ye=Rn(Ae,fn("clientId","==",t.id)),gt=await Tn(Ye),lt={};gt.docs.forEach(gn=>{const _s=gn.data();lt[_s.date]={..._s,_id:gn.id}}),E(lt);const hn=await mr(nt(Se,"customHabits",t.id));if(hn.exists()){const gn=hn.data();M(gn.habits||[]),L(gn.hiddenDefaults||[])}let Un=0;const pn=new Date(bt);for(;;){const gn=Eo(pn),_s=lt[gn];if(_s)if(Object.values(_s.habits||{}).filter(Boolean).length>=3)Un++,pn.setDate(pn.getDate()-1);else break;else if(gn===ht)pn.setDate(pn.getDate()-1);else break}ie(Un)}catch(Ae){console.error("Error loading habit logs:",Ae)}finally{H(!1)}})()},[s,t]);const dt=b[ht]||{habits:{}};w.useEffect(()=>{Object.values(dt.habits||{}).filter(Boolean).length<at.length&&I&&A(!1)},[at.length,dt.habits]);const St=async le=>{if(!(!s||U||dt.habits?.[le])){sn.current=[...Array(10)].map((Ye,gt)=>{const lt=gt/10*2*Math.PI,hn=18+Math.random()*20;return{tx:Math.cos(lt)*hn,ty:Math.sin(lt)*hn,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),N(le),setTimeout(()=>N(null),700),navigator.vibrate&&navigator.vibrate(50),ae(!0);try{const gt={...dt.habits||{},[le]:!0},lt=dt._id||`${t.id}_${ht}`;E(Un=>({...Un,[ht]:{clientId:t.id,date:ht,habits:gt,_id:lt}})),await zs(nt(Se,"habitLogs",lt),{clientId:t.id,date:ht,habits:gt}),Object.values(gt).filter(Boolean).length===at.length&&!I&&(Ut.current=rd[Math.floor(Math.random()*rd.length)],Sn.current=[...Array(80)].map((Un,pn)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#FFD700","#ffffff","#9c27b0"][pn%9],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:pn%3})),setTimeout(()=>{D(!0),A(!0),setTimeout(()=>Hn.current?.focus(),1100)},400))}catch(Ye){console.error("Error saving habit:",Ye),tt("Failed to save. Try again.","error"),E(gt=>({...gt,[ht]:{...gt[ht],habits:{...gt[ht]?.habits||{},[le]:!1}}}))}finally{ae(!1)}}},Vt=async le=>{if(!(!s||U)){ae(!0);try{const Ye={...dt.habits||{},[le]:!1},gt=dt._id||`${t.id}_${ht}`;await zs(nt(Se,"habitLogs",gt),{clientId:t.id,date:ht,habits:Ye}),E(lt=>({...lt,[ht]:{clientId:t.id,date:ht,habits:Ye,_id:gt}}))}catch(Ae){console.error("Error undoing habit:",Ae),tt("Failed to undo. Try again.","error")}finally{ae(!1)}}},js=le=>{if(dt.habits?.[le]||!1||U||Ke.current)return;Ke.current=le,xe(le),Ee.current=performance.now();const Ye=Ve.current[le];Ye&&(Ye.style.strokeDashoffset=xl);const gt=lt=>{const hn=lt-Ee.current,Un=Math.min(hn/L6,1),pn=Ve.current[le];pn&&(pn.style.strokeDashoffset=xl-Un*xl),Un<1?be.current=requestAnimationFrame(gt):(Ke.current=null,ct.current=!0,be.current=null,xe(null),St(le))};be.current=requestAnimationFrame(gt)},bs=()=>{if(!Ke.current)return;const le=Ke.current;Ke.current=null,be.current&&(cancelAnimationFrame(be.current),be.current=null),ke.current&&(clearTimeout(ke.current),ke.current=null),Ve.current[le]&&(Ve.current[le].style.strokeDashoffset=xl),xe(null),Ee.current=null};w.useEffect(()=>()=>{be.current&&cancelAnimationFrame(be.current),ke.current&&clearTimeout(ke.current)},[]);const un=w.useCallback(async le=>{if(!t)throw new Error("Not signed in");const Ae=le&&typeof le=="object"&&le.type;await si(Lt(Se,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:Ae?"":le,type:Ae?le.type:"text",imageURL:null,createdAt:fr(),likeCount:0,commentCount:0,...Ae?{metadata:{title:le.title||"",subtitle:le.subtitle||"",stats:le.stats||[],quote:le.quote||"",badges:le.badges||[]}}:{}})},[t]),J=async()=>{const le=Q.trim();if(!le)return;if(!t?.id){tt("Still loading, try again","error");return}const Ae=Date.now().toString(36),Ye=[...T,{id:Ae,label:le}];try{await zs(nt(Se,"customHabits",t.id),{clientId:t.id,habits:Ye,hiddenDefaults:ee},{merge:!0}),M(Ye),Te(""),Ze(!1),tt(`Added "${le}"`,"success")}catch(gt){console.error("Error adding custom habit:",gt),tt(gt?.code==="permission-denied"?"Permission denied  check Firestore rules for customHabits":`Failed to add habit: ${gt?.message||"Unknown error"}`,"error")}},Ce=async le=>{if(!t?.id)return;const Ae=T.filter(Ye=>Ye.id!==le);try{await zs(nt(Se,"customHabits",t.id),{clientId:t.id,habits:Ae,hiddenDefaults:ee},{merge:!0}),M(Ae),qe(null),tt("Habit removed","success")}catch(Ye){console.error("Error deleting habit:",Ye),tt("Failed to remove","error")}},wt=async le=>{if(!t?.id)return;const Ae=[...ee,le];try{await zs(nt(Se,"customHabits",t.id),{clientId:t.id,habits:T,hiddenDefaults:Ae},{merge:!0}),L(Ae),qe(null),tt("Habit removed","success")}catch(Ye){console.error("Error hiding default habit:",Ye),tt("Failed to remove","error")}},_t=he.map(le=>{const Ae=Eo(le),Ye=b[Ae],gt=Ye?Object.values(Ye.habits||{}).filter(Boolean).length:0;return{date:le,dateStr:Ae,completed:gt,total:at.length}}),ot=_t.reduce((le,Ae)=>le+Ae.completed,0),He=_t.reduce((le,Ae)=>le+Ae.total,0),st=He>0?Math.round(ot/He*100):0,$e=Object.values(dt.habits||{}).filter(Boolean).length,Jt=at.length>0?Math.round($e/at.length*100):0,qt=$e===at.length&&at.length>0,Gn=(()=>{const le=Object.keys(b).sort();let Ae=0,Ye=0,gt=null;for(const lt of le){const hn=b[lt];if(Object.values(hn.habits||{}).filter(Boolean).length>=3){if(gt){const pn=new Date(gt);Ye=(new Date(lt)-pn)/(1e3*60*60*24)===1?Ye+1:1}else Ye=1;Ye>Ae&&(Ae=Ye),gt=lt}else Ye=0,gt=null}return Math.max(Ae,$)})(),jn=new Date(bt.getFullYear(),bt.getMonth(),1),Kn=jn.toLocaleString("default",{month:"long"}),tn=new Date(bt.getFullYear(),bt.getMonth()+1,0).getDate(),Vn=(jn.getDay()+6)%7,Mn=Array.from({length:tn},(le,Ae)=>{const Ye=new Date(bt.getFullYear(),bt.getMonth(),Ae+1),gt=Eo(Ye),lt=b[gt],hn=lt?Object.values(lt.habits||{}).filter(Boolean).length:0,Un=Ye>bt;return{day:Ae+1,dateStr:gt,completed:hn,total:at.length,isFuture:Un,isToday:gt===ht}}),rn=at.map(le=>({...le,days:he.map(Ae=>{const Ye=Eo(Ae);return b[Ye]?.habits?.[le.key]||!1})})),Qs=_t.filter(le=>le.completed===le.total&&le.total>0).length;return o.jsx(qo,{children:o.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":h,children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>y("/client/core-buddy"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||q?o.jsx("div",{className:"cbc-loading-inline",children:o.jsx("div",{className:"cbc-loading-spinner"})}):o.jsxs("main",{className:"cbc-main",children:[o.jsxs("div",{className:"cbc-hero anim-fade-up",children:[o.jsxs("div",{className:`cbc-progress-ring${qt?" cbc-ring-complete":""}`,children:[o.jsxs("svg",{viewBox:"0 0 200 200",children:[o.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),o.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-Jt/100*2*Math.PI*80})]}),o.jsxs("div",{className:"cbc-ring-center",children:[o.jsxs("span",{className:"cbc-ring-count",children:[$e,o.jsx("span",{className:"cbc-ring-divider",children:"/"}),at.length]}),o.jsx("span",{className:"cbc-ring-label",children:qt?"complete":"today"})]})]}),o.jsx("p",{className:"cbc-hero-tagline",children:qt?"You showed up for yourself today.":$e===0?"Start your day strong.":`${at.length-$e} to go  keep pushing.`})]}),o.jsxs("div",{className:"cbc-streak-card anim-fade-up-d1",children:[o.jsx("div",{className:"cbc-streak-icon",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}),o.jsxs("div",{className:"cbc-streak-info",children:[o.jsx("span",{className:"cbc-streak-count",children:$}),o.jsx("span",{className:"cbc-streak-label",children:"day streak"})]}),o.jsxs("div",{className:"cbc-streak-best",children:[o.jsx("span",{className:"cbc-streak-best-val",children:Gn}),o.jsx("span",{className:"cbc-streak-best-label",children:"best"})]})]}),o.jsxs("div",{className:"cbc-section anim-fade-up-d2",children:[o.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),o.jsxs("div",{className:"cbc-habits-grid",children:[at.map(le=>{const Ae=dt.habits?.[le.key]||!1,Ye=ve===le.key,gt=X===le.key;return o.jsxs("div",{className:`cbc-habit-tile ${Ae?"cbc-habit-done":""} ${Ye?"cbc-habit-just-checked":""}`,style:{"--habit-color":le.color},children:[p&&o.jsx("button",{className:"cbc-habit-delete",onClick:lt=>{lt.stopPropagation(),qe(le.isCustom?{type:"custom",id:le.id,label:le.label}:{type:"default",key:le.key,label:le.label})},"aria-label":`Remove ${le.label}`,children:o.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),o.jsxs("div",{className:`cbc-habit-ring-touch ${gt?"cbc-holding":""} ${Ae?"cbc-ring-completed":""}`,onPointerDown:lt=>{Ae||(lt.preventDefault(),js(le.key))},onPointerUp:bs,onPointerLeave:bs,onPointerCancel:bs,onClick:lt=>{if(lt.stopPropagation(),ct.current){ct.current=!1;return}Ae&&Vt(le.key)},role:"button",tabIndex:0,"aria-label":Ae?`Undo ${le.label}`:`Press and hold to complete ${le.label}`,onKeyDown:lt=>{(lt.key==="Enter"||lt.key===" ")&&(lt.preventDefault(),Ae?Vt(le.key):St(le.key))},children:[o.jsxs("svg",{className:"cbc-habit-ring-svg",viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"cbc-habit-ring-track",cx:"50",cy:"50",r:wg}),o.jsx("circle",{className:"cbc-habit-ring-fill",ref:lt=>{lt&&(Ve.current[le.key]=lt)},cx:"50",cy:"50",r:wg,style:{stroke:le.color,strokeDasharray:xl,strokeDashoffset:Ae?0:xl}})]}),Ae&&o.jsx("div",{className:"cbc-habit-glow-orb",style:{"--habit-color":le.color}}),o.jsx("div",{className:"cbc-habit-ring-icon",style:{color:le.color},children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:le.icon})})}),Ye&&o.jsx("div",{className:"cbc-particles",children:sn.current.map((lt,hn)=>o.jsx("span",{className:"cbc-particle",style:{"--tx":`${lt.tx}px`,"--ty":`${lt.ty}px`,"--size":`${lt.size}px`,"--particle-color":le.color,animationDuration:`${lt.duration}s`}},hn))})]}),o.jsx("span",{className:"cbc-habit-label",children:le.label}),Ae?o.jsx("span",{className:"cbc-habit-done-tag",children:"Done"}):o.jsx("span",{className:"cbc-habit-hold-hint",children:"Hold to complete"})]},le.key)}),p?o.jsxs("div",{className:"cbc-habit-tile cbc-add-tile",onClick:()=>Ze(!0),role:"button",tabIndex:0,children:[o.jsx("div",{className:"cbc-add-ring",children:o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),o.jsx("span",{className:"cbc-habit-label",children:"Add Habit"}),o.jsx("span",{className:"cbc-habit-hold-hint",children:"Your own"})]}):o.jsxs("div",{className:"cbc-habit-tile cbc-unlock-tile",onClick:()=>y("/upgrade"),role:"button",tabIndex:0,children:[o.jsx("div",{className:"cbc-unlock-ring",children:o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),o.jsx("span",{className:"cbc-habit-label",children:"More Habits"}),o.jsx("span",{className:"cbc-habit-hold-hint",children:"Custom & editable"})]})]})]}),o.jsxs("div",{className:"cbc-section anim-fade-up-d3",children:[o.jsxs("div",{className:"cbc-section-header",children:[o.jsx("h2",{className:"cbc-section-title",children:"This Week"}),o.jsxs("span",{className:"cbc-section-badge",children:[Qs,"/7 perfect"]})]}),o.jsxs("div",{className:"cbc-weekly-card",children:[o.jsxs("div",{className:"cbc-weekly-header",children:[o.jsx("span",{className:"cbc-weekly-habit-name"}),pt.map((le,Ae)=>o.jsx("span",{className:`cbc-weekly-day-label${he[Ae]&&Eo(he[Ae])===ht?" cbc-today-label":""}`,children:le},Ae))]}),rn.map(le=>(le.days.filter(Boolean).length,o.jsxs("div",{className:"cbc-weekly-row",children:[o.jsx("span",{className:"cbc-weekly-habit-name",style:{color:le.color},children:le.label}),le.days.map((Ae,Ye)=>o.jsx("span",{className:`cbc-weekly-dot${Ae?" cbc-dot-done":""}${he[Ye]&&Eo(he[Ye])===ht?" cbc-dot-today":""}`,style:Ae?{background:le.color,borderColor:le.color,boxShadow:`0 0 6px ${le.color}40`}:void 0},Ye))]},le.key))),o.jsxs("div",{className:"cbc-week-summary",children:[o.jsx("div",{className:"cbc-week-summary-bar",children:o.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${st}%`}})}),o.jsxs("span",{className:"cbc-week-summary-text",children:[ot,"/",He," completed (",st,"%)"]})]})]})]}),o.jsxs("div",{className:"cbc-section anim-fade-up-d4",children:[o.jsx("h2",{className:"cbc-section-title",children:Kn}),o.jsxs("div",{className:"cbc-calendar-card",children:[o.jsx("div",{className:"cbc-cal-header",children:["M","T","W","T","F","S","S"].map((le,Ae)=>o.jsx("span",{className:"cbc-cal-day-label",children:le},Ae))}),o.jsxs("div",{className:"cbc-cal-grid",children:[Array.from({length:Vn},(le,Ae)=>o.jsx("span",{className:"cbc-cal-cell cbc-cal-empty"},`e${Ae}`)),Mn.map(le=>{const Ae=le.total>0?le.completed/le.total:0,Ye=le.isFuture?-1:Ae===0?0:Ae<.4?1:Ae<.75?2:Ae<1?3:4;return o.jsx("span",{className:`cbc-cal-cell${le.isToday?" cbc-cal-today":""}${Ye===4?" cbc-cal-perfect":""} cbc-cal-heat-${Ye<0?"future":Ye}`,children:le.day},le.day)})]}),o.jsxs("div",{className:"cbc-cal-legend",children:[o.jsx("span",{className:"cbc-cal-legend-label",children:"Less"}),o.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-0"}),o.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-1"}),o.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-2"}),o.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-3"}),o.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-4"}),o.jsx("span",{className:"cbc-cal-legend-label",children:"More"})]})]})]})]}),o.jsx(sa,{active:"home"}),Me&&o.jsx("div",{className:"cbc-modal-overlay",onClick:()=>Ze(!1),children:o.jsxs("div",{className:"cbc-modal",onClick:le=>le.stopPropagation(),children:[o.jsx("h3",{className:"cbc-modal-title",children:"Add Habit"}),o.jsx("p",{className:"cbc-modal-desc",children:"Track something personal to your routine."}),o.jsx("input",{className:"cbc-modal-input",type:"text",placeholder:"e.g. Meditate, Stretch, Read...",value:Q,onChange:le=>Te(le.target.value),maxLength:30,autoFocus:!0,onKeyDown:le=>le.key==="Enter"&&J()}),o.jsxs("div",{className:"cbc-modal-actions",children:[o.jsx("button",{className:"cbc-modal-cancel",onClick:()=>{Ze(!1),Te("")},children:"Cancel"}),o.jsx("button",{className:"cbc-modal-save",onClick:J,disabled:!Q.trim(),children:"Add"})]})]})}),Ie&&o.jsx("div",{className:"cbc-modal-overlay",onClick:()=>qe(null),children:o.jsxs("div",{className:"cbc-modal",onClick:le=>le.stopPropagation(),children:[o.jsxs("h3",{className:"cbc-modal-title",children:['Remove "',Ie.label,'"?']}),o.jsx("p",{className:"cbc-modal-desc",children:"This will remove the habit from your daily tracker. Past logs won't be affected."}),o.jsxs("div",{className:"cbc-modal-actions",children:[o.jsx("button",{className:"cbc-modal-cancel",onClick:()=>qe(null),children:"Keep"}),o.jsx("button",{className:"cbc-modal-delete",onClick:()=>Ie.type==="custom"?Ce(Ie.id):wt(Ie.key),children:"Remove"})]})]})}),S&&o.jsx(_g,{title:"All Habits Complete!",subtitle:Ut.current,stats:[{value:`${$e}/${at.length}`,label:"Habits"},{value:$||1,label:"Day Streak"}],buttonLabel:"Keep Going",holdLabel:"Hold To Complete Today's Habits",shareType:"habits",hideShare:!p,onShareJourney:t?un:null,userName:t?.name,onDone:()=>{D(!1),O(!1)}}),de&&o.jsx("div",{className:`toast-notification ${de.type}`,children:de.message})]})})}function id(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function y_(s,e){return[s,e].sort().join("_")}function U6(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Ci(),{isDark:l,toggleTheme:u}=Fo(),h=Nr(),[p,g]=w.useState("buddies"),[y,b]=w.useState([]),[E,T]=w.useState([]),[M,q]=w.useState([]),[H,U]=w.useState(""),[ae,$]=w.useState([]),[ie,de]=w.useState([]),[_e,ve]=w.useState(!0),[N,S]=w.useState(null),[D,V]=w.useState(null),O=w.useCallback((ee,L="info")=>{V({message:ee,type:L}),setTimeout(()=>V(null),3500)},[]);w.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const I=w.useCallback(async()=>{if(t){ve(!0);try{const ee=t.id,X=(await Tn(Lt(Se,"clients"))).docs.map(Ve=>({id:Ve.id,...Ve.data()}));de(X);const xe=Object.fromEntries(X.map(Ve=>[Ve.id,Ve])),ke=await Tn(Rn(Lt(Se,"buddies"),fn("user1","==",ee))),Ee=await Tn(Rn(Lt(Se,"buddies"),fn("user2","==",ee))),be=new Set;[...ke.docs,...Ee.docs].forEach(Ve=>{const sn=Ve.data(),Sn=sn.user1===ee?sn.user2:sn.user1;be.add(Sn)}),b(Array.from(be).map(Ve=>xe[Ve]).filter(Boolean));const Ke=await Tn(Rn(Lt(Se,"buddyRequests"),fn("toId","==",ee),fn("status","==","pending")));T(Ke.docs.map(Ve=>({reqId:Ve.id,...Ve.data(),fromClient:xe[Ve.data().fromId]})).filter(Ve=>Ve.fromClient));const ct=await Tn(Rn(Lt(Se,"buddyRequests"),fn("fromId","==",ee),fn("status","==","pending")));q(ct.docs.map(Ve=>({reqId:Ve.id,...Ve.data(),toClient:xe[Ve.data().toId]})).filter(Ve=>Ve.toClient))}catch(ee){console.error("Error fetching buddy data:",ee),O("Failed to load buddies","error")}finally{ve(!1)}}},[t,O]);w.useEffect(()=>{I()},[I]),w.useEffect(()=>{if(!H.trim()||!t){$([]);return}const ee=H.toLowerCase(),L=t.id,X=new Set(y.map(be=>be.id)),xe=new Set(M.map(be=>be.toId)),ke=new Set(E.map(be=>be.fromId)),Ee=ie.filter(be=>be.id===L||!be.name||!be.coreBuddyAccess&&be.clientType!=="core_buddy"?!1:be.name.toLowerCase().includes(ee)).map(be=>({...be,isBuddy:X.has(be.id),isPendingOut:xe.has(be.id),isPendingIn:ke.has(be.id)})).slice(0,20);$(Ee)},[H,ie,y,M,E,t]);const A=async(ee,L)=>{if(!(!t||ee===t.id))try{await si(Lt(Se,"notifications"),{toId:ee,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:L,read:!1,createdAt:fr()})}catch(X){console.error("Notification error:",X),X.code==="permission-denied"&&O("Notifications blocked  check Firestore rules","error")}},Me=async ee=>{S(ee);try{const L=`${t.id}_${ee}`;await zs(nt(Se,"buddyRequests",L),{fromId:t.id,toId:ee,status:"pending",createdAt:fr()}),await A(ee,"buddy_request"),O("Buddy request sent!","success"),await I()}catch(L){console.error("Error sending request:",L),O("Failed to send request","error")}finally{S(null)}},Ze=async ee=>{S(ee.reqId);try{const L=y_(ee.fromId,t.id);await zs(nt(Se,"buddies",L),{user1:[ee.fromId,t.id].sort()[0],user2:[ee.fromId,t.id].sort()[1],connectedAt:fr()}),await Sr(nt(Se,"buddyRequests",ee.reqId)),await A(ee.fromId,"buddy_accept"),O("Buddy added!","success"),await I()}catch(L){console.error("Error accepting request:",L),O("Failed to accept","error")}finally{S(null)}},Q=async ee=>{S(ee.reqId);try{await Sr(nt(Se,"buddyRequests",ee.reqId)),O("Request declined","info"),await I()}catch(L){console.error("Error declining:",L),O("Failed to decline","error")}finally{S(null)}},Te=async ee=>{S(ee.reqId);try{await Sr(nt(Se,"buddyRequests",ee.reqId)),O("Request cancelled","info"),await I()}catch(L){console.error("Error cancelling:",L),O("Failed to cancel","error")}finally{S(null)}},Ie=async ee=>{S(ee);try{const L=y_(t.id,ee);await Sr(nt(Se,"buddies",L)),O("Buddy removed","info"),await I()}catch(L){console.error("Error removing buddy:",L),O("Failed to remove buddy","error")}finally{S(null)}},qe=E.length;return i?o.jsx("div",{className:"bdy-loading",children:o.jsx("div",{className:"bdy-spinner"})}):!s||!e||!t?null:o.jsx(qo,{children:o.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),o.jsxs("main",{className:"bdy-main",children:[o.jsx("h1",{className:"bdy-title",children:"Buddies"}),o.jsxs("button",{className:"bdy-leaderboard-link",onClick:()=>h("/client/leaderboard"),children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),o.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),o.jsx("rect",{x:"6",y:"9",width:"12",height:"13",rx:"2"}),o.jsx("path",{d:"M12 9v13"}),o.jsx("path",{d:"M2 22h20"})]}),o.jsx("span",{children:"Leaderboard"}),o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsxs("div",{className:"bdy-tabs",children:[o.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),o.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),o.jsx("span",{children:"My Buddies"})]}),o.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),o.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),o.jsx("span",{children:"Requests"}),qe>0&&o.jsx("span",{className:"bdy-tab-badge",children:qe})]}),o.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("span",{children:"Find"})]})]}),_e?o.jsx("div",{className:"bdy-content-loading",children:o.jsx("div",{className:"bdy-spinner"})}):o.jsxs(o.Fragment,{children:[p==="buddies"&&o.jsx("div",{className:"bdy-section",children:y.length===0?o.jsxs("div",{className:"bdy-empty",children:[o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),o.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),o.jsx("h3",{children:"No buddies yet"}),o.jsx("p",{children:"Find members and send buddy requests to connect!"}),o.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):o.jsx("div",{className:"bdy-list",children:y.map(ee=>o.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ee.id}`),children:[o.jsx("div",{className:"bdy-avatar",children:ee.photoURL?o.jsx("img",{src:ee.photoURL,alt:ee.name}):o.jsx("span",{children:id(ee.name)})}),o.jsx("div",{className:"bdy-card-info",children:o.jsx("span",{className:"bdy-card-name",children:ee.name})}),o.jsx("button",{className:"bdy-remove-btn",onClick:L=>{L.stopPropagation(),Ie(ee.id)},disabled:N===ee.id,"aria-label":"Remove buddy",children:N===ee.id?o.jsx("div",{className:"bdy-btn-spinner"}):o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ee.id))})}),p==="requests"&&o.jsxs("div",{className:"bdy-section",children:[E.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),o.jsx("div",{className:"bdy-list",children:E.map(ee=>o.jsxs("div",{className:"bdy-card",children:[o.jsx("div",{className:"bdy-avatar",children:ee.fromClient.photoURL?o.jsx("img",{src:ee.fromClient.photoURL,alt:ee.fromClient.name}):o.jsx("span",{children:id(ee.fromClient.name)})}),o.jsxs("div",{className:"bdy-card-info",children:[o.jsx("span",{className:"bdy-card-name",children:ee.fromClient.name}),o.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),o.jsxs("div",{className:"bdy-action-pair",children:[o.jsx("button",{className:"bdy-accept-btn",onClick:()=>Ze(ee),disabled:N===ee.reqId,children:N===ee.reqId?o.jsx("div",{className:"bdy-btn-spinner"}):o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:o.jsx("path",{d:"M5 13l4 4L19 7"})})}),o.jsx("button",{className:"bdy-decline-btn",onClick:()=>Q(ee),disabled:N===ee.reqId,children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},ee.reqId))})]}),M.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"bdy-section-title",children:"Sent"}),o.jsx("div",{className:"bdy-list",children:M.map(ee=>o.jsxs("div",{className:"bdy-card",children:[o.jsx("div",{className:"bdy-avatar",children:ee.toClient?.photoURL?o.jsx("img",{src:ee.toClient.photoURL,alt:ee.toClient.name}):o.jsx("span",{children:id(ee.toClient?.name)})}),o.jsxs("div",{className:"bdy-card-info",children:[o.jsx("span",{className:"bdy-card-name",children:ee.toClient?.name}),o.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),o.jsx("button",{className:"bdy-cancel-btn",onClick:()=>Te(ee),disabled:N===ee.reqId,children:N===ee.reqId?o.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},ee.reqId))})]}),E.length===0&&M.length===0&&o.jsxs("div",{className:"bdy-empty",children:[o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[o.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),o.jsx("h3",{children:"No pending requests"}),o.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&o.jsxs("div",{className:"bdy-section",children:[o.jsxs("div",{className:"bdy-search-bar",children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("input",{type:"text",placeholder:"Search by name...",value:H,onChange:ee=>U(ee.target.value),autoFocus:!0}),H&&o.jsx("button",{className:"bdy-search-clear",onClick:()=>U(""),children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),H.trim()&&ae.length===0&&o.jsx("div",{className:"bdy-empty bdy-empty-sm",children:o.jsxs("p",{children:['No members found for "',H,'"']})}),ae.length>0&&o.jsx("div",{className:"bdy-list",children:ae.map(ee=>o.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ee.id}`),children:[o.jsx("div",{className:"bdy-avatar",children:ee.photoURL?o.jsx("img",{src:ee.photoURL,alt:ee.name}):o.jsx("span",{children:id(ee.name)})}),o.jsxs("div",{className:"bdy-card-info",children:[o.jsx("span",{className:"bdy-card-name",children:ee.name}),ee.isBuddy&&o.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),ee.isBuddy?o.jsx("span",{className:"bdy-status-icon",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:o.jsx("path",{d:"M5 13l4 4L19 7"})})}):ee.isPendingOut?o.jsx("span",{className:"bdy-pending-label",children:"Pending"}):ee.isPendingIn?o.jsx("button",{className:"bdy-accept-btn",onClick:L=>{L.stopPropagation();const X=E.find(xe=>xe.fromId===ee.id);X&&Ze(X)},disabled:!!N,children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:o.jsx("path",{d:"M5 13l4 4L19 7"})})}):o.jsx("button",{className:"bdy-add-btn",onClick:L=>{L.stopPropagation(),Me(ee.id)},disabled:N===ee.id,children:N===ee.id?o.jsx("div",{className:"bdy-btn-spinner"}):o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},ee.id))})]})]})]}),o.jsx(sa,{}),D&&o.jsxs("div",{className:`toast-notification ${D.type}`,children:[o.jsx("span",{className:"toast-icon",children:D.type==="success"?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M5 13 L9 17 L19 7"})}):D.type==="error"?o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),o.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),o.jsx("span",{className:"toast-message",children:D.message})]})]})})}function ad(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Bp(s,e){return[s,e].sort().join("_")}const B6=5;function zp(s){return s.toISOString().split("T")[0]}function v_(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function z6(){const{userId:s}=tS(),{currentUser:e,isClient:t,clientData:i,loading:l}=Ci(),{isDark:u,toggleTheme:h}=Fo(),p=Nr(),[g,y]=w.useState(null),[b,E]=w.useState("none"),[T,M]=w.useState(null),[q,H]=w.useState(!0),[U,ae]=w.useState(!1),[$,ie]=w.useState(null),[de,_e]=w.useState([]),[ve,N]=w.useState(!1),[S,D]=w.useState(new Set),[V,O]=w.useState(new Set),[I,A]=w.useState({}),[Me,Ze]=w.useState({}),[Q,Te]=w.useState({}),[Ie,qe]=w.useState(!0),[ee,L]=w.useState(0),[X,xe]=w.useState(0),[ke,Ee]=w.useState(0),[be,Ke]=w.useState([]),[ct,Ve]=w.useState(!1),[sn,Sn]=w.useState(null),[Hn,Ut]=w.useState([]),tt=w.useCallback((J,Ce="info")=>{ie({message:J,type:Ce}),setTimeout(()=>ie(null),3500)},[]);w.useEffect(()=>{!l&&(!e||!t)&&p("/")},[e,t,l,p]),w.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),w.useEffect(()=>{if(!i||!s||i.id===s)return;let J=!1;return(async()=>{H(!0);try{const _t=(await Tn(Lt(Se,"clients"))).docs.map($e=>({id:$e.id,...$e.data()})).find($e=>$e.id===s);if(!_t){J||H(!1);return}J||y(_t);const ot=i.id,He=Bp(ot,s);if((await mr(nt(Se,"buddies",He))).exists())J||E("buddy");else{const $e=`${ot}_${s}`,Jt=await mr(nt(Se,"buddyRequests",$e));if(Jt.exists()&&Jt.data().status==="pending")J||(E("pending_out"),M($e));else{const qt=`${s}_${ot}`,Gn=await mr(nt(Se,"buddyRequests",qt));Gn.exists()&&Gn.data().status==="pending"?J||(E("pending_in"),M(qt)):J||E("none")}}}catch(Ce){console.error("Error loading profile:",Ce)}finally{J||H(!1)}})(),()=>{J=!0}},[i,s]),w.useEffect(()=>{if(!s||!g)return;let J=!1;return(async()=>{qe(!0);try{const Ce=await Tn(Rn(Lt(Se,"workoutLogs"),fn("clientId","==",s)));if(J)return;const wt=Ce.docs.length;L(wt);let _t=0;const ot=Ce.docs.map(st=>st.data().date).filter(Boolean).sort().reverse();if(ot.length>0){const st=new Date;let $e=new Date(st);for(let Jt=0;Jt<52;Jt++){const qt=new Date($e),Gn=qt.getDay(),jn=Gn===0?6:Gn-1;qt.setDate(qt.getDate()-jn),qt.setHours(0,0,0,0);const Kn=new Date(qt);Kn.setDate(Kn.getDate()+7);const tn=zp(qt),Vn=zp(Kn);if(ot.some(rn=>rn>=tn&&rn<Vn))_t++;else{if(Jt>0)break;break}$e.setDate($e.getDate()-7)}}J||xe(_t);let He=0;for(let st=0;st<30;st++){const $e=new Date;$e.setDate($e.getDate()-st);const Jt=zp($e);try{const qt=await Tn(Rn(Lt(Se,"habitLogs"),fn("clientId","==",s),fn("date","==",Jt)));if(qt.empty)break;{const Gn=qt.docs[0].data().habits||{};if(Object.values(Gn).filter(Boolean).length>=B6)He++;else break}}catch{break}}J||Ee(He)}catch(Ce){console.error("Error loading buddy stats:",Ce)}finally{J||qe(!1)}})(),()=>{J=!0}},[s,g]),w.useEffect(()=>{if(!i)return;const J=i.id;(async()=>{try{const[Ce,wt,_t]=await Promise.all([Tn(Rn(Lt(Se,"buddies"),fn("user1","==",J))),Tn(Rn(Lt(Se,"buddies"),fn("user2","==",J))),Tn(Lt(Se,"clients"))]),ot=new Set;[...Ce.docs,...wt.docs].forEach(st=>{const $e=st.data();ot.add($e.user1===J?$e.user2:$e.user1)});const He={};_t.docs.forEach(st=>{He[st.id]=st.data()}),Ke(Array.from(ot).filter(st=>He[st]).map(st=>({id:st,name:He[st].name,photoURL:He[st].photoURL||null})))}catch(Ce){console.error("Error loading buddies for mentions:",Ce)}})()},[i]);const bt=async(J,Ce,wt={})=>{if(!(!i||J===i.id))try{await si(Lt(Se,"notifications"),{toId:J,fromId:i.id,fromName:i.name||"Someone",fromPhotoURL:i.photoURL||null,type:Ce,read:!1,createdAt:fr(),...wt})}catch(_t){console.error("Notification error:",_t),_t.code==="permission-denied"&&tt("Notifications blocked  check Firestore rules","error")}},ht=async()=>{ae(!0);try{const J=`${i.id}_${s}`;await zs(nt(Se,"buddyRequests",J),{fromId:i.id,toId:s,status:"pending",createdAt:fr()}),await bt(s,"buddy_request"),E("pending_out"),M(J),tt("Buddy request sent!","success")}catch(J){console.error(J),tt("Failed to send request","error")}finally{ae(!1)}},Dn=async()=>{if(T){ae(!0);try{const J=Bp(i.id,s);await zs(nt(Se,"buddies",J),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:fr()}),await Sr(nt(Se,"buddyRequests",T)),await bt(s,"buddy_accept"),E("buddy"),tt("Buddy added!","success")}catch(J){console.error(J),tt("Failed to accept","error")}finally{ae(!1)}}},he=async()=>{if(T){ae(!0);try{await Sr(nt(Se,"buddyRequests",T)),E("none"),tt(b==="pending_out"?"Request cancelled":"Request declined","info")}catch(J){console.error(J),tt("Failed","error")}finally{ae(!1)}}},pt=async()=>{ae(!0);try{const J=Bp(i.id,s);await Sr(nt(Se,"buddies",J)),E("none"),tt("Buddy removed","info")}catch(J){console.error(J),tt("Failed to remove","error")}finally{ae(!1)}},At=w.useCallback(async()=>{if(s){N(!0);try{const J=await Tn(Rn(Lt(Se,"posts"),fn("authorId","==",s),hu("createdAt","desc"),du(30)));if(_e(J.docs.map(Ce=>({id:Ce.id,...Ce.data()}))),i){const Ce=await Tn(Rn(Lt(Se,"postLikes"),fn("userId","==",i.id)));D(new Set(Ce.docs.map(wt=>wt.data().postId)))}}catch(J){console.error("Error loading journey:",J)}finally{N(!1)}}},[s,i]);w.useEffect(()=>{!q&&g&&At()},[q,g,At]);const Ot=async J=>{if(window.confirm("Delete this post?"))try{await Sr(nt(Se,"posts",J)),_e(Ce=>Ce.filter(wt=>wt.id!==J)),tt("Post deleted","info")}catch(Ce){console.error("Delete error:",Ce),tt("Failed to delete","error")}},at=async J=>{if(!i)return;const Ce=i.id,wt=`${J}_${Ce}`,_t=S.has(J),ot=new Set(S);_t?ot.delete(J):ot.add(J),D(ot),_e(He=>He.map(st=>st.id===J?{...st,likeCount:Math.max(0,(st.likeCount||0)+(_t?-1:1))}:st));try{if(_t)await Sr(nt(Se,"postLikes",wt)),await $r(nt(Se,"posts",J),{likeCount:So(-1)});else{await zs(nt(Se,"postLikes",wt),{postId:J,userId:Ce,createdAt:fr()}),await $r(nt(Se,"posts",J),{likeCount:So(1)});const He=de.find(st=>st.id===J);He&&bt(He.authorId,"like",{postId:J})}}catch(He){console.error("Like error:",He),At()}},dt=async J=>{try{const Ce=await Tn(Rn(Lt(Se,"postComments"),fn("postId","==",J),hu("createdAt","asc"),du(50)));A(wt=>({...wt,[J]:Ce.docs.map(_t=>({id:_t.id,..._t.data()}))}))}catch(Ce){console.error("Error loading comments:",Ce)}},St=J=>{const Ce=new Set(V);Ce.has(J)?Ce.delete(J):(Ce.add(J),I[J]||dt(J)),O(Ce)},Vt=(J,Ce)=>{const wt=J.match(/@(\w*)$/);if(wt){Ve(!0),Sn(Ce);const _t=be.filter(ot=>ot.name&&ot.name.toLowerCase().includes(wt[1].toLowerCase())).slice(0,5);Ut(_t)}else Ve(!1),Ut([])},js=(J,Ce)=>{const _t=(Me[Ce]||"").replace(/@\w*$/,`@${J.name} `);Ze(ot=>({...ot,[Ce]:_t})),Ve(!1),Ut([])},bs=(J,Ce)=>{Ze(wt=>({...wt,[J]:Ce})),Vt(Ce,J)},un=async J=>{const Ce=(Me[J]||"").trim();if(!(!Ce||!i)){Te(wt=>({...wt,[J]:!0}));try{await si(Lt(Se,"postComments"),{postId:J,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:Ce,createdAt:fr()}),await $r(nt(Se,"posts",J),{commentCount:So(1)});const wt=de.find(ot=>ot.id===J);wt&&bt(wt.authorId,"comment",{postId:J});const _t=Ce.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(_t){const ot=new Set;_t.forEach(He=>{const st=He.slice(1).trim(),$e=be.find(Jt=>Jt.name&&Jt.name.toLowerCase()===st.toLowerCase());$e&&!ot.has($e.id)&&(ot.add($e.id),bt($e.id,"mention",{postId:J}))})}Ze(ot=>({...ot,[J]:""})),_e(ot=>ot.map(He=>He.id===J?{...He,commentCount:(He.commentCount||0)+1}:He)),await dt(J)}catch(wt){console.error("Comment error:",wt),tt("Failed to comment","error")}finally{Te(wt=>({...wt,[J]:!1}))}}};return l||q||!i?o.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:o.jsx("div",{className:"prf-spinner"})}):!e||!t?null:g?o.jsx(qo,{children:o.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions",children:o.jsx("button",{onClick:h,"aria-label":"Toggle theme",children:u?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),o.jsxs("main",{className:"prf-main",children:[o.jsxs("div",{className:"prf-hero",children:[o.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?o.jsx("img",{src:g.photoURL,alt:g.name}):o.jsx("span",{children:ad(g.name)})}),o.jsx("h1",{className:"prf-name",children:g.name}),o.jsxs("div",{className:"prf-buddy-action",children:[b==="none"&&o.jsx("button",{className:"prf-btn prf-btn-primary",onClick:ht,disabled:U,children:U?o.jsx("div",{className:"prf-btn-spinner"}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),b==="pending_out"&&o.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:he,disabled:U,children:U?o.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),b==="pending_in"&&o.jsxs("div",{className:"prf-btn-pair",children:[o.jsx("button",{className:"prf-btn prf-btn-success",onClick:Dn,disabled:U,children:U?o.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),o.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:he,disabled:U,children:"Decline"})]}),b==="buddy"&&o.jsx("button",{className:"prf-btn prf-btn-danger",onClick:pt,disabled:U,children:U?o.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),Ie?o.jsx("div",{className:"prf-stats-loading",children:o.jsx("div",{className:"prf-spinner"})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"prf-stats",children:[o.jsxs("div",{className:"prf-stat",children:[o.jsx("span",{className:"prf-stat-value",children:ee}),o.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),o.jsxs("div",{className:"prf-stat",children:[o.jsxs("span",{className:"prf-stat-value",children:[X,o.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),o.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),ke>0&&o.jsx("div",{className:"prf-info-row",children:o.jsxs("div",{className:"prf-info-card info-habit",children:[o.jsx("div",{className:"prf-info-icon",children:o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),o.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})}),o.jsxs("div",{className:"prf-info-text",children:[o.jsxs("span",{className:"prf-info-value",children:[ke," day",ke!==1?"s":""]}),o.jsx("span",{className:"prf-info-sub",children:"Habit Streak"})]})]})})]}),o.jsxs("div",{className:"prf-section",children:[o.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),ve?o.jsx("div",{className:"journey-loading",children:o.jsx("div",{className:"prf-spinner"})}):de.length===0?o.jsxs("div",{className:"journey-empty",children:[o.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),o.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),o.jsx("path",{d:"M21 15l-5-5L5 21"})]}),o.jsx("p",{children:"No posts yet"})]}):o.jsx("div",{className:"journey-list",children:de.map(J=>o.jsxs("div",{className:"journey-post",children:[o.jsxs("div",{className:"journey-post-header",children:[o.jsx("div",{className:"journey-post-avatar",children:J.authorPhotoURL?o.jsx("img",{src:J.authorPhotoURL,alt:""}):o.jsx("span",{children:ad(J.authorName)})}),o.jsxs("div",{className:"journey-post-meta",children:[o.jsx("span",{className:"journey-post-name",children:J.authorName}),o.jsx("span",{className:"journey-post-time",children:v_(J.createdAt)})]}),J.authorId===i.id&&o.jsx("button",{className:"journey-delete-btn",onClick:()=>Ot(J.id),"aria-label":"Delete post",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),o.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),J.type==="workout_summary"&&J.metadata?o.jsxs("div",{className:"journey-card",children:[o.jsx("div",{className:"journey-card-logo-frame",children:o.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),o.jsx("h3",{className:"journey-card-title",children:J.metadata.title}),J.metadata.stats?.length>0&&o.jsx("p",{className:"journey-card-stats-line",children:J.metadata.stats.map(Ce=>`${Ce.value} ${Ce.label}`).join("    ")}),!J.metadata.stats?.length&&J.metadata.subtitle&&o.jsx("p",{className:"journey-card-stats-line",children:J.metadata.subtitle}),o.jsx("p",{className:"journey-card-cta",children:"I just completed a workout using Core Buddy "}),o.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):J.type==="badge_earned"&&J.metadata?o.jsxs("div",{className:"journey-card",children:[o.jsx("div",{className:"journey-card-logo-frame journey-card-logo-badge",children:o.jsx("img",{src:"/Logo.webp",alt:J.metadata.title,className:"journey-card-logo-img"})}),o.jsx("h3",{className:"journey-card-title",children:J.metadata.title}),J.metadata.badgeDesc&&o.jsx("p",{className:"journey-card-stats-line",children:J.metadata.badgeDesc}),o.jsx("p",{className:"journey-card-cta",children:"I just earned a badge on Core Buddy"}),o.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):J.type==="habits_summary"&&J.metadata?o.jsxs("div",{className:"journey-card",children:[o.jsx("div",{className:"journey-card-logo-frame",children:o.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),o.jsx("h3",{className:"journey-card-title",children:J.metadata.title}),J.metadata.stats?.length>0&&o.jsx("p",{className:"journey-card-stats-line",children:J.metadata.stats.map(Ce=>`${Ce.value} ${Ce.label}`).join("    ")}),J.metadata.subtitle&&o.jsx("p",{className:"journey-card-stats-line",children:J.metadata.subtitle}),o.jsx("p",{className:"journey-card-cta",children:"I just completed my daily habits with Core Buddy "}),o.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):o.jsxs(o.Fragment,{children:[J.content&&o.jsx("p",{className:"journey-post-content",children:J.content}),J.imageURL&&o.jsx("div",{className:"journey-post-image",children:o.jsx("img",{src:J.imageURL,alt:"Post",loading:"lazy"})})]}),o.jsxs("div",{className:"journey-post-actions",children:[o.jsxs("button",{className:`journey-action-btn${S.has(J.id)?" liked":""}`,onClick:()=>at(J.id),children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:S.has(J.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),o.jsx("span",{children:J.likeCount||0})]}),o.jsxs("button",{className:`journey-action-btn${V.has(J.id)?" active":""}`,onClick:()=>St(J.id),children:[o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),o.jsx("span",{children:J.commentCount||0})]})]}),V.has(J.id)&&o.jsxs("div",{className:"journey-comments",children:[I[J.id]?.length>0?I[J.id].map(Ce=>o.jsxs("div",{className:"journey-comment",children:[o.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${Ce.authorId}`),children:Ce.authorPhotoURL?o.jsx("img",{src:Ce.authorPhotoURL,alt:""}):o.jsx("span",{children:ad(Ce.authorName)})}),o.jsxs("div",{className:"journey-comment-body",children:[o.jsxs("div",{className:"journey-comment-bubble",children:[o.jsx("span",{className:"journey-comment-name",children:Ce.authorName}),o.jsx("span",{className:"journey-comment-text",children:Ce.content})]}),o.jsx("span",{className:"journey-comment-time",children:v_(Ce.createdAt)})]})]},Ce.id)):o.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),o.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[o.jsx("input",{type:"text",placeholder:"Comment... (@ to mention)",value:Me[J.id]||"",onChange:Ce=>bs(J.id,Ce.target.value),onKeyDown:Ce=>{Ce.key==="Enter"&&un(J.id)},maxLength:300}),ct&&sn===J.id&&Hn.length>0&&o.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:Hn.map(Ce=>o.jsxs("button",{className:"mention-option",onClick:()=>js(Ce,J.id),children:[o.jsx("div",{className:"mention-option-avatar",children:Ce.photoURL?o.jsx("img",{src:Ce.photoURL,alt:""}):o.jsx("span",{children:ad(Ce.name)})}),o.jsx("span",{children:Ce.name})]},Ce.id))}),o.jsx("button",{onClick:()=>un(J.id),disabled:!(Me[J.id]||"").trim()||Q[J.id],children:Q[J.id]?o.jsx("div",{className:"journey-btn-spinner-sm"}):o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),o.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},J.id))})]})]}),o.jsx(sa,{}),$&&o.jsxs("div",{className:`toast-notification ${$.type}`,children:[o.jsx("span",{className:"toast-icon",children:$.type==="success"?o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M5 13 L9 17 L19 7"})}):$.type==="error"?o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),o.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),o.jsx("span",{className:"toast-message",children:$.message})]})]})}):o.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[o.jsx("header",{className:"client-header",children:o.jsxs("div",{className:"header-content",children:[o.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),o.jsx("div",{className:"header-actions"})]})}),o.jsx("main",{className:"prf-main",children:o.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),o.jsx(sa,{})]})}const Fp=[{text:"Build your dashboard...",bold:"your way"},{text:"Pick what matters to you...",bold:"nothing else"},{text:"Your goals, your layout...",bold:"your rules"}],b_=[{id:"stats",label:"Stats Rings",desc:"Programme %, workouts this week, habits today",icon:"rings",defaultOn:!0},{id:"workouts",label:"Workouts",desc:"Sessions this week and total count",icon:"dumbbell",defaultOn:!0},{id:"habits",label:"Habits",desc:"Daily habit tracker dots",icon:"check",defaultOn:!0},{id:"pbs",label:"Personal Bests",desc:"Your top lifts at a glance",icon:"trophy"},{id:"nutrition",label:"Nutrition",desc:"Macro rings  protein, carbs, fats, cals",icon:"apple"},{id:"leaderboard",label:"Leaderboard",desc:"See where you rank among buddies",icon:"podium"},{id:"journey",label:"Journey",desc:"Your posts, likes and comments feed",icon:"feed"},{id:"coach",label:"Coach Message",desc:"Motivational nudge from Buddy",icon:"message",defaultOn:!0},{id:"nudge",label:"Smart Nudge",desc:"Contextual reminder of what to do next",icon:"lightbulb"}];function F6(s){switch(s){case"rings":return o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("circle",{cx:"12",cy:"12",r:"6"}),o.jsx("circle",{cx:"12",cy:"12",r:"2"})]});case"dumbbell":return o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M6.5 6.5h11v11h-11z",strokeLinejoin:"round"}),o.jsx("line",{x1:"2",y1:"12",x2:"6.5",y2:"12"}),o.jsx("line",{x1:"17.5",y1:"12",x2:"22",y2:"12"})]});case"check":return o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"20 6 9 17 4 12"})});case"trophy":return o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M6 9H3V6a1 1 0 0 1 1-1h2M18 9h3V6a1 1 0 0 0-1-1h-2"}),o.jsx("path",{d:"M6 5h12v7a6 6 0 0 1-12 0V5z"}),o.jsx("path",{d:"M9 21h6"}),o.jsx("path",{d:"M12 17v4"})]});case"apple":return o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M12 3c-1.5 0-3 1-3 1s-3-.5-4.5 1.5S3 9 3 12s1.5 6 3 8 3 3 6 3 4.5-1 6-3 3-5 3-8-1.5-4-3-6.5S13.5 3 12 3z"}),o.jsx("path",{d:"M12 3c0 0 1-2 3-2"})]});case"podium":return o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"2",y:"14",width:"6",height:"8",rx:"1"}),o.jsx("rect",{x:"9",y:"8",width:"6",height:"14",rx:"1"}),o.jsx("rect",{x:"16",y:"11",width:"6",height:"11",rx:"1"})]});case"medal":return o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"15",r:"6"}),o.jsx("path",{d:"M8.21 13.89L7 2h10l-1.21 11.89"})]});case"feed":return o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3"}),o.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),o.jsx("line",{x1:"3",y1:"15",x2:"21",y2:"15"})]});case"message":return o.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})});case"lightbulb":return o.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M9 18h6"}),o.jsx("path",{d:"M10 22h4"}),o.jsx("path",{d:"M12 2a7 7 0 0 0-4 12.7V17h8v-2.3A7 7 0 0 0 12 2z"})]});default:return null}}function q6(){const s=Nr(),{clientData:e,currentUser:t,updateClientData:i,resolveClient:l}=Ci(),[u,h]=w.useState({hours:0,minutes:0,seconds:0}),[p,g]=w.useState(0),[y,b]=w.useState(0),[E,T]=w.useState(null),[M,q]=w.useState(!1),H=w.useRef(null),[U,ae]=w.useState(()=>{const I=e?.dashboardWidgets;return I&&Array.isArray(I)?I:b_.filter(A=>A.defaultOn).map(A=>A.id)}),[$,ie]=w.useState(!1),[de,_e]=w.useState(!1),[ve,N]=w.useState(null);w.useEffect(()=>{e?.photoURL&&T(e.photoURL)},[e?.photoURL]),w.useEffect(()=>{const I=()=>{const Me=new Date,Ze=new Date(Me);Ze.setHours(23,59,59,999);const Q=Ze-Me;h({hours:Math.floor(Q/36e5),minutes:Math.floor(Q%36e5/6e4),seconds:Math.floor(Q%6e4/1e3)}),g(60-Math.floor(Q%6e4/1e3))};I();const A=setInterval(I,1e3);return()=>clearInterval(A)},[]),w.useEffect(()=>{const I=setInterval(()=>b(A=>(A+1)%Fp.length),8e3);return()=>clearInterval(I)},[]);const S=async I=>{const A=I.target.files?.[0];if(!(!A||!e?.id)){q(!0);try{const Me=Ba(za,`profilePhotos/${e.id}`);await bd(Me,A);const Ze=await Ao(Me);await $r(nt(Se,"clients",e.id),{photoURL:Ze}),T(Ze),i({photoURL:Ze})}catch(Me){console.error("Photo upload error:",Me)}finally{q(!1)}}},D=I=>{_e(!1),ae(A=>A.includes(I)?A.filter(Me=>Me!==I):[...A,I])},V=(I,A)=>{_e(!1),ae(Me=>{const Ze=Me.indexOf(I);if(Ze<0)return Me;const Q=Ze+A;if(Q<0||Q>=Me.length)return Me;const Te=[...Me];return[Te[Ze],Te[Q]]=[Te[Q],Te[Ze]],Te})},O=async()=>{ie(!0),N(null);try{const I=e||await l();if(!I?.id){N("Could not find your profile. Try refreshing."),ie(!1);return}await $r(nt(Se,"clients",I.id),{dashboardWidgets:U}),i({dashboardWidgets:U}),_e(!0)}catch(I){console.error("Save config error:",I),N("Save failed  please try again.")}finally{ie(!1)}};return o.jsx(qo,{children:o.jsxs("div",{className:"bldr-page",children:[o.jsxs("div",{className:"bldr-container",children:[o.jsxs("div",{className:"bldr-header",children:[o.jsx("button",{className:"bldr-back",onClick:()=>s("/client/core-buddy"),children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M15 18l-6-6 6-6"})})}),o.jsx("h1",{className:"bldr-title",children:"Build Your Dashboard"})]}),o.jsxs("div",{className:"bldr-ring-container",children:[o.jsxs("div",{className:"bldr-ring",children:[o.jsx("svg",{className:"bldr-ring-svg",viewBox:"0 0 200 200",children:NE.map((I,A)=>o.jsx("line",{x1:I.x1,y1:I.y1,x2:I.x2,y2:I.y2,className:`bldr-tick ${A<p?"elapsed":"remaining"}`,strokeWidth:I.thick?"3":"2"},A))}),o.jsxs("div",{className:"bldr-ring-center",children:[o.jsxs("div",{className:"bldr-ring-photo",onClick:()=>H.current?.click(),children:[o.jsx("img",{src:E||"/Logo.webp",alt:E?"Profile":"Mind Core Fitness"}),o.jsx("div",{className:`bldr-photo-overlay${M?" uploading":""}`,children:M?o.jsx("div",{className:"bldr-photo-spinner"}):o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[o.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),o.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),o.jsx("input",{ref:H,type:"file",accept:"image/*",onChange:S,style:{display:"none"}})]}),!E&&!M&&o.jsx("div",{className:"bldr-photo-badge",onClick:()=>H.current?.click(),children:o.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[o.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),o.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),o.jsxs("div",{className:"bldr-countdown",children:[o.jsx("span",{className:"bldr-timer-digit",children:String(u.hours).padStart(2,"0")}),o.jsx("span",{className:"bldr-timer-colon",children:":"}),o.jsx("span",{className:"bldr-timer-digit",children:String(u.minutes).padStart(2,"0")}),o.jsx("span",{className:"bldr-timer-colon",children:":"}),o.jsx("span",{className:"bldr-timer-digit bldr-timer-sec",children:String(u.seconds).padStart(2,"0")})]}),o.jsx("span",{className:"bldr-ring-label",children:"remaining today"}),o.jsxs("p",{className:"bldr-tagline",children:[Fp[y].text," ",o.jsx("strong",{children:Fp[y].bold})]})]}),o.jsxs("div",{className:"bldr-section",children:[o.jsx("h2",{className:"bldr-section-title",children:"Choose Your Widgets"}),o.jsx("p",{className:"bldr-section-desc",children:"The countdown ring and your profile always stay at the top. Pick what goes below."}),o.jsx("div",{className:"bldr-widgets-list",children:b_.map(I=>{const A=U.includes(I.id),Me=U.indexOf(I.id);return o.jsxs("div",{className:`bldr-widget-card${A?" active":""}`,children:[o.jsx("div",{className:"bldr-widget-icon",children:F6(I.icon)}),o.jsxs("div",{className:"bldr-widget-info",children:[o.jsx("div",{className:"bldr-widget-label",children:I.label}),o.jsx("div",{className:"bldr-widget-desc",children:I.desc})]}),o.jsxs("div",{className:"bldr-widget-actions",children:[A&&o.jsxs("div",{className:"bldr-widget-order",children:[o.jsx("button",{className:"bldr-order-btn",onClick:()=>V(I.id,-1),disabled:Me===0,"aria-label":"Move up",children:o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:o.jsx("path",{d:"M18 15l-6-6-6 6"})})}),o.jsx("span",{className:"bldr-order-num",children:Me+1}),o.jsx("button",{className:"bldr-order-btn",onClick:()=>V(I.id,1),disabled:Me===U.length-1,"aria-label":"Move down",children:o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:o.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),o.jsx("button",{className:`bldr-toggle${A?" on":""}`,onClick:()=>D(I.id),"aria-label":A?`Remove ${I.label}`:`Add ${I.label}`,children:o.jsx("div",{className:"bldr-toggle-thumb"})})]})]},I.id)})})]}),o.jsxs("div",{className:"bldr-save-wrap",children:[o.jsx("button",{className:`bldr-save-btn${de?" saved":""}`,onClick:O,disabled:$||de,children:$?"Saving...":de?"Saved":"Save Dashboard"}),ve&&o.jsx("p",{className:"bldr-save-error",children:ve}),de&&o.jsx("button",{className:"bldr-view-btn",onClick:()=>s("/client/core-buddy"),children:"View Dashboard"})]})]}),o.jsx(sa,{active:"home"})]})})}const H6=w.lazy(()=>Ys(()=>import("./Dashboard-Bx4SVhY2.js"),__vite__mapDeps([0,1,2]))),$6=w.lazy(()=>Ys(()=>import("./AddClient-zRC8JJPf.js"),__vite__mapDeps([3,4]))),W6=w.lazy(()=>Ys(()=>import("./ClientDashboard-FElfB5Vd.js"),__vite__mapDeps([5,1,6]))),G6=w.lazy(()=>Ys(()=>import("./ClientForms-D2M0h8a4.js"),__vite__mapDeps([7,8,6]))),K6=w.lazy(()=>Ys(()=>import("./ClientTools-Dv0ltVBQ.js"),__vite__mapDeps([9,10,6]))),Y6=w.lazy(()=>Ys(()=>import("./MacroCalculator-EZnHZUFS.js"),__vite__mapDeps([11,10,6]))),Q6=w.lazy(()=>Ys(()=>import("./ProteinSnacks-D_MyQjSZ.js"),__vite__mapDeps([12,10,6]))),X6=w.lazy(()=>Ys(()=>import("./DailyMotivation-CVICS-Nd.js"),__vite__mapDeps([13,10,6]))),J6=w.lazy(()=>Ys(()=>import("./CircuitDashboard-D-iQv7qj.js"),__vite__mapDeps([14,15]))),Z6=w.lazy(()=>Ys(()=>import("./CircuitBooking-f-xyE3MU.js"),__vite__mapDeps([16,17,15]))),e3=w.lazy(()=>Ys(()=>import("./PersonalBests-YpY7LWFv.js"),__vite__mapDeps([18,19,6]))),t3=w.lazy(()=>Ys(()=>import("./Leaderboard-DdfTFuus.js"),__vite__mapDeps([20,21]))),n3=w.lazy(()=>Ys(()=>import("./UpgradePage-K4jYFHtJ.js"),__vite__mapDeps([22,23,24]))),s3=w.lazy(()=>Ys(()=>import("./SignUp-BkKJkqxY.js"),[])),r3=w.lazy(()=>Ys(()=>import("./Onboarding-BvlZu6En.js"),__vite__mapDeps([25,23,26])));function i3({children:s}){const{pathname:e}=Si();return w.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),w.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function a3(){const s=Nr();return w.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function o3(){return o.jsx(IM,{children:o.jsx(RM,{children:o.jsx(PM,{children:o.jsxs(zS,{basename:"/login",children:[o.jsx(a3,{}),o.jsx(i3,{children:o.jsx(w.Suspense,{fallback:o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:o.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})}),children:o.jsxs(gS,{children:[o.jsx(Pn,{path:"/",element:o.jsx(BM,{})}),o.jsx(Pn,{path:"/dashboard",element:o.jsx(H6,{})}),o.jsx(Pn,{path:"/add-client",element:o.jsx($6,{})}),o.jsx(Pn,{path:"/client",element:o.jsx(W6,{})}),o.jsx(Pn,{path:"/client/forms",element:o.jsx(G6,{})}),o.jsx(Pn,{path:"/client/tools",element:o.jsx(K6,{})}),o.jsx(Pn,{path:"/client/tools/macros",element:o.jsx(Y6,{})}),o.jsx(Pn,{path:"/client/tools/snacks",element:o.jsx(Q6,{})}),o.jsx(Pn,{path:"/client/tools/motivation",element:o.jsx(X6,{})}),o.jsx(Pn,{path:"/client/personal-bests",element:o.jsx(e3,{})}),o.jsx(Pn,{path:"/client/circuit",element:o.jsx(J6,{})}),o.jsx(Pn,{path:"/client/circuit/booking",element:o.jsx(Z6,{})}),o.jsx(Pn,{path:"/client/core-buddy",element:o.jsx(WM,{})}),o.jsx(Pn,{path:"/client/core-buddy/nutrition",element:o.jsx(nd,{feature:"nutrition",children:o.jsx(YM,{})})}),o.jsx(Pn,{path:"/client/core-buddy/workouts",element:o.jsx(A6,{})}),o.jsx(Pn,{path:"/client/core-buddy/consistency",element:o.jsx(nd,{feature:"consistency",children:o.jsx(V6,{})})}),o.jsx(Pn,{path:"/client/core-buddy/buddies",element:o.jsx(nd,{feature:"buddies",children:o.jsx(U6,{})})}),o.jsx(Pn,{path:"/client/core-buddy/builder",element:o.jsx(q6,{})}),o.jsx(Pn,{path:"/client/core-buddy/profile/:userId",element:o.jsx(z6,{})}),o.jsx(Pn,{path:"/client/leaderboard",element:o.jsx(nd,{feature:"leaderboard",children:o.jsx(t3,{})})}),o.jsx(Pn,{path:"/signup",element:o.jsx(s3,{})}),o.jsx(Pn,{path:"/onboarding",element:o.jsx(r3,{})}),o.jsx(Pn,{path:"/upgrade",element:o.jsx(n3,{})}),o.jsx(Pn,{path:"*",element:o.jsx(D_,{to:"/",replace:!0})})]})})})]})})})})}gk.createRoot(document.getElementById("root")).render(o.jsx(w.StrictMode,{children:o.jsx(o3,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").then(s=>{setInterval(()=>s.update(),3600*1e3)}).catch(s=>console.warn("SW registration failed:",s))});export{c3 as A,fr as B,sa as C,qo as P,Qt as T,si as a,Sr as b,Lt as c,Se as d,nt as e,IN as f,Tn as g,PN as h,zs as i,o as j,mr as k,Ci as l,Fo as m,Nr as n,hu as o,NE as p,Rn as q,w as r,h3 as s,l3 as t,$r as u,d3 as v,fn as w,Ru as x,UM as y,VM as z};
