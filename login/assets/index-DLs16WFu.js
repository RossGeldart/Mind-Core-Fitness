const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CkGHCexQ.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-MRSTfObW.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-C0sxSyLd.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-xjZab51v.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-D-JA2Cvn.js","assets/ProteinSnacks-CgbxcDD8.js","assets/DailyMotivation-JYTYtj3e.js","assets/CircuitDashboard-BdUOCcw_.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-DhYzVtyO.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-CgV-6G4E.js","assets/Leaderboard-Dq-r5svP.css","assets/UpgradePage-BBtsvkHA.js","assets/UpgradePage-BkhI1Mdz.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=t(l);fetch(l.href,u)}})();var fp={exports:{}},Bc={};var p1;function lj(){if(p1)return Bc;p1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return Bc.Fragment=e,Bc.jsx=t,Bc.jsxs=t,Bc}var g1;function cj(){return g1||(g1=1,fp.exports=lj()),fp.exports}var a=cj(),mp={exports:{}},Gt={};var y1;function uj(){if(y1)return Gt;y1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.iterator;function L(P){return P===null||typeof P!="object"?null:(P=j&&P[j]||P["@@iterator"],typeof P=="function"?P:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,O={};function te(P,W,ye){this.props=P,this.context=W,this.refs=O,this.updater=ye||G}te.prototype.isReactComponent={},te.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},te.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Q(){}Q.prototype=te.prototype;function ce(P,W,ye){this.props=P,this.context=W,this.refs=O,this.updater=ye||G}var je=ce.prototype=new Q;je.constructor=ce,z(je,te.prototype),je.isPureReactComponent=!0;var He=Array.isArray;function ze(){}var I={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(P,W,ye){var Ne=ye.ref;return{$$typeof:s,type:P,key:W,ref:Ne!==void 0?Ne:null,props:ye}}function V(P,W){return A(P.type,W,P.props)}function D(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function F(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ye){return W[ye]})}var M=/\/+/g;function We(P,W){return typeof P=="object"&&P!==null&&P.key!=null?F(""+P.key):W.toString(36)}function ft(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ze,ze):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function q(P,W,ye,Ne,Fe){var Ie=typeof P;(Ie==="undefined"||Ie==="boolean")&&(P=null);var nt=!1;if(P===null)nt=!0;else switch(Ie){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(P.$$typeof){case s:case e:nt=!0;break;case w:return nt=P._init,q(nt(P._payload),W,ye,Ne,Fe)}}if(nt)return Fe=Fe(P),nt=Ne===""?"."+We(P,0):Ne,He(Fe)?(ye="",nt!=null&&(ye=nt.replace(M,"$&/")+"/"),q(Fe,W,ye,"",function(qt){return qt})):Fe!=null&&(D(Fe)&&(Fe=V(Fe,ye+(Fe.key==null||P&&P.key===Fe.key?"":(""+Fe.key).replace(M,"$&/")+"/")+nt)),W.push(Fe)),1;nt=0;var gt=Ne===""?".":Ne+":";if(He(P))for(var Qe=0;Qe<P.length;Qe++)Ne=P[Qe],Ie=gt+We(Ne,Qe),nt+=q(Ne,W,ye,Ie,Fe);else if(Qe=L(P),typeof Qe=="function")for(P=Qe.call(P),Qe=0;!(Ne=P.next()).done;)Ne=Ne.value,Ie=gt+We(Ne,Qe++),nt+=q(Ne,W,ye,Ie,Fe);else if(Ie==="object"){if(typeof P.then=="function")return q(ft(P),W,ye,Ne,Fe);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return nt}function me(P,W,ye){if(P==null)return P;var Ne=[],Fe=0;return q(P,Ne,"","",function(Ie){return W.call(ye,Ie,Fe++)}),Ne}function De(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(ye){(P._status===0||P._status===-1)&&(P._status=1,P._result=ye)},function(ye){(P._status===0||P._status===-1)&&(P._status=2,P._result=ye)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var $e=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ee={map:me,forEach:function(P,W,ye){me(P,function(){W.apply(this,arguments)},ye)},count:function(P){var W=0;return me(P,function(){W++}),W},toArray:function(P){return me(P,function(W){return W})||[]},only:function(P){if(!D(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Gt.Activity=k,Gt.Children=ee,Gt.Component=te,Gt.Fragment=t,Gt.Profiler=l,Gt.PureComponent=ce,Gt.StrictMode=i,Gt.Suspense=g,Gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Gt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return I.H.useMemoCache(P)}},Gt.cache=function(P){return function(){return P.apply(null,arguments)}},Gt.cacheSignal=function(){return null},Gt.cloneElement=function(P,W,ye){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Ne=z({},P.props),Fe=P.key;if(W!=null)for(Ie in W.key!==void 0&&(Fe=""+W.key),W)!S.call(W,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&W.ref===void 0||(Ne[Ie]=W[Ie]);var Ie=arguments.length-2;if(Ie===1)Ne.children=ye;else if(1<Ie){for(var nt=Array(Ie),gt=0;gt<Ie;gt++)nt[gt]=arguments[gt+2];Ne.children=nt}return A(P.type,Fe,Ne)},Gt.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Gt.createElement=function(P,W,ye){var Ne,Fe={},Ie=null;if(W!=null)for(Ne in W.key!==void 0&&(Ie=""+W.key),W)S.call(W,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(Fe[Ne]=W[Ne]);var nt=arguments.length-2;if(nt===1)Fe.children=ye;else if(1<nt){for(var gt=Array(nt),Qe=0;Qe<nt;Qe++)gt[Qe]=arguments[Qe+2];Fe.children=gt}if(P&&P.defaultProps)for(Ne in nt=P.defaultProps,nt)Fe[Ne]===void 0&&(Fe[Ne]=nt[Ne]);return A(P,Ie,Fe)},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(P){return{$$typeof:p,render:P}},Gt.isValidElement=D,Gt.lazy=function(P){return{$$typeof:w,_payload:{_status:-1,_result:P},_init:De}},Gt.memo=function(P,W){return{$$typeof:y,type:P,compare:W===void 0?null:W}},Gt.startTransition=function(P){var W=I.T,ye={};I.T=ye;try{var Ne=P(),Fe=I.S;Fe!==null&&Fe(ye,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(ze,$e)}catch(Ie){$e(Ie)}finally{W!==null&&ye.types!==null&&(W.types=ye.types),I.T=W}},Gt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Gt.use=function(P){return I.H.use(P)},Gt.useActionState=function(P,W,ye){return I.H.useActionState(P,W,ye)},Gt.useCallback=function(P,W){return I.H.useCallback(P,W)},Gt.useContext=function(P){return I.H.useContext(P)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(P,W){return I.H.useDeferredValue(P,W)},Gt.useEffect=function(P,W){return I.H.useEffect(P,W)},Gt.useEffectEvent=function(P){return I.H.useEffectEvent(P)},Gt.useId=function(){return I.H.useId()},Gt.useImperativeHandle=function(P,W,ye){return I.H.useImperativeHandle(P,W,ye)},Gt.useInsertionEffect=function(P,W){return I.H.useInsertionEffect(P,W)},Gt.useLayoutEffect=function(P,W){return I.H.useLayoutEffect(P,W)},Gt.useMemo=function(P,W){return I.H.useMemo(P,W)},Gt.useOptimistic=function(P,W){return I.H.useOptimistic(P,W)},Gt.useReducer=function(P,W,ye){return I.H.useReducer(P,W,ye)},Gt.useRef=function(P){return I.H.useRef(P)},Gt.useState=function(P){return I.H.useState(P)},Gt.useSyncExternalStore=function(P,W,ye){return I.H.useSyncExternalStore(P,W,ye)},Gt.useTransition=function(){return I.H.useTransition()},Gt.version="19.2.4",Gt}var b1;function Cg(){return b1||(b1=1,mp.exports=uj()),mp.exports}var x=Cg(),pp={exports:{}},Uc={},gp={exports:{}},yp={};var v1;function hj(){return v1||(v1=1,(function(s){function e(q,me){var De=q.length;q.push(me);e:for(;0<De;){var $e=De-1>>>1,ee=q[$e];if(0<l(ee,me))q[$e]=me,q[De]=ee,De=$e;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var me=q[0],De=q.pop();if(De!==me){q[0]=De;e:for(var $e=0,ee=q.length,P=ee>>>1;$e<P;){var W=2*($e+1)-1,ye=q[W],Ne=W+1,Fe=q[Ne];if(0>l(ye,De))Ne<ee&&0>l(Fe,ye)?(q[$e]=Fe,q[Ne]=De,$e=Ne):(q[$e]=ye,q[W]=De,$e=W);else if(Ne<ee&&0>l(Fe,De))q[$e]=Fe,q[Ne]=De,$e=Ne;else break e}}return me}function l(q,me){var De=q.sortIndex-me.sortIndex;return De!==0?De:q.id-me.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],w=1,k=null,j=3,L=!1,G=!1,z=!1,O=!1,te=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function je(q){for(var me=t(y);me!==null;){if(me.callback===null)i(y);else if(me.startTime<=q)i(y),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(y)}}function He(q){if(z=!1,je(q),!G)if(t(g)!==null)G=!0,ze||(ze=!0,F());else{var me=t(y);me!==null&&ft(He,me.startTime-q)}}var ze=!1,I=-1,S=5,A=-1;function V(){return O?!0:!(s.unstable_now()-A<S)}function D(){if(O=!1,ze){var q=s.unstable_now();A=q;var me=!0;try{e:{G=!1,z&&(z=!1,Q(I),I=-1),L=!0;var De=j;try{t:{for(je(q),k=t(g);k!==null&&!(k.expirationTime>q&&V());){var $e=k.callback;if(typeof $e=="function"){k.callback=null,j=k.priorityLevel;var ee=$e(k.expirationTime<=q);if(q=s.unstable_now(),typeof ee=="function"){k.callback=ee,je(q),me=!0;break t}k===t(g)&&i(g),je(q)}else i(g);k=t(g)}if(k!==null)me=!0;else{var P=t(y);P!==null&&ft(He,P.startTime-q),me=!1}}break e}finally{k=null,j=De,L=!1}me=void 0}}finally{me?F():ze=!1}}}var F;if(typeof ce=="function")F=function(){ce(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,We=M.port2;M.port1.onmessage=D,F=function(){We.postMessage(null)}}else F=function(){te(D,0)};function ft(q,me){I=te(function(){q(s.unstable_now())},me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(q){q.callback=null},s.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},s.unstable_getCurrentPriorityLevel=function(){return j},s.unstable_next=function(q){switch(j){case 1:case 2:case 3:var me=3;break;default:me=j}var De=j;j=me;try{return q()}finally{j=De}},s.unstable_requestPaint=function(){O=!0},s.unstable_runWithPriority=function(q,me){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var De=j;j=q;try{return me()}finally{j=De}},s.unstable_scheduleCallback=function(q,me,De){var $e=s.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?$e+De:$e):De=$e,q){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=De+ee,q={id:w++,callback:me,priorityLevel:q,startTime:De,expirationTime:ee,sortIndex:-1},De>$e?(q.sortIndex=De,e(y,q),t(g)===null&&q===t(y)&&(z?(Q(I),I=-1):z=!0,ft(He,De-$e))):(q.sortIndex=ee,e(g,q),G||L||(G=!0,ze||(ze=!0,F()))),q},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(q){var me=j;return function(){var De=j;j=me;try{return q.apply(this,arguments)}finally{j=De}}}})(yp)),yp}var x1;function dj(){return x1||(x1=1,gp.exports=hj()),gp.exports}var bp={exports:{}},nr={};var w1;function fj(){if(w1)return nr;w1=1;var s=Cg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:k==null?null:""+k,children:g,containerInfo:y,implementation:w}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return nr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nr.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,w)},nr.flushSync=function(g){var y=h.T,w=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=w,i.d.f()}},nr.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},nr.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},nr.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,k=p(w,y.crossOrigin),j=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:k,integrity:j,fetchPriority:L}):w==="script"&&i.d.X(g,{crossOrigin:k,integrity:j,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},nr.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},nr.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,k=p(w,y.crossOrigin);i.d.L(g,w,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},nr.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},nr.requestFormReset=function(g){i.d.r(g)},nr.unstable_batchedUpdates=function(g,y){return g(y)},nr.useFormState=function(g,y,w){return h.H.useFormState(g,y,w)},nr.useFormStatus=function(){return h.H.useHostTransitionStatus()},nr.version="19.2.4",nr}var _1;function mj(){if(_1)return bp.exports;_1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),bp.exports=fj(),bp.exports}var k1;function pj(){if(k1)return Uc;k1=1;var s=dj(),e=Cg(),t=mj();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function y(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var v=!1,E=f.child;E;){if(E===o){v=!0,o=f,c=m;break}if(E===c){v=!0,c=f,o=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===o){v=!0,o=m,c=f;break}if(E===c){v=!0,c=m,o=f;break}E=E.sibling}if(!v)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function w(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=w(n),r!==null)return r;n=n.sibling}return null}var k=Object.assign,j=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),He=Symbol.for("react.suspense"),ze=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var M=Symbol.for("react.client.reference");function We(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===M?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case te:return"Profiler";case O:return"StrictMode";case He:return"Suspense";case ze:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case G:return"Portal";case ce:return n.displayName||"Context";case Q:return(n._context.displayName||"Context")+".Consumer";case je:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return r=n.displayName||null,r!==null?r:We(n.type)||"Memo";case S:r=n._payload,n=n._init;try{return We(n(r))}catch{}}return null}var ft=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},$e=[],ee=-1;function P(n){return{current:n}}function W(n){0>ee||(n.current=$e[ee],$e[ee]=null,ee--)}function ye(n,r){ee++,$e[ee]=n.current,n.current=r}var Ne=P(null),Fe=P(null),Ie=P(null),nt=P(null);function gt(n,r){switch(ye(Ie,r),ye(Fe,n),ye(Ne,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?V0(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=V0(r),n=B0(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(Ne),ye(Ne,n)}function Qe(){W(Ne),W(Fe),W(Ie)}function qt(n){n.memoizedState!==null&&ye(nt,n);var r=Ne.current,o=B0(r,n.type);r!==o&&(ye(Fe,n),ye(Ne,o))}function yn(n){Fe.current===n&&(W(Ne),W(Fe)),nt.current===n&&(W(nt),Pc._currentValue=De)}var Pt,St;function le(n){if(Pt===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Pt=r&&r[1]||"",St=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pt+n+St}var an=!1;function sn(n,r){if(!n||an)return"";an=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(pe){var oe=pe}Reflect.construct(n,[],Ce)}else{try{Ce.call()}catch(pe){oe=pe}n.call(Ce.prototype)}}else{try{throw Error()}catch(pe){oe=pe}(Ce=n())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(pe){if(pe&&oe&&typeof pe.stack=="string")return[pe.stack,oe.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var B=v.split(`
`),ie=E.split(`
`);for(f=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ie.length&&!ie[f].includes("DetermineComponentFrameRoot");)f++;if(c===B.length||f===ie.length)for(c=B.length-1,f=ie.length-1;1<=c&&0<=f&&B[c]!==ie[f];)f--;for(;1<=c&&0<=f;c--,f--)if(B[c]!==ie[f]){if(c!==1||f!==1)do if(c--,f--,0>f||B[c]!==ie[f]){var ke=`
`+B[c].replace(" at new "," at ");return n.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",n.displayName)),ke}while(1<=c&&0<=f);break}}}finally{an=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?le(o):""}function dt(n,r){switch(n.tag){case 26:case 27:case 5:return le(n.type);case 16:return le("Lazy");case 13:return n.child!==r&&r!==null?le("Suspense Fallback"):le("Suspense");case 19:return le("SuspenseList");case 0:case 15:return sn(n.type,!1);case 11:return sn(n.type.render,!1);case 1:return sn(n.type,!0);case 31:return le("Activity");default:return""}}function Ct(n){try{var r="",o=null;do r+=dt(n,o),o=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var lt=Object.prototype.hasOwnProperty,st=s.unstable_scheduleCallback,Qt=s.unstable_cancelCallback,as=s.unstable_shouldYield,Rt=s.unstable_requestPaint,Xt=s.unstable_now,ts=s.unstable_getCurrentPriorityLevel,wt=s.unstable_ImmediatePriority,bn=s.unstable_UserBlockingPriority,rn=s.unstable_NormalPriority,Sn=s.unstable_LowPriority,de=s.unstable_IdlePriority,Te=s.log,Pe=s.unstable_setDisableYieldValue,Xe=null,Oe=null;function Me(n){if(typeof Te=="function"&&Pe(n),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Xe,n)}catch{}}var Ve=Math.clz32?Math.clz32:At,xt=Math.log,yt=Math.LN2;function At(n){return n>>>=0,n===0?32:31-(xt(n)/yt|0)|0}var Wt=256,J=262144,be=4194304;function tt(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function It(n,r,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?f=tt(c):(v&=E,v!==0?f=tt(v):o||(o=E&~n,o!==0&&(f=tt(o))))):(E=c&~m,E!==0?f=tt(E):v!==0?f=tt(v):o||(o=c&~n,o!==0&&(f=tt(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function jt(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Jt(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(){var n=be;return be<<=1,(be&62914560)===0&&(be=4194304),n}function zt(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function In(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Qn(n,r,o,c,f,m){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,B=n.expirationTimes,ie=n.hiddenUpdates;for(o=v&~o;0<o;){var ke=31-Ve(o),Ce=1<<ke;E[ke]=0,B[ke]=-1;var oe=ie[ke];if(oe!==null)for(ie[ke]=null,ke=0;ke<oe.length;ke++){var pe=oe[ke];pe!==null&&(pe.lane&=-536870913)}o&=~Ce}c!==0&&un(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~r))}function un(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-Ve(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function jn(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-Ve(o),f=1<<c;f&r|n[c]&r&&(n[c]|=r),o&=~f}}function Pn(n,r){var o=r&-r;return o=(o&42)!==0?1:U(o),(o&(n.suspendedLanes|r))!==0?0:o}function U(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ge(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function _e(){var n=me.p;return n!==0?n:(n=window.event,n===void 0?32:l1(n.type))}function we(n,r){var o=me.p;try{return me.p=n,r()}finally{me.p=o}}var fe=Math.random().toString(36).slice(2),rt="__reactFiber$"+fe,Nt="__reactProps$"+fe,it="__reactContainer$"+fe,_t="__reactEvents$"+fe,vt="__reactListeners$"+fe,vn="__reactHandles$"+fe,or="__reactResources$"+fe,Es="__reactMarker$"+fe;function Ls(n){delete n[rt],delete n[Nt],delete n[_t],delete n[vt],delete n[vn]}function Vn(n){var r=n[rt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[it]||o[rt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=W0(n);n!==null;){if(o=n[rt])return o;n=W0(n)}return r}n=o,o=n.parentNode}return null}function H(n){if(n=n[rt]||n[it]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function ue(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function T(n){var r=n[or];return r||(r=n[or]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function C(n){n[Es]=!0}var K=new Set,re={};function Ge(n,r){qe(n,r),qe(n+"Capture",r)}function qe(n,r){for(re[n]=r,n=0;n<r.length;n++)K.add(r[n])}var Be=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lt={},Mt={};function qn(n){return lt.call(Mt,n)?!0:lt.call(Lt,n)?!1:Be.test(n)?Mt[n]=!0:(Lt[n]=!0,!1)}function Os(n,r,o){if(qn(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function Ss(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Nn(n,r,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+c)}}function Bn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Y(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ve(n,r,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function ne(n){if(!n._valueTracker){var r=Y(n)?"checked":"value";n._valueTracker=ve(n,r,""+n[r])}}function Le(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=Y(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function Ue(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var at=/[\n"\\]/g;function ct(n){return n.replace(at,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ft(n,r,o,c,f,m,v,E){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),r!=null?v==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Bn(r)):n.value!==""+Bn(r)&&(n.value=""+Bn(r)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),r!=null?fs(n,v,Bn(r)):o!=null?fs(n,v,Bn(o)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+Bn(E):n.removeAttribute("name")}function xn(n,r,o,c,f,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){ne(n);return}o=o!=null?""+Bn(o):"",r=r!=null?""+Bn(r):o,E||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),ne(n)}function fs(n,r,o){r==="number"&&Ue(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function wn(n,r,o,c){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Bn(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Hs(n,r,o){if(r!=null&&(r=""+Bn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Bn(o):""}function Br(n,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(ft(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Bn(r),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),ne(n)}function xs(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Da=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jr(n,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,o):typeof o!="number"||o===0||Da.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function hn(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Jr(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Jr(n,m,r[m])}function cs(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$s=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(n){return $s.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function R(){}var Z=null;function Re(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Je=null,ut=null;function Et(n){var r=H(n);if(r&&(n=r.stateNode)){var o=n[Nt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Ft(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ct(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var f=c[Nt]||null;if(!f)throw Error(i(90));Ft(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===n.form&&Le(c)}break e;case"textarea":Hs(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&wn(n,!!o.multiple,r,!1)}}}var et=!1;function Ut(n,r,o){if(et)return n(r,o);et=!0;try{var c=n(r);return c}finally{if(et=!1,(Je!==null||ut!==null)&&(Nh(),Je&&(r=Je,n=ut,ut=Je=null,Et(r),n)))for(r=0;r<n.length;r++)Et(n[r])}}function Ot(n,r){var o=n.stateNode;if(o===null)return null;var c=o[Nt]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_n=!1;if(Yt)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){_n=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{_n=!1}var us=null,Xn=null,Gn=null;function ms(){if(Gn)return Gn;var n,r=Xn,o=r.length,c,f="value"in us?us.value:us.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var v=o-n;for(c=1;c<=v&&r[o-c]===f[m-c];c++);return Gn=f.slice(n,1<c?1-c:void 0)}function Jn(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function hs(){return!0}function Ns(){return!1}function Zn(n){function r(o,c,f,m,v){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?hs:Ns,this.isPropagationStopped=Ns,this}return k(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),r}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=Zn(ws),Sr=k({},ws,{view:0,detail:0}),zs=Zn(Sr),Vs,yr,Ws,Pa=k({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ws&&(Ws&&n.type==="mousemove"?(Vs=n.screenX-Ws.screenX,yr=n.screenY-Ws.screenY):yr=Vs=0,Ws=n),Vs)},movementY:function(n){return"movementY"in n?n.movementY:yr}}),uo=Zn(Pa),La=k({},Pa,{dataTransfer:0}),Oa=Zn(La),Zr=k({},Sr,{relatedTarget:0}),br=Zn(Zr),nc=k({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Vu=Zn(nc),Qo=k({},ws,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Bu=Zn(Qo),Uu=k({},ws,{data:0}),ma=Zn(Uu),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=qu[n])?!!r[n]:!1}function mi(){return Hu}var cr=k({},Sr,{key:function(n){if(n.key){var r=zu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Jn(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Fu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mi,charCode:function(n){return n.type==="keypress"?Jn(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jn(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$u=Zn(cr),Wu=k({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Va=Zn(Wu),d=k({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mi}),b=Zn(d),_=k({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Zn(_),se=k({},Pa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),he=Zn(se),Ye=k({},ws,{newState:0,oldState:0}),en=Zn(Ye),_s=[9,13,27,32],Mn=Yt&&"CompositionEvent"in window,is=null;Yt&&"documentMode"in document&&(is=document.documentMode);var Ur=Yt&&"TextEvent"in window&&!is,pa=Yt&&(!Mn||is&&8<is&&11>=is),ea=" ",ta=!1;function ho(n,r){switch(n){case"keyup":return _s.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Jo=!1;function Ik(n,r){switch(n){case"compositionend":return Xo(r);case"keypress":return r.which!==32?null:(ta=!0,ea);case"textInput":return n=r.data,n===ea&&ta?null:n;default:return null}}function Mk(n,r){if(Jo)return n==="compositionend"||!Mn&&ho(n,r)?(n=ms(),Gn=Xn=us=null,Jo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return pa&&r.locale!=="ko"?null:r.data;default:return null}}var Dk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yy(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Dk[n.type]:r==="textarea"}function Qy(n,r,o,c){Je?ut?ut.push(c):ut=[c]:Je=c,r=Ph(r,"onChange"),0<r.length&&(o=new tr("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var sc=null,rc=null;function Pk(n){I0(n,0)}function Gu(n){var r=ue(n);if(Le(r))return n}function Xy(n,r){if(n==="change")return r}var Jy=!1;if(Yt){var xf;if(Yt){var wf="oninput"in document;if(!wf){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),wf=typeof Zy.oninput=="function"}xf=wf}else xf=!1;Jy=xf&&(!document.documentMode||9<document.documentMode)}function eb(){sc&&(sc.detachEvent("onpropertychange",tb),rc=sc=null)}function tb(n){if(n.propertyName==="value"&&Gu(rc)){var r=[];Qy(r,rc,n,Re(n)),Ut(Pk,r)}}function Lk(n,r,o){n==="focusin"?(eb(),sc=r,rc=o,sc.attachEvent("onpropertychange",tb)):n==="focusout"&&eb()}function Ok(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gu(rc)}function Vk(n,r){if(n==="click")return Gu(r)}function Bk(n,r){if(n==="input"||n==="change")return Gu(r)}function Uk(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Nr=typeof Object.is=="function"?Object.is:Uk;function ac(n,r){if(Nr(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!lt.call(r,f)||!Nr(n[f],r[f]))return!1}return!0}function nb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function sb(n,r){var o=nb(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=nb(o)}}function rb(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?rb(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function ab(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ue(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Ue(n.document)}return r}function _f(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var zk=Yt&&"documentMode"in document&&11>=document.documentMode,Zo=null,kf=null,ic=null,Tf=!1;function ib(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Tf||Zo==null||Zo!==Ue(c)||(c=Zo,"selectionStart"in c&&_f(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ic&&ac(ic,c)||(ic=c,c=Ph(kf,"onSelect"),0<c.length&&(r=new tr("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=Zo)))}function fo(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var el={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionrun:fo("Transition","TransitionRun"),transitionstart:fo("Transition","TransitionStart"),transitioncancel:fo("Transition","TransitionCancel"),transitionend:fo("Transition","TransitionEnd")},jf={},ob={};Yt&&(ob=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function mo(n){if(jf[n])return jf[n];if(!el[n])return n;var r=el[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in ob)return jf[n]=r[o];return n}var lb=mo("animationend"),cb=mo("animationiteration"),ub=mo("animationstart"),Fk=mo("transitionrun"),qk=mo("transitionstart"),Hk=mo("transitioncancel"),hb=mo("transitionend"),db=new Map,Ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ef.push("scrollEnd");function na(n,r){db.set(n,r),Ge(r,[n])}var Ku=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zr=[],tl=0,Sf=0;function Yu(){for(var n=tl,r=Sf=tl=0;r<n;){var o=zr[r];zr[r++]=null;var c=zr[r];zr[r++]=null;var f=zr[r];zr[r++]=null;var m=zr[r];if(zr[r++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&fb(o,f,m)}}function Qu(n,r,o,c){zr[tl++]=n,zr[tl++]=r,zr[tl++]=o,zr[tl++]=c,Sf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Nf(n,r,o,c){return Qu(n,r,o,c),Xu(n)}function po(n,r){return Qu(n,null,null,r),Xu(n)}function fb(n,r,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-Ve(o),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function Xu(n){if(50<Nc)throw Nc=0,Om=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var nl={};function $k(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(n,r,o,c){return new $k(n,r,o,c)}function Cf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ba(n,r){var o=n.alternate;return o===null?(o=Cr(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function mb(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Ju(n,r,o,c,f,m){var v=0;if(c=n,typeof n=="function")Cf(n)&&(v=1);else if(typeof n=="string")v=QT(n,o,Ne.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=Cr(31,o,r,f),n.elementType=A,n.lanes=m,n;case z:return go(o.children,f,m,r);case O:v=8,f|=24;break;case te:return n=Cr(12,o,r,f|2),n.elementType=te,n.lanes=m,n;case He:return n=Cr(13,o,r,f),n.elementType=He,n.lanes=m,n;case ze:return n=Cr(19,o,r,f),n.elementType=ze,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ce:v=10;break e;case Q:v=9;break e;case je:v=11;break e;case I:v=14;break e;case S:v=16,c=null;break e}v=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=Cr(v,o,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function go(n,r,o,c){return n=Cr(7,n,c,r),n.lanes=o,n}function Rf(n,r,o){return n=Cr(6,n,null,r),n.lanes=o,n}function pb(n){var r=Cr(18,null,null,0);return r.stateNode=n,r}function Af(n,r,o){return r=Cr(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var gb=new WeakMap;function Fr(n,r){if(typeof n=="object"&&n!==null){var o=gb.get(n);return o!==void 0?o:(r={value:n,source:r,stack:Ct(r)},gb.set(n,r),r)}return{value:n,source:r,stack:Ct(r)}}var sl=[],rl=0,Zu=null,oc=0,qr=[],Hr=0,pi=null,ga=1,ya="";function Ua(n,r){sl[rl++]=oc,sl[rl++]=Zu,Zu=n,oc=r}function yb(n,r,o){qr[Hr++]=ga,qr[Hr++]=ya,qr[Hr++]=pi,pi=n;var c=ga;n=ya;var f=32-Ve(c)-1;c&=~(1<<f),o+=1;var m=32-Ve(r)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,ga=1<<32-Ve(r)+f|o<<f|c,ya=m+n}else ga=1<<m|o<<f|c,ya=n}function If(n){n.return!==null&&(Ua(n,1),yb(n,1,0))}function Mf(n){for(;n===Zu;)Zu=sl[--rl],sl[rl]=null,oc=sl[--rl],sl[rl]=null;for(;n===pi;)pi=qr[--Hr],qr[Hr]=null,ya=qr[--Hr],qr[Hr]=null,ga=qr[--Hr],qr[Hr]=null}function bb(n,r){qr[Hr++]=ga,qr[Hr++]=ya,qr[Hr++]=pi,ga=r.id,ya=r.overflow,pi=n}var Gs=null,ns=null,kn=!1,gi=null,$r=!1,Df=Error(i(519));function yi(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lc(Fr(r,n)),Df}function vb(n){var r=n.stateNode,o=n.type,c=n.memoizedProps;switch(r[rt]=n,r[Nt]=c,o){case"dialog":ln("cancel",r),ln("close",r);break;case"iframe":case"object":case"embed":ln("load",r);break;case"video":case"audio":for(o=0;o<Rc.length;o++)ln(Rc[o],r);break;case"source":ln("error",r);break;case"img":case"image":case"link":ln("error",r),ln("load",r);break;case"details":ln("toggle",r);break;case"input":ln("invalid",r),xn(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ln("invalid",r);break;case"textarea":ln("invalid",r),Br(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||L0(r.textContent,o)?(c.popover!=null&&(ln("beforetoggle",r),ln("toggle",r)),c.onScroll!=null&&ln("scroll",r),c.onScrollEnd!=null&&ln("scrollend",r),c.onClick!=null&&(r.onclick=R),r=!0):r=!1,r||yi(n,!0)}function xb(n){for(Gs=n.return;Gs;)switch(Gs.tag){case 5:case 31:case 13:$r=!1;return;case 27:case 3:$r=!0;return;default:Gs=Gs.return}}function al(n){if(n!==Gs)return!1;if(!kn)return xb(n),kn=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Jm(n.type,n.memoizedProps)),o=!o),o&&ns&&yi(n),xb(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ns=$0(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ns=$0(n)}else r===27?(r=ns,Ai(n.type)?(n=sp,sp=null,ns=n):ns=r):ns=Gs?Gr(n.stateNode.nextSibling):null;return!0}function yo(){ns=Gs=null,kn=!1}function Pf(){var n=gi;return n!==null&&(_r===null?_r=n:_r.push.apply(_r,n),gi=null),n}function lc(n){gi===null?gi=[n]:gi.push(n)}var Lf=P(null),bo=null,za=null;function bi(n,r,o){ye(Lf,r._currentValue),r._currentValue=o}function Fa(n){n._currentValue=Lf.current,W(Lf)}function Of(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function Vf(n,r,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var B=0;B<r.length;B++)if(E.context===r[B]){m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),Of(m.return,o,n),c||(v=null);break e}m=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),Of(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function il(n,r,o,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var E=f.type;Nr(f.pendingProps.value,v.value)||(n!==null?n.push(E):n=[E])}}else if(f===nt.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Pc):n=[Pc])}f=f.return}n!==null&&Vf(r,n,o,c),r.flags|=262144}function eh(n){for(n=n.firstContext;n!==null;){if(!Nr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function vo(n){bo=n,za=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ks(n){return wb(bo,n)}function th(n,r){return bo===null&&vo(n),wb(n,r)}function wb(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},za===null){if(n===null)throw Error(i(308));za=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else za=za.next=r;return o}var Wk=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},Gk=s.unstable_scheduleCallback,Kk=s.unstable_NormalPriority,Cs={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bf(){return{controller:new Wk,data:new Map,refCount:0}}function cc(n){n.refCount--,n.refCount===0&&Gk(Kk,function(){n.controller.abort()})}var uc=null,Uf=0,ol=0,ll=null;function Yk(n,r){if(uc===null){var o=uc=[];Uf=0,ol=qm(),ll={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Uf++,r.then(_b,_b),r}function _b(){if(--Uf===0&&uc!==null){ll!==null&&(ll.status="fulfilled");var n=uc;uc=null,ol=0,ll=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Qk(n,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var kb=q.S;q.S=function(n,r){i0=Xt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Yk(n,r),kb!==null&&kb(n,r)};var xo=P(null);function zf(){var n=xo.current;return n!==null?n:Kn.pooledCache}function nh(n,r){r===null?ye(xo,xo.current):ye(xo,r.pool)}function Tb(){var n=zf();return n===null?null:{parent:Cs._currentValue,pool:n}}var cl=Error(i(460)),Ff=Error(i(474)),sh=Error(i(542)),rh={then:function(){}};function jb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Eb(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(R,R),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Nb(n),n;default:if(typeof r.status=="string")r.then(R,R);else{if(n=Kn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Nb(n),n}throw _o=r,cl}}function wo(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(_o=o,cl):o}}var _o=null;function Sb(){if(_o===null)throw Error(i(459));var n=_o;return _o=null,n}function Nb(n){if(n===cl||n===sh)throw Error(i(483))}var ul=null,hc=0;function ah(n){var r=hc;return hc+=1,ul===null&&(ul=[]),Eb(ul,n,r)}function dc(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function ih(n,r){throw r.$$typeof===j?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Cb(n){function r(X,$){if(n){var ae=X.deletions;ae===null?(X.deletions=[$],X.flags|=16):ae.push($)}}function o(X,$){if(!n)return null;for(;$!==null;)r(X,$),$=$.sibling;return null}function c(X){for(var $=new Map;X!==null;)X.key!==null?$.set(X.key,X):$.set(X.index,X),X=X.sibling;return $}function f(X,$){return X=Ba(X,$),X.index=0,X.sibling=null,X}function m(X,$,ae){return X.index=ae,n?(ae=X.alternate,ae!==null?(ae=ae.index,ae<$?(X.flags|=67108866,$):ae):(X.flags|=67108866,$)):(X.flags|=1048576,$)}function v(X){return n&&X.alternate===null&&(X.flags|=67108866),X}function E(X,$,ae,Se){return $===null||$.tag!==6?($=Rf(ae,X.mode,Se),$.return=X,$):($=f($,ae),$.return=X,$)}function B(X,$,ae,Se){var kt=ae.type;return kt===z?ke(X,$,ae.props.children,Se,ae.key):$!==null&&($.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===S&&wo(kt)===$.type)?($=f($,ae.props),dc($,ae),$.return=X,$):($=Ju(ae.type,ae.key,ae.props,null,X.mode,Se),dc($,ae),$.return=X,$)}function ie(X,$,ae,Se){return $===null||$.tag!==4||$.stateNode.containerInfo!==ae.containerInfo||$.stateNode.implementation!==ae.implementation?($=Af(ae,X.mode,Se),$.return=X,$):($=f($,ae.children||[]),$.return=X,$)}function ke(X,$,ae,Se,kt){return $===null||$.tag!==7?($=go(ae,X.mode,Se,kt),$.return=X,$):($=f($,ae),$.return=X,$)}function Ce(X,$,ae){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Rf(""+$,X.mode,ae),$.return=X,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case L:return ae=Ju($.type,$.key,$.props,null,X.mode,ae),dc(ae,$),ae.return=X,ae;case G:return $=Af($,X.mode,ae),$.return=X,$;case S:return $=wo($),Ce(X,$,ae)}if(ft($)||F($))return $=go($,X.mode,ae,null),$.return=X,$;if(typeof $.then=="function")return Ce(X,ah($),ae);if($.$$typeof===ce)return Ce(X,th(X,$),ae);ih(X,$)}return null}function oe(X,$,ae,Se){var kt=$!==null?$.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return kt!==null?null:E(X,$,""+ae,Se);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case L:return ae.key===kt?B(X,$,ae,Se):null;case G:return ae.key===kt?ie(X,$,ae,Se):null;case S:return ae=wo(ae),oe(X,$,ae,Se)}if(ft(ae)||F(ae))return kt!==null?null:ke(X,$,ae,Se,null);if(typeof ae.then=="function")return oe(X,$,ah(ae),Se);if(ae.$$typeof===ce)return oe(X,$,th(X,ae),Se);ih(X,ae)}return null}function pe(X,$,ae,Se,kt){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return X=X.get(ae)||null,E($,X,""+Se,kt);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case L:return X=X.get(Se.key===null?ae:Se.key)||null,B($,X,Se,kt);case G:return X=X.get(Se.key===null?ae:Se.key)||null,ie($,X,Se,kt);case S:return Se=wo(Se),pe(X,$,ae,Se,kt)}if(ft(Se)||F(Se))return X=X.get(ae)||null,ke($,X,Se,kt,null);if(typeof Se.then=="function")return pe(X,$,ae,ah(Se),kt);if(Se.$$typeof===ce)return pe(X,$,ae,th($,Se),kt);ih($,Se)}return null}function ht(X,$,ae,Se){for(var kt=null,Cn=null,pt=$,nn=$=0,fn=null;pt!==null&&nn<ae.length;nn++){pt.index>nn?(fn=pt,pt=null):fn=pt.sibling;var Rn=oe(X,pt,ae[nn],Se);if(Rn===null){pt===null&&(pt=fn);break}n&&pt&&Rn.alternate===null&&r(X,pt),$=m(Rn,$,nn),Cn===null?kt=Rn:Cn.sibling=Rn,Cn=Rn,pt=fn}if(nn===ae.length)return o(X,pt),kn&&Ua(X,nn),kt;if(pt===null){for(;nn<ae.length;nn++)pt=Ce(X,ae[nn],Se),pt!==null&&($=m(pt,$,nn),Cn===null?kt=pt:Cn.sibling=pt,Cn=pt);return kn&&Ua(X,nn),kt}for(pt=c(pt);nn<ae.length;nn++)fn=pe(pt,X,nn,ae[nn],Se),fn!==null&&(n&&fn.alternate!==null&&pt.delete(fn.key===null?nn:fn.key),$=m(fn,$,nn),Cn===null?kt=fn:Cn.sibling=fn,Cn=fn);return n&&pt.forEach(function(Li){return r(X,Li)}),kn&&Ua(X,nn),kt}function Dt(X,$,ae,Se){if(ae==null)throw Error(i(151));for(var kt=null,Cn=null,pt=$,nn=$=0,fn=null,Rn=ae.next();pt!==null&&!Rn.done;nn++,Rn=ae.next()){pt.index>nn?(fn=pt,pt=null):fn=pt.sibling;var Li=oe(X,pt,Rn.value,Se);if(Li===null){pt===null&&(pt=fn);break}n&&pt&&Li.alternate===null&&r(X,pt),$=m(Li,$,nn),Cn===null?kt=Li:Cn.sibling=Li,Cn=Li,pt=fn}if(Rn.done)return o(X,pt),kn&&Ua(X,nn),kt;if(pt===null){for(;!Rn.done;nn++,Rn=ae.next())Rn=Ce(X,Rn.value,Se),Rn!==null&&($=m(Rn,$,nn),Cn===null?kt=Rn:Cn.sibling=Rn,Cn=Rn);return kn&&Ua(X,nn),kt}for(pt=c(pt);!Rn.done;nn++,Rn=ae.next())Rn=pe(pt,X,nn,Rn.value,Se),Rn!==null&&(n&&Rn.alternate!==null&&pt.delete(Rn.key===null?nn:Rn.key),$=m(Rn,$,nn),Cn===null?kt=Rn:Cn.sibling=Rn,Cn=Rn);return n&&pt.forEach(function(oj){return r(X,oj)}),kn&&Ua(X,nn),kt}function Wn(X,$,ae,Se){if(typeof ae=="object"&&ae!==null&&ae.type===z&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case L:e:{for(var kt=ae.key;$!==null;){if($.key===kt){if(kt=ae.type,kt===z){if($.tag===7){o(X,$.sibling),Se=f($,ae.props.children),Se.return=X,X=Se;break e}}else if($.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===S&&wo(kt)===$.type){o(X,$.sibling),Se=f($,ae.props),dc(Se,ae),Se.return=X,X=Se;break e}o(X,$);break}else r(X,$);$=$.sibling}ae.type===z?(Se=go(ae.props.children,X.mode,Se,ae.key),Se.return=X,X=Se):(Se=Ju(ae.type,ae.key,ae.props,null,X.mode,Se),dc(Se,ae),Se.return=X,X=Se)}return v(X);case G:e:{for(kt=ae.key;$!==null;){if($.key===kt)if($.tag===4&&$.stateNode.containerInfo===ae.containerInfo&&$.stateNode.implementation===ae.implementation){o(X,$.sibling),Se=f($,ae.children||[]),Se.return=X,X=Se;break e}else{o(X,$);break}else r(X,$);$=$.sibling}Se=Af(ae,X.mode,Se),Se.return=X,X=Se}return v(X);case S:return ae=wo(ae),Wn(X,$,ae,Se)}if(ft(ae))return ht(X,$,ae,Se);if(F(ae)){if(kt=F(ae),typeof kt!="function")throw Error(i(150));return ae=kt.call(ae),Dt(X,$,ae,Se)}if(typeof ae.then=="function")return Wn(X,$,ah(ae),Se);if(ae.$$typeof===ce)return Wn(X,$,th(X,ae),Se);ih(X,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,$!==null&&$.tag===6?(o(X,$.sibling),Se=f($,ae),Se.return=X,X=Se):(o(X,$),Se=Rf(ae,X.mode,Se),Se.return=X,X=Se),v(X)):o(X,$)}return function(X,$,ae,Se){try{hc=0;var kt=Wn(X,$,ae,Se);return ul=null,kt}catch(pt){if(pt===cl||pt===sh)throw pt;var Cn=Cr(29,pt,null,X.mode);return Cn.lanes=Se,Cn.return=X,Cn}}}var ko=Cb(!0),Rb=Cb(!1),vi=!1;function qf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function xi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function wi(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Dn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Xu(n),fb(n,null,o),r}return Qu(n,c,r,o),Xu(n)}function fc(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,jn(n,o)}}function $f(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var Wf=!1;function mc(){if(Wf){var n=ll;if(n!==null)throw n}}function pc(n,r,o,c){Wf=!1;var f=n.updateQueue;vi=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var B=E,ie=B.next;B.next=null,v===null?m=ie:v.next=ie,v=B;var ke=n.alternate;ke!==null&&(ke=ke.updateQueue,E=ke.lastBaseUpdate,E!==v&&(E===null?ke.firstBaseUpdate=ie:E.next=ie,ke.lastBaseUpdate=B))}if(m!==null){var Ce=f.baseState;v=0,ke=ie=B=null,E=m;do{var oe=E.lane&-536870913,pe=oe!==E.lane;if(pe?(dn&oe)===oe:(c&oe)===oe){oe!==0&&oe===ol&&(Wf=!0),ke!==null&&(ke=ke.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ht=n,Dt=E;oe=r;var Wn=o;switch(Dt.tag){case 1:if(ht=Dt.payload,typeof ht=="function"){Ce=ht.call(Wn,Ce,oe);break e}Ce=ht;break e;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=Dt.payload,oe=typeof ht=="function"?ht.call(Wn,Ce,oe):ht,oe==null)break e;Ce=k({},Ce,oe);break e;case 2:vi=!0}}oe=E.callback,oe!==null&&(n.flags|=64,pe&&(n.flags|=8192),pe=f.callbacks,pe===null?f.callbacks=[oe]:pe.push(oe))}else pe={lane:oe,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ke===null?(ie=ke=pe,B=Ce):ke=ke.next=pe,v|=oe;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;pe=E,E=pe.next,pe.next=null,f.lastBaseUpdate=pe,f.shared.pending=null}}while(!0);ke===null&&(B=Ce),f.baseState=B,f.firstBaseUpdate=ie,f.lastBaseUpdate=ke,m===null&&(f.shared.lanes=0),Ei|=v,n.lanes=v,n.memoizedState=Ce}}function Ab(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function Ib(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ab(o[n],r)}var hl=P(null),oh=P(0);function Mb(n,r){n=Xa,ye(oh,n),ye(hl,r),Xa=n|r.baseLanes}function Gf(){ye(oh,Xa),ye(hl,hl.current)}function Kf(){Xa=oh.current,W(hl),W(oh)}var Rr=P(null),Wr=null;function _i(n){var r=n.alternate;ye(ks,ks.current&1),ye(Rr,n),Wr===null&&(r===null||hl.current!==null||r.memoizedState!==null)&&(Wr=n)}function Yf(n){ye(ks,ks.current),ye(Rr,n),Wr===null&&(Wr=n)}function Db(n){n.tag===22?(ye(ks,ks.current),ye(Rr,n),Wr===null&&(Wr=n)):ki()}function ki(){ye(ks,ks.current),ye(Rr,Rr.current)}function Ar(n){W(Rr),Wr===n&&(Wr=null),W(ks)}var ks=P(0);function lh(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||tp(o)||np(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var qa=0,tn=null,Hn=null,Rs=null,ch=!1,dl=!1,To=!1,uh=0,gc=0,fl=null,Xk=0;function ps(){throw Error(i(321))}function Qf(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Nr(n[o],r[o]))return!1;return!0}function Xf(n,r,o,c,f,m){return qa=m,tn=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,q.H=n===null||n.memoizedState===null?yv:dm,To=!1,m=o(c,f),To=!1,dl&&(m=Lb(r,o,c,f)),Pb(n),m}function Pb(n){q.H=vc;var r=Hn!==null&&Hn.next!==null;if(qa=0,Rs=Hn=tn=null,ch=!1,gc=0,fl=null,r)throw Error(i(300));n===null||As||(n=n.dependencies,n!==null&&eh(n)&&(As=!0))}function Lb(n,r,o,c){tn=n;var f=0;do{if(dl&&(fl=null),gc=0,dl=!1,25<=f)throw Error(i(301));if(f+=1,Rs=Hn=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}q.H=bv,m=r(o,c)}while(dl);return m}function Jk(){var n=q.H,r=n.useState()[0];return r=typeof r.then=="function"?yc(r):r,n=n.useState()[0],(Hn!==null?Hn.memoizedState:null)!==n&&(tn.flags|=1024),r}function Jf(){var n=uh!==0;return uh=0,n}function Zf(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function em(n){if(ch){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ch=!1}qa=0,Rs=Hn=tn=null,dl=!1,gc=uh=0,fl=null}function ur(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rs===null?tn.memoizedState=Rs=n:Rs=Rs.next=n,Rs}function Ts(){if(Hn===null){var n=tn.alternate;n=n!==null?n.memoizedState:null}else n=Hn.next;var r=Rs===null?tn.memoizedState:Rs.next;if(r!==null)Rs=r,Hn=n;else{if(n===null)throw tn.alternate===null?Error(i(467)):Error(i(310));Hn=n,n={memoizedState:Hn.memoizedState,baseState:Hn.baseState,baseQueue:Hn.baseQueue,queue:Hn.queue,next:null},Rs===null?tn.memoizedState=Rs=n:Rs=Rs.next=n}return Rs}function hh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yc(n){var r=gc;return gc+=1,fl===null&&(fl=[]),n=Eb(fl,n,r),r=tn,(Rs===null?r.memoizedState:Rs.next)===null&&(r=r.alternate,q.H=r===null||r.memoizedState===null?yv:dm),n}function dh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return yc(n);if(n.$$typeof===ce)return Ks(n)}throw Error(i(438,String(n)))}function tm(n){var r=null,o=tn.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=tn.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=hh(),tn.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),c=0;c<n;c++)o[c]=V;return r.index++,o}function Ha(n,r){return typeof r=="function"?r(n):r}function fh(n){var r=Ts();return nm(r,Hn,n)}function nm(n,r,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var E=v=null,B=null,ie=r,ke=!1;do{var Ce=ie.lane&-536870913;if(Ce!==ie.lane?(dn&Ce)===Ce:(qa&Ce)===Ce){var oe=ie.revertLane;if(oe===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),Ce===ol&&(ke=!0);else if((qa&oe)===oe){ie=ie.next,oe===ol&&(ke=!0);continue}else Ce={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},B===null?(E=B=Ce,v=m):B=B.next=Ce,tn.lanes|=oe,Ei|=oe;Ce=ie.action,To&&o(m,Ce),m=ie.hasEagerState?ie.eagerState:o(m,Ce)}else oe={lane:Ce,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},B===null?(E=B=oe,v=m):B=B.next=oe,tn.lanes|=Ce,Ei|=Ce;ie=ie.next}while(ie!==null&&ie!==r);if(B===null?v=m:B.next=E,!Nr(m,n.memoizedState)&&(As=!0,ke&&(o=ll,o!==null)))throw o;n.memoizedState=m,n.baseState=v,n.baseQueue=B,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function sm(n){var r=Ts(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);Nr(m,r.memoizedState)||(As=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function Ob(n,r,o){var c=tn,f=Ts(),m=kn;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var v=!Nr((Hn||f).memoizedState,o);if(v&&(f.memoizedState=o,As=!0),f=f.queue,im(Ub.bind(null,c,f,n),[n]),f.getSnapshot!==r||v||Rs!==null&&Rs.memoizedState.tag&1){if(c.flags|=2048,ml(9,{destroy:void 0},Bb.bind(null,c,f,o,r),null),Kn===null)throw Error(i(349));m||(qa&127)!==0||Vb(c,r,o)}return o}function Vb(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=tn.updateQueue,r===null?(r=hh(),tn.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Bb(n,r,o,c){r.value=o,r.getSnapshot=c,zb(r)&&Fb(n)}function Ub(n,r,o){return o(function(){zb(r)&&Fb(n)})}function zb(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Nr(n,o)}catch{return!0}}function Fb(n){var r=po(n,2);r!==null&&kr(r,n,2)}function rm(n){var r=ur();if(typeof n=="function"){var o=n;if(n=o(),To){Me(!0);try{o()}finally{Me(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:n},r}function qb(n,r,o,c){return n.baseState=o,nm(n,Hn,typeof c=="function"?c:Ha)}function Zk(n,r,o,c,f){if(gh(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};q.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,Hb(r,m)):(m.next=o.next,r.pending=o.next=m)}}function Hb(n,r){var o=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=q.T,v={};q.T=v;try{var E=o(f,c),B=q.S;B!==null&&B(v,E),$b(n,r,E)}catch(ie){am(n,r,ie)}finally{m!==null&&v.types!==null&&(m.types=v.types),q.T=m}}else try{m=o(f,c),$b(n,r,m)}catch(ie){am(n,r,ie)}}function $b(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Wb(n,r,c)},function(c){return am(n,r,c)}):Wb(n,r,o)}function Wb(n,r,o){r.status="fulfilled",r.value=o,Gb(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,Hb(n,o)))}function am(n,r,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Gb(r),r=r.next;while(r!==c)}n.action=null}function Gb(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Kb(n,r){return r}function Yb(n,r){if(kn){var o=Kn.formState;if(o!==null){e:{var c=tn;if(kn){if(ns){t:{for(var f=ns,m=$r;f.nodeType!==8;){if(!m){f=null;break t}if(f=Gr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ns=Gr(f.nextSibling),c=f.data==="F!";break e}}yi(c)}c=!1}c&&(r=o[0])}}return o=ur(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kb,lastRenderedState:r},o.queue=c,o=mv.bind(null,tn,c),c.dispatch=o,c=rm(!1),m=hm.bind(null,tn,!1,c.queue),c=ur(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,o=Zk.bind(null,tn,f,m,o),f.dispatch=o,c.memoizedState=n,[r,o,!1]}function Qb(n){var r=Ts();return Xb(r,Hn,n)}function Xb(n,r,o){if(r=nm(n,r,Kb)[0],n=fh(Ha)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=yc(r)}catch(v){throw v===cl?sh:v}else c=r;r=Ts();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(tn.flags|=2048,ml(9,{destroy:void 0},eT.bind(null,f,o),null)),[c,m,n]}function eT(n,r){n.action=r}function Jb(n){var r=Ts(),o=Hn;if(o!==null)return Xb(r,o,n);Ts(),r=r.memoizedState,o=Ts();var c=o.queue.dispatch;return o.memoizedState=n,[r,c,!1]}function ml(n,r,o,c){return n={tag:n,create:o,deps:c,inst:r,next:null},r=tn.updateQueue,r===null&&(r=hh(),tn.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n),n}function Zb(){return Ts().memoizedState}function mh(n,r,o,c){var f=ur();tn.flags|=n,f.memoizedState=ml(1|r,{destroy:void 0},o,c===void 0?null:c)}function ph(n,r,o,c){var f=Ts();c=c===void 0?null:c;var m=f.memoizedState.inst;Hn!==null&&c!==null&&Qf(c,Hn.memoizedState.deps)?f.memoizedState=ml(r,m,o,c):(tn.flags|=n,f.memoizedState=ml(1|r,m,o,c))}function ev(n,r){mh(8390656,8,n,r)}function im(n,r){ph(2048,8,n,r)}function tT(n){tn.flags|=4;var r=tn.updateQueue;if(r===null)r=hh(),tn.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function tv(n){var r=Ts().memoizedState;return tT({ref:r,nextImpl:n}),function(){if((Dn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function nv(n,r){return ph(4,2,n,r)}function sv(n,r){return ph(4,4,n,r)}function rv(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function av(n,r,o){o=o!=null?o.concat([n]):null,ph(4,4,rv.bind(null,r,n),o)}function om(){}function iv(n,r){var o=Ts();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Qf(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function ov(n,r){var o=Ts();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Qf(r,c[1]))return c[0];if(c=n(),To){Me(!0);try{n()}finally{Me(!1)}}return o.memoizedState=[c,r],c}function lm(n,r,o){return o===void 0||(qa&1073741824)!==0&&(dn&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=l0(),tn.lanes|=n,Ei|=n,o)}function lv(n,r,o,c){return Nr(o,r)?o:hl.current!==null?(n=lm(n,o,c),Nr(n,r)||(As=!0),n):(qa&42)===0||(qa&1073741824)!==0&&(dn&261930)===0?(As=!0,n.memoizedState=o):(n=l0(),tn.lanes|=n,Ei|=n,r)}function cv(n,r,o,c,f){var m=me.p;me.p=m!==0&&8>m?m:8;var v=q.T,E={};q.T=E,hm(n,!1,r,o);try{var B=f(),ie=q.S;if(ie!==null&&ie(E,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ke=Qk(B,c);bc(n,r,ke,Dr(n))}else bc(n,r,c,Dr(n))}catch(Ce){bc(n,r,{then:function(){},status:"rejected",reason:Ce},Dr())}finally{me.p=m,v!==null&&E.types!==null&&(v.types=E.types),q.T=v}}function nT(){}function cm(n,r,o,c){if(n.tag!==5)throw Error(i(476));var f=uv(n).queue;cv(n,f,r,De,o===null?nT:function(){return hv(n),o(c)})}function uv(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:De},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function hv(n){var r=uv(n);r.next===null&&(r=n.alternate.memoizedState),bc(n,r.next.queue,{},Dr())}function um(){return Ks(Pc)}function dv(){return Ts().memoizedState}function fv(){return Ts().memoizedState}function sT(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Dr();n=xi(o);var c=wi(r,n,o);c!==null&&(kr(c,r,o),fc(c,r,o)),r={cache:Bf()},n.payload=r;return}r=r.return}}function rT(n,r,o){var c=Dr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},gh(n)?pv(r,o):(o=Nf(n,r,o,c),o!==null&&(kr(o,n,c),gv(o,r,c)))}function mv(n,r,o){var c=Dr();bc(n,r,o,c)}function bc(n,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(gh(n))pv(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,E=m(v,o);if(f.hasEagerState=!0,f.eagerState=E,Nr(E,v))return Qu(n,r,f,0),Kn===null&&Yu(),!1}catch{}if(o=Nf(n,r,f,c),o!==null)return kr(o,n,c),gv(o,r,c),!0}return!1}function hm(n,r,o,c){if(c={lane:2,revertLane:qm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},gh(n)){if(r)throw Error(i(479))}else r=Nf(n,o,c,2),r!==null&&kr(r,n,2)}function gh(n){var r=n.alternate;return n===tn||r!==null&&r===tn}function pv(n,r){dl=ch=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function gv(n,r,o){if((o&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,jn(n,o)}}var vc={readContext:Ks,use:dh,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useLayoutEffect:ps,useInsertionEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useSyncExternalStore:ps,useId:ps,useHostTransitionStatus:ps,useFormState:ps,useActionState:ps,useOptimistic:ps,useMemoCache:ps,useCacheRefresh:ps};vc.useEffectEvent=ps;var yv={readContext:Ks,use:dh,useCallback:function(n,r){return ur().memoizedState=[n,r===void 0?null:r],n},useContext:Ks,useEffect:ev,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,mh(4194308,4,rv.bind(null,r,n),o)},useLayoutEffect:function(n,r){return mh(4194308,4,n,r)},useInsertionEffect:function(n,r){mh(4,2,n,r)},useMemo:function(n,r){var o=ur();r=r===void 0?null:r;var c=n();if(To){Me(!0);try{n()}finally{Me(!1)}}return o.memoizedState=[c,r],c},useReducer:function(n,r,o){var c=ur();if(o!==void 0){var f=o(r);if(To){Me(!0);try{o(r)}finally{Me(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=rT.bind(null,tn,n),[c.memoizedState,n]},useRef:function(n){var r=ur();return n={current:n},r.memoizedState=n},useState:function(n){n=rm(n);var r=n.queue,o=mv.bind(null,tn,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:om,useDeferredValue:function(n,r){var o=ur();return lm(o,n,r)},useTransition:function(){var n=rm(!1);return n=cv.bind(null,tn,n.queue,!0,!1),ur().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var c=tn,f=ur();if(kn){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Kn===null)throw Error(i(349));(dn&127)!==0||Vb(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,ev(Ub.bind(null,c,m,n),[n]),c.flags|=2048,ml(9,{destroy:void 0},Bb.bind(null,c,m,o,r),null),o},useId:function(){var n=ur(),r=Kn.identifierPrefix;if(kn){var o=ya,c=ga;o=(c&~(1<<32-Ve(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=uh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Xk++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:um,useFormState:Yb,useActionState:Yb,useOptimistic:function(n){var r=ur();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=hm.bind(null,tn,!0,o),o.dispatch=r,[n,r]},useMemoCache:tm,useCacheRefresh:function(){return ur().memoizedState=sT.bind(null,tn)},useEffectEvent:function(n){var r=ur(),o={impl:n};return r.memoizedState=o,function(){if((Dn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},dm={readContext:Ks,use:dh,useCallback:iv,useContext:Ks,useEffect:im,useImperativeHandle:av,useInsertionEffect:nv,useLayoutEffect:sv,useMemo:ov,useReducer:fh,useRef:Zb,useState:function(){return fh(Ha)},useDebugValue:om,useDeferredValue:function(n,r){var o=Ts();return lv(o,Hn.memoizedState,n,r)},useTransition:function(){var n=fh(Ha)[0],r=Ts().memoizedState;return[typeof n=="boolean"?n:yc(n),r]},useSyncExternalStore:Ob,useId:dv,useHostTransitionStatus:um,useFormState:Qb,useActionState:Qb,useOptimistic:function(n,r){var o=Ts();return qb(o,Hn,n,r)},useMemoCache:tm,useCacheRefresh:fv};dm.useEffectEvent=tv;var bv={readContext:Ks,use:dh,useCallback:iv,useContext:Ks,useEffect:im,useImperativeHandle:av,useInsertionEffect:nv,useLayoutEffect:sv,useMemo:ov,useReducer:sm,useRef:Zb,useState:function(){return sm(Ha)},useDebugValue:om,useDeferredValue:function(n,r){var o=Ts();return Hn===null?lm(o,n,r):lv(o,Hn.memoizedState,n,r)},useTransition:function(){var n=sm(Ha)[0],r=Ts().memoizedState;return[typeof n=="boolean"?n:yc(n),r]},useSyncExternalStore:Ob,useId:dv,useHostTransitionStatus:um,useFormState:Jb,useActionState:Jb,useOptimistic:function(n,r){var o=Ts();return Hn!==null?qb(o,Hn,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:tm,useCacheRefresh:fv};bv.useEffectEvent=tv;function fm(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:k({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var mm={enqueueSetState:function(n,r,o){n=n._reactInternals;var c=Dr(),f=xi(c);f.payload=r,o!=null&&(f.callback=o),r=wi(n,f,c),r!==null&&(kr(r,n,c),fc(r,n,c))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=Dr(),f=xi(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=wi(n,f,c),r!==null&&(kr(r,n,c),fc(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Dr(),c=xi(o);c.tag=2,r!=null&&(c.callback=r),r=wi(n,c,o),r!==null&&(kr(r,n,o),fc(r,n,o))}};function vv(n,r,o,c,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):r.prototype&&r.prototype.isPureReactComponent?!ac(o,c)||!ac(f,m):!0}function xv(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&mm.enqueueReplaceState(r,r.state,null)}function jo(n,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(n=n.defaultProps){o===r&&(o=k({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function wv(n){Ku(n)}function _v(n){console.error(n)}function kv(n){Ku(n)}function yh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Tv(n,r,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function pm(n,r,o){return o=xi(o),o.tag=3,o.payload={element:null},o.callback=function(){yh(n,r)},o}function jv(n){return n=xi(n),n.tag=3,n}function Ev(n,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Tv(r,o,c)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Tv(r,o,c),typeof f!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function aT(n,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&il(r,o,f,!0),o=Rr.current,o!==null){switch(o.tag){case 31:case 13:return Wr===null?Ch():o.alternate===null&&gs===0&&(gs=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===rh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Um(n,c,f)),!1;case 22:return o.flags|=65536,c===rh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Um(n,c,f)),!1}throw Error(i(435,o.tag))}return Um(n,c,f),Ch(),!1}if(kn)return r=Rr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Df&&(n=Error(i(422),{cause:c}),lc(Fr(n,o)))):(c!==Df&&(r=Error(i(423),{cause:c}),lc(Fr(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Fr(c,o),f=pm(n.stateNode,c,f),$f(n,f),gs!==4&&(gs=2)),!1;var m=Error(i(520),{cause:c});if(m=Fr(m,o),Sc===null?Sc=[m]:Sc.push(m),gs!==4&&(gs=2),r===null)return!0;c=Fr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=pm(o.stateNode,c,n),$f(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Si===null||!Si.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=jv(f),Ev(f,n,o,c),$f(o,f),!1}o=o.return}while(o!==null);return!1}var gm=Error(i(461)),As=!1;function Ys(n,r,o,c){r.child=n===null?Rb(r,null,o,c):ko(r,n.child,o,c)}function Sv(n,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var v={};for(var E in c)E!=="ref"&&(v[E]=c[E])}else v=c;return vo(r),c=Xf(n,r,o,v,m,f),E=Jf(),n!==null&&!As?(Zf(n,r,f),$a(n,r,f)):(kn&&E&&If(r),r.flags|=1,Ys(n,r,c,f),r.child)}function Nv(n,r,o,c,f){if(n===null){var m=o.type;return typeof m=="function"&&!Cf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,Cv(n,r,m,c,f)):(n=Ju(o.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Tm(n,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:ac,o(v,c)&&n.ref===r.ref)return $a(n,r,f)}return r.flags|=1,n=Ba(m,c),n.ref=r.ref,n.return=r,r.child=n}function Cv(n,r,o,c,f){if(n!==null){var m=n.memoizedProps;if(ac(m,c)&&n.ref===r.ref)if(As=!1,r.pendingProps=c=m,Tm(n,f))(n.flags&131072)!==0&&(As=!0);else return r.lanes=n.lanes,$a(n,r,f)}return ym(n,r,o,c,f)}function Rv(n,r,o,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return Av(n,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&nh(r,m!==null?m.cachePool:null),m!==null?Mb(r,m):Gf(),Db(r);else return c=r.lanes=536870912,Av(n,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(nh(r,m.cachePool),Mb(r,m),ki(),r.memoizedState=null):(n!==null&&nh(r,null),Gf(),ki());return Ys(n,r,f,o),r.child}function xc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Av(n,r,o,c,f){var m=zf();return m=m===null?null:{parent:Cs._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},n!==null&&nh(r,null),Gf(),Db(r),n!==null&&il(n,r,c,!0),r.childLanes=f,null}function bh(n,r){return r=xh({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Iv(n,r,o){return ko(r,n.child,null,o),n=bh(r,r.pendingProps),n.flags|=2,Ar(r),r.memoizedState=null,n}function iT(n,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(kn){if(c.mode==="hidden")return n=bh(r,c),r.lanes=536870912,xc(null,n);if(Yf(r),(n=ns)?(n=H0(n,$r),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:pi!==null?{id:ga,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},o=pb(n),o.return=r,r.child=o,Gs=r,ns=null)):n=null,n===null)throw yi(r);return r.lanes=536870912,null}return bh(r,c)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(Yf(r),f)if(r.flags&256)r.flags&=-257,r=Iv(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(As||il(n,r,o,!1),f=(o&n.childLanes)!==0,As||f){if(c=Kn,c!==null&&(v=Pn(c,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,po(n,v),kr(c,n,v),gm;Ch(),r=Iv(n,r,o)}else n=m.treeContext,ns=Gr(v.nextSibling),Gs=r,kn=!0,gi=null,$r=!1,n!==null&&bb(r,n),r=bh(r,c),r.flags|=4096;return r}return n=Ba(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function vh(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function ym(n,r,o,c,f){return vo(r),o=Xf(n,r,o,c,void 0,f),c=Jf(),n!==null&&!As?(Zf(n,r,f),$a(n,r,f)):(kn&&c&&If(r),r.flags|=1,Ys(n,r,o,f),r.child)}function Mv(n,r,o,c,f,m){return vo(r),r.updateQueue=null,o=Lb(r,c,o,f),Pb(n),c=Jf(),n!==null&&!As?(Zf(n,r,m),$a(n,r,m)):(kn&&c&&If(r),r.flags|=1,Ys(n,r,o,m),r.child)}function Dv(n,r,o,c,f){if(vo(r),r.stateNode===null){var m=nl,v=o.contextType;typeof v=="object"&&v!==null&&(m=Ks(v)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=mm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},qf(r),v=o.contextType,m.context=typeof v=="object"&&v!==null?Ks(v):nl,m.state=r.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(fm(r,o,v,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&mm.enqueueReplaceState(m,m.state,null),pc(r,c,m,f),mc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var E=r.memoizedProps,B=jo(o,E);m.props=B;var ie=m.context,ke=o.contextType;v=nl,typeof ke=="object"&&ke!==null&&(v=Ks(ke));var Ce=o.getDerivedStateFromProps;ke=typeof Ce=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,ke||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||ie!==v)&&xv(r,m,c,v),vi=!1;var oe=r.memoizedState;m.state=oe,pc(r,c,m,f),mc(),ie=r.memoizedState,E||oe!==ie||vi?(typeof Ce=="function"&&(fm(r,o,Ce,c),ie=r.memoizedState),(B=vi||vv(r,o,B,c,oe,ie,v))?(ke||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ie),m.props=c,m.state=ie,m.context=v,c=B):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Hf(n,r),v=r.memoizedProps,ke=jo(o,v),m.props=ke,Ce=r.pendingProps,oe=m.context,ie=o.contextType,B=nl,typeof ie=="object"&&ie!==null&&(B=Ks(ie)),E=o.getDerivedStateFromProps,(ie=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==Ce||oe!==B)&&xv(r,m,c,B),vi=!1,oe=r.memoizedState,m.state=oe,pc(r,c,m,f),mc();var pe=r.memoizedState;v!==Ce||oe!==pe||vi||n!==null&&n.dependencies!==null&&eh(n.dependencies)?(typeof E=="function"&&(fm(r,o,E,c),pe=r.memoizedState),(ke=vi||vv(r,o,ke,c,oe,pe,B)||n!==null&&n.dependencies!==null&&eh(n.dependencies))?(ie||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,pe,B),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,pe,B)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&oe===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&oe===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=pe),m.props=c,m.state=pe,m.context=B,c=ke):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&oe===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&oe===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,vh(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=ko(r,n.child,null,f),r.child=ko(r,null,o,f)):Ys(n,r,o,f),r.memoizedState=m.state,n=r.child):n=$a(n,r,f),n}function Pv(n,r,o,c){return yo(),r.flags|=256,Ys(n,r,o,c),r.child}var bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(n){return{baseLanes:n,cachePool:Tb()}}function xm(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Mr),n}function Lv(n,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(ks.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,n===null){if(kn){if(f?_i(r):ki(),(n=ns)?(n=H0(n,$r),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:pi!==null?{id:ga,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},o=pb(n),o.return=r,r.child=o,Gs=r,ns=null)):n=null,n===null)throw yi(r);return np(n)?r.lanes=32:r.lanes=536870912,null}var E=c.children;return c=c.fallback,f?(ki(),f=r.mode,E=xh({mode:"hidden",children:E},f),c=go(c,f,o,null),E.return=r,c.return=r,E.sibling=c,r.child=E,c=r.child,c.memoizedState=vm(o),c.childLanes=xm(n,v,o),r.memoizedState=bm,xc(null,c)):(_i(r),wm(r,E))}var B=n.memoizedState;if(B!==null&&(E=B.dehydrated,E!==null)){if(m)r.flags&256?(_i(r),r.flags&=-257,r=_m(n,r,o)):r.memoizedState!==null?(ki(),r.child=n.child,r.flags|=128,r=null):(ki(),E=c.fallback,f=r.mode,c=xh({mode:"visible",children:c.children},f),E=go(E,f,o,null),E.flags|=2,c.return=r,E.return=r,c.sibling=E,r.child=c,ko(r,n.child,null,o),c=r.child,c.memoizedState=vm(o),c.childLanes=xm(n,v,o),r.memoizedState=bm,r=xc(null,c));else if(_i(r),np(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var ie=v.dgst;v=ie,c=Error(i(419)),c.stack="",c.digest=v,lc({value:c,source:null,stack:null}),r=_m(n,r,o)}else if(As||il(n,r,o,!1),v=(o&n.childLanes)!==0,As||v){if(v=Kn,v!==null&&(c=Pn(v,o),c!==0&&c!==B.retryLane))throw B.retryLane=c,po(n,c),kr(v,n,c),gm;tp(E)||Ch(),r=_m(n,r,o)}else tp(E)?(r.flags|=192,r.child=n.child,r=null):(n=B.treeContext,ns=Gr(E.nextSibling),Gs=r,kn=!0,gi=null,$r=!1,n!==null&&bb(r,n),r=wm(r,c.children),r.flags|=4096);return r}return f?(ki(),E=c.fallback,f=r.mode,B=n.child,ie=B.sibling,c=Ba(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,ie!==null?E=Ba(ie,E):(E=go(E,f,o,null),E.flags|=2),E.return=r,c.return=r,c.sibling=E,r.child=c,xc(null,c),c=r.child,E=n.child.memoizedState,E===null?E=vm(o):(f=E.cachePool,f!==null?(B=Cs._currentValue,f=f.parent!==B?{parent:B,pool:B}:f):f=Tb(),E={baseLanes:E.baseLanes|o,cachePool:f}),c.memoizedState=E,c.childLanes=xm(n,v,o),r.memoizedState=bm,xc(n.child,c)):(_i(r),o=n.child,n=o.sibling,o=Ba(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,n!==null&&(v=r.deletions,v===null?(r.deletions=[n],r.flags|=16):v.push(n)),r.child=o,r.memoizedState=null,o)}function wm(n,r){return r=xh({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function xh(n,r){return n=Cr(22,n,null,r),n.lanes=0,n}function _m(n,r,o){return ko(r,n.child,null,o),n=wm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Ov(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Of(n.return,r,o)}function km(n,r,o,c,f,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=o,v.tailMode=f,v.treeForkCount=m)}function Vv(n,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=ks.current,E=(v&2)!==0;if(E?(v=v&1|2,r.flags|=128):v&=1,ye(ks,v),Ys(n,r,c,o),c=kn?oc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ov(n,o,r);else if(n.tag===19)Ov(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&lh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),km(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&lh(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}km(r,!0,o,null,m,c);break;case"together":km(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function $a(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Ei|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(il(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Ba(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Ba(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Tm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&eh(n)))}function oT(n,r,o){switch(r.tag){case 3:gt(r,r.stateNode.containerInfo),bi(r,Cs,n.memoizedState.cache),yo();break;case 27:case 5:qt(r);break;case 4:gt(r,r.stateNode.containerInfo);break;case 10:bi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Yf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(_i(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Lv(n,r,o):(_i(r),n=$a(n,r,o),n!==null?n.sibling:null);_i(r);break;case 19:var f=(n.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(il(n,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return Vv(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ye(ks,ks.current),c)break;return null;case 22:return r.lanes=0,Rv(n,r,o,r.pendingProps);case 24:bi(r,Cs,n.memoizedState.cache)}return $a(n,r,o)}function Bv(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)As=!0;else{if(!Tm(n,o)&&(r.flags&128)===0)return As=!1,oT(n,r,o);As=(n.flags&131072)!==0}else As=!1,kn&&(r.flags&1048576)!==0&&yb(r,oc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=wo(r.elementType),r.type=n,typeof n=="function")Cf(n)?(c=jo(n,c),r.tag=1,r=Dv(null,r,n,c,o)):(r.tag=0,r=ym(null,r,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===je){r.tag=11,r=Sv(null,r,n,c,o);break e}else if(f===I){r.tag=14,r=Nv(null,r,n,c,o);break e}}throw r=We(n)||n,Error(i(306,r,""))}}return r;case 0:return ym(n,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=jo(c,r.pendingProps),Dv(n,r,c,f,o);case 3:e:{if(gt(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Hf(n,r),pc(r,c,null,o);var v=r.memoizedState;if(c=v.cache,bi(r,Cs,c),c!==m.cache&&Vf(r,[Cs],o,!0),mc(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Pv(n,r,c,o);break e}else if(c!==f){f=Fr(Error(i(424)),r),lc(f),r=Pv(n,r,c,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ns=Gr(n.firstChild),Gs=r,kn=!0,gi=null,$r=!0,o=Rb(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(yo(),c===f){r=$a(n,r,o);break e}Ys(n,r,c,o)}r=r.child}return r;case 26:return vh(n,r),n===null?(o=Q0(r.type,null,r.pendingProps,null))?r.memoizedState=o:kn||(o=r.type,n=r.pendingProps,c=Lh(Ie.current).createElement(o),c[rt]=r,c[Nt]=n,Qs(c,o,n),C(c),r.stateNode=c):r.memoizedState=Q0(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return qt(r),n===null&&kn&&(c=r.stateNode=G0(r.type,r.pendingProps,Ie.current),Gs=r,$r=!0,f=ns,Ai(r.type)?(sp=f,ns=Gr(c.firstChild)):ns=f),Ys(n,r,r.pendingProps.children,o),vh(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&kn&&((f=c=ns)&&(c=OT(c,r.type,r.pendingProps,$r),c!==null?(r.stateNode=c,Gs=r,ns=Gr(c.firstChild),$r=!1,f=!0):f=!1),f||yi(r)),qt(r),f=r.type,m=r.pendingProps,v=n!==null?n.memoizedProps:null,c=m.children,Jm(f,m)?c=null:v!==null&&Jm(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=Xf(n,r,Jk,null,null,o),Pc._currentValue=f),vh(n,r),Ys(n,r,c,o),r.child;case 6:return n===null&&kn&&((n=o=ns)&&(o=VT(o,r.pendingProps,$r),o!==null?(r.stateNode=o,Gs=r,ns=null,n=!0):n=!1),n||yi(r)),null;case 13:return Lv(n,r,o);case 4:return gt(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=ko(r,null,c,o):Ys(n,r,c,o),r.child;case 11:return Sv(n,r,r.type,r.pendingProps,o);case 7:return Ys(n,r,r.pendingProps,o),r.child;case 8:return Ys(n,r,r.pendingProps.children,o),r.child;case 12:return Ys(n,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,bi(r,r.type,c.value),Ys(n,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,vo(r),f=Ks(f),c=c(f),r.flags|=1,Ys(n,r,c,o),r.child;case 14:return Nv(n,r,r.type,r.pendingProps,o);case 15:return Cv(n,r,r.type,r.pendingProps,o);case 19:return Vv(n,r,o);case 31:return iT(n,r,o);case 22:return Rv(n,r,o,r.pendingProps);case 24:return vo(r),c=Ks(Cs),n===null?(f=zf(),f===null&&(f=Kn,m=Bf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},qf(r),bi(r,Cs,f)):((n.lanes&o)!==0&&(Hf(n,r),pc(r,null,null,o),mc()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),bi(r,Cs,c)):(c=m.cache,bi(r,Cs,c),c!==f.cache&&Vf(r,[Cs],o,!0))),Ys(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Wa(n){n.flags|=4}function jm(n,r,o,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(d0())n.flags|=8192;else throw _o=rh,Ff}else n.flags&=-16777217}function Uv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!t1(r))if(d0())n.flags|=8192;else throw _o=rh,Ff}function wh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Zt():536870912,n.lanes|=r,bl|=r)}function wc(n,r){if(!kn)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ss(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function lT(n,r,o){var c=r.pendingProps;switch(Mf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ss(r),null;case 1:return ss(r),null;case 3:return o=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Fa(Cs),Qe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(al(r)?Wa(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Pf())),ss(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(Wa(r),m!==null?(ss(r),Uv(r,m)):(ss(r),jm(r,f,null,c,o))):m?m!==n.memoizedState?(Wa(r),ss(r),Uv(r,m)):(ss(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&Wa(r),ss(r),jm(r,f,n,c,o)),null;case 27:if(yn(r),o=Ie.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Wa(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ss(r),null}n=Ne.current,al(r)?vb(r):(n=G0(f,c,o),r.stateNode=n,Wa(r))}return ss(r),null;case 5:if(yn(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Wa(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ss(r),null}if(m=Ne.current,al(r))vb(r);else{var v=Lh(Ie.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[rt]=r,m[Nt]=c;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=m;e:switch(Qs(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Wa(r)}}return ss(r),jm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&Wa(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=Ie.current,al(r)){if(n=r.stateNode,o=r.memoizedProps,c=null,f=Gs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[rt]=r,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||L0(n.nodeValue,o)),n||yi(r,!0)}else n=Lh(n).createTextNode(c),n[rt]=r,r.stateNode=n}return ss(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(c=al(r),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[rt]=r}else yo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ss(r),n=!1}else o=Pf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(Ar(r),r):(Ar(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ss(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=al(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[rt]=r}else yo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ss(r),f=!1}else f=Pf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Ar(r),r):(Ar(r),null)}return Ar(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),wh(r,r.updateQueue),ss(r),null);case 4:return Qe(),n===null&&Gm(r.stateNode.containerInfo),ss(r),null;case 10:return Fa(r.type),ss(r),null;case 19:if(W(ks),c=r.memoizedState,c===null)return ss(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)wc(c,!1);else{if(gs!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=lh(n),m!==null){for(r.flags|=128,wc(c,!1),n=m.updateQueue,r.updateQueue=n,wh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)mb(o,n),o=o.sibling;return ye(ks,ks.current&1|2),kn&&Ua(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&Xt()>Eh&&(r.flags|=128,f=!0,wc(c,!1),r.lanes=4194304)}else{if(!f)if(n=lh(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,wh(r,n),wc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!kn)return ss(r),null}else 2*Xt()-c.renderingStartTime>Eh&&o!==536870912&&(r.flags|=128,f=!0,wc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Xt(),n.sibling=null,o=ks.current,ye(ks,f?o&1|2:o&1),kn&&Ua(r,c.treeForkCount),n):(ss(r),null);case 22:case 23:return Ar(r),Kf(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(ss(r),r.subtreeFlags&6&&(r.flags|=8192)):ss(r),o=r.updateQueue,o!==null&&wh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),n!==null&&W(xo),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Fa(Cs),ss(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function cT(n,r){switch(Mf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Fa(Cs),Qe(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return yn(r),null;case 31:if(r.memoizedState!==null){if(Ar(r),r.alternate===null)throw Error(i(340));yo()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Ar(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));yo()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return W(ks),null;case 4:return Qe(),null;case 10:return Fa(r.type),null;case 22:case 23:return Ar(r),Kf(),n!==null&&W(xo),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Fa(Cs),null;case 25:return null;default:return null}}function zv(n,r){switch(Mf(r),r.tag){case 3:Fa(Cs),Qe();break;case 26:case 27:case 5:yn(r);break;case 4:Qe();break;case 31:r.memoizedState!==null&&Ar(r);break;case 13:Ar(r);break;case 19:W(ks);break;case 10:Fa(r.type);break;case 22:case 23:Ar(r),Kf(),n!==null&&W(xo);break;case 24:Fa(Cs)}}function _c(n,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var m=o.create,v=o.inst;c=m(),v.destroy=c}o=o.next}while(o!==f)}}catch(E){zn(r,r.return,E)}}function Ti(n,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var v=c.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=r;var B=o,ie=E;try{ie()}catch(ke){zn(f,B,ke)}}}c=c.next}while(c!==m)}}catch(ke){zn(r,r.return,ke)}}function Fv(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{Ib(r,o)}catch(c){zn(n,n.return,c)}}}function qv(n,r,o){o.props=jo(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){zn(n,r,c)}}function kc(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){zn(n,r,f)}}function ba(n,r){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){zn(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){zn(n,r,f)}else o.current=null}function Hv(n){var r=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){zn(n,n.return,f)}}function Em(n,r,o){try{var c=n.stateNode;AT(c,n.type,o,r),c[Nt]=r}catch(f){zn(n,n.return,f)}}function $v(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ai(n.type)||n.tag===4}function Sm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$v(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ai(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nm(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=R));else if(c!==4&&(c===27&&Ai(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Nm(n,r,o),n=n.sibling;n!==null;)Nm(n,r,o),n=n.sibling}function _h(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(c===27&&Ai(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(_h(n,r,o),n=n.sibling;n!==null;)_h(n,r,o),n=n.sibling}function Wv(n){var r=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Qs(r,c,o),r[rt]=n,r[Nt]=o}catch(m){zn(n,n.return,m)}}var Ga=!1,Is=!1,Cm=!1,Gv=typeof WeakSet=="function"?WeakSet:Set,Fs=null;function uT(n,r){if(n=n.containerInfo,Qm=qh,n=ab(n),_f(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,E=-1,B=-1,ie=0,ke=0,Ce=n,oe=null;t:for(;;){for(var pe;Ce!==o||f!==0&&Ce.nodeType!==3||(E=v+f),Ce!==m||c!==0&&Ce.nodeType!==3||(B=v+c),Ce.nodeType===3&&(v+=Ce.nodeValue.length),(pe=Ce.firstChild)!==null;)oe=Ce,Ce=pe;for(;;){if(Ce===n)break t;if(oe===o&&++ie===f&&(E=v),oe===m&&++ke===c&&(B=v),(pe=Ce.nextSibling)!==null)break;Ce=oe,oe=Ce.parentNode}Ce=pe}o=E===-1||B===-1?null:{start:E,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(Xm={focusedElem:n,selectionRange:o},qh=!1,Fs=r;Fs!==null;)if(r=Fs,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Fs=n;else for(;Fs!==null;){switch(r=Fs,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var ht=jo(o.type,f);n=c.getSnapshotBeforeUpdate(ht,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Dt){zn(o,o.return,Dt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)ep(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ep(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Fs=n;break}Fs=r.return}}function Kv(n,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ya(n,o),c&4&&_c(5,o);break;case 1:if(Ya(n,o),c&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(v){zn(o,o.return,v)}else{var f=jo(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(v){zn(o,o.return,v)}}c&64&&Fv(o),c&512&&kc(o,o.return);break;case 3:if(Ya(n,o),c&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Ib(n,r)}catch(v){zn(o,o.return,v)}}break;case 27:r===null&&c&4&&Wv(o);case 26:case 5:Ya(n,o),r===null&&c&4&&Hv(o),c&512&&kc(o,o.return);break;case 12:Ya(n,o);break;case 31:Ya(n,o),c&4&&Xv(n,o);break;case 13:Ya(n,o),c&4&&Jv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=vT.bind(null,o),BT(n,o))));break;case 22:if(c=o.memoizedState!==null||Ga,!c){r=r!==null&&r.memoizedState!==null||Is,f=Ga;var m=Is;Ga=c,(Is=r)&&!m?Qa(n,o,(o.subtreeFlags&8772)!==0):Ya(n,o),Ga=f,Is=m}break;case 30:break;default:Ya(n,o)}}function Yv(n){var r=n.alternate;r!==null&&(n.alternate=null,Yv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Ls(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var os=null,vr=!1;function Ka(n,r,o){for(o=o.child;o!==null;)Qv(n,r,o),o=o.sibling}function Qv(n,r,o){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Xe,o)}catch{}switch(o.tag){case 26:Is||ba(o,r),Ka(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Is||ba(o,r);var c=os,f=vr;Ai(o.type)&&(os=o.stateNode,vr=!1),Ka(n,r,o),Ic(o.stateNode),os=c,vr=f;break;case 5:Is||ba(o,r);case 6:if(c=os,f=vr,os=null,Ka(n,r,o),os=c,vr=f,os!==null)if(vr)try{(os.nodeType===9?os.body:os.nodeName==="HTML"?os.ownerDocument.body:os).removeChild(o.stateNode)}catch(m){zn(o,r,m)}else try{os.removeChild(o.stateNode)}catch(m){zn(o,r,m)}break;case 18:os!==null&&(vr?(n=os,F0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),El(n)):F0(os,o.stateNode));break;case 4:c=os,f=vr,os=o.stateNode.containerInfo,vr=!0,Ka(n,r,o),os=c,vr=f;break;case 0:case 11:case 14:case 15:Ti(2,o,r),Is||Ti(4,o,r),Ka(n,r,o);break;case 1:Is||(ba(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&qv(o,r,c)),Ka(n,r,o);break;case 21:Ka(n,r,o);break;case 22:Is=(c=Is)||o.memoizedState!==null,Ka(n,r,o),Is=c;break;default:Ka(n,r,o)}}function Xv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{El(n)}catch(o){zn(r,r.return,o)}}}function Jv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{El(n)}catch(o){zn(r,r.return,o)}}function hT(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Gv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Gv),r;default:throw Error(i(435,n.tag))}}function kh(n,r){var o=hT(n);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=xT.bind(null,n,c);c.then(f,f)}})}function xr(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=n,v=r,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Ai(E.type)){os=E.stateNode,vr=!1;break e}break;case 5:os=E.stateNode,vr=!1;break e;case 3:case 4:os=E.stateNode.containerInfo,vr=!0;break e}E=E.return}if(os===null)throw Error(i(160));Qv(m,v,f),os=null,vr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Zv(r,n),r=r.sibling}var sa=null;function Zv(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:xr(r,n),wr(n),c&4&&(Ti(3,n,n.return),_c(3,n),Ti(5,n,n.return));break;case 1:xr(r,n),wr(n),c&512&&(Is||o===null||ba(o,o.return)),c&64&&Ga&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=sa;if(xr(r,n),wr(n),c&512&&(Is||o===null||ba(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Es]||m[rt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Qs(m,c,o),m[rt]=n,C(m),c=m;break e;case"link":var v=Z0("link","href",f).get(c+(o.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(E,1);break t}}m=f.createElement(c),Qs(m,c,o),f.head.appendChild(m);break;case"meta":if(v=Z0("meta","content",f).get(c+(o.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(E,1);break t}}m=f.createElement(c),Qs(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[rt]=n,C(m),c=m}n.stateNode=c}else e1(f,n.type,n.stateNode);else n.stateNode=J0(f,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?e1(f,n.type,n.stateNode):J0(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Em(n,n.memoizedProps,o.memoizedProps)}break;case 27:xr(r,n),wr(n),c&512&&(Is||o===null||ba(o,o.return)),o!==null&&c&4&&Em(n,n.memoizedProps,o.memoizedProps);break;case 5:if(xr(r,n),wr(n),c&512&&(Is||o===null||ba(o,o.return)),n.flags&32){f=n.stateNode;try{xs(f,"")}catch(ht){zn(n,n.return,ht)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Em(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Cm=!0);break;case 6:if(xr(r,n),wr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(ht){zn(n,n.return,ht)}}break;case 3:if(Bh=null,f=sa,sa=Oh(r.containerInfo),xr(r,n),sa=f,wr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{El(r.containerInfo)}catch(ht){zn(n,n.return,ht)}Cm&&(Cm=!1,e0(n));break;case 4:c=sa,sa=Oh(n.stateNode.containerInfo),xr(r,n),wr(n),sa=c;break;case 12:xr(r,n),wr(n);break;case 31:xr(r,n),wr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,kh(n,c)));break;case 13:xr(r,n),wr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jh=Xt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,kh(n,c)));break;case 22:f=n.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,ie=Ga,ke=Is;if(Ga=ie||f,Is=ke||B,xr(r,n),Is=ke,Ga=ie,wr(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||B||Ga||Is||Eo(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){B=o=r;try{if(m=B.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=B.stateNode;var Ce=B.memoizedProps.style,oe=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;E.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ht){zn(B,B.return,ht)}}}else if(r.tag===6){if(o===null){B=r;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(ht){zn(B,B.return,ht)}}}else if(r.tag===18){if(o===null){B=r;try{var pe=B.stateNode;f?q0(pe,!0):q0(B.stateNode,!1)}catch(ht){zn(B,B.return,ht)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,kh(n,o))));break;case 19:xr(r,n),wr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,kh(n,c)));break;case 30:break;case 21:break;default:xr(r,n),wr(n)}}function wr(n){var r=n.flags;if(r&2){try{for(var o,c=n.return;c!==null;){if($v(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Sm(n);_h(n,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(xs(v,""),o.flags&=-33);var E=Sm(n);_h(n,E,v);break;case 3:case 4:var B=o.stateNode.containerInfo,ie=Sm(n);Nm(n,ie,B);break;default:throw Error(i(161))}}catch(ke){zn(n,n.return,ke)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function e0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;e0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Ya(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Kv(n,r.alternate,r),r=r.sibling}function Eo(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Ti(4,r,r.return),Eo(r);break;case 1:ba(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&qv(r,r.return,o),Eo(r);break;case 27:Ic(r.stateNode);case 26:case 5:ba(r,r.return),Eo(r);break;case 22:r.memoizedState===null&&Eo(r);break;case 30:Eo(r);break;default:Eo(r)}n=n.sibling}}function Qa(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:Qa(f,m,o),_c(4,m);break;case 1:if(Qa(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ie){zn(c,c.return,ie)}if(c=m,f=c.updateQueue,f!==null){var E=c.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)Ab(B[f],E)}catch(ie){zn(c,c.return,ie)}}o&&v&64&&Fv(m),kc(m,m.return);break;case 27:Wv(m);case 26:case 5:Qa(f,m,o),o&&c===null&&v&4&&Hv(m),kc(m,m.return);break;case 12:Qa(f,m,o);break;case 31:Qa(f,m,o),o&&v&4&&Xv(f,m);break;case 13:Qa(f,m,o),o&&v&4&&Jv(f,m);break;case 22:m.memoizedState===null&&Qa(f,m,o),kc(m,m.return);break;case 30:break;default:Qa(f,m,o)}r=r.sibling}}function Rm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&cc(o))}function Am(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&cc(n))}function ra(n,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)t0(n,r,o,c),r=r.sibling}function t0(n,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ra(n,r,o,c),f&2048&&_c(9,r);break;case 1:ra(n,r,o,c);break;case 3:ra(n,r,o,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&cc(n)));break;case 12:if(f&2048){ra(n,r,o,c),n=r.stateNode;try{var m=r.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(B){zn(r,r.return,B)}}else ra(n,r,o,c);break;case 31:ra(n,r,o,c);break;case 13:ra(n,r,o,c);break;case 23:break;case 22:m=r.stateNode,v=r.alternate,r.memoizedState!==null?m._visibility&2?ra(n,r,o,c):Tc(n,r):m._visibility&2?ra(n,r,o,c):(m._visibility|=2,pl(n,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Rm(v,r);break;case 24:ra(n,r,o,c),f&2048&&Am(r.alternate,r);break;default:ra(n,r,o,c)}}function pl(n,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,v=r,E=o,B=c,ie=v.flags;switch(v.tag){case 0:case 11:case 15:pl(m,v,E,B,f),_c(8,v);break;case 23:break;case 22:var ke=v.stateNode;v.memoizedState!==null?ke._visibility&2?pl(m,v,E,B,f):Tc(m,v):(ke._visibility|=2,pl(m,v,E,B,f)),f&&ie&2048&&Rm(v.alternate,v);break;case 24:pl(m,v,E,B,f),f&&ie&2048&&Am(v.alternate,v);break;default:pl(m,v,E,B,f)}r=r.sibling}}function Tc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,c=r,f=c.flags;switch(c.tag){case 22:Tc(o,c),f&2048&&Rm(c.alternate,c);break;case 24:Tc(o,c),f&2048&&Am(c.alternate,c);break;default:Tc(o,c)}r=r.sibling}}var jc=8192;function gl(n,r,o){if(n.subtreeFlags&jc)for(n=n.child;n!==null;)n0(n,r,o),n=n.sibling}function n0(n,r,o){switch(n.tag){case 26:gl(n,r,o),n.flags&jc&&n.memoizedState!==null&&XT(o,sa,n.memoizedState,n.memoizedProps);break;case 5:gl(n,r,o);break;case 3:case 4:var c=sa;sa=Oh(n.stateNode.containerInfo),gl(n,r,o),sa=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=jc,jc=16777216,gl(n,r,o),jc=c):gl(n,r,o));break;default:gl(n,r,o)}}function s0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ec(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Fs=c,a0(c,n)}s0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)r0(n),n=n.sibling}function r0(n){switch(n.tag){case 0:case 11:case 15:Ec(n),n.flags&2048&&Ti(9,n,n.return);break;case 3:Ec(n);break;case 12:Ec(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Th(n)):Ec(n);break;default:Ec(n)}}function Th(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Fs=c,a0(c,n)}s0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Ti(8,r,r.return),Th(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Th(r));break;default:Th(r)}n=n.sibling}}function a0(n,r){for(;Fs!==null;){var o=Fs;switch(o.tag){case 0:case 11:case 15:Ti(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:cc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Fs=c;else e:for(o=n;Fs!==null;){c=Fs;var f=c.sibling,m=c.return;if(Yv(c),c===o){Fs=null;break e}if(f!==null){f.return=m,Fs=f;break e}Fs=m}}}var dT={getCacheForType:function(n){var r=Ks(Cs),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Ks(Cs).controller.signal}},fT=typeof WeakMap=="function"?WeakMap:Map,Dn=0,Kn=null,on=null,dn=0,Un=0,Ir=null,ji=!1,yl=!1,Im=!1,Xa=0,gs=0,Ei=0,So=0,Mm=0,Mr=0,bl=0,Sc=null,_r=null,Dm=!1,jh=0,i0=0,Eh=1/0,Sh=null,Si=null,Bs=0,Ni=null,vl=null,Ja=0,Pm=0,Lm=null,o0=null,Nc=0,Om=null;function Dr(){return(Dn&2)!==0&&dn!==0?dn&-dn:q.T!==null?qm():_e()}function l0(){if(Mr===0)if((dn&536870912)===0||kn){var n=J;J<<=1,(J&3932160)===0&&(J=262144),Mr=n}else Mr=536870912;return n=Rr.current,n!==null&&(n.flags|=32),Mr}function kr(n,r,o){(n===Kn&&(Un===2||Un===9)||n.cancelPendingCommit!==null)&&(xl(n,0),Ci(n,dn,Mr,!1)),In(n,o),((Dn&2)===0||n!==Kn)&&(n===Kn&&((Dn&2)===0&&(So|=o),gs===4&&Ci(n,dn,Mr,!1)),va(n))}function c0(n,r,o){if((Dn&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&n.expiredLanes)===0||jt(n,r),f=c?gT(n,r):Bm(n,r,!0),m=c;do{if(f===0){yl&&!c&&Ci(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!mT(o)){f=Bm(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var E=n;f=Sc;var B=E.current.memoizedState.isDehydrated;if(B&&(xl(E,v).flags|=256),v=Bm(E,v,!1),v!==2){if(Im&&!B){E.errorRecoveryDisabledLanes|=m,So|=m,f=4;break e}m=_r,_r=f,m!==null&&(_r===null?_r=m:_r.push.apply(_r,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){xl(n,0),Ci(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ci(c,r,Mr,!ji);break e;case 2:_r=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=jh+300-Xt(),10<f)){if(Ci(c,r,Mr,!ji),It(c,0,!0)!==0)break e;Ja=r,c.timeoutHandle=U0(u0.bind(null,c,o,_r,Sh,Dm,r,Mr,So,bl,ji,m,"Throttled",-0,0),f);break e}u0(c,o,_r,Sh,Dm,r,Mr,So,bl,ji,m,null,-0,0)}}break}while(!0);va(n)}function u0(n,r,o,c,f,m,v,E,B,ie,ke,Ce,oe,pe){if(n.timeoutHandle=-1,Ce=r.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:R},n0(r,m,Ce);var ht=(m&62914560)===m?jh-Xt():(m&4194048)===m?i0-Xt():0;if(ht=JT(Ce,ht),ht!==null){Ja=m,n.cancelPendingCommit=ht(b0.bind(null,n,r,m,o,c,f,v,E,B,ke,Ce,null,oe,pe)),Ci(n,m,v,!ie);return}}b0(n,r,m,o,c,f,v,E,B)}function mT(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!Nr(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ci(n,r,o,c){r&=~Mm,r&=~So,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-Ve(f),v=1<<m;c[m]=-1,f&=~v}o!==0&&un(n,o,r)}function Nh(){return(Dn&6)===0?(Cc(0),!1):!0}function Vm(){if(on!==null){if(Un===0)var n=on.return;else n=on,za=bo=null,em(n),ul=null,hc=0,n=on;for(;n!==null;)zv(n.alternate,n),n=n.return;on=null}}function xl(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,DT(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ja=0,Vm(),Kn=n,on=o=Ba(n.current,null),dn=r,Un=0,Ir=null,ji=!1,yl=jt(n,r),Im=!1,bl=Mr=Mm=So=Ei=gs=0,_r=Sc=null,Dm=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-Ve(c),m=1<<f;r|=n[f],c&=~m}return Xa=r,Yu(),o}function h0(n,r){tn=null,q.H=vc,r===cl||r===sh?(r=Sb(),Un=3):r===Ff?(r=Sb(),Un=4):Un=r===gm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ir=r,on===null&&(gs=1,yh(n,Fr(r,n.current)))}function d0(){var n=Rr.current;return n===null?!0:(dn&4194048)===dn?Wr===null:(dn&62914560)===dn||(dn&536870912)!==0?n===Wr:!1}function f0(){var n=q.H;return q.H=vc,n===null?vc:n}function m0(){var n=q.A;return q.A=dT,n}function Ch(){gs=4,ji||(dn&4194048)!==dn&&Rr.current!==null||(yl=!0),(Ei&134217727)===0&&(So&134217727)===0||Kn===null||Ci(Kn,dn,Mr,!1)}function Bm(n,r,o){var c=Dn;Dn|=2;var f=f0(),m=m0();(Kn!==n||dn!==r)&&(Sh=null,xl(n,r)),r=!1;var v=gs;e:do try{if(Un!==0&&on!==null){var E=on,B=Ir;switch(Un){case 8:Vm(),v=6;break e;case 3:case 2:case 9:case 6:Rr.current===null&&(r=!0);var ie=Un;if(Un=0,Ir=null,wl(n,E,B,ie),o&&yl){v=0;break e}break;default:ie=Un,Un=0,Ir=null,wl(n,E,B,ie)}}pT(),v=gs;break}catch(ke){h0(n,ke)}while(!0);return r&&n.shellSuspendCounter++,za=bo=null,Dn=c,q.H=f,q.A=m,on===null&&(Kn=null,dn=0,Yu()),v}function pT(){for(;on!==null;)p0(on)}function gT(n,r){var o=Dn;Dn|=2;var c=f0(),f=m0();Kn!==n||dn!==r?(Sh=null,Eh=Xt()+500,xl(n,r)):yl=jt(n,r);e:do try{if(Un!==0&&on!==null){r=on;var m=Ir;t:switch(Un){case 1:Un=0,Ir=null,wl(n,r,m,1);break;case 2:case 9:if(jb(m)){Un=0,Ir=null,g0(r);break}r=function(){Un!==2&&Un!==9||Kn!==n||(Un=7),va(n)},m.then(r,r);break e;case 3:Un=7;break e;case 4:Un=5;break e;case 7:jb(m)?(Un=0,Ir=null,g0(r)):(Un=0,Ir=null,wl(n,r,m,7));break;case 5:var v=null;switch(on.tag){case 26:v=on.memoizedState;case 5:case 27:var E=on;if(v?t1(v):E.stateNode.complete){Un=0,Ir=null;var B=E.sibling;if(B!==null)on=B;else{var ie=E.return;ie!==null?(on=ie,Rh(ie)):on=null}break t}}Un=0,Ir=null,wl(n,r,m,5);break;case 6:Un=0,Ir=null,wl(n,r,m,6);break;case 8:Vm(),gs=6;break e;default:throw Error(i(462))}}yT();break}catch(ke){h0(n,ke)}while(!0);return za=bo=null,q.H=c,q.A=f,Dn=o,on!==null?0:(Kn=null,dn=0,Yu(),gs)}function yT(){for(;on!==null&&!as();)p0(on)}function p0(n){var r=Bv(n.alternate,n,Xa);n.memoizedProps=n.pendingProps,r===null?Rh(n):on=r}function g0(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=Mv(o,r,r.pendingProps,r.type,void 0,dn);break;case 11:r=Mv(o,r,r.pendingProps,r.type.render,r.ref,dn);break;case 5:em(r);default:zv(o,r),r=on=mb(r,Xa),r=Bv(o,r,Xa)}n.memoizedProps=n.pendingProps,r===null?Rh(n):on=r}function wl(n,r,o,c){za=bo=null,em(r),ul=null,hc=0;var f=r.return;try{if(aT(n,f,r,o,dn)){gs=1,yh(n,Fr(o,n.current)),on=null;return}}catch(m){if(f!==null)throw on=f,m;gs=1,yh(n,Fr(o,n.current)),on=null;return}r.flags&32768?(kn||c===1?n=!0:yl||(dn&536870912)!==0?n=!1:(ji=n=!0,(c===2||c===9||c===3||c===6)&&(c=Rr.current,c!==null&&c.tag===13&&(c.flags|=16384))),y0(r,n)):Rh(r)}function Rh(n){var r=n;do{if((r.flags&32768)!==0){y0(r,ji);return}n=r.return;var o=lT(r.alternate,r,Xa);if(o!==null){on=o;return}if(r=r.sibling,r!==null){on=r;return}on=r=n}while(r!==null);gs===0&&(gs=5)}function y0(n,r){do{var o=cT(n.alternate,n);if(o!==null){o.flags&=32767,on=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){on=n;return}on=n=o}while(n!==null);gs=6,on=null}function b0(n,r,o,c,f,m,v,E,B){n.cancelPendingCommit=null;do Ah();while(Bs!==0);if((Dn&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Sf,Qn(n,o,m,v,E,B),n===Kn&&(on=Kn=null,dn=0),vl=r,Ni=n,Ja=o,Pm=m,Lm=f,o0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,wT(rn,function(){return k0(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=q.T,q.T=null,f=me.p,me.p=2,v=Dn,Dn|=4;try{uT(n,r,o)}finally{Dn=v,me.p=f,q.T=c}}Bs=1,v0(),x0(),w0()}}function v0(){if(Bs===1){Bs=0;var n=Ni,r=vl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=q.T,q.T=null;var c=me.p;me.p=2;var f=Dn;Dn|=4;try{Zv(r,n);var m=Xm,v=ab(n.containerInfo),E=m.focusedElem,B=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&rb(E.ownerDocument.documentElement,E)){if(B!==null&&_f(E)){var ie=B.start,ke=B.end;if(ke===void 0&&(ke=ie),"selectionStart"in E)E.selectionStart=ie,E.selectionEnd=Math.min(ke,E.value.length);else{var Ce=E.ownerDocument||document,oe=Ce&&Ce.defaultView||window;if(oe.getSelection){var pe=oe.getSelection(),ht=E.textContent.length,Dt=Math.min(B.start,ht),Wn=B.end===void 0?Dt:Math.min(B.end,ht);!pe.extend&&Dt>Wn&&(v=Wn,Wn=Dt,Dt=v);var X=sb(E,Dt),$=sb(E,Wn);if(X&&$&&(pe.rangeCount!==1||pe.anchorNode!==X.node||pe.anchorOffset!==X.offset||pe.focusNode!==$.node||pe.focusOffset!==$.offset)){var ae=Ce.createRange();ae.setStart(X.node,X.offset),pe.removeAllRanges(),Dt>Wn?(pe.addRange(ae),pe.extend($.node,$.offset)):(ae.setEnd($.node,$.offset),pe.addRange(ae))}}}}for(Ce=[],pe=E;pe=pe.parentNode;)pe.nodeType===1&&Ce.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Ce.length;E++){var Se=Ce[E];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}qh=!!Qm,Xm=Qm=null}finally{Dn=f,me.p=c,q.T=o}}n.current=r,Bs=2}}function x0(){if(Bs===2){Bs=0;var n=Ni,r=vl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=q.T,q.T=null;var c=me.p;me.p=2;var f=Dn;Dn|=4;try{Kv(n,r.alternate,r)}finally{Dn=f,me.p=c,q.T=o}}Bs=3}}function w0(){if(Bs===4||Bs===3){Bs=0,Rt();var n=Ni,r=vl,o=Ja,c=o0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bs=5:(Bs=0,vl=Ni=null,_0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Si=null),ge(o),r=r.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Xe,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=q.T,f=me.p,me.p=2,q.T=null;try{for(var m=n.onRecoverableError,v=0;v<c.length;v++){var E=c[v];m(E.value,{componentStack:E.stack})}}finally{q.T=r,me.p=f}}(Ja&3)!==0&&Ah(),va(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Om?Nc++:(Nc=0,Om=n):Nc=0,Cc(0)}}function _0(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,cc(r)))}function Ah(){return v0(),x0(),w0(),k0()}function k0(){if(Bs!==5)return!1;var n=Ni,r=Pm;Pm=0;var o=ge(Ja),c=q.T,f=me.p;try{me.p=32>o?32:o,q.T=null,o=Lm,Lm=null;var m=Ni,v=Ja;if(Bs=0,vl=Ni=null,Ja=0,(Dn&6)!==0)throw Error(i(331));var E=Dn;if(Dn|=4,r0(m.current),t0(m,m.current,v,o),Dn=E,Cc(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Xe,m)}catch{}return!0}finally{me.p=f,q.T=c,_0(n,r)}}function T0(n,r,o){r=Fr(o,r),r=pm(n.stateNode,r,2),n=wi(n,r,2),n!==null&&(In(n,2),va(n))}function zn(n,r,o){if(n.tag===3)T0(n,n,o);else for(;r!==null;){if(r.tag===3){T0(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Si===null||!Si.has(c))){n=Fr(o,n),o=jv(2),c=wi(r,o,2),c!==null&&(Ev(o,c,r,n),In(c,2),va(c));break}}r=r.return}}function Um(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new fT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(Im=!0,f.add(o),n=bT.bind(null,n,r,o),r.then(n,n))}function bT(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Kn===n&&(dn&o)===o&&(gs===4||gs===3&&(dn&62914560)===dn&&300>Xt()-jh?(Dn&2)===0&&xl(n,0):Mm|=o,bl===dn&&(bl=0)),va(n)}function j0(n,r){r===0&&(r=Zt()),n=po(n,r),n!==null&&(In(n,r),va(n))}function vT(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),j0(n,o)}function xT(n,r){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),j0(n,o)}function wT(n,r){return st(n,r)}var Ih=null,_l=null,zm=!1,Mh=!1,Fm=!1,Ri=0;function va(n){n!==_l&&n.next===null&&(_l===null?Ih=_l=n:_l=_l.next=n),Mh=!0,zm||(zm=!0,kT())}function Cc(n,r){if(!Fm&&Mh){Fm=!0;do for(var o=!1,c=Ih;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-Ve(42|n)+1)-1,m&=f&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,C0(c,m))}else m=dn,m=It(c,c===Kn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||jt(c,m)||(o=!0,C0(c,m));c=c.next}while(o);Fm=!1}}function _T(){E0()}function E0(){Mh=zm=!1;var n=0;Ri!==0&&MT()&&(n=Ri);for(var r=Xt(),o=null,c=Ih;c!==null;){var f=c.next,m=S0(c,r);m===0?(c.next=null,o===null?Ih=f:o.next=f,f===null&&(_l=o)):(o=c,(n!==0||(m&3)!==0)&&(Mh=!0)),c=f}Bs!==0&&Bs!==5||Cc(n),Ri!==0&&(Ri=0)}function S0(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-Ve(m),E=1<<v,B=f[v];B===-1?((E&o)===0||(E&c)!==0)&&(f[v]=Jt(E,r)):B<=r&&(n.expiredLanes|=E),m&=~E}if(r=Kn,o=dn,o=It(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===r&&(Un===2||Un===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Qt(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||jt(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(c!==null&&Qt(c),ge(o)){case 2:case 8:o=bn;break;case 32:o=rn;break;case 268435456:o=de;break;default:o=rn}return c=N0.bind(null,n),o=st(o,c),n.callbackPriority=r,n.callbackNode=o,r}return c!==null&&c!==null&&Qt(c),n.callbackPriority=2,n.callbackNode=null,2}function N0(n,r){if(Bs!==0&&Bs!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ah()&&n.callbackNode!==o)return null;var c=dn;return c=It(n,n===Kn?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(c0(n,c,r),S0(n,Xt()),n.callbackNode!=null&&n.callbackNode===o?N0.bind(null,n):null)}function C0(n,r){if(Ah())return null;c0(n,r,!0)}function kT(){PT(function(){(Dn&6)!==0?st(wt,_T):E0()})}function qm(){if(Ri===0){var n=ol;n===0&&(n=Wt,Wt<<=1,(Wt&261888)===0&&(Wt=256)),Ri=n}return Ri}function R0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:gr(""+n)}function A0(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function TT(n,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=R0((f[Nt]||null).action),v=c.submitter;v&&(r=(r=v[Nt]||null)?R0(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var E=new tr("action","action",null,c,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ri!==0){var B=v?A0(f,v):new FormData(f);cm(o,{pending:!0,data:B,method:f.method,action:m},null,B)}}else typeof m=="function"&&(E.preventDefault(),B=v?A0(f,v):new FormData(f),cm(o,{pending:!0,data:B,method:f.method,action:m},m,B))},currentTarget:f}]})}}for(var Hm=0;Hm<Ef.length;Hm++){var $m=Ef[Hm],jT=$m.toLowerCase(),ET=$m[0].toUpperCase()+$m.slice(1);na(jT,"on"+ET)}na(lb,"onAnimationEnd"),na(cb,"onAnimationIteration"),na(ub,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(Fk,"onTransitionRun"),na(qk,"onTransitionStart"),na(Hk,"onTransitionCancel"),na(hb,"onTransitionEnd"),qe("onMouseEnter",["mouseout","mouseover"]),qe("onMouseLeave",["mouseout","mouseover"]),qe("onPointerEnter",["pointerout","pointerover"]),qe("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ST=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function I0(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var v=c.length-1;0<=v;v--){var E=c[v],B=E.instance,ie=E.currentTarget;if(E=E.listener,B!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=ie;try{m(f)}catch(ke){Ku(ke)}f.currentTarget=null,m=B}else for(v=0;v<c.length;v++){if(E=c[v],B=E.instance,ie=E.currentTarget,E=E.listener,B!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=ie;try{m(f)}catch(ke){Ku(ke)}f.currentTarget=null,m=B}}}}function ln(n,r){var o=r[_t];o===void 0&&(o=r[_t]=new Set);var c=n+"__bubble";o.has(c)||(M0(r,n,2,!1),o.add(c))}function Wm(n,r,o){var c=0;r&&(c|=4),M0(o,n,c,r)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function Gm(n){if(!n[Dh]){n[Dh]=!0,K.forEach(function(o){o!=="selectionchange"&&(ST.has(o)||Wm(o,!1,n),Wm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Dh]||(r[Dh]=!0,Wm("selectionchange",!1,r))}}function M0(n,r,o,c){switch(l1(r)){case 2:var f=tj;break;case 8:f=nj;break;default:f=lp}o=f.bind(null,r,o,n),f=void 0,!_n||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function Km(n,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var E=c.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=c.return;v!==null;){var B=v.tag;if((B===3||B===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=Vn(E),v===null)return;if(B=v.tag,B===5||B===6||B===26||B===27){c=m=v;continue e}E=E.parentNode}}c=c.return}Ut(function(){var ie=m,ke=Re(o),Ce=[];e:{var oe=db.get(n);if(oe!==void 0){var pe=tr,ht=n;switch(n){case"keypress":if(Jn(o)===0)break e;case"keydown":case"keyup":pe=$u;break;case"focusin":ht="focus",pe=br;break;case"focusout":ht="blur",pe=br;break;case"beforeblur":case"afterblur":pe=br;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Oa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=b;break;case lb:case cb:case ub:pe=Vu;break;case hb:pe=N;break;case"scroll":case"scrollend":pe=zs;break;case"wheel":pe=he;break;case"copy":case"cut":case"paste":pe=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Va;break;case"toggle":case"beforetoggle":pe=en}var Dt=(r&4)!==0,Wn=!Dt&&(n==="scroll"||n==="scrollend"),X=Dt?oe!==null?oe+"Capture":null:oe;Dt=[];for(var $=ie,ae;$!==null;){var Se=$;if(ae=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ae===null||X===null||(Se=Ot($,X),Se!=null&&Dt.push(Ac($,Se,ae))),Wn)break;$=$.return}0<Dt.length&&(oe=new pe(oe,ht,null,o,ke),Ce.push({event:oe,listeners:Dt}))}}if((r&7)===0){e:{if(oe=n==="mouseover"||n==="pointerover",pe=n==="mouseout"||n==="pointerout",oe&&o!==Z&&(ht=o.relatedTarget||o.fromElement)&&(Vn(ht)||ht[it]))break e;if((pe||oe)&&(oe=ke.window===ke?ke:(oe=ke.ownerDocument)?oe.defaultView||oe.parentWindow:window,pe?(ht=o.relatedTarget||o.toElement,pe=ie,ht=ht?Vn(ht):null,ht!==null&&(Wn=u(ht),Dt=ht.tag,ht!==Wn||Dt!==5&&Dt!==27&&Dt!==6)&&(ht=null)):(pe=null,ht=ie),pe!==ht)){if(Dt=uo,Se="onMouseLeave",X="onMouseEnter",$="mouse",(n==="pointerout"||n==="pointerover")&&(Dt=Va,Se="onPointerLeave",X="onPointerEnter",$="pointer"),Wn=pe==null?oe:ue(pe),ae=ht==null?oe:ue(ht),oe=new Dt(Se,$+"leave",pe,o,ke),oe.target=Wn,oe.relatedTarget=ae,Se=null,Vn(ke)===ie&&(Dt=new Dt(X,$+"enter",ht,o,ke),Dt.target=ae,Dt.relatedTarget=Wn,Se=Dt),Wn=Se,pe&&ht)t:{for(Dt=NT,X=pe,$=ht,ae=0,Se=X;Se;Se=Dt(Se))ae++;Se=0;for(var kt=$;kt;kt=Dt(kt))Se++;for(;0<ae-Se;)X=Dt(X),ae--;for(;0<Se-ae;)$=Dt($),Se--;for(;ae--;){if(X===$||$!==null&&X===$.alternate){Dt=X;break t}X=Dt(X),$=Dt($)}Dt=null}else Dt=null;pe!==null&&D0(Ce,oe,pe,Dt,!1),ht!==null&&Wn!==null&&D0(Ce,Wn,ht,Dt,!0)}}e:{if(oe=ie?ue(ie):window,pe=oe.nodeName&&oe.nodeName.toLowerCase(),pe==="select"||pe==="input"&&oe.type==="file")var Cn=Xy;else if(Yy(oe))if(Jy)Cn=Bk;else{Cn=Ok;var pt=Lk}else pe=oe.nodeName,!pe||pe.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ie&&cs(ie.elementType)&&(Cn=Xy):Cn=Vk;if(Cn&&(Cn=Cn(n,ie))){Qy(Ce,Cn,o,ke);break e}pt&&pt(n,oe,ie),n==="focusout"&&ie&&oe.type==="number"&&ie.memoizedProps.value!=null&&fs(oe,"number",oe.value)}switch(pt=ie?ue(ie):window,n){case"focusin":(Yy(pt)||pt.contentEditable==="true")&&(Zo=pt,kf=ie,ic=null);break;case"focusout":ic=kf=Zo=null;break;case"mousedown":Tf=!0;break;case"contextmenu":case"mouseup":case"dragend":Tf=!1,ib(Ce,o,ke);break;case"selectionchange":if(zk)break;case"keydown":case"keyup":ib(Ce,o,ke)}var nn;if(Mn)e:{switch(n){case"compositionstart":var fn="onCompositionStart";break e;case"compositionend":fn="onCompositionEnd";break e;case"compositionupdate":fn="onCompositionUpdate";break e}fn=void 0}else Jo?ho(n,o)&&(fn="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(fn="onCompositionStart");fn&&(pa&&o.locale!=="ko"&&(Jo||fn!=="onCompositionStart"?fn==="onCompositionEnd"&&Jo&&(nn=ms()):(us=ke,Xn="value"in us?us.value:us.textContent,Jo=!0)),pt=Ph(ie,fn),0<pt.length&&(fn=new ma(fn,n,null,o,ke),Ce.push({event:fn,listeners:pt}),nn?fn.data=nn:(nn=Xo(o),nn!==null&&(fn.data=nn)))),(nn=Ur?Ik(n,o):Mk(n,o))&&(fn=Ph(ie,"onBeforeInput"),0<fn.length&&(pt=new ma("onBeforeInput","beforeinput",null,o,ke),Ce.push({event:pt,listeners:fn}),pt.data=nn)),TT(Ce,n,ie,o,ke)}I0(Ce,r)})}function Ac(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Ph(n,r){for(var o=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ot(n,o),f!=null&&c.unshift(Ac(n,f,m)),f=Ot(n,r),f!=null&&c.push(Ac(n,f,m))),n.tag===3)return c;n=n.return}return[]}function NT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function D0(n,r,o,c,f){for(var m=r._reactName,v=[];o!==null&&o!==c;){var E=o,B=E.alternate,ie=E.stateNode;if(E=E.tag,B!==null&&B===c)break;E!==5&&E!==26&&E!==27||ie===null||(B=ie,f?(ie=Ot(o,m),ie!=null&&v.unshift(Ac(o,ie,B))):f||(ie=Ot(o,m),ie!=null&&v.push(Ac(o,ie,B)))),o=o.return}v.length!==0&&n.push({event:r,listeners:v})}var CT=/\r\n?/g,RT=/\u0000|\uFFFD/g;function P0(n){return(typeof n=="string"?n:""+n).replace(CT,`
`).replace(RT,"")}function L0(n,r){return r=P0(r),P0(n)===r}function $n(n,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||xs(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&xs(n,""+c);break;case"className":Ss(n,"class",c);break;case"tabIndex":Ss(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ss(n,o,c);break;case"style":hn(n,c,m);break;case"data":if(r!=="object"){Ss(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=gr(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&$n(n,r,"name",f.name,f,null),$n(n,r,"formEncType",f.formEncType,f,null),$n(n,r,"formMethod",f.formMethod,f,null),$n(n,r,"formTarget",f.formTarget,f,null)):($n(n,r,"encType",f.encType,f,null),$n(n,r,"method",f.method,f,null),$n(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=gr(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=R);break;case"onScroll":c!=null&&ln("scroll",n);break;case"onScrollEnd":c!=null&&ln("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=gr(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":ln("beforetoggle",n),ln("toggle",n),Os(n,"popover",c);break;case"xlinkActuate":Nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Nn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Nn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Nn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Nn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Os(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=lr.get(o)||o,Os(n,o,c))}}function Ym(n,r,o,c,f,m){switch(o){case"style":hn(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?xs(n,c):(typeof c=="number"||typeof c=="bigint")&&xs(n,""+c);break;case"onScroll":c!=null&&ln("scroll",n);break;case"onScrollEnd":c!=null&&ln("scrollend",n);break;case"onClick":c!=null&&(n.onclick=R);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!re.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[Nt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Os(n,o,c)}}}function Qs(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ln("error",n),ln("load",n);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:$n(n,r,m,v,o,null)}}f&&$n(n,r,"srcSet",o.srcSet,o,null),c&&$n(n,r,"src",o.src,o,null);return;case"input":ln("invalid",n);var E=m=v=f=null,B=null,ie=null;for(c in o)if(o.hasOwnProperty(c)){var ke=o[c];if(ke!=null)switch(c){case"name":f=ke;break;case"type":v=ke;break;case"checked":B=ke;break;case"defaultChecked":ie=ke;break;case"value":m=ke;break;case"defaultValue":E=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(i(137,r));break;default:$n(n,r,c,ke,o,null)}}xn(n,m,E,B,ie,v,f,!1);return;case"select":ln("invalid",n),c=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":c=E;default:$n(n,r,f,E,o,null)}r=m,o=v,n.multiple=!!c,r!=null?wn(n,!!c,r,!1):o!=null&&wn(n,!!c,o,!0);return;case"textarea":ln("invalid",n),m=f=c=null;for(v in o)if(o.hasOwnProperty(v)&&(E=o[v],E!=null))switch(v){case"value":c=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:$n(n,r,v,E,o,null)}Br(n,c,f,m);return;case"option":for(B in o)o.hasOwnProperty(B)&&(c=o[B],c!=null)&&(B==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":$n(n,r,B,c,o,null));return;case"dialog":ln("beforetoggle",n),ln("toggle",n),ln("cancel",n),ln("close",n);break;case"iframe":case"object":ln("load",n);break;case"video":case"audio":for(c=0;c<Rc.length;c++)ln(Rc[c],n);break;case"image":ln("error",n),ln("load",n);break;case"details":ln("toggle",n);break;case"embed":case"source":case"link":ln("error",n),ln("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in o)if(o.hasOwnProperty(ie)&&(c=o[ie],c!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:$n(n,r,ie,c,o,null)}return;default:if(cs(r)){for(ke in o)o.hasOwnProperty(ke)&&(c=o[ke],c!==void 0&&Ym(n,r,ke,c,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(c=o[E],c!=null&&$n(n,r,E,c,o,null))}function AT(n,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,E=null,B=null,ie=null,ke=null;for(pe in o){var Ce=o[pe];if(o.hasOwnProperty(pe)&&Ce!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":B=Ce;default:c.hasOwnProperty(pe)||$n(n,r,pe,null,c,Ce)}}for(var oe in c){var pe=c[oe];if(Ce=o[oe],c.hasOwnProperty(oe)&&(pe!=null||Ce!=null))switch(oe){case"type":m=pe;break;case"name":f=pe;break;case"checked":ie=pe;break;case"defaultChecked":ke=pe;break;case"value":v=pe;break;case"defaultValue":E=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(137,r));break;default:pe!==Ce&&$n(n,r,oe,pe,c,Ce)}}Ft(n,v,E,B,ie,ke,m,f);return;case"select":pe=v=E=oe=null;for(m in o)if(B=o[m],o.hasOwnProperty(m)&&B!=null)switch(m){case"value":break;case"multiple":pe=B;default:c.hasOwnProperty(m)||$n(n,r,m,null,c,B)}for(f in c)if(m=c[f],B=o[f],c.hasOwnProperty(f)&&(m!=null||B!=null))switch(f){case"value":oe=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==B&&$n(n,r,f,m,c,B)}r=E,o=v,c=pe,oe!=null?wn(n,!!o,oe,!1):!!c!=!!o&&(r!=null?wn(n,!!o,r,!0):wn(n,!!o,o?[]:"",!1));return;case"textarea":pe=oe=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:$n(n,r,E,null,c,f)}for(v in c)if(f=c[v],m=o[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":oe=f;break;case"defaultValue":pe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&$n(n,r,v,f,c,m)}Hs(n,oe,pe);return;case"option":for(var ht in o)oe=o[ht],o.hasOwnProperty(ht)&&oe!=null&&!c.hasOwnProperty(ht)&&(ht==="selected"?n.selected=!1:$n(n,r,ht,null,c,oe));for(B in c)oe=c[B],pe=o[B],c.hasOwnProperty(B)&&oe!==pe&&(oe!=null||pe!=null)&&(B==="selected"?n.selected=oe&&typeof oe!="function"&&typeof oe!="symbol":$n(n,r,B,oe,c,pe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dt in o)oe=o[Dt],o.hasOwnProperty(Dt)&&oe!=null&&!c.hasOwnProperty(Dt)&&$n(n,r,Dt,null,c,oe);for(ie in c)if(oe=c[ie],pe=o[ie],c.hasOwnProperty(ie)&&oe!==pe&&(oe!=null||pe!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,r));break;default:$n(n,r,ie,oe,c,pe)}return;default:if(cs(r)){for(var Wn in o)oe=o[Wn],o.hasOwnProperty(Wn)&&oe!==void 0&&!c.hasOwnProperty(Wn)&&Ym(n,r,Wn,void 0,c,oe);for(ke in c)oe=c[ke],pe=o[ke],!c.hasOwnProperty(ke)||oe===pe||oe===void 0&&pe===void 0||Ym(n,r,ke,oe,c,pe);return}}for(var X in o)oe=o[X],o.hasOwnProperty(X)&&oe!=null&&!c.hasOwnProperty(X)&&$n(n,r,X,null,c,oe);for(Ce in c)oe=c[Ce],pe=o[Ce],!c.hasOwnProperty(Ce)||oe===pe||oe==null&&pe==null||$n(n,r,Ce,oe,c,pe)}function O0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,v=f.initiatorType,E=f.duration;if(m&&E&&O0(v)){for(v=0,E=f.responseEnd,c+=1;c<o.length;c++){var B=o[c],ie=B.startTime;if(ie>E)break;var ke=B.transferSize,Ce=B.initiatorType;ke&&O0(Ce)&&(B=B.responseEnd,v+=ke*(B<E?1:(E-ie)/(B-ie)))}if(--c,r+=8*(m+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qm=null,Xm=null;function Lh(n){return n.nodeType===9?n:n.ownerDocument}function V0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function B0(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Jm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Zm=null;function MT(){var n=window.event;return n&&n.type==="popstate"?n===Zm?!1:(Zm=n,!0):(Zm=null,!1)}var U0=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,z0=typeof Promise=="function"?Promise:void 0,PT=typeof queueMicrotask=="function"?queueMicrotask:typeof z0<"u"?function(n){return z0.resolve(null).then(n).catch(LT)}:U0;function LT(n){setTimeout(function(){throw n})}function Ai(n){return n==="head"}function F0(n,r){var o=r,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),El(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Ic(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Ic(o);for(var m=o.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[Es]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&Ic(n.ownerDocument.body);o=f}while(o);El(r)}function q0(n,r){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function ep(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":ep(o),Ls(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function OT(n,r,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Es])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Gr(n.nextSibling),n===null)break}return null}function VT(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Gr(n.nextSibling),n===null))return null;return n}function H0(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Gr(n.nextSibling),n===null))return null;return n}function tp(n){return n.data==="$?"||n.data==="$~"}function np(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function BT(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Gr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var sp=null;function $0(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return Gr(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function W0(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function G0(n,r,o){switch(r=Lh(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Ic(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Ls(n)}var Kr=new Map,K0=new Set;function Oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Za=me.d;me.d={f:UT,r:zT,D:FT,C:qT,L:HT,m:$T,X:GT,S:WT,M:KT};function UT(){var n=Za.f(),r=Nh();return n||r}function zT(n){var r=H(n);r!==null&&r.tag===5&&r.type==="form"?hv(r):Za.r(n)}var kl=typeof document>"u"?null:document;function Y0(n,r,o){var c=kl;if(c&&typeof r=="string"&&r){var f=ct(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),K0.has(f)||(K0.add(f),n={rel:n,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Qs(r,"link",n),C(r),c.head.appendChild(r)))}}function FT(n){Za.D(n),Y0("dns-prefetch",n,null)}function qT(n,r){Za.C(n,r),Y0("preconnect",n,r)}function HT(n,r,o){Za.L(n,r,o);var c=kl;if(c&&n&&r){var f='link[rel="preload"][as="'+ct(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+ct(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+ct(o.imageSizes)+'"]')):f+='[href="'+ct(n)+'"]';var m=f;switch(r){case"style":m=Tl(n);break;case"script":m=jl(n)}Kr.has(m)||(n=k({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Kr.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Mc(m))||r==="script"&&c.querySelector(Dc(m))||(r=c.createElement("link"),Qs(r,"link",n),C(r),c.head.appendChild(r)))}}function $T(n,r){Za.m(n,r);var o=kl;if(o&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+ct(c)+'"][href="'+ct(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=jl(n)}if(!Kr.has(m)&&(n=k({rel:"modulepreload",href:n},r),Kr.set(m,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Dc(m)))return}c=o.createElement("link"),Qs(c,"link",n),C(c),o.head.appendChild(c)}}}function WT(n,r,o){Za.S(n,r,o);var c=kl;if(c&&n){var f=T(c).hoistableStyles,m=Tl(n);r=r||"default";var v=f.get(m);if(!v){var E={loading:0,preload:null};if(v=c.querySelector(Mc(m)))E.loading=5;else{n=k({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Kr.get(m))&&rp(n,o);var B=v=c.createElement("link");C(B),Qs(B,"link",n),B._p=new Promise(function(ie,ke){B.onload=ie,B.onerror=ke}),B.addEventListener("load",function(){E.loading|=1}),B.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Vh(v,r,c)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(m,v)}}}function GT(n,r){Za.X(n,r);var o=kl;if(o&&n){var c=T(o).hoistableScripts,f=jl(n),m=c.get(f);m||(m=o.querySelector(Dc(f)),m||(n=k({src:n,async:!0},r),(r=Kr.get(f))&&ap(n,r),m=o.createElement("script"),C(m),Qs(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function KT(n,r){Za.M(n,r);var o=kl;if(o&&n){var c=T(o).hoistableScripts,f=jl(n),m=c.get(f);m||(m=o.querySelector(Dc(f)),m||(n=k({src:n,async:!0,type:"module"},r),(r=Kr.get(f))&&ap(n,r),m=o.createElement("script"),C(m),Qs(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Q0(n,r,o,c){var f=(f=Ie.current)?Oh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Tl(o.href),o=T(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Tl(o.href);var m=T(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(Mc(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Kr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Kr.set(n,o),m||YT(f,n,o,v.state))),r&&c===null)throw Error(i(528,""));return v}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=jl(o),o=T(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Tl(n){return'href="'+ct(n)+'"'}function Mc(n){return'link[rel="stylesheet"]['+n+"]"}function X0(n){return k({},n,{"data-precedence":n.precedence,precedence:null})}function YT(n,r,o,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Qs(r,"link",o),C(r),n.head.appendChild(r))}function jl(n){return'[src="'+ct(n)+'"]'}function Dc(n){return"script[async]"+n}function J0(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+ct(o.href)+'"]');if(c)return r.instance=c,C(c),c;var f=k({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),C(c),Qs(c,"style",f),Vh(c,o.precedence,n),r.instance=c;case"stylesheet":f=Tl(o.href);var m=n.querySelector(Mc(f));if(m)return r.state.loading|=4,r.instance=m,C(m),m;c=X0(o),(f=Kr.get(f))&&rp(c,f),m=(n.ownerDocument||n).createElement("link"),C(m);var v=m;return v._p=new Promise(function(E,B){v.onload=E,v.onerror=B}),Qs(m,"link",c),r.state.loading|=4,Vh(m,o.precedence,n),r.instance=m;case"script":return m=jl(o.src),(f=n.querySelector(Dc(m)))?(r.instance=f,C(f),f):(c=o,(f=Kr.get(m))&&(c=k({},o),ap(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),C(f),Qs(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Vh(c,o.precedence,n));return r.instance}function Vh(n,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var E=c[v];if(E.dataset.precedence===r)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function rp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function ap(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Bh=null;function Z0(n,r,o){if(Bh===null){var c=new Map,f=Bh=new Map;f.set(o,c)}else f=Bh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Es]||m[rt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=n+v;var E=c.get(v);E?E.push(m):c.set(v,[m])}}return c}function e1(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function QT(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function t1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function XT(n,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Tl(c.href),m=r.querySelector(Mc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Uh.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=m,C(m);return}m=r.ownerDocument||r,c=X0(c),(f=Kr.get(f))&&rp(c,f),m=m.createElement("link"),C(m);var v=m;v._p=new Promise(function(E,B){v.onload=E,v.onerror=B}),Qs(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Uh.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var ip=0;function JT(n,r){return n.stylesheets&&n.count===0&&Fh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Fh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&ip===0&&(ip=62500*IT());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Fh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>ip?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Uh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var zh=null;function Fh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,zh=new Map,r.forEach(ZT,n),zh=null,Uh.call(n))}function ZT(n,r){if(!(r.state.loading&4)){var o=zh.get(n);if(o)var c=o.get(null);else{o=new Map,zh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),c=v)}c&&o.set(null,c)}f=r.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||c,m===c&&o.set(null,f),o.set(v,f),this.count++,c=Uh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Pc={$$typeof:ce,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function ej(n,r,o,c,f,m,v,E,B){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function n1(n,r,o,c,f,m,v,E,B,ie,ke,Ce){return n=new ej(n,r,o,v,B,ie,ke,Ce,E),r=1,m===!0&&(r|=24),m=Cr(3,null,null,r),n.current=m,m.stateNode=n,r=Bf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},qf(m),n}function s1(n){return n?(n=nl,n):nl}function r1(n,r,o,c,f,m){f=s1(f),c.context===null?c.context=f:c.pendingContext=f,c=xi(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=wi(n,c,r),o!==null&&(kr(o,n,r),fc(o,n,r))}function a1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function op(n,r){a1(n,r),(n=n.alternate)&&a1(n,r)}function i1(n){if(n.tag===13||n.tag===31){var r=po(n,67108864);r!==null&&kr(r,n,67108864),op(n,67108864)}}function o1(n){if(n.tag===13||n.tag===31){var r=Dr();r=U(r);var o=po(n,r);o!==null&&kr(o,n,r),op(n,r)}}var qh=!0;function tj(n,r,o,c){var f=q.T;q.T=null;var m=me.p;try{me.p=2,lp(n,r,o,c)}finally{me.p=m,q.T=f}}function nj(n,r,o,c){var f=q.T;q.T=null;var m=me.p;try{me.p=8,lp(n,r,o,c)}finally{me.p=m,q.T=f}}function lp(n,r,o,c){if(qh){var f=cp(c);if(f===null)Km(n,r,c,Hh,o),c1(n,c);else if(rj(f,n,r,o,c))c.stopPropagation();else if(c1(n,c),r&4&&-1<sj.indexOf(n)){for(;f!==null;){var m=H(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=tt(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var B=1<<31-Ve(v);E.entanglements[1]|=B,v&=~B}va(m),(Dn&6)===0&&(Eh=Xt()+500,Cc(0))}}break;case 31:case 13:E=po(m,2),E!==null&&kr(E,m,2),Nh(),op(m,2)}if(m=cp(c),m===null&&Km(n,r,c,Hh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Km(n,r,c,null,o)}}function cp(n){return n=Re(n),up(n)}var Hh=null;function up(n){if(Hh=null,n=Vn(n),n!==null){var r=u(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=h(r),n!==null)return n;n=null}else if(o===31){if(n=p(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Hh=n,null}function l1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ts()){case wt:return 2;case bn:return 8;case rn:case Sn:return 32;case de:return 268435456;default:return 32}default:return 32}}var hp=!1,Ii=null,Mi=null,Di=null,Lc=new Map,Oc=new Map,Pi=[],sj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c1(n,r){switch(n){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":Lc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(r.pointerId)}}function Vc(n,r,o,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=H(r),r!==null&&i1(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function rj(n,r,o,c,f){switch(r){case"focusin":return Ii=Vc(Ii,n,r,o,c,f),!0;case"dragenter":return Mi=Vc(Mi,n,r,o,c,f),!0;case"mouseover":return Di=Vc(Di,n,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Lc.set(m,Vc(Lc.get(m)||null,n,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Oc.set(m,Vc(Oc.get(m)||null,n,r,o,c,f)),!0}return!1}function u1(n){var r=Vn(n.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=h(o),r!==null){n.blockedOn=r,we(n.priority,function(){o1(o)});return}}else if(r===31){if(r=p(o),r!==null){n.blockedOn=r,we(n.priority,function(){o1(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $h(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=cp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Z=c,o.target.dispatchEvent(c),Z=null}else return r=H(o),r!==null&&i1(r),n.blockedOn=o,!1;r.shift()}return!0}function h1(n,r,o){$h(n)&&o.delete(r)}function aj(){hp=!1,Ii!==null&&$h(Ii)&&(Ii=null),Mi!==null&&$h(Mi)&&(Mi=null),Di!==null&&$h(Di)&&(Di=null),Lc.forEach(h1),Oc.forEach(h1)}function Wh(n,r){n.blockedOn===r&&(n.blockedOn=null,hp||(hp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,aj)))}var Gh=null;function d1(n){Gh!==n&&(Gh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Gh===n&&(Gh=null);for(var r=0;r<n.length;r+=3){var o=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(up(c||o)===null)continue;break}var m=H(o);m!==null&&(n.splice(r,3),r-=3,cm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function El(n){function r(B){return Wh(B,n)}Ii!==null&&Wh(Ii,n),Mi!==null&&Wh(Mi,n),Di!==null&&Wh(Di,n),Lc.forEach(r),Oc.forEach(r);for(var o=0;o<Pi.length;o++){var c=Pi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Pi.length&&(o=Pi[0],o.blockedOn===null);)u1(o),o.blockedOn===null&&Pi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],v=f[Nt]||null;if(typeof m=="function")v||d1(o);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Nt]||null)E=v.formAction;else if(up(f)!==null)continue}else E=v.action;typeof E=="function"?o[c+1]=E:(o.splice(c,3),c-=3),d1(o)}}}function f1(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function dp(n){this._internalRoot=n}Kh.prototype.render=dp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=Dr();r1(o,c,n,r,null,null)},Kh.prototype.unmount=dp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;r1(n.current,2,null,n,null,null),Nh(),r[it]=null}};function Kh(n){this._internalRoot=n}Kh.prototype.unstable_scheduleHydration=function(n){if(n){var r=_e();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Pi.length&&r!==0&&r<Pi[o].priority;o++);Pi.splice(o,0,n),o===0&&u1(n)}};var m1=e.version;if(m1!=="19.2.4")throw Error(i(527,m1,"19.2.4"));me.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(r),n=n!==null?w(n):null,n=n===null?null:n.stateNode,n};var ij={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{Xe=Yh.inject(ij),Oe=Yh}catch{}}return Uc.createRoot=function(n,r){if(!l(n))throw Error(i(299));var o=!1,c="",f=wv,m=_v,v=kv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=n1(n,1,!1,null,null,o,c,null,f,m,v,f1),n[it]=r.current,Gm(n),new dp(r)},Uc.hydrateRoot=function(n,r,o){if(!l(n))throw Error(i(299));var c=!1,f="",m=wv,v=_v,E=kv,B=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),r=n1(n,1,!0,r,o??null,c,f,B,m,v,E,f1),r.context=s1(null),o=r.current,c=Dr(),c=U(c),f=xi(c),f.callback=null,wi(o,f,c),o=c,r.current.lanes=o,In(r,o),va(r),n[it]=r.current,Gm(n),new Kh(r)},Uc.version="19.2.4",Uc}var T1;function gj(){if(T1)return pp.exports;T1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),pp.exports=pj(),pp.exports}var yj=gj();const bj="modulepreload",vj=function(s){return"/login/"+s},j1={},Er=function(e,t,i){let l=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(t.map(y=>{if(y=vj(y),y in j1)return;j1[y]=!0;const w=y.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const j=document.createElement("link");if(j.rel=w?"stylesheet":bj,w||(j.as="script"),j.crossOrigin="",j.href=y,p&&j.setAttribute("nonce",p),document.head.appendChild(j),w)return new Promise((L,G)=>{j.addEventListener("load",L),j.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var E1="popstate";function xj(s={}){function e(i,l){let{pathname:u,search:h,hash:p}=i.location;return Zp("",{pathname:u,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){return typeof l=="string"?l:iu(l)}return _j(e,t,null,s)}function ls(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Xr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wj(){return Math.random().toString(36).substring(2,10)}function S1(s,e){return{usr:s.state,key:s.key,idx:e}}function Zp(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Gl(e):e,state:t,key:e&&e.key||i||wj()}}function iu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Gl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function _j(s,e,t,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,y=w();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function w(){return(h.state||{idx:null}).idx}function k(){p="POP";let O=w(),te=O==null?null:O-y;y=O,g&&g({action:p,location:z.location,delta:te})}function j(O,te){p="PUSH";let Q=Zp(z.location,O,te);y=w()+1;let ce=S1(Q,y),je=z.createHref(Q);try{h.pushState(ce,"",je)}catch(He){if(He instanceof DOMException&&He.name==="DataCloneError")throw He;l.location.assign(je)}u&&g&&g({action:p,location:z.location,delta:1})}function L(O,te){p="REPLACE";let Q=Zp(z.location,O,te);y=w();let ce=S1(Q,y),je=z.createHref(Q);h.replaceState(ce,"",je),u&&g&&g({action:p,location:z.location,delta:0})}function G(O){return kj(O)}let z={get action(){return p},get location(){return s(l,h)},listen(O){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(E1,k),g=O,()=>{l.removeEventListener(E1,k),g=null}},createHref(O){return e(l,O)},createURL:G,encodeLocation(O){let te=G(O);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:j,replace:L,go(O){return h.go(O)}};return z}function kj(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ls(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:iu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function j2(s,e,t="/"){return Tj(s,e,t,!1)}function Tj(s,e,t,i){let l=typeof e=="string"?Gl(e):e,u=ii(l.pathname||"/",t);if(u==null)return null;let h=E2(s);jj(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=Lj(u);p=Dj(h[g],y,i)}return p}function E2(s,e=[],t=[],i="",l=!1){let u=(h,p,g=l,y)=>{let w={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(i)&&g)return;ls(w.relativePath.startsWith(i),`Absolute route path "${w.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(i.length)}let k=ni([i,w.relativePath]),j=t.concat(w);h.children&&h.children.length>0&&(ls(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),E2(h.children,e,j,k,g)),!(h.path==null&&!h.index)&&e.push({path:k,score:Ij(k,h.index),routesMeta:j})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of S2(h.path))u(h,p,!0,g)}),e}function S2(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,l=t.endsWith("?"),u=t.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=S2(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function jj(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Mj(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Ej=/^:[\w-]+$/,Sj=3,Nj=2,Cj=1,Rj=10,Aj=-2,N1=s=>s==="*";function Ij(s,e){let t=s.split("/"),i=t.length;return t.some(N1)&&(i+=Aj),e&&(i+=Nj),t.filter(l=>!N1(l)).reduce((l,u)=>l+(Ej.test(u)?Sj:u===""?Cj:Rj),i)}function Mj(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function Dj(s,e,t=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,w=u==="/"?e:e.slice(u.length)||"/",k=kd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),j=g.route;if(!k&&y&&t&&!i[i.length-1].route.index&&(k=kd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!k)return null;Object.assign(l,k.params),h.push({params:l,pathname:ni([u,k.pathname]),pathnameBase:Uj(ni([u,k.pathnameBase])),route:j}),k.pathnameBase!=="/"&&(u=ni([u,k.pathnameBase]))}return h}function kd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=Pj(s.path,s.caseSensitive,s.end),l=e.match(t);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:w,isOptional:k},j)=>{if(w==="*"){let G=p[j]||"";h=u.slice(0,u.length-G.length).replace(/(.)\/+$/,"$1")}const L=p[j];return k&&!L?y[w]=void 0:y[w]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function Pj(s,e=!1,t=!0){Xr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function Lj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ii(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var Oj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Vj(s,e="/"){let{pathname:t,search:i="",hash:l=""}=typeof s=="string"?Gl(s):s,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=C1(t.substring(1),"/"):u=C1(t,e)):u=e,{pathname:u,search:zj(i),hash:Fj(l)}}function C1(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function vp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Bj(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rg(s){let e=Bj(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Ag(s,e,t,i=!1){let l;typeof s=="string"?l=Gl(s):(l={...s},ls(!l.pathname||!l.pathname.includes("?"),vp("?","pathname","search",l)),ls(!l.pathname||!l.pathname.includes("#"),vp("#","pathname","hash",l)),ls(!l.search||!l.search.includes("#"),vp("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=t;else{let k=e.length-1;if(!i&&h.startsWith("..")){let j=h.split("/");for(;j[0]==="..";)j.shift(),k-=1;l.pathname=j.join("/")}p=k>=0?e[k]:"/"}let g=Vj(l,p),y=h&&h!=="/"&&h.endsWith("/"),w=(u||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var ni=s=>s.join("/").replace(/\/\/+/g,"/"),Uj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),zj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Fj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,qj=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Hj(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function $j(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var N2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function C2(s,e){let t=s;if(typeof t!="string"||!Oj.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,l=!1;if(N2)try{let u=new URL(window.location.href),h=t.startsWith("//")?new URL(u.protocol+t):new URL(t),p=ii(h.pathname,e);h.origin===u.origin&&p!=null?t=p+h.search+h.hash:l=!0}catch{Xr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var R2=["POST","PUT","PATCH","DELETE"];new Set(R2);var Wj=["GET",...R2];new Set(Wj);var Kl=x.createContext(null);Kl.displayName="DataRouter";var Gd=x.createContext(null);Gd.displayName="DataRouterState";var Gj=x.createContext(!1),A2=x.createContext({isTransitioning:!1});A2.displayName="ViewTransition";var Kj=x.createContext(new Map);Kj.displayName="Fetchers";var Yj=x.createContext(null);Yj.displayName="Await";var Or=x.createContext(null);Or.displayName="Navigation";var vu=x.createContext(null);vu.displayName="Location";var da=x.createContext({outlet:null,matches:[],isDataRoute:!1});da.displayName="Route";var Ig=x.createContext(null);Ig.displayName="RouteError";var I2="REACT_ROUTER_ERROR",Qj="REDIRECT",Xj="ROUTE_ERROR_RESPONSE";function Jj(s){if(s.startsWith(`${I2}:${Qj}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Zj(s){if(s.startsWith(`${I2}:${Xj}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new qj(e.status,e.statusText,e.data)}catch{}}function eE(s,{relative:e}={}){ls(Yl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=x.useContext(Or),{hash:l,pathname:u,search:h}=xu(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:ni([t,u])),i.createHref({pathname:p,search:h,hash:l})}function Yl(){return x.useContext(vu)!=null}function fa(){return ls(Yl(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(vu).location}var M2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function D2(s){x.useContext(Or).static||x.useLayoutEffect(s)}function er(){let{isDataRoute:s}=x.useContext(da);return s?mE():tE()}function tE(){ls(Yl(),"useNavigate() may be used only in the context of a <Router> component.");let s=x.useContext(Kl),{basename:e,navigator:t}=x.useContext(Or),{matches:i}=x.useContext(da),{pathname:l}=fa(),u=JSON.stringify(Rg(i)),h=x.useRef(!1);return D2(()=>{h.current=!0}),x.useCallback((g,y={})=>{if(Xr(h.current,M2),!h.current)return;if(typeof g=="number"){t.go(g);return}let w=Ag(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ni([e,w.pathname])),(y.replace?t.replace:t.push)(w,y.state,y)},[e,t,u,l,s])}x.createContext(null);function nE(){let{matches:s}=x.useContext(da),e=s[s.length-1];return e?e.params:{}}function xu(s,{relative:e}={}){let{matches:t}=x.useContext(da),{pathname:i}=fa(),l=JSON.stringify(Rg(t));return x.useMemo(()=>Ag(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function sE(s,e){return P2(s,e)}function P2(s,e,t,i,l){ls(Yl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=x.useContext(Or),{matches:h}=x.useContext(da),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",w=p?p.pathnameBase:"/",k=p&&p.route;{let Q=k&&k.path||"";O2(y,!k||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let j=fa(),L;if(e){let Q=typeof e=="string"?Gl(e):e;ls(w==="/"||Q.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),L=Q}else L=j;let G=L.pathname||"/",z=G;if(w!=="/"){let Q=w.replace(/^\//,"").split("/");z="/"+G.replace(/^\//,"").split("/").slice(Q.length).join("/")}let O=j2(s,{pathname:z});Xr(k||O!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),Xr(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=lE(O&&O.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:ni([w,u.encodeLocation?u.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?w:ni([w,u.encodeLocation?u.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),h,t,i,l);return e&&te?x.createElement(vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},te):te}function rE(){let s=fE(),e=Hj(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:u},"ErrorBoundary")," or"," ",x.createElement("code",{style:u},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),t?x.createElement("pre",{style:l},t):null,h)}var aE=x.createElement(rE,null),L2=class extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=Zj(s.digest);t&&(s=t)}let e=s!==void 0?x.createElement(da.Provider,{value:this.props.routeContext},x.createElement(Ig.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?x.createElement(iE,{error:s},e):e}};L2.contextType=Gj;var xp=new WeakMap;function iE({children:s,error:e}){let{basename:t}=x.useContext(Or);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=Jj(e.digest);if(i){let l=xp.get(e);if(l)throw l;let u=C2(i.location,t);if(N2&&!xp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw xp.set(e,h),h}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function oE({routeContext:s,match:e,children:t}){let i=x.useContext(Kl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(da.Provider,{value:s},t)}function lE(s,e=[],t=null,i=null,l=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,h=t?.errors;if(h!=null){let w=u.findIndex(k=>k.route.id&&h?.[k.route.id]!==void 0);ls(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,w+1))}let p=!1,g=-1;if(t)for(let w=0;w<u.length;w++){let k=u[w];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(g=w),k.route.id){let{loaderData:j,errors:L}=t,G=k.route.loader&&!j.hasOwnProperty(k.route.id)&&(!L||L[k.route.id]===void 0);if(k.route.lazy||G){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=t&&i?(w,k)=>{i(w,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:$j(t.matches),errorInfo:k})}:void 0;return u.reduceRight((w,k,j)=>{let L,G=!1,z=null,O=null;t&&(L=h&&k.route.id?h[k.route.id]:void 0,z=k.route.errorElement||aE,p&&(g<0&&j===0?(O2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),G=!0,O=null):g===j&&(G=!0,O=k.route.hydrateFallbackElement||null)));let te=e.concat(u.slice(0,j+1)),Q=()=>{let ce;return L?ce=z:G?ce=O:k.route.Component?ce=x.createElement(k.route.Component,null):k.route.element?ce=k.route.element:ce=w,x.createElement(oE,{match:k,routeContext:{outlet:w,matches:te,isDataRoute:t!=null},children:ce})};return t&&(k.route.ErrorBoundary||k.route.errorElement||j===0)?x.createElement(L2,{location:t.location,revalidation:t.revalidation,component:z,error:L,children:Q(),routeContext:{outlet:null,matches:te,isDataRoute:!0},onError:y}):Q()},null)}function Mg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cE(s){let e=x.useContext(Kl);return ls(e,Mg(s)),e}function uE(s){let e=x.useContext(Gd);return ls(e,Mg(s)),e}function hE(s){let e=x.useContext(da);return ls(e,Mg(s)),e}function Dg(s){let e=hE(s),t=e.matches[e.matches.length-1];return ls(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function dE(){return Dg("useRouteId")}function fE(){let s=x.useContext(Ig),e=uE("useRouteError"),t=Dg("useRouteError");return s!==void 0?s:e.errors?.[t]}function mE(){let{router:s}=cE("useNavigate"),e=Dg("useNavigate"),t=x.useRef(!1);return D2(()=>{t.current=!0}),x.useCallback(async(l,u={})=>{Xr(t.current,M2),t.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var R1={};function O2(s,e,t){!e&&!R1[s]&&(R1[s]=!0,Xr(!1,t))}x.memo(pE);function pE({routes:s,future:e,state:t,onError:i}){return P2(s,void 0,t,i,e)}function gE({to:s,replace:e,state:t,relative:i}){ls(Yl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=x.useContext(Or);Xr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=x.useContext(da),{pathname:h}=fa(),p=er(),g=Ag(s,Rg(u),h,i==="path"),y=JSON.stringify(g);return x.useEffect(()=>{p(JSON.parse(y),{replace:e,state:t,relative:i})},[p,y,i,e,t]),null}function rs(s){ls(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yE({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){ls(!Yl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=x.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof t=="string"&&(t=Gl(t));let{pathname:y="/",search:w="",hash:k="",state:j=null,key:L="default"}=t,G=x.useMemo(()=>{let z=ii(y,p);return z==null?null:{location:{pathname:z,search:w,hash:k,state:j,key:L},navigationType:i}},[p,y,w,k,j,L,i]);return Xr(G!=null,`<Router basename="${p}"> is not able to match the URL "${y}${w}${k}" because it does not start with the basename, so the <Router> won't render anything.`),G==null?null:x.createElement(Or.Provider,{value:g},x.createElement(vu.Provider,{children:e,value:G}))}function bE({children:s,location:e}){return sE(eg(s),e)}function eg(s,e=[]){let t=[];return x.Children.forEach(s,(i,l)=>{if(!x.isValidElement(i))return;let u=[...e,l];if(i.type===x.Fragment){t.push.apply(t,eg(i.props.children,u));return}ls(i.type===rs,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ls(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=eg(i.props.children,u)),t.push(h)}),t}var hd="get",dd="application/x-www-form-urlencoded";function Kd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function vE(s){return Kd(s)&&s.tagName.toLowerCase()==="button"}function xE(s){return Kd(s)&&s.tagName.toLowerCase()==="form"}function wE(s){return Kd(s)&&s.tagName.toLowerCase()==="input"}function _E(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function kE(s,e){return s.button===0&&(!e||e==="_self")&&!_E(s)}function tg(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let i=s[t];return e.concat(Array.isArray(i)?i.map(l=>[t,l]):[[t,i]])},[]))}function TE(s,e){let t=tg(s);return e&&e.forEach((i,l)=>{t.has(l)||e.getAll(l).forEach(u=>{t.append(l,u)})}),t}var Qh=null;function jE(){if(Qh===null)try{new FormData(document.createElement("form"),0),Qh=!1}catch{Qh=!0}return Qh}var EE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wp(s){return s!=null&&!EE.has(s)?(Xr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dd}"`),null):s}function SE(s,e){let t,i,l,u,h;if(xE(s)){let p=s.getAttribute("action");i=p?ii(p,e):null,t=s.getAttribute("method")||hd,l=wp(s.getAttribute("enctype"))||dd,u=new FormData(s)}else if(vE(s)||wE(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?ii(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||hd,l=wp(s.getAttribute("formenctype"))||wp(p.getAttribute("enctype"))||dd,u=new FormData(p,s),!jE()){let{name:y,type:w,value:k}=s;if(w==="image"){let j=y?`${y}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else y&&u.append(y,k)}}else{if(Kd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hd,i=null,l=dd,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:t.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Pg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function NE(s,e,t,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&ii(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function CE(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RE(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function AE(s,e,t){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await CE(u,t);return h.links?h.links():[]}return[]}));return PE(i.flat(1).filter(RE).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function A1(s,e,t,i,l,u){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,p=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let w=i.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function IE(s,e,{includeHydrateFallback:t}={}){return ME(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function ME(s){return[...new Set(s)]}function DE(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function PE(s,e){let t=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(DE(l));return t.has(u)||(t.add(u),i.push({key:u,link:l})),i},[])}function V2(){let s=x.useContext(Kl);return Pg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function LE(){let s=x.useContext(Gd);return Pg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Lg=x.createContext(void 0);Lg.displayName="FrameworkContext";function B2(){let s=x.useContext(Lg);return Pg(s,"You must render this element inside a <HydratedRouter> element"),s}function OE(s,e){let t=x.useContext(Lg),[i,l]=x.useState(!1),[u,h]=x.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:k}=e,j=x.useRef(null);x.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let z=te=>{te.forEach(Q=>{h(Q.isIntersecting)})},O=new IntersectionObserver(z,{threshold:.5});return j.current&&O.observe(j.current),()=>{O.disconnect()}}},[s]),x.useEffect(()=>{if(i){let z=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(z)}}},[i]);let L=()=>{l(!0)},G=()=>{l(!1),h(!1)};return t?s!=="intent"?[u,j,{}]:[u,j,{onFocus:zc(p,L),onBlur:zc(g,G),onMouseEnter:zc(y,L),onMouseLeave:zc(w,G),onTouchStart:zc(k,L)}]:[!1,j,{}]}function zc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function VE({page:s,...e}){let{router:t}=V2(),i=x.useMemo(()=>j2(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?x.createElement(UE,{page:s,matches:i,...e}):null}function BE(s){let{manifest:e,routeModules:t}=B2(),[i,l]=x.useState([]);return x.useEffect(()=>{let u=!1;return AE(s,e,t).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,t]),i}function UE({page:s,matches:e,...t}){let i=fa(),{future:l,manifest:u,routeModules:h}=B2(),{basename:p}=V2(),{loaderData:g,matches:y}=LE(),w=x.useMemo(()=>A1(s,e,y,u,i,"data"),[s,e,y,u,i]),k=x.useMemo(()=>A1(s,e,y,u,i,"assets"),[s,e,y,u,i]),j=x.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let z=new Set,O=!1;if(e.forEach(Q=>{let ce=u.routes[Q.route.id];!ce||!ce.hasLoader||(!w.some(je=>je.route.id===Q.route.id)&&Q.route.id in g&&h[Q.route.id]?.shouldRevalidate||ce.hasClientLoader?O=!0:z.add(Q.route.id))}),z.size===0)return[];let te=NE(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return O&&z.size>0&&te.searchParams.set("_routes",e.filter(Q=>z.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[te.pathname+te.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,w,e,s,h]),L=x.useMemo(()=>IE(k,u),[k,u]),G=BE(k);return x.createElement(x.Fragment,null,j.map(z=>x.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),L.map(z=>x.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),G.map(({key:z,link:O})=>x.createElement("link",{key:z,nonce:t.nonce,...O,crossOrigin:O.crossOrigin??t.crossOrigin})))}function zE(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var FE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FE&&(window.__reactRouterVersion="7.13.0")}catch{}function qE({basename:s,children:e,unstable_useTransitions:t,window:i}){let l=x.useRef();l.current==null&&(l.current=xj({window:i,v5Compat:!0}));let u=l.current,[h,p]=x.useState({action:u.action,location:u.location}),g=x.useCallback(y=>{t===!1?p(y):x.startTransition(()=>p(y))},[t]);return x.useLayoutEffect(()=>u.listen(g),[u,g]),x.createElement(yE,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:t})}var U2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z2=x.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:w,viewTransition:k,unstable_defaultShouldRevalidate:j,...L},G){let{basename:z,unstable_useTransitions:O}=x.useContext(Or),te=typeof y=="string"&&U2.test(y),Q=C2(y,z);y=Q.to;let ce=eE(y,{relative:l}),[je,He,ze]=OE(i,L),I=GE(y,{replace:h,state:p,target:g,preventScrollReset:w,relative:l,viewTransition:k,unstable_defaultShouldRevalidate:j,unstable_useTransitions:O});function S(V){e&&e(V),V.defaultPrevented||I(V)}let A=x.createElement("a",{...L,...ze,href:Q.absoluteURL||ce,onClick:Q.isExternal||u?e:S,ref:zE(G,He),target:g,"data-discover":!te&&t==="render"?"true":void 0});return je&&!te?x.createElement(x.Fragment,null,A,x.createElement(VE,{page:ce})):A});z2.displayName="Link";var HE=x.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...y},w){let k=xu(h,{relative:y.relative}),j=fa(),L=x.useContext(Gd),{navigator:G,basename:z}=x.useContext(Or),O=L!=null&&ZE(k)&&p===!0,te=G.encodeLocation?G.encodeLocation(k).pathname:k.pathname,Q=j.pathname,ce=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),ce=ce?ce.toLowerCase():null,te=te.toLowerCase()),ce&&z&&(ce=ii(ce,z)||ce);const je=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let He=Q===te||!l&&Q.startsWith(te)&&Q.charAt(je)==="/",ze=ce!=null&&(ce===te||!l&&ce.startsWith(te)&&ce.charAt(te.length)==="/"),I={isActive:He,isPending:ze,isTransitioning:O},S=He?e:void 0,A;typeof i=="function"?A=i(I):A=[i,He?"active":null,ze?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(I):u;return x.createElement(z2,{...y,"aria-current":S,className:A,ref:w,style:V,to:h,viewTransition:p},typeof g=="function"?g(I):g)});HE.displayName="NavLink";var $E=x.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:l,state:u,method:h=hd,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:k,unstable_defaultShouldRevalidate:j,...L},G)=>{let{unstable_useTransitions:z}=x.useContext(Or),O=XE(),te=JE(p,{relative:y}),Q=h.toLowerCase()==="get"?"get":"post",ce=typeof p=="string"&&U2.test(p),je=He=>{if(g&&g(He),He.defaultPrevented)return;He.preventDefault();let ze=He.nativeEvent.submitter,I=ze?.getAttribute("formmethod")||h,S=()=>O(ze||He.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:l,state:u,relative:y,preventScrollReset:w,viewTransition:k,unstable_defaultShouldRevalidate:j});z&&t!==!1?x.startTransition(()=>S()):S()};return x.createElement("form",{ref:G,method:Q,action:te,onSubmit:i?g:je,...L,"data-discover":!ce&&s==="render"?"true":void 0})});$E.displayName="Form";function WE(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F2(s){let e=x.useContext(Kl);return ls(e,WE(s)),e}function GE(s,{target:e,replace:t,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=er(),w=fa(),k=xu(s,{relative:u});return x.useCallback(j=>{if(kE(j,e)){j.preventDefault();let L=t!==void 0?t:iu(w)===iu(k),G=()=>y(s,{replace:L,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?x.startTransition(()=>G()):G()}},[w,y,k,t,i,e,s,l,u,h,p,g])}function KE(s){Xr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=x.useRef(tg(s)),t=x.useRef(!1),i=fa(),l=x.useMemo(()=>TE(i.search,t.current?null:e.current),[i.search]),u=er(),h=x.useCallback((p,g)=>{const y=tg(typeof p=="function"?p(new URLSearchParams(l)):p);t.current=!0,u("?"+y,g)},[u,l]);return[l,h]}var YE=0,QE=()=>`__${String(++YE)}__`;function XE(){let{router:s}=F2("useSubmit"),{basename:e}=x.useContext(Or),t=dE(),i=s.fetch,l=s.navigate;return x.useCallback(async(u,h={})=>{let{action:p,method:g,encType:y,formData:w,body:k}=SE(u,e);if(h.navigate===!1){let j=h.fetcherKey||QE();await i(j,t,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:k,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:k,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:t,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,t])}function JE(s,{relative:e}={}){let{basename:t}=x.useContext(Or),i=x.useContext(da);ls(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...xu(s||".",{relative:e})},h=fa();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(k=>k).forEach(k=>p.append("index",k));let w=p.toString();u.search=w?`?${w}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:ni([t,u.pathname])),iu(u)}function ZE(s,{relative:e}={}){let t=x.useContext(A2);ls(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=F2("useViewTransitionState"),l=xu(s,{relative:e});if(!t.isTransitioning)return!1;let u=ii(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=ii(t.nextLocation.pathname,i)||t.nextLocation.pathname;return kd(l.pathname,h)!=null||kd(l.pathname,u)!=null}const eS=()=>{};var I1={};const q2=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},tS=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const l=s[t++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[t++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[t++],h=s[t++],p=s[t++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},H2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,w=u>>2,k=(u&3)<<4|p>>4;let j=(p&15)<<2|y>>6,L=y&63;g||(L=64,h||(j=64)),i.push(t[w],t[k],t[j],t[L])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(q2(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):tS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=t[s.charAt(l++)],p=l<s.length?t[s.charAt(l)]:0;++l;const y=l<s.length?t[s.charAt(l)]:64;++l;const k=l<s.length?t[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||k==null)throw new nS;const j=u<<2|p>>4;if(i.push(j),y!==64){const L=p<<4&240|y>>2;if(i.push(L),k!==64){const G=y<<6&192|k;i.push(G)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class nS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sS=function(s){const e=q2(s);return H2.encodeByteArray(e,!0)},Td=function(s){return sS(s).replace(/\./g,"")},$2=function(s){try{return H2.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function rS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const aS=()=>rS().__FIREBASE_DEFAULTS__,iS=()=>{if(typeof process>"u"||typeof I1>"u")return;const s=I1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},oS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&$2(s[1]);return e&&JSON.parse(e)},Yd=()=>{try{return eS()||aS()||iS()||oS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},W2=s=>Yd()?.emulatorHosts?.[s],G2=s=>{const e=W2(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},K2=()=>Yd()?.config,Y2=s=>Yd()?.[`_${s}`];class lS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function io(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Og(s){return(await fetch(s,{credentials:"include"})).ok}function Q2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Td(JSON.stringify(t)),Td(JSON.stringify(h)),""].join(".")}const Jc={};function cS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Jc))Jc[e]?s.emulator.push(e):s.prod.push(e);return s}function uS(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let M1=!1;function Vg(s,e){if(typeof window>"u"||typeof document>"u"||!io(window.location.host)||Jc[s]===e||Jc[s]||M1)return;Jc[s]=e;function t(j){return`__firebase__banner__${j}`}const i="__firebase__banner",u=cS().prod.length>0;function h(){const j=document.getElementById(i);j&&j.remove()}function p(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function g(j,L){j.setAttribute("width","24"),j.setAttribute("id",L),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function y(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{M1=!0,h()},j}function w(j,L){j.setAttribute("id",L),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function k(){const j=uS(i),L=t("text"),G=document.getElementById(L)||document.createElement("span"),z=t("learnmore"),O=document.getElementById(z)||document.createElement("a"),te=t("preprendIcon"),Q=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const ce=j.element;p(ce),w(O,z);const je=y();g(Q,te),ce.append(Q,G,O,je),document.body.appendChild(ce)}u?(G.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}function ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ir())}function dS(){const s=Yd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function pS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gS(){const s=ir();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function yS(){return!dS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bS(){try{return typeof indexedDB=="object"}catch{return!1}}function vS(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}const xS="FirebaseError";class Ia extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=xS,Object.setPrototypeOf(this,Ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?wS(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new Ia(l,p,i)}}function wS(s,e){return s.replace(_S,(t,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const _S=/\{\$([^}]+)}/g;function kS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Bo(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const l of t){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(D1(u)&&D1(h)){if(!Bo(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!t.includes(l))return!1;return!0}function D1(s){return s!==null&&typeof s=="object"}function _u(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Wc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Gc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function TS(s,e){const t=new jS(s,e);return t.subscribe.bind(t)}class jS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let l;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ES(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:i},l.next===void 0&&(l.next=_p),l.error===void 0&&(l.error=_p),l.complete===void 0&&(l.complete=_p);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ES(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function _p(){}function Yn(s){return s&&s._delegate?s._delegate:s}class Zi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Io="[DEFAULT]";class SS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new lS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CS(e))try{this.getOrInitializeService({instanceIdentifier:Io})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=Io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Io){return this.instances.has(e)}getOptions(e=Io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const l of i)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:NS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Io){return this.component?this.component.multipleInstances?e:Io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NS(s){return s===Io?void 0:s}function CS(s){return s.instantiationMode==="EAGER"}class RS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var mn;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(mn||(mn={}));const AS={debug:mn.DEBUG,verbose:mn.VERBOSE,info:mn.INFO,warn:mn.WARN,error:mn.ERROR,silent:mn.SILENT},IS=mn.INFO,MS={[mn.DEBUG]:"log",[mn.VERBOSE]:"log",[mn.INFO]:"info",[mn.WARN]:"warn",[mn.ERROR]:"error"},DS=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=MS[e];if(l)console[l](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bg{constructor(e){this.name=e,this._logLevel=IS,this._logHandler=DS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mn.DEBUG,...e),this._logHandler(this,mn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mn.VERBOSE,...e),this._logHandler(this,mn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mn.INFO,...e),this._logHandler(this,mn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mn.WARN,...e),this._logHandler(this,mn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mn.ERROR,...e),this._logHandler(this,mn.ERROR,...e)}}const PS=(s,e)=>e.some(t=>s instanceof t);let P1,L1;function LS(){return P1||(P1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OS(){return L1||(L1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X2=new WeakMap,ng=new WeakMap,J2=new WeakMap,kp=new WeakMap,Ug=new WeakMap;function VS(s){const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(Yi(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&X2.set(t,s)}).catch(()=>{}),Ug.set(e,s),e}function BS(s){if(ng.has(s))return;const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});ng.set(s,e)}let sg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return ng.get(s);if(e==="objectStoreNames")return s.objectStoreNames||J2.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yi(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function US(s){sg=s(sg)}function zS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Tp(this),e,...t);return J2.set(i,e.sort?e.sort():[e]),Yi(i)}:OS().includes(s)?function(...e){return s.apply(Tp(this),e),Yi(X2.get(this))}:function(...e){return Yi(s.apply(Tp(this),e))}}function FS(s){return typeof s=="function"?zS(s):(s instanceof IDBTransaction&&BS(s),PS(s,LS())?new Proxy(s,sg):s)}function Yi(s){if(s instanceof IDBRequest)return VS(s);if(kp.has(s))return kp.get(s);const e=FS(s);return e!==s&&(kp.set(s,e),Ug.set(e,s)),e}const Tp=s=>Ug.get(s);function qS(s,e,{blocked:t,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=Yi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Yi(h.result),g.oldVersion,g.newVersion,Yi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const HS=["get","getKey","getAll","getAllKeys","count"],$S=["put","add","delete","clear"],jp=new Map;function O1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(jp.get(e))return jp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,l=$S.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(l||HS.includes(t)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),l&&g.done]))[0]};return jp.set(e,u),u}US(s=>({...s,get:(e,t,i)=>O1(e,t)||s.get(e,t,i),has:(e,t)=>!!O1(e,t)||s.has(e,t)}));class WS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function GS(s){return s.getComponent()?.type==="VERSION"}const rg="@firebase/app",V1="0.14.7";const oi=new Bg("@firebase/app"),KS="@firebase/app-compat",YS="@firebase/analytics-compat",QS="@firebase/analytics",XS="@firebase/app-check-compat",JS="@firebase/app-check",ZS="@firebase/auth",eN="@firebase/auth-compat",tN="@firebase/database",nN="@firebase/data-connect",sN="@firebase/database-compat",rN="@firebase/functions",aN="@firebase/functions-compat",iN="@firebase/installations",oN="@firebase/installations-compat",lN="@firebase/messaging",cN="@firebase/messaging-compat",uN="@firebase/performance",hN="@firebase/performance-compat",dN="@firebase/remote-config",fN="@firebase/remote-config-compat",mN="@firebase/storage",pN="@firebase/storage-compat",gN="@firebase/firestore",yN="@firebase/ai",bN="@firebase/firestore-compat",vN="firebase",xN="12.8.0";const ag="[DEFAULT]",wN={[rg]:"fire-core",[KS]:"fire-core-compat",[QS]:"fire-analytics",[YS]:"fire-analytics-compat",[JS]:"fire-app-check",[XS]:"fire-app-check-compat",[ZS]:"fire-auth",[eN]:"fire-auth-compat",[tN]:"fire-rtdb",[nN]:"fire-data-connect",[sN]:"fire-rtdb-compat",[rN]:"fire-fn",[aN]:"fire-fn-compat",[iN]:"fire-iid",[oN]:"fire-iid-compat",[lN]:"fire-fcm",[cN]:"fire-fcm-compat",[uN]:"fire-perf",[hN]:"fire-perf-compat",[dN]:"fire-rc",[fN]:"fire-rc-compat",[mN]:"fire-gcs",[pN]:"fire-gcs-compat",[gN]:"fire-fst",[bN]:"fire-fst-compat",[yN]:"fire-vertex","fire-js":"fire-js",[vN]:"fire-js-all"};const jd=new Map,_N=new Map,ig=new Map;function B1(s,e){try{s.container.addComponent(e)}catch(t){oi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Uo(s){const e=s.name;if(ig.has(e))return oi.debug(`There were multiple attempts to register component ${e}.`),!1;ig.set(e,s);for(const t of jd.values())B1(t,s);for(const t of _N.values())B1(t,s);return!0}function Qd(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Pr(s){return s==null?!1:s.settings!==void 0}const kN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new wu("app","Firebase",kN);class TN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}const Go=xN;function zg(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:ag,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Qi.create("bad-app-name",{appName:String(l)});if(t||(t=K2()),!t)throw Qi.create("no-options");const u=jd.get(l);if(u){if(Bo(t,u.options)&&Bo(i,u.config))return u;throw Qi.create("duplicate-app",{appName:l})}const h=new RS(l);for(const g of ig.values())h.addComponent(g);const p=new TN(t,i,h);return jd.set(l,p),p}function Fg(s=ag){const e=jd.get(s);if(!e&&s===ag&&K2())return zg();if(!e)throw Qi.create("no-app",{appName:s});return e}function ka(s,e,t){let i=wN[s]??s;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oi.warn(h.join(" "));return}Uo(new Zi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const jN="firebase-heartbeat-database",EN=1,ou="firebase-heartbeat-store";let Ep=null;function Z2(){return Ep||(Ep=qS(jN,EN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ou)}catch(t){console.warn(t)}}}}).catch(s=>{throw Qi.create("idb-open",{originalErrorMessage:s.message})})),Ep}async function SN(s){try{const t=(await Z2()).transaction(ou),i=await t.objectStore(ou).get(ew(s));return await t.done,i}catch(e){if(e instanceof Ia)oi.warn(e.message);else{const t=Qi.create("idb-get",{originalErrorMessage:e?.message});oi.warn(t.message)}}}async function U1(s,e){try{const i=(await Z2()).transaction(ou,"readwrite");await i.objectStore(ou).put(e,ew(s)),await i.done}catch(t){if(t instanceof Ia)oi.warn(t.message);else{const i=Qi.create("idb-set",{originalErrorMessage:t?.message});oi.warn(i.message)}}}function ew(s){return`${s.name}!${s.options.appId}`}const NN=1024,CN=30;class RN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=z1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>CN){const l=MN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){oi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=z1(),{heartbeatsToSend:t,unsentEntries:i}=AN(this._heartbeatsCache.heartbeats),l=Td(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return oi.warn(e),""}}}function z1(){return new Date().toISOString().substring(0,10)}function AN(s,e=NN){const t=[];let i=s.slice();for(const l of s){const u=t.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),F1(t)>e){u.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),F1(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class IN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bS()?vS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await SN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return U1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return U1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function F1(s){return Td(JSON.stringify({version:2,heartbeats:s})).length}function MN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function DN(s){Uo(new Zi("platform-logger",e=>new WS(e),"PRIVATE")),Uo(new Zi("heartbeat",e=>new RN(e),"PRIVATE")),ka(rg,V1,s),ka(rg,V1,"esm2020"),ka("fire-js","")}DN("");function tw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PN=tw,nw=new wu("auth","Firebase",tw());const Ed=new Bg("@firebase/auth");function LN(s,...e){Ed.logLevel<=mn.WARN&&Ed.warn(`Auth (${Go}): ${s}`,...e)}function fd(s,...e){Ed.logLevel<=mn.ERROR&&Ed.error(`Auth (${Go}): ${s}`,...e)}function ua(s,...e){throw qg(s,...e)}function Ta(s,...e){return qg(s,...e)}function sw(s,e,t){const i={...PN(),[e]:t};return new wu("auth","Firebase",i).create(e,{appName:s.name})}function si(s){return sw(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qg(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return nw.create(s,...e)}function Vt(s,e,...t){if(!s)throw qg(e,...t)}function ei(s){const e="INTERNAL ASSERTION FAILED: "+s;throw fd(e),new Error(e)}function li(s,e){s||ei(e)}function og(){return typeof self<"u"&&self.location?.href||""}function ON(){return q1()==="http:"||q1()==="https:"}function q1(){return typeof self<"u"&&self.location?.protocol||null}function VN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ON()||mS()||"connection"in navigator)?navigator.onLine:!0}function BN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class ku{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=hS()||pS()}get(){return VN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hg(s,e){li(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class rw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const UN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const zN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FN=new ku(3e4,6e4);function hi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function di(s,e,t,i,l={}){return aw(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=_u({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return fS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&io(s.emulatorConfig.host)&&(y.credentials="include"),rw.fetch()(await iw(s,s.config.apiHost,t,p),y)})}async function aw(s,e,t){s._canInitEmulator=!1;const i={...UN,...e};try{const l=new HN(s),u=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Xh(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Xh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Xh(s,"user-disabled",h);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw sw(s,w,y);ua(s,w)}}catch(l){if(l instanceof Ia)throw l;ua(s,"network-request-failed",{message:String(l)})}}async function Tu(s,e,t,i,l={}){const u=await di(s,e,t,i,l);return"mfaPendingCredential"in u&&ua(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function iw(s,e,t,i){const l=`${e}${t}?${i}`,u=s,h=u.config.emulator?Hg(s.config,l):`${s.config.apiScheme}://${l}`;return zN.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function qN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ta(this.auth,"network-request-failed")),FN.get())})}}function Xh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const l=Ta(s,e,i);return l.customData._tokenResponse=t,l}function H1(s){return s!==void 0&&s.enterprise!==void 0}class $N{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WN(s,e){return di(s,"GET","/v2/recaptchaConfig",hi(s,e))}async function GN(s,e){return di(s,"POST","/v1/accounts:delete",e)}async function Sd(s,e){return di(s,"POST","/v1/accounts:lookup",e)}function Zc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KN(s,e=!1){const t=Yn(s),i=await t.getIdToken(e),l=$g(i);Vt(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Zc(Sp(l.auth_time)),issuedAtTime:Zc(Sp(l.iat)),expirationTime:Zc(Sp(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Sp(s){return Number(s)*1e3}function $g(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{const l=$2(t);return l?JSON.parse(l):(fd("Failed to decode base64 JWT payload"),null)}catch(l){return fd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function $1(s){const e=$g(s);return Vt(e,"internal-error"),Vt(typeof e.exp<"u","internal-error"),Vt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ia&&YN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function YN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class QN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class lg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nd(s){const e=s.auth,t=await s.getIdToken(),i=await lu(s,Sd(e,{idToken:t}));Vt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?ow(l.providerUserInfo):[],h=JN(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,y=p?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new lg(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,w)}async function XN(s){const e=Yn(s);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JN(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function ow(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function ZN(s,e){const t=await aw(s,{},async()=>{const i=_u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await iw(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&io(s.emulatorConfig.host)&&(g.credentials="include"),rw.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function eC(s,e){return di(s,"POST","/v2/accounts:revokeToken",hi(s,e))}class Ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Vt(e.idToken,"internal-error"),Vt(typeof e.idToken<"u","internal-error"),Vt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Vt(e.length!==0,"internal-error");const t=$1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Vt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:l,expiresIn:u}=await ZN(e,t);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:l,expirationTime:u}=t,h=new Ll;return i&&(Vt(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(Vt(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(Vt(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ll,this.toJSON())}_performRefresh(){return ei("not implemented")}}function Oi(s,e){Vt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class la{constructor({uid:e,auth:t,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new QN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new lg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await lu(this,this.stsTokenManager.getToken(this.auth,e));return Vt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KN(this,e)}reload(){return XN(this)}_assign(e){this!==e&&(Vt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new la({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Nd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pr(this.auth.app))return Promise.reject(si(this.auth));const e=await this.getIdToken();return await lu(this,GN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,l=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:k,emailVerified:j,isAnonymous:L,providerData:G,stsTokenManager:z}=t;Vt(k&&z,e,"internal-error");const O=Ll.fromJSON(this.name,z);Vt(typeof k=="string",e,"internal-error"),Oi(i,e.name),Oi(l,e.name),Vt(typeof j=="boolean",e,"internal-error"),Vt(typeof L=="boolean",e,"internal-error"),Oi(u,e.name),Oi(h,e.name),Oi(p,e.name),Oi(g,e.name),Oi(y,e.name),Oi(w,e.name);const te=new la({uid:k,auth:e,email:l,emailVerified:j,displayName:i,isAnonymous:L,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:O,createdAt:y,lastLoginAt:w});return G&&Array.isArray(G)&&(te.providerData=G.map(Q=>({...Q}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,t,i=!1){const l=new Ll;l.updateFromServerResponse(t);const u=new la({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Nd(u),u}static async _fromGetAccountInfoResponse(e,t,i){const l=t.users[0];Vt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?ow(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new Ll;p.updateFromIdToken(i);const g=new la({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new lg(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const W1=new Map;function ti(s){li(s instanceof Function,"Expected a class definition");let e=W1.get(s);return e?(li(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,W1.set(s,e),e)}class lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lw.type="NONE";const G1=lw;function md(s,e,t){return`firebase:${s}:${e}:${t}`}class Ol{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=md(this.userKey,l.apiKey,u),this.fullPersistenceKey=md("persistence",l.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sd(this.auth,{idToken:e}).catch(()=>{});return t?la._fromGetAccountInfoResponse(this.auth,t,e):null}return la._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ol(ti(G1),e,i);const l=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||ti(G1);const h=md(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const w=await y._get(h);if(w){let k;if(typeof w=="string"){const j=await Sd(e,{idToken:w}).catch(()=>{});if(!j)break;k=await la._fromGetAccountInfoResponse(e,j,w)}else k=la._fromJSON(e,w);y!==u&&(p=k),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Ol(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new Ol(u,e,i))}}function K1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mw(e))return"Blackberry";if(pw(e))return"Webos";if(uw(e))return"Safari";if((e.includes("chrome/")||hw(e))&&!e.includes("edge/"))return"Chrome";if(fw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function cw(s=ir()){return/firefox\//i.test(s)}function uw(s=ir()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hw(s=ir()){return/crios\//i.test(s)}function dw(s=ir()){return/iemobile/i.test(s)}function fw(s=ir()){return/android/i.test(s)}function mw(s=ir()){return/blackberry/i.test(s)}function pw(s=ir()){return/webos/i.test(s)}function Wg(s=ir()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function tC(s=ir()){return Wg(s)&&!!window.navigator?.standalone}function nC(){return gS()&&document.documentMode===10}function gw(s=ir()){return Wg(s)||fw(s)||pw(s)||mw(s)||/windows phone/i.test(s)||dw(s)}function yw(s,e=[]){let t;switch(s){case"Browser":t=K1(ir());break;case"Worker":t=`${K1(ir())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Go}/${i}`}class sC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function rC(s,e={}){return di(s,"GET","/v2/passwordPolicy",hi(s,e))}const aC=6;class iC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??aC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class oC{constructor(e,t,i,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Y1(this),this.idTokenSubscription=new Y1(this),this.beforeStateQueue=new sC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ti(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sd(this,{idToken:e}),i=await la._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Pr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pr(this.app))return Promise.reject(si(this));const t=e?Yn(e):null;return t&&Vt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Vt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pr(this.app)?Promise.reject(si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pr(this.app)?Promise.reject(si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rC(this),t=new iC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await eC(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ti(e)||this._popupRedirectResolver;Vt(t,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,l){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Vt(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function oo(s){return Yn(s)}class Y1{constructor(e){this.auth=e,this.observer=null,this.addObserver=TS(t=>this.observer=t)}get next(){return Vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lC(s){Xd=s}function bw(s){return Xd.loadJS(s)}function cC(){return Xd.recaptchaEnterpriseScript}function uC(){return Xd.gapiScript}function hC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class dC{constructor(){this.enterprise=new fC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class fC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const mC="recaptcha-enterprise",vw="NO_RECAPTCHA";class pC{constructor(e){this.type=mC,this.auth=oo(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{WN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new $N(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;H1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(vw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dC().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!t&&H1(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=cC();g.length!==0&&(g+=p),bw(g).then(()=>{l(p,u,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function Q1(s,e,t,i=!1,l=!1){const u=new pC(s);let h;if(l)h=vw;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Cd(s,e,t,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Q1(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Q1(s,e,t,t==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function gC(s,e){const t=Qd(s,"auth");if(t.isInitialized()){const l=t.getImmediate(),u=t.getOptions();if(Bo(u,e??{}))return l;ua(l,"already-initialized")}return t.initialize({options:e})}function yC(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ti);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function bC(s,e,t){const i=oo(s);Vt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=xw(e),{host:h,port:p}=vC(e),g=p===null?"":`:${p}`,y={url:`${u}//${h}${g}/`},w=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Vt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Vt(Bo(y,i.config.emulator)&&Bo(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,io(h)?(Og(`${u}//${h}${g}`),Vg("Auth",!0)):xC()}function xw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function vC(s){const e=xw(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:X1(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:X1(h)}}}function X1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function xC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Gg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,t){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function wC(s,e){return di(s,"POST","/v1/accounts:signUp",e)}async function _C(s,e){return Tu(s,"POST","/v1/accounts:signInWithPassword",hi(s,e))}async function kC(s,e){return di(s,"POST","/v1/accounts:sendOobCode",hi(s,e))}async function TC(s,e){return kC(s,e)}async function jC(s,e){return Tu(s,"POST","/v1/accounts:signInWithEmailLink",hi(s,e))}async function EC(s,e){return Tu(s,"POST","/v1/accounts:signInWithEmailLink",hi(s,e))}class cu extends Gg{constructor(e,t,i,l=null){super("password",i),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new cu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new cu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,t,"signInWithPassword",_C);case"emailLink":return jC(e,{email:this._email,oobCode:this._password});default:ua(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,i,"signUpPassword",wC);case"emailLink":return EC(e,{idToken:t,email:this._email,oobCode:this._password});default:ua(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vl(s,e){return Tu(s,"POST","/v1/accounts:signInWithIdp",hi(s,e))}const SC="http://localhost";class zo extends Gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ua("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=t;if(!i||!l)return null;const h=new zo(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Vl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Vl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vl(e,t)}buildRequest(){const e={requestUri:SC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_u(t)}return e}}function NC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CC(s){const e=Wc(Gc(s)).link,t=e?Wc(Gc(e)).deep_link_id:null,i=Wc(Gc(s)).deep_link_id;return(i?Wc(Gc(i)).link:null)||i||t||e||s}class Kg{constructor(e){const t=Wc(Gc(e)),i=t.apiKey??null,l=t.oobCode??null,u=NC(t.mode??null);Vt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=CC(e);try{return new Kg(t)}catch{return null}}}class Ql{constructor(){this.providerId=Ql.PROVIDER_ID}static credential(e,t){return cu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Kg.parseLink(t);return Vt(i,"argument-error"),cu._fromEmailAndCode(e,i.code,i.tenantId)}}Ql.PROVIDER_ID="password";Ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ww{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ju extends ww{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ui extends ju{constructor(){super("facebook.com")}static credential(e){return zo._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ui.credential(e.oauthAccessToken)}catch{return null}}}Ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ui.PROVIDER_ID="facebook.com";class zi extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zo._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return zi.credential(t,i)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";class Fi extends ju{constructor(){super("github.com")}static credential(e){return zo._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";class qi extends ju{constructor(){super("twitter.com")}static credential(e,t){return zo._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qi.credential(t,i)}catch{return null}}}qi.TWITTER_SIGN_IN_METHOD="twitter.com";qi.PROVIDER_ID="twitter.com";async function RC(s,e){return Tu(s,"POST","/v1/accounts:signUp",hi(s,e))}class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,l=!1){const u=await la._fromIdTokenResponse(e,i,l),h=J1(i);return new Fo({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const l=J1(i);return new Fo({user:e,providerId:l,_tokenResponse:i,operationType:t})}}function J1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Rd extends Ia{constructor(e,t,i,l){super(t.code,t.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,l){return new Rd(e,t,i,l)}}function _w(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(s,u,e,i):u})}async function AC(s,e,t=!1){const i=await lu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Fo._forOperation(s,"link",i)}async function IC(s,e,t=!1){const{auth:i}=s;if(Pr(i.app))return Promise.reject(si(i));const l="reauthenticate";try{const u=await lu(s,_w(i,l,e,s),t);Vt(u.idToken,i,"internal-error");const h=$g(u.idToken);Vt(h,i,"internal-error");const{sub:p}=h;return Vt(s.uid===p,i,"user-mismatch"),Fo._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&ua(i,"user-mismatch"),u}}async function kw(s,e,t=!1){if(Pr(s.app))return Promise.reject(si(s));const i="signIn",l=await _w(s,i,e),u=await Fo._fromIdTokenResponse(s,i,l);return t||await s._updateCurrentUser(u.user),u}async function MC(s,e){return kw(oo(s),e)}async function Tw(s){const e=oo(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DC(s,e,t){const i=oo(s);await Cd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",TC)}async function PC(s,e,t){if(Pr(s.app))return Promise.reject(si(s));const i=oo(s),h=await Cd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Tw(s),g}),p=await Fo._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function LC(s,e,t){return Pr(s.app)?Promise.reject(si(s)):MC(Yn(s),Ql.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Tw(s),i})}function Z1(s,e){return Yn(s).setPersistence(e)}function OC(s,e,t,i){return Yn(s).onIdTokenChanged(e,t,i)}function VC(s,e,t){return Yn(s).beforeAuthStateChanged(e,t)}function BC(s,e,t,i){return Yn(s).onAuthStateChanged(e,t,i)}function UC(s){return Yn(s).signOut()}const Ad="__sak";class jw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ad,"1"),this.storage.removeItem(Ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const zC=1e3,FC=10;class Ew extends jw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),l=this.localCache[t];i!==l&&e(t,l,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);nC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,FC):l()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},zC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ew.type="LOCAL";const cg=Ew;class Sw extends jw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Sw.type="SESSION";const Yg=Sw;function qC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const i=new Jd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:l,data:u}=t.data,h=this.handlersMap[l];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async y=>y(t.origin,u)),g=await qC(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jd.receivers=[];function Qg(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class HC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const y=Qg("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(k){const j=k;if(j.data.eventId===y)switch(j.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(j.data.response);break;default:clearTimeout(w),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ja(){return window}function $C(s){ja().location.href=s}function Nw(){return typeof ja().WorkerGlobalScope<"u"&&typeof ja().importScripts=="function"}async function WC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GC(){return navigator?.serviceWorker?.controller||null}function KC(){return Nw()?self:null}const Cw="firebaseLocalStorageDb",YC=1,Id="firebaseLocalStorage",Rw="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zd(s,e){return s.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function QC(){const s=indexedDB.deleteDatabase(Cw);return new Eu(s).toPromise()}function ug(){const s=indexedDB.open(Cw,YC);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Id,{keyPath:Rw})}catch(l){t(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Id)?e(i):(i.close(),await QC(),e(await ug()))})})}async function ex(s,e,t){const i=Zd(s,!0).put({[Rw]:e,value:t});return new Eu(i).toPromise()}async function XC(s,e){const t=Zd(s,!1).get(e),i=await new Eu(t).toPromise();return i===void 0?null:i.value}function tx(s,e){const t=Zd(s,!0).delete(e);return new Eu(t).toPromise()}const JC=800,ZC=3;class Aw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ug(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>ZC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jd._getInstance(KC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await WC(),!this.activeServiceWorker)return;this.sender=new HC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ug();return await ex(e,Ad,"1"),await tx(e,Ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ex(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>XC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Zd(l,!1).getAll();return new Eu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Aw.type="LOCAL";const e4=Aw;new ku(3e4,6e4);function t4(s,e){return e?ti(e):(Vt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Xg extends Gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function n4(s){return kw(s.auth,new Xg(s),s.bypassAuthState)}function s4(s){const{auth:e,user:t}=s;return Vt(t,e,"internal-error"),IC(t,new Xg(s),s.bypassAuthState)}async function r4(s){const{auth:e,user:t}=s;return Vt(t,e,"internal-error"),AC(t,new Xg(s),s.bypassAuthState)}class Iw{constructor(e,t,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n4;case"linkViaPopup":case"linkViaRedirect":return r4;case"reauthViaPopup":case"reauthViaRedirect":return s4;default:ua(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const a4=new ku(2e3,1e4);class Pl extends Iw{constructor(e,t,i,l,u){super(e,t,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Pl.currentPopupAction&&Pl.currentPopupAction.cancel(),Pl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Vt(e,this.auth,"internal-error"),e}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");const e=Qg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ta(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ta(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ta(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,a4.get())};e()}}Pl.currentPopupAction=null;const i4="pendingRedirect",pd=new Map;class o4 extends Iw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const i=await l4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function l4(s,e){const t=h4(e),i=u4(s);if(!await i._isAvailable())return!1;const l=await i._get(t)==="true";return await i._remove(t),l}function c4(s,e){pd.set(s._key(),e)}function u4(s){return ti(s._redirectPersistence)}function h4(s){return md(i4,s.config.apiKey,s.name)}async function d4(s,e,t=!1){if(Pr(s.app))return Promise.reject(si(s));const i=oo(s),l=t4(i,e),h=await new o4(i,l,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const f4=600*1e3;class m4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!p4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Mw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ta(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=f4&&this.cachedEventUids.clear(),this.cachedEventUids.has(nx(e))}saveEventToCache(e){this.cachedEventUids.add(nx(e)),this.lastProcessedEventTime=Date.now()}}function nx(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Mw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function p4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mw(s);default:return!1}}async function g4(s,e={}){return di(s,"GET","/v1/projects",e)}const y4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b4=/^https?/;async function v4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await g4(s);for(const t of e)try{if(x4(t))return}catch{}ua(s,"unauthorized-domain")}function x4(s){const e=og(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!b4.test(t))return!1;if(y4.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const w4=new ku(3e4,6e4);function sx(){const s=ja().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function _4(s){return new Promise((e,t)=>{function i(){sx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sx(),t(Ta(s,"network-request-failed"))},timeout:w4.get()})}if(ja().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ja().gapi?.load)i();else{const l=hC("iframefcb");return ja()[l]=()=>{gapi.load?i():t(Ta(s,"network-request-failed"))},bw(`${uC()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw gd=null,e})}let gd=null;function k4(s){return gd=gd||_4(s),gd}const T4=new ku(5e3,15e3),j4="__/auth/iframe",E4="emulator/auth/iframe",S4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},N4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C4(s){const e=s.config;Vt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Hg(e,E4):`https://${s.config.authDomain}/${j4}`,i={apiKey:e.apiKey,appName:s.name,v:Go},l=N4.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${_u(i).slice(1)}`}async function R4(s){const e=await k4(s),t=ja().gapi;return Vt(t,s,"internal-error"),e.open({where:document.body,url:C4(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S4,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=Ta(s,"network-request-failed"),p=ja().setTimeout(()=>{u(h)},T4.get());function g(){ja().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const A4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I4=500,M4=600,D4="_blank",P4="http://localhost";class rx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L4(s,e,t,i=I4,l=M4){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...A4,width:i.toString(),height:l.toString(),top:u,left:h},y=ir().toLowerCase();t&&(p=hw(y)?D4:t),cw(y)&&(e=e||P4,g.scrollbars="yes");const w=Object.entries(g).reduce((j,[L,G])=>`${j}${L}=${G},`,"");if(tC(y)&&p!=="_self")return O4(e||"",p),new rx(null);const k=window.open(e||"",p,w);Vt(k,s,"popup-blocked");try{k.focus()}catch{}return new rx(k)}function O4(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const V4="__/auth/handler",B4="emulator/auth/handler",U4=encodeURIComponent("fac");async function ax(s,e,t,i,l,u){Vt(s.config.authDomain,s,"auth-domain-config-required"),Vt(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Go,eventId:l};if(e instanceof ww){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",kS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,k]of Object.entries({}))h[w]=k}if(e instanceof ju){const w=e.getScopes().filter(k=>k!=="");w.length>0&&(h.scopes=w.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await s._getAppCheckToken(),y=g?`#${U4}=${encodeURIComponent(g)}`:"";return`${z4(s)}?${_u(p).slice(1)}${y}`}function z4({config:s}){return s.emulator?Hg(s,B4):`https://${s.authDomain}/${V4}`}const Np="webStorageSupport";class F4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yg,this._completeRedirectFn=d4,this._overrideRedirectResult=c4}async _openPopup(e,t,i,l){li(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await ax(e,t,i,og(),l);return L4(e,u,Qg())}async _openRedirect(e,t,i,l){await this._originValidation(e);const u=await ax(e,t,i,og(),l);return $C(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:u}=this.eventManagers[t];return l?Promise.resolve(l):(li(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await R4(e),i=new m4(e);return t.register("authEvent",l=>(Vt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Np,{type:Np},l=>{const u=l?.[0]?.[Np];u!==void 0&&t(!!u),ua(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=v4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gw()||uw()||Wg()}}const q4=F4;var ix="@firebase/auth",ox="1.12.0";class H4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $4(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W4(s){Uo(new Zi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Vt(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yw(s)},y=new oC(i,l,u,g);return yC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Uo(new Zi("auth-internal",e=>{const t=oo(e.getProvider("auth").getImmediate());return(i=>new H4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ka(ix,ox,$4(s)),ka(ix,ox,"esm2020")}const G4=300,K4=Y2("authIdTokenMaxAge")||G4;let lx=null;const Y4=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>K4)return;const l=t?.token;lx!==l&&(lx=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Dw(s=Fg()){const e=Qd(s,"auth");if(e.isInitialized())return e.getImmediate();const t=gC(s,{popupRedirectResolver:q4,persistence:[e4,cg,Yg]}),i=Y2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=Y4(u.toString());VC(t,h,()=>h(t.currentUser)),OC(t,p=>h(p))}}const l=W2("auth");return l&&bC(t,`http://${l}`),t}function Q4(){return document.getElementsByTagName("head")?.[0]??document}lC({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=Ta("internal-error");u.customData=l,t(u)},i.type="text/javascript",i.charset="UTF-8",Q4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W4("Browser");var cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Xi,Pw;(function(){var s;function e(I,S){function A(){}A.prototype=S.prototype,I.F=S.prototype,I.prototype=new A,I.prototype.constructor=I,I.D=function(V,D,F){for(var M=Array(arguments.length-2),We=2;We<arguments.length;We++)M[We-2]=arguments[We];return S.prototype[D].apply(V,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,S,A){A||(A=0);const V=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)V[D]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(D=0;D<16;++D)V[D]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=I.g[0],A=I.g[1],D=I.g[2];let F=I.g[3],M;M=S+(F^A&(D^F))+V[0]+3614090360&4294967295,S=A+(M<<7&4294967295|M>>>25),M=F+(D^S&(A^D))+V[1]+3905402710&4294967295,F=S+(M<<12&4294967295|M>>>20),M=D+(A^F&(S^A))+V[2]+606105819&4294967295,D=F+(M<<17&4294967295|M>>>15),M=A+(S^D&(F^S))+V[3]+3250441966&4294967295,A=D+(M<<22&4294967295|M>>>10),M=S+(F^A&(D^F))+V[4]+4118548399&4294967295,S=A+(M<<7&4294967295|M>>>25),M=F+(D^S&(A^D))+V[5]+1200080426&4294967295,F=S+(M<<12&4294967295|M>>>20),M=D+(A^F&(S^A))+V[6]+2821735955&4294967295,D=F+(M<<17&4294967295|M>>>15),M=A+(S^D&(F^S))+V[7]+4249261313&4294967295,A=D+(M<<22&4294967295|M>>>10),M=S+(F^A&(D^F))+V[8]+1770035416&4294967295,S=A+(M<<7&4294967295|M>>>25),M=F+(D^S&(A^D))+V[9]+2336552879&4294967295,F=S+(M<<12&4294967295|M>>>20),M=D+(A^F&(S^A))+V[10]+4294925233&4294967295,D=F+(M<<17&4294967295|M>>>15),M=A+(S^D&(F^S))+V[11]+2304563134&4294967295,A=D+(M<<22&4294967295|M>>>10),M=S+(F^A&(D^F))+V[12]+1804603682&4294967295,S=A+(M<<7&4294967295|M>>>25),M=F+(D^S&(A^D))+V[13]+4254626195&4294967295,F=S+(M<<12&4294967295|M>>>20),M=D+(A^F&(S^A))+V[14]+2792965006&4294967295,D=F+(M<<17&4294967295|M>>>15),M=A+(S^D&(F^S))+V[15]+1236535329&4294967295,A=D+(M<<22&4294967295|M>>>10),M=S+(D^F&(A^D))+V[1]+4129170786&4294967295,S=A+(M<<5&4294967295|M>>>27),M=F+(A^D&(S^A))+V[6]+3225465664&4294967295,F=S+(M<<9&4294967295|M>>>23),M=D+(S^A&(F^S))+V[11]+643717713&4294967295,D=F+(M<<14&4294967295|M>>>18),M=A+(F^S&(D^F))+V[0]+3921069994&4294967295,A=D+(M<<20&4294967295|M>>>12),M=S+(D^F&(A^D))+V[5]+3593408605&4294967295,S=A+(M<<5&4294967295|M>>>27),M=F+(A^D&(S^A))+V[10]+38016083&4294967295,F=S+(M<<9&4294967295|M>>>23),M=D+(S^A&(F^S))+V[15]+3634488961&4294967295,D=F+(M<<14&4294967295|M>>>18),M=A+(F^S&(D^F))+V[4]+3889429448&4294967295,A=D+(M<<20&4294967295|M>>>12),M=S+(D^F&(A^D))+V[9]+568446438&4294967295,S=A+(M<<5&4294967295|M>>>27),M=F+(A^D&(S^A))+V[14]+3275163606&4294967295,F=S+(M<<9&4294967295|M>>>23),M=D+(S^A&(F^S))+V[3]+4107603335&4294967295,D=F+(M<<14&4294967295|M>>>18),M=A+(F^S&(D^F))+V[8]+1163531501&4294967295,A=D+(M<<20&4294967295|M>>>12),M=S+(D^F&(A^D))+V[13]+2850285829&4294967295,S=A+(M<<5&4294967295|M>>>27),M=F+(A^D&(S^A))+V[2]+4243563512&4294967295,F=S+(M<<9&4294967295|M>>>23),M=D+(S^A&(F^S))+V[7]+1735328473&4294967295,D=F+(M<<14&4294967295|M>>>18),M=A+(F^S&(D^F))+V[12]+2368359562&4294967295,A=D+(M<<20&4294967295|M>>>12),M=S+(A^D^F)+V[5]+4294588738&4294967295,S=A+(M<<4&4294967295|M>>>28),M=F+(S^A^D)+V[8]+2272392833&4294967295,F=S+(M<<11&4294967295|M>>>21),M=D+(F^S^A)+V[11]+1839030562&4294967295,D=F+(M<<16&4294967295|M>>>16),M=A+(D^F^S)+V[14]+4259657740&4294967295,A=D+(M<<23&4294967295|M>>>9),M=S+(A^D^F)+V[1]+2763975236&4294967295,S=A+(M<<4&4294967295|M>>>28),M=F+(S^A^D)+V[4]+1272893353&4294967295,F=S+(M<<11&4294967295|M>>>21),M=D+(F^S^A)+V[7]+4139469664&4294967295,D=F+(M<<16&4294967295|M>>>16),M=A+(D^F^S)+V[10]+3200236656&4294967295,A=D+(M<<23&4294967295|M>>>9),M=S+(A^D^F)+V[13]+681279174&4294967295,S=A+(M<<4&4294967295|M>>>28),M=F+(S^A^D)+V[0]+3936430074&4294967295,F=S+(M<<11&4294967295|M>>>21),M=D+(F^S^A)+V[3]+3572445317&4294967295,D=F+(M<<16&4294967295|M>>>16),M=A+(D^F^S)+V[6]+76029189&4294967295,A=D+(M<<23&4294967295|M>>>9),M=S+(A^D^F)+V[9]+3654602809&4294967295,S=A+(M<<4&4294967295|M>>>28),M=F+(S^A^D)+V[12]+3873151461&4294967295,F=S+(M<<11&4294967295|M>>>21),M=D+(F^S^A)+V[15]+530742520&4294967295,D=F+(M<<16&4294967295|M>>>16),M=A+(D^F^S)+V[2]+3299628645&4294967295,A=D+(M<<23&4294967295|M>>>9),M=S+(D^(A|~F))+V[0]+4096336452&4294967295,S=A+(M<<6&4294967295|M>>>26),M=F+(A^(S|~D))+V[7]+1126891415&4294967295,F=S+(M<<10&4294967295|M>>>22),M=D+(S^(F|~A))+V[14]+2878612391&4294967295,D=F+(M<<15&4294967295|M>>>17),M=A+(F^(D|~S))+V[5]+4237533241&4294967295,A=D+(M<<21&4294967295|M>>>11),M=S+(D^(A|~F))+V[12]+1700485571&4294967295,S=A+(M<<6&4294967295|M>>>26),M=F+(A^(S|~D))+V[3]+2399980690&4294967295,F=S+(M<<10&4294967295|M>>>22),M=D+(S^(F|~A))+V[10]+4293915773&4294967295,D=F+(M<<15&4294967295|M>>>17),M=A+(F^(D|~S))+V[1]+2240044497&4294967295,A=D+(M<<21&4294967295|M>>>11),M=S+(D^(A|~F))+V[8]+1873313359&4294967295,S=A+(M<<6&4294967295|M>>>26),M=F+(A^(S|~D))+V[15]+4264355552&4294967295,F=S+(M<<10&4294967295|M>>>22),M=D+(S^(F|~A))+V[6]+2734768916&4294967295,D=F+(M<<15&4294967295|M>>>17),M=A+(F^(D|~S))+V[13]+1309151649&4294967295,A=D+(M<<21&4294967295|M>>>11),M=S+(D^(A|~F))+V[4]+4149444226&4294967295,S=A+(M<<6&4294967295|M>>>26),M=F+(A^(S|~D))+V[11]+3174756917&4294967295,F=S+(M<<10&4294967295|M>>>22),M=D+(S^(F|~A))+V[2]+718787259&4294967295,D=F+(M<<15&4294967295|M>>>17),M=A+(F^(D|~S))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+F&4294967295}i.prototype.v=function(I,S){S===void 0&&(S=I.length);const A=S-this.blockSize,V=this.C;let D=this.h,F=0;for(;F<S;){if(D==0)for(;F<=A;)l(this,I,F),F+=this.blockSize;if(typeof I=="string"){for(;F<S;)if(V[D++]=I.charCodeAt(F++),D==this.blockSize){l(this,V),D=0;break}}else for(;F<S;)if(V[D++]=I[F++],D==this.blockSize){l(this,V),D=0;break}}this.h=D,this.o+=S},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var A=I.length-8;A<I.length;++A)I[A]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,A=0;A<4;++A)for(let V=0;V<32;V+=8)I[S++]=this.g[A]>>>V&255;return I};function u(I,S){var A=p;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=S(I)}function h(I,S){this.h=S;const A=[];let V=!0;for(let D=I.length-1;D>=0;D--){const F=I[D]|0;V&&F==S||(A[D]=F,V=!1)}this.g=A}var p={};function g(I){return-128<=I&&I<128?u(I,function(S){return new h([S|0],S<0?-1:0)}):new h([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return k;if(I<0)return O(y(-I));const S=[];let A=1;for(let V=0;I>=A;V++)S[V]=I/A|0,A*=4294967296;return new h(S,0)}function w(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return O(w(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(S,8));let V=k;for(let F=0;F<I.length;F+=8){var D=Math.min(8,I.length-F);const M=parseInt(I.substring(F,F+D),S);D<8?(D=y(Math.pow(S,D)),V=V.j(D).add(y(M))):(V=V.j(A),V=V.add(y(M)))}return V}var k=g(0),j=g(1),L=g(16777216);s=h.prototype,s.m=function(){if(z(this))return-O(this).m();let I=0,S=1;for(let A=0;A<this.g.length;A++){const V=this.i(A);I+=(V>=0?V:4294967296+V)*S,S*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(G(this))return"0";if(z(this))return"-"+O(this).toString(I);const S=y(Math.pow(I,6));var A=this;let V="";for(;;){const D=je(A,S).g;A=te(A,D.j(S));let F=((A.g.length>0?A.g[0]:A.h)>>>0).toString(I);if(A=D,G(A))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function G(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function z(I){return I.h==-1}s.l=function(I){return I=te(this,I),z(I)?-1:G(I)?0:1};function O(I){const S=I.g.length,A=[];for(let V=0;V<S;V++)A[V]=~I.g[V];return new h(A,~I.h).add(j)}s.abs=function(){return z(this)?O(this):this},s.add=function(I){const S=Math.max(this.g.length,I.g.length),A=[];let V=0;for(let D=0;D<=S;D++){let F=V+(this.i(D)&65535)+(I.i(D)&65535),M=(F>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);V=M>>>16,F&=65535,M&=65535,A[D]=M<<16|F}return new h(A,A[A.length-1]&-2147483648?-1:0)};function te(I,S){return I.add(O(S))}s.j=function(I){if(G(this)||G(I))return k;if(z(this))return z(I)?O(this).j(O(I)):O(O(this).j(I));if(z(I))return O(this.j(O(I)));if(this.l(L)<0&&I.l(L)<0)return y(this.m()*I.m());const S=this.g.length+I.g.length,A=[];for(var V=0;V<2*S;V++)A[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<I.g.length;D++){const F=this.i(V)>>>16,M=this.i(V)&65535,We=I.i(D)>>>16,ft=I.i(D)&65535;A[2*V+2*D]+=M*ft,Q(A,2*V+2*D),A[2*V+2*D+1]+=F*ft,Q(A,2*V+2*D+1),A[2*V+2*D+1]+=M*We,Q(A,2*V+2*D+1),A[2*V+2*D+2]+=F*We,Q(A,2*V+2*D+2)}for(I=0;I<S;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=S;I<2*S;I++)A[I]=0;return new h(A,0)};function Q(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function ce(I,S){this.g=I,this.h=S}function je(I,S){if(G(S))throw Error("division by zero");if(G(I))return new ce(k,k);if(z(I))return S=je(O(I),S),new ce(O(S.g),O(S.h));if(z(S))return S=je(I,O(S)),new ce(O(S.g),S.h);if(I.g.length>30){if(z(I)||z(S))throw Error("slowDivide_ only works with positive integers.");for(var A=j,V=S;V.l(I)<=0;)A=He(A),V=He(V);var D=ze(A,1),F=ze(V,1);for(V=ze(V,2),A=ze(A,2);!G(V);){var M=F.add(V);M.l(I)<=0&&(D=D.add(A),F=M),V=ze(V,1),A=ze(A,1)}return S=te(I,D.j(S)),new ce(D,S)}for(D=k;I.l(S)>=0;){for(A=Math.max(1,Math.floor(I.m()/S.m())),V=Math.ceil(Math.log(A)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=y(A),M=F.j(S);z(M)||M.l(I)>0;)A-=V,F=y(A),M=F.j(S);G(F)&&(F=j),D=D.add(F),I=te(I,M)}return new ce(D,I)}s.B=function(I){return je(this,I).h},s.and=function(I){const S=Math.max(this.g.length,I.g.length),A=[];for(let V=0;V<S;V++)A[V]=this.i(V)&I.i(V);return new h(A,this.h&I.h)},s.or=function(I){const S=Math.max(this.g.length,I.g.length),A=[];for(let V=0;V<S;V++)A[V]=this.i(V)|I.i(V);return new h(A,this.h|I.h)},s.xor=function(I){const S=Math.max(this.g.length,I.g.length),A=[];for(let V=0;V<S;V++)A[V]=this.i(V)^I.i(V);return new h(A,this.h^I.h)};function He(I){const S=I.g.length+1,A=[];for(let V=0;V<S;V++)A[V]=I.i(V)<<1|I.i(V-1)>>>31;return new h(A,I.h)}function ze(I,S){const A=S>>5;S%=32;const V=I.g.length-A,D=[];for(let F=0;F<V;F++)D[F]=S>0?I.i(F+A)>>>S|I.i(F+A+1)<<32-S:I.i(F+A);return new h(D,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Pw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,Xi=h}).apply(typeof cx<"u"?cx:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Lw,Kc,Ow,yd,hg,Vw,Bw,Uw;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var b=0;b<d.length;++b){var _=d[b];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function l(d,b){if(b)e:{var _=i;d=d.split(".");for(var N=0;N<d.length-1;N++){var se=d[N];if(!(se in _))break e;_=_[se]}d=d[d.length-1],N=_[d],b=b(N),b!=N&&b!=null&&e(_,d,{configurable:!0,writable:!0,value:b})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(b){var _=[],N;for(N in b)Object.prototype.hasOwnProperty.call(b,N)&&_.push([N,b[N]]);return _}});var u=u||{},h=this||self;function p(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function g(d,b,_){return d.call.apply(d.bind,arguments)}function y(d,b,_){return y=g,y.apply(null,arguments)}function w(d,b){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function k(d,b){function _(){}_.prototype=b.prototype,d.Z=b.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(N,se,he){for(var Ye=Array(arguments.length-2),en=2;en<arguments.length;en++)Ye[en-2]=arguments[en];return b.prototype[se].apply(N,Ye)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function L(d){const b=d.length;if(b>0){const _=Array(b);for(let N=0;N<b;N++)_[N]=d[N];return _}return[]}function G(d,b){for(let N=1;N<arguments.length;N++){const se=arguments[N];var _=typeof se;if(_=_!="object"?_:se?Array.isArray(se)?"array":_:"null",_=="array"||_=="object"&&typeof se.length=="number"){_=d.length||0;const he=se.length||0;d.length=_+he;for(let Ye=0;Ye<he;Ye++)d[_+Ye]=se[Ye]}else d.push(se)}}class z{constructor(b,_){this.i=b,this.j=_,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function O(d){h.setTimeout(()=>{throw d},0)}function te(){var d=I;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class Q{constructor(){this.h=this.g=null}add(b,_){const N=ce.get();N.set(b,_),this.h?this.h.next=N:this.g=N,this.h=N}}var ce=new z(()=>new je,d=>d.reset());class je{constructor(){this.next=this.g=this.h=null}set(b,_){this.h=b,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let He,ze=!1,I=new Q,S=()=>{const d=Promise.resolve(void 0);He=()=>{d.then(A)}};function A(){for(var d;d=te();){try{d.h.call(d.g)}catch(_){O(_)}var b=ce;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}ze=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};h.addEventListener("test",_,b),h.removeEventListener("test",_,b)}catch{}return d})();function M(d){return/^[\s\xa0]*$/.test(d)}function We(d,b){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}k(We,D),We.prototype.init=function(d,b){const _=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(_=="mouseover"?b=d.fromElement:_=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ft="closure_listenable_"+(Math.random()*1e6|0),q=0;function me(d,b,_,N,se){this.listener=d,this.proxy=null,this.src=b,this.type=_,this.capture=!!N,this.ha=se,this.key=++q,this.da=this.fa=!1}function De(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function $e(d,b,_){for(const N in d)b.call(_,d[N],N,d)}function ee(d,b){for(const _ in d)b.call(void 0,d[_],_,d)}function P(d){const b={};for(const _ in d)b[_]=d[_];return b}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(d,b){let _,N;for(let se=1;se<arguments.length;se++){N=arguments[se];for(_ in N)d[_]=N[_];for(let he=0;he<W.length;he++)_=W[he],Object.prototype.hasOwnProperty.call(N,_)&&(d[_]=N[_])}}function Ne(d){this.src=d,this.g={},this.h=0}Ne.prototype.add=function(d,b,_,N,se){const he=d.toString();d=this.g[he],d||(d=this.g[he]=[],this.h++);const Ye=Ie(d,b,N,se);return Ye>-1?(b=d[Ye],_||(b.fa=!1)):(b=new me(b,this.src,he,!!N,se),b.fa=_,d.push(b)),b};function Fe(d,b){const _=b.type;if(_ in d.g){var N=d.g[_],se=Array.prototype.indexOf.call(N,b,void 0),he;(he=se>=0)&&Array.prototype.splice.call(N,se,1),he&&(De(b),d.g[_].length==0&&(delete d.g[_],d.h--))}}function Ie(d,b,_,N){for(let se=0;se<d.length;++se){const he=d[se];if(!he.da&&he.listener==b&&he.capture==!!_&&he.ha==N)return se}return-1}var nt="closure_lm_"+(Math.random()*1e6|0),gt={};function Qe(d,b,_,N,se){if(Array.isArray(b)){for(let he=0;he<b.length;he++)Qe(d,b[he],_,N,se);return null}return _=Ct(_),d&&d[ft]?d.J(b,_,p(N)?!!N.capture:!1,se):qt(d,b,_,!1,N,se)}function qt(d,b,_,N,se,he){if(!b)throw Error("Invalid event type");const Ye=p(se)?!!se.capture:!!se;let en=sn(d);if(en||(d[nt]=en=new Ne(d)),_=en.add(b,_,N,Ye,he),_.proxy)return _;if(N=yn(),_.proxy=N,N.src=d,N.listener=_,d.addEventListener)F||(se=Ye),se===void 0&&(se=!1),d.addEventListener(b.toString(),N,se);else if(d.attachEvent)d.attachEvent(le(b.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function yn(){function d(_){return b.call(d.src,d.listener,_)}const b=an;return d}function Pt(d,b,_,N,se){if(Array.isArray(b))for(var he=0;he<b.length;he++)Pt(d,b[he],_,N,se);else N=p(N)?!!N.capture:!!N,_=Ct(_),d&&d[ft]?(d=d.i,he=String(b).toString(),he in d.g&&(b=d.g[he],_=Ie(b,_,N,se),_>-1&&(De(b[_]),Array.prototype.splice.call(b,_,1),b.length==0&&(delete d.g[he],d.h--)))):d&&(d=sn(d))&&(b=d.g[b.toString()],d=-1,b&&(d=Ie(b,_,N,se)),(_=d>-1?b[d]:null)&&St(_))}function St(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[ft])Fe(b.i,d);else{var _=d.type,N=d.proxy;b.removeEventListener?b.removeEventListener(_,N,d.capture):b.detachEvent?b.detachEvent(le(_),N):b.addListener&&b.removeListener&&b.removeListener(N),(_=sn(b))?(Fe(_,d),_.h==0&&(_.src=null,b[nt]=null)):De(d)}}}function le(d){return d in gt?gt[d]:gt[d]="on"+d}function an(d,b){if(d.da)d=!0;else{b=new We(b,this);const _=d.listener,N=d.ha||d.src;d.fa&&St(d),d=_.call(N,b)}return d}function sn(d){return d=d[nt],d instanceof Ne?d:null}var dt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ct(d){return typeof d=="function"?d:(d[dt]||(d[dt]=function(b){return d.handleEvent(b)}),d[dt])}function lt(){V.call(this),this.i=new Ne(this),this.M=this,this.G=null}k(lt,V),lt.prototype[ft]=!0,lt.prototype.removeEventListener=function(d,b,_,N){Pt(this,d,b,_,N)};function st(d,b){var _,N=d.G;if(N)for(_=[];N;N=N.G)_.push(N);if(d=d.M,N=b.type||b,typeof b=="string")b=new D(b,d);else if(b instanceof D)b.target=b.target||d;else{var se=b;b=new D(N,d),ye(b,se)}se=!0;let he,Ye;if(_)for(Ye=_.length-1;Ye>=0;Ye--)he=b.g=_[Ye],se=Qt(he,N,!0,b)&&se;if(he=b.g=d,se=Qt(he,N,!0,b)&&se,se=Qt(he,N,!1,b)&&se,_)for(Ye=0;Ye<_.length;Ye++)he=b.g=_[Ye],se=Qt(he,N,!1,b)&&se}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const _=d.g[b];for(let N=0;N<_.length;N++)De(_[N]);delete d.g[b],d.h--}}this.G=null},lt.prototype.J=function(d,b,_,N){return this.i.add(String(d),b,!1,_,N)},lt.prototype.K=function(d,b,_,N){return this.i.add(String(d),b,!0,_,N)};function Qt(d,b,_,N){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let se=!0;for(let he=0;he<b.length;++he){const Ye=b[he];if(Ye&&!Ye.da&&Ye.capture==_){const en=Ye.listener,_s=Ye.ha||Ye.src;Ye.fa&&Fe(d.i,Ye),se=en.call(_s,N)!==!1&&se}}return se&&!N.defaultPrevented}function as(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:h.setTimeout(d,b||0)}function Rt(d){d.g=as(()=>{d.g=null,d.i&&(d.i=!1,Rt(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class Xt extends V{constructor(b,_){super(),this.m=b,this.l=_,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(d){V.call(this),this.h=d,this.g={}}k(ts,V);var wt=[];function bn(d){$e(d.g,function(b,_){this.g.hasOwnProperty(_)&&St(b)},d),d.g={}}ts.prototype.N=function(){ts.Z.N.call(this),bn(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rn=h.JSON.stringify,Sn=h.JSON.parse,de=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Te(){}function Pe(){}var Xe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Oe(){D.call(this,"d")}k(Oe,D);function Me(){D.call(this,"c")}k(Me,D);var Ve={},xt=null;function yt(){return xt=xt||new lt}Ve.Ia="serverreachability";function At(d){D.call(this,Ve.Ia,d)}k(At,D);function Wt(d){const b=yt();st(b,new At(b))}Ve.STAT_EVENT="statevent";function J(d,b){D.call(this,Ve.STAT_EVENT,d),this.stat=b}k(J,D);function be(d){const b=yt();st(b,new J(b,d))}Ve.Ja="timingevent";function tt(d,b){D.call(this,Ve.Ja,d),this.size=b}k(tt,D);function It(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},b)}function jt(){this.g=!0}jt.prototype.ua=function(){this.g=!1};function Jt(d,b,_,N,se,he){d.info(function(){if(d.g)if(he){var Ye="",en=he.split("&");for(let Mn=0;Mn<en.length;Mn++){var _s=en[Mn].split("=");if(_s.length>1){const is=_s[0];_s=_s[1];const Ur=is.split("_");Ye=Ur.length>=2&&Ur[1]=="type"?Ye+(is+"="+_s+"&"):Ye+(is+"=redacted&")}}}else Ye=null;else Ye=he;return"XMLHTTP REQ ("+N+") [attempt "+se+"]: "+b+`
`+_+`
`+Ye})}function Zt(d,b,_,N,se,he,Ye){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+se+"]: "+b+`
`+_+`
`+he+" "+Ye})}function zt(d,b,_,N){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+Qn(d,_)+(N?" "+N:"")})}function In(d,b){d.info(function(){return"TIMEOUT: "+b})}jt.prototype.info=function(){};function Qn(d,b){if(!d.g)return b;if(!b)return null;try{const he=JSON.parse(b);if(he){for(d=0;d<he.length;d++)if(Array.isArray(he[d])){var _=he[d];if(!(_.length<2)){var N=_[1];if(Array.isArray(N)&&!(N.length<1)){var se=N[0];if(se!="noop"&&se!="stop"&&se!="close")for(let Ye=1;Ye<N.length;Ye++)N[Ye]=""}}}}return rn(he)}catch{return b}}var un={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pn;function U(){}k(U,Te),U.prototype.g=function(){return new XMLHttpRequest},Pn=new U;function ge(d){return encodeURIComponent(String(d))}function _e(d){var b=1;d=d.split(":");const _=[];for(;b>0&&d.length;)_.push(d.shift()),b--;return d.length&&_.push(d.join(":")),_}function we(d,b,_,N){this.j=d,this.i=b,this.l=_,this.S=N||1,this.V=new ts(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fe}function fe(){this.i=null,this.g="",this.h=!1}var rt={},Nt={};function it(d,b,_){d.M=1,d.A=Le(Nn(b)),d.u=_,d.R=!0,_t(d,null)}function _t(d,b){d.F=Date.now(),Es(d),d.B=Nn(d.A);var _=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),cs(_.i,"t",N),d.C=0,_=d.j.L,d.h=new fe,d.g=qu(d.j,_?b:null,!d.u),d.P>0&&(d.O=new Xt(y(d.Y,d,d.g),d.P)),b=d.V,_=d.g,N=d.ba;var se="readystatechange";Array.isArray(se)||(se&&(wt[0]=se.toString()),se=wt);for(let he=0;he<se.length;he++){const Ye=Qe(_,se[he],N||b.handleEvent,!1,b.h||b);if(!Ye)break;b.g[Ye.key]=Ye}b=d.J?P(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Wt(),Jt(d.i,d.v,d.B,d.l,d.S,d.u)}we.prototype.ba=function(d){d=d.target;const b=this.O;b&&Ns(d)==3?b.j():this.Y(d)},we.prototype.Y=function(d){try{if(d==this.g)e:{const en=Ns(this.g),_s=this.g.ya(),Mn=this.g.ca();if(!(en<3)&&(en!=3||this.g&&(this.h.h||this.g.la()||Zn(this.g)))){this.K||en!=4||_s==7||(_s==8||Mn<=0?Wt(3):Wt(2)),Vn(this);var b=this.g.ca();this.X=b;var _=vt(this);if(this.o=b==200,Zt(this.i,this.v,this.B,this.l,this.S,en,b),this.o){if(this.U&&!this.L){t:{if(this.g){var N,se=this.g;if((N=se.g?se.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(N)){var he=N;break t}}he=null}if(d=he)zt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,T(this,d);else{this.o=!1,this.m=3,be(12),ue(this),H(this);break e}}if(this.R){d=!0;let is;for(;!this.K&&this.C<_.length;)if(is=or(this,_),is==Nt){en==4&&(this.m=4,be(14),d=!1),zt(this.i,this.l,null,"[Incomplete Response]");break}else if(is==rt){this.m=4,be(15),zt(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else zt(this.i,this.l,is,null),T(this,is);if(vn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),en!=4||_.length!=0||this.h.h||(this.m=1,be(16),d=!1),this.o=this.o&&d,!d)zt(this.i,this.l,_,"[Invalid Chunked Response]"),ue(this),H(this);else if(_.length>0&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.aa&&!Ye.P&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),nc(Ye),Ye.P=!0,be(11))}}else zt(this.i,this.l,_,null),T(this,_);en==4&&ue(this),this.o&&!this.K&&(en==4?Bu(this.j,this):(this.o=!1,Es(this)))}else ws(this.g),b==400&&_.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),ue(this),H(this)}}}catch{}};function vt(d){if(!vn(d))return d.g.la();const b=Zn(d.g);if(b==="")return"";let _="";const N=b.length,se=Ns(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ue(d),H(d),"";d.h.i=new h.TextDecoder}for(let he=0;he<N;he++)d.h.h=!0,_+=d.h.i.decode(b[he],{stream:!(se&&he==N-1)});return b.length=0,d.h.g+=_,d.C=0,d.h.g}function vn(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function or(d,b){var _=d.C,N=b.indexOf(`
`,_);return N==-1?Nt:(_=Number(b.substring(_,N)),isNaN(_)?rt:(N+=1,N+_>b.length?Nt:(b=b.slice(N,N+_),d.C=N+_,b)))}we.prototype.cancel=function(){this.K=!0,ue(this)};function Es(d){d.T=Date.now()+d.H,Ls(d,d.H)}function Ls(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=It(y(d.aa,d),b)}function Vn(d){d.D&&(h.clearTimeout(d.D),d.D=null)}we.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(In(this.i,this.B),this.M!=2&&(Wt(),be(17)),ue(this),this.m=2,H(this)):Ls(this,this.T-d)};function H(d){d.j.I==0||d.K||Bu(d.j,d)}function ue(d){Vn(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,bn(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function T(d,b){try{var _=d.j;if(_.I!=0&&(_.g==d||qe(_.h,d))){if(!d.L&&qe(_.h,d)&&_.I==3){try{var N=_.Ba.g.parse(b)}catch{N=null}if(Array.isArray(N)&&N.length==3){var se=N;if(se[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)Qo(_),Vs(_);else break e;br(_),be(18)}}else _.xa=se[1],0<_.xa-_.K&&se[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=It(y(_.Va,_),6e3));Ge(_.h)<=1&&_.ta&&(_.ta=void 0)}else ma(_,11)}else if((d.L||_.g==d)&&Qo(_),!M(b))for(se=_.Ba.g.parse(b),b=0;b<se.length;b++){let Mn=se[b];const is=Mn[0];if(!(is<=_.K))if(_.K=is,Mn=Mn[1],_.I==2)if(Mn[0]=="c"){_.M=Mn[1],_.ba=Mn[2];const Ur=Mn[3];Ur!=null&&(_.ka=Ur,_.j.info("VER="+_.ka));const pa=Mn[4];pa!=null&&(_.za=pa,_.j.info("SVER="+_.za));const ea=Mn[5];ea!=null&&typeof ea=="number"&&ea>0&&(N=1.5*ea,_.O=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const ta=d.g;if(ta){const ho=ta.g?ta.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ho){var he=N.h;he.g||ho.indexOf("spdy")==-1&&ho.indexOf("quic")==-1&&ho.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Be(he,he.h),he.h=null))}if(N.G){const Xo=ta.g?ta.g.getResponseHeader("X-HTTP-Session-Id"):null;Xo&&(N.wa=Xo,ne(N.J,N.G,Xo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),N=_;var Ye=d;if(N.na=Fu(N,N.L?N.ba:null,N.W),Ye.L){Lt(N.h,Ye);var en=Ye,_s=N.O;_s&&(en.H=_s),en.D&&(Vn(en),Es(en)),N.g=Ye}else Zr(N);_.i.length>0&&Ws(_)}else Mn[0]!="stop"&&Mn[0]!="close"||ma(_,7);else _.I==3&&(Mn[0]=="stop"||Mn[0]=="close"?Mn[0]=="stop"?ma(_,7):zs(_):Mn[0]!="noop"&&_.l&&_.l.qa(Mn),_.A=0)}}Wt(4)}catch{}}var C=class{constructor(d,b){this.g=d,this.map=b}};function K(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function re(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ge(d){return d.h?1:d.g?d.g.size:0}function qe(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function Be(d,b){d.g?d.g.add(b):d.h=b}function Lt(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}K.prototype.cancel=function(){if(this.i=Mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Mt(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const _ of d.g.values())b=b.concat(_.G);return b}return L(d.i)}var qn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Os(d,b){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const N=d[_].indexOf("=");let se,he=null;N>=0?(se=d[_].substring(0,N),he=d[_].substring(N+1)):se=d[_],b(se,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function Ss(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof Ss?(this.l=d.l,Bn(this,d.j),this.o=d.o,this.g=d.g,Y(this,d.u),this.h=d.h,ve(this,lr(d.i)),this.m=d.m):d&&(b=String(d).match(qn))?(this.l=!1,Bn(this,b[1]||"",!0),this.o=Ue(b[2]||""),this.g=Ue(b[3]||"",!0),Y(this,b[4]),this.h=Ue(b[5]||"",!0),ve(this,b[6]||"",!0),this.m=Ue(b[7]||"")):(this.l=!1,this.i=new Br(null,this.l))}Ss.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(at(b,Ft,!0),":");var _=this.g;return(_||b=="file")&&(d.push("//"),(b=this.o)&&d.push(at(b,Ft,!0),"@"),d.push(ge(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(at(_,_.charAt(0)=="/"?fs:xn,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",at(_,Hs)),d.join("")},Ss.prototype.resolve=function(d){const b=Nn(this);let _=!!d.j;_?Bn(b,d.j):_=!!d.o,_?b.o=d.o:_=!!d.g,_?b.g=d.g:_=d.u!=null;var N=d.h;if(_)Y(b,d.u);else if(_=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var se=b.h.lastIndexOf("/");se!=-1&&(N=b.h.slice(0,se+1)+N)}if(se=N,se==".."||se==".")N="";else if(se.indexOf("./")!=-1||se.indexOf("/.")!=-1){N=se.lastIndexOf("/",0)==0,se=se.split("/");const he=[];for(let Ye=0;Ye<se.length;){const en=se[Ye++];en=="."?N&&Ye==se.length&&he.push(""):en==".."?((he.length>1||he.length==1&&he[0]!="")&&he.pop(),N&&Ye==se.length&&he.push("")):(he.push(en),N=!0)}N=he.join("/")}else N=se}return _?b.h=N:_=d.i.toString()!=="",_?ve(b,lr(d.i)):_=!!d.m,_&&(b.m=d.m),b};function Nn(d){return new Ss(d)}function Bn(d,b,_){d.j=_?Ue(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Y(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function ve(d,b,_){b instanceof Br?(d.i=b,gr(d.i,d.l)):(_||(b=at(b,wn)),d.i=new Br(b,d.l))}function ne(d,b,_){d.i.set(b,_)}function Le(d){return ne(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ue(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function at(d,b,_){return typeof d=="string"?(d=encodeURI(d).replace(b,ct),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ct(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ft=/[#\/\?@]/g,xn=/[#\?:]/g,fs=/[#\?]/g,wn=/[#\?@]/g,Hs=/#/g;function Br(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function xs(d){d.g||(d.g=new Map,d.h=0,d.i&&Os(d.i,function(b,_){d.add(decodeURIComponent(b.replace(/\+/g," ")),_)}))}s=Br.prototype,s.add=function(d,b){xs(this),this.i=null,d=$s(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(b),this.h+=1,this};function Da(d,b){xs(d),b=$s(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function Jr(d,b){return xs(d),b=$s(d,b),d.g.has(b)}s.forEach=function(d,b){xs(this),this.g.forEach(function(_,N){_.forEach(function(se){d.call(b,se,N,this)},this)},this)};function hn(d,b){xs(d);let _=[];if(typeof b=="string")Jr(d,b)&&(_=_.concat(d.g.get($s(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)_=_.concat(d[b]);return _}s.set=function(d,b){return xs(this),this.i=null,d=$s(this,d),Jr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},s.get=function(d,b){return d?(d=hn(this,d),d.length>0?String(d[0]):b):b};function cs(d,b,_){Da(d,b),_.length>0&&(d.i=null,d.g.set($s(d,b),L(_)),d.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let N=0;N<b.length;N++){var _=b[N];const se=ge(_);_=hn(this,_);for(let he=0;he<_.length;he++){let Ye=se;_[he]!==""&&(Ye+="="+ge(_[he])),d.push(Ye)}}return this.i=d.join("&")};function lr(d){const b=new Br;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function $s(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function gr(d,b){b&&!d.j&&(xs(d),d.i=null,d.g.forEach(function(_,N){const se=N.toLowerCase();N!=se&&(Da(this,N),cs(this,se,_))},d)),d.j=b}function R(d,b){const _=new jt;if(h.Image){const N=new Image;N.onload=w(Re,_,"TestLoadImage: loaded",!0,b,N),N.onerror=w(Re,_,"TestLoadImage: error",!1,b,N),N.onabort=w(Re,_,"TestLoadImage: abort",!1,b,N),N.ontimeout=w(Re,_,"TestLoadImage: timeout",!1,b,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else b(!1)}function Z(d,b){const _=new jt,N=new AbortController,se=setTimeout(()=>{N.abort(),Re(_,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:N.signal}).then(he=>{clearTimeout(se),he.ok?Re(_,"TestPingServer: ok",!0,b):Re(_,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(se),Re(_,"TestPingServer: error",!1,b)})}function Re(d,b,_,N,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),N(_)}catch{}}function Je(){this.g=new de}function ut(d){this.i=d.Sb||null,this.h=d.ab||!1}k(ut,Te),ut.prototype.g=function(){return new Et(this.i,this.h)};function Et(d,b){lt.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(Et,lt),s=Et.prototype,s.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,Ot(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||h).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ut(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;et(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function et(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?Ut(this):Ot(this),this.readyState==3&&et(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,Ut(this))},s.Na=function(d){this.g&&(this.response=d,Ut(this))},s.ga=function(){this.g&&Ut(this)};function Ut(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ot(d)}s.setRequestHeader=function(d,b){this.A.append(d,b)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var _=b.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=b.next();return d.join(`\r
`)};function Ot(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Et.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Yt(d){let b="";return $e(d,function(_,N){b+=N,b+=":",b+=_,b+=`\r
`}),b}function _n(d,b,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=Yt(_),typeof d=="string"?_!=null&&ge(_):ne(d,b,_))}function mt(d){lt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(mt,lt);var us=/^https?$/i,Xn=["POST","PUT"];s=mt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,b,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pn.g(),this.g.onreadystatechange=j(y(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(he){Gn(this,he);return}if(d=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var se in N)_.set(se,N[se]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const he of N.keys())_.set(he,N.get(he));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(he=>he.toLowerCase()=="content-type"),se=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Xn,b,void 0)>=0)||N||se||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Ye]of _)this.g.setRequestHeader(he,Ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(he){Gn(this,he)}};function Gn(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,ms(d),hs(d)}function ms(d){d.A||(d.A=!0,st(d,"complete"),st(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,st(this,"complete"),st(this,"abort"),hs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hs(this,!0)),mt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Jn(this):this.Xa())},s.Xa=function(){Jn(this)};function Jn(d){if(d.h&&typeof u<"u"){if(d.v&&Ns(d)==4)setTimeout(d.Ca.bind(d),0);else if(st(d,"readystatechange"),Ns(d)==4){d.h=!1;try{const he=d.ca();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var _;if(!(_=b)){var N;if(N=he===0){let Ye=String(d.D).match(qn)[1]||null;!Ye&&h.self&&h.self.location&&(Ye=h.self.location.protocol.slice(0,-1)),N=!us.test(Ye?Ye.toLowerCase():"")}_=N}if(_)st(d,"complete"),st(d,"success");else{d.o=6;try{var se=Ns(d)>2?d.g.statusText:""}catch{se=""}d.l=se+" ["+d.ca()+"]",ms(d)}}finally{hs(d)}}}}function hs(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,b||st(d,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Ns(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Ns(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),Sn(b)}};function Zn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ws(d){const b={};d=(d.g&&Ns(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(M(d[N]))continue;var _=_e(d[N]);const se=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const he=b[se]||[];b[se]=he,he.push(_)}ee(b,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function tr(d,b,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||b}function Sr(d){this.za=0,this.i=[],this.j=new jt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tr("baseRetryDelayMs",5e3,d),this.Za=tr("retryDelaySeedMs",1e4,d),this.Ta=tr("forwardChannelMaxRetries",2,d),this.va=tr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new K(d&&d.concurrentRequestLimit),this.Ba=new Je,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Sr.prototype,s.ka=8,s.I=1,s.connect=function(d,b,_,N){be(0),this.W=d,this.H=b||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.J=Fu(this,null,this.W),Ws(this)};function zs(d){if(yr(d),d.I==3){var b=d.V++,_=Nn(d.J);if(ne(_,"SID",d.M),ne(_,"RID",b),ne(_,"TYPE","terminate"),La(d,_),b=new we(d,d.j,b),b.M=2,b.A=Le(Nn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(b.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=b.A,_=!0),_||(b.g=qu(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Es(b)}zu(d)}function Vs(d){d.g&&(nc(d),d.g.cancel(),d.g=null)}function yr(d){Vs(d),d.v&&(h.clearTimeout(d.v),d.v=null),Qo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Ws(d){if(!re(d.h)&&!d.m){d.m=!0;var b=d.Ea;He||S(),ze||(He(),ze=!0),I.add(b,d),d.D=0}}function Pa(d,b){return Ge(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=It(y(d.Ea,d,b),Uu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const se=new we(this,this.j,d);let he=this.o;if(this.U&&(he?(he=P(he),ye(he,this.U)):he=this.U),this.u!==null||this.R||(se.J=he,he=null),this.S)e:{for(var b=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(b+=N,b>4096){b=_;break e}if(b===4096||_===this.i.length-1){b=_+1;break e}}b=1e3}else b=1e3;b=Oa(this,se,b),_=Nn(this.J),ne(_,"RID",d),ne(_,"CVER",22),this.G&&ne(_,"X-HTTP-Session-Id",this.G),La(this,_),he&&(this.R?b="headers="+ge(Yt(he))+"&"+b:this.u&&_n(_,this.u,he)),Be(this.h,se),this.Ra&&ne(_,"TYPE","init"),this.S?(ne(_,"$req",b),ne(_,"SID","null"),se.U=!0,it(se,_,null)):it(se,_,b),this.I=2}}else this.I==3&&(d?uo(this,d):this.i.length==0||re(this.h)||uo(this))};function uo(d,b){var _;b?_=b.l:_=d.V++;const N=Nn(d.J);ne(N,"SID",d.M),ne(N,"RID",_),ne(N,"AID",d.K),La(d,N),d.u&&d.o&&_n(N,d.u,d.o),_=new we(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),b&&(d.i=b.G.concat(d.i)),b=Oa(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Be(d.h,_),it(_,N,b)}function La(d,b){d.H&&$e(d.H,function(_,N){ne(b,N,_)}),d.l&&$e({},function(_,N){ne(b,N,_)})}function Oa(d,b,_){_=Math.min(d.i.length,_);const N=d.l?y(d.l.Ka,d.l,d):null;e:{var se=d.i;let en=-1;for(;;){const _s=["count="+_];en==-1?_>0?(en=se[0].g,_s.push("ofs="+en)):en=0:_s.push("ofs="+en);let Mn=!0;for(let is=0;is<_;is++){var he=se[is].g;const Ur=se[is].map;if(he-=en,he<0)en=Math.max(0,se[is].g-100),Mn=!1;else try{he="req"+he+"_"||"";try{var Ye=Ur instanceof Map?Ur:Object.entries(Ur);for(const[pa,ea]of Ye){let ta=ea;p(ea)&&(ta=rn(ea)),_s.push(he+pa+"="+encodeURIComponent(ta))}}catch(pa){throw _s.push(he+"type="+encodeURIComponent("_badmap")),pa}}catch{N&&N(Ur)}}if(Mn){Ye=_s.join("&");break e}}Ye=void 0}return d=d.i.splice(0,_),b.G=d,Ye}function Zr(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;He||S(),ze||(He(),ze=!0),I.add(b,d),d.A=0}}function br(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=It(y(d.Da,d),Uu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=It(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Vs(this),Vu(this))};function nc(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Vu(d){d.g=new we(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=Nn(d.na);ne(b,"RID","rpc"),ne(b,"SID",d.M),ne(b,"AID",d.K),ne(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&ne(b,"TO",d.ia),ne(b,"TYPE","xmlhttp"),La(d,b),d.u&&d.o&&_n(b,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=Le(Nn(b)),_.u=null,_.R=!0,_t(_,d)}s.Va=function(){this.C!=null&&(this.C=null,Vs(this),br(this),be(19))};function Qo(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Bu(d,b){var _=null;if(d.g==b){Qo(d),nc(d),d.g=null;var N=2}else if(qe(d.h,b))_=b.G,Lt(d.h,b),N=1;else return;if(d.I!=0){if(b.o)if(N==1){_=b.u?b.u.length:0,b=Date.now()-b.F;var se=d.D;N=yt(),st(N,new tt(N,_)),Ws(d)}else Zr(d);else if(se=b.m,se==3||se==0&&b.X>0||!(N==1&&Pa(d,b)||N==2&&br(d)))switch(_&&_.length>0&&(b=d.h,b.i=b.i.concat(_)),se){case 1:ma(d,5);break;case 4:ma(d,10);break;case 3:ma(d,6);break;default:ma(d,2)}}}function Uu(d,b){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*b}function ma(d,b){if(d.j.info("Error code "+b),b==2){var _=y(d.bb,d),N=d.Ua;const se=!N;N=new Ss(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Bn(N,"https"),Le(N),se?R(N.toString(),_):Z(N.toString(),_)}else be(2);d.I=0,d.l&&d.l.pa(b),zu(d),yr(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function zu(d){if(d.I=0,d.ja=[],d.l){const b=Mt(d.h);(b.length!=0||d.i.length!=0)&&(G(d.ja,b),G(d.ja,d.i),d.h.i.length=0,L(d.i),d.i.length=0),d.l.oa()}}function Fu(d,b,_){var N=_ instanceof Ss?Nn(_):new Ss(_);if(N.g!="")b&&(N.g=b+"."+N.g),Y(N,N.u);else{var se=h.location;N=se.protocol,b=b?b+"."+se.hostname:se.hostname,se=+se.port;const he=new Ss(null);N&&Bn(he,N),b&&(he.g=b),se&&Y(he,se),_&&(he.h=_),N=he}return _=d.G,b=d.wa,_&&b&&ne(N,_,b),ne(N,"VER",d.ka),La(d,N),N}function qu(d,b,_){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new mt(new ut({ab:_})):new mt(d.ma),b.Fa(d.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}s=Hu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function mi(){}mi.prototype.g=function(d,b){return new cr(d,b)};function cr(d,b){lt.call(this),this.g=new Sr(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!M(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!M(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new Va(this)}k(cr,lt),cr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cr.prototype.close=function(){zs(this.g)},cr.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=rn(d),d=_);b.i.push(new C(b.Ya++,d)),b.I==3&&Ws(b)},cr.prototype.N=function(){this.g.l=null,delete this.j,zs(this.g),delete this.g,cr.Z.N.call(this)};function $u(d){Oe.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const _ in b){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}k($u,Oe);function Wu(){Me.call(this),this.status=1}k(Wu,Me);function Va(d){this.g=d}k(Va,Hu),Va.prototype.ra=function(){st(this.g,"a")},Va.prototype.qa=function(d){st(this.g,new $u(d))},Va.prototype.pa=function(d){st(this.g,new Wu)},Va.prototype.oa=function(){st(this.g,"b")},mi.prototype.createWebChannel=mi.prototype.g,cr.prototype.send=cr.prototype.o,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,Uw=function(){return new mi},Bw=function(){return yt()},Vw=Ve,hg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},un.NO_ERROR=0,un.TIMEOUT=8,un.HTTP_ERROR=6,yd=un,jn.COMPLETE="complete",Ow=jn,Pe.EventType=Xe,Xe.OPEN="a",Xe.CLOSE="b",Xe.ERROR="c",Xe.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Kc=Pe,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,Lw=mt}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});class rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");let Xl="12.8.0";function X4(s){Xl=s}const qo=new Bg("@firebase/firestore");function Al(){return qo.logLevel}function ot(s,...e){if(qo.logLevel<=mn.DEBUG){const t=e.map(Jg);qo.debug(`Firestore (${Xl}): ${s}`,...t)}}function ci(s,...e){if(qo.logLevel<=mn.ERROR){const t=e.map(Jg);qo.error(`Firestore (${Xl}): ${s}`,...t)}}function zl(s,...e){if(qo.logLevel<=mn.WARN){const t=e.map(Jg);qo.warn(`Firestore (${Xl}): ${s}`,...t)}}function Jg(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Bt(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,zw(s,i,t)}function zw(s,e,t){let i=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ci(i),new Error(i)}function On(s,e,t,i){let l="Unexpected state";typeof t=="string"?l=t:i=t,s||zw(e,l,i)}function Kt(s,e){return s}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Ia{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Fw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rr.UNAUTHENTICATED)))}shutdown(){}}class Z4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class eR{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){On(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ri,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ri)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(On(typeof i.accessToken=="string",31837,{l:i}),new Fw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return On(e===null||typeof e=="string",2055,{h:e}),new rr(e)}}class tR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class nR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new tR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ux{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){On(this.o===void 0,3512);const i=u=>{u.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ot("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ux(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(On(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ux(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class Zg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=rR(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<t&&(i+=e.charAt(l[u]%62))}return i}}function pn(s,e){return s<e?-1:s>e?1:0}function dg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return Cp(l)===Cp(u)?pn(l,u):Cp(l)?1:-1}return pn(s.length,e.length)}const aR=55296,iR=57343;function Cp(s){const e=s.charCodeAt(0);return e>=aR&&e<=iR}function Fl(s,e,t){return s.length===e.length&&s.every(((i,l)=>t(i,e[l])))}const hx="__name__";class wa{constructor(e,t,i){t===void 0?t=0:t>e.length&&Bt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Bt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return wa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wa?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let l=0;l<i;l++){const u=wa.compareSegments(e.get(l),t.get(l));if(u!==0)return u}return pn(e.length,t.length)}static compareSegments(e,t){const i=wa.isNumericId(e),l=wa.isNumericId(t);return i&&!l?-1:!i&&l?1:i&&l?wa.extractNumericId(e).compare(wa.extractNumericId(t)):dg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xi.fromString(e.substring(4,e.length-2))}}class es extends wa{construct(e,t,i){return new es(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((l=>l.length>0)))}return new es(t)}static emptyPath(){return new es([])}}const oR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Js extends wa{construct(e,t,i){return new Js(e,t,i)}static isValidIdentifier(e){return oR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Js.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hx}static keyField(){return new Js([hx])}static fromServerFormat(e){const t=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ze(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ze(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new Ze(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Js(t)}static emptyPath(){return new Js([])}}class Tt{constructor(e){this.path=e}static fromPath(e){return new Tt(es.fromString(e))}static fromName(e){return new Tt(es.fromString(e).popFirst(5))}static empty(){return new Tt(es.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&es.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return es.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Tt(new es(e.slice()))}}function qw(s,e,t){if(!t)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function lR(s,e,t,i){if(e===!0&&i===!0)throw new Ze(Ee.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function dx(s){if(!Tt.isDocumentKey(s))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function fx(s){if(Tt.isDocumentKey(s))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Hw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function ef(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Bt(12329,{type:typeof s})}function mr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ze(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ef(s);throw new Ze(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function cR(s,e){if(e<=0)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function Ps(s,e){const t={typeString:s};return e&&(t.value=e),t}function Su(s,e){if(!Hw(s))throw new Ze(Ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){t=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new Ze(Ee.INVALID_ARGUMENT,t);return!0}const mx=-62135596800,px=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*px);return new bt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mx)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/px}_compareTo(e){return this.seconds===e.seconds?pn(this.nanoseconds,e.nanoseconds):pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-mx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Ps("string",bt._jsonSchemaVersion),seconds:Ps("number"),nanoseconds:Ps("number")};class $t{static fromTimestamp(e){return new $t(e)}static min(){return new $t(new bt(0,0))}static max(){return new $t(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const uu=-1;function uR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=$t.fromTimestamp(i===1e9?new bt(t+1,0):new bt(t,i));return new eo(l,Tt.empty(),e)}function hR(s){return new eo(s.readTime,s.key,uu)}class eo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new eo($t.min(),Tt.empty(),uu)}static max(){return new eo($t.max(),Tt.empty(),uu)}}function dR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Tt.comparator(s.documentKey,e.documentKey),t!==0?t:pn(s.largestBatchId,e.largestBatchId))}const fR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Jl(s){if(s.code!==Ee.FAILED_PRECONDITION||s.message!==fR)throw s;ot("LocalStore","Unexpectedly lost primary lease")}class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ae(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ae?t:Ae.resolve(t)}catch(t){return Ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ae.reject(t)}static resolve(e){return new Ae(((t,i)=>{t(e)}))}static reject(e){return new Ae(((t,i)=>{i(e)}))}static waitFor(e){return new Ae(((t,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&t()}),(g=>i(g)))})),h=!0,u===l&&t()}))}static or(e){let t=Ae.resolve(!1);for(const i of e)t=t.next((l=>l?Ae.resolve(l):i()));return t}static forEach(e,t){const i=[];return e.forEach(((l,u)=>{i.push(t.call(this,l,u))})),this.waitFor(i)}static mapArray(e,t){return new Ae(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next((w=>{h[y]=w,++p,p===u&&i(h)}),(w=>l(w)))}}))}static doWhile(e,t){return new Ae(((i,l)=>{const u=()=>{e()===!0?t().next((()=>{u()}),l):i()};u()}))}}function pR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zl(s){return s.name==="IndexedDbTransactionError"}class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tf.ce=-1;const ey=-1;function nf(s){return s==null}function Md(s){return s===0&&1/s==-1/0}function gR(s){return typeof s=="number"&&Number.isInteger(s)&&!Md(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const $w="";function yR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=gx(e)),e=bR(s.get(t),e);return gx(e)}function bR(s,e){let t=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":t+="";break;case $w:t+="";break;default:t+=u}}return t}function gx(s){return s+$w+""}function yx(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function lo(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Ww(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ds{constructor(e,t){this.comparator=e,this.root=t||Xs.EMPTY}insert(e,t){return new ds(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xs.BLACK,null,null))}remove(e){return new ds(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return t+i.left.size;l<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,t,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xs{constructor(e,t,i,l,u){this.key=e,this.value=t,this.color=i??Xs.RED,this.left=l??Xs.EMPTY,this.right=u??Xs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,l,u){return new Xs(e??this.key,t??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,t,i),null):u===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Xs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Xs.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Bt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Bt(27949);return e+(this.isRed()?0:1)}}Xs.EMPTY=null,Xs.RED=!0,Xs.BLACK=!1;Xs.EMPTY=new class{constructor(){this.size=0}get key(){throw Bt(57766)}get value(){throw Bt(16141)}get color(){throw Bt(16727)}get left(){throw Bt(29726)}get right(){throw Bt(36894)}copy(e,t,i,l,u){return this}insert(e,t,i){return new Xs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Us{constructor(e){this.comparator=e,this.data=new ds(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bx(this.data.getIterator())}getIteratorFrom(e){return new bx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Us)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Us(this.comparator);return t.data=e,t}}class bx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Lr{constructor(e){this.fields=e,e.sort(Js.comparator)}static empty(){return new Lr([])}unionWith(e){let t=new Us(Js.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Gw("Invalid base64 string: "+u):u}})(e);return new Zs(t)}static fromUint8Array(e){const t=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new Zs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zs.EMPTY_BYTE_STRING=new Zs("");const vR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(s){if(On(!!s,39018),typeof s=="string"){let e=0;const t=vR.exec(s);if(On(!!t,46558,{timestamp:s}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:js(s.seconds),nanos:js(s.nanos)}}function js(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function no(s){return typeof s=="string"?Zs.fromBase64String(s):Zs.fromUint8Array(s)}const Kw="server_timestamp",Yw="__type__",Qw="__previous_value__",Xw="__local_write_time__";function ty(s){return(s?.mapValue?.fields||{})[Yw]?.stringValue===Kw}function sf(s){const e=s.mapValue.fields[Qw];return ty(e)?sf(e):e}function hu(s){const e=to(s.mapValue.fields[Xw].timestampValue);return new bt(e.seconds,e.nanos)}class xR{constructor(e,t,i,l,u,h,p,g,y,w,k){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w,this.apiKey=k}}const Dd="(default)";class du{constructor(e,t){this.projectId=e,this.database=t||Dd}static empty(){return new du("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}function wR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ze(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(s.options.projectId,e)}const Jw="__type__",_R="__max__",ed={mapValue:{}},Zw="__vector__",Pd="value";function so(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ty(s)?4:TR(s)?9007199254740991:kR(s)?10:11:Bt(28295,{value:s})}function Ca(s,e){if(s===e)return!0;const t=so(s);if(t!==so(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return hu(s).isEqual(hu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=to(l.timestampValue),p=to(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return no(l.bytesValue).isEqual(no(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return js(l.geoPointValue.latitude)===js(u.geoPointValue.latitude)&&js(l.geoPointValue.longitude)===js(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return js(l.integerValue)===js(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=js(l.doubleValue),p=js(u.doubleValue);return h===p?Md(h)===Md(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return Fl(s.arrayValue.values||[],e.arrayValue.values||[],Ca);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(yx(h)!==yx(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Ca(h[g],p[g])))return!1;return!0})(s,e);default:return Bt(52216,{left:s})}}function fu(s,e){return(s.values||[]).find((t=>Ca(t,e)))!==void 0}function ql(s,e){if(s===e)return 0;const t=so(s),i=so(e);if(t!==i)return pn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return pn(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=js(u.integerValue||u.doubleValue),g=js(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return vx(s.timestampValue,e.timestampValue);case 4:return vx(hu(s),hu(e));case 5:return dg(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=no(u),g=no(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=pn(p[y],g[y]);if(w!==0)return w}return pn(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=pn(js(u.latitude),js(h.latitude));return p!==0?p:pn(js(u.longitude),js(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return xx(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},y=p[Pd]?.arrayValue,w=g[Pd]?.arrayValue,k=pn(y?.values?.length||0,w?.values?.length||0);return k!==0?k:xx(y,w)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===ed.mapValue&&h===ed.mapValue)return 0;if(u===ed.mapValue)return 1;if(h===ed.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let k=0;k<g.length&&k<w.length;++k){const j=dg(g[k],w[k]);if(j!==0)return j;const L=ql(p[g[k]],y[w[k]]);if(L!==0)return L}return pn(g.length,w.length)})(s.mapValue,e.mapValue);default:throw Bt(23264,{he:t})}}function vx(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return pn(s,e);const t=to(s),i=to(e),l=pn(t.seconds,i.seconds);return l!==0?l:pn(t.nanos,i.nanos)}function xx(s,e){const t=s.values||[],i=e.values||[];for(let l=0;l<t.length&&l<i.length;++l){const u=ql(t[l],i[l]);if(u)return u}return pn(t.length,i.length)}function Hl(s){return fg(s)}function fg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=to(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return no(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Tt.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",l=!0;for(const u of t.values||[])l?l=!1:i+=",",i+=fg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${fg(t.fields[h])}`;return l+"}"})(s.mapValue):Bt(61005,{value:s})}function bd(s){switch(so(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sf(s);return e?16+bd(e):16;case 5:return 2*s.stringValue.length;case 6:return no(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+bd(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return lo(i.fields,((u,h)=>{l+=u.length+bd(h)})),l})(s.mapValue);default:throw Bt(13486,{value:s})}}function wx(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function mg(s){return!!s&&"integerValue"in s}function ny(s){return!!s&&"arrayValue"in s}function _x(s){return!!s&&"nullValue"in s}function kx(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vd(s){return!!s&&"mapValue"in s}function kR(s){return(s?.mapValue?.fields||{})[Jw]?.stringValue===Zw}function eu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return lo(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=eu(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(s.arrayValue.values[t]);return e}return{...s}}function TR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===_R}class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!vd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=Js.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,l),i={},l=[],t=p.popLast()}h?i[p.lastSegment()]=eu(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,l)}delete(e){const t=this.field(e.popLast());vd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=t.mapValue.fields[e.get(i)];vd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,i){lo(t,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new jr(eu(this.value))}}function e_(s){const e=[];return lo(s.fields,((t,i)=>{const l=new Js([t]);if(vd(i)){const u=e_(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new Lr(e)}class ar{constructor(e,t,i,l,u,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new ar(e,0,$t.min(),$t.min(),$t.min(),jr.empty(),0)}static newFoundDocument(e,t,i,l){return new ar(e,1,t,$t.min(),i,l,0)}static newNoDocument(e,t){return new ar(e,2,t,$t.min(),$t.min(),jr.empty(),0)}static newUnknownDocument(e,t){return new ar(e,3,t,$t.min(),$t.min(),jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ld{constructor(e,t){this.position=e,this.inclusive=t}}function Tx(s,e,t){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=Tt.comparator(Tt.fromName(h.referenceValue),t.key):i=ql(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function jx(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ca(s.position[t],e.position[t]))return!1;return!0}class mu{constructor(e,t="asc"){this.field=e,this.dir=t}}function jR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class t_{}class Ds extends t_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new SR(e,t,i):t==="array-contains"?new RR(e,i):t==="in"?new AR(e,i):t==="not-in"?new IR(e,i):t==="array-contains-any"?new MR(e,i):new Ds(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new NR(e,i):new CR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ql(t,this.value)):t!==null&&so(this.value)===so(t)&&this.matchesComparison(ql(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Bt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ha extends t_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ha(e,t)}matches(e){return n_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function n_(s){return s.op==="and"}function s_(s){return ER(s)&&n_(s)}function ER(s){for(const e of s.filters)if(e instanceof ha)return!1;return!0}function pg(s){if(s instanceof Ds)return s.field.canonicalString()+s.op.toString()+Hl(s.value);if(s_(s))return s.filters.map((e=>pg(e))).join(",");{const e=s.filters.map((t=>pg(t))).join(",");return`${s.op}(${e})`}}function r_(s,e){return s instanceof Ds?(function(i,l){return l instanceof Ds&&i.op===l.op&&i.field.isEqual(l.field)&&Ca(i.value,l.value)})(s,e):s instanceof ha?(function(i,l){return l instanceof ha&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&r_(h,l.filters[p])),!0):!1})(s,e):void Bt(19439)}function a_(s){return s instanceof Ds?(function(t){return`${t.field.canonicalString()} ${t.op} ${Hl(t.value)}`})(s):s instanceof ha?(function(t){return t.op.toString()+" {"+t.getFilters().map(a_).join(" ,")+"}"})(s):"Filter"}class SR extends Ds{constructor(e,t,i){super(e,t,i),this.key=Tt.fromName(i.referenceValue)}matches(e){const t=Tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class NR extends Ds{constructor(e,t){super(e,"in",t),this.keys=i_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class CR extends Ds{constructor(e,t){super(e,"not-in",t),this.keys=i_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function i_(s,e){return(e.arrayValue?.values||[]).map((t=>Tt.fromName(t.referenceValue)))}class RR extends Ds{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ny(t)&&fu(t.arrayValue,this.value)}}class AR extends Ds{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fu(this.value.arrayValue,t)}}class IR extends Ds{constructor(e,t){super(e,"not-in",t)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fu(this.value.arrayValue,t)}}class MR extends Ds{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ny(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>fu(this.value.arrayValue,i)))}}class DR{constructor(e,t=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function Ex(s,e=null,t=[],i=[],l=null,u=null,h=null){return new DR(s,e,t,i,l,u,h)}function sy(s){const e=Kt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>pg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Hl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Hl(i))).join(",")),e.Te=t}return e.Te}function ry(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!jR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!r_(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!jx(s.startAt,e.startAt)&&jx(s.endAt,e.endAt)}function gg(s){return Tt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class ec{constructor(e,t=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function PR(s,e,t,i,l,u,h,p){return new ec(s,e,t,i,l,u,h,p)}function rf(s){return new ec(s)}function Sx(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function LR(s){return Tt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function o_(s){return s.collectionGroup!==null}function tu(s){const e=Kt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Us(Js.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new mu(u,i))})),t.has(Js.keyField().canonicalString())||e.Ie.push(new mu(Js.keyField(),i))}return e.Ie}function Ea(s){const e=Kt(s);return e.Ee||(e.Ee=OR(e,tu(s))),e.Ee}function OR(s,e){if(s.limitType==="F")return Ex(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new mu(l.field,u)}));const t=s.endAt?new Ld(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Ld(s.startAt.position,s.startAt.inclusive):null;return Ex(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function yg(s,e){const t=s.filters.concat([e]);return new ec(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function VR(s,e){const t=s.explicitOrderBy.concat([e]);return new ec(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Od(s,e,t){return new ec(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function af(s,e){return ry(Ea(s),Ea(e))&&s.limitType===e.limitType}function l_(s){return`${sy(Ea(s))}|lt:${s.limitType}`}function Il(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((l=>a_(l))).join(", ")}]`),nf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((l=>Hl(l))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((l=>Hl(l))).join(",")),`Target(${i})`})(Ea(s))}; limitType=${s.limitType})`}function of(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Tt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of tu(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const y=Tx(h,p,g);return h.inclusive?y<=0:y<0})(i.startAt,tu(i),l)||i.endAt&&!(function(h,p,g){const y=Tx(h,p,g);return h.inclusive?y>=0:y>0})(i.endAt,tu(i),l))})(s,e)}function BR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function c_(s){return(e,t)=>{let i=!1;for(const l of tu(s)){const u=UR(l,e,t);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function UR(s,e,t){const i=s.field.isKeyField()?Tt.comparator(e.key,t.key):(function(u,h,p){const g=h.data.field(u),y=p.data.field(u);return g!==null&&y!==null?ql(g,y):Bt(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Bt(19790,{direction:s.dir})}}class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[t]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((t,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return Ww(this.inner)}size(){return this.innerSize}}const zR=new ds(Tt.comparator);function ui(){return zR}const u_=new ds(Tt.comparator);function Yc(...s){let e=u_;for(const t of s)e=e.insert(t.key,t);return e}function h_(s){let e=u_;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Mo(){return nu()}function d_(){return nu()}function nu(){return new Ko((s=>s.toString()),((s,e)=>s.isEqual(e)))}const FR=new ds(Tt.comparator),qR=new Us(Tt.comparator);function gn(...s){let e=qR;for(const t of s)e=e.add(t);return e}const HR=new Us(pn);function $R(){return HR}function ay(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function f_(s){return{integerValue:""+s}}function m_(s,e){return gR(e)?f_(e):ay(s,e)}class lf{constructor(){this._=void 0}}function WR(s,e,t){return s instanceof pu?(function(l,u){const h={fields:{[Yw]:{stringValue:Kw},[Xw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&ty(u)&&(u=sf(u)),u&&(h.fields[Qw]=u),{mapValue:h}})(t,e):s instanceof gu?g_(s,e):s instanceof yu?y_(s,e):(function(l,u){const h=p_(l,u),p=Nx(h)+Nx(l.Ae);return mg(h)&&mg(l.Ae)?f_(p):ay(l.serializer,p)})(s,e)}function GR(s,e,t){return s instanceof gu?g_(s,e):s instanceof yu?y_(s,e):t}function p_(s,e){return s instanceof bu?(function(i){return mg(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class pu extends lf{}class gu extends lf{constructor(e){super(),this.elements=e}}function g_(s,e){const t=b_(e);for(const i of s.elements)t.some((l=>Ca(l,i)))||t.push(i);return{arrayValue:{values:t}}}class yu extends lf{constructor(e){super(),this.elements=e}}function y_(s,e){let t=b_(e);for(const i of s.elements)t=t.filter((l=>!Ca(l,i)));return{arrayValue:{values:t}}}class bu extends lf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Nx(s){return js(s.integerValue||s.doubleValue)}function b_(s){return ny(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class v_{constructor(e,t){this.field=e,this.transform=t}}function KR(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof gu&&l instanceof gu||i instanceof yu&&l instanceof yu?Fl(i.elements,l.elements,Ca):i instanceof bu&&l instanceof bu?Ca(i.Ae,l.Ae):i instanceof pu&&l instanceof pu})(s.transform,e.transform)}class YR{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class cf{}function x_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new uf(s.key,pr.none()):new Nu(s.key,s.data,pr.none());{const t=s.data,i=jr.empty();let l=new Us(Js.comparator);for(let u of e.fields)if(!l.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new co(s.key,i,new Lr(l.toArray()),pr.none())}}function QR(s,e,t){s instanceof Nu?(function(l,u,h){const p=l.value.clone(),g=Rx(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,t):s instanceof co?(function(l,u,h){if(!xd(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=Rx(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(w_(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function su(s,e,t,i){return s instanceof Nu?(function(u,h,p,g){if(!xd(u.precondition,h))return p;const y=u.value.clone(),w=Ax(u.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,t,i):s instanceof co?(function(u,h,p,g){if(!xd(u.precondition,h))return p;const y=Ax(u.fieldTransforms,g,h),w=h.data;return w.setAll(w_(u)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((k=>k.field)))})(s,e,t,i):(function(u,h,p){return xd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,t)}function XR(s,e){let t=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=p_(i.transform,l||null);u!=null&&(t===null&&(t=jr.empty()),t.set(i.field,u))}return t||null}function Cx(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Fl(i,l,((u,h)=>KR(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Nu extends cf{constructor(e,t,i,l=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class co extends cf{constructor(e,t,i,l,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function w_(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function Rx(s,e,t){const i=new Map;On(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let l=0;l<t.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,GR(h,p,t[l]))}return i}function Ax(s,e,t){const i=new Map;for(const l of s){const u=l.transform,h=t.data.field(l.field);i.set(l.field,WR(u,h,e))}return i}class uf extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JR extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ZR{constructor(e,t,i,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&QR(u,e,i[l])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=su(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=su(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=d_();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=t.has(l.key)?null:p;const g=x_(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument($t.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),gn())}isEqual(e){return this.batchId===e.batchId&&Fl(this.mutations,e.mutations,((t,i)=>Cx(t,i)))&&Fl(this.baseMutations,e.baseMutations,((t,i)=>Cx(t,i)))}}class iy{constructor(e,t,i,l){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=l}static from(e,t,i){On(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return FR})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new iy(e,t,i,l)}}class eA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class tA{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ms,En;function nA(s){switch(s){case Ee.OK:return Bt(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Bt(15467,{code:s})}}function __(s){if(s===void 0)return ci("GRPC error has no .code"),Ee.UNKNOWN;switch(s){case Ms.OK:return Ee.OK;case Ms.CANCELLED:return Ee.CANCELLED;case Ms.UNKNOWN:return Ee.UNKNOWN;case Ms.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Ms.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Ms.INTERNAL:return Ee.INTERNAL;case Ms.UNAVAILABLE:return Ee.UNAVAILABLE;case Ms.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Ms.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Ms.NOT_FOUND:return Ee.NOT_FOUND;case Ms.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Ms.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Ms.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Ms.ABORTED:return Ee.ABORTED;case Ms.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Ms.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Ms.DATA_LOSS:return Ee.DATA_LOSS;default:return Bt(39323,{code:s})}}(En=Ms||(Ms={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";function sA(){return new TextEncoder}const rA=new Xi([4294967295,4294967295],0);function Ix(s){const e=sA().encode(s),t=new Pw;return t.update(e),new Uint8Array(t.digest())}function Mx(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Xi([t,i],0),new Xi([l,u],0)]}class oy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Qc(`Invalid padding: ${t}`);if(i<0)throw new Qc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Qc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Xi.fromNumber(this.ge)}ye(e,t,i){let l=e.add(t.multiply(Xi.fromNumber(i)));return l.compare(rA)===1&&(l=new Xi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ix(e),[i,l]=Mx(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,t,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new oy(u,l,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=Ix(e),[i,l]=Mx(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hf{constructor(e,t,i,l,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const l=new Map;return l.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new hf($t.min(),l,new ds(pn),ui(),gn())}}class Cu{constructor(e,t,i,l,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Cu(i,t,gn(),gn(),gn())}}class wd{constructor(e,t,i,l){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=l}}class k_{constructor(e,t){this.targetId=e,this.Ce=t}}class T_{constructor(e,t,i=Zs.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=l}}class Dx{constructor(){this.ve=0,this.Fe=Px(),this.Me=Zs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gn(),t=gn(),i=gn();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:i=i.add(l);break;default:Bt(38017,{changeType:u})}})),new Cu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Px()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,On(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class aA{constructor(e){this.Ge=e,this.ze=new Map,this.je=ui(),this.He=td(),this.Je=td(),this.Ze=new ds(pn)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Bt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,i=e.Ce.count,l=this.ot(t);if(l){const u=l.target;if(gg(u))if(i===0){const h=new Tt(u.path);this.et(t,h,ar.newNoDocument(h,$t.min()))}else On(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=t;let h,p;try{h=no(i).toUint8Array()}catch(g){if(g instanceof Gw)return zl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new oy(h,l,u)}catch(g){return zl(g instanceof Qc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&gg(p.target)){const g=new Tt(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,ar.newNoDocument(g,e))}u.Be&&(t.set(h,u.ke()),u.Ke())}}));let i=gn();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new hf(e,t,this.Ze,this.je,i);return this.je=ui(),this.He=td(),this.Je=td(),this.Ze=new ds(pn),l}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.qe(t,1):l.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Dx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Us(pn),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Us(pn),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ot("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function td(){return new ds(Tt.comparator)}function Px(){return new ds(Tt.comparator)}const iA={asc:"ASCENDING",desc:"DESCENDING"},oA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lA={and:"AND",or:"OR"};class cA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bg(s,e){return s.useProto3Json||nf(e)?e:{value:e}}function Vd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function uA(s,e){return Vd(s,e.toTimestamp())}function Sa(s){return On(!!s,49232),$t.fromTimestamp((function(t){const i=to(t);return new bt(i.seconds,i.nanos)})(s))}function ly(s,e){return vg(s,e).canonicalString()}function vg(s,e){const t=(function(l){return new es(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?t:t.child(e)}function E_(s){const e=es.fromString(s);return On(A_(e),10190,{key:e.toString()}),e}function xg(s,e){return ly(s.databaseId,e.path)}function Rp(s,e){const t=E_(e);if(t.get(1)!==s.databaseId.projectId)throw new Ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Tt(N_(t))}function S_(s,e){return ly(s.databaseId,e)}function hA(s){const e=E_(s);return e.length===4?es.emptyPath():N_(e)}function wg(s){return new es(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function N_(s){return On(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Lx(s,e,t){return{name:xg(s,e),fields:t.value.mapValue.fields}}function dA(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Bt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,w){return y.useProto3Json?(On(w===void 0||typeof w=="string",58123),Zs.fromBase64String(w||"")):(On(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Zs.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const w=y.code===void 0?Ee.UNKNOWN:__(y.code);return new Ze(w,y.message||"")})(h);t=new T_(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=Rp(s,i.document.name),u=Sa(i.document.updateTime),h=i.document.createTime?Sa(i.document.createTime):$t.min(),p=new jr({mapValue:{fields:i.document.fields}}),g=ar.newFoundDocument(l,u,h,p),y=i.targetIds||[],w=i.removedTargetIds||[];t=new wd(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=Rp(s,i.document),u=i.readTime?Sa(i.readTime):$t.min(),h=ar.newNoDocument(l,u),p=i.removedTargetIds||[];t=new wd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=Rp(s,i.document),u=i.removedTargetIds||[];t=new wd([],u,l,null)}else{if(!("filter"in e))return Bt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new tA(l,u),p=i.targetId;t=new k_(p,h)}}return t}function fA(s,e){let t;if(e instanceof Nu)t={update:Lx(s,e.key,e.value)};else if(e instanceof uf)t={delete:xg(s,e.key)};else if(e instanceof co)t={update:Lx(s,e.key,e.data),updateMask:_A(e.fieldMask)};else{if(!(e instanceof JR))return Bt(16599,{dt:e.type});t={verify:xg(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof pu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof gu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof yu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof bu)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Bt(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:uA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Bt(27497)})(s,e.precondition)),t}function mA(s,e){return s&&s.length>0?(On(e!==void 0,14353),s.map((t=>(function(l,u){let h=l.updateTime?Sa(l.updateTime):Sa(u);return h.isEqual($t.min())&&(h=Sa(u)),new YR(h,l.transformResults||[])})(t,e)))):[]}function pA(s,e){return{documents:[S_(s,e.path)]}}function gA(s,e){const t={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=S_(s,l);const u=(function(y){if(y.length!==0)return R_(ha.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((w=>(function(j){return{field:Ml(j.field),direction:vA(j.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=bg(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:l}}function yA(s){let e=hA(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let l=null;if(i>0){On(i===1,65062);const w=t.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let u=[];t.where&&(u=(function(k){const j=C_(k);return j instanceof ha&&s_(j)?j.getFilters():[j]})(t.where));let h=[];t.orderBy&&(h=(function(k){return k.map((j=>(function(G){return new mu(Dl(G.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(j)))})(t.orderBy));let p=null;t.limit&&(p=(function(k){let j;return j=typeof k=="object"?k.value:k,nf(j)?null:j})(t.limit));let g=null;t.startAt&&(g=(function(k){const j=!!k.before,L=k.values||[];return new Ld(L,j)})(t.startAt));let y=null;return t.endAt&&(y=(function(k){const j=!k.before,L=k.values||[];return new Ld(L,j)})(t.endAt)),PR(e,l,h,u,p,"F",g,y)}function bA(s,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bt(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function C_(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Dl(t.unaryFilter.field);return Ds.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Dl(t.unaryFilter.field);return Ds.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Dl(t.unaryFilter.field);return Ds.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Dl(t.unaryFilter.field);return Ds.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Bt(61313);default:return Bt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ds.create(Dl(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Bt(58110);default:return Bt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ha.create(t.compositeFilter.filters.map((i=>C_(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Bt(1026)}})(t.compositeFilter.op))})(s):Bt(30097,{filter:s})}function vA(s){return iA[s]}function xA(s){return oA[s]}function wA(s){return lA[s]}function Ml(s){return{fieldPath:s.canonicalString()}}function Dl(s){return Js.fromServerFormat(s.fieldPath)}function R_(s){return s instanceof Ds?(function(t){if(t.op==="=="){if(kx(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NAN"}};if(_x(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kx(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NAN"}};if(_x(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(t.field),op:xA(t.op),value:t.value}}})(s):s instanceof ha?(function(t){const i=t.getFilters().map((l=>R_(l)));return i.length===1?i[0]:{compositeFilter:{op:wA(t.op),filters:i}}})(s):Bt(54877,{filter:s})}function _A(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function A_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function I_(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Wi{constructor(e,t,i,l,u=$t.min(),h=$t.min(),p=Zs.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class kA{constructor(e){this.yt=e}}function TA(s){const e=yA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Od(e,e.limit,"L"):e}class jA{constructor(){this.Sn=new EA}addToCollectionParentIndex(e,t){return this.Sn.add(t),Ae.resolve()}getCollectionParents(e,t){return Ae.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Ae.resolve()}deleteFieldIndex(e,t){return Ae.resolve()}deleteAllFieldIndexes(e){return Ae.resolve()}createTargetIndexes(e,t){return Ae.resolve()}getDocumentsMatchingTarget(e,t){return Ae.resolve(null)}getIndexType(e,t){return Ae.resolve(0)}getFieldIndexes(e,t){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,t){return Ae.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,t){return Ae.resolve(eo.min())}updateCollectionGroup(e,t,i){return Ae.resolve()}updateIndexEntries(e,t){return Ae.resolve()}}class EA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t]||new Us(es.comparator),u=!l.has(i);return this.index[t]=l.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t];return l&&l.has(i)}getEntries(e){return(this.index[e]||new Us(es.comparator)).toArray()}}const Ox={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},M_=41943040;class Tr{static withCacheSize(e){return new Tr(e,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Tr.DEFAULT_COLLECTION_PERCENTILE=10,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tr.DEFAULT=new Tr(M_,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tr.DISABLED=new Tr(-1,0,0);class $l{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new $l(0)}static ar(){return new $l(-1)}}const Vx="LruGarbageCollector",SA=1048576;function Bx([s,e],[t,i]){const l=pn(s,t);return l===0?pn(e,i):l}class NA{constructor(e){this.Pr=e,this.buffer=new Us(Bx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Bx(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ot(Vx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zl(t)?ot(Vx,"Ignoring IndexedDB error during garbage collection: ",t):await Jl(t)}await this.Ar(3e5)}))}}class RA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Ae.resolve(tf.ce);const i=new NA(t);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(Ox)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ox):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,l,u,h,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),l=this.params.maximumSequenceNumbersToCollect):l=k,h=Date.now(),this.nthSequenceNumber(e,l)))).next((k=>(i=k,p=Date.now(),this.removeTargets(e,i,t)))).next((k=>(u=k,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((k=>(y=Date.now(),Al()<=mn.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${k} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:k}))))}}function AA(s,e){return new RA(s,e)}class IA{constructor(){this.changes=new Ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DA{constructor(e,t,i,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(i!==null&&su(i.mutation,l,Lr.empty(),bt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,gn()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=gn()){const l=Mo();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,i).next((u=>{let h=Yc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Mo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,gn())))}populateOverlays(e,t,i){const l=[];return i.forEach((u=>{t.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,l){let u=ui();const h=nu(),p=(function(){return nu()})();return t.forEach(((g,y)=>{const w=i.get(y.key);l.has(y.key)&&(w===void 0||w.mutation instanceof co)?u=u.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),su(w.mutation,y,w.mutation.getFieldMask(),bt.now())):h.set(y.key,Lr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>p.set(y,new MA(w,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=nu();let l=new ds(((h,p)=>h-p)),u=gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let w=i.get(g)||Lr.empty();w=p.applyToLocalView(y,w),i.set(g,w);const k=(l.get(p.batchId)||gn()).add(g);l=l.insert(p.batchId,k)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,k=d_();w.forEach((j=>{if(!u.has(j)){const L=x_(t.get(j),i.get(j));L!==null&&k.set(j,L),u=u.add(j)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,k))}return Ae.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,l){return LR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):o_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,l):this.getDocumentsMatchingCollectionQuery(e,t,i,l)}getNextDocuments(e,t,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,l-u.size):Ae.resolve(Mo());let p=uu,g=u;return h.next((y=>Ae.forEach(y,((w,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),u.get(w)?Ae.resolve():this.remoteDocumentCache.getEntry(e,w).next((j=>{g=g.insert(w,j)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,gn()))).next((w=>({batchId:p,changes:h_(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Tt(t)).next((i=>{let l=Yc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,l){const u=t.collectionGroup;let h=Yc();return this.indexManager.getCollectionParents(e,u).next((p=>Ae.forEach(p,(g=>{const y=(function(k,j){return new ec(j,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((w=>{w.forEach(((k,j)=>{h=h.insert(k,j)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,l)))).next((h=>{u.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,ar.newInvalidDocument(w)))}));let p=Yc();return h.forEach(((g,y)=>{const w=u.get(g);w!==void 0&&su(w.mutation,y,Lr.empty(),bt.now()),of(t,y)&&(p=p.insert(g,y))})),p}))}}class PA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Ae.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Sa(l.createTime)}})(t)),Ae.resolve()}getNamedQuery(e,t){return Ae.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(l){return{name:l.name,query:TA(l.bundledQuery),readTime:Sa(l.readTime)}})(t)),Ae.resolve()}}class LA{constructor(){this.overlays=new ds(Tt.comparator),this.Lr=new Map}getOverlay(e,t){return Ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Mo();return Ae.forEach(t,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((l,u)=>{this.bt(e,t,u)})),Ae.resolve()}removeOverlaysForBatchId(e,t,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Ae.resolve()}getOverlaysForCollection(e,t,i){const l=Mo(),u=t.length+1,h=new Tt(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Ae.resolve(l)}getOverlaysForCollectionGroup(e,t,i,l){let u=new ds(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=u.get(y.largestBatchId);w===null&&(w=Mo(),u=u.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=Mo(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>p.set(y,w))),!(p.size()>=l)););return Ae.resolve(p)}bt(e,t,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new eA(t,i));let u=this.Lr.get(t);u===void 0&&(u=gn(),this.Lr.set(t,u)),this.Lr.set(t,u.add(i.key))}}class OA{constructor(){this.sessionToken=Zs.EMPTY_BYTE_STRING}getSessionToken(e){return Ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ae.resolve()}}class cy{constructor(){this.kr=new Us(qs.Kr),this.qr=new Us(qs.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new qs(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new qs(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Tt(new es([])),i=new qs(t,e),l=new qs(t,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Tt(new es([])),i=new qs(t,e),l=new qs(t,e+1);let u=gn();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new qs(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class qs{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Tt.comparator(e.key,t.key)||pn(e.Hr,t.Hr)}static Ur(e,t){return pn(e.Hr,t.Hr)||Tt.comparator(e.key,t.key)}}class VA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Us(qs.Kr)}checkEmpty(e){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new ZR(u,t,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new qs(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Ae.resolve(h)}lookupMutationBatch(e,t){return Ae.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,l=this.Xr(i),u=l<0?0:l;return Ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?ey:this.Yn-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new qs(t,0),l=new qs(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),Ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Us(pn);return t.forEach((l=>{const u=new qs(l,0),h=new qs(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),Ae.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,l=i.length+1;let u=i;Tt.isDocumentKey(u)||(u=u.child(""));const h=new qs(new Tt(u),0);let p=new Us(pn);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),h),Ae.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){On(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Ae.forEach(t.mutations,(l=>{const u=new qs(l.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new qs(t,0),l=this.Jr.firstAfterOrEqual(i);return Ae.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ae.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class BA{constructor(e){this.ti=e,this.docs=(function(){return new ds(Tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Ae.resolve(i?i.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let i=ui();return t.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():ar.newInvalidDocument(l))})),Ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,l){let u=ui();const h=t.path,p=new Tt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||dR(hR(w),i)<=0||(l.has(w.key)||of(t,w))&&(u=u.insert(w.key,w.mutableCopy()))}return Ae.resolve(u)}getAllFromCollectionGroup(e,t,i,l){Bt(9500)}ni(e,t){return Ae.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new UA(this)}getSize(e){return Ae.resolve(this.size)}}class UA extends IA{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?t.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Ae.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class zA{constructor(e){this.persistence=e,this.ri=new Ko((t=>sy(t)),ry),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.ii=0,this.si=new cy,this.targetCount=0,this.oi=$l._r()}forEachTarget(e,t){return this.ri.forEach(((i,l)=>t(l))),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),Ae.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new $l(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Ae.resolve()}updateTargetData(e,t){return this.lr(t),Ae.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,t,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Ae.waitFor(u).next((()=>l))}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return Ae.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),Ae.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const l=this.persistence.referenceDelegate,u=[];return l&&t.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),Ae.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return Ae.resolve(i)}containsKey(e,t){return Ae.resolve(this.si.containsKey(t))}}class D_{constructor(e,t){this._i={},this.overlays={},this.ai=new tf(0),this.ui=!1,this.ui=!0,this.ci=new OA,this.referenceDelegate=e(this),this.li=new zA(this),this.indexManager=new jA,this.remoteDocumentCache=(function(l){return new BA(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new kA(t),this.Pi=new PA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new VA(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ot("MemoryPersistence","Starting transaction:",e);const l=new FA(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,t){return Ae.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class FA extends mR{constructor(e){super(),this.currentSequenceNumber=e}}class uy{constructor(e){this.persistence=e,this.Ri=new cy,this.Ai=null}static Vi(e){return new uy(e)}get di(){if(this.Ai)return this.Ai;throw Bt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),Ae.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),Ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Ae.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.di,(i=>{const l=Tt.fromPath(i);return this.mi(e,l).next((u=>{u||t.removeEntry(l,$t.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Ae.or([()=>Ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Bd{constructor(e,t){this.persistence=e,this.fi=new Ko((i=>yR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=AA(this,t)}static Vi(e,t){return new Bd(e,t)}Ti(){}Ii(e){return Ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((l=>i+l))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return Ae.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Ae.resolve():t(l)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,t).next((p=>{p||(i++,u.removeEntry(h,$t.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Ae.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Ae.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Ae.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bd(e.data.value)),t}wr(e,t,i){return Ae.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.fi.get(t);return Ae.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class hy{constructor(e,t,i,l){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=l}static Es(e,t){let i=gn(),l=gn();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new hy(e,t.fromCache,i,l)}}class qA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class HA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return yS()?8:pR(ir())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,l){const u={result:null};return this.gs(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,t,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new qA;return this.ys(e,t,h).next((p=>{if(u.result=p,this.As)return this.ws(e,t,h,p.size)}))})).next((()=>u.result))}ws(e,t,i,l){return i.documentReadCount<this.Vs?(Al()<=mn.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",Il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ae.resolve()):(Al()<=mn.DEBUG&&ot("QueryEngine","Query:",Il(t),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Al()<=mn.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",Il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ea(t))):Ae.resolve())}gs(e,t){if(Sx(t))return Ae.resolve(null);let i=Ea(t);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Od(t,null,"F"),i=Ea(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=gn(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,h,g.readTime)?this.gs(e,Od(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,l){return Sx(t)||l.isEqual($t.min())?Ae.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(t,u);return this.Ss(t,h,i,l)?Ae.resolve(null):(Al()<=mn.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Il(t)),this.Ds(e,h,t,uR(l,uu)).next((p=>p)))}))}bs(e,t){let i=new Us(c_(e));return t.forEach(((l,u)=>{of(e,u)&&(i=i.add(u))})),i}Ss(e,t,i,l){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,t,i){return Al()<=mn.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",Il(t)),this.fs.getDocumentsMatchingQuery(e,t,eo.min(),i)}Ds(e,t,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const dy="LocalStore",$A=3e8;class WA{constructor(e,t,i,l){this.persistence=e,this.Cs=t,this.serializer=l,this.vs=new ds(pn),this.Fs=new Ko((u=>sy(u)),ry),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function GA(s,e,t,i){return new WA(s,e,t,i)}async function P_(s,e){const t=Kt(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return t.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=gn();for(const y of l){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of u){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function KA(s,e){const t=Kt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,w){const k=y.batch,j=k.keys();let L=Ae.resolve();return j.forEach((G=>{L=L.next((()=>w.getEntry(g,G))).next((z=>{const O=y.docVersions.get(G);On(O!==null,48541),z.version.compareTo(O)<0&&(k.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),w.addEntry(z)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(g,k)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=gn();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,l)))}))}function L_(s){const e=Kt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function YA(s,e){const t=Kt(s),i=e.snapshotVersion;let l=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});l=t.vs;const p=[];e.targetChanges.forEach(((w,k)=>{const j=l.get(k);if(!j)return;p.push(t.li.removeMatchingKeys(u,w.removedDocuments,k).next((()=>t.li.addMatchingKeys(u,w.addedDocuments,k))));let L=j.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?L=L.withResumeToken(Zs.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):w.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(w.resumeToken,i)),l=l.insert(k,L),(function(z,O,te){return z.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=$A?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(j,L,w)&&p.push(t.li.updateTargetData(u,L))}));let g=ui(),y=gn();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))})),p.push(QA(u,h,e.documentUpdates).next((w=>{g=w.Bs,y=w.Ls}))),!i.isEqual($t.min())){const w=t.li.getLastRemoteSnapshotVersion(u).next((k=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(w)}return Ae.waitFor(p).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(t.vs=l,u)))}function QA(s,e,t){let i=gn(),l=gn();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=ui();return t.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual($t.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):ot(dy,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function XA(s,e){const t=Kt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ey),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function JA(s,e){const t=Kt(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return t.li.getTargetData(i,e).next((u=>u?(l=u,Ae.resolve(l)):t.li.allocateTargetId(i).next((h=>(l=new Wi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=t.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function _g(s,e,t){const i=Kt(s),l=i.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!Zl(h))throw h;ot(dy,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function Ux(s,e,t){const i=Kt(s);let l=$t.min(),u=gn();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const k=Kt(g),j=k.Fs.get(w);return j!==void 0?Ae.resolve(k.vs.get(j)):k.li.getTargetData(y,w)})(i,h,Ea(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?l:$t.min(),t?u:gn()))).next((p=>(ZA(i,BR(e),p),{documents:p,ks:u})))))}function ZA(s,e,t){let i=s.Ms.get(e)||$t.min();t.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class zx{constructor(){this.activeTargetIds=$R()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eI{constructor(){this.vo=new zx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new zx,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tI{Mo(e){}shutdown(){}}const Fx="ConnectivityMonitor";class qx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ot(Fx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ot(Fx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let nd=null;function kg(){return nd===null?nd=(function(){return 268435456+Math.round(2147483648*Math.random())})():nd++,"0x"+nd.toString(16)}const Ap="RestConnection",nI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class sI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Dd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,t,i,l,u){const h=kg(),p=this.Qo(e,t.toUriEncodedString());ot(Ap,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),w=io(y);return this.zo(e,p,g,i,w).then((k=>(ot(Ap,`Received RPC '${e}' ${h}: `,k),k)),(k=>{throw zl(Ap,`RPC '${e}' ${h} failed with error: `,k,"url: ",p,"request:",i),k}))}jo(e,t,i,l,u,h){return this.Wo(e,t,i,l,u)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,t){const i=nI[e];let l=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class rI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const sr="WebChannelConnection",Fc=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Bl extends sI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Bl.c_){const e=Bw();Fc(e,Vw.STAT_EVENT,(t=>{t.stat===hg.PROXY?ot(sr,"STAT_EVENT: detected buffering proxy"):t.stat===hg.NOPROXY&&ot(sr,"STAT_EVENT: detected no buffering proxy")})),Bl.c_=!0}}zo(e,t,i,l,u){const h=kg();return new Promise(((p,g)=>{const y=new Lw;y.setWithCredentials(!0),y.listenOnce(Ow.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case yd.NO_ERROR:const k=y.getResponseJson();ot(sr,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(k)),p(k);break;case yd.TIMEOUT:ot(sr,`RPC '${e}' ${h} timed out`),g(new Ze(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case yd.HTTP_ERROR:const j=y.getStatus();if(ot(sr,`RPC '${e}' ${h} failed with status:`,j,"response text:",y.getResponseText()),j>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const G=L?.error;if(G&&G.status&&G.message){const z=(function(te){const Q=te.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(Q)>=0?Q:Ee.UNKNOWN})(G.status);g(new Ze(z,G.message))}else g(new Ze(Ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ze(Ee.UNAVAILABLE,"Connection failed."));break;default:Bt(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ot(sr,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(l);ot(sr,`RPC '${e}' ${h} sending request:`,l),y.send(t,"POST",w,i,15)}))}T_(e,t,i){const l=kg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=u.join("");ot(sr,`Creating RPC '${e}' stream ${l}: ${y}`,p);const w=h.createWebChannel(y,p);this.I_(w);let k=!1,j=!1;const L=new rI({Ho:G=>{j?ot(sr,`Not sending because RPC '${e}' stream ${l} is closed:`,G):(k||(ot(sr,`Opening RPC '${e}' stream ${l} transport.`),w.open(),k=!0),ot(sr,`RPC '${e}' stream ${l} sending:`,G),w.send(G))},Jo:()=>w.close()});return Fc(w,Kc.EventType.OPEN,(()=>{j||(ot(sr,`RPC '${e}' stream ${l} transport opened.`),L.i_())})),Fc(w,Kc.EventType.CLOSE,(()=>{j||(j=!0,ot(sr,`RPC '${e}' stream ${l} transport closed`),L.o_(),this.E_(w))})),Fc(w,Kc.EventType.ERROR,(G=>{j||(j=!0,zl(sr,`RPC '${e}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),L.o_(new Ze(Ee.UNAVAILABLE,"The operation could not be completed")))})),Fc(w,Kc.EventType.MESSAGE,(G=>{if(!j){const z=G.data[0];On(!!z,16349);const O=z,te=O?.error||O[0]?.error;if(te){ot(sr,`RPC '${e}' stream ${l} received error:`,te);const Q=te.status;let ce=(function(ze){const I=Ms[ze];if(I!==void 0)return __(I)})(Q),je=te.message;ce===void 0&&(ce=Ee.INTERNAL,je="Unknown error status: "+Q+" with message "+te.message),j=!0,L.o_(new Ze(ce,je)),w.close()}else ot(sr,`RPC '${e}' stream ${l} received:`,z),L.__(z)}})),Bl.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Uw()}}function aI(s){return new Bl(s)}function Ip(){return typeof document<"u"?document:null}function df(s){return new cA(s,!0)}Bl.c_=!1;class O_{constructor(e,t,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-i);l>0&&ot("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Hx="PersistentStream";class V_{constructor(e,t,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(ci(t.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===t&&this.G_(i,l)}),(i=>{e((()=>{const l=new Ze(Ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ot(Hx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ot(Hx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class iI extends V_{constructor(e,t,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,l,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=dA(this.serializer,e),i=(function(u){if(!("targetChange"in u))return $t.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?$t.min():h.readTime?Sa(h.readTime):$t.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=wg(this.serializer),t.addTarget=(function(u,h){let p;const g=h.target;if(p=gg(g)?{documents:pA(u,g)}:{query:gA(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=j_(u,h.resumeToken);const y=bg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo($t.min())>0){p.readTime=Vd(u,h.snapshotVersion.toTimestamp());const y=bg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=bA(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=wg(this.serializer),t.removeTarget=e,this.K_(t)}}class oI extends V_{constructor(e,t,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return On(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,On(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){On(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=mA(e.writeResults,e.commitTime),i=Sa(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=wg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>fA(this.serializer,i)))};this.K_(t)}}class lI{}class cI extends lI{constructor(e,t,i,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,vg(t,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ze(Ee.UNKNOWN,u.toString())}))}jo(e,t,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,vg(t,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ze(Ee.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function uI(s,e,t,i){return new cI(s,e,t,i)}class hI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ci(t),this.aa=!1):ot("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ho="RemoteStore";class dI{constructor(e,t,i,l,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Yo(this)&&(ot(Ho,"Restarting streams for network reachability change."),await(async function(g){const y=Kt(g);y.Ea.add(4),await Ru(y),y.Va.set("Unknown"),y.Ea.delete(4),await ff(y)})(this))}))})),this.Va=new hI(i,l)}}async function ff(s){if(Yo(s))for(const e of s.Ra)await e(!0)}async function Ru(s){for(const e of s.Ra)await e(!1)}function B_(s,e){const t=Kt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),gy(t)?py(t):tc(t).O_()&&my(t,e))}function fy(s,e){const t=Kt(s),i=tc(t);t.Ia.delete(e),i.O_()&&U_(t,e),t.Ia.size===0&&(i.O_()?i.L_():Yo(t)&&t.Va.set("Unknown"))}function my(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($t.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}tc(s).Z_(e)}function U_(s,e){s.da.$e(e),tc(s).X_(e)}function py(s){s.da=new aA({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),tc(s).start(),s.Va.ua()}function gy(s){return Yo(s)&&!tc(s).x_()&&s.Ia.size>0}function Yo(s){return Kt(s).Ea.size===0}function z_(s){s.da=void 0}async function fI(s){s.Va.set("Online")}async function mI(s){s.Ia.forEach(((e,t)=>{my(s,e)}))}async function pI(s,e){z_(s),gy(s)?(s.Va.ha(e),py(s)):s.Va.set("Unknown")}async function gI(s,e,t){if(s.Va.set("Online"),e instanceof T_&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){ot(Ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ud(s,i)}else if(e instanceof wd?s.da.Xe(e):e instanceof k_?s.da.st(e):s.da.tt(e),!t.isEqual($t.min()))try{const i=await L_(s.localStore);t.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=u.Ia.get(y);w&&u.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const w=u.Ia.get(g);if(!w)return;u.Ia.set(g,w.withResumeToken(Zs.EMPTY_BYTE_STRING,w.snapshotVersion)),U_(u,g);const k=new Wi(w.target,g,y,w.sequenceNumber);my(u,k)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(i){ot(Ho,"Failed to raise snapshot:",i),await Ud(s,i)}}async function Ud(s,e,t){if(!Zl(e))throw e;s.Ea.add(1),await Ru(s),s.Va.set("Offline"),t||(t=()=>L_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ot(Ho,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await ff(s)}))}function F_(s,e){return e().catch((t=>Ud(s,t,e)))}async function mf(s){const e=Kt(s),t=ro(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ey;for(;yI(e);)try{const l=await XA(e.localStore,i);if(l===null){e.Ta.length===0&&t.L_();break}i=l.batchId,bI(e,l)}catch(l){await Ud(e,l)}q_(e)&&H_(e)}function yI(s){return Yo(s)&&s.Ta.length<10}function bI(s,e){s.Ta.push(e);const t=ro(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function q_(s){return Yo(s)&&!ro(s).x_()&&s.Ta.length>0}function H_(s){ro(s).start()}async function vI(s){ro(s).ra()}async function xI(s){const e=ro(s);for(const t of s.Ta)e.ea(t.mutations)}async function wI(s,e,t){const i=s.Ta.shift(),l=iy.from(i,e,t);await F_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await mf(s)}async function _I(s,e){e&&ro(s).Y_&&await(async function(i,l){if((function(h){return nA(h)&&h!==Ee.ABORTED})(l.code)){const u=i.Ta.shift();ro(i).B_(),await F_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await mf(i)}})(s,e),q_(s)&&H_(s)}async function $x(s,e){const t=Kt(s);t.asyncQueue.verifyOperationInProgress(),ot(Ho,"RemoteStore received new credentials");const i=Yo(t);t.Ea.add(3),await Ru(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ff(t)}async function kI(s,e){const t=Kt(s);e?(t.Ea.delete(2),await ff(t)):e||(t.Ea.add(2),await Ru(t),t.Va.set("Unknown"))}function tc(s){return s.ma||(s.ma=(function(t,i,l){const u=Kt(t);return u.sa(),new iI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:fI.bind(null,s),Yo:mI.bind(null,s),t_:pI.bind(null,s),J_:gI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),gy(s)?py(s):s.Va.set("Unknown")):(await s.ma.stop(),z_(s))}))),s.ma}function ro(s){return s.fa||(s.fa=(function(t,i,l){const u=Kt(t);return u.sa(),new oI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:vI.bind(null,s),t_:_I.bind(null,s),ta:xI.bind(null,s),na:wI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await mf(s)):(await s.fa.stop(),s.Ta.length>0&&(ot(Ho,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class yy{constructor(e,t,i,l,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,l,u){const h=Date.now()+i,p=new yy(e,t,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(s,e){if(ci("AsyncQueue",`${e}: ${s}`),Zl(s))return new Ze(Ee.UNAVAILABLE,`${e}: ${s}`);throw s}class Ul{static emptySet(e){return new Ul(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Tt.comparator(t.key,i.key):(t,i)=>Tt.comparator(t.key,i.key),this.keyedMap=Yc(),this.sortedSet=new ds(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ul;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Wx{constructor(){this.ga=new ds(Tt.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Bt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Wl{constructor(e,t,i,l,u,h,p,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,l,u){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new Wl(e,t,Ul.emptySet(t),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==i[l].type||!t[l].doc.isEqual(i[l].doc))return!1;return!0}}class TI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class jI{constructor(){this.queries=Gx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const l=Kt(t),u=l.queries;l.queries=Gx(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ze(Ee.ABORTED,"Firestore shutting down"))}}function Gx(){return new Ko((s=>l_(s)),af)}async function vy(s,e){const t=Kt(s);let i=3;const l=e.query;let u=t.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new TI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(l,!0);break;case 1:u.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(h){const p=by(h,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(p)}t.queries.set(l,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&wy(t)}async function xy(s,e){const t=Kt(s),i=e.query;let l=3;const u=t.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function EI(s,e){const t=Kt(s);let i=!1;for(const l of e){const u=l.query,h=t.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&wy(t)}function SI(s,e,t){const i=Kt(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(t);i.queries.delete(e)}function wy(s){s.Ca.forEach((e=>{e.next()}))}var Tg,Kx;(Kx=Tg||(Tg={})).Ma="default",Kx.Cache="cache";class _y{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Wl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tg.Cache}}class $_{constructor(e){this.key=e}}class W_{constructor(e){this.key=e}}class NI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=gn(),this.mutatedKeys=gn(),this.eu=c_(e),this.tu=new Ul(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new Wx,l=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,k)=>{const j=l.get(w),L=of(this.query,k)?k:null,G=!!j&&this.mutatedKeys.has(j.key),z=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let O=!1;j&&L?j.data.isEqual(L.data)?G!==z&&(i.track({type:3,doc:L}),O=!0):this.su(j,L)||(i.track({type:2,doc:L}),O=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(p=!0)):!j&&L?(i.track({type:0,doc:L}),O=!0):j&&!L&&(i.track({type:1,doc:j}),O=!0,(g||y)&&(p=!0)),O&&(L?(h=h.add(L),u=z?u.add(w):u.delete(w)):(h=h.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),u=u.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,k)=>(function(L,G){const z=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bt(20277,{Vt:O})}};return z(L)-z(G)})(w.type,k.type)||this.eu(w.doc,k.doc))),this.ou(i),l=l??!1;const p=t&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new Wl(this.query,e.tu,u,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=gn(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new W_(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new $_(i))})),t}cu(e){this.Za=e.ks,this.Ya=gn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ky="SyncEngine";class CI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class RI{constructor(e){this.key=e,this.hu=!1}}class AI{constructor(e,t,i,l,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ko((p=>l_(p)),af),this.Iu=new Map,this.Eu=new Set,this.Ru=new ds(Tt.comparator),this.Au=new Map,this.Vu=new cy,this.du={},this.mu=new Map,this.fu=$l.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function II(s,e,t=!0){const i=J_(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await G_(i,e,t,!0),l}async function MI(s,e){const t=J_(s);await G_(t,e,!0,!1)}async function G_(s,e,t,i){const l=await JA(s.localStore,Ea(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let p;return i&&(p=await DI(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&t&&B_(s.remoteStore,l),p}async function DI(s,e,t,i,l){s.pu=(k,j,L)=>(async function(z,O,te,Q){let ce=O.view.ru(te);ce.Ss&&(ce=await Ux(z.localStore,O.query,!1).then((({documents:I})=>O.view.ru(I,ce))));const je=Q&&Q.targetChanges.get(O.targetId),He=Q&&Q.targetMismatches.get(O.targetId)!=null,ze=O.view.applyChanges(ce,z.isPrimaryClient,je,He);return Qx(z,O.targetId,ze.au),ze.snapshot})(s,k,j,L);const u=await Ux(s.localStore,e,!0),h=new NI(e,u.ks),p=h.ru(u.documents),g=Cu.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",l),y=h.applyChanges(p,s.isPrimaryClient,g);Qx(s,t,y.au);const w=new CI(e,t,h);return s.Tu.set(e,w),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function PI(s,e,t){const i=Kt(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!af(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await _g(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),t&&fy(i.remoteStore,l.targetId),jg(i,l.targetId)})).catch(Jl)):(jg(i,l.targetId),await _g(i.localStore,l.targetId,!0))}async function LI(s,e){const t=Kt(s),i=t.Tu.get(e),l=t.Iu.get(i.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),fy(t.remoteStore,i.targetId))}async function OI(s,e,t){const i=HI(s);try{const l=await(function(h,p){const g=Kt(h),y=bt.now(),w=p.reduce(((L,G)=>L.add(G.key)),gn());let k,j;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let G=ui(),z=gn();return g.xs.getEntries(L,w).next((O=>{G=O,G.forEach(((te,Q)=>{Q.isValidDocument()||(z=z.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,G))).next((O=>{k=O;const te=[];for(const Q of p){const ce=XR(Q,k.get(Q.key).overlayedDocument);ce!=null&&te.push(new co(Q.key,ce,e_(ce.value.mapValue),pr.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,te,p)})).next((O=>{j=O;const te=O.applyToLocalDocumentSet(k,z);return g.documentOverlayCache.saveOverlays(L,O.batchId,te)}))})).then((()=>({batchId:j.batchId,changes:h_(k)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let y=h.du[h.currentUser.toKey()];y||(y=new ds(pn)),y=y.insert(p,g),h.du[h.currentUser.toKey()]=y})(i,l.batchId,t),await Au(i,l.changes),await mf(i.remoteStore)}catch(l){const u=by(l,"Failed to persist write");t.reject(u)}}async function K_(s,e){const t=Kt(s);try{const i=await YA(t.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=t.Au.get(u);h&&(On(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?On(h.hu,14607):l.removedDocuments.size>0&&(On(h.hu,42227),h.hu=!1))})),await Au(t,i,e)}catch(i){await Jl(i)}}function Yx(s,e,t){const i=Kt(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=Kt(h);g.onlineState=p;let y=!1;g.queries.forEach(((w,k)=>{for(const j of k.ba)j.va(p)&&(y=!0)})),y&&wy(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function VI(s,e,t){const i=Kt(s);i.sharedClientState.updateQueryState(e,"rejected",t);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new ds(Tt.comparator);h=h.insert(u,ar.newNoDocument(u,$t.min()));const p=gn().add(u),g=new hf($t.min(),new Map,new ds(pn),h,p);await K_(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),Ty(i)}else await _g(i.localStore,e,!1).then((()=>jg(i,e,t))).catch(Jl)}async function BI(s,e){const t=Kt(s),i=e.batch.batchId;try{const l=await KA(t.localStore,e);Q_(t,i,null),Y_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Au(t,l)}catch(l){await Jl(l)}}async function UI(s,e,t){const i=Kt(s);try{const l=await(function(h,p){const g=Kt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next((k=>(On(k!==null,37113),w=k.keys(),g.mutationQueue.removeMutationBatch(y,k)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);Q_(i,e,t),Y_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Au(i,l)}catch(l){await Jl(l)}}function Y_(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function Q_(s,e,t){const i=Kt(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(t?u.reject(t):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function jg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||X_(s,i)}))}function X_(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(fy(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),Ty(s))}function Qx(s,e,t){for(const i of t)i instanceof $_?(s.Vu.addReference(i.key,e),zI(s,i)):i instanceof W_?(ot(ky,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||X_(s,i.key)):Bt(19791,{wu:i})}function zI(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||(ot(ky,"New document in limbo: "+t),s.Eu.add(i),Ty(s))}function Ty(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Tt(es.fromString(e)),i=s.fu.next();s.Au.set(i,new RI(t)),s.Ru=s.Ru.insert(t,i),B_(s.remoteStore,new Wi(Ea(rf(t.path)),i,"TargetPurposeLimboResolution",tf.ce))}}async function Au(s,e,t){const i=Kt(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){l.push(y);const w=hy.Es(g.targetId,y);u.push(w)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,y){const w=Kt(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>Ae.forEach(y,(j=>Ae.forEach(j.Ts,(L=>w.persistence.referenceDelegate.addReference(k,j.targetId,L))).next((()=>Ae.forEach(j.Is,(L=>w.persistence.referenceDelegate.removeReference(k,j.targetId,L)))))))))}catch(k){if(!Zl(k))throw k;ot(dy,"Failed to update sequence numbers: "+k)}for(const k of y){const j=k.targetId;if(!k.fromCache){const L=w.vs.get(j),G=L.snapshotVersion,z=L.withLastLimboFreeSnapshotVersion(G);w.vs=w.vs.insert(j,z)}}})(i.localStore,u))}async function FI(s,e){const t=Kt(s);if(!t.currentUser.isEqual(e)){ot(ky,"User change. New user:",e.toKey());const i=await P_(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ze(Ee.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Au(t,i.Ns)}}function qI(s,e){const t=Kt(s),i=t.Au.get(e);if(i&&i.hu)return gn().add(i.key);{let l=gn();const u=t.Iu.get(e);if(!u)return l;for(const h of u){const p=t.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function J_(s){const e=Kt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=K_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VI.bind(null,e),e.Pu.J_=EI.bind(null,e.eventManager),e.Pu.yu=SI.bind(null,e.eventManager),e}function HI(s){const e=Kt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UI.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return GA(this.persistence,new HA,e.initialUser,this.serializer)}Cu(e){return new D_(uy.Vi,this.serializer)}Du(e){return new eI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class $I extends zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){On(this.persistence.referenceDelegate instanceof Bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new CA(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tr.withCacheSize(this.cacheSizeBytes):Tr.DEFAULT;return new D_((i=>Bd.Vi(i,t)),this.serializer)}}class Eg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FI.bind(null,this.syncEngine),await kI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new jI})()}createDatastore(e){const t=df(e.databaseInfo.databaseId),i=aI(e.databaseInfo);return uI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,l,u,h,p){return new dI(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>Yx(this.syncEngine,t,0)),(function(){return qx.v()?new qx:new tI})())}createSyncEngine(e,t){return(function(l,u,h,p,g,y,w){const k=new AI(l,u,h,p,g,y);return w&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Kt(t);ot(Ho,"RemoteStore shutting down."),i.Ea.add(5),await Ru(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Eg.provider={build:()=>new Eg};class jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ao="FirestoreClient";class WI{constructor(e,t,i,l,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=l,this.user=rr.UNAUTHENTICATED,this.clientId=Zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{ot(ao,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ot(ao,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=by(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Mp(s,e){s.asyncQueue.verifyOperationInProgress(),ot(ao,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await P_(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Xx(s,e){s.asyncQueue.verifyOperationInProgress();const t=await GI(s);ot(ao,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>$x(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>$x(e.remoteStore,l))),s._onlineComponents=e}async function GI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ot(ao,"Using user provided OfflineComponentProvider");try{await Mp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Ee.FAILED_PRECONDITION||l.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;zl("Error using user provided cache. Falling back to memory cache: "+t),await Mp(s,new zd)}}else ot(ao,"Using default OfflineComponentProvider"),await Mp(s,new $I(void 0));return s._offlineComponents}async function Z_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ot(ao,"Using user provided OnlineComponentProvider"),await Xx(s,s._uninitializedComponentsProvider._online)):(ot(ao,"Using default OnlineComponentProvider"),await Xx(s,new Eg))),s._onlineComponents}function KI(s){return Z_(s).then((e=>e.syncEngine))}async function Fd(s){const e=await Z_(s),t=e.eventManager;return t.onListen=II.bind(null,e.syncEngine),t.onUnlisten=PI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=MI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LI.bind(null,e.syncEngine),t}function YI(s,e,t,i){const l=new jy(i),u=new _y(e,l,t);return s.asyncQueue.enqueueAndForget((async()=>vy(await Fd(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>xy(await Fd(s),u)))}}function QI(s,e,t={}){const i=new ri;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const w=new jy({next:j=>{w.Nu(),h.enqueueAndForget((()=>xy(u,k)));const L=j.docs.has(p);!L&&j.fromCache?y.reject(new Ze(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&j.fromCache&&g&&g.source==="server"?y.reject(new Ze(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new _y(rf(p.path),w,{includeMetadataChanges:!0,Ka:!0});return vy(u,k)})(await Fd(s),s.asyncQueue,e,t,i))),i.promise}function XI(s,e,t={}){const i=new ri;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const w=new jy({next:j=>{w.Nu(),h.enqueueAndForget((()=>xy(u,k))),j.fromCache&&g.source==="server"?y.reject(new Ze(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new _y(p,w,{includeMetadataChanges:!0,Ka:!0});return vy(u,k)})(await Fd(s),s.asyncQueue,e,t,i))),i.promise}function JI(s,e){const t=new ri;return s.asyncQueue.enqueueAndForget((async()=>OI(await KI(s),e,t))),t.promise}function ek(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const ZI="ComponentProvider",Jx=new Map;function eM(s,e,t,i,l){return new xR(s,e,t,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ek(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const tk="firestore.googleapis.com",Zx=!0;class e2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tk,this.ssl=Zx}else this.host=e.host,this.ssl=e.ssl??Zx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=M_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SA)throw new Ze(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ek(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,t,i,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new J4;switch(i.type){case"firstParty":return new nR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ze(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Jx.get(t);i&&(ot(ZI,"Removing Datastore"),Jx.delete(t),i.terminate())})(this),Promise.resolve()}}function tM(s,e,t,i={}){s=mr(s,pf);const l=io(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;l&&(Og(`https://${p}`),Vg("Firestore",!0)),u.host!==tk&&u.host!==p&&zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!Bo(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,w;if(typeof i.mockUserToken=="string")y=i.mockUserToken,w=rr.MOCK_USER;else{y=Q2(i.mockUserToken,s._app?.options.projectId);const k=i.mockUserToken.sub||i.mockUserToken.user_id;if(!k)throw new Ze(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new rr(k)}s._authCredentials=new Z4(new Fw(y,w))}}class fi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fi(this.firestore,e,this._query)}}class ys{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ys(this.firestore,e,this._key)}toJSON(){return{type:ys._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Su(t,ys._jsonSchema))return new ys(e,i||null,new Tt(es.fromString(t.referencePath)))}}ys._jsonSchemaVersion="firestore/documentReference/1.0",ys._jsonSchema={type:Ps("string",ys._jsonSchemaVersion),referencePath:Ps("string")};class Ji extends fi{constructor(e,t,i){super(e,t,rf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ys(this.firestore,null,new Tt(e))}withConverter(e){return new Ji(this.firestore,e,this._path)}}function Ht(s,e,...t){if(s=Yn(s),qw("collection","path",e),s instanceof pf){const i=es.fromString(e,...t);return fx(i),new Ji(s,null,i)}{if(!(s instanceof ys||s instanceof Ji))throw new Ze(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(es.fromString(e,...t));return fx(i),new Ji(s.firestore,null,i)}}function Ke(s,e,...t){if(s=Yn(s),arguments.length===1&&(e=Zg.newId()),qw("doc","path",e),s instanceof pf){const i=es.fromString(e,...t);return dx(i),new ys(s,null,new Tt(i))}{if(!(s instanceof ys||s instanceof Ji))throw new Ze(Ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(es.fromString(e,...t));return dx(i),new ys(s.firestore,s instanceof Ji?s.converter:null,new Tt(i))}}const t2="AsyncQueue";class n2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O_(this,"async_queue_retry"),this._c=()=>{const i=Ip();i&&ot(t2,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Ip();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ip();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ri;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Zl(e))throw e;ot(t2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ci("INTERNAL UNHANDLED ERROR: ",s2(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=yy.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Bt(47125,{Pc:s2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function s2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ra extends pf{constructor(e,t,i,l){super(e,t,i,l),this.type="firestore",this._queue=new n2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n2(e),this._firestoreClient=void 0,await e}}}function nM(s,e){const t=typeof s=="object"?s:Fg(),i=typeof s=="string"?s:Dd,l=Qd(t,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=G2("firestore");u&&tM(l,...u)}return l}function Iu(s){if(s._terminated)throw new Ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||sM(s),s._firestoreClient}function sM(s){const e=s._freezeSettings(),t=eM(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new WI(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(Zs.fromBase64String(e))}catch(t){throw new Ze(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yr(Zs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,Yr._jsonSchema))return Yr.fromBase64String(e.bytes)}}Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:Ps("string",Yr._jsonSchemaVersion),bytes:Ps("string")};class gf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Js(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mu{constructor(e){this._methodName=e}}class Na{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ze(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ze(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pn(this._lat,e._lat)||pn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Na._jsonSchemaVersion}}static fromJSON(e){if(Su(e,Na._jsonSchema))return new Na(e.latitude,e.longitude)}}Na._jsonSchemaVersion="firestore/geoPoint/1.0",Na._jsonSchema={type:Ps("string",Na._jsonSchemaVersion),latitude:Ps("number"),longitude:Ps("number")};class ca{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ca._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,ca._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ca(e.vectorValues);throw new Ze(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ca._jsonSchemaVersion="firestore/vectorValue/1.0",ca._jsonSchema={type:Ps("string",ca._jsonSchemaVersion),vectorValues:Ps("object")};const rM=/^__.*__$/;class aM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nu(e,this.data,t,this.fieldTransforms)}}class nk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new co(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sk(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bt(40011,{dataSource:s})}}class Ey{constructor(e,t,i,l,u,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ey({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return qd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(sk(this.dataSource)&&rM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class iM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||df(e)}createContext(e,t,i,l=!1){return new Ey({dataSource:e,methodName:t,targetDoc:i,path:Js.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Du(s){const e=s._freezeSettings(),t=df(s._databaseId);return new iM(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Sy(s,e,t,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,t,l);Ry("Data must be an object, but it was:",h,i);const p=ik(i,h);let g,y;if(u.merge)g=new Lr(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const w=[];for(const k of u.mergeFields){const j=$o(e,k,t);if(!h.contains(j))throw new Ze(Ee.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);ck(w,j)||w.push(j)}g=new Lr(w),y=h.fieldTransforms.filter((k=>g.covers(k.field)))}else g=null,y=h.fieldTransforms;return new aM(new jr(p),g,y)}class yf extends Mu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yf}}class Ny extends Mu{_toFieldTransform(e){return new v_(e.path,new pu)}isEqual(e){return e instanceof Ny}}class Cy extends Mu{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new bu(e.serializer,m_(e.serializer,this.Vc));return new v_(e.path,t)}isEqual(e){return e instanceof Cy&&this.Vc===e.Vc}}function rk(s,e,t,i){const l=s.createContext(1,e,t);Ry("Data must be an object, but it was:",l,i);const u=[],h=jr.empty();lo(i,((g,y)=>{const w=lk(e,g,t);y=Yn(y);const k=l.childContextForFieldPath(w);if(y instanceof yf)u.push(w);else{const j=Pu(y,k);j!=null&&(u.push(w),h.set(w,j))}}));const p=new Lr(u);return new nk(h,p,l.fieldTransforms)}function ak(s,e,t,i,l,u){const h=s.createContext(1,e,t),p=[$o(e,i,t)],g=[l];if(u.length%2!=0)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)p.push($o(e,u[j])),g.push(u[j+1]);const y=[],w=jr.empty();for(let j=p.length-1;j>=0;--j)if(!ck(y,p[j])){const L=p[j];let G=g[j];G=Yn(G);const z=h.childContextForFieldPath(L);if(G instanceof yf)y.push(L);else{const O=Pu(G,z);O!=null&&(y.push(L),w.set(L,O))}}const k=new Lr(y);return new nk(w,k,h.fieldTransforms)}function oM(s,e,t,i=!1){return Pu(t,s.createContext(i?4:3,e))}function Pu(s,e){if(ok(s=Yn(s)))return Ry("Unsupported field value:",e,s),ik(s,e);if(s instanceof Mu)return(function(i,l){if(!sk(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=Pu(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=Yn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return m_(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=bt.fromDate(i);return{timestampValue:Vd(l.serializer,u)}}if(i instanceof bt){const u=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vd(l.serializer,u)}}if(i instanceof Na)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yr)return{bytesValue:j_(l.serializer,i._byteString)};if(i instanceof ys){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ly(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof ca)return(function(h,p){const g=h instanceof ca?h.toArray():h;return{mapValue:{fields:{[Jw]:{stringValue:Zw},[Pd]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw p.createError("VectorValues must only contain numeric values.");return ay(p.serializer,w)}))}}}}}})(i,l);if(I_(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${ef(i)}`)})(s,e)}function ik(s,e){const t={};return Ww(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(s,((i,l)=>{const u=Pu(l,e.childContextForField(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function ok(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof bt||s instanceof Na||s instanceof Yr||s instanceof ys||s instanceof Mu||s instanceof ca||I_(s))}function Ry(s,e,t){if(!ok(t)||!Hw(t)){const i=ef(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function $o(s,e,t){if((e=Yn(e))instanceof gf)return e._internalPath;if(typeof e=="string")return lk(s,e);throw qd("Field path arguments must be of type string or ",s,!1,void 0,t)}const lM=new RegExp("[~\\*/\\[\\]]");function lk(s,e,t){if(e.search(lM)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new gf(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function qd(s,e,t,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new Ze(Ee.INVALID_ARGUMENT,p+s+g)}function ck(s,e){return s.some((t=>t.isEqual(e)))}class cM{convertValue(e,t="none"){switch(so(e)){case 0:return null;case 1:return e.booleanValue;case 2:return js(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(no(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Bt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return lo(e,((l,u)=>{i[l]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[Pd].arrayValue?.values?.map((i=>js(i.doubleValue)));return new ca(t)}convertGeoPoint(e){return new Na(js(e.latitude),js(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=sf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const t=to(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=es.fromString(e);On(A_(i),9688,{name:e});const l=new du(i.get(1),i.get(3)),u=new Tt(i.popFirst(5));return l.isEqual(t)||ci(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class Ay extends cM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ys(this.firestore,null,t)}}function Qr(){return new Ny("serverTimestamp")}function Do(s){return new Cy("increment",s)}const r2="@firebase/firestore",a2="4.10.0";function i2(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const l=t;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class uk{constructor(e,t,i,l,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ys(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field($o("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class uM extends uk{data(){return super.data()}}function hk(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ze(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iy{}class My extends Iy{}function An(s,e,...t){let i=[];e instanceof Iy&&i.push(e),i=i.concat(t),(function(u){const h=u.filter((g=>g instanceof Dy)).length,p=u.filter((g=>g instanceof bf)).length;if(h>1||h>0&&p>0)throw new Ze(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class bf extends My{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bf(e,t,i)}_apply(e){const t=this._parse(e);return dk(e._query,t),new fi(e.firestore,e.converter,yg(e._query,t))}_parse(e){const t=Du(e.firestore);return(function(u,h,p,g,y,w,k){let j;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Ze(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){l2(k,w);const G=[];for(const z of k)G.push(o2(g,u,z));j={arrayValue:{values:G}}}else j=o2(g,u,k)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||l2(k,w),j=oM(p,h,k,w==="in"||w==="not-in");return Ds.create(y,w,j)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cn(s,e,t){const i=e,l=$o("where",s);return bf._create(l,i,t)}class Dy extends Iy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ha.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)dk(h,g),h=yg(h,g)})(e._query,t),new fi(e.firestore,e.converter,yg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Py extends My{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Py(e,t)}_apply(e){const t=(function(l,u,h){if(l.startAt!==null)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mu(u,h)})(e._query,this._field,this._direction);return new fi(e.firestore,e.converter,VR(e._query,t))}}function Hd(s,e="asc"){const t=e,i=$o("orderBy",s);return Py._create(i,t)}class Ly extends My{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Ly(e,t,i)}_apply(e){return new fi(e.firestore,e.converter,Od(e._query,this._limit,this._limitType))}}function $d(s){return cR("limit",s),Ly._create("limit",s,"F")}function o2(s,e,t){if(typeof(t=Yn(t))=="string"){if(t==="")throw new Ze(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o_(e)&&t.indexOf("/")!==-1)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(es.fromString(t));if(!Tt.isDocumentKey(i))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return wx(s,new Tt(i))}if(t instanceof ys)return wx(s,t._key);throw new Ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(t)}.`)}function l2(s,e){if(!Array.isArray(s)||s.length===0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dk(s,e){const t=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ze(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Oy(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class Xc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Po extends uk{constructor(e,t,i,l,u,h){super(e,t,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field($o("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Po._jsonSchemaVersion="firestore/documentSnapshot/1.0",Po._jsonSchema={type:Ps("string",Po._jsonSchemaVersion),bundleSource:Ps("string","DocumentSnapshot"),bundleName:Ps("string"),bundle:Ps("string")};class _d extends Po{data(e={}){return super.data(e)}}class Lo{constructor(e,t,i,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Xc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new _d(this._firestore,this._userDataWriter,i.key,i,new Xc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ze(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new _d(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Xc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new _d(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Xc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,w=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:hM(p.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hM(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bt(61501,{type:s})}}Lo._jsonSchemaVersion="firestore/querySnapshot/1.0",Lo._jsonSchema={type:Ps("string",Lo._jsonSchemaVersion),bundleSource:Ps("string","QuerySnapshot"),bundleName:Ps("string"),bundle:Ps("string")};class dM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Du(e)}set(e,t,i){this._verifyNotCommitted();const l=Dp(e,this._firestore),u=Oy(l.converter,t,i),h=Sy(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,i);return this._mutations.push(h.toMutation(l._key,pr.none())),this}update(e,t,i,...l){this._verifyNotCommitted();const u=Dp(e,this._firestore);let h;return h=typeof(t=Yn(t))=="string"||t instanceof gf?ak(this._dataReader,"WriteBatch.update",u._key,t,i,l):rk(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dp(e,this._firestore);return this._mutations=this._mutations.concat(new uf(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dp(s,e){if((s=Yn(s)).firestore!==e)throw new Ze(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Ln(s){s=mr(s,ys);const e=mr(s.firestore,Ra),t=Iu(e);return QI(t,s._key).then((i=>fk(e,s,i)))}function Tn(s){s=mr(s,fi);const e=mr(s.firestore,Ra),t=Iu(e),i=new Ay(e);return hk(s._query),XI(t,s._query).then((l=>new Lo(e,i,s,l)))}function Fn(s,e,t){s=mr(s,ys);const i=mr(s.firestore,Ra),l=Oy(s.converter,e,t),u=Du(i);return Lu(i,[Sy(u,"setDoc",s._key,l,s.converter!==null,t).toMutation(s._key,pr.none())])}function Hi(s,e,t,...i){s=mr(s,ys);const l=mr(s.firestore,Ra),u=Du(l);let h;return h=typeof(e=Yn(e))=="string"||e instanceof gf?ak(u,"updateDoc",s._key,e,t,i):rk(u,"updateDoc",s._key,e),Lu(l,[h.toMutation(s._key,pr.exists(!0))])}function dr(s){return Lu(mr(s.firestore,Ra),[new uf(s._key,pr.none())])}function ai(s,e){const t=mr(s.firestore,Ra),i=Ke(s),l=Oy(s.converter,e),u=Du(s.firestore);return Lu(t,[Sy(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,pr.exists(!1))]).then((()=>i))}function fM(s,...e){s=Yn(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||i2(e[i])||(t=e[i++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(i2(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,h,p;if(s instanceof ys)h=mr(s.firestore,Ra),p=rf(s._key.path),u={next:y=>{e[i]&&e[i](fk(h,s,y))},error:e[i+1],complete:e[i+2]};else{const y=mr(s,fi);h=mr(y.firestore,Ra),p=y._query;const w=new Ay(h);u={next:k=>{e[i]&&e[i](new Lo(h,w,y,k))},error:e[i+1],complete:e[i+2]},hk(s._query)}const g=Iu(h);return YI(g,p,l,u)}function Lu(s,e){const t=Iu(s);return JI(t,e)}function fk(s,e,t){const i=t.docs.get(e._key),l=new Ay(s);return new Po(s,l,e._key,i,new Xc(t.hasPendingWrites,t.fromCache),e.converter)}function c2(s){return s=mr(s,Ra),Iu(s),new dM(s,(e=>Lu(s,e)))}(function(e,t=!0){X4(Go),Uo(new Zi("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new Ra(new eR(i.getProvider("auth-internal")),new sR(h,i.getProvider("app-check-internal")),wR(h,l),h);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ka(r2,a2,e),ka(r2,a2,"esm2020")})();var mM="firebase",pM="12.8.0";ka(mM,pM,"app");const mk="firebasestorage.googleapis.com",pk="storageBucket",gM=120*1e3,yM=600*1e3;class vs extends Ia{constructor(e,t,i=0){super(Pp(e),`Firebase Storage: ${t} (${Pp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bs;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bs||(bs={}));function Pp(s){return"storage/"+s}function Vy(){const s="An unknown error occurred, please check the error payload for server response.";return new vs(bs.UNKNOWN,s)}function bM(s){return new vs(bs.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function vM(s){return new vs(bs.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xM(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vs(bs.UNAUTHENTICATED,s)}function wM(){return new vs(bs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _M(s){return new vs(bs.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function kM(){return new vs(bs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TM(){return new vs(bs.CANCELED,"User canceled the upload/download.")}function jM(s){return new vs(bs.INVALID_URL,"Invalid URL '"+s+"'.")}function EM(s){return new vs(bs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function SM(){return new vs(bs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pk+"' property when initializing the app?")}function NM(){return new vs(bs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CM(){return new vs(bs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function RM(s){return new vs(bs.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Sg(s){return new vs(bs.INVALID_ARGUMENT,s)}function gk(){return new vs(bs.APP_DELETED,"The Firebase app was deleted.")}function AM(s){return new vs(bs.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ru(s,e){return new vs(bs.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function qc(s){throw new vs(bs.INTERNAL_ERROR,"Internal error: "+s)}class fr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=fr.makeFromUrl(e,t)}catch{return new fr(e,"")}if(i.path==="")return i;throw EM(e)}static makeFromUrl(e,t){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(je){je.path.charAt(je.path.length-1)==="/"&&(je.path_=je.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function y(je){je.path_=decodeURIComponent(je.path)}const w="v[A-Za-z0-9_]+",k=t.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",L=new RegExp(`^https?://${k}/${w}/b/${l}/o${j}`,"i"),G={bucket:1,path:3},z=t===mk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",te=new RegExp(`^https?://${z}/${l}/${O}`,"i"),ce=[{regex:p,indices:g,postModify:u},{regex:L,indices:G,postModify:y},{regex:te,indices:{bucket:1,path:2},postModify:y}];for(let je=0;je<ce.length;je++){const He=ce[je],ze=He.regex.exec(e);if(ze){const I=ze[He.indices.bucket];let S=ze[He.indices.path];S||(S=""),i=new fr(I,S),He.postModify(i);break}}if(i==null)throw jM(e);return i}}class IM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function MM(s,e,t){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let y=!1;function w(...O){y||(y=!0,e.apply(null,O))}function k(O){l=setTimeout(()=>{l=null,s(L,g())},O)}function j(){u&&clearTimeout(u)}function L(O,...te){if(y){j();return}if(O){j(),w.call(null,O,...te);return}if(g()||h){j(),w.call(null,O,...te);return}i<64&&(i*=2);let ce;p===1?(p=2,ce=0):ce=(i+Math.random())*1e3,k(ce)}let G=!1;function z(O){G||(G=!0,j(),!y&&(l!==null?(O||(p=2),clearTimeout(l),k(0)):O||(p=1)))}return k(0),u=setTimeout(()=>{h=!0,z(!0)},t),z}function DM(s){s(!1)}function PM(s){return s!==void 0}function LM(s){return typeof s=="object"&&!Array.isArray(s)}function By(s){return typeof s=="string"||s instanceof String}function u2(s){return Uy()&&s instanceof Blob}function Uy(){return typeof Blob<"u"}function Ng(s,e,t,i){if(i<e)throw Sg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw Sg(`Invalid value for '${s}'. Expected ${t} or less.`)}function vf(s,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${s}`}function yk(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);t=t+l+"&"}return t=t.slice(0,-1),t}var Oo;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Oo||(Oo={}));function OM(s,e){const t=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||l||u}class VM{constructor(e,t,i,l,u,h,p,g,y,w,k,j=!0,L=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=k,this.retry=j,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,z)=>{this.resolve_=G,this.reject_=z,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new sd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===Oo.NO_ERROR,g=u.getStatus();if(!p||OM(g,this.additionalRetryCodes_)&&this.retry){const w=u.getErrorCode()===Oo.ABORT;i(!1,new sd(!1,null,w));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new sd(y,u))})},t=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());PM(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=Vy();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?gk():TM();h(g)}else{const g=kM();h(g)}};this.canceled_?t(!1,new sd(!1,null,!0)):this.backoffId_=MM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function BM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function UM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function FM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function qM(s,e,t,i,l,u,h=!0,p=!1){const g=yk(s.urlParams),y=s.url+g,w=Object.assign({},s.headers);return zM(w,e),BM(w,t),UM(w,u),FM(w,i),new VM(y,s.method,w,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function HM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $M(...s){const e=HM();if(e!==void 0){const t=new e;for(let i=0;i<s.length;i++)t.append(s[i]);return t.getBlob()}else{if(Uy())return new Blob(s);throw new vs(bs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WM(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function GM(s){if(typeof atob>"u")throw RM("base-64");return atob(s)}const _a={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lp{constructor(e,t){this.data=e,this.contentType=t||null}}function KM(s,e){switch(s){case _a.RAW:return new Lp(bk(e));case _a.BASE64:case _a.BASE64URL:return new Lp(vk(s,e));case _a.DATA_URL:return new Lp(QM(e),XM(e))}throw Vy()}function bk(s){const e=[];for(let t=0;t<s.length;t++){let i=s.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++t);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function YM(s){let e;try{e=decodeURIComponent(s)}catch{throw ru(_a.DATA_URL,"Malformed data URL.")}return bk(e)}function vk(s,e){switch(s){case _a.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw ru(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case _a.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw ru(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=GM(e)}catch(l){throw l.message.includes("polyfill")?l:ru(s,"Invalid character found")}const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i}class xk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ru(_a.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=JM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function QM(s){const e=new xk(s);return e.base64?vk(_a.BASE64,e.rest):YM(e.rest)}function XM(s){return new xk(s).contentType}function JM(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class $i{constructor(e,t){let i=0,l="";u2(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(u2(this.data_)){const i=this.data_,l=WM(i,e,t);return l===null?null:new $i(l)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new $i(i,!0)}}static getBlob(...e){if(Uy()){const t=e.map(i=>i instanceof $i?i.data_:i);return new $i($M.apply(null,t))}else{const t=e.map(h=>By(h)?KM(_a.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return t.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new $i(l,!0)}}uploadData(){return this.data_}}function zy(s){let e;try{e=JSON.parse(s)}catch{return null}return LM(e)?e:null}function ZM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function e3(s,e){const t=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?t:s+"/"+t}function wk(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function t3(s,e){return e}class hr{constructor(e,t,i,l){this.server=e,this.local=t||e,this.writable=!!i,this.xform=l||t3}}let rd=null;function n3(s){return!By(s)||s.length<2?s:wk(s)}function _k(){if(rd)return rd;const s=[];s.push(new hr("bucket")),s.push(new hr("generation")),s.push(new hr("metageneration")),s.push(new hr("name","fullPath",!0));function e(u,h){return n3(h)}const t=new hr("name");t.xform=e,s.push(t);function i(u,h){return h!==void 0?Number(h):h}const l=new hr("size");return l.xform=i,s.push(l),s.push(new hr("timeCreated")),s.push(new hr("updated")),s.push(new hr("md5Hash",null,!0)),s.push(new hr("cacheControl",null,!0)),s.push(new hr("contentDisposition",null,!0)),s.push(new hr("contentEncoding",null,!0)),s.push(new hr("contentLanguage",null,!0)),s.push(new hr("contentType",null,!0)),s.push(new hr("metadata","customMetadata",!0)),rd=s,rd}function s3(s,e){function t(){const i=s.bucket,l=s.fullPath,u=new fr(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function r3(s,e,t){const i={};i.type="file";const l=t.length;for(let u=0;u<l;u++){const h=t[u];i[h.local]=h.xform(i,e[h.server])}return s3(i,s),i}function kk(s,e,t){const i=zy(e);return i===null?null:r3(s,i,t)}function a3(s,e,t,i){const l=zy(e);if(l===null||!By(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const w=s.bucket,k=s.fullPath,j="/b/"+h(w)+"/o/"+h(k),L=vf(j,t,i),G=yk({alt:"media",token:y});return L+G})[0]}function i3(s,e){const t={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}const h2="prefixes",d2="items";function o3(s,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[h2])for(const l of t[h2]){const u=l.replace(/\/$/,""),h=s._makeStorageReference(new fr(e,u));i.prefixes.push(h)}if(t[d2])for(const l of t[d2]){const u=s._makeStorageReference(new fr(e,l.name));i.items.push(u)}return i}function l3(s,e,t){const i=zy(t);return i===null?null:o3(s,e,i)}class Fy{constructor(e,t,i,l){this.url=e,this.method=t,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qy(s){if(!s)throw Vy()}function c3(s,e){function t(i,l){const u=kk(s,l,e);return qy(u!==null),u}return t}function u3(s,e){function t(i,l){const u=l3(s,e,l);return qy(u!==null),u}return t}function h3(s,e){function t(i,l){const u=kk(s,l,e);return qy(u!==null),a3(u,l,s.host,s._protocol)}return t}function Hy(s){function e(t,i){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=wM():l=xM():t.getStatus()===402?l=vM(s.bucket):t.getStatus()===403?l=_M(s.path):l=i,l.status=t.getStatus(),l.serverResponse=i.serverResponse,l}return e}function d3(s){const e=Hy(s);function t(i,l){let u=e(i,l);return i.getStatus()===404&&(u=bM(s.path)),u.serverResponse=l.serverResponse,u}return t}function f3(s,e,t,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",t.length>0&&(u.delimiter=t),i&&(u.pageToken=i),l&&(u.maxResults=l);const h=e.bucketOnlyServerUrl(),p=vf(h,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,w=new Fy(p,g,u3(s,e.bucket),y);return w.urlParams=u,w.errorHandler=Hy(e),w}function m3(s,e,t){const i=e.fullServerUrl(),l=vf(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new Fy(l,u,h3(s,t),h);return p.errorHandler=d3(e),p}function p3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function g3(s,e,t){const i=Object.assign({},t);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=p3(null,e)),i}function y3(s,e,t,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let ce="";for(let je=0;je<2;je++)ce=ce+Math.random().toString().slice(2);return ce}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const y=g3(e,i,l),w=i3(y,t),k="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,j=`\r
--`+g+"--",L=$i.getBlob(k,i,j);if(L===null)throw NM();const G={name:y.fullPath},z=vf(u,s.host,s._protocol),O="POST",te=s.maxUploadRetryTime,Q=new Fy(z,O,c3(s,t),te);return Q.urlParams=G,Q.headers=h,Q.body=L.uploadData(),Q.errorHandler=Hy(e),Q}class b3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,l,u){if(this.sent_)throw qc("cannot .send() more than once");if(io(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class v3 extends b3{initXhr(){this.xhr_.responseType="text"}}function $y(){return new v3}class Wo{constructor(e,t){this._service=e,t instanceof fr?this._location=t:this._location=fr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Wo(e,t)}get root(){const e=new fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wk(this._location.path)}get storage(){return this._service}get parent(){const e=ZM(this._location.path);if(e===null)return null;const t=new fr(this._location.bucket,e);return new Wo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw AM(e)}}function x3(s,e,t){s._throwIfRoot("uploadBytes");const i=y3(s.storage,s._location,_k(),new $i(e,!0),t);return s.storage.makeRequestWithTokens(i,$y).then(l=>({metadata:l,ref:s}))}function w3(s){const e={prefixes:[],items:[]};return Tk(s,e).then(()=>e)}async function Tk(s,e,t){const l=await _3(s,{pageToken:t});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await Tk(s,e,l.nextPageToken)}function _3(s,e){e!=null&&typeof e.maxResults=="number"&&Ng("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=f3(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(i,$y)}function k3(s){s._throwIfRoot("getDownloadURL");const e=m3(s.storage,s._location,_k());return s.storage.makeRequestWithTokens(e,$y).then(t=>{if(t===null)throw CM();return t})}function T3(s,e){const t=e3(s._location.path,e),i=new fr(s._location.bucket,t);return new Wo(s.storage,i)}function j3(s){return/^[A-Za-z]+:\/\//.test(s)}function E3(s,e){return new Wo(s,e)}function jk(s,e){if(s instanceof Wy){const t=s;if(t._bucket==null)throw SM();const i=new Wo(t,t._bucket);return e!=null?jk(i,e):i}else return e!==void 0?T3(s,e):s}function S3(s,e){if(e&&j3(e)){if(s instanceof Wy)return E3(s,e);throw Sg("To use ref(service, url), the first argument must be a Storage instance.")}else return jk(s,e)}function f2(s,e){const t=e?.[pk];return t==null?null:fr.makeFromBucketSpec(t,s)}function N3(s,e,t,i={}){s.host=`${e}:${t}`;const l=io(e);l&&(Og(`https://${s.host}/b`),Vg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:Q2(u,s.app.options.projectId))}class Wy{constructor(e,t,i,l,u,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=mk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gM,this._maxUploadRetryTime=yM,this._requests=new Set,l!=null?this._bucket=fr.makeFromBucketSpec(l,this._host):this._bucket=f2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fr.makeFromBucketSpec(this._url,e):this._bucket=f2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ng("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ng("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wo(this,e)}_makeRequest(e,t,i,l,u=!0){if(this._deleted)return new IM(gk());{const h=qM(e,this._appId,i,l,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,l).getPromise()}}const m2="@firebase/storage",p2="0.14.0";const Ek="storage";function Op(s,e,t){return s=Yn(s),x3(s,e,t)}function g2(s){return s=Yn(s),w3(s)}function Vo(s){return s=Yn(s),k3(s)}function Gi(s,e){return s=Yn(s),S3(s,e)}function C3(s=Fg(),e){s=Yn(s);const i=Qd(s,Ek).getImmediate({identifier:e}),l=G2("storage");return l&&R3(i,...l),i}function R3(s,e,t,i={}){N3(s,e,t,i)}function A3(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new Wy(t,i,l,e,Go)}function I3(){Uo(new Zi(Ek,A3,"PUBLIC").setMultipleInstances(!0)),ka(m2,p2,""),ka(m2,p2,"esm2020")}I3();const Sk={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Gy=zg(Sk),No=Dw(Gy),xe=nM(Gy),Ki=C3(Gy),M3=zg(Sk,"secondary"),mP=Dw(M3),D3="EYdciKDOi3UYBLk1u8hHams5tmO2",Nk=x.createContext();function Vr(){return x.useContext(Nk)}function P3({children:s}){const[e,t]=x.useState(null),[i,l]=x.useState(!1),[u,h]=x.useState(!1),[p,g]=x.useState(null),[y,w]=x.useState(!0);x.useEffect(()=>BC(No,async Q=>{if(t(Q),Q)if(Q.uid===D3)l(!0),h(!1),g(null);else{l(!1);try{const ce=An(Ht(xe,"clients"),cn("uid","==",Q.uid)),je=await Tn(ce);if(je.empty)h(!1),g(null);else{const He=je.docs[0];h(!0),g({id:He.id,...He.data()})}}catch(ce){console.error("Error fetching client data:",ce),h(!1),g(null)}}else l(!1),h(!1),g(null);w(!1)}),[]);const O={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:te=>{g(Q=>Q&&{...Q,...te})},login:async(te,Q,ce=!0)=>(await Z1(No,ce?cg:Yg),await LC(No,te,Q)),signup:async(te,Q,ce)=>{await Z1(No,cg);const je=await PC(No,Q.trim().toLowerCase(),ce),He=je.user,ze=Ke(Ht(xe,"clients"));return await Fn(ze,{uid:He.uid,name:te.trim(),email:Q.trim().toLowerCase(),clientType:"core_buddy",coreBuddyAccess:!0,status:"active",tier:"free",subscriptionStatus:null,signupSource:"self_signup",createdAt:bt.now()}),je},logout:()=>UC(No),resetPassword:te=>DC(No,te),loading:y};return a.jsx(Nk.Provider,{value:O,children:s})}const Ck=x.createContext();function Ma(){return x.useContext(Ck)}function L3({children:s}){const[e,t]=x.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=x.useState(()=>localStorage.getItem("accent")||"red");x.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),x.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),t(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(Ck.Provider,{value:p,children:s})}const Rk=x.createContext();function Ak(){return x.useContext(Rk)}const O3=["nutrition","consistency","personalBests","achievements","buddies","programmes","leaderboard"],V3=[5,10],B3=1;function U3({children:s}){const{clientData:e}=Vr(),t=x.useMemo(()=>{const i=e?.tier||"free",l=e?.subscriptionStatus||null,u=i==="premium";function h(p){return u?!0:!O3.includes(p)}return{tier:i,subscriptionStatus:l,isPremium:u,canAccess:h,FREE_RANDOMISER_DURATIONS:V3,FREE_RANDOMISER_WEEKLY_LIMIT:B3}},[e?.tier,e?.subscriptionStatus]);return a.jsx(Rk.Provider,{value:t,children:s})}function z3(){const[s,e]=x.useState(""),[t,i]=x.useState(""),[l,u]=x.useState(!0),[h,p]=x.useState(""),[g,y]=x.useState(!1),[w,k]=x.useState(!1),[j,L]=x.useState(!1),{login:G,resetPassword:z,currentUser:O,isAdmin:te,isClient:Q,clientData:ce,loading:je}=Vr(),He=er();if(x.useEffect(()=>{if(!je&&O){if(te)He("/dashboard");else if(Q){const S=ce?.clientType;He(S==="core_buddy"?"/client/core-buddy":S==="circuit_vip"||S==="circuit_dropin"?"/client/circuit":"/client")}}},[je,O,te,Q,ce,He]),je)return null;const ze=async S=>{S.preventDefault(),p(""),y(!0);try{await G(s,t,l)}catch(A){p(A.message||"Failed to log in"),y(!1)}},I=async S=>{if(S.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await z(s.trim()),L(!0)}catch(A){A.code==="auth/user-not-found"?p("No account found with this email"):p(A.message||"Failed to send reset email")}y(!1)};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:w?"Reset Password":"Client Portal"})]}),h&&a.jsx("div",{className:"error-message",children:h}),j?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{k(!1),L(!1),p("")},children:"Back to Log In"})]}):w?a.jsxs("form",{onSubmit:I,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:ze,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:t,onChange:S=>i(S.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:S=>u(S.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!0),p("")},children:"Forgot password?"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>He("/signup"),children:"Don't have an account? Sign up free"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Co({feature:s,children:e}){const{canAccess:t}=Ak(),i=er();return t(s)?e:a.jsxs("div",{className:"locked-feature-wrap",children:[a.jsx("div",{className:"locked-feature-bg","aria-hidden":"true",children:e}),a.jsx("div",{className:"locked-feature-overlay",children:a.jsxs("div",{className:"locked-feature-card",children:[a.jsx("div",{className:"locked-icon",children:a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("h2",{children:"Premium Feature"}),a.jsx("p",{children:"Upgrade to Core Buddy Premium to unlock this feature and get full access to everything."}),a.jsx("button",{className:"locked-upgrade-btn",onClick:()=>i("/upgrade"),children:"Upgrade Now"})]})})]})}function Aa({active:s}){const e=er(),{clientData:t}=Vr(),i=t?.clientType==="block"&&t?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Profile"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:a.jsx("path",{d:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"})}),a.jsx("span",{children:"Workouts"})]}),a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),i&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Ou(s,e,t,i,l){const u=[];for(let h=0;h<s;h++){const p=(h*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:t+i*Math.sin(p),x2:e+l*Math.cos(p),y2:t+l*Math.sin(p),thick:h%5===0})}return u}const Ky=Ou(60,100,100,85,96),au=Ou(60,100,100,78,94),F3=Ou(60,100,100,82,94);Ou(60,50,50,38,46);const q3=Ou(60,40,40,30,37),H3="/login/assets/first_workout-B8SFkzJX.PNG",$3="/login/assets/workouts_10-Z5R3u0xH.PNG",W3="/login/assets/workouts_25-CzxSlcAj.PNG",G3="/login/assets/workouts_50-BpzWup3V.PNG",K3="/login/assets/workouts_100-D7_r6tn1.PNG",Y3="/login/assets/streak_2-CsRr-XA9.PNG",Q3="/login/assets/streak_4-BHO09tbw.PNG",X3="/login/assets/streak_8-DX2UWMko.PNG",J3="/login/assets/first_pb-aVf_CNWy.PNG",Z3="/login/assets/pbs_5-Cippawgg.PNG",eD="/login/assets/pbs_10-CZgGh9Kv.PNG",tD="/login/assets/pbs_100-C67b1wfS.PNG",nD="/login/assets/nutrition_7-CHVV11fj.PNG",sD="/login/assets/leaderboard_join-BLoId4Hz.PNG",rD="/login/assets/habits_7-Dvki70KO.PNG",Wd=[{id:"first_workout",img:H3,name:"First Rep",desc:"Complete your first workout",category:"workouts",threshold:1},{id:"workouts_10",img:$3,name:"On Fire",desc:"Complete 10 workouts",category:"workouts",threshold:10},{id:"workouts_25",img:W3,name:"Dedicated",desc:"Complete 25 workouts",category:"workouts",threshold:25},{id:"workouts_50",img:G3,name:"Unstoppable",desc:"Complete 50 workouts",category:"workouts",threshold:50},{id:"workouts_100",img:K3,name:"Century",desc:"Complete 100 workouts",category:"workouts",threshold:100},{id:"streak_2",img:Y3,name:"2 Week Streak",desc:"Work out for 2 weeks in a row",category:"streaks",threshold:2},{id:"streak_4",img:Q3,name:"Month Strong",desc:"Work out for 4 weeks in a row",category:"streaks",threshold:4},{id:"streak_8",img:X3,name:"Iron Will",desc:"Work out for 8 weeks in a row",category:"streaks",threshold:8},{id:"first_pb",img:J3,name:"First PB",desc:"Set your first personal best",category:"pbs",threshold:1},{id:"pbs_5",img:Z3,name:"PB Hunter",desc:"Set 5 personal bests",category:"pbs",threshold:5},{id:"pbs_10",img:eD,name:"PB Machine",desc:"Set 10 personal bests",category:"pbs",threshold:10},{id:"pbs_100",img:tD,name:"PB Legend",desc:"Set 100 personal bests",category:"pbs",threshold:100},{id:"nutrition_7",img:nD,name:"Macro Master",desc:"Hit your macro targets 7 days in a row",category:"nutrition",threshold:7},{id:"leaderboard_join",img:sD,name:"Competitor",desc:"Join the leaderboard",category:"leaderboard",threshold:1},{id:"habits_7",img:rD,name:"Habit Streak",desc:"Complete your daily habits 7 days in a row",category:"habits",threshold:7}],Vp=[10,25,50,100,200,500,1e3],Vi=5;function Sl(s){return s.toISOString().split("T")[0]}function aD(s){let e=0;for(const t of Vp){if(s<t)return{prev:e,next:t};e=t}return{prev:Vp[Vp.length-1],next:s+100}}const iD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},oD={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},Bp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function Up(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Hc(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function lD(s,e=800){return new Promise(t=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,h=i.height;u>h?u>e&&(h=Math.round(h*e/u),u=e):h>e&&(u=Math.round(u*e/h),h=e),l.width=u,l.height=h,l.getContext("2d").drawImage(i,0,0,u,h),l.toBlob(p=>t(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}function cD(){const{currentUser:s,isClient:e,clientData:t,logout:i,updateClientData:l,loading:u}=Vr(),{isDark:h,toggleTheme:p}=Ma(),g=er(),[y,w]=x.useState({hours:0,minutes:0,seconds:0}),[k,j]=x.useState(0),[L,G]=x.useState(0),[z,O]=x.useState(""),[te,Q]=x.useState(0),[ce,je]=x.useState(0),[He,ze]=x.useState(!1),[I,S]=x.useState({protein:0,carbs:0,fats:0,calories:0}),[A,V]=x.useState(null),[D,F]=x.useState(0),[M,We]=x.useState(null),[ft,q]=x.useState(!1),[me,De]=x.useState(!1),[$e,ee]=x.useState(0),[P,W]=x.useState(0),[ye,Ne]=x.useState([]),[Fe,Ie]=x.useState([]),[nt,gt]=x.useState(null),[Qe,qt]=x.useState(!1),yn=x.useRef(null),[Pt,St]=x.useState([]),[le,an]=x.useState(null),[sn,dt]=x.useState(0),[Ct,lt]=x.useState(0),[st,Qt]=x.useState(0),[as,Rt]=x.useState(0),[Xt,ts]=x.useState(null),wt=x.useCallback((R,Z="info")=>{ts({message:R,type:Z}),setTimeout(()=>ts(null),4e3)},[]),[bn,rn]=x.useState([]),[Sn,de]=x.useState(!1),[Te,Pe]=x.useState(""),[Xe,Oe]=x.useState(null),[Me,Ve]=x.useState(null),[xt,yt]=x.useState(!1),[At,Wt]=x.useState(new Set),[J,be]=x.useState(new Set),[tt,It]=x.useState({}),[jt,Jt]=x.useState({}),[Zt,zt]=x.useState({}),[In,Qn]=x.useState({}),[un,jn]=x.useState({}),[Pn,U]=x.useState({}),ge=x.useRef(null),_e=x.useRef(null),we=x.useRef({}),[fe,rt]=x.useState([]),[Nt,it]=x.useState(!1),_t=x.useRef(null),[vt,vn]=x.useState([]),[or,Es]=x.useState(""),[Ls,Vn]=x.useState(!1),[H,ue]=x.useState(null),[T,C]=x.useState([]),[K,re]=x.useState(null);x.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),x.useEffect(()=>{if(t)try{const R=sessionStorage.getItem(`cbDash_${t.id}`);if(R){const Z=JSON.parse(R);G(Z.programmePct??0),O(Z.programmeName??""),Q(Z.totalWorkouts??0),je(Z.habitWeekPct??0),S(Z.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),V(Z.nutritionTargetData??null),F(Z.todayHabitsCount??0),We(Z.nextSession??null),q(Z.hasProgramme??!1),De(Z.programmeComplete??!1),ee(Z.weeklyWorkouts??0),W(Z.pbCount??0),Ne(Z.topPBs??[]),Ie(Z.leaderboardTop3??[]),St(Z.unlockedBadges??[]),dt(Z.streakWeeks??0),ze(!0)}}catch{}},[t]),x.useEffect(()=>{t?.photoURL&&gt(t.photoURL)},[t]),x.useEffect(()=>{if(!t)return;const R=An(Ht(xe,"notifications"),cn("toId","==",t.id)),Z=fM(R,Re=>{const Je=Re.docs.map(ut=>({id:ut.id,...ut.data()}));Je.sort((ut,Et)=>{const et=ut.createdAt?.toMillis?.()||0;return(Et.createdAt?.toMillis?.()||0)-et}),rt(Je.slice(0,50))},Re=>{console.error("Notification listener error:",Re),Re.code==="permission-denied"&&console.warn("Firestore rules may be missing for the notifications collection. Please update your Firestore rules in the Firebase Console.")});return()=>Z()},[t]),x.useEffect(()=>{const R=Z=>{_t.current&&!_t.current.contains(Z.target)&&it(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]),x.useEffect(()=>{if(!t)return;const R=t.id;(async()=>{try{const[Z,Re,Je]=await Promise.all([Tn(An(Ht(xe,"buddies"),cn("user1","==",R))),Tn(An(Ht(xe,"buddies"),cn("user2","==",R))),Tn(Ht(xe,"clients"))]),ut=new Set;[...Z.docs,...Re.docs].forEach(et=>{const Ut=et.data();ut.add(Ut.user1===R?Ut.user2:Ut.user1)});const Et={};Je.docs.forEach(et=>{Et[et.id]=et.data()}),vn(Array.from(ut).filter(et=>Et[et]).map(et=>({id:et,name:Et[et].name,photoURL:Et[et].photoURL||null})))}catch(Z){console.error("Error loading buddies for mentions:",Z)}})()},[t]);const Ge=fe.filter(R=>!R.read).length,qe=async()=>{const R=fe.filter(Re=>!Re.read);if(!R.length)return;const Z=c2(xe);R.forEach(Re=>Z.update(Ke(xe,"notifications",Re.id),{read:!0})),await Z.commit()},Be=async()=>{if(!fe.length)return;const R=c2(xe);fe.forEach(Z=>R.delete(Ke(xe,"notifications",Z.id))),await R.commit()},Lt=async(R,Z,Re={})=>{if(!(!t||R===t.id))try{await ai(Ht(xe,"notifications"),{toId:R,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:Z,read:!1,createdAt:Qr(),...Re})}catch(Je){console.error("Notification create error:",Je),Je.code==="permission-denied"&&wt("Notifications blocked  check Firestore rules","error")}},Mt=(R,Z)=>{const Re=Z==="compose"?ge.current?.selectionStart:null,ut=(Re!=null?R.slice(0,Re):R).match(/@(\w*)$/);if(ut){Vn(!0),ue(Z),Es(ut[1].toLowerCase());const Et=vt.filter(et=>et.name&&et.name.toLowerCase().includes(ut[1].toLowerCase())).slice(0,5);C(Et)}else Vn(!1),C([])},qn=(R,Z)=>{if(Z==="compose"){const Re=ge.current,Je=Te,ut=Re?.selectionStart??Je.length,Et=Je.slice(0,ut),et=Je.slice(ut),Ut=Et.replace(/@\w*$/,`@${R.name} `);Pe(Ut+et),setTimeout(()=>{Re?.focus(),Re.selectionStart=Re.selectionEnd=Ut.length},0)}else{const Je=(jt[Z]||"").replace(/@\w*$/,`@${R.name} `);Jt(ut=>({...ut,[Z]:Je}))}Vn(!1),C([])},Os=R=>R&&R.split(/(@\w[\w\s]*?\s)/g).map((Re,Je)=>Re.startsWith("@")&&vt.some(ut=>Re.trim()===`@${ut.name}`)?a.jsx("span",{className:"mention-highlight",children:Re.trim()},Je):Re),Ss=async R=>{const Z=R.target.files?.[0];if(!(!Z||!t)){if(!Z.type.startsWith("image/")){wt("Please select an image file","error");return}if(Z.size>5*1024*1024){wt("Image must be under 5MB","error");return}qt(!0);try{const Re=await new Promise(Et=>{const et=new Image;et.onload=()=>{const Ut=document.createElement("canvas"),Ot=400;let Yt=et.width,_n=et.height;Yt>_n?(_n=_n/Yt*Ot,Yt=Ot):(Yt=Yt/_n*Ot,_n=Ot),Ut.width=Yt,Ut.height=_n,Ut.getContext("2d").drawImage(et,0,0,Yt,_n),Ut.toBlob(mt=>Et(mt),"image/jpeg",.75)},et.src=URL.createObjectURL(Z)}),Je=Gi(Ki,`profilePhotos/${t.id}`);await Op(Je,Re);const ut=await Vo(Je);await Hi(Ke(xe,"clients",t.id),{photoURL:ut}),gt(ut),l({photoURL:ut}),wt("Profile photo updated!","success")}catch(Re){console.error("Photo upload error:",Re),wt("Failed to upload photo","error")}qt(!1),yn.current&&(yn.current.value="")}};x.useEffect(()=>{const R=()=>{const Re=new Date,Je=new Date(Re);Je.setHours(23,59,59,999);const ut=Je-Re,Et=Math.floor(ut/(1e3*60*60)),et=Math.floor(ut%(1e3*60*60)/(1e3*60)),Ut=Math.floor(ut%(1e3*60)/1e3);w({hours:Et,minutes:et,seconds:Ut}),j(60-Ut)};R();const Z=setInterval(R,1e3);return()=>clearInterval(Z)},[]),x.useEffect(()=>{const R=setInterval(()=>{Rt(Z=>(Z+1)%Bp.length)},8e3);return()=>clearInterval(R)},[]),x.useEffect(()=>{if(!s||!t)return;(async()=>{let Z=null,Re=0,Je=[],ut=!1,Et=null;try{const et=Sl(new Date),Ut=await Ln(Ke(xe,"clientProgrammes",t.id));if(Ut.exists()){const zs=Ut.data(),Vs=iD[zs.templateId];if(q(!0),Vs){const yr=zs.completedSessions||{},Ws=Object.keys(yr).length,Pa=Vs.duration*Vs.daysPerWeek;G(Pa>0?Math.round(Ws/Pa*100):0);const uo=zs.templateId.replace(/_/g," ").replace(/\b\w/g,Zr=>Zr.toUpperCase());O(uo);const La=oD[zs.templateId];let Oa=!1;for(let Zr=1;Zr<=Vs.duration&&!Oa;Zr++)for(let br=0;br<Vs.daysPerWeek&&!Oa;br++)yr[`w${Zr}d${br}`]||(We({week:Zr,dayIdx:br,label:La?.[br]||`Day ${br+1}`}),Oa=!0);Oa||(De(!0),ut=!0)}}const Ot=Ht(xe,"workoutLogs"),Yt=An(Ot,cn("clientId","==",t.id));Z=await Tn(Yt);const _n=Z.docs.filter(zs=>zs.data().type!=="programme").length;Q(_n);const mt=new Date,us=mt.getDay(),Xn=us===0?6:us-1,Gn=new Date(mt);Gn.setDate(mt.getDate()-Xn),Gn.setHours(0,0,0,0);const ms=Sl(Gn),Jn=Z.docs.filter(zs=>(zs.data().date||"")>=ms).length;ee(Jn);const hs=Ht(xe,"habitLogs"),Ns=An(hs,cn("clientId","==",t.id),cn("date","==",et)),Zn=await Tn(Ns);let ws=0;if(!Zn.empty){const zs=Zn.docs[0].data().habits||{};ws=Object.values(zs).filter(Boolean).length}je(Math.round(ws/Vi*100)),F(ws);const tr=await Ln(Ke(xe,"nutritionTargets",t.id));tr.exists()&&(V(tr.data()),Et=tr.data());const Sr=await Ln(Ke(xe,"nutritionLogs",`${t.id}_${et}`));if(Sr.exists()){const Vs=(Sr.data().entries||[]).reduce((yr,Ws)=>({protein:yr.protein+(Ws.protein||0),carbs:yr.carbs+(Ws.carbs||0),fats:yr.fats+(Ws.fats||0),calories:yr.calories+(Ws.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});S(Vs)}}catch(et){console.error("Error loading dashboard stats:",et)}try{let et=[];const Ut=await Ln(Ke(xe,"coreBuddyPBs",t.id));if(Ut.exists()){const Ot=Ut.data().exercises||{};W(Object.keys(Ot).length),Re=Object.keys(Ot).length,et=Object.entries(Ot).sort(([,Yt],[,_n])=>(_n.weight||0)-(Yt.weight||0)).slice(0,3).map(([Yt,_n])=>({name:Yt,weight:_n.weight,reps:_n.reps}))}if(et.length===0){const Ot={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},Yt=An(Ht(xe,"personalBests"),cn("clientId","==",t.id)),_n=await Tn(Yt);if(!_n.empty){const mt={};_n.docs.forEach(Xn=>{const Gn=Xn.data().benchmarks||{};Object.entries(Gn).forEach(([ms,Jn])=>{if(!Jn.weight||!Ot[ms])return;const hs=(Jn.weight||0)*(Jn.reps||1);(!mt[ms]||hs>(mt[ms].weight||0)*(mt[ms].reps||1))&&(mt[ms]={name:Ot[ms],weight:Jn.weight,reps:Jn.reps})})});const us=Object.values(mt);W(us.length),Re=us.length,et=us.sort((Xn,Gn)=>(Gn.weight||0)-(Xn.weight||0)).slice(0,3)}}Je=et,Ne(et)}catch(et){console.error("PB fetch error:",et)}try{const et=Ht(xe,"clients"),Ut=An(et,cn("leaderboardOptIn","==",!0)),Yt=(await Tn(Ut)).docs.map(_n=>({id:_n.id,name:_n.data().name,photoURL:_n.data().photoURL||null}));Ie(Yt.slice(0,3))}catch(et){console.error("Leaderboard preview error:",et)}try{let et=0;if(Z){const Xn=Z.docs.map(Gn=>Gn.data().date).filter(Boolean).sort().reverse();if(Xn.length>0){const Gn=new Date;let ms=new Date(Gn);e:for(let Jn=0;Jn<52;Jn++){const hs=new Date(ms),Ns=hs.getDay(),Zn=Ns===0?6:Ns-1;hs.setDate(hs.getDate()-Zn),hs.setHours(0,0,0,0);const ws=new Date(hs);ws.setDate(ws.getDate()+7);const tr=Sl(hs),Sr=Sl(ws);if(Xn.some(Vs=>Vs>=tr&&Vs<Sr))et++;else{if(Jn>0)break e;break}ms.setDate(ms.getDate()-7)}}}dt(et);let Ut=0;for(let Xn=0;Xn<30;Xn++){const Gn=new Date;Gn.setDate(Gn.getDate()-Xn);const ms=Sl(Gn);try{const Jn=await Tn(An(Ht(xe,"habitLogs"),cn("clientId","==",t.id),cn("date","==",ms)));if(Jn.empty)break;{const hs=Jn.docs[0].data().habits||{};if(Object.values(hs).filter(Boolean).length>=Vi)Ut++;else break}}catch{break}}lt(Ut);let Ot=0;for(let Xn=0;Xn<30;Xn++){const Gn=new Date;Gn.setDate(Gn.getDate()-Xn);const ms=Sl(Gn);try{const Jn=await Ln(Ke(xe,"nutritionLogs",`${t.id}_${ms}`));if(Jn.exists()&&(Jn.data().entries||[]).length>0)if(Et){const Ns=(Jn.data().entries||[]).reduce((Zn,ws)=>({protein:Zn.protein+(ws.protein||0),carbs:Zn.carbs+(ws.carbs||0),fats:Zn.fats+(ws.fats||0)}),{protein:0,carbs:0,fats:0});if(Ns.protein>=(Et.protein||0)&&Ns.carbs>=(Et.carbs||0)&&Ns.fats>=(Et.fats||0))Ot++;else break}else Ot++;else break}catch{break}}Qt(Ot);const Yt=Z?Z.docs.length:0,_n=[],mt=Xn=>_n.push(Xn);Yt>=1&&mt("first_workout"),Yt>=10&&mt("workouts_10"),Yt>=25&&mt("workouts_25"),Yt>=50&&mt("workouts_50"),Yt>=100&&mt("workouts_100"),et>=2&&mt("streak_2"),et>=4&&mt("streak_4"),et>=8&&mt("streak_8"),Re>=1&&mt("first_pb"),Re>=5&&mt("pbs_5"),Re>=10&&mt("pbs_10"),Re>=100&&mt("pbs_100"),Ot>=7&&mt("nutrition_7"),t.leaderboardOptIn&&mt("leaderboard_join"),Ut>=7&&mt("habits_7"),St(_n);const us={};_n.forEach(Xn=>{us[Xn]={unlockedAt:new Date().toISOString()}}),Fn(Ke(xe,"achievements",t.id),{badges:us,progress:{streakWeeks:et,pbCount:Re,nutritionStreak:Ot,habitStreak:Ut},updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(et){console.error("Achievement computation error:",et)}ze(!0)})()},[s,t]),x.useEffect(()=>{if(!(!He||!t))try{sessionStorage.setItem(`cbDash_${t.id}`,JSON.stringify({programmePct:L,programmeName:z,totalWorkouts:te,habitWeekPct:ce,nutritionTotals:I,nutritionTargetData:A,todayHabitsCount:D,nextSession:M,hasProgramme:ft,programmeComplete:me,weeklyWorkouts:$e,pbCount:P,topPBs:ye,leaderboardTop3:Fe,unlockedBadges:Pt,streakWeeks:sn}))}catch{}},[He,L,z,te,ce,I,A,D,M,ft,me,$e,P,ye,Fe,Pt,sn,t]);const Nn=R=>{const Z=R.currentTarget,Re=Z.querySelector(".ripple");Re&&Re.remove();const Je=Z.getBoundingClientRect(),ut=Math.max(Je.width,Je.height),Et=R.clientX-Je.left-ut/2,et=R.clientY-Je.top-ut/2,Ut=document.createElement("span");Ut.className="ripple",Ut.style.cssText=`width:${ut}px;height:${ut}px;left:${Et}px;top:${et}px;`,Z.appendChild(Ut),setTimeout(()=>Ut.remove(),600)},Bn=t?.name?.split(" ")[0]||"there",{prev:Y,next:ve}=aD(te),ne=ve>Y?Math.round((te-Y)/(ve-Y)*100):100,Le=[{label:"Programme",value:`${L}%`,pct:L,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${te}`,pct:ne,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${ce}%`,pct:ce,color:"#38B6FF",size:"normal"}],Ue=R=>!A||!A[R]?0:Math.min(Math.round(I[R]/A[R]*100),100),at=(()=>{const R=new Date().getHours();return He&&D>=Vi&&I.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:R>=5&&R<12?{main:"Rise and grind,",sub:"let's get after it!"}:R>=12&&R<17?{main:"Oye",sub:"crack on and make it count!"}:R>=17&&R<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),ct=He?ft&&M&&!me?{label:"NEXT SESSION",message:`Week ${M.week}, Day ${M.dayIdx+1}  ${M.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:L,ringLabel:`${L}%`}:D<Vi?{label:"DAILY HABITS",message:`${D}/${Vi} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:ce,ringLabel:`${D}/${Vi}`}:I.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:ft?me?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null,Ft=x.useCallback(async()=>{if(t){de(!0);try{const R=await Tn(An(Ht(xe,"posts"),cn("authorId","==",t.id),Hd("createdAt","desc"),$d(30)));rn(R.docs.map(Re=>({id:Re.id,...Re.data()})));const Z=await Tn(An(Ht(xe,"postLikes"),cn("userId","==",t.id)));Wt(new Set(Z.docs.map(Re=>Re.data().postId)))}catch(R){console.error("Error loading journey:",R)}finally{de(!1)}}},[t]);x.useEffect(()=>{He&&t&&Ft()},[He,t,Ft]);const xn=R=>{const Z=R.target.files?.[0];if(Z){if(!Z.type.startsWith("image/")){wt("Please select an image file","error");return}if(Z.size>10*1024*1024){wt("Image must be under 10MB","error");return}Oe(Z),Ve(URL.createObjectURL(Z))}},fs=()=>{Oe(null),Me&&URL.revokeObjectURL(Me),Ve(null),_e.current&&(_e.current.value="")},wn=async()=>{if(!(!Te.trim()&&!Xe||xt||!t)){yt(!0);try{let R=null;if(Xe){const Je=await lD(Xe),ut=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,Et=Gi(Ki,`postImages/${t.id}/${ut}`);await Op(Et,Je),R=await Vo(Et)}await ai(Ht(xe,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:Te.trim(),type:R?"image":"text",imageURL:R||null,createdAt:Qr(),likeCount:0,commentCount:0});const Re=Te.trim().match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Re){const Je=new Set;Re.forEach(ut=>{const Et=ut.slice(1).trim(),et=vt.find(Ut=>Ut.name&&Ut.name.toLowerCase()===Et.toLowerCase());et&&!Je.has(et.id)&&(Je.add(et.id),Lt(et.id,"mention",{}))})}Pe(""),fs(),ge.current&&(ge.current.style.height="auto"),await Ft(),wt("Posted!","success")}catch(R){console.error("Error posting:",R),wt(R?.message||"Failed to post","error")}finally{yt(!1)}}},Hs=async R=>{if(window.confirm("Delete this post?"))try{await dr(Ke(xe,"posts",R)),rn(Z=>Z.filter(Re=>Re.id!==R)),wt("Post deleted","info")}catch(Z){console.error("Delete error:",Z),wt("Failed to delete","error")}},Br=async R=>{if(!t)return;const Z=t.id,Re=`${R}_${Z}`,Je=At.has(R),ut=new Set(At);Je?ut.delete(R):ut.add(R),Wt(ut),rn(Et=>Et.map(et=>et.id===R?{...et,likeCount:Math.max(0,(et.likeCount||0)+(Je?-1:1))}:et));try{if(Je)await dr(Ke(xe,"postLikes",Re)),await Hi(Ke(xe,"posts",R),{likeCount:Do(-1)});else{await Fn(Ke(xe,"postLikes",Re),{postId:R,userId:Z,createdAt:Qr()}),await Hi(Ke(xe,"posts",R),{likeCount:Do(1)});const Et=bn.find(et=>et.id===R);Et&&Lt(Et.authorId,"like",{postId:R})}}catch(Et){console.error("Like error:",Et),Ft()}},xs=async R=>{try{const Z=await Tn(An(Ht(xe,"postComments"),cn("postId","==",R),Hd("createdAt","asc"),$d(50)));It(Re=>({...Re,[R]:Z.docs.map(Je=>({id:Je.id,...Je.data()}))}))}catch(Z){console.error("Error loading comments:",Z)}},Da=R=>{const Z=new Set(J);Z.has(R)?Z.delete(R):(Z.add(R),tt[R]||xs(R)),be(Z)},Jr=async R=>{const Z=(jt[R]||"").trim(),Re=un[R];if(!(!Z&&!Re||!t)){zt(Je=>({...Je,[R]:!0}));try{let Je=null;if(Re){const Ot=Gi(Ki,`comment-images/${Date.now()}_${Re.name}`);await Op(Ot,Re),Je=await Vo(Ot)}const ut={postId:R,authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:Z||"",createdAt:Qr()};Je&&(ut.imageURL=Je);const Et=In[R];Et&&(ut.replyToId=Et.id,ut.replyToName=Et.authorName),await ai(Ht(xe,"postComments"),ut),await Hi(Ke(xe,"posts",R),{commentCount:Do(1)});const et=bn.find(Ot=>Ot.id===R);et&&Lt(et.authorId,"comment",{postId:R});const Ut=Z.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Ut){const Ot=new Set;Ut.forEach(Yt=>{const _n=Yt.slice(1).trim(),mt=vt.find(us=>us.name&&us.name.toLowerCase()===_n.toLowerCase());mt&&!Ot.has(mt.id)&&(Ot.add(mt.id),Lt(mt.id,"mention",{postId:R}))})}Jt(Ot=>({...Ot,[R]:""})),jn(Ot=>({...Ot,[R]:null})),U(Ot=>({...Ot,[R]:null})),Qn(Ot=>({...Ot,[R]:null})),we.current[R]&&(we.current[R].value=""),rn(Ot=>Ot.map(Yt=>Yt.id===R?{...Yt,commentCount:(Yt.commentCount||0)+1}:Yt)),await xs(R)}catch(Je){console.error("Comment error:",Je),wt("Failed to comment","error")}finally{zt(Je=>({...Je,[R]:!1}))}}},hn=async(R,Z)=>{try{await dr(Ke(xe,"postComments",Z)),await Hi(Ke(xe,"posts",R),{commentCount:Do(-1)}),It(Re=>({...Re,[R]:(Re[R]||[]).filter(Je=>Je.id!==Z)})),rn(Re=>Re.map(Je=>Je.id===R?{...Je,commentCount:Math.max((Je.commentCount||1)-1,0)}:Je))}catch(Re){console.error("Delete comment error:",Re),wt("Failed to delete comment","error")}},cs=(R,Z)=>{const Re=Z.target.files?.[0];if(!Re)return;if(Re.size>5*1024*1024){wt("Image must be under 5MB","error");return}jn(ut=>({...ut,[R]:Re}));const Je=new FileReader;Je.onload=ut=>U(Et=>({...Et,[R]:ut.target.result})),Je.readAsDataURL(Re)},lr=R=>{jn(Z=>({...Z,[R]:null})),U(Z=>({...Z,[R]:null})),we.current[R]&&(we.current[R].value="")},$s=R=>{Pe(R.target.value),R.target.style.height="auto",R.target.style.height=Math.min(R.target.scrollHeight,120)+"px",Mt(R.target.value,"compose")},gr=(R,Z)=>{Jt(Re=>({...Re,[R]:Z})),Mt(Z,R)};return a.jsxs("div",{className:"cb-dashboard","data-theme":h?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-notif-wrap",ref:_t,children:[a.jsxs("button",{className:"header-notif-btn",onClick:()=>{it(!Nt),Nt||qe()},"aria-label":"Notifications",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),Ge>0&&a.jsx("span",{className:"header-notif-badge",children:Ge>9?"9+":Ge})]}),Nt&&a.jsxs("div",{className:"notif-panel",children:[a.jsxs("div",{className:"notif-panel-header",children:[a.jsx("span",{className:"notif-panel-title",children:"Notifications"}),fe.length>0&&a.jsx("button",{className:"notif-clear-btn",onClick:Be,children:"Clear all"})]}),a.jsx("div",{className:"notif-panel-list",children:fe.length===0?a.jsx("div",{className:"notif-empty",children:"No notifications yet"}):fe.map(R=>a.jsxs("div",{className:`notif-item${R.read?"":" unread"}`,onClick:()=>{if(it(!1),R.type==="buddy_request"||R.type==="buddy_accept")g("/client/core-buddy/buddies");else if((R.type==="like"||R.type==="comment")&&R.postId){if(!J.has(R.postId)){const Z=new Set(J);Z.add(R.postId),be(Z),tt[R.postId]||xs(R.postId)}setTimeout(()=>{const Z=document.getElementById(`post-${R.postId}`);Z&&Z.scrollIntoView({behavior:"smooth",block:"center"})},150)}else R.type==="like"||R.type==="comment"?document.querySelector(".cb-journey-section")?.scrollIntoView({behavior:"smooth"}):R.type==="mention"&&g(`/client/core-buddy/profile/${R.fromId}`)},children:[a.jsx("div",{className:"notif-item-avatar",children:R.fromPhotoURL?a.jsx("img",{src:R.fromPhotoURL,alt:""}):a.jsx("span",{children:(R.fromName||"?")[0]})}),a.jsxs("div",{className:"notif-item-body",children:[a.jsxs("p",{className:"notif-item-text",children:[a.jsx("strong",{children:R.fromName})," ",R.type==="buddy_request"&&"sent you a buddy request",R.type==="buddy_accept"&&"accepted your buddy request",R.type==="like"&&"liked your post",R.type==="comment"&&"commented on your post",R.type==="mention"&&"mentioned you"]}),a.jsx("span",{className:"notif-item-time",children:Up(R.createdAt)})]})]},R.id))})]})]}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:h?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:Ky.map((R,Z)=>{const Re=Z<k;return a.jsx("line",{x1:R.x1,y1:R.y1,x2:R.x2,y2:R.y2,className:`ring-tick ${Re?"elapsed":"remaining"}`,strokeWidth:R.thick?"3":"2"},Z)})}),a.jsxs("div",{className:"cb-ring-center",children:[a.jsxs("div",{className:"cb-ring-logo",onClick:()=>yn.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:nt||"/Logo.webp",alt:nt?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${Qe?" uploading":""}`,children:Qe?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:yn,type:"file",accept:"image/*",onChange:Ss,style:{display:"none"}})]}),!nt&&!Qe&&a.jsx("div",{className:"cb-photo-badge",onClick:()=>yn.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(y.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(y.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(y.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Bp[as].text," ",a.jsx("strong",{children:Bp[as].bold})]},as)]}),a.jsx("div",{className:"cb-stats-row",children:Le.map(R=>{const Z=(R.size==="large",38),Re=2*Math.PI*Z,Je=Re-R.pct/100*Re;return a.jsxs("div",{className:`cb-stat-item${R.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:"cb-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:Z}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:Z,style:{stroke:R.color},strokeDasharray:Re,strokeDashoffset:Je})]}),a.jsx("span",{className:"cb-stat-value",style:{color:R.color},children:R.value})]}),a.jsx("span",{className:"cb-stat-label",children:R.label})]},R.label)})}),a.jsxs("p",{className:"cb-coach-msg",children:[at.main," ",a.jsx("strong",{children:Bn}),"  ",at.sub]}),ct&&a.jsxs("button",{className:"cb-nudge-card",onClick:ct.action||void 0,style:ct.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-ct.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:ct.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:ct.label}),a.jsx("span",{className:"cb-nudge-title",children:ct.message}),ct.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[ct.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[a.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:R=>{Nn(R),g("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:Ue("protein"),color:"#14b8a6"},{label:"C",pct:Ue("carbs"),color:"var(--color-primary)"},{label:"F",pct:Ue("fats"),color:"#eab308"},{label:"Cal",pct:Ue("calories"),color:"#38B6FF"}].map(R=>{const Re=2*Math.PI*38,Je=Re-R.pct/100*Re;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:R.color},strokeDasharray:Re,strokeDashoffset:Je})]}),a.jsx("span",{style:{color:R.color},children:R.label})]},R.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:R=>{Nn(R),g("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[$e," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[te," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-grid-row",children:[a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:R=>{Nn(R),g("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:Vi},(R,Z)=>a.jsx("span",{className:`cb-habit-dot${Z<D?" done":""}`},Z))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[D,"/",Vi," today"]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:R=>{Nn(R),g("/client/personal-bests?mode=corebuddy")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"PBs"}),ye.length>0?a.jsx("div",{className:"cb-pb-preview",children:ye.slice(0,2).map(R=>a.jsxs("div",{className:"cb-pb-entry",children:[a.jsx("span",{className:"cb-pb-name",children:R.name}),a.jsxs("span",{className:"cb-pb-value",children:[R.weight,"kg"]})]},R.name))}):a.jsxs("div",{className:"cb-progress-preview",children:[a.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{children:"Start lifting!"})]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:R=>{Nn(R),g("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),Fe.length>0?a.jsx("div",{className:"cb-lb-preview",children:Fe.map((R,Z)=>{const Re=["#FFD700","#A8B4C0","#CD7F32"][Z],Je=R.name?R.name.split(" ").map(Et=>Et[0]).join("").slice(0,2).toUpperCase():"?",ut=R.id===t?.id;return a.jsxs("div",{className:`cb-lb-entry${ut?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:Re},children:R.photoURL?a.jsx("img",{src:R.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:Je})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:Re},children:["#",Z+1]})]},R.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:R=>{Nn(R),g("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-achievements-section",children:[a.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),a.jsx("div",{className:"cb-badges-scroll",children:Wd.map(R=>{const Z=Pt.includes(R.id);return a.jsx("button",{className:`cb-badge${Z?" unlocked":" locked"}`,onClick:()=>an(R),children:a.jsx("img",{src:R.img,alt:R.name,className:"cb-badge-img"})},R.id)})}),a.jsxs("p",{className:"cb-badges-count",children:[Pt.length,"/",Wd.length," unlocked"]})]}),le&&a.jsx("div",{className:"cb-badge-overlay",onClick:()=>an(null),children:a.jsxs("div",{className:"cb-badge-overlay-content",onClick:R=>R.stopPropagation(),children:[a.jsx("img",{src:le.img,alt:le.name,className:`cb-badge-overlay-img${Pt.includes(le.id)?"":" cb-badge-overlay-img-locked"}`}),a.jsx("p",{className:"cb-badge-overlay-desc",children:le.desc}),Pt.includes(le.id)?a.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"cb-badge-status locked",children:"Locked"}),a.jsx("button",{className:"cb-badge-overlay-close",onClick:()=>an(null),children:"Tap to close"})]})}),a.jsxs("div",{className:"cb-journey-section",children:[a.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:nt?a.jsx("img",{src:nt,alt:""}):a.jsx("span",{children:Hc(t?.name)})}),a.jsxs("div",{className:"journey-compose-body",style:{position:"relative"},children:[a.jsx("textarea",{ref:ge,placeholder:"Share your progress... (use @ to mention)",value:Te,onChange:$s,rows:1,maxLength:500}),Ls&&H==="compose"&&T.length>0&&a.jsx("div",{className:"mention-dropdown",children:T.map(R=>a.jsxs("button",{className:"mention-option",onClick:()=>qn(R,"compose"),children:[a.jsx("div",{className:"mention-option-avatar",children:R.photoURL?a.jsx("img",{src:R.photoURL,alt:""}):a.jsx("span",{children:Hc(R.name)})}),a.jsx("span",{children:R.name})]},R.id))}),Me&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:Me,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:fs,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>_e.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:_e,type:"file",accept:"image/*",onChange:xn,hidden:!0}),(Te.trim()||Xe)&&a.jsx("button",{className:"journey-post-btn",onClick:wn,disabled:xt,children:xt?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),Sn?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):bn.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:bn.map(R=>a.jsxs("div",{id:`post-${R.id}`,className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:R.authorPhotoURL?a.jsx("img",{src:R.authorPhotoURL,alt:""}):a.jsx("span",{children:Hc(R.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:R.authorName}),a.jsx("span",{className:"journey-post-time",children:Up(R.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>Hs(R.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),R.content&&a.jsx("p",{className:"journey-post-content",children:Os(R.content)}),R.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:R.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${At.has(R.id)?" liked":""}`,onClick:()=>Br(R.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:At.has(R.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:R.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${J.has(R.id)?" active":""}`,onClick:()=>Da(R.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:R.commentCount||0})]})]}),J.has(R.id)&&a.jsxs("div",{className:"journey-comments",children:[tt[R.id]?.length>0?tt[R.id].map(Z=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:Z.authorPhotoURL?a.jsx("img",{src:Z.authorPhotoURL,alt:""}):a.jsx("span",{children:Hc(Z.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:Z.authorName}),Z.replyToName&&a.jsxs("span",{className:"journey-comment-reply-tag",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"9 14 4 9 9 4"}),a.jsx("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"})]}),Z.replyToName]}),Z.content&&a.jsx("span",{className:"journey-comment-text",children:Os(Z.content)}),Z.imageURL&&a.jsx("img",{className:"journey-comment-image",src:Z.imageURL,alt:"Comment",loading:"lazy"})]}),a.jsxs("div",{className:"journey-comment-actions-row",children:[a.jsx("span",{className:"journey-comment-time",children:Up(Z.createdAt)}),a.jsx("button",{className:"journey-comment-reply-btn",onClick:()=>Qn(Re=>({...Re,[R.id]:{id:Z.id,authorName:Z.authorName}})),children:"Reply"}),a.jsx("button",{className:"journey-comment-delete-btn",onClick:()=>hn(R.id,Z.id),"aria-label":"Delete comment",children:a.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})]},Z.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),In[R.id]&&a.jsxs("div",{className:"journey-comment-replying",children:[a.jsxs("span",{children:["Replying to ",a.jsx("strong",{children:In[R.id].authorName})]}),a.jsx("button",{onClick:()=>Qn(Z=>({...Z,[R.id]:null})),"aria-label":"Cancel reply",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),Pn[R.id]&&a.jsxs("div",{className:"journey-comment-img-preview",children:[a.jsx("img",{src:Pn[R.id],alt:"Preview"}),a.jsx("button",{onClick:()=>lr(R.id),"aria-label":"Remove image",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("button",{className:"journey-comment-img-btn",onClick:()=>we.current[R.id]?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:Z=>{we.current[R.id]=Z},type:"file",accept:"image/*",onChange:Z=>cs(R.id,Z),hidden:!0}),a.jsx("input",{type:"text",placeholder:"Comment",value:jt[R.id]||"",onChange:Z=>gr(R.id,Z.target.value),onKeyDown:Z=>{Z.key==="Enter"&&Jr(R.id)},maxLength:300}),Ls&&H===R.id&&T.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:T.map(Z=>a.jsxs("button",{className:"mention-option",onClick:()=>qn(Z,R.id),children:[a.jsx("div",{className:"mention-option-avatar",children:Z.photoURL?a.jsx("img",{src:Z.photoURL,alt:""}):a.jsx("span",{children:Hc(Z.name)})}),a.jsx("span",{children:Z.name})]},Z.id))}),a.jsx("button",{onClick:()=>Jr(R.id),disabled:!(jt[R.id]||"").trim()&&!un[R.id]||Zt[R.id],children:Zt[R.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},R.id))})]})]})]}),a.jsx(Aa,{active:"home"}),Xt&&a.jsxs("div",{className:`toast-notification ${Xt.type}`,children:[Xt.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Xt.message]})]})}const zp=new Map;function Bi(){return new Date().toISOString().split("T")[0]}const y2=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],uD={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function hD(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function dD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Vr(),{isDark:l,toggleTheme:u,accent:h}=Ma(),p=er(),[g,y]=x.useState("loading"),[w,k]=x.useState(null),[j,L]=x.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[G,z]=x.useState(null),[O,te]=x.useState(Bi()),[Q,ce]=x.useState({entries:[],water:0}),[je,He]=x.useState({protein:0,carbs:0,fats:0,calories:0}),[ze,I]=x.useState(!1),[S,A]=x.useState(!1),[V,D]=x.useState(()=>{const T=new Date;return{year:T.getFullYear(),month:T.getMonth()}}),[F,M]=x.useState(hD),[We,ft]=x.useState(null),[q,me]=x.useState(null),[De,$e]=x.useState(!1),[ee,P]=x.useState(null),[W,ye]=x.useState(""),[Ne,Fe]=x.useState(!1),[Ie,nt]=x.useState(""),[gt,Qe]=x.useState([]),[qt,yn]=x.useState(!1),[Pt,St]=x.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[le,an]=x.useState(null),[sn,dt]=x.useState("100"),[Ct,lt]=x.useState(0),[st,Qt]=x.useState("weight"),[as,Rt]=x.useState(0),[Xt,ts]=x.useState(null);x.useRef(null);const wt=x.useRef(!1),bn=x.useRef(null),rn=x.useRef(null),Sn=x.useRef(null),de=x.useCallback((T,C="info")=>{ts({message:T,type:C}),setTimeout(()=>ts(null),3e3)},[]);x.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),x.useEffect(()=>{if(!t?.id)return;(async()=>{try{const C=await Ln(Ke(xe,"nutritionTargets",t.id));C.exists()?(k(C.data()),y("dashboard")):y("setup")}catch(C){console.error("Error loading nutrition data:",C),y("setup")}})()},[t?.id]),x.useEffect(()=>{if(!t?.id)return;(async()=>{try{const C=await Ln(Ke(xe,"nutritionLogs",`${t.id}_${O}`));if(C.exists()){const K=C.data();ce({entries:K.entries||[],water:K.water||0})}else ce({entries:[],water:0})}catch(C){console.error("Error loading log:",C),ce({entries:[],water:0})}})()},[t?.id,O]),x.useEffect(()=>{const T=Q.entries.reduce((C,K)=>({protein:C.protein+(K.protein||0),carbs:C.carbs+(K.carbs||0),fats:C.fats+(K.fats||0),calories:C.calories+(K.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});He(T)},[Q.entries]);const Te=async T=>{try{await Fn(Ke(xe,"nutritionLogs",`${t.id}_${O}`),{clientId:t.id,date:O,entries:T.entries,water:T.water,updatedAt:bt.now()})}catch(C){console.error("Error saving nutrition log:",C)}},Pe=O===Bi(),Xe=(T,C)=>new Date(T,C+1,0).getDate(),Oe=(T,C)=>new Date(T,C,1).getDay(),Me=["January","February","March","April","May","June","July","August","September","October","November","December"],Ve=["Su","Mo","Tu","We","Th","Fr","Sa"],xt=()=>{let T=parseFloat(j.weight);j.weightUnit==="lbs"&&(T*=.453592);let C;j.heightUnit==="cm"?C=parseFloat(j.height):C=(parseFloat(j.heightFeet)||0)*30.48+(parseFloat(j.heightInches)||0)*2.54;const K=parseInt(j.age);let re=j.gender==="male"?10*T+6.25*C-5*K+5:10*T+6.25*C-5*K-161;const qe=re*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[j.dailyActivity],Be={low:100,moderate:200,high:300,daily:400},Lt=Math.round(qe+Be[j.trainingFrequency]);let Mt=Lt,qn,Os;switch(j.goal){case"lose":Mt=Lt*(1-{light:.15,moderate:.2,harsh:.25}[j.deficitLevel]),qn=2.2,Os=.3;break;case"build":Mt=Lt*1.1,qn=2,Os=.22;break;default:qn=1.8,Os=.25}Mt=Math.max(Mt,j.gender==="male"?1400:1100);const Ss=Math.round(T*qn),Nn=Math.round(Mt*Os/9),Bn=Math.max(0,Math.round((Mt-Ss*4-Nn*9)/4));z({calories:Math.round(Mt),protein:Ss,carbs:Bn,fats:Nn,bmr:Math.round(re),neat:Math.round(qe),exerciseAdd:Be[j.trainingFrequency],tdee:Math.round(Lt)})},yt=async()=>{if(G)try{const T={clientId:t.id,calories:G.calories,protein:G.protein,carbs:G.carbs,fats:G.fats,waterGoal:8,goal:j.goal,updatedAt:bt.now()};await Fn(Ke(xe,"nutritionTargets",t.id),T),k(T),y("dashboard"),de("Macro targets saved!","success")}catch(T){console.error("Error saving targets:",T),de("Failed to save targets. Please try again.","error")}},At=()=>{const T=j.weight&&parseFloat(j.weight)>0,C=j.age&&parseInt(j.age)>0,K=j.heightUnit==="cm"?j.height&&parseFloat(j.height)>0:j.heightFeet&&parseFloat(j.heightFeet)>0||j.heightInches&&parseFloat(j.heightInches)>0;return T&&C&&K},Wt="nut_favourite_foods",J=()=>{try{return JSON.parse(localStorage.getItem(Wt)||"[]")}catch{return[]}},be=T=>J().some(C=>C.name.toLowerCase()===(T||"").toLowerCase()),tt=T=>{const C=J(),K=C.findIndex(re=>re.name.toLowerCase()===T.name.toLowerCase());K>=0?C.splice(K,1):C.unshift({name:T.name,protein:T.protein,carbs:T.carbs,fats:T.fats,calories:T.calories,serving:T.serving,per100g:T.per100g||null,servingUnit:T.servingUnit||"g",portion:T.portion||null}),localStorage.setItem(Wt,JSON.stringify(C)),Rt(re=>re+1)},It=T=>{const C=[...Q.entries,{...T,meal:F,id:Date.now(),addedAt:new Date().toISOString()}],K={...Q,entries:C};ce(K),Te(K),me(null),an(null),dt("100"),lt(0),Qt("weight"),St({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),de("Food added!","success")},jt=T=>{const C=Q.entries.filter(re=>re.id!==T),K={...Q,entries:C};ce(K),Te(K)},Jt=x.useRef(null),Zt=async()=>{$e(!0);const T=document.querySelector("#barcode-reader");if(!T){$e(!1),de("Scanner container not found.","error");return}if(!Jt.current)try{const K=await Er(()=>import("./quagga.min-BbicSfvA.js").then(re=>re.q),[]);Jt.current=K.default}catch(K){console.error("Failed to load barcode scanner:",K),$e(!1),de("Could not load scanner.","error");return}const C=Jt.current;C.init({inputStream:{type:"LiveStream",target:T,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},K=>{if(K){console.error("Quagga init error:",K),$e(!1),de("Could not access camera. Check permissions.","error");return}C.start(),wt.current=!0}),C.onDetected(K=>{const re=K.codeResult.decodedCodes?.filter(qe=>qe.error!==void 0)?.map(qe=>qe.error)||[];if((re.length>0?re.reduce((qe,Be)=>qe+Be,0)/re.length:1)<.15){const qe=K.codeResult.code;C.offDetected(),P(qe)}})},zt=()=>{const T=Jt.current;wt.current&&T&&(T.stop(),T.offDetected(),wt.current=!1),$e(!1)},In=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,Qn=T=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((T||"").replace(/\s/g,"")),un=T=>{if(!T)return{value:100,unit:"g"};const C=T.toLowerCase().replace(/\s/g,""),K=C.match(/([\d.]+)/),re=K?parseFloat(K[1]):100;return Qn(T)?/cl/.test(C)?{value:re*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(C)&&!/ml/.test(C)?{value:re*1e3,unit:"ml"}:{value:re,unit:"ml"}:{value:re,unit:"g"}},jn=T=>{if(Qn(T.serving_size)||Qn(T.quantity))return"ml";const C=T.product_name||T.product_name_en||"";return In.test(C)?"ml":"g"},Pn=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],U=(T,C)=>{const K=T||"",re=K.match(/\((\d+\.?\d*)\s*g\)/i),Ge=K.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(re&&Ge){const Lt=parseFloat(re[1]);let Mt=Ge[1].replace(/^\d+\s*/,"").trim();if(Mt&&Lt>0)return{label:Mt,weight:Lt}}const qe=K.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(qe){const Lt=parseFloat(qe[1]);let Mt=qe[2].replace(/^\d+\s*/,"").trim();if(Mt&&Lt>0)return{label:Mt,weight:Lt}}const Be=C||"";for(const{pattern:Lt,label:Mt,weight:qn}of Pn)if(Lt.test(Be))return{label:Mt,weight:qn};return null},ge=T=>{const C=T.nutriments||{},K=jn(T),re=un(T.serving_size),Ge=K==="ml"?re.unit==="ml"?re.value:100:re.value,qe=T.product_name||T.product_name_en||"Unknown Product",Be=U(T.serving_size,qe);return{name:qe,brand:T.brands||"",image:T.image_small_url||T.image_url||null,servingSize:T.serving_size||"100g",servingValue:Ge,servingUnit:K,portion:Be,protein:Math.round(C.proteins_100g||C.proteins||0),carbs:Math.round(C.carbohydrates_100g||C.carbohydrates||0),fats:Math.round(C.fat_100g||C.fat||0),calories:Math.round(C["energy-kcal_100g"]||C["energy-kcal"]||(C.energy_100g?C.energy_100g/4.184:0)),per100g:!0}},_e=async T=>{Fe(!0);try{const C=`https://world.openfoodfacts.org/api/v2/product/${T}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,K=await fetch(C);if(!K.ok)throw new Error(`HTTP ${K.status}`);const re=await K.json();if(re.status==="success"||re.status===1||re.product){const Ge=ge(re.product);Ge.calories===0&&Ge.protein===0&&Ge.carbs===0?de("Product found but no nutrition data available.","error"):(an(Ge),Ge.portion?(lt(1),dt(String(Ge.portion.weight)),Qt("portion")):(lt(0),dt(String(Ge.servingValue||100)),Qt("weight")),ye(""))}else de("Product not found. Try search or manual entry.","error")}catch(C){console.error("Barcode lookup error:",C),de("Failed to look up product. Check your connection.","error")}Fe(!1)},we=(T,C,K)=>{const re=T.toLowerCase().trim(),Ge=C.toLowerCase().trim(),qe=K.toLowerCase().trim();let Be=0;return(re===qe||re===qe+"s"||re+"s"===qe)&&(Be+=100),(re.endsWith(" "+qe)||re.endsWith(" "+qe+"s"))&&(Be+=40),(re.startsWith(qe+" ")||re.startsWith(qe+"s "))&&(Be+=15),qe.split(/\s+/).some(Mt=>Ge===Mt||Ge.startsWith(Mt))&&(Be+=30),Be+=Math.max(0,30-re.length),Be},fe=async()=>{if(!Ie.trim())return;bn.current&&bn.current.abort();const T=new AbortController;bn.current=T;const C=Ie.trim().toLowerCase(),K=C.split(/\s+/).filter(Boolean);if(zp.has(C)){Qe(zp.get(C));return}yn(!0);try{const Ge=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Ie.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,qe=await fetch(Ge,{signal:T.signal});if(!qe.ok)throw new Error(`HTTP ${qe.status}`);const Lt=((await qe.json()).products||[]).map(Mt=>ge(Mt)).filter(Mt=>Mt.name!=="Unknown Product"&&(Mt.calories>0||Mt.protein>0)).filter(Mt=>{const qn=(Mt.name+" "+Mt.brand).toLowerCase();return K.every(Os=>qn.includes(Os))}).sort((Mt,qn)=>we(qn.name,qn.brand,C)-we(Mt.name,Mt.brand,C)).slice(0,10);zp.set(C,Lt),Qe(Lt),Lt.length===0&&de("No results found. Try a different search.","info")}catch(re){if(re.name==="AbortError")return;console.error("Search error:",re),de("Search failed. Check your connection.","error")}yn(!1)};x.useEffect(()=>{if(rn.current&&clearTimeout(rn.current),!(!Ie.trim()||q!=="search"||le))return rn.current=setTimeout(()=>{fe()},700),()=>clearTimeout(rn.current)},[Ie]);const rt=()=>{const T={...Q,water:Q.water+1};ce(T),Te(T)},Nt=()=>{if(Q.water<=0)return;const T={...Q,water:Q.water-1};ce(T),Te(T)},it={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},_t=80,vt=2*Math.PI*_t,vn=(T,C,K,re,Ge)=>{const qe=re>0?Math.min(100,Math.round(K/re*100)):0,Be=vt-qe/100*vt,Lt=it[Ge]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:_t}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:_t,style:{stroke:Lt},strokeDasharray:vt,strokeDashoffset:Be})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:Lt},children:Math.round(K)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",re,T==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:Lt},children:C})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:Lt},children:[qe,"%"]})]})};if(x.useEffect(()=>{if(!ee)return;const T=setTimeout(()=>{const C=ee;zt(),P(null),_e(C)},1500);return()=>clearTimeout(T)},[ee]),x.useEffect(()=>()=>{const T=Jt.current;if(wt.current&&T){try{T.stop(),T.offDetected()}catch{}wt.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:j.gender==="male"?"active":"",onClick:()=>{L(T=>({...T,gender:"male"})),z(null)},children:"Male"}),a.jsx("button",{className:j.gender==="female"?"active":"",onClick:()=>{L(T=>({...T,gender:"female"})),z(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:j.age,onChange:T=>{L(C=>({...C,age:T.target.value})),z(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:j.weight,onChange:T=>{L(C=>({...C,weight:T.target.value})),z(null)},placeholder:j.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:j.weightUnit==="kg"?"active":"",onClick:()=>{L(T=>({...T,weightUnit:"kg"})),z(null)},children:"kg"}),a.jsx("button",{className:j.weightUnit==="lbs"?"active":"",onClick:()=>{L(T=>({...T,weightUnit:"lbs"})),z(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[j.heightUnit==="cm"?a.jsx("input",{type:"number",value:j.height,onChange:T=>{L(C=>({...C,height:T.target.value})),z(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:j.heightFeet,onChange:T=>{L(C=>({...C,heightFeet:T.target.value})),z(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:j.heightInches,onChange:T=>{L(C=>({...C,heightInches:T.target.value})),z(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:j.heightUnit==="cm"?"active":"",onClick:()=>{L(T=>({...T,heightUnit:"cm"})),z(null)},children:"cm"}),a.jsx("button",{className:j.heightUnit==="ft"?"active":"",onClick:()=>{L(T=>({...T,heightUnit:"ft"})),z(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:j.dailyActivity,onChange:T=>{L(C=>({...C,dailyActivity:T.target.value})),z(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:j.trainingFrequency,onChange:T=>{L(C=>({...C,trainingFrequency:T.target.value})),z(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:j.goal==="lose"?"active":"",onClick:()=>{L(T=>({...T,goal:"lose"})),z(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:j.goal==="maintain"?"active":"",onClick:()=>{L(T=>({...T,goal:"maintain"})),z(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:j.goal==="build"?"active":"",onClick:()=>{L(T=>({...T,goal:"build"})),z(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),j.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:j.deficitLevel==="light"?"active":"",onClick:()=>{L(T=>({...T,deficitLevel:"light"})),z(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:j.deficitLevel==="moderate"?"active":"",onClick:()=>{L(T=>({...T,deficitLevel:"moderate"})),z(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:j.deficitLevel==="harsh"?"active":"",onClick:()=>{L(T=>({...T,deficitLevel:"harsh"})),z(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:xt,disabled:!At(),children:"Calculate Macros"})]}),G&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[vn("Protein","Protein",G.protein,G.protein,"ring-protein"),vn("Carbs","Carbs",G.carbs,G.carbs,"ring-carbs"),vn("Fats","Fats",G.fats,G.fats,"ring-fats"),vn("Calories","Calories",G.calories,G.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[G.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[G.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",G.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[G.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:yt,children:"Set as My Daily Targets"})]})]}),Xt&&a.jsx("div",{className:`toast-notification ${Xt.type}`,children:Xt.message})]});const or=T=>{const C=new Date(T+"T12:00:00"),K=C.getDay(),re=new Date(C);re.setDate(C.getDate()-(K+6)%7);const Ge=[];for(let qe=0;qe<7;qe++){const Be=new Date(re);Be.setDate(re.getDate()+qe),Ge.push(Be.toISOString().split("T")[0])}return Ge},Es=["M","T","W","T","F","S","S"],Ls=(T,C="search")=>{M(T),C==="scan"?(me("scan"),an(null)):C==="manual"?(me("manual"),St({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):C==="favourites"?me("favourites"):(me("search"),Qe([]),nt(""))},Vn=or(O),H=new Date(O+"T12:00:00"),ue=`${Me[H.getMonth()]} ${H.getFullYear()}`;return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),z(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(O+"T12:00:00");T.setDate(T.getDate()-7);const C=T.toISOString().split("T")[0];te(C)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{I(!ze),D({year:H.getFullYear(),month:H.getMonth()})},children:ue}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(O+"T12:00:00");T.setDate(T.getDate()+7);const C=T.toISOString().split("T")[0];C<=Bi()&&te(C)},"aria-label":"Next week",disabled:Vn[6]>=Bi(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:Vn.map((T,C)=>{const K=new Date(T+"T12:00:00").getDate(),re=T===O,Ge=T>Bi(),qe=T===Bi();return a.jsxs("button",{className:`nut-week-day${re?" selected":""}${qe?" today":""}${Ge?" future":""}`,disabled:Ge,onClick:()=>te(T),children:[a.jsx("span",{className:"nut-week-day-letter",children:Es[C]}),a.jsx("span",{className:"nut-week-day-num",children:K})]},T)})})]}),ze&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>D(T=>{let C=T.month-1,K=T.year;return C<0&&(C=11,K--),{year:K,month:C}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Me[V.month]," ",V.year]}),a.jsx("button",{onClick:()=>D(T=>{let C=T.month+1,K=T.year;return C>11&&(C=0,K++),{year:K,month:C}}),disabled:V.year===new Date().getFullYear()&&V.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Ve.map(T=>a.jsx("span",{children:T},T))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Oe(V.year,V.month))].map((T,C)=>a.jsx("span",{},`e${C}`)),[...Array(Xe(V.year,V.month))].map((T,C)=>{const K=C+1,re=`${V.year}-${String(V.month+1).padStart(2,"0")}-${String(K).padStart(2,"0")}`,Ge=re>Bi(),qe=re===O,Be=re===Bi();return a.jsx("button",{className:`nut-cal-day${qe?" selected":""}${Be?" today":""}${Ge?" future":""}`,disabled:Ge,onClick:()=>{te(re),I(!1)},children:K},K)})]})]}),a.jsxs("div",{className:"nut-rings-row",children:[vn("Protein","Protein",je.protein,w.protein,"ring-protein"),vn("Carbs","Carbs",je.carbs,w.carbs,"ring-carbs"),vn("Fats","Fats",je.fats,w.fats,"ring-fats"),vn("Calories","kCal",je.calories,w.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone",children:a.jsxs("div",{className:"nut-light-content",children:[Pe&&a.jsxs("button",{className:"nut-water-quick",onClick:()=>A(!0),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsxs("span",{className:"nut-water-quick-count",children:[Q.water," / ",w?.waterGoal||8]}),a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:y2.map(T=>{const C=Q.entries.filter(re=>(re.meal||"snacks")===T.key),K=C.reduce((re,Ge)=>({protein:re.protein+(Ge.protein||0),carbs:re.carbs+(Ge.carbs||0),fats:re.fats+(Ge.fats||0),calories:re.calories+(Ge.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${T.key}`,children:uD[T.key]}),a.jsx("span",{className:"nut-meal-card-title",children:T.label}),C.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[K.calories," cal"]}),Pe&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>ft(We===T.key?null:T.key),"aria-label":`Add to ${T.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),C.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,w.protein>0?K.protein/w.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[K.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,w.carbs>0?K.carbs/w.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[K.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,w.fats>0?K.fats/w.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[K.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,w.calories>0?K.calories/w.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:K.calories})]})]}),C.length>0&&a.jsx("div",{className:"nut-log-list",children:C.map(re=>a.jsxs("div",{className:"nut-log-item",children:[a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:re.name}),re.serving&&a.jsx("span",{className:"nut-log-item-serving",children:re.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[re.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[re.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[re.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:re.calories})]}),Pe&&a.jsx("button",{className:"nut-log-delete",onClick:()=>jt(re.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},re.id))}),C.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:Pe?"Tap + to add food":"No entries"})})]},T.key)})})})]})}),We&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>ft(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",y2.find(T=>T.key===We)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const T=We;ft(null),Ls(T,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const T=We;ft(null),Ls(T,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const T=We;ft(null),Ls(T,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const T=We;ft(null),Ls(T,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),S&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>A(!1),children:a.jsxs("div",{className:"nut-water-popup",onClick:T=>T.stopPropagation(),children:[a.jsxs("div",{className:"nut-water-popup-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsx("span",{children:"Water Intake"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>A(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"nut-water-popup-body",children:[a.jsx("div",{className:"nut-water-glasses",children:[...Array(w?.waterGoal||8)].map((T,C)=>a.jsx("div",{className:`nut-water-glass ${C<Q.water?"filled":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:C<Q.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},C))}),a.jsxs("div",{className:"nut-water-popup-count",children:[Q.water," / ",w?.waterGoal||8," glasses"]}),a.jsxs("div",{className:"nut-water-btns",children:[a.jsx("button",{onClick:Nt,disabled:Q.water<=0,children:"-"}),a.jsx("button",{onClick:rt,children:"+"})]})]})]})}),q&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{zt(),P(null),me(null),an(null)},children:a.jsxs("div",{className:"nut-modal",onClick:T=>T.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:q==="scan"?"Scan Barcode":q==="search"?"Search Food":q==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{zt(),P(null),me(null),an(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),q==="scan"&&!le&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),De&&!ee&&a.jsx("div",{className:"nut-scan-line"}),ee&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:ee})]})]}),!De&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:Zt,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),De&&!ee&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:W,onChange:T=>ye(T.target.value),onKeyDown:T=>T.key==="Enter"&&W.trim()&&_e(W.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>W.trim()&&_e(W.trim()),disabled:!W.trim()||Ne,children:Ne?"...":"Look Up"})]})]}),q==="scan"&&le&&(()=>{const T=le.servingUnit||"g",C=le.portion,K=st==="portion"&&C?Ct*C.weight:parseFloat(sn)||0,re=K/100,Ge=T==="ml"?[100,200,250,500]:[50,100,150,200],qe=st==="portion"&&C?`${Ct} ${C.label}${Ct!==1?"s":""} (${Math.round(K)}${T})`:`${Math.round(K)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[le.image&&a.jsx("img",{src:le.image,alt:le.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:le.name}),a.jsx("button",{className:`nut-fav-star confirm${be(le.name)?" active":""}`,onClick:()=>tt({name:le.name,protein:le.protein,carbs:le.carbs,fats:le.fats,calories:le.calories,serving:le.servingSize,per100g:{protein:le.protein,carbs:le.carbs,fats:le.fats,calories:le.calories},servingUnit:le.servingUnit||"g",portion:le.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:be(le.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),le.brand&&a.jsx("p",{className:"nut-product-brand",children:le.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[le.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[le.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[le.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[le.calories," cal"]})]}),C&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:st==="portion"?"active":"",onClick:()=>{Qt("portion"),Ct<1&&lt(1)},children:"Portions"}),a.jsxs("button",{className:st==="weight"?"active":"",onClick:()=>{Qt("weight"),dt(String(Math.round(K)||100))},children:["Custom (",T,")"]})]}),st==="portion"&&C?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Math.max(1,Ct-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Ct}),a.jsxs("span",{className:"nut-stepper-label",children:[C.label,Ct!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(K),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Ct+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:sn,onChange:Be=>dt(Be.target.value),onFocus:Be=>Be.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ge.map(Be=>a.jsxs("button",{className:`nut-quick-btn${sn===String(Be)?" active":""}`,onClick:()=>dt(String(Be)),children:[Be,T]},Be))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(le.protein*re),"p / ",Math.round(le.carbs*re),"c / ",Math.round(le.fats*re),"f / ",Math.round(le.calories*re)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{an(null),me("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>It({name:le.name,protein:Math.round(le.protein*re),carbs:Math.round(le.carbs*re),fats:Math.round(le.fats*re),calories:Math.round(le.calories*re),serving:qe}),children:"Add"})]})]})})(),q==="search"&&!le&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:Sn,value:Ie,onChange:T=>nt(T.target.value),onKeyDown:T=>{T.key==="Enter"&&(clearTimeout(rn.current),fe())},onFocus:()=>setTimeout(()=>Sn.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:fe,disabled:qt,children:qt?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[gt.map((T,C)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{an(T),T.portion?(lt(1),dt(String(T.portion.weight)),Qt("portion")):(lt(0),dt(String(T.servingValue||100)),Qt("weight"))},children:[T.image&&a.jsx("img",{src:T.image,alt:T.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:T.name}),T.brand&&a.jsx("span",{className:"nut-search-item-brand",children:T.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[T.calories," cal  ",T.protein,"p  ",T.carbs,"c  ",T.fats,"f per 100",T.servingUnit||"g"]})]})]},C)),gt.length===0&&Ie&&!qt&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),q==="search"&&le&&(()=>{const T=le.servingUnit||"g",C=le.portion,K=st==="portion"&&C?Ct*C.weight:parseFloat(sn)||0,re=K/100,Ge=T==="ml"?[100,200,250,500]:[50,100,150,200],qe=st==="portion"&&C?`${Ct} ${C.label}${Ct!==1?"s":""} (${Math.round(K)}${T})`:`${Math.round(K)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[le.image&&a.jsx("img",{src:le.image,alt:le.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:le.name}),a.jsx("button",{className:`nut-fav-star confirm${be(le.name)?" active":""}`,onClick:()=>tt({name:le.name,protein:le.protein,carbs:le.carbs,fats:le.fats,calories:le.calories,serving:le.servingSize,per100g:{protein:le.protein,carbs:le.carbs,fats:le.fats,calories:le.calories},servingUnit:le.servingUnit||"g",portion:le.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:be(le.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),le.brand&&a.jsx("p",{className:"nut-product-brand",children:le.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[le.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[le.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[le.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[le.calories," cal"]})]}),C&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:st==="portion"?"active":"",onClick:()=>{Qt("portion"),Ct<1&&lt(1)},children:"Portions"}),a.jsxs("button",{className:st==="weight"?"active":"",onClick:()=>{Qt("weight"),dt(String(Math.round(K)||100))},children:["Custom (",T,")"]})]}),st==="portion"&&C?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Math.max(1,Ct-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Ct}),a.jsxs("span",{className:"nut-stepper-label",children:[C.label,Ct!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(K),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Ct+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:sn,onChange:Be=>dt(Be.target.value),onFocus:Be=>Be.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ge.map(Be=>a.jsxs("button",{className:`nut-quick-btn${sn===String(Be)?" active":""}`,onClick:()=>dt(String(Be)),children:[Be,T]},Be))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(le.protein*re),"p / ",Math.round(le.carbs*re),"c / ",Math.round(le.fats*re),"f / ",Math.round(le.calories*re)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>an(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>It({name:le.name,protein:Math.round(le.protein*re),carbs:Math.round(le.carbs*re),fats:Math.round(le.fats*re),calories:Math.round(le.calories*re),serving:qe}),children:"Add"})]})]})})(),q==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:Pt.name,onChange:T=>St(C=>({...C,name:T.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:Pt.serving,onChange:T=>St(C=>({...C,serving:T.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:Pt.protein,onChange:T=>St(C=>({...C,protein:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:Pt.carbs,onChange:T=>St(C=>({...C,carbs:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:Pt.fats,onChange:T=>St(C=>({...C,fats:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:Pt.calories,onChange:T=>St(C=>({...C,calories:T.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!Pt.name.trim(),onClick:()=>It({name:Pt.name,protein:parseFloat(Pt.protein)||0,carbs:parseFloat(Pt.carbs)||0,fats:parseFloat(Pt.fats)||0,calories:parseFloat(Pt.calories)||0,serving:Pt.serving||""}),children:"Add Food"})]}),q==="favourites"&&!le&&(()=>{const T=J(),C=K=>{if(K.per100g){const re=K.per100g;an({name:K.name,brand:"",image:null,servingSize:K.serving||"100g",servingValue:100,servingUnit:K.servingUnit||"g",portion:K.portion||null,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,per100g:!0}),K.portion?(lt(1),dt(String(K.portion.weight)),Qt("portion")):(lt(0),dt("100"),Qt("weight"))}else It({name:K.name,protein:K.protein,carbs:K.carbs,fats:K.fats,calories:K.calories,serving:K.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:T.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:T.map((K,re)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:Ge=>{Ge.stopPropagation(),tt(K)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>C(K),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:K.name}),a.jsx("span",{className:"nut-recent-item-serving",children:K.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[K.calories," cal"]})]})]},re))})})})(),q==="favourites"&&le&&(()=>{const T=le.servingUnit||"g",C=le.portion,K=st==="portion"&&C?Ct*C.weight:parseFloat(sn)||0,re=K/100,Ge=T==="ml"?[100,200,250,500]:[50,100,150,200],qe=st==="portion"&&C?`${Ct} ${C.label}${Ct!==1?"s":""} (${Math.round(K)}${T})`:`${Math.round(K)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:le.name}),a.jsx("button",{className:`nut-fav-star confirm${be(le.name)?" active":""}`,onClick:()=>tt({name:le.name,protein:le.protein,carbs:le.carbs,fats:le.fats,calories:le.calories,serving:le.servingSize,per100g:{protein:le.protein,carbs:le.carbs,fats:le.fats,calories:le.calories},servingUnit:le.servingUnit||"g",portion:le.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:be(le.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[le.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[le.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[le.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[le.calories," cal"]})]}),C&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:st==="portion"?"active":"",onClick:()=>{Qt("portion"),Ct<1&&lt(1)},children:"Portions"}),a.jsxs("button",{className:st==="weight"?"active":"",onClick:()=>{Qt("weight"),dt(String(Math.round(K)||100))},children:["Custom (",T,")"]})]}),st==="portion"&&C?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Math.max(1,Ct-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Ct}),a.jsxs("span",{className:"nut-stepper-label",children:[C.label,Ct!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(K),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Ct+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:sn,onChange:Be=>dt(Be.target.value),onFocus:Be=>Be.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ge.map(Be=>a.jsxs("button",{className:`nut-quick-btn${sn===String(Be)?" active":""}`,onClick:()=>dt(String(Be)),children:[Be,T]},Be))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(le.protein*re),"p / ",Math.round(le.carbs*re),"c / ",Math.round(le.fats*re),"f / ",Math.round(le.calories*re)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>an(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>It({name:le.name,protein:Math.round(le.protein*re),carbs:Math.round(le.carbs*re),fats:Math.round(le.fats*re),calories:Math.round(le.calories*re),serving:qe}),children:"Add"})]})]})})()]})}),a.jsx(Aa,{active:"nutrition"}),Xt&&a.jsx("div",{className:`toast-notification ${Xt.type}`,children:Xt.message})]})}const b2="/login/assets/randomiser-glq9YJkL.jpg",fD="/login/assets/programme-card-workout-CnNzTYkz.webp",mD="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",pD="/login/assets/mg-arms-BeOQU3wx.jpg",gD=60,Fp=5,yD=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],bD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},vD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},xD={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},qp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Hp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:mD},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],$c=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:pD},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],v2={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},x2=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],$p=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],Nl=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],Wp=[5,10,15,20,30];function wD(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function _D(s){const e=[...s];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function kD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Vr(),{isDark:l,toggleTheme:u,accent:h}=Ma(),{isPremium:p,FREE_RANDOMISER_DURATIONS:g,FREE_RANDOMISER_WEEKLY_LIMIT:y}=Ak(),w=er(),[k,j]=x.useState("menu"),[L,G]=x.useState(["bodyweight"]),[z,O]=x.useState("core"),[te,Q]=x.useState("intermediate"),[ce,je]=x.useState(p?15:5),[He,ze]=x.useState([]),[I,S]=x.useState(!1),A=x.useRef(!1),V=x.useRef([]),[D,F]=x.useState([]),[M,We]=x.useState(2),[ft,q]=x.useState(Nl[1]),[me,De]=x.useState(1),[$e,ee]=x.useState(0),[P,W]=x.useState("work"),[ye,Ne]=x.useState(0),[Fe,Ie]=x.useState(!1),[nt,gt]=x.useState(0),[Qe,qt]=x.useState(null),yn=x.useRef(null);x.useRef(null),x.useRef(null);const[Pt,St]=x.useState(null),le=x.useCallback((Y,ve="info")=>{St({message:Y,type:ve}),setTimeout(()=>St(null),3e3)},[]),[an,sn]=x.useState(null),[dt,Ct]=x.useState(null),[lt,st]=x.useState(0),[Qt,as]=x.useState(0),[Rt,Xt]=x.useState([]),[ts,wt]=x.useState(""),[bn,rn]=x.useState(""),[Sn,de]=x.useState(!1),[Te,Pe]=x.useState(0),[Xe,Oe]=x.useState(!1),[Me,Ve]=x.useState({}),xt=x.useRef(null),yt=x.useRef(null),[At,Wt]=x.useState([]),[J,be]=x.useState(null),[tt,It]=x.useState(0),[jt,Jt]=x.useState(0),[Zt,zt]=x.useState(0),[In,Qn]=x.useState(0),[un,jn]=x.useState(0),[Pn,U]=x.useState(0),[ge,_e]=x.useState({beginner:0,intermediate:0,advanced:0}),we=p?Wp:Wp.filter(Y=>g.includes(Y)),fe=!p&&tt>=y,[rt,Nt]=x.useState(null),[it,_t]=x.useState(""),[vt,vn]=x.useState(!1);x.useEffect(()=>{!i&&(!s||!e)&&w("/")},[s,e,i,w]),x.useEffect(()=>{if(!s||!t)return;(async()=>{try{const ve=Ht(xe,"workoutLogs"),ne=An(ve,cn("clientId","==",t.id)),Ue=(await Tn(ne)).docs.map(hn=>hn.data()),at=Ue.filter(hn=>hn.type!=="programme");Qn(at.length);const ct=at.reduce((hn,cs)=>hn+(cs.duration||0),0);jn(ct);const Ft={beginner:0,intermediate:0,advanced:0};at.forEach(hn=>{hn.level&&Ft[hn.level]!==void 0&&Ft[hn.level]++}),_e(Ft);const xn=new Date,fs=xn.getDay(),wn=fs===0?-6:1-fs,Hs=new Date(xn);Hs.setDate(xn.getDate()+wn),Hs.setHours(0,0,0,0);const Br=Hs.getTime(),xs=Ue.filter(hn=>{const cs=hn.completedAt;return cs?(cs.toDate?cs.toDate().getTime():new Date(cs).getTime())>=Br:!1});It(xs.filter(hn=>hn.type!=="programme").length);let Da=0;if(t)try{const hn=await Ln(Ke(xe,"clientProgrammes",t.id));if(hn.exists()){const cs=hn.data(),lr=cs.templateId;Da=xs.filter(R=>R.type==="programme"&&R.programmeId===lr).length,Nt(lr);const $s=Hp.find(R=>R.id===lr);$s&&_t($s.name);const gr=vD[lr];if(gr){const R=Object.keys(cs.completedSessions||{}).length,Z=gr.duration*gr.daysPerWeek;zt(Z>0?Math.round(R/Z*100):0)}}else Nt(null),_t(""),zt(0)}catch{}Jt(Da);const Jr=at.map(hn=>hn.completedAt).filter(Boolean).map(hn=>hn.toDate?hn.toDate().getTime():new Date(hn).getTime()).sort((hn,cs)=>cs-hn);if(Jr.length===0)U(0);else{const hn=new Set;Jr.forEach(Z=>{const Re=new Date(Z),Je=Re.getDay(),ut=Je===0?-6:1-Je,Et=new Date(Re);Et.setDate(Re.getDate()+ut),Et.setHours(0,0,0,0),hn.add(Et.getTime())});const cs=[...hn].sort((Z,Re)=>Re-Z);let lr=0;const $s=new Date(xn),gr=xn.getDay()===0?-6:1-xn.getDay();$s.setDate(xn.getDate()+gr),$s.setHours(0,0,0,0);let R=$s.getTime();cs.includes(R)||(R-=10080*60*1e3);for(let Z=0;Z<200&&cs.includes(R);Z++)lr++,R-=10080*60*1e3;U(lr)}}catch(ve){console.error("Error loading workout stats:",ve)}finally{vn(!0)}})()},[s,t,k]);const or=()=>{const Y=[];let ve;z==="mix"?ve=["core","upper","lower"]:z==="fullbody"?ve=["upper","lower"]:ve=[z];for(const ne of L)for(const Le of ve)Y.push(`exercises/${ne}/${Le}`);return Y},Es=async()=>{if(A.current){for(;A.current;)await new Promise(Y=>setTimeout(Y,200));return V.current}A.current=!0,S(!0);try{const Y=or(),ve=[];for(const at of Y)try{const ct=Gi(Ki,at),Ft=await g2(ct);ve.push(...Ft.items)}catch{console.warn(`Folder ${at} not found, skipping.`)}if(ve.length===0&&L.includes("bodyweight")&&z==="core")try{const at=Gi(Ki,"core"),ct=await g2(at);ve.push(...ct.items)}catch{console.warn("Legacy core/ folder not found either.")}if(ve.length===0){const at=L.map(Ft=>x2.find(xn=>xn.key===Ft)?.label).join(" + "),ct=$p.find(Ft=>Ft.key===z)?.label;return le(`No exercises found for ${at} / ${ct}. Upload videos to Firebase Storage.`,"error"),A.current=!1,S(!1),[]}const ne=new Set,Le=ve.filter(at=>{const ct=at.name.replace(/\.(mp4|gif)$/i,"");return ne.has(ct)?!1:(ne.add(ct),!0)}),Ue=await Promise.all(Le.map(async at=>{const ct=await Vo(at),Ft=wD(at.name.replace(/\.(mp4|gif)$/i,"")),xn=/\.gif$/i.test(at.name);return{name:Ft,videoUrl:ct,isGif:xn}}));return V.current=Ue,ze(Ue),A.current=!1,S(!1),Ue}catch(Y){console.error("Error loading exercises:",Y);const ve=Y.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${Y.message||Y.code||"Unknown error"}`;return le(ve,"error"),A.current=!1,S(!1),[]}},Ls=async()=>{if(fe)return;j("spinning"),V.current=[];const Y=await Es();if(Y.length===0){j("setup");return}const ve=Nl.find(fs=>fs.key===te);q(ve);const ne=ve.work+ve.rest,Le=ce*60,Ue=Math.floor(Le/ne);let at,ct;Ue<=6?(at=Math.max(3,Math.floor(Ue/2)),ct=Math.floor(Ue/at)):Ue<=12?(at=Math.min(6,Math.floor(Ue/2)),ct=Math.floor(Ue/at)):(at=Math.min(10,Math.floor(Ue/2)),ct=Math.floor(Ue/at)),ct=Math.max(2,ct);const Ft=_D(Y),xn=Ft.slice(0,Math.min(at,Ft.length));F(xn),We(ct),setTimeout(()=>j("preview"),2e3)},Vn=()=>{j("countdown"),gt(3)};x.useEffect(()=>{if(k!=="countdown")return;if(nt<=0){j("workout"),De(1),ee(0),W("work"),Ne(ft.work),Ie(!1),Os();return}qn();const Y=setTimeout(()=>gt(ve=>ve-1),1e3);return()=>clearTimeout(Y)},[nt,k]),x.useEffect(()=>{if(k!=="workout"||Fe)return;if(ye<=0){H();return}ye<=3&&qn();const Y=setTimeout(()=>Ne(ve=>ve-1),1e3);return()=>clearTimeout(Y)},[ye,k,Fe]);const H=()=>{if(P==="work")W("rest"),Ne(ft.rest);else{const Y=$e+1;if(Y>=D.length){const ve=me+1;if(ve>M){j("complete"),ue();return}De(ve),ee(0)}else ee(Y);W("work"),Ne(ft.work),Os()}},ue=async()=>{if(s)try{await ai(Ht(xe,"workoutLogs"),{clientId:t.id,level:te,duration:ce,equipment:L,focus:z,exerciseCount:D.length,rounds:M,exercises:D.map(Y=>Y.name),completedAt:bt.now()}),It(Y=>Y+1),Qn(Y=>Y+1),jn(Y=>Y+ce),_e(Y=>({...Y,[te]:(Y[te]||0)+1}))}catch(Y){console.error("Error saving workout log:",Y)}},T=async(Y,ve,ne)=>{if(!(!t||!ve))try{const Le=t.id,Ue=await Ln(Ke(xe,"coreBuddyPBs",Le)),ct=(Ue.exists()?Ue.data():null)?.exercises||{},Ft=ct[Y];let xn=!1;if(Ft?(ve>(Ft.weight||0)||ve===(Ft.weight||0)&&ne>(Ft.reps||0))&&(xn=!0):xn=!0,xn){const fs={...ct,[Y]:{weight:ve,reps:ne,achievedAt:bt.now()}};await Fn(Ke(xe,"coreBuddyPBs",Le),{clientId:t.id,exercises:fs,updatedAt:bt.now()}),le(`New PB! ${ve}kg  ${ne} reps`,"success"),qn(),await C(Y,ve)}}catch(Le){console.error("Error checking PB:",Le)}},C=async(Y,ve)=>{if(t)try{const ne=await Ln(Ke(xe,"coreBuddyTargets",t.id));if(!ne.exists())return;const Ue=(ne.data().targets||{})[Y];if(!Ue||ve<Ue.targetWeight)return;const at=await Ln(Ke(xe,"coreBuddyAchievements",t.id)),ct=at.exists()?at.data():{clientId:t.id,badges:[],totalVolume:0};if(ct.badges.some(wn=>wn.type==="pb_target"&&wn.exercise===Y&&wn.targetWeight===Ue.targetWeight))return;const xn={type:"pb_target",exercise:Y,group:bD[Y]||"push",targetWeight:Ue.targetWeight,achievedAt:bt.now()},fs=[...ct.badges,xn];await Fn(Ke(xe,"coreBuddyAchievements",t.id),{...ct,badges:fs,updatedAt:bt.now()}),Wt(wn=>[...wn,xn])}catch(ne){console.error("Error checking target badge:",ne)}},K=async Y=>{if(!(!t||Y<=0))try{const ve=await Ln(Ke(xe,"coreBuddyAchievements",t.id)),ne=ve.exists()?ve.data():{clientId:t.id,badges:[],totalVolume:0},Le=ne.totalVolume||0,Ue=Le+Y,at=[];yD.forEach(Ft=>{Ue>=Ft.threshold&&Le<Ft.threshold&&(ne.badges.some(fs=>fs.type==="volume_milestone"&&fs.milestone===Ft.threshold)||at.push({type:"volume_milestone",milestone:Ft.threshold,label:Ft.label,achievedAt:bt.now()}))});const ct=[...ne.badges,...at];await Fn(Ke(xe,"coreBuddyAchievements",t.id),{clientId:t.id,badges:ct,totalVolume:Math.round(Ue),updatedAt:bt.now()}),at.length>0&&Wt(Ft=>[...Ft,...at])}catch(ve){console.error("Error updating volume:",ve)}},re=async Y=>{if(Ct(Y),Y.interval){const Le=[];for(const Ue of Y.exercises){let at=null,ct=!1;if(Ue.storagePath)try{const Ft=Gi(Ki,Ue.storagePath);at=await Vo(Ft),ct=/\.gif$/i.test(Ue.storagePath)}catch{}Le.push({name:Ue.name,videoUrl:at,isGif:ct})}F(Le),We(Y.rounds),q({work:Y.work,rest:Y.rest}),j("preview");return}const ve={};for(const Le of Y.exercises)if(Le.storagePath)try{const Ue=Gi(Ki,Le.storagePath);ve[Le.name]={url:await Vo(Ue),isGif:/\.gif$/i.test(Le.storagePath)}}catch{}Ve(ve);const ne=Y.exercises.map(Le=>({name:Le.name,type:Le.type,targetSets:Le.sets,targetReps:Le.reps||0,targetTime:Le.time||0,sets:[]}));Xt(ne),st(0),as(0),wt(""),rn(""),Oe(!1),de(!1),Pe(0),Wt([]),be(null),j("muscle_workout")},Ge=()=>{const Y=xt.current;Y&&(Y.paused?(Y.play(),Oe(!0)):(Y.pause(),Oe(!1)))};x.useEffect(()=>{if(k!=="muscle_workout"||!Sn||Te<=0){k==="muscle_workout"&&Sn&&Te<=0&&(de(!1),qn());return}return yt.current=setTimeout(()=>Pe(Y=>Y-1),1e3),()=>clearTimeout(yt.current)},[k,Sn,Te]);const qe=async()=>{const Y=Rt[lt];let ve={};if(Y.type==="weighted"){const Ue=parseFloat(ts)||0,at=parseInt(bn)||0;if(at===0){le("Enter your reps","error");return}ve={weight:Ue,reps:at}}else if(Y.type==="reps"){const Ue=parseInt(bn)||0;if(Ue===0){le("Enter your reps","error");return}ve={reps:Ue}}else if(Y.type==="timed"){const Ue=Y.targetTime-Te;ve={time:Math.max(Ue,1)}}const ne=[...Rt];ne[lt]={...Y,sets:[...Y.sets,ve]},Xt(ne),Y.type==="weighted"&&ve.weight>0&&await T(Y.name,ve.weight,ve.reps);const Le=Y.sets.length+1;if(Le<Y.targetSets)as(Le),rn(""),de(!1),Pe(0);else if(lt+1<Rt.length){const Ue=lt+1;st(Ue),as(0),wt(""),rn(""),Oe(!1),de(!1),Pe(0)}else await Be(ne),j("muscle_complete")},Be=async Y=>{if(!(!s||!t))try{const ve=Y.reduce((Le,Ue)=>Le+Ue.sets.reduce((at,ct)=>at+(ct.weight||0)*(ct.reps||0),0),0),ne=Y.reduce((Le,Ue)=>Le+Ue.sets.length,0);await ai(Ht(xe,"workoutLogs"),{clientId:t.id,type:"muscle_group",muscleGroup:an,sessionId:dt?.id,sessionName:dt?.name,exerciseCount:Y.length,totalSets:ne,duration:Math.round(ne*1.5),volume:Math.round(ve),exercises:Y.map(Le=>({name:Le.name,type:Le.type,sets:Le.sets})),completedAt:bt.now()}),ve>0&&await K(ve),At.length>0&&be({badges:[...At]})}catch(ve){console.error("Error saving muscle group workout log:",ve)}},Lt=x.useRef(null),Mt=()=>(Lt.current||(Lt.current=new(window.AudioContext||window.webkitAudioContext)),Lt.current),qn=()=>{try{const Y=Mt(),ve=Y.createOscillator(),ne=Y.createGain();ve.connect(ne),ne.connect(Y.destination),ve.frequency.value=880,ne.gain.value=.3,ve.start(Y.currentTime),ve.stop(Y.currentTime+.15)}catch{}},Os=()=>{try{const Y=Mt(),ve=Y.createOscillator(),ne=Y.createGain();ve.connect(ne),ne.connect(Y.destination),ve.frequency.value=1200,ne.gain.value=.4,ve.start(Y.currentTime),ve.stop(Y.currentTime+.3)}catch{}};x.useEffect(()=>{if(k!=="workout"||P!=="work"||!D[$e]?.isGif)return;const ve=setInterval(()=>{const ne=yn.current;if(!ne)return;const Le=ne.getAttribute("src");ne.removeAttribute("src"),setTimeout(()=>{yn.current&&yn.current.setAttribute("src",Le)},0)},4e3);return()=>clearInterval(ve)},[k,P,$e,me,D]);const Ss=(Y,ve,ne)=>{const Le=Math.round(Y/ve*gD);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:F3.map((Ue,at)=>a.jsx("line",{x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,className:at<Le?`wk-tick-filled ${ne}`:"wk-tick-empty",strokeWidth:Ue.thick?"3":"2"},at))})},Nn=()=>{const Y=D.length*M;return((me-1)*D.length+$e+(P==="rest"?.5:0))/Y},Bn=Pt&&a.jsx("div",{className:`toast-notification ${Pt.type}`,children:Pt.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>w("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(k==="menu")return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>w("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>j("setup"),children:a.jsx("img",{src:b2,alt:"Randomise Workout",className:"wk-hero-bg"})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[Hp.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:Hp.map((Y,ve)=>Y.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>w("/client/core-buddy/programmes",{state:{templateId:Y.id}}),style:{animationDelay:`${ve*.06}s`},children:[a.jsx("img",{src:Y.image,alt:Y.name,className:"wk-prog-img"}),ve===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},Y.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>w("/client/core-buddy/programmes",{state:{templateId:Y.id}}),style:{animationDelay:`${ve*.06}s`},children:[a.jsx("img",{src:fD,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:xD[Y.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[Y.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:Y.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:Y.name.toUpperCase()}),a.jsxs("p",{children:[Y.daysPerWeek,"x per week  ",Y.focus==="fullbody"?"Full Body":Y.focus.charAt(0).toUpperCase()+Y.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),ve===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},Y.id))})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[$c.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:$c.map((Y,ve)=>a.jsx("button",{className:`wk-muscle-hero-card${Y.image?" wk-muscle-thumb":""}`,onClick:()=>{sn(Y.key),j("muscle_sessions")},style:{animationDelay:`${ve*.05}s`},children:Y.image?a.jsx("img",{src:Y.image,alt:Y.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:b2,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:qp[Y.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:Y.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:Y.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[v2[Y.key]?.length||0," sessions"]})]})]})]})},Y.key))})]}),a.jsx(Aa,{active:"workouts"}),Bn]});if(k==="setup"){const Y=$p.find(ne=>ne.key===z)?.label||z,ve=Nl.find(ne=>ne.key===te)?.label||te;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>j("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsx("div",{className:"wk-stats-row",children:[{label:"Total",value:`${In}`,pct:In>0?Math.min(Math.round(In/100*100),100):0,color:"#14b8a6",size:"normal"},{label:"This Week",value:`${tt}/${Fp}`,pct:Math.round(Math.min(tt,Fp)/Fp*100),color:"var(--color-primary)",size:"large"},{label:"Wk Streak",value:`${Pn}`,pct:Pn>0?Math.min(Math.round(Pn/12*100),100):0,color:"#38B6FF",size:"normal"}].map(ne=>{const Ue=2*Math.PI*38,at=Ue-ne.pct/100*Ue;return a.jsxs("div",{className:`wk-stat-item${ne.size==="large"?" wk-stat-large":""}`,children:[a.jsxs("div",{className:"wk-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wk-stat-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"wk-stat-fill",cx:"50",cy:"50",r:38,style:{stroke:ne.color},strokeDasharray:Ue,strokeDashoffset:at})]}),a.jsx("span",{className:"wk-stat-value",style:{color:ne.color},children:ne.value})]}),a.jsx("span",{className:"wk-stat-label",children:ne.label})]},ne.label)})}),a.jsxs("div",{className:"wk-setup-flow",children:[a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:$p.map(ne=>a.jsxs("button",{className:`wk-equip-btn${z===ne.key?" active":""}${ne.key==="mix"?" wk-mix-btn":""}`,onClick:()=>O(ne.key),children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:ne.icon})}),a.jsx("span",{children:ne.label})]},ne.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:Nl.map(ne=>a.jsxs("button",{className:`wk-level-card wk-level-${ne.key}${te===ne.key?" active":""}`,onClick:()=>Q(ne.key),children:[a.jsx("span",{className:"wk-level-name",children:ne.label}),a.jsx("span",{className:"wk-level-desc",children:ne.desc})]},ne.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:Wp.map(ne=>{const Le=!we.includes(ne);return a.jsxs("button",{className:`wk-time-btn${ce===ne?" active":""}${Le?" locked":""}`,onClick:()=>!Le&&je(ne),disabled:Le,children:[a.jsx("span",{className:"wk-time-num",children:ne}),a.jsx("span",{className:"wk-time-unit",children:Le?a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}):"min"})]},ne)})})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:x2.map(ne=>{const Le=L.includes(ne.key);return a.jsxs("button",{className:`wk-equip-btn${Le?" active":""}`,onClick:()=>{G(Ue=>Le&&Ue.length===1?Ue:Le?Ue.filter(at=>at!==ne.key):[...Ue,ne.key])},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:ne.icon})}),a.jsx("span",{children:ne.label})]},ne.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[Y,"  ",ve,"  ",ce," min"]})})]})]}),a.jsxs("div",{className:"wk-go-sticky",children:[fe&&a.jsx("p",{className:"wk-free-limit-msg",children:"You've used your free workout this week. Upgrade for unlimited access."}),a.jsx("button",{className:"wk-randomise-btn",onClick:Ls,disabled:I||fe,children:I?"Loading exercises...":fe?"Limit Reached":"Randomise Workout"})]}),Bn]})}if(k==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:au.map((Y,ve)=>a.jsx("line",{x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,className:"wk-spin-tick",strokeWidth:Y.thick?"3.5":"2",style:{animationDelay:`${ve*.03}s`}},ve))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),Bn]});if(k==="preview"){const Y=dt?.interval?{work:dt.work,rest:dt.rest}:Nl.find(ne=>ne.key===te),ve=D.length*M*(Y.work+Y.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>j(dt?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[dt?.interval&&a.jsx("h2",{className:"mg-preview-title",children:dt.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:D.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:M}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(ve/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[Y.work,"/",Y.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:D.map((ne,Le)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${Le*.06}s`},onClick:()=>qt(ne),children:[a.jsx("span",{className:"wk-preview-num",children:Le+1}),a.jsx("div",{className:"wk-preview-thumb",children:ne.isGif?a.jsx("img",{src:ne.videoUrl,alt:ne.name,loading:"lazy"}):a.jsx("video",{src:`${ne.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:ne.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},Le))}),Qe&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>qt(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:ne=>ne.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>qt(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Qe.isGif?a.jsx("img",{src:Qe.videoUrl,alt:Qe.name}):a.jsx("video",{src:Qe.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Qe.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!dt?.interval&&a.jsxs("button",{className:"wk-btn-secondary",onClick:()=>Ls(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),a.jsx("button",{className:"wk-btn-primary",onClick:Vn,children:"Start Workout"})]})]})]})}if(k==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:nt}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(k==="workout"){const Y=D[$e],ve=P==="work"?ft.work:ft.rest,ne=P==="rest"?$e+1<D.length?D[$e+1]:me<M?D[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"wk-video-container",children:P==="work"?Y.isGif?a.jsx("img",{ref:yn,className:"wk-video",src:Y.videoUrl,alt:Y.name},Y.videoUrl):a.jsx("video",{className:"wk-video",src:Y.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},Y.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),ne&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",ne.name]})]})}),a.jsx("div",{className:"wk-back-row",children:a.jsxs("button",{className:"wk-back-btn",onClick:()=>{confirm("Leave workout?")&&j("menu")},children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[$e+1," / ",D.length]}),a.jsx("h2",{className:"wk-exercise-name",children:Y.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",me," of ",M]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[Ss(ye,ve,P==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:ye}),a.jsx("span",{className:`wk-timer-phase ${P}`,children:P==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&j("menu")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>Ie(!Fe),children:Fe?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{Ne(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${Nn()*100}%`}})})]})}if(k==="complete"){const Y=Nl.find(ne=>ne.key===te),ve=D.length*M*(Y.work+Y.rest);return a.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:au.map((ne,Le)=>a.jsx("line",{x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,className:"wk-tick-complete",strokeWidth:ne.thick?"3.5":"2",style:{animationDelay:`${Le*.02}s`}},Le))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(ve/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:D.length*M}),a.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:M}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{Ct(null),sn(null),j("menu")},children:"Done"})})]})})}if(k==="muscle_sessions"){const Y=$c.find(ne=>ne.key===an),ve=v2[an]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>j("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:qp[an]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:Y?.icon})})}),a.jsxs("h2",{children:[Y?.label," Workouts"]}),a.jsxs("p",{children:[ve.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:ve.map((ne,Le)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{Ct(ne),j("muscle_overview")},style:{animationDelay:`${Le*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:ne.name}),a.jsx("p",{children:ne.desc}),a.jsx("div",{className:"mg-session-meta",children:ne.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[ne.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[ne.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[ne.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const Ue=ne.exercises.map(Ft=>Ft.sets||0),at=Math.min(...Ue),ct=Math.max(...Ue);return at===ct?`${at} sets each`:`${at}-${ct} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},ne.id))})]}),Bn]})}if(k==="muscle_overview"){const Y=dt;if(!Y)return null;const ve=$c.find(ne=>ne.key===an);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>j("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:{background:qp[an]},children:a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:ve?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:Y.name}),Y.level&&a.jsx("span",{className:"mg-overview-level",children:Y.level})]}),a.jsx("p",{className:"mg-overview-desc",children:Y.desc})]}),Y.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:Y.overview})]}),Y.tips&&Y.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:Y.tips.map((ne,Le)=>a.jsx("li",{children:ne},Le))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",Y.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:Y.exercises.map((ne,Le)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:Le+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:ne.name}),Y.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[Y.work,"s work / ",Y.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[ne.sets," sets  ",ne.reps?`${ne.reps} reps`:`${ne.time}s`,ne.type==="weighted"&&"  weighted"]})]})]},Le))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>re(Y),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),Bn]})}if(k==="muscle_workout"){const Y=dt;if(!Y)return null;const ve=Y.exercises[lt],ne=Rt[lt];if(!ve||!ne)return null;const Le=ne.sets.length,Ue=Y.exercises.length,at=Y.exercises.reduce((wn,Hs)=>wn+(Hs.sets||0),0),Ft=Rt.reduce((wn,Hs)=>wn+Hs.sets.length,0)/at*100,xn=Me[ve.name];ve.type==="timed"&&Te===0&&!Sn&&Le===Qt&&setTimeout(()=>Pe(ve.time),0);const fs=Le+1<ve.sets?"Log Set":lt+1<Ue?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Ft}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&j("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",lt+1,"/",Ue]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[xn?a.jsxs("div",{className:"mg-video-container",onClick:Ge,children:[xn.isGif?a.jsx("img",{className:"mg-video",src:xn.url,alt:ve.name}):a.jsx("video",{ref:xt,className:"mg-video",src:xn.url,loop:!0,muted:!0,playsInline:!0},ve.name),!Xe&&!xn.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:ve.name}),a.jsx("span",{className:`mg-ex-type-badge ${ve.type}`,children:ve.type==="weighted"?"Weight + Reps":ve.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",Le+1," of ",ve.sets]}),ve.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",ve.reps," reps"]}),ve.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",ve.time,"s"]})]}),ve.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:ts,onChange:wn=>wt(wn.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:bn,onChange:wn=>rn(wn.target.value),placeholder:"0"})]})]}),ve.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:bn,onChange:wn=>rn(wn.target.value),placeholder:"0"})]})}),ve.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[Te,"s"]})}),Sn?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>de(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{Te===0&&Pe(ve.time),de(!0)},children:Te<ve.time&&Te>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:qe,children:fs}),ne.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:ne.sets.map((wn,Hs)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",Hs+1,": ",wn.weight!=null?`${wn.weight}kg  ${wn.reps}`:wn.reps!=null?`${wn.reps} reps`:`${wn.time}s`]})]},Hs))})]})]}),Bn]})}if(k==="muscle_complete"){const Y=Rt.reduce((Le,Ue)=>Le+Ue.sets.length,0),ve=Rt.reduce((Le,Ue)=>Le+Ue.sets.reduce((at,ct)=>at+(ct.weight||0)*(ct.reps||0),0),0),ne=$c.find(Le=>Le.key===an)?.label||"";return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:au.map((Le,Ue)=>a.jsx("line",{x1:Le.x1,y1:Le.y1,x2:Le.x2,y2:Le.y2,className:"wk-tick-complete",strokeWidth:Le.thick?"3.5":"2",style:{animationDelay:`${Ue*.02}s`}},Ue))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsxs("h2",{className:"wk-complete-title",children:[ne," Complete!"]}),a.jsx("p",{className:"mg-complete-session-name",children:dt?.name}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Rt.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Y}),a.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),ve>0&&a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.round(ve).toLocaleString()}),a.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{Ct(null),sn(null),be(null),j("menu")},children:"Done"})})]}),J&&a.jsx("div",{className:"mg-badge-celebration",onClick:()=>be(null),children:a.jsxs("div",{className:"mg-badge-celebration-card",children:[a.jsx("div",{className:"mg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),a.jsx("h3",{className:"mg-badge-celebration-title",children:J.badges.length===1?"Badge Earned!":`${J.badges.length} Badges Earned!`}),a.jsx("div",{className:"mg-badge-celebration-list",children:J.badges.map((Le,Ue)=>a.jsx("div",{className:"mg-badge-celebration-item",children:Le.type==="pb_target"?`${Le.exercise}  ${Le.targetWeight}kg`:Le.label},Ue))}),a.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const TD=60,jD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},ED=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],w2=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function ad(s,e,t){const i=s.baseReps?s.baseReps+(e-1)*(t.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(t.timeProg||0):void 0;return{sets:s.sets,reps:i,time:l}}const SD={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function ND(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Vr(),{isDark:l,toggleTheme:u,accent:h}=Ma(),p=er(),g=fa(),[y,w]=x.useState("loading"),[k,j]=x.useState(null),L=x.useRef(!1),[G,z]=x.useState(null),[O,te]=x.useState(1),[Q,ce]=x.useState(0),[je,He]=x.useState(0),[ze,I]=x.useState(0),[S,A]=x.useState([]),[V,D]=x.useState(""),[F,M]=x.useState(""),[We,ft]=x.useState(!1),[q,me]=x.useState(0),De=x.useRef(null),[$e,ee]=x.useState({}),[P,W]=x.useState(!1),ye=x.useRef(null),[Ne,Fe]=x.useState(null),[Ie,nt]=x.useState([]);x.useEffect(()=>{window.scrollTo(0,0)},[y]);const[gt,Qe]=x.useState(null),qt=x.useCallback((de,Te="info")=>{Qe({message:de,type:Te}),setTimeout(()=>Qe(null),4e3)},[]),yn=x.useRef(null),Pt=()=>(yn.current||(yn.current=new(window.AudioContext||window.webkitAudioContext)),yn.current),St=()=>{try{const de=Pt(),Te=de.createOscillator(),Pe=de.createGain();Te.connect(Pe),Pe.connect(de.destination),Te.frequency.value=1200,Pe.gain.value=.4,Te.start(de.currentTime),Te.stop(de.currentTime+.3)}catch{}};x.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),x.useEffect(()=>{if(!t)return;(async()=>{try{const Te=Ke(xe,"clientProgrammes",t.id),Pe=await Ln(Te);Pe.exists()?(z(Pe.data()),w("dashboard")):g.state?.templateId?w("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(Te){console.error("Error loading programme:",Te),p("/client/core-buddy/workouts",{replace:!0})}})()},[t]),x.useEffect(()=>{if(L.current||y==="loading")return;const de=g.state?.templateId;if(!de)return;const Te=w2.find(Pe=>Pe.id===de);Te&&(L.current=!0,j(Te),w("overview"))},[y,g.state]),x.useEffect(()=>{if(!We||q<=0){We&&q<=0&&(ft(!1),St());return}return De.current=setTimeout(()=>me(de=>de-1),1e3),()=>clearTimeout(De.current)},[We,q]);const le=async de=>{if(t)try{await Fn(Ke(xe,"clientProgrammes",t.id),de),z(de)}catch(Te){console.error("Error saving programme:",Te),qt("Failed to save. Check Firestore rules for clientProgrammes.","error")}},an=async de=>{const Te={templateId:de.id,startDate:bt.now(),completedSessions:{}};await le(Te),w("dashboard")},sn=async()=>{if(t)try{await dr(Ke(xe,"clientProgrammes",t.id)),z(null),w("browse")}catch(de){console.error("Error quitting programme:",de)}},dt=()=>G?w2.find(de=>de.id===G.templateId):null,Ct=()=>{if(!G?.startDate)return 1;const de=G.startDate.toDate?G.startDate.toDate():new Date(G.startDate),Pe=new Date-de,Xe=Math.floor(Pe/(1e3*60*60*24));return Math.floor(Xe/7)+1},lt=()=>{if(!G)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const de=G.completedSessions||{},Te=Object.keys(de).length,Pe=dt();if(!Pe)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Xe=Pe.duration*Pe.daysPerWeek,Oe=Ct(),Me=Math.min(Oe,Pe.duration);let Ve=0;for(let yt=0;yt<Pe.daysPerWeek;yt++)de[`w${Me}d${yt}`]&&Ve++;if(Te>=Xe)return{currentWeek:Pe.duration,completedThisWeek:Pe.daysPerWeek,nextDay:-1,totalCompleted:Te,totalSessions:Xe,complete:!0};if(Oe>Pe.duration)return{currentWeek:Pe.duration,completedThisWeek:Ve,nextDay:-1,totalCompleted:Te,totalSessions:Xe,complete:!0};let xt=-1;for(let yt=0;yt<Pe.daysPerWeek;yt++)if(!de[`w${Me}d${yt}`]){xt=yt;break}return{currentWeek:Me,completedThisWeek:Ve,nextDay:xt,nextWeek:Me,totalCompleted:Te,totalSessions:Xe}},st=de=>{const Te=Ct();return de<Te},Qt=(de,Te,Pe)=>{if(!G||de<=1)return null;const Xe=`w${de-1}d${Te}`,Oe=G.completedSessions?.[Xe];if(!Oe)return null;const Me=Oe.exercises?.find(Ve=>Ve.name===Pe);return Me?.sets?.length?Me.sets[Me.sets.length-1]:null},as=(de,Te)=>{const Pe=dt();if(!Pe)return;te(de),ce(Te),He(0),I(0),A([]),M(""),ft(!1),me(0),W(!1),ee({});const Xe=Pe.days[Te],Oe=Xe.exercises.map(yt=>{const At=ad(yt,de,Pe);return{name:yt.name,type:yt.type,pbKey:yt.pbKey,targetSets:At.sets,targetReps:At.reps,targetTime:At.time,sets:[]}});A(Oe);const Me=Xe.exercises[0],Ve=Qt(de,Te,Me.name);Ve?.weight&&Me.type==="weighted"?D(String(Ve.weight)):D(""),(async()=>{const yt={};for(const At of Xe.exercises)if(At.storagePath)try{const Wt=Gi(Ki,At.storagePath),J=await Vo(Wt);yt[At.name]={url:J,isGif:/\.gif$/i.test(At.storagePath)}}catch(Wt){console.warn(`Video not found for ${At.name}:`,Wt)}ee(yt)})(),w("session")},Rt=async()=>{dt();const de=S[je];if(!de)return;let Te={};if(de.type==="weighted"){const Oe=parseFloat(V)||0,Me=parseInt(F)||0;if(Me===0){qt("Enter your reps","error");return}Te={weight:Oe,reps:Me}}else if(de.type==="reps"){const Oe=parseInt(F)||0;if(Oe===0){qt("Enter your reps","error");return}Te={reps:Oe}}else if(de.type==="timed"){const Oe=de.targetTime-q;Te={time:Math.max(Oe,1)}}const Pe=[...S];Pe[je]={...de,sets:[...de.sets,Te]},A(Pe),de.type==="weighted"&&Te.weight>0&&await wt(de.name,Te.weight,Te.reps);const Xe=de.sets.length+1;if(Xe<de.targetSets)I(Xe),D(Te.weight?String(Te.weight):""),M(""),ft(!1),me(0);else if(je+1<S.length){const Oe=je+1;He(Oe),I(0),W(!1);const Ve=dt()?.days[Q]?.exercises[Oe],xt=Qt(O,Q,Ve?.name);xt?.weight&&Ve?.type==="weighted"?D(String(xt.weight)):D(""),M(""),ft(!1),me(0)}else await Xt(Pe)},Xt=async de=>{if(!G||!t)return;const Te=`w${O}d${Q}`,Pe={...G.completedSessions,[Te]:{completedAt:new Date().toISOString(),exercises:de.map(Me=>({name:Me.name,type:Me.type,sets:Me.sets}))}},Xe={...G,completedSessions:Pe};await le(Xe);const Oe=de.reduce((Me,Ve)=>Me+Ve.sets.reduce((xt,yt)=>xt+(yt.weight||0)*(yt.reps||0),0),0);Oe>0&&await ts(Oe);try{const Me=dt();await ai(Ht(xe,"workoutLogs"),{clientId:t.id,type:"programme",programmeId:Me?.id,programmeName:Me?.name,week:O,day:Q+1,exerciseCount:de.length,duration:Math.round(de.reduce((Ve,xt)=>Ve+xt.sets.length*1.5,0)),volume:Math.round(Oe),completedAt:bt.now()})}catch(Me){console.error("Error saving workout log:",Me)}Ie.length>0&&(Fe({badges:[...Ie]}),nt([])),w("sessionComplete")},ts=async de=>{if(t)try{const Te=await Ln(Ke(xe,"coreBuddyAchievements",t.id)),Pe=Te.exists()?Te.data():{clientId:t.id,badges:[],totalVolume:0},Xe=Pe.totalVolume||0,Oe=Xe+de,Me=[];ED.forEach(xt=>{Oe>=xt.threshold&&Xe<xt.threshold&&(Pe.badges.some(At=>At.type==="volume_milestone"&&At.milestone===xt.threshold)||Me.push({type:"volume_milestone",milestone:xt.threshold,label:xt.label,achievedAt:bt.now()}))});const Ve=[...Pe.badges,...Me];await Fn(Ke(xe,"coreBuddyAchievements",t.id),{clientId:t.id,badges:Ve,totalVolume:Math.round(Oe),updatedAt:bt.now()}),Me.length>0&&nt(xt=>[...xt,...Me])}catch(Te){console.error("Error updating volume:",Te)}},wt=async(de,Te,Pe)=>{if(t)try{const Xe=t.id,Oe=await Ln(Ke(xe,"coreBuddyPBs",Xe)),Ve=(Oe.exists()?Oe.data():null)?.exercises||{},xt=Ve[de];let yt=!1;if(xt?(Te>(xt.weight||0)||Te===(xt.weight||0)&&Pe>(xt.reps||0))&&(yt=!0):yt=!0,yt){const At={...Ve,[de]:{weight:Te,reps:Pe,achievedAt:bt.now()}};await Fn(Ke(xe,"coreBuddyPBs",Xe),{clientId:t.id,exercises:At,updatedAt:bt.now()}),qt(`New PB! ${Te}kg  ${Pe} reps`,"success"),St(),await bn(de,Te)}}catch(Xe){console.error("Error checking PB:",Xe)}},bn=async(de,Te)=>{if(t)try{const Pe=await Ln(Ke(xe,"coreBuddyTargets",t.id));if(!Pe.exists())return;const Oe=(Pe.data().targets||{})[de];if(!Oe||Te<Oe.targetWeight)return;const Me=await Ln(Ke(xe,"coreBuddyAchievements",t.id)),Ve=Me.exists()?Me.data():{clientId:t.id,badges:[],totalVolume:0};if(Ve.badges.some(Wt=>Wt.type==="pb_target"&&Wt.exercise===de&&Wt.targetWeight===Oe.targetWeight))return;const yt={type:"pb_target",exercise:de,group:jD[de]||"push",targetWeight:Oe.targetWeight,achievedAt:bt.now()},At=[...Ve.badges,yt];await Fn(Ke(xe,"coreBuddyAchievements",t.id),{...Ve,badges:At,updatedAt:bt.now()}),nt(Wt=>[...Wt,yt])}catch(Pe){console.error("Error checking target badge:",Pe)}},rn=gt&&a.jsxs("div",{className:`toast-notification ${gt.type}`,children:[gt.type==="success"&&a.jsx("span",{children:" "}),gt.message]}),Sn=(de,Te)=>a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:Te,"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||y==="loading")return a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&k){const de=k;return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[Sn(de.name,()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-overview-hero",children:[a.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:SD[de.focus]})}),a.jsx("h2",{className:"pg-overview-name",children:de.name}),a.jsx("p",{className:"pg-overview-desc",children:de.description}),a.jsxs("div",{className:"pg-overview-stats",children:[a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:de.duration}),a.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:de.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:de.duration*de.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),a.jsx("div",{className:"pg-overview-days",children:de.days.map((Te,Pe)=>a.jsxs("div",{className:"pg-day-card",children:[a.jsxs("div",{className:"pg-day-header",children:[a.jsx("span",{className:"pg-day-name",children:Te.name}),a.jsx("span",{className:"pg-day-label",children:Te.label})]}),a.jsx("div",{className:"pg-day-exercises",children:Te.exercises.map((Xe,Oe)=>{const Me=ad(Xe,1,de);return a.jsxs("div",{className:"pg-day-ex",children:[a.jsx("span",{className:"pg-day-ex-name",children:Xe.name}),a.jsx("span",{className:"pg-day-ex-target",children:Xe.type==="timed"?`${Me.sets}${Me.time}s`:`${Me.sets}${Me.reps}`}),a.jsx("span",{className:`pg-day-ex-badge pg-badge-${Xe.type}`,children:Xe.type==="weighted"?"WT":Xe.type==="timed"?"TMR":"BW"})]},Oe)})})]},Pe))}),a.jsxs("div",{className:"pg-overview-note",children:[a.jsx("strong",{children:"Progressive Overload:"})," +",de.repProg," reps/week",de.timeProg?`, +${de.timeProg}s/week for timed`:""]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>an(de),children:"Start Programme"})]}),rn]})}if(y==="dashboard"){const de=dt();if(!de)return w("browse"),null;const Te=lt(),Pe=G?.completedSessions||{},Xe=Te.totalSessions?Math.round(Te.totalCompleted/Te.totalSessions*100):0;return Math.round(Te.totalCompleted/(Te.totalSessions||1)*TD),a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[Sn("Programme",()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-dash-hero",children:[a.jsxs("div",{className:"pg-dash-ring-wrap",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"pg-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"pg-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-Xe/100*2*Math.PI*80})]}),a.jsxs("div",{className:"pg-ring-center",children:[a.jsxs("span",{className:"pg-ring-pct",children:[Xe,"%"]}),a.jsx("span",{className:"pg-ring-label",children:"complete"})]})]}),a.jsx("h2",{className:"pg-dash-name",children:de.name}),a.jsxs("div",{className:"pg-dash-progress-text",children:[a.jsxs("span",{className:"pg-dash-pct",children:[Xe,"%"]}),a.jsxs("span",{className:"pg-dash-week",children:["Week ",Te.currentWeek," of ",de.duration]})]})]}),a.jsx("div",{className:"pg-weeks",children:Array.from({length:de.duration},(Oe,Me)=>{const Ve=Me+1,xt=st(Ve);return a.jsxs("div",{className:`pg-week-row${Ve===Te.currentWeek?" pg-week-current":""}`,children:[a.jsxs("span",{className:"pg-week-label",children:["W",Ve]}),a.jsx("div",{className:"pg-week-days",children:de.days.map((yt,At)=>{const Wt=`w${Ve}d${At}`,J=!!Pe[Wt],be=!J&&xt,tt=!J&&!be&&Ve===Te.currentWeek&&!Te.complete;return a.jsx("button",{className:`pg-day-dot${J?" done":""}${be?" missed":""}${tt?" next":""}`,disabled:!tt,onClick:()=>{tt&&as(Ve,At)},children:J?a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}):be?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsx("span",{children:yt.name.replace("Day ","")})},At)})})]},Me)})}),!Te.complete&&(()=>{const Oe=de.days.map((Me,Ve)=>({day:Me,d:Ve})).filter(({d:Me})=>!Pe[`w${Te.currentWeek}d${Me}`]);return Oe.length===0?null:a.jsxs("div",{className:"pg-next-session",children:[a.jsx("h3",{children:Oe.length===de.daysPerWeek?"Choose a Session":"Remaining Sessions"}),a.jsxs("p",{className:"pg-next-info",children:["Week ",Te.currentWeek,"  ",Oe.length," session",Oe.length!==1?"s":""," left this week"]}),Oe.map(({day:Me,d:Ve})=>a.jsxs("div",{className:"pg-available-session",children:[a.jsxs("div",{className:"pg-next-exercises",children:[a.jsxs("span",{className:"pg-avail-day-label",children:[Me.name,": ",Me.label]}),Me.exercises.map((xt,yt)=>{const At=ad(xt,Te.currentWeek,de);return a.jsxs("div",{className:"pg-next-ex",children:[a.jsx("span",{className:"pg-next-ex-name",children:xt.name}),a.jsx("span",{className:"pg-next-ex-target",children:xt.type==="timed"?`${At.sets}${At.time}s`:`${At.sets}${At.reps}`})]},yt)})]}),a.jsxs("button",{className:"pg-start-btn",onClick:()=>as(Te.currentWeek,Ve),children:["Start ",Me.name]})]},Ve))]})})(),Te.complete&&a.jsxs("div",{className:"pg-complete-msg",children:[a.jsx("h3",{children:"Programme Complete! "}),a.jsxs("p",{children:["You finished all ",Te.totalSessions," sessions."]}),a.jsx("button",{className:"pg-start-btn",onClick:sn,children:"Choose New Programme"})]}),a.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&sn()},children:"Quit Programme"})]}),a.jsx(Aa,{active:"workouts"}),rn]})}if(y==="session"){const de=dt();if(!de)return null;const Te=de.days[Q],Pe=Te.exercises[je],Xe=ad(Pe,O,de),Oe=S[je],Me=Oe?.sets?.length||0,Ve=Te.exercises.length,xt=(je+Me/Xe.sets)/Ve,yt=$e[Pe.name],At=Qt(O,Q,Pe.name);Pe.type==="timed"&&q===0&&!We&&Me===ze&&setTimeout(()=>me(Xe.time),0);const Wt=()=>{yt?.isGif?W(!P):ye.current&&(P?ye.current.pause():ye.current.play(),W(!P))};return a.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"pg-session-progress",children:a.jsx("div",{className:"pg-session-progress-fill",style:{width:`${xt*100}%`}})}),a.jsxs("div",{className:"pg-session-header",children:[a.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&w("dashboard")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),a.jsxs("div",{className:"pg-session-title",children:[a.jsxs("span",{className:"pg-session-counter",children:[je+1," / ",Ve]}),a.jsxs("span",{className:"pg-session-week",children:["Week ",O,"  ",Te.name]})]})]}),yt&&a.jsxs("div",{className:"pg-video-container",onClick:Wt,children:[yt.isGif?a.jsx("img",{className:"pg-video",src:yt.url,alt:Pe.name}):a.jsx("video",{ref:ye,className:"pg-video",src:yt.url,loop:!0,muted:!0,playsInline:!0},Pe.name),!P&&a.jsxs("div",{className:"pg-video-overlay",children:[a.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),a.jsx("div",{className:"pg-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"pg-exercise-card",children:[a.jsx("h2",{className:"pg-ex-name",children:Pe.name}),a.jsx("span",{className:`pg-ex-type-badge pg-badge-${Pe.type}`,children:Pe.type==="weighted"?"Weight + Reps":Pe.type==="timed"?"Timed":"Reps Only"}),Pe.type==="weighted"&&At&&a.jsxs("div",{className:"pg-last-week",children:[a.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),a.jsxs("span",{className:"pg-last-week-value",children:[At.weight,"kg x ",At.reps," reps"]})]}),a.jsxs("div",{className:"pg-ex-set-info",children:[a.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Me+1," of ",Xe.sets]}),a.jsxs("span",{className:"pg-ex-target",children:["Target: ",Pe.type==="timed"?`${Xe.time}s hold`:`${Xe.reps} reps`]})]}),Pe.type==="weighted"&&a.jsxs("div",{className:"pg-input-area",children:[a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",value:V,onChange:J=>D(J.target.value),placeholder:"0",className:"pg-input"})]}),a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:F,onChange:J=>M(J.target.value),placeholder:String(Xe.reps),className:"pg-input"})]})]}),Pe.type==="reps"&&a.jsx("div",{className:"pg-input-area",children:a.jsxs("div",{className:"pg-input-group pg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:F,onChange:J=>M(J.target.value),placeholder:String(Xe.reps),className:"pg-input"})]})}),Pe.type==="timed"&&a.jsxs("div",{className:"pg-timer-area",children:[a.jsx("div",{className:"pg-timer-display",children:a.jsxs("span",{className:"pg-timer-value",children:[q,"s"]})}),We?a.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>ft(!1),children:"Stop"}):a.jsx("button",{className:"pg-timer-btn",onClick:()=>{q===0&&me(Xe.time),ft(!0)},children:q<Xe.time&&q>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"pg-log-set-btn",onClick:Rt,disabled:Pe.type==="timed"&&We,children:Me+1<Xe.sets?"Log Set":je+1<Ve?"Log Set  Next Exercise":"Log Set  Complete"}),Oe?.sets?.length>0&&a.jsx("div",{className:"pg-completed-sets",children:Oe.sets.map((J,be)=>a.jsxs("div",{className:"pg-completed-set",children:[a.jsx("span",{className:"pg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",be+1,": ",J.weight!==void 0?`${J.weight}kg  ${J.reps}`:J.time!==void 0?`${J.time}s`:`${J.reps} reps`]})]},be))})]}),rn]})}if(y==="sessionComplete"){const Te=dt()?.days[Q],Pe=S.reduce((Oe,Me)=>Oe+Me.sets.length,0),Xe=S.reduce((Oe,Me)=>Oe+Me.sets.reduce((Ve,xt)=>Ve+(xt.weight||0)*(xt.reps||0),0),0);return a.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"pg-session-done",children:[a.jsxs("div",{className:"pg-done-ring",children:[a.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:au.map((Oe,Me)=>a.jsx("line",{x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,className:"pg-tick-complete",strokeWidth:Oe.thick?"3.5":"2",style:{animationDelay:`${Me*.02}s`}},Me))}),a.jsx("div",{className:"pg-done-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),a.jsxs("p",{className:"pg-done-subtitle",children:["Week ",O,"  ",Te?.name,": ",Te?.label]}),a.jsxs("div",{className:"pg-done-stats",children:[a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:S.length}),a.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Pe}),a.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),Xe>0&&a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Math.round(Xe).toLocaleString()}),a.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>w("dashboard"),children:"Back to Programme"})]}),Ne&&a.jsx("div",{className:"pg-badge-celebration",onClick:()=>Fe(null),children:a.jsxs("div",{className:"pg-badge-celebration-card",onClick:Oe=>Oe.stopPropagation(),children:[a.jsx("div",{className:"pg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pg-badge-celebration-title",children:Ne.badges.length===1?"Badge Earned!":`${Ne.badges.length} Badges Earned!`}),a.jsx("div",{className:"pg-badge-celebration-list",children:Ne.badges.map((Oe,Me)=>a.jsx("div",{className:"pg-badge-celebration-item",children:Oe.type==="pb_target"?`${Oe.exercise}  ${Oe.targetWeight}kg`:Oe.label},Me))}),a.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Fe(null),children:"Tap to dismiss"})]})}),rn]})}return null}const CD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},RD={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Gp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function AD(s){return CD[s]||"push"}function ID(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function MD(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function DD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Vr(),{isDark:l,toggleTheme:u,accent:h}=Ma(),p=er(),[g,y]=x.useState(!0),[w,k]=x.useState(null),[j,L]=x.useState({}),[G,z]=x.useState([]),[O,te]=x.useState(null),[Q,ce]=x.useState(0),[je,He]=x.useState({});x.useRef(null),x.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),x.useEffect(()=>{if(!t)return;(async()=>{try{const[me,De,$e,ee]=await Promise.all([Ln(Ke(xe,"coreBuddyAchievements",t.id)),Ln(Ke(xe,"coreBuddyPBs",t.id)),Ln(Ke(xe,"achievements",t.id)),Tn(An(Ht(xe,"workoutLogs"),cn("clientId","==",t.id)))]);me.exists()&&k(me.data()),De.exists()&&L(De.data().exercises||{}),$e.exists()&&(z(Object.keys($e.data().badges||{})),He($e.data().progress||{})),ce(ee.docs.length)}catch(me){console.error("Error loading achievements:",me)}y(!1)})()},[t]);const ze=w?.badges||[],I=w?.totalVolume||0,S=ze.filter(q=>q.type==="pb_target"),A=ze.filter(q=>q.type==="volume_milestone"),V={push:[],pull:[],lower:[],core:[]};S.forEach(q=>{const me=q.group||AD(q.exercise);V[me]&&V[me].push(q)});const D=Gp.find(q=>I<q.threshold),F=Gp.filter(q=>I>=q.threshold).pop()?.threshold||0,M=D?(I-F)/(D.threshold-F):1;if(i||g)return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsx("div",{className:"ach-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});const We=ze.length+G.length,ft=We>0||I>0||Q>0;return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ach-main",children:[a.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/personal-bests?mode=corebuddy"),children:" Back"}),a.jsxs("div",{className:"ach-stats-banner",children:[a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:We}),a.jsx("span",{className:"ach-stat-label",children:We===1?"Badge":"Badges"})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:ID(I)}),a.jsxs("span",{className:"ach-stat-label",children:[MD(I)," lifted"]})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Object.keys(j).length}),a.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!ft&&a.jsxs("div",{className:"ach-empty",children:[a.jsx("div",{className:"ach-empty-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),a.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),a.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),a.jsx("h4",{children:"No achievements yet"}),a.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),[{key:"workouts",title:"Workout Badges",iconPath:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"},{key:"streaks",title:"Streak Badges",iconPath:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67z"},{key:"pbs",title:"Personal Best Badges",iconPath:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"},{key:"nutrition",title:"Nutrition Badges",iconPath:"M18.06 23h1.66c.84 0 1.53-.65 1.63-1.47L23 5.05h-5V1h-2v4.05h-5l.3 2.34c1.71.47 3.31 1.32 4.27 2.26 1.44 1.42 2.43 2.89 2.43 5.29V23zM1 22v-1h15.03v1c0 .55-.45 1-1.01 1H2.01c-.56 0-1.01-.45-1.01-1zm15.03-7c0-4.87-4.66-5.84-8.03-5.97l.72 5.52L1 15.05v5.95h15.03V15z"},{key:"habits",title:"Habit Badges",iconPath:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},{key:"leaderboard",title:"Leaderboard Badges",iconPath:"M7.5 21H2V9h5.5v12zm7.25-18h-5.5v18h5.5V3zM22 11h-5.5v10H22V11z"}].map(q=>{const me=Wd.filter(ee=>ee.category===q.key);if(me.length===0)return null;const De=(()=>{switch(q.key){case"workouts":return Q;case"streaks":return je.streakWeeks||0;case"pbs":return Object.keys(j).length;case"nutrition":return je.nutritionStreak||0;case"leaderboard":return t?.leaderboardOptIn?1:0;case"habits":return je.habitStreak||0;default:return 0}})(),$e=me.filter(ee=>G.includes(ee.id)).length;return a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:q.iconPath})}),q.title]}),a.jsx("div",{className:"ach-workout-carousel",children:me.map(ee=>{const P=G.includes(ee.id);return a.jsxs("button",{className:`ach-workout-badge${P?" unlocked":" locked"}`,onClick:()=>te(ee),children:[a.jsx("img",{src:ee.img,alt:ee.name,className:"ach-workout-badge-img"}),!P&&ee.threshold&&a.jsx("div",{className:"ach-workout-badge-progress",children:a.jsx("div",{className:"ach-workout-badge-progress-fill",style:{width:`${Math.min(De/ee.threshold*100,100)}%`}})})]},ee.id)})}),a.jsxs("p",{className:"ach-workout-badges-count",children:[$e,"/",me.length," unlocked"]})]},q.key)}),O&&a.jsx("div",{className:"ach-badge-overlay",onClick:()=>te(null),children:a.jsxs("div",{className:"ach-badge-overlay-content",onClick:q=>q.stopPropagation(),children:[a.jsx("img",{src:O.img,alt:O.name,className:`ach-badge-overlay-img${G.includes(O.id)?"":" ach-badge-overlay-img-locked"}`}),a.jsx("p",{className:"ach-badge-overlay-desc",children:O.desc}),G.includes(O.id)?a.jsx("span",{className:"ach-badge-overlay-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"ach-badge-overlay-status locked",children:"Locked"}),a.jsx("button",{className:"ach-badge-overlay-close",onClick:()=>te(null),children:"Tap to close"})]})}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),a.jsxs("div",{className:"ach-volume-hero",children:[a.jsxs("div",{className:"ach-volume-ring",children:[a.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:au.map((q,me)=>{const De=me<Math.round(M*60);return a.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:De?"ach-tick-filled":"ach-tick-empty",strokeWidth:q.thick?"3":"2"},me)})}),a.jsxs("div",{className:"ach-volume-center",children:[a.jsx("span",{className:"ach-volume-number",children:Math.round(I).toLocaleString()}),a.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),D&&a.jsxs("div",{className:"ach-volume-next",children:["Next: ",a.jsx("strong",{children:D.label})," (",(D.threshold-I).toLocaleString(),"kg to go)"]})]}),a.jsx("div",{className:"ach-milestone-shelf",children:Gp.map((q,me)=>{const De=I>=q.threshold,$e=A.find(ee=>ee.milestone===q.threshold);return a.jsxs("div",{className:`ach-milestone ${De?"unlocked":"locked"}`,children:[a.jsx("div",{className:"ach-milestone-hex",children:a.jsx("span",{className:"ach-milestone-icon",children:q.icon})}),a.jsx("span",{className:"ach-milestone-label",children:q.label}),$e?.achievedAt&&a.jsx("span",{className:"ach-milestone-date",children:($e.achievedAt.toDate?$e.achievedAt.toDate():new Date($e.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},me)})})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),S.length===0?a.jsx("div",{className:"ach-pb-empty",children:a.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",a.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(V).map(([q,me])=>{if(me.length===0)return null;const De=RD[q];return a.jsxs("div",{className:"ach-group",children:[a.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:De.color},children:[a.jsx("span",{className:"ach-group-label",style:{color:De.color},children:De.label}),a.jsx("span",{className:"ach-group-count",children:me.length})]}),a.jsx("div",{className:"ach-badge-grid",children:me.map(($e,ee)=>a.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${ee*.06}s`,"--group-color":De.color},children:[a.jsx("div",{className:"ach-badge-hex",style:{borderColor:De.color,boxShadow:`0 0 12px ${De.color}33`},children:a.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:De.color,strokeWidth:"2",strokeLinecap:"round",children:a.jsx("path",{d:De.icon})})}),a.jsxs("div",{className:"ach-badge-info",children:[a.jsx("span",{className:"ach-badge-exercise",children:$e.exercise}),a.jsxs("span",{className:"ach-badge-value",style:{color:De.color},children:[$e.targetWeight,"kg"]}),$e.achievedAt&&a.jsx("span",{className:"ach-badge-date",children:($e.achievedAt.toDate?$e.achievedAt.toDate():new Date($e.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},ee))})]},q)})]})]}),a.jsx(Aa,{active:"home"})]})}const id=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function PD(s){const e=new Date(s),t=e.getDay(),i=t===0?-6:1-t;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Kp(s){return s.toISOString().split("T")[0]}function LD(s){return Array.from({length:7},(e,t)=>{const i=new Date(s);return i.setDate(s.getDate()+t),i})}function OD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Vr(),{isDark:l,toggleTheme:u,accent:h}=Ma(),p=er(),[g,y]=x.useState({}),[w,k]=x.useState(!0),[j,L]=x.useState(!1),[G,z]=x.useState(0),[O,te]=x.useState(null),[Q,ce]=x.useState(null),[je,He]=x.useState(!1),ze=x.useRef([]),I=x.useRef([]),S=x.useCallback((W,ye="info")=>{te({message:W,type:ye}),setTimeout(()=>te(null),3e3)},[]),A=new Date,V=Kp(A),D=PD(A),F=LD(D),M=["M","T","W","T","F","S","S"];x.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),x.useEffect(()=>{if(!s||!t)return;(async()=>{try{const ye=Ht(xe,"habitLogs"),Ne=An(ye,cn("clientId","==",t.id)),Fe=await Tn(Ne),Ie={};Fe.docs.forEach(Qe=>{const qt=Qe.data();Ie[qt.date]={...qt,_id:Qe.id}}),y(Ie);let nt=0;const gt=new Date(A);for(;;){const Qe=Kp(gt),qt=Ie[Qe];if(qt)if(Object.values(qt.habits||{}).filter(Boolean).length>=3)nt++,gt.setDate(gt.getDate()-1);else break;else if(Qe===V)gt.setDate(gt.getDate()-1);else break}z(nt)}catch(ye){console.error("Error loading habit logs:",ye)}finally{k(!1)}})()},[s,t]);const We=g[V]||{habits:{}},ft=async W=>{if(!s||j)return;const ye=We.habits?.[W]||!1;ye||(ze.current=[...Array(10)].map((Ne,Fe)=>{const Ie=Fe/10*2*Math.PI,nt=18+Math.random()*20;return{tx:Math.cos(Ie)*nt,ty:Math.sin(Ie)*nt,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),ce(W),setTimeout(()=>ce(null),700)),L(!0);try{const Ne=We.habits||{},Fe={...Ne,[W]:!Ne[W]},Ie=We._id||`${t.id}_${V}`;await Fn(Ke(xe,"habitLogs",Ie),{clientId:t.id,date:V,habits:Fe}),y(gt=>({...gt,[V]:{clientId:t.id,date:V,habits:Fe,_id:Ie}})),Object.values(Fe).filter(Boolean).length===id.length&&!ye&&(I.current=[...Array(50)].map((gt,Qe)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][Qe%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{He(!0),setTimeout(()=>He(!1),3500)},500))}catch(Ne){console.error("Error saving habit:",Ne),S("Failed to save. Try again.","error")}finally{L(!1)}},q=F.map(W=>{const ye=Kp(W),Ne=g[ye],Fe=Ne?Object.values(Ne.habits||{}).filter(Boolean).length:0;return{date:W,dateStr:ye,completed:Fe,total:id.length}}),me=q.reduce((W,ye)=>W+ye.completed,0),De=q.reduce((W,ye)=>W+ye.total,0),$e=De>0?Math.round(me/De*100):0,ee=Object.values(We.habits||{}).filter(Boolean).length,P=Math.round(ee/id.length*100);return a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||w?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-ring-section",children:[a.jsxs("div",{className:"cbc-progress-ring",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-P/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-pct",children:[P,"%"]}),a.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),a.jsxs("div",{className:"cbc-streak",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{className:"cbc-streak-count",children:G}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsx("div",{className:"cbc-habits",children:id.map(W=>{const ye=We.habits?.[W.key]||!1,Ne=Q===W.key;return a.jsxs("button",{className:`cbc-habit-btn cbc-habit-${W.key} ${ye?"cbc-habit-done":""} ${Ne?"cbc-habit-just-checked":""}`,onClick:()=>ft(W.key),disabled:j,children:[a.jsx("div",{className:"cbc-habit-check",children:ye?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${Ne?"cbc-check-animate":""}`})}):a.jsx("div",{className:"cbc-habit-circle"})}),Ne&&a.jsx("div",{className:"cbc-particles",children:ze.current.map((Fe,Ie)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${Fe.tx}px`,"--ty":`${Fe.ty}px`,"--size":`${Fe.size}px`,animationDuration:`${Fe.duration}s`}},Ie))}),a.jsx("div",{className:`cbc-habit-icon cbc-icon-${W.key}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:W.icon})})}),a.jsx("span",{className:"cbc-habit-label",children:W.label})]},W.key)})})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsx("div",{className:"cbc-week-grid",children:q.map((W,ye)=>{const Ne=W.dateStr===V,Fe=W.total>0?W.completed/W.total:0,Ie=38,nt=2*Math.PI*Ie,gt=nt-Fe*nt;return a.jsxs("div",{className:`cbc-day-ring ${Ne?"cbc-day-today":""} ${W.completed>0?"cbc-day-active":""}`,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Ie}),a.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Ie,strokeDasharray:nt,strokeDashoffset:gt})]}),a.jsx("span",{className:"cbc-day-label",children:M[ye]}),a.jsxs("span",{className:"cbc-day-count",children:[W.completed,"/",W.total]})]},ye)})}),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${$e}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[me," / ",De," habits this week (",$e,"%)"]})]})]})]}),a.jsx(Aa,{active:"home"}),je&&a.jsxs("div",{className:"cbc-celebration",onClick:()=>He(!1),children:[a.jsx("div",{className:"cbc-confetti-container",children:I.current.map((W,ye)=>a.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${W.x}%`,"--delay":`${W.delay}s`,"--color":W.color,"--drift":`${W.drift}px`,"--spin":`${W.spin}deg`,"--duration":`${W.duration}s`,width:`${W.width}px`,height:`${W.height}px`}},ye))}),a.jsxs("div",{className:"cbc-celebration-card",children:[a.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),a.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),a.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),O&&a.jsx("div",{className:`toast-notification ${O.type}`,children:O.message})]})}function od(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function _2(s,e){return[s,e].sort().join("_")}function VD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Vr(),{isDark:l,toggleTheme:u}=Ma(),h=er(),[p,g]=x.useState("buddies"),[y,w]=x.useState([]),[k,j]=x.useState([]),[L,G]=x.useState([]),[z,O]=x.useState(""),[te,Q]=x.useState([]),[ce,je]=x.useState([]),[He,ze]=x.useState(!0),[I,S]=x.useState(null),[A,V]=x.useState(null),D=x.useCallback((ee,P="info")=>{V({message:ee,type:P}),setTimeout(()=>V(null),3500)},[]);x.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const F=x.useCallback(async()=>{if(t){ze(!0);try{const ee=t.id,W=(await Tn(Ht(xe,"clients"))).docs.map(Qe=>({id:Qe.id,...Qe.data()}));je(W);const ye=Object.fromEntries(W.map(Qe=>[Qe.id,Qe])),Ne=await Tn(An(Ht(xe,"buddies"),cn("user1","==",ee))),Fe=await Tn(An(Ht(xe,"buddies"),cn("user2","==",ee))),Ie=new Set;[...Ne.docs,...Fe.docs].forEach(Qe=>{const qt=Qe.data(),yn=qt.user1===ee?qt.user2:qt.user1;Ie.add(yn)}),w(Array.from(Ie).map(Qe=>ye[Qe]).filter(Boolean));const nt=await Tn(An(Ht(xe,"buddyRequests"),cn("toId","==",ee),cn("status","==","pending")));j(nt.docs.map(Qe=>({reqId:Qe.id,...Qe.data(),fromClient:ye[Qe.data().fromId]})).filter(Qe=>Qe.fromClient));const gt=await Tn(An(Ht(xe,"buddyRequests"),cn("fromId","==",ee),cn("status","==","pending")));G(gt.docs.map(Qe=>({reqId:Qe.id,...Qe.data(),toClient:ye[Qe.data().toId]})).filter(Qe=>Qe.toClient))}catch(ee){console.error("Error fetching buddy data:",ee),D("Failed to load buddies","error")}finally{ze(!1)}}},[t,D]);x.useEffect(()=>{F()},[F]),x.useEffect(()=>{if(!z.trim()||!t){Q([]);return}const ee=z.toLowerCase(),P=t.id,W=new Set(y.map(Ie=>Ie.id)),ye=new Set(L.map(Ie=>Ie.toId)),Ne=new Set(k.map(Ie=>Ie.fromId)),Fe=ce.filter(Ie=>Ie.id===P||!Ie.name||!Ie.coreBuddyAccess&&Ie.clientType!=="core_buddy"?!1:Ie.name.toLowerCase().includes(ee)).map(Ie=>({...Ie,isBuddy:W.has(Ie.id),isPendingOut:ye.has(Ie.id),isPendingIn:Ne.has(Ie.id)})).slice(0,20);Q(Fe)},[z,ce,y,L,k,t]);const M=async(ee,P)=>{if(!(!t||ee===t.id))try{await ai(Ht(xe,"notifications"),{toId:ee,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:P,read:!1,createdAt:Qr()})}catch(W){console.error("Notification error:",W),W.code==="permission-denied"&&D("Notifications blocked  check Firestore rules","error")}},We=async ee=>{S(ee);try{const P=`${t.id}_${ee}`;await Fn(Ke(xe,"buddyRequests",P),{fromId:t.id,toId:ee,status:"pending",createdAt:Qr()}),await M(ee,"buddy_request"),D("Buddy request sent!","success"),await F()}catch(P){console.error("Error sending request:",P),D("Failed to send request","error")}finally{S(null)}},ft=async ee=>{S(ee.reqId);try{const P=_2(ee.fromId,t.id);await Fn(Ke(xe,"buddies",P),{user1:[ee.fromId,t.id].sort()[0],user2:[ee.fromId,t.id].sort()[1],connectedAt:Qr()}),await dr(Ke(xe,"buddyRequests",ee.reqId)),await M(ee.fromId,"buddy_accept"),D("Buddy added!","success"),await F()}catch(P){console.error("Error accepting request:",P),D("Failed to accept","error")}finally{S(null)}},q=async ee=>{S(ee.reqId);try{await dr(Ke(xe,"buddyRequests",ee.reqId)),D("Request declined","info"),await F()}catch(P){console.error("Error declining:",P),D("Failed to decline","error")}finally{S(null)}},me=async ee=>{S(ee.reqId);try{await dr(Ke(xe,"buddyRequests",ee.reqId)),D("Request cancelled","info"),await F()}catch(P){console.error("Error cancelling:",P),D("Failed to cancel","error")}finally{S(null)}},De=async ee=>{S(ee);try{const P=_2(t.id,ee);await dr(Ke(xe,"buddies",P)),D("Buddy removed","info"),await F()}catch(P){console.error("Error removing buddy:",P),D("Failed to remove buddy","error")}finally{S(null)}},$e=k.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!t?null:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("button",{className:"bdy-leaderboard-link",onClick:()=>h("/client/leaderboard"),children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("rect",{x:"6",y:"9",width:"12",height:"13",rx:"2"}),a.jsx("path",{d:"M12 9v13"}),a.jsx("path",{d:"M2 22h20"})]}),a.jsx("span",{children:"Leaderboard"}),a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),$e>0&&a.jsx("span",{className:"bdy-tab-badge",children:$e})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),He?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(ee=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ee.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:ee.photoURL?a.jsx("img",{src:ee.photoURL,alt:ee.name}):a.jsx("span",{children:od(ee.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:ee.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:P=>{P.stopPropagation(),De(ee.id)},disabled:I===ee.id,"aria-label":"Remove buddy",children:I===ee.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ee.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[k.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:k.map(ee=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:ee.fromClient.photoURL?a.jsx("img",{src:ee.fromClient.photoURL,alt:ee.fromClient.name}):a.jsx("span",{children:od(ee.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ee.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>ft(ee),disabled:I===ee.reqId,children:I===ee.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>q(ee),disabled:I===ee.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},ee.reqId))})]}),L.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:L.map(ee=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:ee.toClient?.photoURL?a.jsx("img",{src:ee.toClient.photoURL,alt:ee.toClient.name}):a.jsx("span",{children:od(ee.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ee.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>me(ee),disabled:I===ee.reqId,children:I===ee.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},ee.reqId))})]}),k.length===0&&L.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:z,onChange:ee=>O(ee.target.value),autoFocus:!0}),z&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>O(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),z.trim()&&te.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',z,'"']})}),te.length>0&&a.jsx("div",{className:"bdy-list",children:te.map(ee=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ee.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:ee.photoURL?a.jsx("img",{src:ee.photoURL,alt:ee.name}):a.jsx("span",{children:od(ee.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ee.name}),ee.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),ee.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):ee.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):ee.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:P=>{P.stopPropagation();const W=k.find(ye=>ye.fromId===ee.id);W&&ft(W)},disabled:!!I,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:P=>{P.stopPropagation(),We(ee.id)},disabled:I===ee.id,children:I===ee.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},ee.id))})]})]})]}),a.jsx(Aa,{}),A&&a.jsxs("div",{className:`toast-notification ${A.type}`,children:[a.jsx("span",{className:"toast-icon",children:A.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):A.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:A.message})]})]})}function ld(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Yp(s,e){return[s,e].sort().join("_")}const BD=5;function Qp(s){return s.toISOString().split("T")[0]}function UD(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}const zD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}};function k2(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function FD(){const{userId:s}=nE(),{currentUser:e,isClient:t,clientData:i,loading:l}=Vr(),{isDark:u,toggleTheme:h}=Ma(),p=er(),[g,y]=x.useState(null),[w,k]=x.useState("none"),[j,L]=x.useState(null),[G,z]=x.useState(!0),[O,te]=x.useState(!1),[Q,ce]=x.useState(null),[je,He]=x.useState([]),[ze,I]=x.useState(!1),[S,A]=x.useState(new Set),[V,D]=x.useState(new Set),[F,M]=x.useState({}),[We,ft]=x.useState({}),[q,me]=x.useState({}),[De,$e]=x.useState(!0),[ee,P]=x.useState(0),[W,ye]=x.useState(0),[Ne,Fe]=x.useState(0),[Ie,nt]=x.useState(0),[gt,Qe]=x.useState([]),[qt,yn]=x.useState([]),[Pt,St]=x.useState(null),[le,an]=x.useState(null),[sn,dt]=x.useState(0),[Ct,lt]=x.useState([]),[st,Qt]=x.useState(!1),[as,Rt]=x.useState(null),[Xt,ts]=x.useState([]),wt=x.useCallback((J,be="info")=>{ce({message:J,type:be}),setTimeout(()=>ce(null),3500)},[]);x.useEffect(()=>{!l&&(!e||!t)&&p("/")},[e,t,l,p]),x.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),x.useEffect(()=>{if(!i||!s||i.id===s)return;let J=!1;return(async()=>{z(!0);try{const It=(await Tn(Ht(xe,"clients"))).docs.map(zt=>({id:zt.id,...zt.data()})).find(zt=>zt.id===s);if(!It){J||z(!1);return}J||y(It);const jt=i.id,Jt=Yp(jt,s);if((await Ln(Ke(xe,"buddies",Jt))).exists())J||k("buddy");else{const zt=`${jt}_${s}`,In=await Ln(Ke(xe,"buddyRequests",zt));if(In.exists()&&In.data().status==="pending")J||(k("pending_out"),L(zt));else{const Qn=`${s}_${jt}`,un=await Ln(Ke(xe,"buddyRequests",Qn));un.exists()&&un.data().status==="pending"?J||(k("pending_in"),L(Qn)):J||k("none")}}}catch(be){console.error("Error loading profile:",be)}finally{J||z(!1)}})(),()=>{J=!0}},[i,s]),x.useEffect(()=>{if(!s||!g)return;let J=!1;return(async()=>{$e(!0);try{const[be,tt,It,jt]=await Promise.all([Tn(An(Ht(xe,"workoutLogs"),cn("clientId","==",s))),Ln(Ke(xe,"coreBuddyAchievements",s)),Ln(Ke(xe,"coreBuddyPBs",s)),Ln(Ke(xe,"clientProgrammes",s))]);if(J)return;const Jt=be.docs.length;P(Jt),tt.exists()&&ye(tt.data().totalVolume||0);let Zt=0;const zt=be.docs.map(un=>un.data().date).filter(Boolean).sort().reverse();if(zt.length>0){const un=new Date;let jn=new Date(un);for(let Pn=0;Pn<52;Pn++){const U=new Date(jn),ge=U.getDay(),_e=ge===0?6:ge-1;U.setDate(U.getDate()-_e),U.setHours(0,0,0,0);const we=new Date(U);we.setDate(we.getDate()+7);const fe=Qp(U),rt=Qp(we);if(zt.some(it=>it>=fe&&it<rt))Zt++;else{if(Pn>0)break;break}jn.setDate(jn.getDate()-7)}}if(J||Fe(Zt),It.exists()){const un=It.data().exercises||{},jn=Object.entries(un).sort(([,Pn],[,U])=>(U.weight||0)-(Pn.weight||0)).slice(0,3).map(([Pn,U])=>({name:Pn,weight:U.weight,reps:U.reps}));J||Qe(jn)}if(jt.exists()){const un=jt.data(),jn=zD[un.templateId];if(jn){const Pn=Object.keys(un.completedSessions||{}).length,U=jn.duration*jn.daysPerWeek;J||(an(un.templateId.replace(/_/g," ").replace(/\b\w/g,ge=>ge.toUpperCase())),dt(U>0?Math.round(Pn/U*100):0))}}const In=await Ln(Ke(xe,"achievements",s));if(!J&&In.exists()){const un=In.data().badges||{};yn(Object.keys(un))}let Qn=0;for(let un=0;un<30;un++){const jn=new Date;jn.setDate(jn.getDate()-un);const Pn=Qp(jn);try{const U=await Tn(An(Ht(xe,"habitLogs"),cn("clientId","==",s),cn("date","==",Pn)));if(U.empty)break;{const ge=U.docs[0].data().habits||{};if(Object.values(ge).filter(Boolean).length>=BD)Qn++;else break}}catch{break}}J||nt(Qn)}catch(be){console.error("Error loading buddy stats:",be)}finally{J||$e(!1)}})(),()=>{J=!0}},[s,g]),x.useEffect(()=>{if(!i)return;const J=i.id;(async()=>{try{const[be,tt,It]=await Promise.all([Tn(An(Ht(xe,"buddies"),cn("user1","==",J))),Tn(An(Ht(xe,"buddies"),cn("user2","==",J))),Tn(Ht(xe,"clients"))]),jt=new Set;[...be.docs,...tt.docs].forEach(Zt=>{const zt=Zt.data();jt.add(zt.user1===J?zt.user2:zt.user1)});const Jt={};It.docs.forEach(Zt=>{Jt[Zt.id]=Zt.data()}),lt(Array.from(jt).filter(Zt=>Jt[Zt]).map(Zt=>({id:Zt,name:Jt[Zt].name,photoURL:Jt[Zt].photoURL||null})))}catch(be){console.error("Error loading buddies for mentions:",be)}})()},[i]);const bn=async(J,be,tt={})=>{if(!(!i||J===i.id))try{await ai(Ht(xe,"notifications"),{toId:J,fromId:i.id,fromName:i.name||"Someone",fromPhotoURL:i.photoURL||null,type:be,read:!1,createdAt:Qr(),...tt})}catch(It){console.error("Notification error:",It),It.code==="permission-denied"&&wt("Notifications blocked  check Firestore rules","error")}},rn=async()=>{te(!0);try{const J=`${i.id}_${s}`;await Fn(Ke(xe,"buddyRequests",J),{fromId:i.id,toId:s,status:"pending",createdAt:Qr()}),await bn(s,"buddy_request"),k("pending_out"),L(J),wt("Buddy request sent!","success")}catch(J){console.error(J),wt("Failed to send request","error")}finally{te(!1)}},Sn=async()=>{if(j){te(!0);try{const J=Yp(i.id,s);await Fn(Ke(xe,"buddies",J),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:Qr()}),await dr(Ke(xe,"buddyRequests",j)),await bn(s,"buddy_accept"),k("buddy"),wt("Buddy added!","success")}catch(J){console.error(J),wt("Failed to accept","error")}finally{te(!1)}}},de=async()=>{if(j){te(!0);try{await dr(Ke(xe,"buddyRequests",j)),k("none"),wt(w==="pending_out"?"Request cancelled":"Request declined","info")}catch(J){console.error(J),wt("Failed","error")}finally{te(!1)}}},Te=async()=>{te(!0);try{const J=Yp(i.id,s);await dr(Ke(xe,"buddies",J)),k("none"),wt("Buddy removed","info")}catch(J){console.error(J),wt("Failed to remove","error")}finally{te(!1)}},Pe=x.useCallback(async()=>{if(s){I(!0);try{const J=await Tn(An(Ht(xe,"posts"),cn("authorId","==",s),Hd("createdAt","desc"),$d(30)));if(He(J.docs.map(be=>({id:be.id,...be.data()}))),i){const be=await Tn(An(Ht(xe,"postLikes"),cn("userId","==",i.id)));A(new Set(be.docs.map(tt=>tt.data().postId)))}}catch(J){console.error("Error loading journey:",J)}finally{I(!1)}}},[s,i]);x.useEffect(()=>{!G&&g&&Pe()},[G,g,Pe]);const Xe=async J=>{if(window.confirm("Delete this post?"))try{await dr(Ke(xe,"posts",J)),He(be=>be.filter(tt=>tt.id!==J)),wt("Post deleted","info")}catch(be){console.error("Delete error:",be),wt("Failed to delete","error")}},Oe=async J=>{if(!i)return;const be=i.id,tt=`${J}_${be}`,It=S.has(J),jt=new Set(S);It?jt.delete(J):jt.add(J),A(jt),He(Jt=>Jt.map(Zt=>Zt.id===J?{...Zt,likeCount:Math.max(0,(Zt.likeCount||0)+(It?-1:1))}:Zt));try{if(It)await dr(Ke(xe,"postLikes",tt)),await Hi(Ke(xe,"posts",J),{likeCount:Do(-1)});else{await Fn(Ke(xe,"postLikes",tt),{postId:J,userId:be,createdAt:Qr()}),await Hi(Ke(xe,"posts",J),{likeCount:Do(1)});const Jt=je.find(Zt=>Zt.id===J);Jt&&bn(Jt.authorId,"like",{postId:J})}}catch(Jt){console.error("Like error:",Jt),Pe()}},Me=async J=>{try{const be=await Tn(An(Ht(xe,"postComments"),cn("postId","==",J),Hd("createdAt","asc"),$d(50)));M(tt=>({...tt,[J]:be.docs.map(It=>({id:It.id,...It.data()}))}))}catch(be){console.error("Error loading comments:",be)}},Ve=J=>{const be=new Set(V);be.has(J)?be.delete(J):(be.add(J),F[J]||Me(J)),D(be)},xt=(J,be)=>{const tt=J.match(/@(\w*)$/);if(tt){Qt(!0),Rt(be);const It=Ct.filter(jt=>jt.name&&jt.name.toLowerCase().includes(tt[1].toLowerCase())).slice(0,5);ts(It)}else Qt(!1),ts([])},yt=(J,be)=>{const It=(We[be]||"").replace(/@\w*$/,`@${J.name} `);ft(jt=>({...jt,[be]:It})),Qt(!1),ts([])},At=(J,be)=>{ft(tt=>({...tt,[J]:be})),xt(be,J)},Wt=async J=>{const be=(We[J]||"").trim();if(!(!be||!i)){me(tt=>({...tt,[J]:!0}));try{await ai(Ht(xe,"postComments"),{postId:J,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:be,createdAt:Qr()}),await Hi(Ke(xe,"posts",J),{commentCount:Do(1)});const tt=je.find(jt=>jt.id===J);tt&&bn(tt.authorId,"comment",{postId:J});const It=be.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(It){const jt=new Set;It.forEach(Jt=>{const Zt=Jt.slice(1).trim(),zt=Ct.find(In=>In.name&&In.name.toLowerCase()===Zt.toLowerCase());zt&&!jt.has(zt.id)&&(jt.add(zt.id),bn(zt.id,"mention",{postId:J}))})}ft(jt=>({...jt,[J]:""})),He(jt=>jt.map(Jt=>Jt.id===J?{...Jt,commentCount:(Jt.commentCount||0)+1}:Jt)),await Me(J)}catch(tt){console.error("Comment error:",tt),wt("Failed to comment","error")}finally{me(tt=>({...tt,[J]:!1}))}}};return l||G||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!t?null:g?a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:h,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:ld(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),a.jsxs("div",{className:"prf-buddy-action",children:[w==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:rn,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),w==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:de,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),w==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:Sn,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:de,disabled:O,children:"Decline"})]}),w==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:Te,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),De?a.jsx("div",{className:"prf-stats-loading",children:a.jsx("div",{className:"prf-spinner"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"prf-stats",children:[a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:ee}),a.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[UD(W),a.jsx("span",{className:"prf-stat-unit",children:W>=1e3?"":"kg"})]}),a.jsxs("span",{className:"prf-stat-label",children:[W>=1e6?"Million kg":W>=1e3?"Tonnes":"Volume"," Lifted"]})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[Ne,a.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),a.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),(le||Ie>0)&&a.jsxs("div",{className:"prf-info-row",children:[le&&a.jsxs("div",{className:"prf-info-card info-programme",children:[a.jsx("div",{className:"prf-info-icon",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),a.jsxs("div",{className:"prf-info-text",children:[a.jsx("span",{className:"prf-info-label",children:le}),a.jsx("div",{className:"prf-info-progress-bar",children:a.jsx("div",{className:"prf-info-progress-fill",style:{width:`${Math.min(sn,100)}%`}})}),a.jsxs("span",{className:"prf-info-sub",children:[sn,"% complete"]})]})]}),Ie>0&&a.jsxs("div",{className:"prf-info-card info-habit",children:[a.jsx("div",{className:"prf-info-icon",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})}),a.jsxs("div",{className:"prf-info-text",children:[a.jsxs("span",{className:"prf-info-value",children:[Ie," day",Ie!==1?"s":""]}),a.jsx("span",{className:"prf-info-sub",children:"Habit Streak"})]})]})]}),gt.length>0&&a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:"Top Lifts"}),a.jsx("div",{className:"prf-pb-list",children:gt.map((J,be)=>a.jsxs("div",{className:"prf-pb-item",children:[a.jsx("div",{className:"prf-pb-rank",children:be===0?a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:a.jsx("path",{d:"M12 2l2.4 7.4H22l-6 4.4 2.3 7.2L12 16.6 5.7 21l2.3-7.2-6-4.4h7.6z"})}):`#${be+1}`}),a.jsx("span",{className:"prf-pb-name",children:J.name}),a.jsxs("span",{className:"prf-pb-weight",children:[J.weight,a.jsx("span",{className:"prf-pb-unit",children:"kg"})," x",J.reps]})]},be))})]}),qt.length>0&&a.jsxs("div",{className:"prf-section",children:[a.jsxs("h2",{className:"prf-section-title",children:["Badges Earned (",qt.length,")"]}),a.jsx("div",{className:"prf-badge-row",children:qt.map(J=>{const be=Wd.find(tt=>tt.id===J);return be?a.jsx("button",{className:"prf-badge-chip",onClick:()=>St(be),children:a.jsx("img",{src:be.img,alt:be.name,className:"prf-badge-chip-img"})},J):null})})]}),Pt&&a.jsx("div",{className:"prf-badge-overlay",onClick:()=>St(null),children:a.jsxs("div",{className:"prf-badge-overlay-content",onClick:J=>J.stopPropagation(),children:[a.jsx("img",{src:Pt.img,alt:Pt.name,className:"prf-badge-overlay-img"}),a.jsx("p",{className:"prf-badge-overlay-desc",children:Pt.desc}),a.jsx("button",{className:"prf-badge-overlay-close",onClick:()=>St(null),children:"Tap to close"})]})})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),ze?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):je.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:je.map(J=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:J.authorPhotoURL?a.jsx("img",{src:J.authorPhotoURL,alt:""}):a.jsx("span",{children:ld(J.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:J.authorName}),a.jsx("span",{className:"journey-post-time",children:k2(J.createdAt)})]}),J.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>Xe(J.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),J.content&&a.jsx("p",{className:"journey-post-content",children:J.content}),J.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:J.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${S.has(J.id)?" liked":""}`,onClick:()=>Oe(J.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:S.has(J.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:J.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${V.has(J.id)?" active":""}`,onClick:()=>Ve(J.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:J.commentCount||0})]})]}),V.has(J.id)&&a.jsxs("div",{className:"journey-comments",children:[F[J.id]?.length>0?F[J.id].map(be=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${be.authorId}`),children:be.authorPhotoURL?a.jsx("img",{src:be.authorPhotoURL,alt:""}):a.jsx("span",{children:ld(be.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:be.authorName}),a.jsx("span",{className:"journey-comment-text",children:be.content})]}),a.jsx("span",{className:"journey-comment-time",children:k2(be.createdAt)})]})]},be.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("input",{type:"text",placeholder:"Comment... (@ to mention)",value:We[J.id]||"",onChange:be=>At(J.id,be.target.value),onKeyDown:be=>{be.key==="Enter"&&Wt(J.id)},maxLength:300}),st&&as===J.id&&Xt.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:Xt.map(be=>a.jsxs("button",{className:"mention-option",onClick:()=>yt(be,J.id),children:[a.jsx("div",{className:"mention-option-avatar",children:be.photoURL?a.jsx("img",{src:be.photoURL,alt:""}):a.jsx("span",{children:ld(be.name)})}),a.jsx("span",{children:be.name})]},be.id))}),a.jsx("button",{onClick:()=>Wt(J.id),disabled:!(We[J.id]||"").trim()||q[J.id],children:q[J.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},J.id))})]})]}),a.jsx(Aa,{}),Q&&a.jsxs("div",{className:`toast-notification ${Q.type}`,children:[a.jsx("span",{className:"toast-icon",children:Q.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):Q.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:Q.message})]})]}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(Aa,{})]})}const aa=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],Ro=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function qD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function ia(s){const[e,t]=s.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function HD(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),t=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function $D(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function cd(s,e){if(!e)return"-";switch(s.unit){case"weight":return $D(e.weight,e.reps);case"time":return HD(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function Cl(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function Xp(s,e){return!e||e===0?null:(s-e)/e*100}function WD({data:s,exerciseKey:e,unit:t}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(z=>{const O=z.benchmarks?.[e];if(!O)return 0;switch(t){case"weight":return(O.weight||0)*(O.reps||0);case"time":return O.time||0;case"reps":return O.reps||0;case"distance":return O.distance||0;default:return 0}}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,w=p-y*2,k=g-y*2,j=i.map((z,O)=>{const te=y+O/(i.length-1)*w,Q=y+k-(z-u)/h*k;return{x:te,y:Q,value:z}}),L=j.map((z,O)=>`${O===0?"M":"L"} ${z.x} ${z.y}`).join(" "),G=L+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:G,fill:"url(#trendGradientJr)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((z,O)=>a.jsx("circle",{cx:z.x,cy:z.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},O))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((z,O)=>a.jsxs("span",{className:"pb-trend-label",children:[z.month.split("-")[1],"/",z.month.split("-")[0].slice(2)]},O))})]})}function GD(){const[s,e]=x.useState("bests"),[t,i]=x.useState([]),[l,u]=x.useState(!0),[h,p]=x.useState(!1),[g,y]=x.useState(0),[w,k]=x.useState(!1),[j,L]=x.useState(!1),[G,z]=x.useState(!1),[O,te]=x.useState({}),[Q,ce]=x.useState({}),[je,He]=x.useState({}),[ze,I]=x.useState({}),[S,A]=x.useState({}),[V,D]=x.useState(!1),[F,M]=x.useState({}),[We,ft]=x.useState([]),[q,me]=x.useState(null),[De,$e]=x.useState(null),[ee,P]=x.useState(!1),[W,ye]=x.useState(""),[Ne,Fe]=x.useState(""),Ie=x.useRef(null),nt=x.useRef(0),gt=x.useRef(0),Qe=x.useRef("right"),qt=x.useCallback(U=>{y(ge=>{const _e=Math.max(0,Math.min(aa.length-1,U));return _e===ge?ge:(Qe.current=_e>ge?"right":"left",_e)})},[]),{currentUser:yn,isClient:Pt,clientData:St,loading:le}=Vr(),{isDark:an}=Ma(),sn=er(),dt=x.useCallback((U,ge="info")=>{$e({message:U,type:ge}),setTimeout(()=>$e(null),4e3)},[]);x.useEffect(()=>{!le&&(!yn||!Pt)&&sn("/")},[yn,Pt,le,sn]),x.useEffect(()=>{St&&Ct()},[St]);const Ct=async()=>{try{const U=An(Ht(xe,"juniorPBs"),cn("clientId","==",St.id)),_e=(await Tn(U)).docs.map(it=>({id:it.id,...it.data()}));_e.sort((it,_t)=>it.month.localeCompare(_t.month)),i(_e);const we=An(Ht(xe,"juniorPBTargets"),cn("clientId","==",St.id)),fe=await Tn(we);if(!fe.empty){const it=fe.docs[0].data();He(it.targets||{}),I(it.metricTargets||{}),A(it.targets||{}),M(it.metricTargets||{})}const rt=An(Ht(xe,"juniorAchievements"),cn("clientId","==",St.id)),Nt=await Tn(rt);Nt.empty||ft(Nt.docs[0].data().badges||[])}catch(U){console.error("Error fetching junior personal bests:",U)}u(!1)},lt=qD(),st=t.find(U=>U.month===lt),Qt=t.filter(U=>U.month<lt),as=Qt.length>0?Qt[Qt.length-1]:null;x.useEffect(()=>{st?(te(st.benchmarks||{}),ce(st.bodyMetrics||{})):(te({}),ce({}))},[st?.id]);const Rt=async(U,ge)=>{const _e=[];if(U==="strength"?aa.forEach(we=>{const fe=je[we.key];if(!fe)return;const rt=ge[we.key];if(!rt)return;let Nt;if(fe.targetType==="time"){if(!fe.targetValue)return;const it=fe.startValue||0,_t=rt.time||0,vt=fe.targetValue-it;Nt=vt===0?_t>=fe.targetValue?1:0:Math.max(0,(_t-it)/vt)}else if(fe.targetType==="reps"){if(!fe.targetReps)return;const it=fe.startReps||0,_t=rt.reps||0,vt=fe.targetReps-it;Nt=vt===0?_t>=fe.targetReps?1:0:Math.max(0,(_t-it)/vt)}else if(fe.targetType==="distance"){if(!fe.targetDistance)return;const it=fe.startDistance||0,_t=rt.distance||0,vt=fe.targetDistance-it;Nt=vt===0?_t>=fe.targetDistance?1:0:Math.max(0,(_t-it)/vt)}else{if(!fe.targetWeight&&!fe.targetReps)return;const it=(fe.startWeight||0)*(fe.startReps||0),_t=(fe.targetWeight||0)*(fe.targetReps||0),vt=(rt.weight||0)*(rt.reps||0),vn=_t-it;Nt=vn===0?vt>=_t?1:0:Math.max(0,(vt-it)/vn)}if(Nt>=1){let it,_t;fe.targetType==="time"?(it=We.some(vt=>vt.type==="strength"&&vt.key===we.key&&vt.targetValue===fe.targetValue),_t=`${we.name} ${fe.targetValue}s`):fe.targetType==="reps"?(it=We.some(vt=>vt.type==="strength"&&vt.key===we.key&&vt.targetReps===fe.targetReps),_t=`${we.name} ${fe.targetReps} reps`):fe.targetType==="distance"?(it=We.some(vt=>vt.type==="strength"&&vt.key===we.key&&vt.targetDistance===fe.targetDistance),_t=`${we.name} ${fe.targetDistance}cm`):(it=We.some(vt=>vt.type==="strength"&&vt.key===we.key&&vt.targetWeight===fe.targetWeight&&vt.targetReps===fe.targetReps),_t=`${we.name} ${fe.targetWeight}kg  ${fe.targetReps}`),it||_e.push({type:"strength",key:we.key,...fe.targetType==="time"?{targetType:"time",targetValue:fe.targetValue}:fe.targetType==="reps"?{targetType:"reps",targetReps:fe.targetReps}:fe.targetType==="distance"?{targetType:"distance",targetDistance:fe.targetDistance}:{targetWeight:fe.targetWeight,targetReps:fe.targetReps},achievedMonth:lt,label:_t})}}):Ro.forEach(we=>{const fe=ze[we.key];if(!fe||!fe.targetValue)return;const rt=ge[we.key];if(rt==null)return;const Nt=fe.startValue||0,it=fe.targetValue,_t=it-Nt;(_t===0?rt===it?1:0:Math.max(0,(rt-Nt)/_t))>=1&&(We.some(or=>or.type==="metric"&&or.key===we.key&&or.targetValue===it)||_e.push({type:"metric",key:we.key,targetValue:it,achievedMonth:lt,label:`${we.name} ${it}${we.suffix}`}))}),_e.length>0){const we=[...We,..._e];await Fn(Ke(xe,"juniorAchievements",St.id),{clientId:St.id,badges:we,updatedAt:bt.now()}),ft(we),me(_e),setTimeout(()=>me(null),5e3)}},Xt=(U,ge)=>{if(U==="strength"){const _e=je[ge];if(!_e)return!1;switch(aa.find(fe=>fe.key===ge)?.unit){case"time":return We.some(fe=>fe.type==="strength"&&fe.key===ge&&fe.targetValue===_e.targetValue);case"reps":return We.some(fe=>fe.type==="strength"&&fe.key===ge&&fe.targetReps===_e.targetReps);case"distance":return We.some(fe=>fe.type==="strength"&&fe.key===ge&&fe.targetDistance===_e.targetDistance);default:return!_e.targetWeight&&!_e.targetReps?!1:We.some(fe=>fe.type==="strength"&&fe.key===ge&&fe.targetWeight===_e.targetWeight&&fe.targetReps===_e.targetReps)}}else{const _e=ze[ge];return!_e||!_e.targetValue?!1:We.some(we=>we.type==="metric"&&we.key===ge&&we.targetValue===_e.targetValue)}},ts=async()=>{p(!0);try{const U=`${St.id}_${lt}`,ge=st||{};await Fn(Ke(xe,"juniorPBs",U),{clientId:St.id,month:lt,benchmarks:O,bodyMetrics:ge.bodyMetrics||Q||{},createdAt:ge.createdAt||bt.now(),updatedAt:bt.now()}),await Rt("strength",O),dt("Benchmarks saved!","success"),k(!1),await Ct()}catch(U){console.error("Error saving benchmarks:",U),dt("Failed to save. Please try again.","error")}p(!1)},wt=async()=>{p(!0);try{const U=`${St.id}_${lt}`,ge=st||{};await Fn(Ke(xe,"juniorPBs",U),{clientId:St.id,month:lt,benchmarks:ge.benchmarks||O||{},bodyMetrics:Q,createdAt:ge.createdAt||bt.now(),updatedAt:bt.now()}),await Rt("metric",Q),dt("Body metrics saved!","success"),L(!1),await Ct()}catch(U){console.error("Error saving metrics:",U),dt("Failed to save. Please try again.","error")}p(!1)},bn=(U,ge,_e)=>{te(we=>({...we,[U]:{...we[U],[ge]:_e===""?"":parseFloat(_e)}}))},rn=(U,ge)=>{ce(_e=>({..._e,[U]:ge===""?"":parseFloat(ge)}))},Sn=(U,ge,_e)=>{A(we=>({...we,[U]:{...we[U],[ge]:_e===""?"":parseFloat(_e)}}))},de=async()=>{p(!0);try{const U=`targets_${St.id}`,ge=st?.benchmarks||{},_e={};aa.forEach(we=>{const fe=ge[we.key];switch(we.unit){case"time":S[we.key]?.targetValue&&(_e[we.key]={targetType:"time",targetValue:S[we.key].targetValue,startValue:fe?.time||0});break;case"reps":S[we.key]?.targetReps&&(_e[we.key]={targetType:"reps",targetReps:S[we.key].targetReps,startReps:fe?.reps||0});break;case"distance":S[we.key]?.targetDistance&&(_e[we.key]={targetType:"distance",targetDistance:S[we.key].targetDistance,startDistance:fe?.distance||0});break;default:(S[we.key]?.targetWeight||S[we.key]?.targetReps)&&(_e[we.key]={targetWeight:S[we.key].targetWeight||0,targetReps:S[we.key].targetReps||0,startWeight:fe?.weight||0,startReps:fe?.reps||0})}}),await Fn(Ke(xe,"juniorPBTargets",U),{clientId:St.id,targets:_e,metricTargets:ze,updatedAt:bt.now()}),He(_e),A(_e),dt("Targets saved!","success"),z(!1)}catch(U){console.error("Error saving targets:",U),dt("Failed to save targets.","error")}p(!1)},Te=(U,ge)=>{M(_e=>({..._e,[U]:{..._e[U],targetValue:ge===""?"":parseFloat(ge)}}))},Pe=async()=>{p(!0);try{const U=`targets_${St.id}`,ge={};Ro.forEach(_e=>{if(F[_e.key]?.targetValue){const we=st?.bodyMetrics?.[_e.key]||0;ge[_e.key]={targetValue:F[_e.key].targetValue,startValue:we}}}),await Fn(Ke(xe,"juniorPBTargets",U),{clientId:St.id,targets:je,metricTargets:ge,updatedAt:bt.now()}),I(ge),M(ge),dt("Metric targets saved!","success"),D(!1)}catch(U){console.error("Error saving metric targets:",U),dt("Failed to save targets.","error")}p(!1)},Xe=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const U=Ke(xe,"juniorPBTargets",`targets_${St.id}`);await dr(U),He({}),I({}),A({}),M({}),dt("All goals have been reset","success")}catch(U){console.error("Error resetting targets:",U),dt("Failed to reset goals","error")}p(!1)}},Oe=(U,ge)=>{const _e=je[U];if(!_e||!ge)return null;if(_e.targetType==="time"){if(!_e.targetValue)return null;const it=_e.startValue||0,_t=_e.targetValue,vt=ge.time||0,vn=_t-it;return vn<=0?vt>=_t?1:0:Math.max(0,Math.min((vt-it)/vn,1))}if(_e.targetType==="reps"){if(!_e.targetReps)return null;const it=_e.startReps||0,_t=_e.targetReps,vt=ge.reps||0,vn=_t-it;return vn<=0?vt>=_t?1:0:Math.max(0,Math.min((vt-it)/vn,1))}if(_e.targetType==="distance"){if(!_e.targetDistance)return null;const it=_e.startDistance||0,_t=_e.targetDistance,vt=ge.distance||0,vn=_t-it;return vn<=0?vt>=_t?1:0:Math.max(0,Math.min((vt-it)/vn,1))}if(!_e.targetWeight&&!_e.targetReps)return null;const we=(_e.startWeight||0)*(_e.startReps||0),fe=(_e.targetWeight||0)*(_e.targetReps||0),rt=(ge.weight||0)*(ge.reps||0),Nt=fe-we;return Nt<=0?rt>=fe?1:0:Math.max(0,Math.min((rt-we)/Nt,1))},Me=U=>{const ge=ze[U];if(!ge||!ge.targetValue)return null;const _e=st?.bodyMetrics?.[U];if(_e==null)return null;const we=ge.startValue||0,fe=ge.targetValue,rt=fe-we;return rt===0?_e===fe?1:0:Math.max(0,Math.min((_e-we)/rt,1))},Ve=U=>{nt.current=U.touches[0].clientX,gt.current=0},xt=U=>{gt.current=U.touches[0].clientX-nt.current},yt=()=>{gt.current<-50?qt(g+1):gt.current>50&&qt(g-1),gt.current=0},At=U=>{const ge=st?.bodyMetrics?.[U],_e=as?.bodyMetrics?.[U];return ge==null||_e==null?null:parseFloat((ge-_e).toFixed(2))},Wt=t.find(U=>U.month===W),J=t.find(U=>U.month===Ne);if(le||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!yn||!Pt||!St)return null;const be=aa[g],tt=st?.benchmarks?.[be.key],It=as?.benchmarks?.[be.key],jt=Cl(be,tt),Jt=Cl(be,It),Zt=Xp(jt,Jt),zt=Oe(be.key,tt),In=zt!==null,Qn=zt!==null&&zt>=1,un=In?Math.round(zt*60):jt>0?15:0,jn=je[be.key],Pn=U=>U?U.targetType==="time"?`${U.startValue||0}s  ${U.targetValue}s`:U.targetType==="reps"?`${U.startReps||0}  ${U.targetReps} reps`:U.targetType==="distance"?`${U.startDistance||0}  ${U.targetDistance}cm`:`${U.startWeight||0}kg${U.startReps||0}  ${U.targetWeight}kg${U.targetReps}`:null;return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>sn("/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Junior Strength Tests"}),a.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:Ie,onTouchStart:Ve,onTouchMove:xt,onTouchEnd:yt,children:[a.jsx("div",{className:`pb-ring-container slide-from-${Qe.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Ky.map((U,ge)=>{const _e=ge<Math.round(un);return a.jsx("line",{x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,className:`pb-ring-tick ${_e?Qn?"hit":"filled":"empty"}`,strokeWidth:U.thick?"3":"2"},ge)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:be.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[be.name,Xt("strength",be.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:tt?cd(be,tt):"-"}),Zt!==null&&a.jsxs("div",{className:`pb-ring-change ${Zt>=0?"positive":"negative"}`,children:[Zt>=0?"+":"",Zt.toFixed(1),"%"]}),Zt===null&&tt&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),jn&&a.jsx("div",{className:`pb-ring-target ${Qn?"hit":""}`,children:Qn?"Target hit!":Pn(jn)}),!jn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:aa.map((U,ge)=>a.jsx("button",{className:`pb-dot ${ge===g?"active":""}`,onClick:()=>qt(ge)},ge))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>qt(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>qt(g+1),disabled:g===aa.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(WD,{data:t,exerciseKey:be.key,unit:be.unit})]})]}),!w&&!G&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:st?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>z(!0),children:Object.keys(je).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(ze).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Xe,disabled:h,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",ia(lt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),te(st?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:aa.map(U=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),U.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:O[U.key]?.weight??"",onChange:ge=>bn(U.key,"weight",ge.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:O[U.key]?.reps??"",onChange:ge=>bn(U.key,"reps",ge.target.value),placeholder:"0"})]})]}):U.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Reps (max in 1 min)"}),a.jsx("input",{type:"number",value:O[U.key]?.reps??"",onChange:ge=>bn(U.key,"reps",ge.target.value),placeholder:"0"})]})}):U.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:O[U.key]?.distance??"",onChange:ge=>bn(U.key,"distance",ge.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:O[U.key]?.time??"",onChange:ge=>bn(U.key,"time",ge.target.value),placeholder:"0"})]})})]},U.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),te(st?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:ts,disabled:h,children:h?"Saving...":"Save"})]})]}),G&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{z(!1),A(je)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),aa.map(U=>{const ge=st?.benchmarks?.[U.key];let _e="-";if(ge)switch(U.unit){case"weight":(ge.weight||ge.reps)&&(_e=`${ge.weight||0}kg  ${ge.reps||0}`);break;case"time":ge.time&&(_e=`${ge.time}s`);break;case"reps":ge.reps&&(_e=`${ge.reps} reps`);break;case"distance":ge.distance&&(_e=`${ge.distance} cm`);break}return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",_e]})]}),U.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:S[U.key]?.targetWeight??"",onChange:we=>Sn(U.key,"targetWeight",we.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:S[U.key]?.targetReps??"",onChange:we=>Sn(U.key,"targetReps",we.target.value),placeholder:"0"})]})]}):U.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Reps (in 1 min)"}),a.jsx("input",{type:"number",value:S[U.key]?.targetReps??"",onChange:we=>Sn(U.key,"targetReps",we.target.value),placeholder:"0"})]})}):U.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:S[U.key]?.targetDistance??"",onChange:we=>Sn(U.key,"targetDistance",we.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:S[U.key]?.targetValue??"",onChange:we=>Sn(U.key,"targetValue",we.target.value),placeholder:"0"})]})})]},U.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{z(!1),A(je)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:de,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!j&&!V&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:ia(lt)}),a.jsx("div",{className:"pb-metrics-list",children:Ro.map(U=>{const ge=st?.bodyMetrics?.[U.key],_e=At(U.key),we=ze[U.key],fe=Me(U.key),rt=fe!==null&&fe>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[U.name,Xt("metric",U.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),we&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",we.targetValue," ",U.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ge!=null?`${ge} ${U.suffix}`:"-"}),_e!==null&&a.jsxs("span",{className:`pb-metric-change ${_e>0?"up":_e<0?"down":"same"}`,children:[_e>0?"+":"",_e," ",U.suffix]})]})]}),fe!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${rt?"hit":""}`,style:{width:`${Math.round(fe*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${rt?"hit":""}`,children:rt?"Hit!":`${Math.round(fe*100)}%`})]})]},U.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:st?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(ze).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(ze).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Xe,disabled:h,children:"Reset All Goals"})]})]}),j&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",ia(lt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),ce(st?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Ro.map(U=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[U.name," (",U.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:Q[U.key]??"",onChange:ge=>rn(U.key,ge.target.value),placeholder:"0"})]})},U.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),ce(st?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:wt,disabled:h,children:h?"Saving...":"Save"})]})]}),V&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),M(ze)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),Ro.map(U=>{const ge=st?.bodyMetrics?.[U.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:U.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ge!=null?`${ge} ${U.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",U.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:F[U.key]?.targetValue??"",onChange:_e=>Te(U.key,_e.target.value),placeholder:"0"})]})})]},U.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),M(ze)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Pe,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:t.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[We.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...We].reverse().map((U,ge)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ge*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:U.label}),a.jsx("span",{className:"pb-achievement-date",children:ia(U.achievedMonth)})]})]},ge))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${ee?"active":""}`,onClick:()=>{P(!ee),!ee&&t.length>=2&&(ye(t[0].month),Fe(t[t.length-1].month))},children:ee?"Back to Timeline":"Compare Months"})}),ee?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:W,onChange:U=>ye(U.target.value),children:t.map(U=>a.jsx("option",{value:U.month,children:ia(U.month)},U.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:Ne,onChange:U=>Fe(U.target.value),children:t.map(U=>a.jsx("option",{value:U.month,children:ia(U.month)},U.month))})]})]}),Wt&&J&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Tests"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:ia(W).split(" ")[0]}),a.jsx("span",{children:ia(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),aa.map(U=>{const ge=Wt.benchmarks?.[U.key],_e=J.benchmarks?.[U.key],we=Cl(U,ge),fe=Cl(U,_e),rt=Xp(fe,we);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:U.name}),a.jsx("span",{className:"pb-compare-val",children:ge?cd(U,ge):"-"}),a.jsx("span",{className:"pb-compare-val",children:_e?cd(U,_e):"-"}),a.jsx("span",{className:`pb-compare-change ${rt!==null?rt>=0?"positive":"negative":""}`,children:rt!==null?`${rt>=0?"+":""}${rt.toFixed(1)}%`:"-"})]},U.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:ia(W).split(" ")[0]}),a.jsx("span",{children:ia(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Ro.map(U=>{const ge=Wt.bodyMetrics?.[U.key],_e=J.bodyMetrics?.[U.key],we=ge!=null&&_e!=null?parseFloat((_e-ge).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:U.name}),a.jsx("span",{className:"pb-compare-val",children:ge!=null?`${ge}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:_e!=null?`${_e}`:"-"}),a.jsx("span",{className:`pb-compare-change ${we!==null?we>0?"positive":we<0?"negative":"neutral":""}`,children:we!==null?`${we>0?"+":""}${we} ${U.suffix}`:"-"})]},U.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((U,ge)=>{const _e=t.filter(we=>we.month<U.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ge*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:ia(U.month)}),U.benchmarks&&Object.keys(U.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Tests"}),aa.map(we=>{const fe=U.benchmarks[we.key];if(!fe)return null;const rt=_e?.benchmarks?.[we.key],Nt=Cl(we,fe),it=Cl(we,rt),_t=Xp(Nt,it);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:we.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:cd(we,fe)}),_t!==null&&a.jsxs("span",{className:`pb-timeline-change ${_t>=0?"positive":"negative"}`,children:[_t>=0?"+":"",_t.toFixed(1),"%"]})]})]},we.key)})]}),U.bodyMetrics&&Object.keys(U.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),Ro.map(we=>{const fe=U.bodyMetrics[we.key];if(fe==null)return null;const rt=_e?.bodyMetrics?.[we.key],Nt=rt!=null?parseFloat((fe-rt).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:we.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[fe," ",we.suffix]}),Nt!==null&&a.jsxs("span",{className:`pb-timeline-change ${Nt>0?"positive":Nt<0?"negative":"neutral"}`,children:[Nt>0?"+":"",Nt," ",we.suffix]})]})]},we.key)})]})]})]},U.id)})})]})})]}),q&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>me(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:q.length===1?"Target Achieved!":`${q.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:q.map((U,ge)=>a.jsx("div",{className:"pb-celebration-badge",children:U.label},ge))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),De&&a.jsxs("div",{className:`toast-notification ${De.type}`,children:[a.jsx("span",{className:"toast-icon",children:De.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:De.message}),a.jsx("button",{className:"toast-close",onClick:()=>$e(null),children:""})]}),a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>sn("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>sn("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>sn("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),St?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>sn("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]})]})}const xa=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],Ao=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function KD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function oa(s){const[e,t]=s.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function ud(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),t=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function T2(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function Rl(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Jp(s,e){return!e||e===0?null:(s-e)/e*100}function YD({data:s,exerciseKey:e,unit:t}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(z=>{const O=z.benchmarks?.[e];return O?t==="time"?O.time||0:(O.weight||0)*(O.reps||0):0}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,w=p-y*2,k=g-y*2,j=i.map((z,O)=>{const te=y+O/(i.length-1)*w,Q=y+k-(z-u)/h*k;return{x:te,y:Q,value:z}}),L=j.map((z,O)=>`${O===0?"M":"L"} ${z.x} ${z.y}`).join(" "),G=L+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:G,fill:"url(#trendGradient)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((z,O)=>a.jsx("circle",{cx:z.x,cy:z.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},O))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((z,O)=>a.jsxs("span",{className:"pb-trend-label",children:[z.month.split("-")[1],"/",z.month.split("-")[0].slice(2)]},O))})]})}function QD(){const[s,e]=x.useState("bests"),[t,i]=x.useState([]),[l,u]=x.useState(!0),[h,p]=x.useState(!1),[g,y]=x.useState(0),[w,k]=x.useState(!1),[j,L]=x.useState(!1),[G,z]=x.useState(!1),[O,te]=x.useState({}),[Q,ce]=x.useState({}),[je,He]=x.useState({}),[ze,I]=x.useState({}),[S,A]=x.useState({}),[V,D]=x.useState(!1),[F,M]=x.useState({}),[We,ft]=x.useState([]),[q,me]=x.useState(null),[De,$e]=x.useState(null),[ee,P]=x.useState(!1),[W,ye]=x.useState(""),[Ne,Fe]=x.useState(""),[Ie,nt]=x.useState({}),[gt,Qe]=x.useState({}),[qt,yn]=x.useState(null),[Pt,St]=x.useState(null),[le,an]=x.useState(""),sn=x.useRef(null),dt=x.useRef(0),Ct=x.useRef(0),lt=x.useRef("right"),st=x.useCallback(H=>{y(ue=>{const T=Math.max(0,Math.min(xa.length-1,H));return T===ue?ue:(lt.current=T>ue?"right":"left",T)})},[]),{currentUser:Qt,isClient:as,clientData:Rt,loading:Xt}=Vr(),{isDark:ts}=Ma(),wt=er(),[bn]=KE(),rn=bn.get("mode")==="corebuddy",Sn=!rn&&(!Rt?.clientType||Rt.clientType==="block"),de=x.useCallback((H,ue="info")=>{$e({message:H,type:ue}),setTimeout(()=>$e(null),4e3)},[]);x.useEffect(()=>{!Xt&&(!Qt||!as)&&wt("/")},[Qt,as,Xt,wt]),x.useEffect(()=>{Rt&&(Sn?Te():(async()=>{try{const[ue,T,C]=await Promise.all([Ln(Ke(xe,"coreBuddyPBs",Rt.id)),Ln(Ke(xe,"coreBuddyTargets",Rt.id)),Ln(Ke(xe,"coreBuddyAchievements",Rt.id))]);ue.exists()&&nt(ue.data().exercises||{}),T.exists()&&Qe(T.data().targets||{}),C.exists()&&yn(C.data())}catch(ue){console.error("Error loading Core Buddy PBs:",ue)}u(!1)})())},[Rt]);const Te=async()=>{try{const H=An(Ht(xe,"personalBests"),cn("clientId","==",Rt.id)),T=(await Tn(H)).docs.map(qe=>({id:qe.id,...qe.data()}));T.sort((qe,Be)=>qe.month.localeCompare(Be.month)),i(T);const C=An(Ht(xe,"personalBestTargets"),cn("clientId","==",Rt.id)),K=await Tn(C);if(!K.empty){const qe=K.docs[0].data();He(qe.targets||{}),I(qe.metricTargets||{}),A(qe.targets||{}),M(qe.metricTargets||{})}const re=An(Ht(xe,"achievements"),cn("clientId","==",Rt.id)),Ge=await Tn(re);Ge.empty||ft(Ge.docs[0].data().badges||[])}catch(H){console.error("Error fetching personal bests:",H)}u(!1)},Pe=async()=>{if(!Pt||!le||!Rt)return;const H=parseFloat(le),ue=Ie[Pt];if(!ue||H<=ue.weight){de("Target must be higher than current PB","error");return}p(!0);try{const T={...gt,[Pt]:{targetWeight:H,setAt:bt.now(),currentPBWhenSet:ue.weight}};await Fn(Ke(xe,"coreBuddyTargets",Rt.id),{clientId:Rt.id,targets:T,updatedAt:bt.now()}),Qe(T),St(null),an(""),de("Target set!","success")}catch(T){console.error("Error saving target:",T),de("Failed to save target","error")}p(!1)},Xe=H=>{if(!qt?.badges)return!1;const ue=gt[H];return ue?qt.badges.some(T=>T.type==="pb_target"&&T.exercise===H&&T.targetWeight===ue.targetWeight):!1},Oe=H=>{const ue=gt[H];if(!ue)return null;const T=Ie[H];if(!T)return 0;const C=ue.currentPBWhenSet||0,K=ue.targetWeight,re=K-C;return re<=0?T.weight>=K?1:0:Math.max(0,Math.min((T.weight-C)/re,1))},Me=KD(),Ve=t.find(H=>H.month===Me),xt=t.filter(H=>H.month<Me),yt=xt.length>0?xt[xt.length-1]:null;x.useEffect(()=>{Ve?(te(Ve.benchmarks||{}),ce(Ve.bodyMetrics||{})):(te({}),ce({}))},[Ve?.id]);const At=async(H,ue)=>{const T=[];if(H==="strength"?xa.forEach(C=>{const K=je[C.key];if(!K)return;const re=ue[C.key];if(!re)return;let Ge;if(K.targetType==="time"){if(!K.targetValue)return;const qe=K.startValue||0,Be=re.time||0,Lt=K.targetValue-qe;Ge=Lt===0?Be>=K.targetValue?1:0:Math.max(0,(Be-qe)/Lt)}else{if(!K.targetWeight&&!K.targetReps)return;const qe=(K.startWeight||0)*(K.startReps||0),Be=(K.targetWeight||0)*(K.targetReps||0),Lt=(re.weight||0)*(re.reps||0),Mt=Be-qe;Ge=Mt===0?Lt>=Be?1:0:Math.max(0,(Lt-qe)/Mt)}if(Ge>=1&&!(K.targetType==="time"?We.some(Be=>Be.type==="strength"&&Be.key===C.key&&Be.targetValue===K.targetValue):We.some(Be=>Be.type==="strength"&&Be.key===C.key&&Be.targetWeight===K.targetWeight&&Be.targetReps===K.targetReps))){const Be=K.targetType==="time"?`${C.name} ${K.targetValue}s`:`${C.name} ${K.targetWeight}kg  ${K.targetReps}`;T.push({type:"strength",key:C.key,...K.targetType==="time"?{targetType:"time",targetValue:K.targetValue}:{targetWeight:K.targetWeight,targetReps:K.targetReps},achievedMonth:Me,label:Be})}}):Ao.forEach(C=>{const K=ze[C.key];if(!K||!K.targetValue)return;const re=ue[C.key];if(re==null)return;const Ge=K.startValue||0,qe=K.targetValue,Be=qe-Ge;(Be===0?re===qe?1:0:Math.max(0,(re-Ge)/Be))>=1&&(We.some(qn=>qn.type==="metric"&&qn.key===C.key&&qn.targetValue===qe)||T.push({type:"metric",key:C.key,targetValue:qe,achievedMonth:Me,label:`${C.name} ${qe}${C.suffix}`}))}),T.length>0){const C=[...We,...T];await Fn(Ke(xe,"achievements",Rt.id),{clientId:Rt.id,badges:C,updatedAt:bt.now()}),ft(C),me(T),setTimeout(()=>me(null),5e3)}},Wt=(H,ue)=>{if(H==="strength"){const T=je[ue];return T?T.targetType==="time"?We.some(C=>C.type==="strength"&&C.key===ue&&C.targetValue===T.targetValue):!T.targetWeight&&!T.targetReps?!1:We.some(C=>C.type==="strength"&&C.key===ue&&C.targetWeight===T.targetWeight&&C.targetReps===T.targetReps):!1}else{const T=ze[ue];return!T||!T.targetValue?!1:We.some(C=>C.type==="metric"&&C.key===ue&&C.targetValue===T.targetValue)}},J=async()=>{p(!0);try{const H=`${Rt.id}_${Me}`,ue=Ve||{};await Fn(Ke(xe,"personalBests",H),{clientId:Rt.id,month:Me,benchmarks:O,bodyMetrics:ue.bodyMetrics||Q||{},createdAt:ue.createdAt||bt.now(),updatedAt:bt.now()}),await At("strength",O),de("Benchmarks saved!","success"),k(!1),await Te()}catch(H){console.error("Error saving benchmarks:",H),de("Failed to save. Please try again.","error")}p(!1)},be=async()=>{p(!0);try{const H=`${Rt.id}_${Me}`,ue=Ve||{};await Fn(Ke(xe,"personalBests",H),{clientId:Rt.id,month:Me,benchmarks:ue.benchmarks||O||{},bodyMetrics:Q,createdAt:ue.createdAt||bt.now(),updatedAt:bt.now()}),await At("metric",Q),de("Body metrics saved!","success"),L(!1),await Te()}catch(H){console.error("Error saving metrics:",H),de("Failed to save. Please try again.","error")}p(!1)},tt=(H,ue,T)=>{te(C=>({...C,[H]:{...C[H],[ue]:T===""?"":parseFloat(T)}}))},It=(H,ue)=>{ce(T=>({...T,[H]:ue===""?"":parseFloat(ue)}))},jt=(H,ue,T)=>{A(C=>({...C,[H]:{...C[H],[ue]:T===""?"":parseFloat(T)}}))},Jt=async()=>{p(!0);try{const H=`targets_${Rt.id}`,ue=Ve?.benchmarks||{},T={};xa.forEach(C=>{const K=ue[C.key];C.unit==="time"?S[C.key]?.targetValue&&(T[C.key]={targetType:"time",targetValue:S[C.key].targetValue,startValue:K?.time||0}):(S[C.key]?.targetWeight||S[C.key]?.targetReps)&&(T[C.key]={targetWeight:S[C.key].targetWeight||0,targetReps:S[C.key].targetReps||0,startWeight:K?.weight||0,startReps:K?.reps||0})}),await Fn(Ke(xe,"personalBestTargets",H),{clientId:Rt.id,targets:T,metricTargets:ze,updatedAt:bt.now()}),He(T),A(T),de("Targets saved!","success"),z(!1)}catch(H){console.error("Error saving targets:",H),de("Failed to save targets.","error")}p(!1)},Zt=(H,ue)=>{M(T=>({...T,[H]:{...T[H],targetValue:ue===""?"":parseFloat(ue)}}))},zt=async()=>{p(!0);try{const H=`targets_${Rt.id}`,ue={};Ao.forEach(T=>{if(F[T.key]?.targetValue){const C=Ve?.bodyMetrics?.[T.key]||0;ue[T.key]={targetValue:F[T.key].targetValue,startValue:C}}}),await Fn(Ke(xe,"personalBestTargets",H),{clientId:Rt.id,targets:je,metricTargets:ue,updatedAt:bt.now()}),I(ue),M(ue),de("Metric targets saved!","success"),D(!1)}catch(H){console.error("Error saving metric targets:",H),de("Failed to save targets.","error")}p(!1)},In=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const H=Ke(xe,"personalBestTargets",`targets_${Rt.id}`);await dr(H),He({}),I({}),A({}),M({}),de("All goals have been reset","success")}catch(H){console.error("Error resetting targets:",H),de("Failed to reset goals","error")}p(!1)}},Qn=(H,ue)=>{const T=je[H];if(!T||!ue)return null;if(T.targetType==="time"){if(!T.targetValue)return null;const qe=T.startValue||0,Be=T.targetValue,Lt=ue.time||0,Mt=Be-qe;return Mt<=0?Lt>=Be?1:0:Math.max(0,Math.min((Lt-qe)/Mt,1))}if(!T.targetWeight&&!T.targetReps)return null;const C=(T.startWeight||0)*(T.startReps||0),K=(T.targetWeight||0)*(T.targetReps||0),re=(ue.weight||0)*(ue.reps||0),Ge=K-C;return Ge<=0?re>=K?1:0:Math.max(0,Math.min((re-C)/Ge,1))},un=H=>{const ue=ze[H];if(!ue||!ue.targetValue)return null;const T=Ve?.bodyMetrics?.[H];if(T==null)return null;const C=ue.startValue||0,K=ue.targetValue,re=K-C;return re===0?T===K?1:0:Math.max(0,Math.min((T-C)/re,1))},jn=H=>{dt.current=H.touches[0].clientX,Ct.current=0},Pn=H=>{Ct.current=H.touches[0].clientX-dt.current},U=()=>{Ct.current<-50?st(g+1):Ct.current>50&&st(g-1),Ct.current=0},ge=H=>{const ue=Ve?.bodyMetrics?.[H],T=yt?.bodyMetrics?.[H];return ue==null||T==null?null:parseFloat((ue-T).toFixed(2))},_e=t.find(H=>H.month===W),we=t.find(H=>H.month===Ne);if(Xt||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Qt||!as||!Rt)return null;if(Sn&&Rt?.isJunior)return a.jsx(GD,{});const fe=xa[g],rt=Ve?.benchmarks?.[fe.key],Nt=yt?.benchmarks?.[fe.key],it=Rl(fe,rt),_t=Rl(fe,Nt),vt=Jp(it,_t),vn=Qn(fe.key,rt),or=vn!==null,Es=vn!==null&&vn>=1,Ls=or?Math.round(vn*60):it>0?15:0,Vn=je[fe.key];return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>wt(rn?"/client/core-buddy":"/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Personal Bests"}),a.jsx("p",{children:Sn?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!Sn&&a.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Ie).length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("div",{className:"pb-cb-empty-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),a.jsx("h4",{children:"No personal bests yet"}),a.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):a.jsx("div",{className:"pb-cb-grid",children:Object.entries(Ie).sort(([H],[ue])=>H.localeCompare(ue)).map(([H,ue],T)=>{const C=gt[H],K=Oe(H),re=K!==null&&K>=1,Ge=Xe(H),qe=K!==null?Math.round(K*60):60;return a.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${T*.05}s`},children:[a.jsxs("div",{className:"pb-cb-card-ring",children:[a.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:q3.map((Be,Lt)=>{const Mt=Lt<qe;return a.jsx("line",{x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,className:`pb-ring-tick ${Mt?re?"hit":"filled":"empty"}`,strokeWidth:Be.thick?"2":"1.5"},Lt)})}),a.jsx("div",{className:"pb-cb-ring-icon",children:Ge?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),a.jsxs("div",{className:"pb-cb-card-info",children:[a.jsx("h4",{className:"pb-cb-card-name",children:H}),a.jsxs("div",{className:"pb-cb-card-value",children:[ue.weight,"kg  ",ue.reps]}),ue.achievedAt&&a.jsx("div",{className:"pb-cb-card-date",children:(ue.achievedAt.toDate?ue.achievedAt.toDate():new Date(ue.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),C&&!re&&a.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",C.targetWeight,"kg (",Math.round((K||0)*100),"%)"]}),C&&re&&!Ge&&a.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),Ge&&a.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),a.jsx("div",{className:"pb-cb-card-action",children:C?re&&Ge?a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{St(H),an("")},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{St(H),an("")},children:a.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},H)})}),Object.keys(Ie).length>0&&a.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>wt("/client/core-buddy/achievements"),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),Pt&&a.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>St(null),children:a.jsxs("div",{className:"pb-cb-target-modal",onClick:H=>H.stopPropagation(),children:[a.jsx("h3",{children:"Set Target"}),a.jsx("p",{className:"pb-cb-target-exercise-name",children:Pt}),a.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",a.jsxs("strong",{children:[Ie[Pt]?.weight,"kg"]})]}),a.jsxs("div",{className:"pb-cb-target-input-wrap",children:[a.jsx("label",{children:"Your target (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:le,onChange:H=>an(H.target.value),placeholder:String((Ie[Pt]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),a.jsxs("div",{className:"pb-cb-target-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>St(null),children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Pe,disabled:h,children:h?"Saving...":"Set Target"})]})]})})]}),Sn&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:sn,onTouchStart:jn,onTouchMove:Pn,onTouchEnd:U,children:[a.jsx("div",{className:`pb-ring-container slide-from-${lt.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Ky.map((H,ue)=>{const T=ue<Math.round(Ls);return a.jsx("line",{x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,className:`pb-ring-tick ${T?Es?"hit":"filled":"empty"}`,strokeWidth:H.thick?"3":"2"},ue)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:fe.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[fe.name,Wt("strength",fe.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:rt?fe.unit==="time"?ud(rt.time):T2(rt.weight,rt.reps):"-"}),vt!==null&&a.jsxs("div",{className:`pb-ring-change ${vt>=0?"positive":"negative"}`,children:[vt>=0?"+":"",vt.toFixed(1),"%"]}),vt===null&&rt&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Vn&&a.jsx("div",{className:`pb-ring-target ${Es?"hit":""}`,children:Es?"Target hit!":Vn.targetType==="time"?`${Vn.startValue||0}s  ${Vn.targetValue}s`:`${Vn.startWeight||0}kg${Vn.startReps||0}  ${Vn.targetWeight}kg${Vn.targetReps}`}),!Vn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:xa.map((H,ue)=>a.jsx("button",{className:`pb-dot ${ue===g?"active":""}`,onClick:()=>st(ue)},ue))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>st(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>st(g+1),disabled:g===xa.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(YD,{data:t,exerciseKey:fe.key,unit:fe.unit})]})]}),!w&&!G&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:Ve?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>z(!0),children:Object.keys(je).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(ze).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:In,disabled:h,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",oa(Me)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),te(Ve?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:xa.map(H=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:O[H.key]?.weight??"",onChange:ue=>tt(H.key,"weight",ue.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:O[H.key]?.reps??"",onChange:ue=>tt(H.key,"reps",ue.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:O[H.key]?.time??"",onChange:ue=>tt(H.key,"time",ue.target.value),placeholder:"0"})]})})]},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),te(Ve?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:J,disabled:h,children:h?"Saving...":"Save"})]})]}),G&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{z(!1),A(je)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),xa.map(H=>{const ue=Ve?.benchmarks?.[H.key];let T="-";return ue&&(H.unit==="time"&&ue.time?T=`${ue.time}s`:(ue.weight||ue.reps)&&(T=`${ue.weight||0}kg  ${ue.reps||0}`)),a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",T]})]}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:S[H.key]?.targetWeight??"",onChange:C=>jt(H.key,"targetWeight",C.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:S[H.key]?.targetReps??"",onChange:C=>jt(H.key,"targetReps",C.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:S[H.key]?.targetValue??"",onChange:C=>jt(H.key,"targetValue",C.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{z(!1),A(je)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Jt,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!j&&!V&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:oa(Me)}),a.jsx("div",{className:"pb-metrics-list",children:Ao.map(H=>{const ue=Ve?.bodyMetrics?.[H.key],T=ge(H.key),C=ze[H.key],K=un(H.key),re=K!==null&&K>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[H.name,Wt("metric",H.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),C&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",C.targetValue," ",H.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ue!=null?`${ue} ${H.suffix}`:"-"}),T!==null&&a.jsxs("span",{className:`pb-metric-change ${T>0?"up":T<0?"down":"same"}`,children:[T>0?"+":"",T," ",H.suffix]})]})]}),K!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${re?"hit":""}`,style:{width:`${Math.round(K*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${re?"hit":""}`,children:re?"Hit!":`${Math.round(K*100)}%`})]})]},H.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:Ve?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(ze).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(ze).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:In,disabled:h,children:"Reset All Goals"})]})]}),j&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",oa(Me)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),ce(Ve?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Ao.map(H=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[H.name," (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:Q[H.key]??"",onChange:ue=>It(H.key,ue.target.value),placeholder:"0"})]})},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),ce(Ve?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:be,disabled:h,children:h?"Saving...":"Save"})]})]}),V&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),M(ze)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),Ao.map(H=>{const ue=Ve?.bodyMetrics?.[H.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ue!=null?`${ue} ${H.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:F[H.key]?.targetValue??"",onChange:T=>Zt(H.key,T.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),M(ze)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:zt,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:t.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[We.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...We].reverse().map((H,ue)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ue*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:H.label}),a.jsx("span",{className:"pb-achievement-date",children:oa(H.achievedMonth)})]})]},ue))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${ee?"active":""}`,onClick:()=>{P(!ee),!ee&&t.length>=2&&(ye(t[0].month),Fe(t[t.length-1].month))},children:ee?"Back to Timeline":"Compare Months"})}),ee?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:W,onChange:H=>ye(H.target.value),children:t.map(H=>a.jsx("option",{value:H.month,children:oa(H.month)},H.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:Ne,onChange:H=>Fe(H.target.value),children:t.map(H=>a.jsx("option",{value:H.month,children:oa(H.month)},H.month))})]})]}),_e&&we&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Benchmarks"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:oa(W).split(" ")[0]}),a.jsx("span",{children:oa(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),xa.map(H=>{const ue=_e.benchmarks?.[H.key],T=we.benchmarks?.[H.key],C=Rl(H,ue),K=Rl(H,T),re=Jp(K,C);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:ue?H.unit==="time"?ud(ue.time):`${ue.weight}x${ue.reps}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:T?H.unit==="time"?ud(T.time):`${T.weight}x${T.reps}`:"-"}),a.jsx("span",{className:`pb-compare-change ${re!==null?re>=0?"positive":"negative":""}`,children:re!==null?`${re>=0?"+":""}${re.toFixed(1)}%`:"-"})]},H.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:oa(W).split(" ")[0]}),a.jsx("span",{children:oa(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Ao.map(H=>{const ue=_e.bodyMetrics?.[H.key],T=we.bodyMetrics?.[H.key],C=ue!=null&&T!=null?parseFloat((T-ue).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:ue!=null?`${ue}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:T!=null?`${T}`:"-"}),a.jsx("span",{className:`pb-compare-change ${C!==null?C>0?"positive":C<0?"negative":"neutral":""}`,children:C!==null?`${C>0?"+":""}${C} ${H.suffix}`:"-"})]},H.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((H,ue)=>{const T=t.find(C=>C.month<H.month&&t.indexOf(C)===t.indexOf(H)-1)||t.filter(C=>C.month<H.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ue*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:oa(H.month)}),H.benchmarks&&Object.keys(H.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Benchmarks"}),xa.map(C=>{const K=H.benchmarks[C.key];if(!K)return null;const re=T?.benchmarks?.[C.key],Ge=Rl(C,K),qe=Rl(C,re),Be=Jp(Ge,qe);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:C.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:C.unit==="time"?ud(K.time):T2(K.weight,K.reps)}),Be!==null&&a.jsxs("span",{className:`pb-timeline-change ${Be>=0?"positive":"negative"}`,children:[Be>=0?"+":"",Be.toFixed(1),"%"]})]})]},C.key)})]}),H.bodyMetrics&&Object.keys(H.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),Ao.map(C=>{const K=H.bodyMetrics[C.key];if(K==null)return null;const re=T?.bodyMetrics?.[C.key],Ge=re!=null?parseFloat((K-re).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:C.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[K," ",C.suffix]}),Ge!==null&&a.jsxs("span",{className:`pb-timeline-change ${Ge>0?"positive":Ge<0?"negative":"neutral"}`,children:[Ge>0?"+":"",Ge," ",C.suffix]})]})]},C.key)})]})]})]},H.id)})})]})})]})]}),q&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>me(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:q.length===1?"Target Achieved!":`${q.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:q.map((H,ue)=>a.jsx("div",{className:"pb-celebration-badge",children:H.label},ue))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),De&&a.jsxs("div",{className:`toast-notification ${De.type}`,children:[a.jsx("span",{className:"toast-icon",children:De.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:De.message}),a.jsx("button",{className:"toast-close",onClick:()=>$e(null),children:""})]}),Sn&&a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>wt("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>wt("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>wt("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),Rt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>wt("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]}),rn&&a.jsx(Aa,{active:"progress"})]})}const XD=x.lazy(()=>Er(()=>import("./Dashboard-CkGHCexQ.js"),__vite__mapDeps([0,1]))),JD=x.lazy(()=>Er(()=>import("./AddClient-MRSTfObW.js"),__vite__mapDeps([2,3]))),ZD=x.lazy(()=>Er(()=>import("./ClientDashboard-sbYS9XCo.js"),[])),eP=x.lazy(()=>Er(()=>import("./ClientForms-C0sxSyLd.js"),__vite__mapDeps([4,5]))),tP=x.lazy(()=>Er(()=>import("./ClientTools-xjZab51v.js"),__vite__mapDeps([6,7]))),nP=x.lazy(()=>Er(()=>import("./MacroCalculator-D-JA2Cvn.js"),__vite__mapDeps([8,7]))),sP=x.lazy(()=>Er(()=>import("./ProteinSnacks-CgbxcDD8.js"),__vite__mapDeps([9,7]))),rP=x.lazy(()=>Er(()=>import("./DailyMotivation-JYTYtj3e.js"),__vite__mapDeps([10,7]))),aP=x.lazy(()=>Er(()=>import("./CircuitDashboard-BdUOCcw_.js"),__vite__mapDeps([11,12]))),iP=x.lazy(()=>Er(()=>import("./CircuitBooking-DhYzVtyO.js"),__vite__mapDeps([13,14,12]))),oP=x.lazy(()=>Er(()=>import("./Leaderboard-CgV-6G4E.js"),__vite__mapDeps([15,16]))),lP=x.lazy(()=>Er(()=>import("./UpgradePage-BBtsvkHA.js"),__vite__mapDeps([17,18]))),cP=x.lazy(()=>Er(()=>import("./SignUp-opwNQ36O.js"),[]));function uP({children:s}){const{pathname:e}=fa();return x.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),x.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function hP(){const s=er();return x.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function dP(){return a.jsx(L3,{children:a.jsx(P3,{children:a.jsx(U3,{children:a.jsxs(qE,{basename:"/login",children:[a.jsx(hP,{}),a.jsx(uP,{children:a.jsx(x.Suspense,{fallback:null,children:a.jsxs(bE,{children:[a.jsx(rs,{path:"/",element:a.jsx(z3,{})}),a.jsx(rs,{path:"/dashboard",element:a.jsx(XD,{})}),a.jsx(rs,{path:"/add-client",element:a.jsx(JD,{})}),a.jsx(rs,{path:"/client",element:a.jsx(ZD,{})}),a.jsx(rs,{path:"/client/forms",element:a.jsx(eP,{})}),a.jsx(rs,{path:"/client/tools",element:a.jsx(tP,{})}),a.jsx(rs,{path:"/client/tools/macros",element:a.jsx(nP,{})}),a.jsx(rs,{path:"/client/tools/snacks",element:a.jsx(sP,{})}),a.jsx(rs,{path:"/client/tools/motivation",element:a.jsx(rP,{})}),a.jsx(rs,{path:"/client/personal-bests",element:a.jsx(Co,{feature:"personalBests",children:a.jsx(QD,{})})}),a.jsx(rs,{path:"/client/circuit",element:a.jsx(aP,{})}),a.jsx(rs,{path:"/client/circuit/booking",element:a.jsx(iP,{})}),a.jsx(rs,{path:"/client/core-buddy",element:a.jsx(cD,{})}),a.jsx(rs,{path:"/client/core-buddy/nutrition",element:a.jsx(Co,{feature:"nutrition",children:a.jsx(dD,{})})}),a.jsx(rs,{path:"/client/core-buddy/workouts",element:a.jsx(kD,{})}),a.jsx(rs,{path:"/client/core-buddy/programmes",element:a.jsx(Co,{feature:"programmes",children:a.jsx(ND,{})})}),a.jsx(rs,{path:"/client/core-buddy/achievements",element:a.jsx(Co,{feature:"achievements",children:a.jsx(DD,{})})}),a.jsx(rs,{path:"/client/core-buddy/consistency",element:a.jsx(Co,{feature:"consistency",children:a.jsx(OD,{})})}),a.jsx(rs,{path:"/client/core-buddy/buddies",element:a.jsx(Co,{feature:"buddies",children:a.jsx(VD,{})})}),a.jsx(rs,{path:"/client/core-buddy/profile/:userId",element:a.jsx(FD,{})}),a.jsx(rs,{path:"/client/leaderboard",element:a.jsx(Co,{feature:"leaderboard",children:a.jsx(oP,{})})}),a.jsx(rs,{path:"/signup",element:a.jsx(cP,{})}),a.jsx(rs,{path:"/upgrade",element:a.jsx(lP,{})}),a.jsx(rs,{path:"*",element:a.jsx(gE,{to:"/",replace:!0})})]})})})]})})})})}yj.createRoot(document.getElementById("root")).render(a.jsx(x.StrictMode,{children:a.jsx(dP,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{Aa as C,bt as T,ai as a,dr as b,Ht as c,xe as d,Ke as e,PC as f,Tn as g,UC as h,Ln as i,a as j,Vr as k,Ma as l,er as m,Ky as n,Hd as o,Fn as p,An as q,x as r,mP as s,Ak as t,Hi as u,cn as w};
