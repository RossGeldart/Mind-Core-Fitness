const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-Dzh8Afz8.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-BWe7lU3i.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-BHKPxJJw.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-B7HqyZt5.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-BbJ4Vv0Z.js","assets/ProteinSnacks-Dxeh4AfE.js","assets/DailyMotivation-BTHMSFUv.js","assets/CircuitDashboard-Dyb34zXL.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-DR6TkRK1.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-tZp59dUS.js","assets/Leaderboard-lyZEtGxw.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var ap={exports:{}},Oc={};var e1;function QT(){if(e1)return Oc;e1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:d,ref:l!==void 0?l:null,props:u}}return Oc.Fragment=e,Oc.jsx=n,Oc.jsxs=n,Oc}var t1;function XT(){return t1||(t1=1,ap.exports=QT()),ap.exports}var a=XT(),ip={exports:{}},It={};var n1;function JT(){if(n1)return It;n1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function L(V){return V===null||typeof V!="object"?null:(V=S&&V[S]||V["@@iterator"],typeof V=="function"?V:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,O={};function te(V,G,fe){this.props=V,this.context=G,this.refs=O,this.updater=fe||W}te.prototype.isReactComponent={},te.prototype.setState=function(V,G){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,G,"setState")},te.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function X(){}X.prototype=te.prototype;function he(V,G,fe){this.props=V,this.context=G,this.refs=O,this.updater=fe||W}var Se=he.prototype=new X;Se.constructor=he,z(Se,te.prototype),Se.isPureReactComponent=!0;var Ue=Array.isArray;function Le(){}var A={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function R(V,G,fe){var Ne=fe.ref;return{$$typeof:s,type:V,key:G,ref:Ne!==void 0?Ne:null,props:fe}}function D(V,G){return R(V.type,G,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function F(V){var G={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(fe){return G[fe]})}var I=/\/+/g;function ze(V,G){return typeof V=="object"&&V!==null&&V.key!=null?F(""+V.key):G.toString(36)}function vt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Le,Le):(V.status="pending",V.then(function(G){V.status==="pending"&&(V.status="fulfilled",V.value=G)},function(G){V.status==="pending"&&(V.status="rejected",V.reason=G)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,G,fe,Ne,Me){var Oe=typeof V;(Oe==="undefined"||Oe==="boolean")&&(V=null);var tt=!1;if(V===null)tt=!0;else switch(Oe){case"bigint":case"string":case"number":tt=!0;break;case"object":switch(V.$$typeof){case s:case e:tt=!0;break;case w:return tt=V._init,Y(tt(V._payload),G,fe,Ne,Me)}}if(tt)return Me=Me(V),tt=Ne===""?"."+ze(V,0):Ne,Ue(Me)?(fe="",tt!=null&&(fe=tt.replace(I,"$&/")+"/"),Y(Me,G,fe,"",function(We){return We})):Me!=null&&(M(Me)&&(Me=D(Me,fe+(Me.key==null||V&&V.key===Me.key?"":(""+Me.key).replace(I,"$&/")+"/")+tt)),G.push(Me)),1;tt=0;var He=Ne===""?".":Ne+":";if(Ue(V))for(var ie=0;ie<V.length;ie++)Ne=V[ie],Oe=He+ze(Ne,ie),tt+=Y(Ne,G,fe,Oe,Me);else if(ie=L(V),typeof ie=="function")for(V=ie.call(V),ie=0;!(Ne=V.next()).done;)Ne=Ne.value,Oe=He+ze(Ne,ie++),tt+=Y(Ne,G,fe,Oe,Me);else if(Oe==="object"){if(typeof V.then=="function")return Y(vt(V),G,fe,Ne,Me);throw G=String(V),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return tt}function Ee(V,G,fe){if(V==null)return V;var Ne=[],Me=0;return Y(V,Ne,"","",function(Oe){return G.call(fe,Oe,Me++)}),Ne}function Pe(V){if(V._status===-1){var G=V._result;G=G(),G.then(function(fe){(V._status===0||V._status===-1)&&(V._status=1,V._result=fe)},function(fe){(V._status===0||V._status===-1)&&(V._status=2,V._result=fe)}),V._status===-1&&(V._status=0,V._result=G)}if(V._status===1)return V._result.default;throw V._result}var oe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ve={map:Ee,forEach:function(V,G,fe){Ee(V,function(){G.apply(this,arguments)},fe)},count:function(V){var G=0;return Ee(V,function(){G++}),G},toArray:function(V){return Ee(V,function(G){return G})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return It.Activity=E,It.Children=Ve,It.Component=te,It.Fragment=n,It.Profiler=l,It.PureComponent=he,It.StrictMode=i,It.Suspense=g,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,It.__COMPILER_RUNTIME={__proto__:null,c:function(V){return A.H.useMemoCache(V)}},It.cache=function(V){return function(){return V.apply(null,arguments)}},It.cacheSignal=function(){return null},It.cloneElement=function(V,G,fe){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Ne=z({},V.props),Me=V.key;if(G!=null)for(Oe in G.key!==void 0&&(Me=""+G.key),G)!j.call(G,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&G.ref===void 0||(Ne[Oe]=G[Oe]);var Oe=arguments.length-2;if(Oe===1)Ne.children=fe;else if(1<Oe){for(var tt=Array(Oe),He=0;He<Oe;He++)tt[He]=arguments[He+2];Ne.children=tt}return R(V.type,Me,Ne)},It.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},It.createElement=function(V,G,fe){var Ne,Me={},Oe=null;if(G!=null)for(Ne in G.key!==void 0&&(Oe=""+G.key),G)j.call(G,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(Me[Ne]=G[Ne]);var tt=arguments.length-2;if(tt===1)Me.children=fe;else if(1<tt){for(var He=Array(tt),ie=0;ie<tt;ie++)He[ie]=arguments[ie+2];Me.children=He}if(V&&V.defaultProps)for(Ne in tt=V.defaultProps,tt)Me[Ne]===void 0&&(Me[Ne]=tt[Ne]);return R(V,Oe,Me)},It.createRef=function(){return{current:null}},It.forwardRef=function(V){return{$$typeof:p,render:V}},It.isValidElement=M,It.lazy=function(V){return{$$typeof:w,_payload:{_status:-1,_result:V},_init:Pe}},It.memo=function(V,G){return{$$typeof:y,type:V,compare:G===void 0?null:G}},It.startTransition=function(V){var G=A.T,fe={};A.T=fe;try{var Ne=V(),Me=A.S;Me!==null&&Me(fe,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(Le,oe)}catch(Oe){oe(Oe)}finally{G!==null&&fe.types!==null&&(G.types=fe.types),A.T=G}},It.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},It.use=function(V){return A.H.use(V)},It.useActionState=function(V,G,fe){return A.H.useActionState(V,G,fe)},It.useCallback=function(V,G){return A.H.useCallback(V,G)},It.useContext=function(V){return A.H.useContext(V)},It.useDebugValue=function(){},It.useDeferredValue=function(V,G){return A.H.useDeferredValue(V,G)},It.useEffect=function(V,G){return A.H.useEffect(V,G)},It.useEffectEvent=function(V){return A.H.useEffectEvent(V)},It.useId=function(){return A.H.useId()},It.useImperativeHandle=function(V,G,fe){return A.H.useImperativeHandle(V,G,fe)},It.useInsertionEffect=function(V,G){return A.H.useInsertionEffect(V,G)},It.useLayoutEffect=function(V,G){return A.H.useLayoutEffect(V,G)},It.useMemo=function(V,G){return A.H.useMemo(V,G)},It.useOptimistic=function(V,G){return A.H.useOptimistic(V,G)},It.useReducer=function(V,G,fe){return A.H.useReducer(V,G,fe)},It.useRef=function(V){return A.H.useRef(V)},It.useState=function(V){return A.H.useState(V)},It.useSyncExternalStore=function(V,G,fe){return A.H.useSyncExternalStore(V,G,fe)},It.useTransition=function(){return A.H.useTransition()},It.version="19.2.4",It}var s1;function yg(){return s1||(s1=1,ip.exports=JT()),ip.exports}var k=yg(),op={exports:{}},Vc={},lp={exports:{}},cp={};var r1;function ZT(){return r1||(r1=1,(function(s){function e(Y,Ee){var Pe=Y.length;Y.push(Ee);e:for(;0<Pe;){var oe=Pe-1>>>1,Ve=Y[oe];if(0<l(Ve,Ee))Y[oe]=Ee,Y[Pe]=Ve,Pe=oe;else break e}}function n(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var Ee=Y[0],Pe=Y.pop();if(Pe!==Ee){Y[0]=Pe;e:for(var oe=0,Ve=Y.length,V=Ve>>>1;oe<V;){var G=2*(oe+1)-1,fe=Y[G],Ne=G+1,Me=Y[Ne];if(0>l(fe,Pe))Ne<Ve&&0>l(Me,fe)?(Y[oe]=Me,Y[Ne]=Pe,oe=Ne):(Y[oe]=fe,Y[G]=Pe,oe=G);else if(Ne<Ve&&0>l(Me,Pe))Y[oe]=Me,Y[Ne]=Pe,oe=Ne;else break e}}return Ee}function l(Y,Ee){var Pe=Y.sortIndex-Ee.sortIndex;return Pe!==0?Pe:Y.id-Ee.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],w=1,E=null,S=3,L=!1,W=!1,z=!1,O=!1,te=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function Se(Y){for(var Ee=n(y);Ee!==null;){if(Ee.callback===null)i(y);else if(Ee.startTime<=Y)i(y),Ee.sortIndex=Ee.expirationTime,e(g,Ee);else break;Ee=n(y)}}function Ue(Y){if(z=!1,Se(Y),!W)if(n(g)!==null)W=!0,Le||(Le=!0,F());else{var Ee=n(y);Ee!==null&&vt(Ue,Ee.startTime-Y)}}var Le=!1,A=-1,j=5,R=-1;function D(){return O?!0:!(s.unstable_now()-R<j)}function M(){if(O=!1,Le){var Y=s.unstable_now();R=Y;var Ee=!0;try{e:{W=!1,z&&(z=!1,X(A),A=-1),L=!0;var Pe=S;try{t:{for(Se(Y),E=n(g);E!==null&&!(E.expirationTime>Y&&D());){var oe=E.callback;if(typeof oe=="function"){E.callback=null,S=E.priorityLevel;var Ve=oe(E.expirationTime<=Y);if(Y=s.unstable_now(),typeof Ve=="function"){E.callback=Ve,Se(Y),Ee=!0;break t}E===n(g)&&i(g),Se(Y)}else i(g);E=n(g)}if(E!==null)Ee=!0;else{var V=n(y);V!==null&&vt(Ue,V.startTime-Y),Ee=!1}}break e}finally{E=null,S=Pe,L=!1}Ee=void 0}}finally{Ee?F():Le=!1}}}var F;if(typeof he=="function")F=function(){he(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ze=I.port2;I.port1.onmessage=M,F=function(){ze.postMessage(null)}}else F=function(){te(M,0)};function vt(Y,Ee){A=te(function(){Y(s.unstable_now())},Ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var Ee=3;break;default:Ee=S}var Pe=S;S=Ee;try{return Y()}finally{S=Pe}},s.unstable_requestPaint=function(){O=!0},s.unstable_runWithPriority=function(Y,Ee){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Pe=S;S=Y;try{return Ee()}finally{S=Pe}},s.unstable_scheduleCallback=function(Y,Ee,Pe){var oe=s.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?oe+Pe:oe):Pe=oe,Y){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=Pe+Ve,Y={id:w++,callback:Ee,priorityLevel:Y,startTime:Pe,expirationTime:Ve,sortIndex:-1},Pe>oe?(Y.sortIndex=Pe,e(y,Y),n(g)===null&&Y===n(y)&&(z?(X(A),A=-1):z=!0,vt(Ue,Pe-oe))):(Y.sortIndex=Ve,e(g,Y),W||L||(W=!0,Le||(Le=!0,F()))),Y},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(Y){var Ee=S;return function(){var Pe=S;S=Ee;try{return Y.apply(this,arguments)}finally{S=Pe}}}})(cp)),cp}var a1;function eE(){return a1||(a1=1,lp.exports=ZT()),lp.exports}var up={exports:{}},Ms={};var i1;function tE(){if(i1)return Ms;i1=1;var s=yg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:g,containerInfo:y,implementation:w}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ms.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ms.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,w)},Ms.flushSync=function(g){var y=d.T,w=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=w,i.d.f()}},Ms.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Ms.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Ms.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,E=p(w,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:L}):w==="script"&&i.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ms.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Ms.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,E=p(w,y.crossOrigin);i.d.L(g,w,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ms.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Ms.requestFormReset=function(g){i.d.r(g)},Ms.unstable_batchedUpdates=function(g,y){return g(y)},Ms.useFormState=function(g,y,w){return d.H.useFormState(g,y,w)},Ms.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ms.version="19.2.4",Ms}var o1;function nE(){if(o1)return up.exports;o1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),up.exports=tE(),up.exports}var l1;function sE(){if(l1)return Vc;l1=1;var s=eE(),e=yg(),n=nE();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var x=!1,N=f.child;N;){if(N===o){x=!0,o=f,c=m;break}if(N===c){x=!0,c=f,o=m;break}N=N.sibling}if(!x){for(N=m.child;N;){if(N===o){x=!0,o=m,c=f;break}if(N===c){x=!0,c=m,o=f;break}N=N.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:r}function w(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=w(t),r!==null)return r;t=t.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),he=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function ze(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case te:return"Profiler";case O:return"StrictMode";case Ue:return"Suspense";case Le:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case he:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case Se:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A:return r=t.displayName||null,r!==null?r:ze(t.type)||"Memo";case j:r=t._payload,t=t._init;try{return ze(t(r))}catch{}}return null}var vt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},oe=[],Ve=-1;function V(t){return{current:t}}function G(t){0>Ve||(t.current=oe[Ve],oe[Ve]=null,Ve--)}function fe(t,r){Ve++,oe[Ve]=t.current,t.current=r}var Ne=V(null),Me=V(null),Oe=V(null),tt=V(null);function He(t,r){switch(fe(Oe,r),fe(Me,t),fe(Ne,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?k0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=k0(r),t=T0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(Ne),fe(Ne,t)}function ie(){G(Ne),G(Me),G(Oe)}function We(t){t.memoizedState!==null&&fe(tt,t);var r=Ne.current,o=T0(r,t.type);r!==o&&(fe(Me,t),fe(Ne,o))}function wt(t){Me.current===t&&(G(Ne),G(Me)),tt.current===t&&(G(tt),Mc._currentValue=Pe)}var ut,ft;function re(t){if(ut===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);ut=r&&r[1]||"",ft=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ut+t+ft}var Ft=!1;function kt(t,r){if(!t||Ft)return"";Ft=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ue){var ae=ue}Reflect.construct(t,[],Ce)}else{try{Ce.call()}catch(ue){ae=ue}t.call(Ce.prototype)}}else{try{throw Error()}catch(ue){ae=ue}(Ce=t())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ue){if(ue&&ae&&typeof ue.stack=="string")return[ue.stack,ae.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],N=m[1];if(x&&N){var B=x.split(`
`),se=N.split(`
`);for(f=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;f<se.length&&!se[f].includes("DetermineComponentFrameRoot");)f++;if(c===B.length||f===se.length)for(c=B.length-1,f=se.length-1;1<=c&&0<=f&&B[c]!==se[f];)f--;for(;1<=c&&0<=f;c--,f--)if(B[c]!==se[f]){if(c!==1||f!==1)do if(c--,f--,0>f||B[c]!==se[f]){var ve=`
`+B[c].replace(" at new "," at ");return t.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",t.displayName)),ve}while(1<=c&&0<=f);break}}}finally{Ft=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?re(o):""}function bt(t,r){switch(t.tag){case 26:case 27:case 5:return re(t.type);case 16:return re("Lazy");case 13:return t.child!==r&&r!==null?re("Suspense Fallback"):re("Suspense");case 19:return re("SuspenseList");case 0:case 15:return kt(t.type,!1);case 11:return kt(t.type.render,!1);case 1:return kt(t.type,!0);case 31:return re("Activity");default:return""}}function jt(t){try{var r="",o=null;do r+=bt(t,o),o=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var lt=Object.prototype.hasOwnProperty,Ye=s.unstable_scheduleCallback,qt=s.unstable_cancelCallback,ns=s.unstable_shouldYield,Nt=s.unstable_requestPaint,Lt=s.unstable_now,In=s.unstable_getCurrentPriorityLevel,Ct=s.unstable_ImmediatePriority,cn=s.unstable_UserBlockingPriority,ge=s.unstable_NormalPriority,je=s.unstable_LowPriority,De=s.unstable_IdlePriority,et=s.log,Qe=s.unstable_setDisableYieldValue,Be=null,nt=null;function Ge(t){if(typeof et=="function"&&Qe(t),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(Be,t)}catch{}}var $e=Math.clz32?Math.clz32:Bt,St=Math.log,Xt=Math.LN2;function Bt(t){return t>>>=0,t===0?32:31-(St(t)/Xt|0)|0}var tn=256,Mn=262144,Rt=4194304;function an(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Un(t,r,o){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var N=c&134217727;return N!==0?(c=N&~m,c!==0?f=an(c):(x&=N,x!==0?f=an(x):o||(o=N&~t,o!==0&&(f=an(o))))):(N=c&~m,N!==0?f=an(N):x!==0?f=an(x):o||(o=c&~t,o!==0&&(f=an(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function wn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ss(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rs(){var t=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),t}function Sn(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Yn(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Hn(t,r,o,c,f,m){var x=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var N=t.entanglements,B=t.expirationTimes,se=t.hiddenUpdates;for(o=x&~o;0<o;){var ve=31-$e(o),Ce=1<<ve;N[ve]=0,B[ve]=-1;var ae=se[ve];if(ae!==null)for(se[ve]=null,ve=0;ve<ae.length;ve++){var ue=ae[ve];ue!==null&&(ue.lane&=-536870913)}o&=~Ce}c!==0&&vs(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~r))}function vs(t,r,o){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-$e(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|o&261930}function Qn(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-$e(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}function Rs(t,r){var o=r&-r;return o=(o&42)!==0?1:H(o),(o&(t.suspendedLanes|r))!==0?0:o}function H(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function me(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function we(){var t=Ee.p;return t!==0?t:(t=window.event,t===void 0?32:G0(t.type))}function be(t,r){var o=Ee.p;try{return Ee.p=t,r()}finally{Ee.p=o}}var de=Math.random().toString(36).slice(2),rt="__reactFiber$"+de,mt="__reactProps$"+de,it="__reactContainer$"+de,xt="__reactEvents$"+de,pt="__reactListeners$"+de,Jt="__reactHandles$"+de,As="__reactResources$"+de,as="__reactMarker$"+de;function bs(t){delete t[rt],delete t[mt],delete t[xt],delete t[pt],delete t[Jt]}function _n(t){var r=t[rt];if(r)return r;for(var o=t.parentNode;o;){if(r=o[it]||o[rt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=A0(t);t!==null;){if(o=t[rt])return o;t=A0(t)}return r}t=o,o=t.parentNode}return null}function q(t){if(t=t[rt]||t[it]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function le(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function b(t){var r=t[As];return r||(r=t[As]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function T(t){t[as]=!0}var P=new Set,K={};function Ae(t,r){ye(t,r),ye(t+"Capture",r)}function ye(t,r){for(K[t]=r,t=0;t<r.length;t++)P.add(r[t])}var xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},Ze={};function U(t){return lt.call(Ze,t)?!0:lt.call(st,t)?!1:xe.test(t)?Ze[t]=!0:(st[t]=!0,!1)}function J(t,r,o){if(U(r))if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+o)}}function Z(t,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+o)}}function pe(t,r,o,c){if(c===null)t.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(r,o,""+c)}}function ke(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fe(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ot(t,r,o){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,m.call(this,x)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ke(t){if(!t._valueTracker){var r=Fe(t)?"checked":"value";t._valueTracker=ot(t,r,""+t[r])}}function Ot(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=Fe(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function dn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ut=/[\n"\\]/g;function un(t){return t.replace(Ut,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Zs(t,r,o,c,f,m,x,N){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),r!=null?x==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+ke(r)):t.value!==""+ke(r)&&(t.value=""+ke(r)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),r!=null?ms(t,x,ke(r)):o!=null?ms(t,x,ke(o)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+ke(N):t.removeAttribute("name")}function is(t,r,o,c,f,m,x,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ke(t);return}o=o!=null?""+ke(o):"",r=r!=null?""+ke(r):o,N||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=N?t.checked:!!c,t.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Ke(t)}function ms(t,r,o){r==="number"&&dn(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function ps(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+ke(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function zt(t,r,o){if(r!=null&&(r=""+ke(r),r!==t.value&&(t.value=r),o==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=o!=null?""+ke(o):""}function Tn(t,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(vt(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=ke(r),t.defaultValue=o,c=t.textContent,c===o&&c!==""&&c!==null&&(t.value=c),Ke(t)}function Nn(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var er=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Is(t,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,o):typeof o!="number"||o===0||er.has(r)?r==="float"?t.cssFloat=o:t[r]=(""+o).trim():t[r]=o+"px"}function Dn(t,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Is(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Is(t,m,r[m])}function zn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $r=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wa(t){return Sr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Bs(){}var Yl=null;function hr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ga=null,Wr=null;function $i(t){var r=q(t);if(r&&(t=r.stateNode)){var o=t[mt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Zs(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+un(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=c[mt]||null;if(!f)throw Error(i(90));Zs(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===t.form&&Ot(c)}break e;case"textarea":zt(t,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&ps(t,!!o.multiple,r,!1)}}}var Po=!1;function Ka(t,r,o){if(Po)return t(r,o);Po=!0;try{var c=t(r);return c}finally{if(Po=!1,(Ga!==null||Wr!==null)&&(Th(),Ga&&(r=Ga,t=Wr,Wr=Ga=null,$i(r),t)))for(r=0;r<t.length;r++)$i(t[r])}}function Nr(t,r){var o=t.stateNode;if(o===null)return null;var c=o[mt]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wi=!1;if(dr)try{var pn={};Object.defineProperty(pn,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",pn,pn),window.removeEventListener("test",pn,pn)}catch{Wi=!1}var Gr=null,Ql=null,Gi=null;function Xl(){if(Gi)return Gi;var t,r=Ql,o=r.length,c,f="value"in Gr?Gr.value:Gr.textContent,m=f.length;for(t=0;t<o&&r[t]===f[t];t++);var x=o-t;for(c=1;c<=x&&r[o-c]===f[m-c];c++);return Gi=f.slice(t,1<c?1-c:void 0)}function Ki(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function pa(){return!0}function Cr(){return!1}function _s(t){function r(o,c,f,m,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(o=t[N],this[N]=o?o(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?pa:Cr,this.isPropagationStopped=Cr,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),r}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kr=_s(ga),Ya=E({},ga,{view:0,detail:0}),Jl=_s(Ya),Qa,Lo,Yr,Oo=E({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yr&&(Yr&&t.type==="mousemove"?(Qa=t.screenX-Yr.screenX,Lo=t.screenY-Yr.screenY):Lo=Qa=0,Yr=t),Qa)},movementY:function(t){return"movementY"in t?t.movementY:Lo}}),Zl=_s(Oo),Yi=E({},Oo,{dataTransfer:0}),Iu=_s(Yi),Mu=E({},Ya,{relatedTarget:0}),Qi=_s(Mu),ec=E({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),Du=_s(ec),Vo=E({},ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pu=_s(Vo),Lu=E({},ga,{data:0}),Qr=_s(Lu),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Bu[t])?!!r[t]:!1}function Xa(){return Uu}var Us=E({},Ya,{key:function(t){if(t.key){var r=Ou[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ki(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xa,charCode:function(t){return t.type==="keypress"?Ki(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ki(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zu=_s(Us),Fu=E({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ya=_s(Fu),h=E({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xa}),v=_s(h),_=E({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=_s(_),ee=E({},Oo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=_s(ee),qe=E({},ga,{newState:0,oldState:0}),Dt=_s(qe),Xn=[9,13,27,32],on=dr&&"CompositionEvent"in window,Pn=null;dr&&"documentMode"in document&&(Pn=document.documentMode);var fr=dr&&"TextEvent"in window&&!Pn,Xr=dr&&(!on||Pn&&8<Pn&&11>=Pn),Rr=" ",Ar=!1;function Xi(t,r){switch(t){case"keyup":return Xn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function xk(t,r){switch(t){case"compositionend":return Bo(r);case"keypress":return r.which!==32?null:(Ar=!0,Rr);case"textInput":return t=r.data,t===Rr&&Ar?null:t;default:return null}}function wk(t,r){if(Uo)return t==="compositionend"||!on&&Xi(t,r)?(t=Xl(),Gi=Ql=Gr=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Xr&&r.locale!=="ko"?null:r.data;default:return null}}var _k={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!_k[t.type]:r==="textarea"}function Py(t,r,o,c){Ga?Wr?Wr.push(c):Wr=[c]:Ga=c,r=Ah(r,"onChange"),0<r.length&&(o=new Kr("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var tc=null,nc=null;function kk(t){y0(t,0)}function qu(t){var r=le(t);if(Ot(r))return t}function Ly(t,r){if(t==="change")return r}var Oy=!1;if(dr){var df;if(dr){var ff="oninput"in document;if(!ff){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),ff=typeof Vy.oninput=="function"}df=ff}else df=!1;Oy=df&&(!document.documentMode||9<document.documentMode)}function By(){tc&&(tc.detachEvent("onpropertychange",Uy),nc=tc=null)}function Uy(t){if(t.propertyName==="value"&&qu(nc)){var r=[];Py(r,nc,t,hr(t)),Ka(kk,r)}}function Tk(t,r,o){t==="focusin"?(By(),tc=r,nc=o,tc.attachEvent("onpropertychange",Uy)):t==="focusout"&&By()}function Ek(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qu(nc)}function jk(t,r){if(t==="click")return qu(r)}function Sk(t,r){if(t==="input"||t==="change")return qu(r)}function Nk(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var tr=typeof Object.is=="function"?Object.is:Nk;function sc(t,r){if(tr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!lt.call(r,f)||!tr(t[f],r[f]))return!1}return!0}function zy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fy(t,r){var o=zy(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zy(o)}}function qy(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?qy(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Hy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=dn(t.document);r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=dn(t.document)}return r}function mf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Ck=dr&&"documentMode"in document&&11>=document.documentMode,zo=null,pf=null,rc=null,gf=!1;function $y(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;gf||zo==null||zo!==dn(c)||(c=zo,"selectionStart"in c&&mf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),rc&&sc(rc,c)||(rc=c,c=Ah(pf,"onSelect"),0<c.length&&(r=new Kr("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=zo)))}function Ji(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Fo={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionrun:Ji("Transition","TransitionRun"),transitionstart:Ji("Transition","TransitionStart"),transitioncancel:Ji("Transition","TransitionCancel"),transitionend:Ji("Transition","TransitionEnd")},yf={},Wy={};dr&&(Wy=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function Zi(t){if(yf[t])return yf[t];if(!Fo[t])return t;var r=Fo[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Wy)return yf[t]=r[o];return t}var Gy=Zi("animationend"),Ky=Zi("animationiteration"),Yy=Zi("animationstart"),Rk=Zi("transitionrun"),Ak=Zi("transitionstart"),Ik=Zi("transitioncancel"),Qy=Zi("transitionend"),Xy=new Map,vf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vf.push("scrollEnd");function Ir(t,r){Xy.set(t,r),Ae(r,[t])}var Hu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},mr=[],qo=0,bf=0;function $u(){for(var t=qo,r=bf=qo=0;r<t;){var o=mr[r];mr[r++]=null;var c=mr[r];mr[r++]=null;var f=mr[r];mr[r++]=null;var m=mr[r];if(mr[r++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&Jy(o,f,m)}}function Wu(t,r,o,c){mr[qo++]=t,mr[qo++]=r,mr[qo++]=o,mr[qo++]=c,bf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function xf(t,r,o,c){return Wu(t,r,o,c),Gu(t)}function eo(t,r){return Wu(t,null,null,r),Gu(t)}function Jy(t,r,o){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=t.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-$e(o),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function Gu(t){if(50<jc)throw jc=0,Cm=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ho={};function Mk(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(t,r,o,c){return new Mk(t,r,o,c)}function wf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function va(t,r){var o=t.alternate;return o===null?(o=nr(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function Zy(t,r){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,r=o.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Ku(t,r,o,c,f,m){var x=0;if(c=t,typeof t=="function")wf(t)&&(x=1);else if(typeof t=="string")x=VT(t,o,Ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=nr(31,o,r,f),t.elementType=R,t.lanes=m,t;case z:return to(o.children,f,m,r);case O:x=8,f|=24;break;case te:return t=nr(12,o,r,f|2),t.elementType=te,t.lanes=m,t;case Ue:return t=nr(13,o,r,f),t.elementType=Ue,t.lanes=m,t;case Le:return t=nr(19,o,r,f),t.elementType=Le,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case he:x=10;break e;case X:x=9;break e;case Se:x=11;break e;case A:x=14;break e;case j:x=16,c=null;break e}x=29,o=Error(i(130,t===null?"null":typeof t,"")),c=null}return r=nr(x,o,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function to(t,r,o,c){return t=nr(7,t,c,r),t.lanes=o,t}function _f(t,r,o){return t=nr(6,t,null,r),t.lanes=o,t}function ev(t){var r=nr(18,null,null,0);return r.stateNode=t,r}function kf(t,r,o){return r=nr(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var tv=new WeakMap;function pr(t,r){if(typeof t=="object"&&t!==null){var o=tv.get(t);return o!==void 0?o:(r={value:t,source:r,stack:jt(r)},tv.set(t,r),r)}return{value:t,source:r,stack:jt(r)}}var $o=[],Wo=0,Yu=null,ac=0,gr=[],yr=0,Ja=null,Jr=1,Zr="";function ba(t,r){$o[Wo++]=ac,$o[Wo++]=Yu,Yu=t,ac=r}function nv(t,r,o){gr[yr++]=Jr,gr[yr++]=Zr,gr[yr++]=Ja,Ja=t;var c=Jr;t=Zr;var f=32-$e(c)-1;c&=~(1<<f),o+=1;var m=32-$e(r)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,Jr=1<<32-$e(r)+f|o<<f|c,Zr=m+t}else Jr=1<<m|o<<f|c,Zr=t}function Tf(t){t.return!==null&&(ba(t,1),nv(t,1,0))}function Ef(t){for(;t===Yu;)Yu=$o[--Wo],$o[Wo]=null,ac=$o[--Wo],$o[Wo]=null;for(;t===Ja;)Ja=gr[--yr],gr[yr]=null,Zr=gr[--yr],gr[yr]=null,Jr=gr[--yr],gr[yr]=null}function sv(t,r){gr[yr++]=Jr,gr[yr++]=Zr,gr[yr++]=Ja,Jr=r.id,Zr=r.overflow,Ja=t}var ks=null,Cn=null,Zt=!1,Za=null,vr=!1,jf=Error(i(519));function ei(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ic(pr(r,t)),jf}function rv(t){var r=t.stateNode,o=t.type,c=t.memoizedProps;switch(r[rt]=t,r[mt]=c,o){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(o=0;o<Nc.length;o++)$t(Nc[o],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":$t("invalid",r),is(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":$t("invalid",r);break;case"textarea":$t("invalid",r),Tn(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||w0(r.textContent,o)?(c.popover!=null&&($t("beforetoggle",r),$t("toggle",r)),c.onScroll!=null&&$t("scroll",r),c.onScrollEnd!=null&&$t("scrollend",r),c.onClick!=null&&(r.onclick=Bs),r=!0):r=!1,r||ei(t,!0)}function av(t){for(ks=t.return;ks;)switch(ks.tag){case 5:case 31:case 13:vr=!1;return;case 27:case 3:vr=!0;return;default:ks=ks.return}}function Go(t){if(t!==ks)return!1;if(!Zt)return av(t),Zt=!0,!1;var r=t.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||Hm(t.type,t.memoizedProps)),o=!o),o&&Cn&&ei(t),av(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Cn=R0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Cn=R0(t)}else r===27?(r=Cn,mi(t.type)?(t=Ym,Ym=null,Cn=t):Cn=r):Cn=ks?xr(t.stateNode.nextSibling):null;return!0}function no(){Cn=ks=null,Zt=!1}function Sf(){var t=Za;return t!==null&&(Gs===null?Gs=t:Gs.push.apply(Gs,t),Za=null),t}function ic(t){Za===null?Za=[t]:Za.push(t)}var Nf=V(null),so=null,xa=null;function ti(t,r,o){fe(Nf,r._currentValue),r._currentValue=o}function wa(t){t._currentValue=Nf.current,G(Nf)}function Cf(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Rf(t,r,o,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=f;for(var B=0;B<r.length;B++)if(N.context===r[B]){m.lanes|=o,N=m.alternate,N!==null&&(N.lanes|=o),Cf(m.return,o,t),c||(x=null);break e}m=N.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),Cf(x,o,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Ko(t,r,o,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var N=f.type;tr(f.pendingProps.value,x.value)||(t!==null?t.push(N):t=[N])}}else if(f===tt.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Mc):t=[Mc])}f=f.return}t!==null&&Rf(r,t,o,c),r.flags|=262144}function Qu(t){for(t=t.firstContext;t!==null;){if(!tr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ro(t){so=t,xa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ts(t){return iv(so,t)}function Xu(t,r){return so===null&&ro(t),iv(t,r)}function iv(t,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},xa===null){if(t===null)throw Error(i(308));xa=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else xa=xa.next=r;return o}var Dk=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(o,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(o){return o()})}},Pk=s.unstable_scheduleCallback,Lk=s.unstable_NormalPriority,os={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Af(){return{controller:new Dk,data:new Map,refCount:0}}function oc(t){t.refCount--,t.refCount===0&&Pk(Lk,function(){t.controller.abort()})}var lc=null,If=0,Yo=0,Qo=null;function Ok(t,r){if(lc===null){var o=lc=[];If=0,Yo=Pm(),Qo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return If++,r.then(ov,ov),r}function ov(){if(--If===0&&lc!==null){Qo!==null&&(Qo.status="fulfilled");var t=lc;lc=null,Yo=0,Qo=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Vk(t,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var lv=Y.S;Y.S=function(t,r){$b=Lt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ok(t,r),lv!==null&&lv(t,r)};var ao=V(null);function Mf(){var t=ao.current;return t!==null?t:kn.pooledCache}function Ju(t,r){r===null?fe(ao,ao.current):fe(ao,r.pool)}function cv(){var t=Mf();return t===null?null:{parent:os._currentValue,pool:t}}var Xo=Error(i(460)),Df=Error(i(474)),Zu=Error(i(542)),eh={then:function(){}};function uv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function hv(t,r,o){switch(o=t[o],o===void 0?t.push(r):o!==r&&(r.then(Bs,Bs),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fv(t),t;default:if(typeof r.status=="string")r.then(Bs,Bs);else{if(t=kn,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,fv(t),t}throw oo=r,Xo}}function io(t){try{var r=t._init;return r(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(oo=o,Xo):o}}var oo=null;function dv(){if(oo===null)throw Error(i(459));var t=oo;return oo=null,t}function fv(t){if(t===Xo||t===Zu)throw Error(i(483))}var Jo=null,cc=0;function th(t){var r=cc;return cc+=1,Jo===null&&(Jo=[]),hv(Jo,t,r)}function uc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function nh(t,r){throw r.$$typeof===S?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function mv(t){function r(Q,$){if(t){var ne=Q.deletions;ne===null?(Q.deletions=[$],Q.flags|=16):ne.push($)}}function o(Q,$){if(!t)return null;for(;$!==null;)r(Q,$),$=$.sibling;return null}function c(Q){for(var $=new Map;Q!==null;)Q.key!==null?$.set(Q.key,Q):$.set(Q.index,Q),Q=Q.sibling;return $}function f(Q,$){return Q=va(Q,$),Q.index=0,Q.sibling=null,Q}function m(Q,$,ne){return Q.index=ne,t?(ne=Q.alternate,ne!==null?(ne=ne.index,ne<$?(Q.flags|=67108866,$):ne):(Q.flags|=67108866,$)):(Q.flags|=1048576,$)}function x(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function N(Q,$,ne,_e){return $===null||$.tag!==6?($=_f(ne,Q.mode,_e),$.return=Q,$):($=f($,ne),$.return=Q,$)}function B(Q,$,ne,_e){var gt=ne.type;return gt===z?ve(Q,$,ne.props.children,_e,ne.key):$!==null&&($.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===j&&io(gt)===$.type)?($=f($,ne.props),uc($,ne),$.return=Q,$):($=Ku(ne.type,ne.key,ne.props,null,Q.mode,_e),uc($,ne),$.return=Q,$)}function se(Q,$,ne,_e){return $===null||$.tag!==4||$.stateNode.containerInfo!==ne.containerInfo||$.stateNode.implementation!==ne.implementation?($=kf(ne,Q.mode,_e),$.return=Q,$):($=f($,ne.children||[]),$.return=Q,$)}function ve(Q,$,ne,_e,gt){return $===null||$.tag!==7?($=to(ne,Q.mode,_e,gt),$.return=Q,$):($=f($,ne),$.return=Q,$)}function Ce(Q,$,ne){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=_f(""+$,Q.mode,ne),$.return=Q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case L:return ne=Ku($.type,$.key,$.props,null,Q.mode,ne),uc(ne,$),ne.return=Q,ne;case W:return $=kf($,Q.mode,ne),$.return=Q,$;case j:return $=io($),Ce(Q,$,ne)}if(vt($)||F($))return $=to($,Q.mode,ne,null),$.return=Q,$;if(typeof $.then=="function")return Ce(Q,th($),ne);if($.$$typeof===he)return Ce(Q,Xu(Q,$),ne);nh(Q,$)}return null}function ae(Q,$,ne,_e){var gt=$!==null?$.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return gt!==null?null:N(Q,$,""+ne,_e);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case L:return ne.key===gt?B(Q,$,ne,_e):null;case W:return ne.key===gt?se(Q,$,ne,_e):null;case j:return ne=io(ne),ae(Q,$,ne,_e)}if(vt(ne)||F(ne))return gt!==null?null:ve(Q,$,ne,_e,null);if(typeof ne.then=="function")return ae(Q,$,th(ne),_e);if(ne.$$typeof===he)return ae(Q,$,Xu(Q,ne),_e);nh(Q,ne)}return null}function ue(Q,$,ne,_e,gt){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return Q=Q.get(ne)||null,N($,Q,""+_e,gt);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case L:return Q=Q.get(_e.key===null?ne:_e.key)||null,B($,Q,_e,gt);case W:return Q=Q.get(_e.key===null?ne:_e.key)||null,se($,Q,_e,gt);case j:return _e=io(_e),ue(Q,$,ne,_e,gt)}if(vt(_e)||F(_e))return Q=Q.get(ne)||null,ve($,Q,_e,gt,null);if(typeof _e.then=="function")return ue(Q,$,ne,th(_e),gt);if(_e.$$typeof===he)return ue(Q,$,ne,Xu($,_e),gt);nh($,_e)}return null}function ct(Q,$,ne,_e){for(var gt=null,nn=null,ht=$,Vt=$=0,Gt=null;ht!==null&&Vt<ne.length;Vt++){ht.index>Vt?(Gt=ht,ht=null):Gt=ht.sibling;var sn=ae(Q,ht,ne[Vt],_e);if(sn===null){ht===null&&(ht=Gt);break}t&&ht&&sn.alternate===null&&r(Q,ht),$=m(sn,$,Vt),nn===null?gt=sn:nn.sibling=sn,nn=sn,ht=Gt}if(Vt===ne.length)return o(Q,ht),Zt&&ba(Q,Vt),gt;if(ht===null){for(;Vt<ne.length;Vt++)ht=Ce(Q,ne[Vt],_e),ht!==null&&($=m(ht,$,Vt),nn===null?gt=ht:nn.sibling=ht,nn=ht);return Zt&&ba(Q,Vt),gt}for(ht=c(ht);Vt<ne.length;Vt++)Gt=ue(ht,Q,Vt,ne[Vt],_e),Gt!==null&&(t&&Gt.alternate!==null&&ht.delete(Gt.key===null?Vt:Gt.key),$=m(Gt,$,Vt),nn===null?gt=Gt:nn.sibling=Gt,nn=Gt);return t&&ht.forEach(function(bi){return r(Q,bi)}),Zt&&ba(Q,Vt),gt}function _t(Q,$,ne,_e){if(ne==null)throw Error(i(151));for(var gt=null,nn=null,ht=$,Vt=$=0,Gt=null,sn=ne.next();ht!==null&&!sn.done;Vt++,sn=ne.next()){ht.index>Vt?(Gt=ht,ht=null):Gt=ht.sibling;var bi=ae(Q,ht,sn.value,_e);if(bi===null){ht===null&&(ht=Gt);break}t&&ht&&bi.alternate===null&&r(Q,ht),$=m(bi,$,Vt),nn===null?gt=bi:nn.sibling=bi,nn=bi,ht=Gt}if(sn.done)return o(Q,ht),Zt&&ba(Q,Vt),gt;if(ht===null){for(;!sn.done;Vt++,sn=ne.next())sn=Ce(Q,sn.value,_e),sn!==null&&($=m(sn,$,Vt),nn===null?gt=sn:nn.sibling=sn,nn=sn);return Zt&&ba(Q,Vt),gt}for(ht=c(ht);!sn.done;Vt++,sn=ne.next())sn=ue(ht,Q,Vt,sn.value,_e),sn!==null&&(t&&sn.alternate!==null&&ht.delete(sn.key===null?Vt:sn.key),$=m(sn,$,Vt),nn===null?gt=sn:nn.sibling=sn,nn=sn);return t&&ht.forEach(function(YT){return r(Q,YT)}),Zt&&ba(Q,Vt),gt}function vn(Q,$,ne,_e){if(typeof ne=="object"&&ne!==null&&ne.type===z&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case L:e:{for(var gt=ne.key;$!==null;){if($.key===gt){if(gt=ne.type,gt===z){if($.tag===7){o(Q,$.sibling),_e=f($,ne.props.children),_e.return=Q,Q=_e;break e}}else if($.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===j&&io(gt)===$.type){o(Q,$.sibling),_e=f($,ne.props),uc(_e,ne),_e.return=Q,Q=_e;break e}o(Q,$);break}else r(Q,$);$=$.sibling}ne.type===z?(_e=to(ne.props.children,Q.mode,_e,ne.key),_e.return=Q,Q=_e):(_e=Ku(ne.type,ne.key,ne.props,null,Q.mode,_e),uc(_e,ne),_e.return=Q,Q=_e)}return x(Q);case W:e:{for(gt=ne.key;$!==null;){if($.key===gt)if($.tag===4&&$.stateNode.containerInfo===ne.containerInfo&&$.stateNode.implementation===ne.implementation){o(Q,$.sibling),_e=f($,ne.children||[]),_e.return=Q,Q=_e;break e}else{o(Q,$);break}else r(Q,$);$=$.sibling}_e=kf(ne,Q.mode,_e),_e.return=Q,Q=_e}return x(Q);case j:return ne=io(ne),vn(Q,$,ne,_e)}if(vt(ne))return ct(Q,$,ne,_e);if(F(ne)){if(gt=F(ne),typeof gt!="function")throw Error(i(150));return ne=gt.call(ne),_t(Q,$,ne,_e)}if(typeof ne.then=="function")return vn(Q,$,th(ne),_e);if(ne.$$typeof===he)return vn(Q,$,Xu(Q,ne),_e);nh(Q,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,$!==null&&$.tag===6?(o(Q,$.sibling),_e=f($,ne),_e.return=Q,Q=_e):(o(Q,$),_e=_f(ne,Q.mode,_e),_e.return=Q,Q=_e),x(Q)):o(Q,$)}return function(Q,$,ne,_e){try{cc=0;var gt=vn(Q,$,ne,_e);return Jo=null,gt}catch(ht){if(ht===Xo||ht===Zu)throw ht;var nn=nr(29,ht,null,Q.mode);return nn.lanes=_e,nn.return=Q,nn}}}var lo=mv(!0),pv=mv(!1),ni=!1;function Pf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function si(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ri(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(ln&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Gu(t),Jy(t,null,o),r}return Wu(t,c,r,o),Gu(t)}function hc(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Qn(t,o)}}function Of(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}var Vf=!1;function dc(){if(Vf){var t=Qo;if(t!==null)throw t}}function fc(t,r,o,c){Vf=!1;var f=t.updateQueue;ni=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var B=N,se=B.next;B.next=null,x===null?m=se:x.next=se,x=B;var ve=t.alternate;ve!==null&&(ve=ve.updateQueue,N=ve.lastBaseUpdate,N!==x&&(N===null?ve.firstBaseUpdate=se:N.next=se,ve.lastBaseUpdate=B))}if(m!==null){var Ce=f.baseState;x=0,ve=se=B=null,N=m;do{var ae=N.lane&-536870913,ue=ae!==N.lane;if(ue?(Wt&ae)===ae:(c&ae)===ae){ae!==0&&ae===Yo&&(Vf=!0),ve!==null&&(ve=ve.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ct=t,_t=N;ae=r;var vn=o;switch(_t.tag){case 1:if(ct=_t.payload,typeof ct=="function"){Ce=ct.call(vn,Ce,ae);break e}Ce=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=_t.payload,ae=typeof ct=="function"?ct.call(vn,Ce,ae):ct,ae==null)break e;Ce=E({},Ce,ae);break e;case 2:ni=!0}}ae=N.callback,ae!==null&&(t.flags|=64,ue&&(t.flags|=8192),ue=f.callbacks,ue===null?f.callbacks=[ae]:ue.push(ae))}else ue={lane:ae,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ve===null?(se=ve=ue,B=Ce):ve=ve.next=ue,x|=ae;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;ue=N,N=ue.next,ue.next=null,f.lastBaseUpdate=ue,f.shared.pending=null}}while(!0);ve===null&&(B=Ce),f.baseState=B,f.firstBaseUpdate=se,f.lastBaseUpdate=ve,m===null&&(f.shared.lanes=0),ci|=x,t.lanes=x,t.memoizedState=Ce}}function gv(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function yv(t,r){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)gv(o[t],r)}var Zo=V(null),sh=V(0);function vv(t,r){t=Ra,fe(sh,t),fe(Zo,r),Ra=t|r.baseLanes}function Bf(){fe(sh,Ra),fe(Zo,Zo.current)}function Uf(){Ra=sh.current,G(Zo),G(sh)}var sr=V(null),br=null;function ai(t){var r=t.alternate;fe(Jn,Jn.current&1),fe(sr,t),br===null&&(r===null||Zo.current!==null||r.memoizedState!==null)&&(br=t)}function zf(t){fe(Jn,Jn.current),fe(sr,t),br===null&&(br=t)}function bv(t){t.tag===22?(fe(Jn,Jn.current),fe(sr,t),br===null&&(br=t)):ii()}function ii(){fe(Jn,Jn.current),fe(sr,sr.current)}function rr(t){G(sr),br===t&&(br=null),G(Jn)}var Jn=V(0);function rh(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Gm(o)||Km(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var _a=0,Pt=null,gn=null,ls=null,ah=!1,el=!1,co=!1,ih=0,mc=0,tl=null,Bk=0;function $n(){throw Error(i(321))}function Ff(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!tr(t[o],r[o]))return!1;return!0}function qf(t,r,o,c,f,m){return _a=m,Pt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?nb:rm,co=!1,m=o(c,f),co=!1,el&&(m=wv(r,o,c,f)),xv(t),m}function xv(t){Y.H=yc;var r=gn!==null&&gn.next!==null;if(_a=0,ls=gn=Pt=null,ah=!1,mc=0,tl=null,r)throw Error(i(300));t===null||cs||(t=t.dependencies,t!==null&&Qu(t)&&(cs=!0))}function wv(t,r,o,c){Pt=t;var f=0;do{if(el&&(tl=null),mc=0,el=!1,25<=f)throw Error(i(301));if(f+=1,ls=gn=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=sb,m=r(o,c)}while(el);return m}function Uk(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?pc(r):r,t=t.useState()[0],(gn!==null?gn.memoizedState:null)!==t&&(Pt.flags|=1024),r}function Hf(){var t=ih!==0;return ih=0,t}function $f(t,r,o){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o}function Wf(t){if(ah){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}ah=!1}_a=0,ls=gn=Pt=null,el=!1,mc=ih=0,tl=null}function zs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?Pt.memoizedState=ls=t:ls=ls.next=t,ls}function Zn(){if(gn===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=gn.next;var r=ls===null?Pt.memoizedState:ls.next;if(r!==null)ls=r,gn=t;else{if(t===null)throw Pt.alternate===null?Error(i(467)):Error(i(310));gn=t,t={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},ls===null?Pt.memoizedState=ls=t:ls=ls.next=t}return ls}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(t){var r=mc;return mc+=1,tl===null&&(tl=[]),t=hv(tl,t,r),r=Pt,(ls===null?r.memoizedState:ls.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?nb:rm),t}function lh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return pc(t);if(t.$$typeof===he)return Ts(t)}throw Error(i(438,String(t)))}function Gf(t){var r=null,o=Pt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Pt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=oh(),Pt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(t),c=0;c<t;c++)o[c]=D;return r.index++,o}function ka(t,r){return typeof r=="function"?r(t):r}function ch(t){var r=Zn();return Kf(r,gn,t)}function Kf(t,r,o){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var N=x=null,B=null,se=r,ve=!1;do{var Ce=se.lane&-536870913;if(Ce!==se.lane?(Wt&Ce)===Ce:(_a&Ce)===Ce){var ae=se.revertLane;if(ae===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),Ce===Yo&&(ve=!0);else if((_a&ae)===ae){se=se.next,ae===Yo&&(ve=!0);continue}else Ce={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},B===null?(N=B=Ce,x=m):B=B.next=Ce,Pt.lanes|=ae,ci|=ae;Ce=se.action,co&&o(m,Ce),m=se.hasEagerState?se.eagerState:o(m,Ce)}else ae={lane:Ce,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},B===null?(N=B=ae,x=m):B=B.next=ae,Pt.lanes|=Ce,ci|=Ce;se=se.next}while(se!==null&&se!==r);if(B===null?x=m:B.next=N,!tr(m,t.memoizedState)&&(cs=!0,ve&&(o=Qo,o!==null)))throw o;t.memoizedState=m,t.baseState=x,t.baseQueue=B,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Yf(t){var r=Zn(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do m=t(m,x.action),x=x.next;while(x!==f);tr(m,r.memoizedState)||(cs=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function _v(t,r,o){var c=Pt,f=Zn(),m=Zt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var x=!tr((gn||f).memoizedState,o);if(x&&(f.memoizedState=o,cs=!0),f=f.queue,Jf(Ev.bind(null,c,f,t),[t]),f.getSnapshot!==r||x||ls!==null&&ls.memoizedState.tag&1){if(c.flags|=2048,nl(9,{destroy:void 0},Tv.bind(null,c,f,o,r),null),kn===null)throw Error(i(349));m||(_a&127)!==0||kv(c,r,o)}return o}function kv(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Pt.updateQueue,r===null?(r=oh(),Pt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Tv(t,r,o,c){r.value=o,r.getSnapshot=c,jv(r)&&Sv(t)}function Ev(t,r,o){return o(function(){jv(r)&&Sv(t)})}function jv(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!tr(t,o)}catch{return!0}}function Sv(t){var r=eo(t,2);r!==null&&Ks(r,t,2)}function Qf(t){var r=zs();if(typeof t=="function"){var o=t;if(t=o(),co){Ge(!0);try{o()}finally{Ge(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:t},r}function Nv(t,r,o,c){return t.baseState=o,Kf(t,gn,typeof c=="function"?c:ka)}function zk(t,r,o,c,f){if(dh(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Y.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,Cv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function Cv(t,r){var o=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=Y.T,x={};Y.T=x;try{var N=o(f,c),B=Y.S;B!==null&&B(x,N),Rv(t,r,N)}catch(se){Xf(t,r,se)}finally{m!==null&&x.types!==null&&(m.types=x.types),Y.T=m}}else try{m=o(f,c),Rv(t,r,m)}catch(se){Xf(t,r,se)}}function Rv(t,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Av(t,r,c)},function(c){return Xf(t,r,c)}):Av(t,r,o)}function Av(t,r,o){r.status="fulfilled",r.value=o,Iv(r),t.state=o,r=t.pending,r!==null&&(o=r.next,o===r?t.pending=null:(o=o.next,r.next=o,Cv(t,o)))}function Xf(t,r,o){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Iv(r),r=r.next;while(r!==c)}t.action=null}function Iv(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Mv(t,r){return r}function Dv(t,r){if(Zt){var o=kn.formState;if(o!==null){e:{var c=Pt;if(Zt){if(Cn){t:{for(var f=Cn,m=vr;f.nodeType!==8;){if(!m){f=null;break t}if(f=xr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Cn=xr(f.nextSibling),c=f.data==="F!";break e}}ei(c)}c=!1}c&&(r=o[0])}}return o=zs(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mv,lastRenderedState:r},o.queue=c,o=Zv.bind(null,Pt,c),c.dispatch=o,c=Qf(!1),m=sm.bind(null,Pt,!1,c.queue),c=zs(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,o=zk.bind(null,Pt,f,m,o),f.dispatch=o,c.memoizedState=t,[r,o,!1]}function Pv(t){var r=Zn();return Lv(r,gn,t)}function Lv(t,r,o){if(r=Kf(t,r,Mv)[0],t=ch(ka)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=pc(r)}catch(x){throw x===Xo?Zu:x}else c=r;r=Zn();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Pt.flags|=2048,nl(9,{destroy:void 0},Fk.bind(null,f,o),null)),[c,m,t]}function Fk(t,r){t.action=r}function Ov(t){var r=Zn(),o=gn;if(o!==null)return Lv(r,o,t);Zn(),r=r.memoizedState,o=Zn();var c=o.queue.dispatch;return o.memoizedState=t,[r,c,!1]}function nl(t,r,o,c){return t={tag:t,create:o,deps:c,inst:r,next:null},r=Pt.updateQueue,r===null&&(r=oh(),Pt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t),t}function Vv(){return Zn().memoizedState}function uh(t,r,o,c){var f=zs();Pt.flags|=t,f.memoizedState=nl(1|r,{destroy:void 0},o,c===void 0?null:c)}function hh(t,r,o,c){var f=Zn();c=c===void 0?null:c;var m=f.memoizedState.inst;gn!==null&&c!==null&&Ff(c,gn.memoizedState.deps)?f.memoizedState=nl(r,m,o,c):(Pt.flags|=t,f.memoizedState=nl(1|r,m,o,c))}function Bv(t,r){uh(8390656,8,t,r)}function Jf(t,r){hh(2048,8,t,r)}function qk(t){Pt.flags|=4;var r=Pt.updateQueue;if(r===null)r=oh(),Pt.updateQueue=r,r.events=[t];else{var o=r.events;o===null?r.events=[t]:o.push(t)}}function Uv(t){var r=Zn().memoizedState;return qk({ref:r,nextImpl:t}),function(){if((ln&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function zv(t,r){return hh(4,2,t,r)}function Fv(t,r){return hh(4,4,t,r)}function qv(t,r){if(typeof r=="function"){t=t();var o=r(t);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Hv(t,r,o){o=o!=null?o.concat([t]):null,hh(4,4,qv.bind(null,r,t),o)}function Zf(){}function $v(t,r){var o=Zn();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Ff(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function Wv(t,r){var o=Zn();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Ff(r,c[1]))return c[0];if(c=t(),co){Ge(!0);try{t()}finally{Ge(!1)}}return o.memoizedState=[c,r],c}function em(t,r,o){return o===void 0||(_a&1073741824)!==0&&(Wt&261930)===0?t.memoizedState=r:(t.memoizedState=o,t=Gb(),Pt.lanes|=t,ci|=t,o)}function Gv(t,r,o,c){return tr(o,r)?o:Zo.current!==null?(t=em(t,o,c),tr(t,r)||(cs=!0),t):(_a&42)===0||(_a&1073741824)!==0&&(Wt&261930)===0?(cs=!0,t.memoizedState=o):(t=Gb(),Pt.lanes|=t,ci|=t,r)}function Kv(t,r,o,c,f){var m=Ee.p;Ee.p=m!==0&&8>m?m:8;var x=Y.T,N={};Y.T=N,sm(t,!1,r,o);try{var B=f(),se=Y.S;if(se!==null&&se(N,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ve=Vk(B,c);gc(t,r,ve,or(t))}else gc(t,r,c,or(t))}catch(Ce){gc(t,r,{then:function(){},status:"rejected",reason:Ce},or())}finally{Ee.p=m,x!==null&&N.types!==null&&(x.types=N.types),Y.T=x}}function Hk(){}function tm(t,r,o,c){if(t.tag!==5)throw Error(i(476));var f=Yv(t).queue;Kv(t,f,r,Pe,o===null?Hk:function(){return Qv(t),o(c)})}function Yv(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:Pe},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:o},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Qv(t){var r=Yv(t);r.next===null&&(r=t.alternate.memoizedState),gc(t,r.next.queue,{},or())}function nm(){return Ts(Mc)}function Xv(){return Zn().memoizedState}function Jv(){return Zn().memoizedState}function $k(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var o=or();t=si(o);var c=ri(r,t,o);c!==null&&(Ks(c,r,o),hc(c,r,o)),r={cache:Af()},t.payload=r;return}r=r.return}}function Wk(t,r,o){var c=or();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},dh(t)?eb(r,o):(o=xf(t,r,o,c),o!==null&&(Ks(o,t,c),tb(o,r,c)))}function Zv(t,r,o){var c=or();gc(t,r,o,c)}function gc(t,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(dh(t))eb(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,N=m(x,o);if(f.hasEagerState=!0,f.eagerState=N,tr(N,x))return Wu(t,r,f,0),kn===null&&$u(),!1}catch{}if(o=xf(t,r,f,c),o!==null)return Ks(o,t,c),tb(o,r,c),!0}return!1}function sm(t,r,o,c){if(c={lane:2,revertLane:Pm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},dh(t)){if(r)throw Error(i(479))}else r=xf(t,o,c,2),r!==null&&Ks(r,t,2)}function dh(t){var r=t.alternate;return t===Pt||r!==null&&r===Pt}function eb(t,r){el=ah=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function tb(t,r,o){if((o&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Qn(t,o)}}var yc={readContext:Ts,use:lh,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n};yc.useEffectEvent=$n;var nb={readContext:Ts,use:lh,useCallback:function(t,r){return zs().memoizedState=[t,r===void 0?null:r],t},useContext:Ts,useEffect:Bv,useImperativeHandle:function(t,r,o){o=o!=null?o.concat([t]):null,uh(4194308,4,qv.bind(null,r,t),o)},useLayoutEffect:function(t,r){return uh(4194308,4,t,r)},useInsertionEffect:function(t,r){uh(4,2,t,r)},useMemo:function(t,r){var o=zs();r=r===void 0?null:r;var c=t();if(co){Ge(!0);try{t()}finally{Ge(!1)}}return o.memoizedState=[c,r],c},useReducer:function(t,r,o){var c=zs();if(o!==void 0){var f=o(r);if(co){Ge(!0);try{o(r)}finally{Ge(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=Wk.bind(null,Pt,t),[c.memoizedState,t]},useRef:function(t){var r=zs();return t={current:t},r.memoizedState=t},useState:function(t){t=Qf(t);var r=t.queue,o=Zv.bind(null,Pt,r);return r.dispatch=o,[t.memoizedState,o]},useDebugValue:Zf,useDeferredValue:function(t,r){var o=zs();return em(o,t,r)},useTransition:function(){var t=Qf(!1);return t=Kv.bind(null,Pt,t.queue,!0,!1),zs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,o){var c=Pt,f=zs();if(Zt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),kn===null)throw Error(i(349));(Wt&127)!==0||kv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Bv(Ev.bind(null,c,m,t),[t]),c.flags|=2048,nl(9,{destroy:void 0},Tv.bind(null,c,m,o,r),null),o},useId:function(){var t=zs(),r=kn.identifierPrefix;if(Zt){var o=Zr,c=Jr;o=(c&~(1<<32-$e(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=ih++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Bk++,r="_"+r+"r_"+o.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:nm,useFormState:Dv,useActionState:Dv,useOptimistic:function(t){var r=zs();r.memoizedState=r.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=sm.bind(null,Pt,!0,o),o.dispatch=r,[t,r]},useMemoCache:Gf,useCacheRefresh:function(){return zs().memoizedState=$k.bind(null,Pt)},useEffectEvent:function(t){var r=zs(),o={impl:t};return r.memoizedState=o,function(){if((ln&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},rm={readContext:Ts,use:lh,useCallback:$v,useContext:Ts,useEffect:Jf,useImperativeHandle:Hv,useInsertionEffect:zv,useLayoutEffect:Fv,useMemo:Wv,useReducer:ch,useRef:Vv,useState:function(){return ch(ka)},useDebugValue:Zf,useDeferredValue:function(t,r){var o=Zn();return Gv(o,gn.memoizedState,t,r)},useTransition:function(){var t=ch(ka)[0],r=Zn().memoizedState;return[typeof t=="boolean"?t:pc(t),r]},useSyncExternalStore:_v,useId:Xv,useHostTransitionStatus:nm,useFormState:Pv,useActionState:Pv,useOptimistic:function(t,r){var o=Zn();return Nv(o,gn,t,r)},useMemoCache:Gf,useCacheRefresh:Jv};rm.useEffectEvent=Uv;var sb={readContext:Ts,use:lh,useCallback:$v,useContext:Ts,useEffect:Jf,useImperativeHandle:Hv,useInsertionEffect:zv,useLayoutEffect:Fv,useMemo:Wv,useReducer:Yf,useRef:Vv,useState:function(){return Yf(ka)},useDebugValue:Zf,useDeferredValue:function(t,r){var o=Zn();return gn===null?em(o,t,r):Gv(o,gn.memoizedState,t,r)},useTransition:function(){var t=Yf(ka)[0],r=Zn().memoizedState;return[typeof t=="boolean"?t:pc(t),r]},useSyncExternalStore:_v,useId:Xv,useHostTransitionStatus:nm,useFormState:Ov,useActionState:Ov,useOptimistic:function(t,r){var o=Zn();return gn!==null?Nv(o,gn,t,r):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:Gf,useCacheRefresh:Jv};sb.useEffectEvent=Uv;function am(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:E({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var im={enqueueSetState:function(t,r,o){t=t._reactInternals;var c=or(),f=si(c);f.payload=r,o!=null&&(f.callback=o),r=ri(t,f,c),r!==null&&(Ks(r,t,c),hc(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=or(),f=si(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=ri(t,f,c),r!==null&&(Ks(r,t,c),hc(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=or(),c=si(o);c.tag=2,r!=null&&(c.callback=r),r=ri(t,c,o),r!==null&&(Ks(r,t,o),hc(r,t,o))}};function rb(t,r,o,c,f,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,x):r.prototype&&r.prototype.isPureReactComponent?!sc(o,c)||!sc(f,m):!0}function ab(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&im.enqueueReplaceState(r,r.state,null)}function uo(t,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(t=t.defaultProps){o===r&&(o=E({},o));for(var f in t)o[f]===void 0&&(o[f]=t[f])}return o}function ib(t){Hu(t)}function ob(t){console.error(t)}function lb(t){Hu(t)}function fh(t,r){try{var o=t.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function cb(t,r,o){try{var c=t.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function om(t,r,o){return o=si(o),o.tag=3,o.payload={element:null},o.callback=function(){fh(t,r)},o}function ub(t){return t=si(t),t.tag=3,t}function hb(t,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){cb(r,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){cb(r,o,c),typeof f!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function Gk(t,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Ko(r,o,f,!0),o=sr.current,o!==null){switch(o.tag){case 31:case 13:return br===null?Eh():o.alternate===null&&Wn===0&&(Wn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===eh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Im(t,c,f)),!1;case 22:return o.flags|=65536,c===eh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Im(t,c,f)),!1}throw Error(i(435,o.tag))}return Im(t,c,f),Eh(),!1}if(Zt)return r=sr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==jf&&(t=Error(i(422),{cause:c}),ic(pr(t,o)))):(c!==jf&&(r=Error(i(423),{cause:c}),ic(pr(r,o))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=pr(c,o),f=om(t.stateNode,c,f),Of(t,f),Wn!==4&&(Wn=2)),!1;var m=Error(i(520),{cause:c});if(m=pr(m,o),Ec===null?Ec=[m]:Ec.push(m),Wn!==4&&(Wn=2),r===null)return!0;c=pr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,t=f&-f,o.lanes|=t,t=om(o.stateNode,c,t),Of(o,t),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ui===null||!ui.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=ub(f),hb(f,t,o,c),Of(o,f),!1}o=o.return}while(o!==null);return!1}var lm=Error(i(461)),cs=!1;function Es(t,r,o,c){r.child=t===null?pv(r,null,o,c):lo(r,t.child,o,c)}function db(t,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var x={};for(var N in c)N!=="ref"&&(x[N]=c[N])}else x=c;return ro(r),c=qf(t,r,o,x,m,f),N=Hf(),t!==null&&!cs?($f(t,r,f),Ta(t,r,f)):(Zt&&N&&Tf(r),r.flags|=1,Es(t,r,c,f),r.child)}function fb(t,r,o,c,f){if(t===null){var m=o.type;return typeof m=="function"&&!wf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,mb(t,r,m,c,f)):(t=Ku(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!gm(t,f)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:sc,o(x,c)&&t.ref===r.ref)return Ta(t,r,f)}return r.flags|=1,t=va(m,c),t.ref=r.ref,t.return=r,r.child=t}function mb(t,r,o,c,f){if(t!==null){var m=t.memoizedProps;if(sc(m,c)&&t.ref===r.ref)if(cs=!1,r.pendingProps=c=m,gm(t,f))(t.flags&131072)!==0&&(cs=!0);else return r.lanes=t.lanes,Ta(t,r,f)}return cm(t,r,o,c,f)}function pb(t,r,o,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return gb(t,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ju(r,m!==null?m.cachePool:null),m!==null?vv(r,m):Bf(),bv(r);else return c=r.lanes=536870912,gb(t,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Ju(r,m.cachePool),vv(r,m),ii(),r.memoizedState=null):(t!==null&&Ju(r,null),Bf(),ii());return Es(t,r,f,o),r.child}function vc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function gb(t,r,o,c,f){var m=Mf();return m=m===null?null:{parent:os._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},t!==null&&Ju(r,null),Bf(),bv(r),t!==null&&Ko(t,r,c,!0),r.childLanes=f,null}function mh(t,r){return r=gh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function yb(t,r,o){return lo(r,t.child,null,o),t=mh(r,r.pendingProps),t.flags|=2,rr(r),r.memoizedState=null,t}function Kk(t,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Zt){if(c.mode==="hidden")return t=mh(r,c),r.lanes=536870912,vc(null,t);if(zf(r),(t=Cn)?(t=C0(t,vr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ja!==null?{id:Jr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},o=ev(t),o.return=r,r.child=o,ks=r,Cn=null)):t=null,t===null)throw ei(r);return r.lanes=536870912,null}return mh(r,c)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(zf(r),f)if(r.flags&256)r.flags&=-257,r=yb(t,r,o);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(cs||Ko(t,r,o,!1),f=(o&t.childLanes)!==0,cs||f){if(c=kn,c!==null&&(x=Rs(c,o),x!==0&&x!==m.retryLane))throw m.retryLane=x,eo(t,x),Ks(c,t,x),lm;Eh(),r=yb(t,r,o)}else t=m.treeContext,Cn=xr(x.nextSibling),ks=r,Zt=!0,Za=null,vr=!1,t!==null&&sv(r,t),r=mh(r,c),r.flags|=4096;return r}return t=va(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function ph(t,r){var o=r.ref;if(o===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(t===null||t.ref!==o)&&(r.flags|=4194816)}}function cm(t,r,o,c,f){return ro(r),o=qf(t,r,o,c,void 0,f),c=Hf(),t!==null&&!cs?($f(t,r,f),Ta(t,r,f)):(Zt&&c&&Tf(r),r.flags|=1,Es(t,r,o,f),r.child)}function vb(t,r,o,c,f,m){return ro(r),r.updateQueue=null,o=wv(r,c,o,f),xv(t),c=Hf(),t!==null&&!cs?($f(t,r,m),Ta(t,r,m)):(Zt&&c&&Tf(r),r.flags|=1,Es(t,r,o,m),r.child)}function bb(t,r,o,c,f){if(ro(r),r.stateNode===null){var m=Ho,x=o.contextType;typeof x=="object"&&x!==null&&(m=Ts(x)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=im,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Pf(r),x=o.contextType,m.context=typeof x=="object"&&x!==null?Ts(x):Ho,m.state=r.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(am(r,o,x,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&im.enqueueReplaceState(m,m.state,null),fc(r,c,m,f),dc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var N=r.memoizedProps,B=uo(o,N);m.props=B;var se=m.context,ve=o.contextType;x=Ho,typeof ve=="object"&&ve!==null&&(x=Ts(ve));var Ce=o.getDerivedStateFromProps;ve=typeof Ce=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,ve||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||se!==x)&&ab(r,m,c,x),ni=!1;var ae=r.memoizedState;m.state=ae,fc(r,c,m,f),dc(),se=r.memoizedState,N||ae!==se||ni?(typeof Ce=="function"&&(am(r,o,Ce,c),se=r.memoizedState),(B=ni||rb(r,o,B,c,ae,se,x))?(ve||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=se),m.props=c,m.state=se,m.context=x,c=B):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Lf(t,r),x=r.memoizedProps,ve=uo(o,x),m.props=ve,Ce=r.pendingProps,ae=m.context,se=o.contextType,B=Ho,typeof se=="object"&&se!==null&&(B=Ts(se)),N=o.getDerivedStateFromProps,(se=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==Ce||ae!==B)&&ab(r,m,c,B),ni=!1,ae=r.memoizedState,m.state=ae,fc(r,c,m,f),dc();var ue=r.memoizedState;x!==Ce||ae!==ue||ni||t!==null&&t.dependencies!==null&&Qu(t.dependencies)?(typeof N=="function"&&(am(r,o,N,c),ue=r.memoizedState),(ve=ni||rb(r,o,ve,c,ae,ue,B)||t!==null&&t.dependencies!==null&&Qu(t.dependencies))?(se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ue,B),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ue,B)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&ae===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&ae===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ue),m.props=c,m.state=ue,m.context=B,c=ve):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&ae===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&ae===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,ph(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=lo(r,t.child,null,f),r.child=lo(r,null,o,f)):Es(t,r,o,f),r.memoizedState=m.state,t=r.child):t=Ta(t,r,f),t}function xb(t,r,o,c){return no(),r.flags|=256,Es(t,r,o,c),r.child}var um={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hm(t){return{baseLanes:t,cachePool:cv()}}function dm(t,r,o){return t=t!==null?t.childLanes&~o:0,r&&(t|=ir),t}function wb(t,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(Jn.current&2)!==0),x&&(f=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,t===null){if(Zt){if(f?ai(r):ii(),(t=Cn)?(t=C0(t,vr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ja!==null?{id:Jr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},o=ev(t),o.return=r,r.child=o,ks=r,Cn=null)):t=null,t===null)throw ei(r);return Km(t)?r.lanes=32:r.lanes=536870912,null}var N=c.children;return c=c.fallback,f?(ii(),f=r.mode,N=gh({mode:"hidden",children:N},f),c=to(c,f,o,null),N.return=r,c.return=r,N.sibling=c,r.child=N,c=r.child,c.memoizedState=hm(o),c.childLanes=dm(t,x,o),r.memoizedState=um,vc(null,c)):(ai(r),fm(r,N))}var B=t.memoizedState;if(B!==null&&(N=B.dehydrated,N!==null)){if(m)r.flags&256?(ai(r),r.flags&=-257,r=mm(t,r,o)):r.memoizedState!==null?(ii(),r.child=t.child,r.flags|=128,r=null):(ii(),N=c.fallback,f=r.mode,c=gh({mode:"visible",children:c.children},f),N=to(N,f,o,null),N.flags|=2,c.return=r,N.return=r,c.sibling=N,r.child=c,lo(r,t.child,null,o),c=r.child,c.memoizedState=hm(o),c.childLanes=dm(t,x,o),r.memoizedState=um,r=vc(null,c));else if(ai(r),Km(N)){if(x=N.nextSibling&&N.nextSibling.dataset,x)var se=x.dgst;x=se,c=Error(i(419)),c.stack="",c.digest=x,ic({value:c,source:null,stack:null}),r=mm(t,r,o)}else if(cs||Ko(t,r,o,!1),x=(o&t.childLanes)!==0,cs||x){if(x=kn,x!==null&&(c=Rs(x,o),c!==0&&c!==B.retryLane))throw B.retryLane=c,eo(t,c),Ks(x,t,c),lm;Gm(N)||Eh(),r=mm(t,r,o)}else Gm(N)?(r.flags|=192,r.child=t.child,r=null):(t=B.treeContext,Cn=xr(N.nextSibling),ks=r,Zt=!0,Za=null,vr=!1,t!==null&&sv(r,t),r=fm(r,c.children),r.flags|=4096);return r}return f?(ii(),N=c.fallback,f=r.mode,B=t.child,se=B.sibling,c=va(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,se!==null?N=va(se,N):(N=to(N,f,o,null),N.flags|=2),N.return=r,c.return=r,c.sibling=N,r.child=c,vc(null,c),c=r.child,N=t.child.memoizedState,N===null?N=hm(o):(f=N.cachePool,f!==null?(B=os._currentValue,f=f.parent!==B?{parent:B,pool:B}:f):f=cv(),N={baseLanes:N.baseLanes|o,cachePool:f}),c.memoizedState=N,c.childLanes=dm(t,x,o),r.memoizedState=um,vc(t.child,c)):(ai(r),o=t.child,t=o.sibling,o=va(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,t!==null&&(x=r.deletions,x===null?(r.deletions=[t],r.flags|=16):x.push(t)),r.child=o,r.memoizedState=null,o)}function fm(t,r){return r=gh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function gh(t,r){return t=nr(22,t,null,r),t.lanes=0,t}function mm(t,r,o){return lo(r,t.child,null,o),t=fm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function _b(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Cf(t.return,r,o)}function pm(t,r,o,c,f,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=m)}function kb(t,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=Jn.current,N=(x&2)!==0;if(N?(x=x&1|2,r.flags|=128):x&=1,fe(Jn,x),Es(t,r,c,o),c=Zt?ac:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_b(t,o,r);else if(t.tag===19)_b(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&rh(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),pm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&rh(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}pm(r,!0,o,null,m,c);break;case"together":pm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Ta(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),ci|=r.lanes,(o&r.childLanes)===0)if(t!==null){if(Ko(t,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,o=va(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=va(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function gm(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Qu(t)))}function Yk(t,r,o){switch(r.tag){case 3:He(r,r.stateNode.containerInfo),ti(r,os,t.memoizedState.cache),no();break;case 27:case 5:We(r);break;case 4:He(r,r.stateNode.containerInfo);break;case 10:ti(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,zf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ai(r),r.flags|=128,null):(o&r.child.childLanes)!==0?wb(t,r,o):(ai(r),t=Ta(t,r,o),t!==null?t.sibling:null);ai(r);break;case 19:var f=(t.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Ko(t,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return kb(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),fe(Jn,Jn.current),c)break;return null;case 22:return r.lanes=0,pb(t,r,o,r.pendingProps);case 24:ti(r,os,t.memoizedState.cache)}return Ta(t,r,o)}function Tb(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps)cs=!0;else{if(!gm(t,o)&&(r.flags&128)===0)return cs=!1,Yk(t,r,o);cs=(t.flags&131072)!==0}else cs=!1,Zt&&(r.flags&1048576)!==0&&nv(r,ac,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=io(r.elementType),r.type=t,typeof t=="function")wf(t)?(c=uo(t,c),r.tag=1,r=bb(null,r,t,c,o)):(r.tag=0,r=cm(null,r,t,c,o));else{if(t!=null){var f=t.$$typeof;if(f===Se){r.tag=11,r=db(null,r,t,c,o);break e}else if(f===A){r.tag=14,r=fb(null,r,t,c,o);break e}}throw r=ze(t)||t,Error(i(306,r,""))}}return r;case 0:return cm(t,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=uo(c,r.pendingProps),bb(t,r,c,f,o);case 3:e:{if(He(r,r.stateNode.containerInfo),t===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Lf(t,r),fc(r,c,null,o);var x=r.memoizedState;if(c=x.cache,ti(r,os,c),c!==m.cache&&Rf(r,[os],o,!0),dc(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=xb(t,r,c,o);break e}else if(c!==f){f=pr(Error(i(424)),r),ic(f),r=xb(t,r,c,o);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Cn=xr(t.firstChild),ks=r,Zt=!0,Za=null,vr=!0,o=pv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(no(),c===f){r=Ta(t,r,o);break e}Es(t,r,c,o)}r=r.child}return r;case 26:return ph(t,r),t===null?(o=P0(r.type,null,r.pendingProps,null))?r.memoizedState=o:Zt||(o=r.type,t=r.pendingProps,c=Ih(Oe.current).createElement(o),c[rt]=r,c[mt]=t,js(c,o,t),T(c),r.stateNode=c):r.memoizedState=P0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return We(r),t===null&&Zt&&(c=r.stateNode=I0(r.type,r.pendingProps,Oe.current),ks=r,vr=!0,f=Cn,mi(r.type)?(Ym=f,Cn=xr(c.firstChild)):Cn=f),Es(t,r,r.pendingProps.children,o),ph(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Zt&&((f=c=Cn)&&(c=ET(c,r.type,r.pendingProps,vr),c!==null?(r.stateNode=c,ks=r,Cn=xr(c.firstChild),vr=!1,f=!0):f=!1),f||ei(r)),We(r),f=r.type,m=r.pendingProps,x=t!==null?t.memoizedProps:null,c=m.children,Hm(f,m)?c=null:x!==null&&Hm(f,x)&&(r.flags|=32),r.memoizedState!==null&&(f=qf(t,r,Uk,null,null,o),Mc._currentValue=f),ph(t,r),Es(t,r,c,o),r.child;case 6:return t===null&&Zt&&((t=o=Cn)&&(o=jT(o,r.pendingProps,vr),o!==null?(r.stateNode=o,ks=r,Cn=null,t=!0):t=!1),t||ei(r)),null;case 13:return wb(t,r,o);case 4:return He(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=lo(r,null,c,o):Es(t,r,c,o),r.child;case 11:return db(t,r,r.type,r.pendingProps,o);case 7:return Es(t,r,r.pendingProps,o),r.child;case 8:return Es(t,r,r.pendingProps.children,o),r.child;case 12:return Es(t,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,ti(r,r.type,c.value),Es(t,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,ro(r),f=Ts(f),c=c(f),r.flags|=1,Es(t,r,c,o),r.child;case 14:return fb(t,r,r.type,r.pendingProps,o);case 15:return mb(t,r,r.type,r.pendingProps,o);case 19:return kb(t,r,o);case 31:return Kk(t,r,o);case 22:return pb(t,r,o,r.pendingProps);case 24:return ro(r),c=Ts(os),t===null?(f=Mf(),f===null&&(f=kn,m=Af(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},Pf(r),ti(r,os,f)):((t.lanes&o)!==0&&(Lf(t,r),fc(r,null,null,o),dc()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ti(r,os,c)):(c=m.cache,ti(r,os,c),c!==f.cache&&Rf(r,[os],o,!0))),Es(t,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ea(t){t.flags|=4}function ym(t,r,o,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Xb())t.flags|=8192;else throw oo=eh,Df}else t.flags&=-16777217}function Eb(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!U0(r))if(Xb())t.flags|=8192;else throw oo=eh,Df}function yh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?rs():536870912,t.lanes|=r,il|=r)}function bc(t,r){if(!Zt)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Rn(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function Qk(t,r,o){var c=r.pendingProps;switch(Ef(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(r),null;case 1:return Rn(r),null;case 3:return o=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),wa(os),ie(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Go(r)?Ea(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Sf())),Rn(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Ea(r),m!==null?(Rn(r),Eb(r,m)):(Rn(r),ym(r,f,null,c,o))):m?m!==t.memoizedState?(Ea(r),Rn(r),Eb(r,m)):(Rn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&Ea(r),Rn(r),ym(r,f,t,c,o)),null;case 27:if(wt(r),o=Oe.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Ea(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Rn(r),null}t=Ne.current,Go(r)?rv(r):(t=I0(f,c,o),r.stateNode=t,Ea(r))}return Rn(r),null;case 5:if(wt(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Ea(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Rn(r),null}if(m=Ne.current,Go(r))rv(r);else{var x=Ih(Oe.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[rt]=r,m[mt]=c;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=m;e:switch(js(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ea(r)}}return Rn(r),ym(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,o),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&Ea(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(t=Oe.current,Go(r)){if(t=r.stateNode,o=r.memoizedProps,c=null,f=ks,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[rt]=r,t=!!(t.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||w0(t.nodeValue,o)),t||ei(r,!0)}else t=Ih(t).createTextNode(c),t[rt]=r,r.stateNode=t}return Rn(r),null;case 31:if(o=r.memoizedState,t===null||t.memoizedState!==null){if(c=Go(r),o!==null){if(t===null){if(!c)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[rt]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Rn(r),t=!1}else o=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return r.flags&256?(rr(r),r):(rr(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Rn(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Go(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[rt]=r}else no(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Rn(r),f=!1}else f=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(rr(r),r):(rr(r),null)}return rr(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,t=t!==null&&t.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==t&&o&&(r.child.flags|=8192),yh(r,r.updateQueue),Rn(r),null);case 4:return ie(),t===null&&Bm(r.stateNode.containerInfo),Rn(r),null;case 10:return wa(r.type),Rn(r),null;case 19:if(G(Jn),c=r.memoizedState,c===null)return Rn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)bc(c,!1);else{if(Wn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=rh(t),m!==null){for(r.flags|=128,bc(c,!1),t=m.updateQueue,r.updateQueue=t,yh(r,t),r.subtreeFlags=0,t=o,o=r.child;o!==null;)Zy(o,t),o=o.sibling;return fe(Jn,Jn.current&1|2),Zt&&ba(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&Lt()>_h&&(r.flags|=128,f=!0,bc(c,!1),r.lanes=4194304)}else{if(!f)if(t=rh(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,yh(r,t),bc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Zt)return Rn(r),null}else 2*Lt()-c.renderingStartTime>_h&&o!==536870912&&(r.flags|=128,f=!0,bc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Lt(),t.sibling=null,o=Jn.current,fe(Jn,f?o&1|2:o&1),Zt&&ba(r,c.treeForkCount),t):(Rn(r),null);case 22:case 23:return rr(r),Uf(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Rn(r),r.subtreeFlags&6&&(r.flags|=8192)):Rn(r),o=r.updateQueue,o!==null&&yh(r,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),t!==null&&G(ao),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),wa(os),Rn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Xk(t,r){switch(Ef(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return wa(os),ie(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return wt(r),null;case 31:if(r.memoizedState!==null){if(rr(r),r.alternate===null)throw Error(i(340));no()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(rr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));no()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return G(Jn),null;case 4:return ie(),null;case 10:return wa(r.type),null;case 22:case 23:return rr(r),Uf(),t!==null&&G(ao),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return wa(os),null;case 25:return null;default:return null}}function jb(t,r){switch(Ef(r),r.tag){case 3:wa(os),ie();break;case 26:case 27:case 5:wt(r);break;case 4:ie();break;case 31:r.memoizedState!==null&&rr(r);break;case 13:rr(r);break;case 19:G(Jn);break;case 10:wa(r.type);break;case 22:case 23:rr(r),Uf(),t!==null&&G(ao);break;case 24:wa(os)}}function xc(t,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){c=void 0;var m=o.create,x=o.inst;c=m(),x.destroy=c}o=o.next}while(o!==f)}}catch(N){mn(r,r.return,N)}}function oi(t,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var x=c.inst,N=x.destroy;if(N!==void 0){x.destroy=void 0,f=r;var B=o,se=N;try{se()}catch(ve){mn(f,B,ve)}}}c=c.next}while(c!==m)}}catch(ve){mn(r,r.return,ve)}}function Sb(t){var r=t.updateQueue;if(r!==null){var o=t.stateNode;try{yv(r,o)}catch(c){mn(t,t.return,c)}}}function Nb(t,r,o){o.props=uo(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(c){mn(t,r,c)}}function wc(t,r){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof o=="function"?t.refCleanup=o(c):o.current=c}}catch(f){mn(t,r,f)}}function ea(t,r){var o=t.ref,c=t.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){mn(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){mn(t,r,f)}else o.current=null}function Cb(t){var r=t.type,o=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){mn(t,t.return,f)}}function vm(t,r,o){try{var c=t.stateNode;bT(c,t.type,o,r),c[mt]=r}catch(f){mn(t,t.return,f)}}function Rb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&mi(t.type)||t.tag===4}function bm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&mi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xm(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(t),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Bs));else if(c!==4&&(c===27&&mi(t.type)&&(o=t.stateNode,r=null),t=t.child,t!==null))for(xm(t,r,o),t=t.sibling;t!==null;)xm(t,r,o),t=t.sibling}function vh(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(c===27&&mi(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(vh(t,r,o),t=t.sibling;t!==null;)vh(t,r,o),t=t.sibling}function Ab(t){var r=t.stateNode,o=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);js(r,c,o),r[rt]=t,r[mt]=o}catch(m){mn(t,t.return,m)}}var ja=!1,us=!1,wm=!1,Ib=typeof WeakSet=="function"?WeakSet:Set,xs=null;function Jk(t,r){if(t=t.containerInfo,Fm=Bh,t=Hy(t),mf(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,N=-1,B=-1,se=0,ve=0,Ce=t,ae=null;t:for(;;){for(var ue;Ce!==o||f!==0&&Ce.nodeType!==3||(N=x+f),Ce!==m||c!==0&&Ce.nodeType!==3||(B=x+c),Ce.nodeType===3&&(x+=Ce.nodeValue.length),(ue=Ce.firstChild)!==null;)ae=Ce,Ce=ue;for(;;){if(Ce===t)break t;if(ae===o&&++se===f&&(N=x),ae===m&&++ve===c&&(B=x),(ue=Ce.nextSibling)!==null)break;Ce=ae,ae=Ce.parentNode}Ce=ue}o=N===-1||B===-1?null:{start:N,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(qm={focusedElem:t,selectionRange:o},Bh=!1,xs=r;xs!==null;)if(r=xs,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,xs=t;else for(;xs!==null;){switch(r=xs,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)f=t[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var ct=uo(o.type,f);t=c.getSnapshotBeforeUpdate(ct,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(_t){mn(o,o.return,_t)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,o=t.nodeType,o===9)Wm(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Wm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,xs=t;break}xs=r.return}}function Mb(t,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Na(t,o),c&4&&xc(5,o);break;case 1:if(Na(t,o),c&4)if(t=o.stateNode,r===null)try{t.componentDidMount()}catch(x){mn(o,o.return,x)}else{var f=uo(o.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(x){mn(o,o.return,x)}}c&64&&Sb(o),c&512&&wc(o,o.return);break;case 3:if(Na(t,o),c&64&&(t=o.updateQueue,t!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{yv(t,r)}catch(x){mn(o,o.return,x)}}break;case 27:r===null&&c&4&&Ab(o);case 26:case 5:Na(t,o),r===null&&c&4&&Cb(o),c&512&&wc(o,o.return);break;case 12:Na(t,o);break;case 31:Na(t,o),c&4&&Lb(t,o);break;case 13:Na(t,o),c&4&&Ob(t,o),c&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=oT.bind(null,o),ST(t,o))));break;case 22:if(c=o.memoizedState!==null||ja,!c){r=r!==null&&r.memoizedState!==null||us,f=ja;var m=us;ja=c,(us=r)&&!m?Ca(t,o,(o.subtreeFlags&8772)!==0):Na(t,o),ja=f,us=m}break;case 30:break;default:Na(t,o)}}function Db(t){var r=t.alternate;r!==null&&(t.alternate=null,Db(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&bs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ln=null,Hs=!1;function Sa(t,r,o){for(o=o.child;o!==null;)Pb(t,r,o),o=o.sibling}function Pb(t,r,o){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(Be,o)}catch{}switch(o.tag){case 26:us||ea(o,r),Sa(t,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:us||ea(o,r);var c=Ln,f=Hs;mi(o.type)&&(Ln=o.stateNode,Hs=!1),Sa(t,r,o),Rc(o.stateNode),Ln=c,Hs=f;break;case 5:us||ea(o,r);case 6:if(c=Ln,f=Hs,Ln=null,Sa(t,r,o),Ln=c,Hs=f,Ln!==null)if(Hs)try{(Ln.nodeType===9?Ln.body:Ln.nodeName==="HTML"?Ln.ownerDocument.body:Ln).removeChild(o.stateNode)}catch(m){mn(o,r,m)}else try{Ln.removeChild(o.stateNode)}catch(m){mn(o,r,m)}break;case 18:Ln!==null&&(Hs?(t=Ln,S0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),ml(t)):S0(Ln,o.stateNode));break;case 4:c=Ln,f=Hs,Ln=o.stateNode.containerInfo,Hs=!0,Sa(t,r,o),Ln=c,Hs=f;break;case 0:case 11:case 14:case 15:oi(2,o,r),us||oi(4,o,r),Sa(t,r,o);break;case 1:us||(ea(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Nb(o,r,c)),Sa(t,r,o);break;case 21:Sa(t,r,o);break;case 22:us=(c=us)||o.memoizedState!==null,Sa(t,r,o),us=c;break;default:Sa(t,r,o)}}function Lb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ml(t)}catch(o){mn(r,r.return,o)}}}function Ob(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ml(t)}catch(o){mn(r,r.return,o)}}function Zk(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Ib),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Ib),r;default:throw Error(i(435,t.tag))}}function bh(t,r){var o=Zk(t);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=lT.bind(null,t,c);c.then(f,f)}})}function $s(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=t,x=r,N=x;e:for(;N!==null;){switch(N.tag){case 27:if(mi(N.type)){Ln=N.stateNode,Hs=!1;break e}break;case 5:Ln=N.stateNode,Hs=!1;break e;case 3:case 4:Ln=N.stateNode.containerInfo,Hs=!0;break e}N=N.return}if(Ln===null)throw Error(i(160));Pb(m,x,f),Ln=null,Hs=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Vb(r,t),r=r.sibling}var Mr=null;function Vb(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:$s(r,t),Ws(t),c&4&&(oi(3,t,t.return),xc(3,t),oi(5,t,t.return));break;case 1:$s(r,t),Ws(t),c&512&&(us||o===null||ea(o,o.return)),c&64&&ja&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Mr;if($s(r,t),Ws(t),c&512&&(us||o===null||ea(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=t.memoizedState,o===null)if(c===null)if(t.stateNode===null){e:{c=t.type,o=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[as]||m[rt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),js(m,c,o),m[rt]=t,T(m),c=m;break e;case"link":var x=V0("link","href",f).get(c+(o.href||""));if(x){for(var N=0;N<x.length;N++)if(m=x[N],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(N,1);break t}}m=f.createElement(c),js(m,c,o),f.head.appendChild(m);break;case"meta":if(x=V0("meta","content",f).get(c+(o.content||""))){for(N=0;N<x.length;N++)if(m=x[N],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(N,1);break t}}m=f.createElement(c),js(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[rt]=t,T(m),c=m}t.stateNode=c}else B0(f,t.type,t.stateNode);else t.stateNode=O0(f,c,t.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?B0(f,t.type,t.stateNode):O0(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&vm(t,t.memoizedProps,o.memoizedProps)}break;case 27:$s(r,t),Ws(t),c&512&&(us||o===null||ea(o,o.return)),o!==null&&c&4&&vm(t,t.memoizedProps,o.memoizedProps);break;case 5:if($s(r,t),Ws(t),c&512&&(us||o===null||ea(o,o.return)),t.flags&32){f=t.stateNode;try{Nn(f,"")}catch(ct){mn(t,t.return,ct)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,vm(t,f,o!==null?o.memoizedProps:f)),c&1024&&(wm=!0);break;case 6:if($s(r,t),Ws(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,o=t.stateNode;try{o.nodeValue=c}catch(ct){mn(t,t.return,ct)}}break;case 3:if(Ph=null,f=Mr,Mr=Mh(r.containerInfo),$s(r,t),Mr=f,Ws(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{ml(r.containerInfo)}catch(ct){mn(t,t.return,ct)}wm&&(wm=!1,Bb(t));break;case 4:c=Mr,Mr=Mh(t.stateNode.containerInfo),$s(r,t),Ws(t),Mr=c;break;case 12:$s(r,t),Ws(t);break;case 31:$s(r,t),Ws(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,bh(t,c)));break;case 13:$s(r,t),Ws(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(wh=Lt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,bh(t,c)));break;case 22:f=t.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,se=ja,ve=us;if(ja=se||f,us=ve||B,$s(r,t),us=ve,ja=se,Ws(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||B||ja||us||ho(t)),o=null,r=t;;){if(r.tag===5||r.tag===26){if(o===null){B=o=r;try{if(m=B.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{N=B.stateNode;var Ce=B.memoizedProps.style,ae=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;N.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(ct){mn(B,B.return,ct)}}}else if(r.tag===6){if(o===null){B=r;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(ct){mn(B,B.return,ct)}}}else if(r.tag===18){if(o===null){B=r;try{var ue=B.stateNode;f?N0(ue,!0):N0(B.stateNode,!1)}catch(ct){mn(B,B.return,ct)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,bh(t,o))));break;case 19:$s(r,t),Ws(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,bh(t,c)));break;case 30:break;case 21:break;default:$s(r,t),Ws(t)}}function Ws(t){var r=t.flags;if(r&2){try{for(var o,c=t.return;c!==null;){if(Rb(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=bm(t);vh(t,m,f);break;case 5:var x=o.stateNode;o.flags&32&&(Nn(x,""),o.flags&=-33);var N=bm(t);vh(t,N,x);break;case 3:case 4:var B=o.stateNode.containerInfo,se=bm(t);xm(t,se,B);break;default:throw Error(i(161))}}catch(ve){mn(t,t.return,ve)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Bb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Bb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Na(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Mb(t,r.alternate,r),r=r.sibling}function ho(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:oi(4,r,r.return),ho(r);break;case 1:ea(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Nb(r,r.return,o),ho(r);break;case 27:Rc(r.stateNode);case 26:case 5:ea(r,r.return),ho(r);break;case 22:r.memoizedState===null&&ho(r);break;case 30:ho(r);break;default:ho(r)}t=t.sibling}}function Ca(t,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,x=m.flags;switch(m.tag){case 0:case 11:case 15:Ca(f,m,o),xc(4,m);break;case 1:if(Ca(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(se){mn(c,c.return,se)}if(c=m,f=c.updateQueue,f!==null){var N=c.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)gv(B[f],N)}catch(se){mn(c,c.return,se)}}o&&x&64&&Sb(m),wc(m,m.return);break;case 27:Ab(m);case 26:case 5:Ca(f,m,o),o&&c===null&&x&4&&Cb(m),wc(m,m.return);break;case 12:Ca(f,m,o);break;case 31:Ca(f,m,o),o&&x&4&&Lb(f,m);break;case 13:Ca(f,m,o),o&&x&4&&Ob(f,m);break;case 22:m.memoizedState===null&&Ca(f,m,o),wc(m,m.return);break;case 30:break;default:Ca(f,m,o)}r=r.sibling}}function _m(t,r){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&oc(o))}function km(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&oc(t))}function Dr(t,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ub(t,r,o,c),r=r.sibling}function Ub(t,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Dr(t,r,o,c),f&2048&&xc(9,r);break;case 1:Dr(t,r,o,c);break;case 3:Dr(t,r,o,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&oc(t)));break;case 12:if(f&2048){Dr(t,r,o,c),t=r.stateNode;try{var m=r.memoizedProps,x=m.id,N=m.onPostCommit;typeof N=="function"&&N(x,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(B){mn(r,r.return,B)}}else Dr(t,r,o,c);break;case 31:Dr(t,r,o,c);break;case 13:Dr(t,r,o,c);break;case 23:break;case 22:m=r.stateNode,x=r.alternate,r.memoizedState!==null?m._visibility&2?Dr(t,r,o,c):_c(t,r):m._visibility&2?Dr(t,r,o,c):(m._visibility|=2,sl(t,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&_m(x,r);break;case 24:Dr(t,r,o,c),f&2048&&km(r.alternate,r);break;default:Dr(t,r,o,c)}}function sl(t,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,x=r,N=o,B=c,se=x.flags;switch(x.tag){case 0:case 11:case 15:sl(m,x,N,B,f),xc(8,x);break;case 23:break;case 22:var ve=x.stateNode;x.memoizedState!==null?ve._visibility&2?sl(m,x,N,B,f):_c(m,x):(ve._visibility|=2,sl(m,x,N,B,f)),f&&se&2048&&_m(x.alternate,x);break;case 24:sl(m,x,N,B,f),f&&se&2048&&km(x.alternate,x);break;default:sl(m,x,N,B,f)}r=r.sibling}}function _c(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=t,c=r,f=c.flags;switch(c.tag){case 22:_c(o,c),f&2048&&_m(c.alternate,c);break;case 24:_c(o,c),f&2048&&km(c.alternate,c);break;default:_c(o,c)}r=r.sibling}}var kc=8192;function rl(t,r,o){if(t.subtreeFlags&kc)for(t=t.child;t!==null;)zb(t,r,o),t=t.sibling}function zb(t,r,o){switch(t.tag){case 26:rl(t,r,o),t.flags&kc&&t.memoizedState!==null&&BT(o,Mr,t.memoizedState,t.memoizedProps);break;case 5:rl(t,r,o);break;case 3:case 4:var c=Mr;Mr=Mh(t.stateNode.containerInfo),rl(t,r,o),Mr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=kc,kc=16777216,rl(t,r,o),kc=c):rl(t,r,o));break;default:rl(t,r,o)}}function Fb(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Tc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];xs=c,Hb(c,t)}Fb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)qb(t),t=t.sibling}function qb(t){switch(t.tag){case 0:case 11:case 15:Tc(t),t.flags&2048&&oi(9,t,t.return);break;case 3:Tc(t);break;case 12:Tc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,xh(t)):Tc(t);break;default:Tc(t)}}function xh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];xs=c,Hb(c,t)}Fb(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:oi(8,r,r.return),xh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,xh(r));break;default:xh(r)}t=t.sibling}}function Hb(t,r){for(;xs!==null;){var o=xs;switch(o.tag){case 0:case 11:case 15:oi(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:oc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,xs=c;else e:for(o=t;xs!==null;){c=xs;var f=c.sibling,m=c.return;if(Db(c),c===o){xs=null;break e}if(f!==null){f.return=m,xs=f;break e}xs=m}}}var eT={getCacheForType:function(t){var r=Ts(os),o=r.data.get(t);return o===void 0&&(o=t(),r.data.set(t,o)),o},cacheSignal:function(){return Ts(os).controller.signal}},tT=typeof WeakMap=="function"?WeakMap:Map,ln=0,kn=null,Ht=null,Wt=0,fn=0,ar=null,li=!1,al=!1,Tm=!1,Ra=0,Wn=0,ci=0,fo=0,Em=0,ir=0,il=0,Ec=null,Gs=null,jm=!1,wh=0,$b=0,_h=1/0,kh=null,ui=null,gs=0,hi=null,ol=null,Aa=0,Sm=0,Nm=null,Wb=null,jc=0,Cm=null;function or(){return(ln&2)!==0&&Wt!==0?Wt&-Wt:Y.T!==null?Pm():we()}function Gb(){if(ir===0)if((Wt&536870912)===0||Zt){var t=Mn;Mn<<=1,(Mn&3932160)===0&&(Mn=262144),ir=t}else ir=536870912;return t=sr.current,t!==null&&(t.flags|=32),ir}function Ks(t,r,o){(t===kn&&(fn===2||fn===9)||t.cancelPendingCommit!==null)&&(ll(t,0),di(t,Wt,ir,!1)),Yn(t,o),((ln&2)===0||t!==kn)&&(t===kn&&((ln&2)===0&&(fo|=o),Wn===4&&di(t,Wt,ir,!1)),ta(t))}function Kb(t,r,o){if((ln&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&t.expiredLanes)===0||wn(t,r),f=c?rT(t,r):Am(t,r,!0),m=c;do{if(f===0){al&&!c&&di(t,r,0,!1);break}else{if(o=t.current.alternate,m&&!nT(o)){f=Am(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var N=t;f=Ec;var B=N.current.memoizedState.isDehydrated;if(B&&(ll(N,x).flags|=256),x=Am(N,x,!1),x!==2){if(Tm&&!B){N.errorRecoveryDisabledLanes|=m,fo|=m,f=4;break e}m=Gs,Gs=f,m!==null&&(Gs===null?Gs=m:Gs.push.apply(Gs,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){ll(t,0),di(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:di(c,r,ir,!li);break e;case 2:Gs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=wh+300-Lt(),10<f)){if(di(c,r,ir,!li),Un(c,0,!0)!==0)break e;Aa=r,c.timeoutHandle=E0(Yb.bind(null,c,o,Gs,kh,jm,r,ir,fo,il,li,m,"Throttled",-0,0),f);break e}Yb(c,o,Gs,kh,jm,r,ir,fo,il,li,m,null,-0,0)}}break}while(!0);ta(t)}function Yb(t,r,o,c,f,m,x,N,B,se,ve,Ce,ae,ue){if(t.timeoutHandle=-1,Ce=r.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bs},zb(r,m,Ce);var ct=(m&62914560)===m?wh-Lt():(m&4194048)===m?$b-Lt():0;if(ct=UT(Ce,ct),ct!==null){Aa=m,t.cancelPendingCommit=ct(s0.bind(null,t,r,m,o,c,f,x,N,B,ve,Ce,null,ae,ue)),di(t,m,x,!se);return}}s0(t,r,m,o,c,f,x,N,B)}function nT(t){for(var r=t;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!tr(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function di(t,r,o,c){r&=~Em,r&=~fo,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-$e(f),x=1<<m;c[m]=-1,f&=~x}o!==0&&vs(t,o,r)}function Th(){return(ln&6)===0?(Sc(0),!1):!0}function Rm(){if(Ht!==null){if(fn===0)var t=Ht.return;else t=Ht,xa=so=null,Wf(t),Jo=null,cc=0,t=Ht;for(;t!==null;)jb(t.alternate,t),t=t.return;Ht=null}}function ll(t,r){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,_T(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),Aa=0,Rm(),kn=t,Ht=o=va(t.current,null),Wt=r,fn=0,ar=null,li=!1,al=wn(t,r),Tm=!1,il=ir=Em=fo=ci=Wn=0,Gs=Ec=null,jm=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-$e(c),m=1<<f;r|=t[f],c&=~m}return Ra=r,$u(),o}function Qb(t,r){Pt=null,Y.H=yc,r===Xo||r===Zu?(r=dv(),fn=3):r===Df?(r=dv(),fn=4):fn=r===lm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ar=r,Ht===null&&(Wn=1,fh(t,pr(r,t.current)))}function Xb(){var t=sr.current;return t===null?!0:(Wt&4194048)===Wt?br===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?t===br:!1}function Jb(){var t=Y.H;return Y.H=yc,t===null?yc:t}function Zb(){var t=Y.A;return Y.A=eT,t}function Eh(){Wn=4,li||(Wt&4194048)!==Wt&&sr.current!==null||(al=!0),(ci&134217727)===0&&(fo&134217727)===0||kn===null||di(kn,Wt,ir,!1)}function Am(t,r,o){var c=ln;ln|=2;var f=Jb(),m=Zb();(kn!==t||Wt!==r)&&(kh=null,ll(t,r)),r=!1;var x=Wn;e:do try{if(fn!==0&&Ht!==null){var N=Ht,B=ar;switch(fn){case 8:Rm(),x=6;break e;case 3:case 2:case 9:case 6:sr.current===null&&(r=!0);var se=fn;if(fn=0,ar=null,cl(t,N,B,se),o&&al){x=0;break e}break;default:se=fn,fn=0,ar=null,cl(t,N,B,se)}}sT(),x=Wn;break}catch(ve){Qb(t,ve)}while(!0);return r&&t.shellSuspendCounter++,xa=so=null,ln=c,Y.H=f,Y.A=m,Ht===null&&(kn=null,Wt=0,$u()),x}function sT(){for(;Ht!==null;)e0(Ht)}function rT(t,r){var o=ln;ln|=2;var c=Jb(),f=Zb();kn!==t||Wt!==r?(kh=null,_h=Lt()+500,ll(t,r)):al=wn(t,r);e:do try{if(fn!==0&&Ht!==null){r=Ht;var m=ar;t:switch(fn){case 1:fn=0,ar=null,cl(t,r,m,1);break;case 2:case 9:if(uv(m)){fn=0,ar=null,t0(r);break}r=function(){fn!==2&&fn!==9||kn!==t||(fn=7),ta(t)},m.then(r,r);break e;case 3:fn=7;break e;case 4:fn=5;break e;case 7:uv(m)?(fn=0,ar=null,t0(r)):(fn=0,ar=null,cl(t,r,m,7));break;case 5:var x=null;switch(Ht.tag){case 26:x=Ht.memoizedState;case 5:case 27:var N=Ht;if(x?U0(x):N.stateNode.complete){fn=0,ar=null;var B=N.sibling;if(B!==null)Ht=B;else{var se=N.return;se!==null?(Ht=se,jh(se)):Ht=null}break t}}fn=0,ar=null,cl(t,r,m,5);break;case 6:fn=0,ar=null,cl(t,r,m,6);break;case 8:Rm(),Wn=6;break e;default:throw Error(i(462))}}aT();break}catch(ve){Qb(t,ve)}while(!0);return xa=so=null,Y.H=c,Y.A=f,ln=o,Ht!==null?0:(kn=null,Wt=0,$u(),Wn)}function aT(){for(;Ht!==null&&!ns();)e0(Ht)}function e0(t){var r=Tb(t.alternate,t,Ra);t.memoizedProps=t.pendingProps,r===null?jh(t):Ht=r}function t0(t){var r=t,o=r.alternate;switch(r.tag){case 15:case 0:r=vb(o,r,r.pendingProps,r.type,void 0,Wt);break;case 11:r=vb(o,r,r.pendingProps,r.type.render,r.ref,Wt);break;case 5:Wf(r);default:jb(o,r),r=Ht=Zy(r,Ra),r=Tb(o,r,Ra)}t.memoizedProps=t.pendingProps,r===null?jh(t):Ht=r}function cl(t,r,o,c){xa=so=null,Wf(r),Jo=null,cc=0;var f=r.return;try{if(Gk(t,f,r,o,Wt)){Wn=1,fh(t,pr(o,t.current)),Ht=null;return}}catch(m){if(f!==null)throw Ht=f,m;Wn=1,fh(t,pr(o,t.current)),Ht=null;return}r.flags&32768?(Zt||c===1?t=!0:al||(Wt&536870912)!==0?t=!1:(li=t=!0,(c===2||c===9||c===3||c===6)&&(c=sr.current,c!==null&&c.tag===13&&(c.flags|=16384))),n0(r,t)):jh(r)}function jh(t){var r=t;do{if((r.flags&32768)!==0){n0(r,li);return}t=r.return;var o=Qk(r.alternate,r,Ra);if(o!==null){Ht=o;return}if(r=r.sibling,r!==null){Ht=r;return}Ht=r=t}while(r!==null);Wn===0&&(Wn=5)}function n0(t,r){do{var o=Xk(t.alternate,t);if(o!==null){o.flags&=32767,Ht=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(t=t.sibling,t!==null)){Ht=t;return}Ht=t=o}while(t!==null);Wn=6,Ht=null}function s0(t,r,o,c,f,m,x,N,B){t.cancelPendingCommit=null;do Sh();while(gs!==0);if((ln&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=bf,Hn(t,o,m,x,N,B),t===kn&&(Ht=kn=null,Wt=0),ol=r,hi=t,Aa=o,Sm=m,Nm=f,Wb=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,cT(ge,function(){return l0(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=Ee.p,Ee.p=2,x=ln,ln|=4;try{Jk(t,r,o)}finally{ln=x,Ee.p=f,Y.T=c}}gs=1,r0(),a0(),i0()}}function r0(){if(gs===1){gs=0;var t=hi,r=ol,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var c=Ee.p;Ee.p=2;var f=ln;ln|=4;try{Vb(r,t);var m=qm,x=Hy(t.containerInfo),N=m.focusedElem,B=m.selectionRange;if(x!==N&&N&&N.ownerDocument&&qy(N.ownerDocument.documentElement,N)){if(B!==null&&mf(N)){var se=B.start,ve=B.end;if(ve===void 0&&(ve=se),"selectionStart"in N)N.selectionStart=se,N.selectionEnd=Math.min(ve,N.value.length);else{var Ce=N.ownerDocument||document,ae=Ce&&Ce.defaultView||window;if(ae.getSelection){var ue=ae.getSelection(),ct=N.textContent.length,_t=Math.min(B.start,ct),vn=B.end===void 0?_t:Math.min(B.end,ct);!ue.extend&&_t>vn&&(x=vn,vn=_t,_t=x);var Q=Fy(N,_t),$=Fy(N,vn);if(Q&&$&&(ue.rangeCount!==1||ue.anchorNode!==Q.node||ue.anchorOffset!==Q.offset||ue.focusNode!==$.node||ue.focusOffset!==$.offset)){var ne=Ce.createRange();ne.setStart(Q.node,Q.offset),ue.removeAllRanges(),_t>vn?(ue.addRange(ne),ue.extend($.node,$.offset)):(ne.setEnd($.node,$.offset),ue.addRange(ne))}}}}for(Ce=[],ue=N;ue=ue.parentNode;)ue.nodeType===1&&Ce.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<Ce.length;N++){var _e=Ce[N];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}Bh=!!Fm,qm=Fm=null}finally{ln=f,Ee.p=c,Y.T=o}}t.current=r,gs=2}}function a0(){if(gs===2){gs=0;var t=hi,r=ol,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var c=Ee.p;Ee.p=2;var f=ln;ln|=4;try{Mb(t,r.alternate,r)}finally{ln=f,Ee.p=c,Y.T=o}}gs=3}}function i0(){if(gs===4||gs===3){gs=0,Nt();var t=hi,r=ol,o=Aa,c=Wb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?gs=5:(gs=0,ol=hi=null,o0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ui=null),me(o),r=r.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(Be,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,f=Ee.p,Ee.p=2,Y.T=null;try{for(var m=t.onRecoverableError,x=0;x<c.length;x++){var N=c[x];m(N.value,{componentStack:N.stack})}}finally{Y.T=r,Ee.p=f}}(Aa&3)!==0&&Sh(),ta(t),f=t.pendingLanes,(o&261930)!==0&&(f&42)!==0?t===Cm?jc++:(jc=0,Cm=t):jc=0,Sc(0)}}function o0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,oc(r)))}function Sh(){return r0(),a0(),i0(),l0()}function l0(){if(gs!==5)return!1;var t=hi,r=Sm;Sm=0;var o=me(Aa),c=Y.T,f=Ee.p;try{Ee.p=32>o?32:o,Y.T=null,o=Nm,Nm=null;var m=hi,x=Aa;if(gs=0,ol=hi=null,Aa=0,(ln&6)!==0)throw Error(i(331));var N=ln;if(ln|=4,qb(m.current),Ub(m,m.current,x,o),ln=N,Sc(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(Be,m)}catch{}return!0}finally{Ee.p=f,Y.T=c,o0(t,r)}}function c0(t,r,o){r=pr(o,r),r=om(t.stateNode,r,2),t=ri(t,r,2),t!==null&&(Yn(t,2),ta(t))}function mn(t,r,o){if(t.tag===3)c0(t,t,o);else for(;r!==null;){if(r.tag===3){c0(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ui===null||!ui.has(c))){t=pr(o,t),o=ub(2),c=ri(r,o,2),c!==null&&(hb(o,c,r,t),Yn(c,2),ta(c));break}}r=r.return}}function Im(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new tT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(Tm=!0,f.add(o),t=iT.bind(null,t,r,o),r.then(t,t))}function iT(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,kn===t&&(Wt&o)===o&&(Wn===4||Wn===3&&(Wt&62914560)===Wt&&300>Lt()-wh?(ln&2)===0&&ll(t,0):Em|=o,il===Wt&&(il=0)),ta(t)}function u0(t,r){r===0&&(r=rs()),t=eo(t,r),t!==null&&(Yn(t,r),ta(t))}function oT(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),u0(t,o)}function lT(t,r){var o=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),u0(t,o)}function cT(t,r){return Ye(t,r)}var Nh=null,ul=null,Mm=!1,Ch=!1,Dm=!1,fi=0;function ta(t){t!==ul&&t.next===null&&(ul===null?Nh=ul=t:ul=ul.next=t),Ch=!0,Mm||(Mm=!0,hT())}function Sc(t,r){if(!Dm&&Ch){Dm=!0;do for(var o=!1,c=Nh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,N=c.pingedLanes;m=(1<<31-$e(42|t)+1)-1,m&=f&~(x&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,m0(c,m))}else m=Wt,m=Un(c,c===kn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||wn(c,m)||(o=!0,m0(c,m));c=c.next}while(o);Dm=!1}}function uT(){h0()}function h0(){Ch=Mm=!1;var t=0;fi!==0&&wT()&&(t=fi);for(var r=Lt(),o=null,c=Nh;c!==null;){var f=c.next,m=d0(c,r);m===0?(c.next=null,o===null?Nh=f:o.next=f,f===null&&(ul=o)):(o=c,(t!==0||(m&3)!==0)&&(Ch=!0)),c=f}gs!==0&&gs!==5||Sc(t),fi!==0&&(fi=0)}function d0(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-$e(m),N=1<<x,B=f[x];B===-1?((N&o)===0||(N&c)!==0)&&(f[x]=ss(N,r)):B<=r&&(t.expiredLanes|=N),m&=~N}if(r=kn,o=Wt,o=Un(t,t===r?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,o===0||t===r&&(fn===2||fn===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&qt(c),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||wn(t,o)){if(r=o&-o,r===t.callbackPriority)return r;switch(c!==null&&qt(c),me(o)){case 2:case 8:o=cn;break;case 32:o=ge;break;case 268435456:o=De;break;default:o=ge}return c=f0.bind(null,t),o=Ye(o,c),t.callbackPriority=r,t.callbackNode=o,r}return c!==null&&c!==null&&qt(c),t.callbackPriority=2,t.callbackNode=null,2}function f0(t,r){if(gs!==0&&gs!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(Sh()&&t.callbackNode!==o)return null;var c=Wt;return c=Un(t,t===kn?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Kb(t,c,r),d0(t,Lt()),t.callbackNode!=null&&t.callbackNode===o?f0.bind(null,t):null)}function m0(t,r){if(Sh())return null;Kb(t,r,!0)}function hT(){kT(function(){(ln&6)!==0?Ye(Ct,uT):h0()})}function Pm(){if(fi===0){var t=Yo;t===0&&(t=tn,tn<<=1,(tn&261888)===0&&(tn=256)),fi=t}return fi}function p0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wa(""+t)}function g0(t,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,t.id&&o.setAttribute("form",t.id),r.parentNode.insertBefore(o,r),t=new FormData(t),o.parentNode.removeChild(o),t}function dT(t,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=p0((f[mt]||null).action),x=c.submitter;x&&(r=(r=x[mt]||null)?p0(r.formAction):x.getAttribute("formAction"),r!==null&&(m=r,x=null));var N=new Kr("action","action",null,c,f);t.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(fi!==0){var B=x?g0(f,x):new FormData(f);tm(o,{pending:!0,data:B,method:f.method,action:m},null,B)}}else typeof m=="function"&&(N.preventDefault(),B=x?g0(f,x):new FormData(f),tm(o,{pending:!0,data:B,method:f.method,action:m},m,B))},currentTarget:f}]})}}for(var Lm=0;Lm<vf.length;Lm++){var Om=vf[Lm],fT=Om.toLowerCase(),mT=Om[0].toUpperCase()+Om.slice(1);Ir(fT,"on"+mT)}Ir(Gy,"onAnimationEnd"),Ir(Ky,"onAnimationIteration"),Ir(Yy,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Rk,"onTransitionRun"),Ir(Ak,"onTransitionStart"),Ir(Ik,"onTransitionCancel"),Ir(Qy,"onTransitionEnd"),ye("onMouseEnter",["mouseout","mouseover"]),ye("onMouseLeave",["mouseout","mouseover"]),ye("onPointerEnter",["pointerout","pointerover"]),ye("onPointerLeave",["pointerout","pointerover"]),Ae("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ae("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ae("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ae("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ae("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ae("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nc));function y0(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var x=c.length-1;0<=x;x--){var N=c[x],B=N.instance,se=N.currentTarget;if(N=N.listener,B!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=se;try{m(f)}catch(ve){Hu(ve)}f.currentTarget=null,m=B}else for(x=0;x<c.length;x++){if(N=c[x],B=N.instance,se=N.currentTarget,N=N.listener,B!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=se;try{m(f)}catch(ve){Hu(ve)}f.currentTarget=null,m=B}}}}function $t(t,r){var o=r[xt];o===void 0&&(o=r[xt]=new Set);var c=t+"__bubble";o.has(c)||(v0(r,t,2,!1),o.add(c))}function Vm(t,r,o){var c=0;r&&(c|=4),v0(o,t,c,r)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function Bm(t){if(!t[Rh]){t[Rh]=!0,P.forEach(function(o){o!=="selectionchange"&&(pT.has(o)||Vm(o,!1,t),Vm(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Rh]||(r[Rh]=!0,Vm("selectionchange",!1,r))}}function v0(t,r,o,c){switch(G0(r)){case 2:var f=qT;break;case 8:f=HT;break;default:f=ep}o=f.bind(null,r,o,t),f=void 0,!Wi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function Um(t,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var N=c.stateNode.containerInfo;if(N===f)break;if(x===4)for(x=c.return;x!==null;){var B=x.tag;if((B===3||B===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;N!==null;){if(x=_n(N),x===null)return;if(B=x.tag,B===5||B===6||B===26||B===27){c=m=x;continue e}N=N.parentNode}}c=c.return}Ka(function(){var se=m,ve=hr(o),Ce=[];e:{var ae=Xy.get(t);if(ae!==void 0){var ue=Kr,ct=t;switch(t){case"keypress":if(Ki(o)===0)break e;case"keydown":case"keyup":ue=zu;break;case"focusin":ct="focus",ue=Qi;break;case"focusout":ct="blur",ue=Qi;break;case"beforeblur":case"afterblur":ue=Qi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=v;break;case Gy:case Ky:case Yy:ue=Du;break;case Qy:ue=C;break;case"scroll":case"scrollend":ue=Jl;break;case"wheel":ue=ce;break;case"copy":case"cut":case"paste":ue=Pu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=ya;break;case"toggle":case"beforetoggle":ue=Dt}var _t=(r&4)!==0,vn=!_t&&(t==="scroll"||t==="scrollend"),Q=_t?ae!==null?ae+"Capture":null:ae;_t=[];for(var $=se,ne;$!==null;){var _e=$;if(ne=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||ne===null||Q===null||(_e=Nr($,Q),_e!=null&&_t.push(Cc($,_e,ne))),vn)break;$=$.return}0<_t.length&&(ae=new ue(ae,ct,null,o,ve),Ce.push({event:ae,listeners:_t}))}}if((r&7)===0){e:{if(ae=t==="mouseover"||t==="pointerover",ue=t==="mouseout"||t==="pointerout",ae&&o!==Yl&&(ct=o.relatedTarget||o.fromElement)&&(_n(ct)||ct[it]))break e;if((ue||ae)&&(ae=ve.window===ve?ve:(ae=ve.ownerDocument)?ae.defaultView||ae.parentWindow:window,ue?(ct=o.relatedTarget||o.toElement,ue=se,ct=ct?_n(ct):null,ct!==null&&(vn=u(ct),_t=ct.tag,ct!==vn||_t!==5&&_t!==27&&_t!==6)&&(ct=null)):(ue=null,ct=se),ue!==ct)){if(_t=Zl,_e="onMouseLeave",Q="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(_t=ya,_e="onPointerLeave",Q="onPointerEnter",$="pointer"),vn=ue==null?ae:le(ue),ne=ct==null?ae:le(ct),ae=new _t(_e,$+"leave",ue,o,ve),ae.target=vn,ae.relatedTarget=ne,_e=null,_n(ve)===se&&(_t=new _t(Q,$+"enter",ct,o,ve),_t.target=ne,_t.relatedTarget=vn,_e=_t),vn=_e,ue&&ct)t:{for(_t=gT,Q=ue,$=ct,ne=0,_e=Q;_e;_e=_t(_e))ne++;_e=0;for(var gt=$;gt;gt=_t(gt))_e++;for(;0<ne-_e;)Q=_t(Q),ne--;for(;0<_e-ne;)$=_t($),_e--;for(;ne--;){if(Q===$||$!==null&&Q===$.alternate){_t=Q;break t}Q=_t(Q),$=_t($)}_t=null}else _t=null;ue!==null&&b0(Ce,ae,ue,_t,!1),ct!==null&&vn!==null&&b0(Ce,vn,ct,_t,!0)}}e:{if(ae=se?le(se):window,ue=ae.nodeName&&ae.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ae.type==="file")var nn=Ly;else if(Dy(ae))if(Oy)nn=Sk;else{nn=Ek;var ht=Tk}else ue=ae.nodeName,!ue||ue.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?se&&zn(se.elementType)&&(nn=Ly):nn=jk;if(nn&&(nn=nn(t,se))){Py(Ce,nn,o,ve);break e}ht&&ht(t,ae,se),t==="focusout"&&se&&ae.type==="number"&&se.memoizedProps.value!=null&&ms(ae,"number",ae.value)}switch(ht=se?le(se):window,t){case"focusin":(Dy(ht)||ht.contentEditable==="true")&&(zo=ht,pf=se,rc=null);break;case"focusout":rc=pf=zo=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,$y(Ce,o,ve);break;case"selectionchange":if(Ck)break;case"keydown":case"keyup":$y(Ce,o,ve)}var Vt;if(on)e:{switch(t){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else Uo?Xi(t,o)&&(Gt="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Gt="onCompositionStart");Gt&&(Xr&&o.locale!=="ko"&&(Uo||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Uo&&(Vt=Xl()):(Gr=ve,Ql="value"in Gr?Gr.value:Gr.textContent,Uo=!0)),ht=Ah(se,Gt),0<ht.length&&(Gt=new Qr(Gt,t,null,o,ve),Ce.push({event:Gt,listeners:ht}),Vt?Gt.data=Vt:(Vt=Bo(o),Vt!==null&&(Gt.data=Vt)))),(Vt=fr?xk(t,o):wk(t,o))&&(Gt=Ah(se,"onBeforeInput"),0<Gt.length&&(ht=new Qr("onBeforeInput","beforeinput",null,o,ve),Ce.push({event:ht,listeners:Gt}),ht.data=Vt)),dT(Ce,t,se,o,ve)}y0(Ce,r)})}function Cc(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ah(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Nr(t,o),f!=null&&c.unshift(Cc(t,f,m)),f=Nr(t,r),f!=null&&c.push(Cc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function gT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function b0(t,r,o,c,f){for(var m=r._reactName,x=[];o!==null&&o!==c;){var N=o,B=N.alternate,se=N.stateNode;if(N=N.tag,B!==null&&B===c)break;N!==5&&N!==26&&N!==27||se===null||(B=se,f?(se=Nr(o,m),se!=null&&x.unshift(Cc(o,se,B))):f||(se=Nr(o,m),se!=null&&x.push(Cc(o,se,B)))),o=o.return}x.length!==0&&t.push({event:r,listeners:x})}var yT=/\r\n?/g,vT=/\u0000|\uFFFD/g;function x0(t){return(typeof t=="string"?t:""+t).replace(yT,`
`).replace(vT,"")}function w0(t,r){return r=x0(r),x0(t)===r}function yn(t,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Nn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Nn(t,""+c);break;case"className":Z(t,"class",c);break;case"tabIndex":Z(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Z(t,o,c);break;case"style":Dn(t,c,m);break;case"data":if(r!=="object"){Z(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){t.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Wa(""+c),t.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&yn(t,r,"name",f.name,f,null),yn(t,r,"formEncType",f.formEncType,f,null),yn(t,r,"formMethod",f.formMethod,f,null),yn(t,r,"formTarget",f.formTarget,f,null)):(yn(t,r,"encType",f.encType,f,null),yn(t,r,"method",f.method,f,null),yn(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Wa(""+c),t.setAttribute(o,c);break;case"onClick":c!=null&&(t.onclick=Bs);break;case"onScroll":c!=null&&$t("scroll",t);break;case"onScrollEnd":c!=null&&$t("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}o=Wa(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""+c):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":c===!0?t.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,c):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(o,c):t.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(o):t.setAttribute(o,c);break;case"popover":$t("beforetoggle",t),$t("toggle",t),J(t,"popover",c);break;case"xlinkActuate":pe(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":pe(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":pe(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":pe(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":pe(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":pe(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":pe(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":pe(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":pe(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":J(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=$r.get(o)||o,J(t,o,c))}}function zm(t,r,o,c,f,m){switch(o){case"style":Dn(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"children":typeof c=="string"?Nn(t,c):(typeof c=="number"||typeof c=="bigint")&&Nn(t,""+c);break;case"onScroll":c!=null&&$t("scroll",t);break;case"onScrollEnd":c!=null&&$t("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Bs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!K.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=t[mt]||null,m=m!=null?m[o]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(r,c,f);break e}o in t?t[o]=c:c===!0?t.setAttribute(o,""):J(t,o,c)}}}function js(t,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",t),$t("load",t);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:yn(t,r,m,x,o,null)}}f&&yn(t,r,"srcSet",o.srcSet,o,null),c&&yn(t,r,"src",o.src,o,null);return;case"input":$t("invalid",t);var N=m=x=f=null,B=null,se=null;for(c in o)if(o.hasOwnProperty(c)){var ve=o[c];if(ve!=null)switch(c){case"name":f=ve;break;case"type":x=ve;break;case"checked":B=ve;break;case"defaultChecked":se=ve;break;case"value":m=ve;break;case"defaultValue":N=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,r));break;default:yn(t,r,c,ve,o,null)}}is(t,m,N,B,se,x,f,!1);return;case"select":$t("invalid",t),c=x=m=null;for(f in o)if(o.hasOwnProperty(f)&&(N=o[f],N!=null))switch(f){case"value":m=N;break;case"defaultValue":x=N;break;case"multiple":c=N;default:yn(t,r,f,N,o,null)}r=m,o=x,t.multiple=!!c,r!=null?ps(t,!!c,r,!1):o!=null&&ps(t,!!c,o,!0);return;case"textarea":$t("invalid",t),m=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(N=o[x],N!=null))switch(x){case"value":c=N;break;case"defaultValue":f=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:yn(t,r,x,N,o,null)}Tn(t,c,f,m);return;case"option":for(B in o)o.hasOwnProperty(B)&&(c=o[B],c!=null)&&(B==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":yn(t,r,B,c,o,null));return;case"dialog":$t("beforetoggle",t),$t("toggle",t),$t("cancel",t),$t("close",t);break;case"iframe":case"object":$t("load",t);break;case"video":case"audio":for(c=0;c<Nc.length;c++)$t(Nc[c],t);break;case"image":$t("error",t),$t("load",t);break;case"details":$t("toggle",t);break;case"embed":case"source":case"link":$t("error",t),$t("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in o)if(o.hasOwnProperty(se)&&(c=o[se],c!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:yn(t,r,se,c,o,null)}return;default:if(zn(r)){for(ve in o)o.hasOwnProperty(ve)&&(c=o[ve],c!==void 0&&zm(t,r,ve,c,o,void 0));return}}for(N in o)o.hasOwnProperty(N)&&(c=o[N],c!=null&&yn(t,r,N,c,o,null))}function bT(t,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,N=null,B=null,se=null,ve=null;for(ue in o){var Ce=o[ue];if(o.hasOwnProperty(ue)&&Ce!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":B=Ce;default:c.hasOwnProperty(ue)||yn(t,r,ue,null,c,Ce)}}for(var ae in c){var ue=c[ae];if(Ce=o[ae],c.hasOwnProperty(ae)&&(ue!=null||Ce!=null))switch(ae){case"type":m=ue;break;case"name":f=ue;break;case"checked":se=ue;break;case"defaultChecked":ve=ue;break;case"value":x=ue;break;case"defaultValue":N=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,r));break;default:ue!==Ce&&yn(t,r,ae,ue,c,Ce)}}Zs(t,x,N,B,se,ve,m,f);return;case"select":ue=x=N=ae=null;for(m in o)if(B=o[m],o.hasOwnProperty(m)&&B!=null)switch(m){case"value":break;case"multiple":ue=B;default:c.hasOwnProperty(m)||yn(t,r,m,null,c,B)}for(f in c)if(m=c[f],B=o[f],c.hasOwnProperty(f)&&(m!=null||B!=null))switch(f){case"value":ae=m;break;case"defaultValue":N=m;break;case"multiple":x=m;default:m!==B&&yn(t,r,f,m,c,B)}r=N,o=x,c=ue,ae!=null?ps(t,!!o,ae,!1):!!c!=!!o&&(r!=null?ps(t,!!o,r,!0):ps(t,!!o,o?[]:"",!1));return;case"textarea":ue=ae=null;for(N in o)if(f=o[N],o.hasOwnProperty(N)&&f!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:yn(t,r,N,null,c,f)}for(x in c)if(f=c[x],m=o[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":ae=f;break;case"defaultValue":ue=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&yn(t,r,x,f,c,m)}zt(t,ae,ue);return;case"option":for(var ct in o)ae=o[ct],o.hasOwnProperty(ct)&&ae!=null&&!c.hasOwnProperty(ct)&&(ct==="selected"?t.selected=!1:yn(t,r,ct,null,c,ae));for(B in c)ae=c[B],ue=o[B],c.hasOwnProperty(B)&&ae!==ue&&(ae!=null||ue!=null)&&(B==="selected"?t.selected=ae&&typeof ae!="function"&&typeof ae!="symbol":yn(t,r,B,ae,c,ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in o)ae=o[_t],o.hasOwnProperty(_t)&&ae!=null&&!c.hasOwnProperty(_t)&&yn(t,r,_t,null,c,ae);for(se in c)if(ae=c[se],ue=o[se],c.hasOwnProperty(se)&&ae!==ue&&(ae!=null||ue!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,r));break;default:yn(t,r,se,ae,c,ue)}return;default:if(zn(r)){for(var vn in o)ae=o[vn],o.hasOwnProperty(vn)&&ae!==void 0&&!c.hasOwnProperty(vn)&&zm(t,r,vn,void 0,c,ae);for(ve in c)ae=c[ve],ue=o[ve],!c.hasOwnProperty(ve)||ae===ue||ae===void 0&&ue===void 0||zm(t,r,ve,ae,c,ue);return}}for(var Q in o)ae=o[Q],o.hasOwnProperty(Q)&&ae!=null&&!c.hasOwnProperty(Q)&&yn(t,r,Q,null,c,ae);for(Ce in c)ae=c[Ce],ue=o[Ce],!c.hasOwnProperty(Ce)||ae===ue||ae==null&&ue==null||yn(t,r,Ce,ae,c,ue)}function _0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,x=f.initiatorType,N=f.duration;if(m&&N&&_0(x)){for(x=0,N=f.responseEnd,c+=1;c<o.length;c++){var B=o[c],se=B.startTime;if(se>N)break;var ve=B.transferSize,Ce=B.initiatorType;ve&&_0(Ce)&&(B=B.responseEnd,x+=ve*(B<N?1:(N-se)/(B-se)))}if(--c,r+=8*(m+x)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Fm=null,qm=null;function Ih(t){return t.nodeType===9?t:t.ownerDocument}function k0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function T0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Hm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var $m=null;function wT(){var t=window.event;return t&&t.type==="popstate"?t===$m?!1:($m=t,!0):($m=null,!1)}var E0=typeof setTimeout=="function"?setTimeout:void 0,_T=typeof clearTimeout=="function"?clearTimeout:void 0,j0=typeof Promise=="function"?Promise:void 0,kT=typeof queueMicrotask=="function"?queueMicrotask:typeof j0<"u"?function(t){return j0.resolve(null).then(t).catch(TT)}:E0;function TT(t){setTimeout(function(){throw t})}function mi(t){return t==="head"}function S0(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){t.removeChild(f),ml(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Rc(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Rc(o);for(var m=o.firstChild;m;){var x=m.nextSibling,N=m.nodeName;m[as]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=x}}else o==="body"&&Rc(t.ownerDocument.body);o=f}while(o);ml(r)}function N0(t,r){var o=t;t=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=c}while(o)}function Wm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wm(o),bs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function ET(t,r,o,c){for(;t.nodeType===1;){var f=o;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[as])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=xr(t.nextSibling),t===null)break}return null}function jT(t,r,o){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=xr(t.nextSibling),t===null))return null;return t}function C0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=xr(t.nextSibling),t===null))return null;return t}function Gm(t){return t.data==="$?"||t.data==="$~"}function Km(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ST(t,r){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function xr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Ym=null;function R0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(r===0)return xr(t.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}t=t.nextSibling}return null}function A0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return t;r--}else o!=="/$"&&o!=="/&"||r++}t=t.previousSibling}return null}function I0(t,r,o){switch(r=Ih(o),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Rc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);bs(t)}var wr=new Map,M0=new Set;function Mh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ia=Ee.d;Ee.d={f:NT,r:CT,D:RT,C:AT,L:IT,m:MT,X:PT,S:DT,M:LT};function NT(){var t=Ia.f(),r=Th();return t||r}function CT(t){var r=q(t);r!==null&&r.tag===5&&r.type==="form"?Qv(r):Ia.r(t)}var hl=typeof document>"u"?null:document;function D0(t,r,o){var c=hl;if(c&&typeof r=="string"&&r){var f=un(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),M0.has(f)||(M0.add(f),t={rel:t,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),js(r,"link",t),T(r),c.head.appendChild(r)))}}function RT(t){Ia.D(t),D0("dns-prefetch",t,null)}function AT(t,r){Ia.C(t,r),D0("preconnect",t,r)}function IT(t,r,o){Ia.L(t,r,o);var c=hl;if(c&&t&&r){var f='link[rel="preload"][as="'+un(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+un(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+un(o.imageSizes)+'"]')):f+='[href="'+un(t)+'"]';var m=f;switch(r){case"style":m=dl(t);break;case"script":m=fl(t)}wr.has(m)||(t=E({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:t,as:r},o),wr.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(Ac(m))||r==="script"&&c.querySelector(Ic(m))||(r=c.createElement("link"),js(r,"link",t),T(r),c.head.appendChild(r)))}}function MT(t,r){Ia.m(t,r);var o=hl;if(o&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+un(c)+'"][href="'+un(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=fl(t)}if(!wr.has(m)&&(t=E({rel:"modulepreload",href:t},r),wr.set(m,t),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ic(m)))return}c=o.createElement("link"),js(c,"link",t),T(c),o.head.appendChild(c)}}}function DT(t,r,o){Ia.S(t,r,o);var c=hl;if(c&&t){var f=b(c).hoistableStyles,m=dl(t);r=r||"default";var x=f.get(m);if(!x){var N={loading:0,preload:null};if(x=c.querySelector(Ac(m)))N.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":r},o),(o=wr.get(m))&&Qm(t,o);var B=x=c.createElement("link");T(B),js(B,"link",t),B._p=new Promise(function(se,ve){B.onload=se,B.onerror=ve}),B.addEventListener("load",function(){N.loading|=1}),B.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Dh(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:N},f.set(m,x)}}}function PT(t,r){Ia.X(t,r);var o=hl;if(o&&t){var c=b(o).hoistableScripts,f=fl(t),m=c.get(f);m||(m=o.querySelector(Ic(f)),m||(t=E({src:t,async:!0},r),(r=wr.get(f))&&Xm(t,r),m=o.createElement("script"),T(m),js(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function LT(t,r){Ia.M(t,r);var o=hl;if(o&&t){var c=b(o).hoistableScripts,f=fl(t),m=c.get(f);m||(m=o.querySelector(Ic(f)),m||(t=E({src:t,async:!0,type:"module"},r),(r=wr.get(f))&&Xm(t,r),m=o.createElement("script"),T(m),js(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function P0(t,r,o,c){var f=(f=Oe.current)?Mh(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=dl(o.href),o=b(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=dl(o.href);var m=b(f).hoistableStyles,x=m.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=f.querySelector(Ac(t)))&&!m._p&&(x.instance=m,x.state.loading=5),wr.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},wr.set(t,o),m||OT(f,t,o,x.state))),r&&c===null)throw Error(i(528,""));return x}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=fl(o),o=b(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function dl(t){return'href="'+un(t)+'"'}function Ac(t){return'link[rel="stylesheet"]['+t+"]"}function L0(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function OT(t,r,o,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),js(r,"link",o),T(r),t.head.appendChild(r))}function fl(t){return'[src="'+un(t)+'"]'}function Ic(t){return"script[async]"+t}function O0(t,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+un(o.href)+'"]');if(c)return r.instance=c,T(c),c;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),T(c),js(c,"style",f),Dh(c,o.precedence,t),r.instance=c;case"stylesheet":f=dl(o.href);var m=t.querySelector(Ac(f));if(m)return r.state.loading|=4,r.instance=m,T(m),m;c=L0(o),(f=wr.get(f))&&Qm(c,f),m=(t.ownerDocument||t).createElement("link"),T(m);var x=m;return x._p=new Promise(function(N,B){x.onload=N,x.onerror=B}),js(m,"link",c),r.state.loading|=4,Dh(m,o.precedence,t),r.instance=m;case"script":return m=fl(o.src),(f=t.querySelector(Ic(m)))?(r.instance=f,T(f),f):(c=o,(f=wr.get(m))&&(c=E({},o),Xm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),T(f),js(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Dh(c,o.precedence,t));return r.instance}function Dh(t,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var N=c[x];if(N.dataset.precedence===r)m=N;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(t,r.firstChild))}function Qm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Xm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Ph=null;function V0(t,r,o){if(Ph===null){var c=new Map,f=Ph=new Map;f.set(o,c)}else f=Ph,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(t))return c;for(c.set(t,null),o=o.getElementsByTagName(t),f=0;f<o.length;f++){var m=o[f];if(!(m[as]||m[rt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(r)||"";x=t+x;var N=c.get(x);N?N.push(m):c.set(x,[m])}}return c}function B0(t,r,o){t=t.ownerDocument||t,t.head.insertBefore(o,r==="title"?t.querySelector("head > title"):null)}function VT(t,r,o){if(o===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function U0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function BT(t,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=dl(c.href),m=r.querySelector(Ac(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Lh.bind(t),r.then(t,t)),o.state.loading|=4,o.instance=m,T(m);return}m=r.ownerDocument||r,c=L0(c),(f=wr.get(f))&&Qm(c,f),m=m.createElement("link"),T(m);var x=m;x._p=new Promise(function(N,B){x.onload=N,x.onerror=B}),js(m,"link",c),o.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Lh.bind(t),r.addEventListener("load",o),r.addEventListener("error",o))}}var Jm=0;function UT(t,r){return t.stylesheets&&t.count===0&&Vh(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var c=setTimeout(function(){if(t.stylesheets&&Vh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Jm===0&&(Jm=62500*xT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Vh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Jm?50:800)+r);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Oh=null;function Vh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Oh=new Map,r.forEach(zT,t),Oh=null,Lh.call(t))}function zT(t,r){if(!(r.state.loading&4)){var o=Oh.get(t);if(o)var c=o.get(null);else{o=new Map,Oh.set(t,o);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=r.instance,x=f.getAttribute("data-precedence"),m=o.get(x)||c,m===c&&o.set(null,f),o.set(x,f),this.count++,c=Lh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Mc={$$typeof:he,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function FT(t,r,o,c,f,m,x,N,B){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sn(0),this.hiddenUpdates=Sn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function z0(t,r,o,c,f,m,x,N,B,se,ve,Ce){return t=new FT(t,r,o,x,B,se,ve,Ce,N),r=1,m===!0&&(r|=24),m=nr(3,null,null,r),t.current=m,m.stateNode=t,r=Af(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Pf(m),t}function F0(t){return t?(t=Ho,t):Ho}function q0(t,r,o,c,f,m){f=F0(f),c.context===null?c.context=f:c.pendingContext=f,c=si(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=ri(t,c,r),o!==null&&(Ks(o,t,r),hc(o,t,r))}function H0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Zm(t,r){H0(t,r),(t=t.alternate)&&H0(t,r)}function $0(t){if(t.tag===13||t.tag===31){var r=eo(t,67108864);r!==null&&Ks(r,t,67108864),Zm(t,67108864)}}function W0(t){if(t.tag===13||t.tag===31){var r=or();r=H(r);var o=eo(t,r);o!==null&&Ks(o,t,r),Zm(t,r)}}var Bh=!0;function qT(t,r,o,c){var f=Y.T;Y.T=null;var m=Ee.p;try{Ee.p=2,ep(t,r,o,c)}finally{Ee.p=m,Y.T=f}}function HT(t,r,o,c){var f=Y.T;Y.T=null;var m=Ee.p;try{Ee.p=8,ep(t,r,o,c)}finally{Ee.p=m,Y.T=f}}function ep(t,r,o,c){if(Bh){var f=tp(c);if(f===null)Um(t,r,c,Uh,o),K0(t,c);else if(WT(f,t,r,o,c))c.stopPropagation();else if(K0(t,c),r&4&&-1<$T.indexOf(t)){for(;f!==null;){var m=q(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=an(m.pendingLanes);if(x!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;x;){var B=1<<31-$e(x);N.entanglements[1]|=B,x&=~B}ta(m),(ln&6)===0&&(_h=Lt()+500,Sc(0))}}break;case 31:case 13:N=eo(m,2),N!==null&&Ks(N,m,2),Th(),Zm(m,2)}if(m=tp(c),m===null&&Um(t,r,c,Uh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Um(t,r,c,null,o)}}function tp(t){return t=hr(t),np(t)}var Uh=null;function np(t){if(Uh=null,t=_n(t),t!==null){var r=u(t);if(r===null)t=null;else{var o=r.tag;if(o===13){if(t=d(r),t!==null)return t;t=null}else if(o===31){if(t=p(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Uh=t,null}function G0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(In()){case Ct:return 2;case cn:return 8;case ge:case je:return 32;case De:return 268435456;default:return 32}default:return 32}}var sp=!1,pi=null,gi=null,yi=null,Dc=new Map,Pc=new Map,vi=[],$T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function K0(t,r){switch(t){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":Dc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(r.pointerId)}}function Lc(t,r,o,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=q(r),r!==null&&$0(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function WT(t,r,o,c,f){switch(r){case"focusin":return pi=Lc(pi,t,r,o,c,f),!0;case"dragenter":return gi=Lc(gi,t,r,o,c,f),!0;case"mouseover":return yi=Lc(yi,t,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Dc.set(m,Lc(Dc.get(m)||null,t,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Pc.set(m,Lc(Pc.get(m)||null,t,r,o,c,f)),!0}return!1}function Y0(t){var r=_n(t.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=d(o),r!==null){t.blockedOn=r,be(t.priority,function(){W0(o)});return}}else if(r===31){if(r=p(o),r!==null){t.blockedOn=r,be(t.priority,function(){W0(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=tp(t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Yl=c,o.target.dispatchEvent(c),Yl=null}else return r=q(o),r!==null&&$0(r),t.blockedOn=o,!1;r.shift()}return!0}function Q0(t,r,o){zh(t)&&o.delete(r)}function GT(){sp=!1,pi!==null&&zh(pi)&&(pi=null),gi!==null&&zh(gi)&&(gi=null),yi!==null&&zh(yi)&&(yi=null),Dc.forEach(Q0),Pc.forEach(Q0)}function Fh(t,r){t.blockedOn===r&&(t.blockedOn=null,sp||(sp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,GT)))}var qh=null;function X0(t){qh!==t&&(qh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){qh===t&&(qh=null);for(var r=0;r<t.length;r+=3){var o=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(np(c||o)===null)continue;break}var m=q(o);m!==null&&(t.splice(r,3),r-=3,tm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function ml(t){function r(B){return Fh(B,t)}pi!==null&&Fh(pi,t),gi!==null&&Fh(gi,t),yi!==null&&Fh(yi,t),Dc.forEach(r),Pc.forEach(r);for(var o=0;o<vi.length;o++){var c=vi[o];c.blockedOn===t&&(c.blockedOn=null)}for(;0<vi.length&&(o=vi[0],o.blockedOn===null);)Y0(o),o.blockedOn===null&&vi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=f[mt]||null;if(typeof m=="function")x||X0(o);else if(x){var N=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[mt]||null)N=x.formAction;else if(np(f)!==null)continue}else N=x.action;typeof N=="function"?o[c+1]=N:(o.splice(c,3),c-=3),X0(o)}}}function J0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function rp(t){this._internalRoot=t}Hh.prototype.render=rp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=or();q0(o,c,t,r,null,null)},Hh.prototype.unmount=rp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;q0(t.current,2,null,t,null,null),Th(),r[it]=null}};function Hh(t){this._internalRoot=t}Hh.prototype.unstable_scheduleHydration=function(t){if(t){var r=we();t={blockedOn:null,target:t,priority:r};for(var o=0;o<vi.length&&r!==0&&r<vi[o].priority;o++);vi.splice(o,0,t),o===0&&Y0(t)}};var Z0=e.version;if(Z0!=="19.2.4")throw Error(i(527,Z0,"19.2.4"));Ee.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?w(t):null,t=t===null?null:t.stateNode,t};var KT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Be=$h.inject(KT),nt=$h}catch{}}return Vc.createRoot=function(t,r){if(!l(t))throw Error(i(299));var o=!1,c="",f=ib,m=ob,x=lb;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=z0(t,1,!1,null,null,o,c,null,f,m,x,J0),t[it]=r.current,Bm(t),new rp(r)},Vc.hydrateRoot=function(t,r,o){if(!l(t))throw Error(i(299));var c=!1,f="",m=ib,x=ob,N=lb,B=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),r=z0(t,1,!0,r,o??null,c,f,B,m,x,N,J0),r.context=F0(null),o=r.current,c=or(),c=H(c),f=si(c),f.callback=null,ri(o,f,c),o=c,r.current.lanes=o,Yn(r,o),ta(r),t[it]=r.current,Bm(t),new Hh(r)},Vc.version="19.2.4",Vc}var c1;function rE(){if(c1)return op.exports;c1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),op.exports=sE(),op.exports}var aE=rE();const iE="modulepreload",oE=function(s){return"/login/"+s},u1={},Er=function(e,n,i){let l=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");l=g(n.map(y=>{if(y=oE(y),y in u1)return;u1[y]=!0;const w=y.endsWith(".css"),E=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${E}`))return;const S=document.createElement("link");if(S.rel=w?"stylesheet":iE,w||(S.as="script"),S.crossOrigin="",S.href=y,p&&S.setAttribute("nonce",p),document.head.appendChild(S),w)return new Promise((L,W)=>{S.addEventListener("load",L),S.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var h1="popstate";function lE(s={}){function e(i,l){let{pathname:u,search:d,hash:p}=i.location;return Fp("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:su(l)}return uE(e,n,null,s)}function Vn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Tr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cE(){return Math.random().toString(36).substring(2,10)}function d1(s,e){return{usr:s.state,key:s.key,idx:e}}function Fp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ul(e):e,state:n,key:e&&e.key||i||cE()}}function su({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Ul(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function uE(s,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,d=l.history,p="POP",g=null,y=w();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function w(){return(d.state||{idx:null}).idx}function E(){p="POP";let O=w(),te=O==null?null:O-y;y=O,g&&g({action:p,location:z.location,delta:te})}function S(O,te){p="PUSH";let X=Fp(z.location,O,te);y=w()+1;let he=d1(X,y),Se=z.createHref(X);try{d.pushState(he,"",Se)}catch(Ue){if(Ue instanceof DOMException&&Ue.name==="DataCloneError")throw Ue;l.location.assign(Se)}u&&g&&g({action:p,location:z.location,delta:1})}function L(O,te){p="REPLACE";let X=Fp(z.location,O,te);y=w();let he=d1(X,y),Se=z.createHref(X);d.replaceState(he,"",Se),u&&g&&g({action:p,location:z.location,delta:0})}function W(O){return hE(O)}let z={get action(){return p},get location(){return s(l,d)},listen(O){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(h1,E),g=O,()=>{l.removeEventListener(h1,E),g=null}},createHref(O){return e(l,O)},createURL:W,encodeLocation(O){let te=W(O);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:S,replace:L,go(O){return d.go(O)}};return z}function hE(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Vn(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:su(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function u2(s,e,n="/"){return dE(s,e,n,!1)}function dE(s,e,n,i){let l=typeof e=="string"?Ul(e):e,u=Ba(l.pathname||"/",n);if(u==null)return null;let d=h2(s);fE(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=TE(u);p=_E(d[g],y,i)}return p}function h2(s,e=[],n=[],i="",l=!1){let u=(d,p,g=l,y)=>{let w={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(i)&&g)return;Vn(w.relativePath.startsWith(i),`Absolute route path "${w.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(i.length)}let E=La([i,w.relativePath]),S=n.concat(w);d.children&&d.children.length>0&&(Vn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),h2(d.children,e,S,E,g)),!(d.path==null&&!d.index)&&e.push({path:E,score:xE(E,d.index),routesMeta:S})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of d2(d.path))u(d,p,!0,g)}),e}function d2(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let d=d2(i.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function fE(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:wE(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var mE=/^:[\w-]+$/,pE=3,gE=2,yE=1,vE=10,bE=-2,f1=s=>s==="*";function xE(s,e){let n=s.split("/"),i=n.length;return n.some(f1)&&(i+=bE),e&&(i+=gE),n.filter(l=>!f1(l)).reduce((l,u)=>l+(mE.test(u)?pE:u===""?yE:vE),i)}function wE(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function _E(s,e,n=!1){let{routesMeta:i}=s,l={},u="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,w=u==="/"?e:e.slice(u.length)||"/",E=vd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),S=g.route;if(!E&&y&&n&&!i[i.length-1].route.index&&(E=vd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!E)return null;Object.assign(l,E.params),d.push({params:l,pathname:La([u,E.pathname]),pathnameBase:NE(La([u,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(u=La([u,E.pathnameBase]))}return d}function vd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=kE(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:w,isOptional:E},S)=>{if(w==="*"){let W=p[S]||"";d=u.slice(0,u.length-W.length).replace(/(.)\/+$/,"$1")}const L=p[S];return E&&!L?y[w]=void 0:y[w]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function kE(s,e=!1,n=!0){Tr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function TE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ba(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var EE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function jE(s,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?Ul(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=m1(n.substring(1),"/"):u=m1(n,e)):u=e,{pathname:u,search:CE(i),hash:RE(l)}}function m1(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function hp(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SE(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vg(s){let e=SE(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function bg(s,e,n,i=!1){let l;typeof s=="string"?l=Ul(s):(l={...s},Vn(!l.pathname||!l.pathname.includes("?"),hp("?","pathname","search",l)),Vn(!l.pathname||!l.pathname.includes("#"),hp("#","pathname","hash",l)),Vn(!l.search||!l.search.includes("#"),hp("#","search","hash",l)));let u=s===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=n;else{let E=e.length-1;if(!i&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),E-=1;l.pathname=S.join("/")}p=E>=0?e[E]:"/"}let g=jE(l,p),y=d&&d!=="/"&&d.endsWith("/"),w=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var La=s=>s.join("/").replace(/\/\/+/g,"/"),NE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),CE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,RE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,AE=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function IE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function ME(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var f2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function m2(s,e){let n=s;if(typeof n!="string"||!EE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(f2)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=Ba(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:l=!0}catch{Tr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var p2=["POST","PUT","PATCH","DELETE"];new Set(p2);var DE=["GET",...p2];new Set(DE);var zl=k.createContext(null);zl.displayName="DataRouter";var Ud=k.createContext(null);Ud.displayName="DataRouterState";var PE=k.createContext(!1),g2=k.createContext({isTransitioning:!1});g2.displayName="ViewTransition";var LE=k.createContext(new Map);LE.displayName="Fetchers";var OE=k.createContext(null);OE.displayName="Await";var ur=k.createContext(null);ur.displayName="Navigation";var gu=k.createContext(null);gu.displayName="Location";var qr=k.createContext({outlet:null,matches:[],isDataRoute:!1});qr.displayName="Route";var xg=k.createContext(null);xg.displayName="RouteError";var y2="REACT_ROUTER_ERROR",VE="REDIRECT",BE="ROUTE_ERROR_RESPONSE";function UE(s){if(s.startsWith(`${y2}:${VE}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function zE(s){if(s.startsWith(`${y2}:${BE}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new AE(e.status,e.statusText,e.data)}catch{}}function FE(s,{relative:e}={}){Vn(Fl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=k.useContext(ur),{hash:l,pathname:u,search:d}=yu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:La([n,u])),i.createHref({pathname:p,search:d,hash:l})}function Fl(){return k.useContext(gu)!=null}function Hr(){return Vn(Fl(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(gu).location}var v2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function b2(s){k.useContext(ur).static||k.useLayoutEffect(s)}function Vs(){let{isDataRoute:s}=k.useContext(qr);return s?nj():qE()}function qE(){Vn(Fl(),"useNavigate() may be used only in the context of a <Router> component.");let s=k.useContext(zl),{basename:e,navigator:n}=k.useContext(ur),{matches:i}=k.useContext(qr),{pathname:l}=Hr(),u=JSON.stringify(vg(i)),d=k.useRef(!1);return b2(()=>{d.current=!0}),k.useCallback((g,y={})=>{if(Tr(d.current,v2),!d.current)return;if(typeof g=="number"){n.go(g);return}let w=bg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:La([e,w.pathname])),(y.replace?n.replace:n.push)(w,y.state,y)},[e,n,u,l,s])}k.createContext(null);function HE(){let{matches:s}=k.useContext(qr),e=s[s.length-1];return e?e.params:{}}function yu(s,{relative:e}={}){let{matches:n}=k.useContext(qr),{pathname:i}=Hr(),l=JSON.stringify(vg(n));return k.useMemo(()=>bg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function $E(s,e){return x2(s,e)}function x2(s,e,n,i,l){Vn(Fl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=k.useContext(ur),{matches:d}=k.useContext(qr),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",w=p?p.pathnameBase:"/",E=p&&p.route;{let X=E&&E.path||"";_2(y,!E||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let S=Hr(),L;if(e){let X=typeof e=="string"?Ul(e):e;Vn(w==="/"||X.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${X.pathname}" was given in the \`location\` prop.`),L=X}else L=S;let W=L.pathname||"/",z=W;if(w!=="/"){let X=w.replace(/^\//,"").split("/");z="/"+W.replace(/^\//,"").split("/").slice(X.length).join("/")}let O=u2(s,{pathname:z});Tr(E||O!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),Tr(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=QE(O&&O.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:La([w,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?w:La([w,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),d,n,i,l);return e&&te?k.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},te):te}function WE(){let s=tj(),e=IE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:u},"ErrorBoundary")," or"," ",k.createElement("code",{style:u},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:l},n):null,d)}var GE=k.createElement(WE,null),w2=class extends k.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=zE(s.digest);n&&(s=n)}let e=s!==void 0?k.createElement(qr.Provider,{value:this.props.routeContext},k.createElement(xg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?k.createElement(KE,{error:s},e):e}};w2.contextType=PE;var dp=new WeakMap;function KE({children:s,error:e}){let{basename:n}=k.useContext(ur);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=UE(e.digest);if(i){let l=dp.get(e);if(l)throw l;let u=m2(i.location,n);if(f2&&!dp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw dp.set(e,d),d}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function YE({routeContext:s,match:e,children:n}){let i=k.useContext(zl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(qr.Provider,{value:s},n)}function QE(s,e=[],n=null,i=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,d=n?.errors;if(d!=null){let w=u.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);Vn(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,w+1))}let p=!1,g=-1;if(n)for(let w=0;w<u.length;w++){let E=u[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=w),E.route.id){let{loaderData:S,errors:L}=n,W=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!L||L[E.route.id]===void 0);if(E.route.lazy||W){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&i?(w,E)=>{i(w,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:ME(n.matches),errorInfo:E})}:void 0;return u.reduceRight((w,E,S)=>{let L,W=!1,z=null,O=null;n&&(L=d&&E.route.id?d[E.route.id]:void 0,z=E.route.errorElement||GE,p&&(g<0&&S===0?(_2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,O=null):g===S&&(W=!0,O=E.route.hydrateFallbackElement||null)));let te=e.concat(u.slice(0,S+1)),X=()=>{let he;return L?he=z:W?he=O:E.route.Component?he=k.createElement(E.route.Component,null):E.route.element?he=E.route.element:he=w,k.createElement(YE,{match:E,routeContext:{outlet:w,matches:te,isDataRoute:n!=null},children:he})};return n&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?k.createElement(w2,{location:n.location,revalidation:n.revalidation,component:z,error:L,children:X(),routeContext:{outlet:null,matches:te,isDataRoute:!0},onError:y}):X()},null)}function wg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XE(s){let e=k.useContext(zl);return Vn(e,wg(s)),e}function JE(s){let e=k.useContext(Ud);return Vn(e,wg(s)),e}function ZE(s){let e=k.useContext(qr);return Vn(e,wg(s)),e}function _g(s){let e=ZE(s),n=e.matches[e.matches.length-1];return Vn(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function ej(){return _g("useRouteId")}function tj(){let s=k.useContext(xg),e=JE("useRouteError"),n=_g("useRouteError");return s!==void 0?s:e.errors?.[n]}function nj(){let{router:s}=XE("useNavigate"),e=_g("useNavigate"),n=k.useRef(!1);return b2(()=>{n.current=!0}),k.useCallback(async(l,u={})=>{Tr(n.current,v2),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var p1={};function _2(s,e,n){!e&&!p1[s]&&(p1[s]=!0,Tr(!1,n))}k.memo(sj);function sj({routes:s,future:e,state:n,onError:i}){return x2(s,void 0,n,i,e)}function rj({to:s,replace:e,state:n,relative:i}){Vn(Fl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=k.useContext(ur);Tr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=k.useContext(qr),{pathname:d}=Hr(),p=Vs(),g=bg(s,vg(u),d,i==="path"),y=JSON.stringify(g);return k.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function Fn(s){Vn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aj({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){Vn(!Fl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=k.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[p,l,u,d]);typeof n=="string"&&(n=Ul(n));let{pathname:y="/",search:w="",hash:E="",state:S=null,key:L="default"}=n,W=k.useMemo(()=>{let z=Ba(y,p);return z==null?null:{location:{pathname:z,search:w,hash:E,state:S,key:L},navigationType:i}},[p,y,w,E,S,L,i]);return Tr(W!=null,`<Router basename="${p}"> is not able to match the URL "${y}${w}${E}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:k.createElement(ur.Provider,{value:g},k.createElement(gu.Provider,{children:e,value:W}))}function ij({children:s,location:e}){return $E(qp(s),e)}function qp(s,e=[]){let n=[];return k.Children.forEach(s,(i,l)=>{if(!k.isValidElement(i))return;let u=[...e,l];if(i.type===k.Fragment){n.push.apply(n,qp(i.props.children,u));return}Vn(i.type===Fn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=qp(i.props.children,u)),n.push(d)}),n}var id="get",od="application/x-www-form-urlencoded";function zd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function oj(s){return zd(s)&&s.tagName.toLowerCase()==="button"}function lj(s){return zd(s)&&s.tagName.toLowerCase()==="form"}function cj(s){return zd(s)&&s.tagName.toLowerCase()==="input"}function uj(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function hj(s,e){return s.button===0&&(!e||e==="_self")&&!uj(s)}function Hp(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let i=s[n];return e.concat(Array.isArray(i)?i.map(l=>[n,l]):[[n,i]])},[]))}function dj(s,e){let n=Hp(s);return e&&e.forEach((i,l)=>{n.has(l)||e.getAll(l).forEach(u=>{n.append(l,u)})}),n}var Wh=null;function fj(){if(Wh===null)try{new FormData(document.createElement("form"),0),Wh=!1}catch{Wh=!0}return Wh}var mj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fp(s){return s!=null&&!mj.has(s)?(Tr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${od}"`),null):s}function pj(s,e){let n,i,l,u,d;if(lj(s)){let p=s.getAttribute("action");i=p?Ba(p,e):null,n=s.getAttribute("method")||id,l=fp(s.getAttribute("enctype"))||od,u=new FormData(s)}else if(oj(s)||cj(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?Ba(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||id,l=fp(s.getAttribute("formenctype"))||fp(p.getAttribute("enctype"))||od,u=new FormData(p,s),!fj()){let{name:y,type:w,value:E}=s;if(w==="image"){let S=y?`${y}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else y&&u.append(y,E)}}else{if(zd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=id,i=null,l=od,d=s}return u&&l==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function gj(s,e,n,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&Ba(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function yj(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vj(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function bj(s,e,n){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await yj(u,n);return d.links?d.links():[]}return[]}));return kj(i.flat(1).filter(vj).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function g1(s,e,n,i,l,u){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let w=i.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function xj(s,e,{includeHydrateFallback:n}={}){return wj(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function wj(s){return[...new Set(s)]}function _j(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function kj(s,e){let n=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(_j(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function k2(){let s=k.useContext(zl);return kg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Tj(){let s=k.useContext(Ud);return kg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Tg=k.createContext(void 0);Tg.displayName="FrameworkContext";function T2(){let s=k.useContext(Tg);return kg(s,"You must render this element inside a <HydratedRouter> element"),s}function Ej(s,e){let n=k.useContext(Tg),[i,l]=k.useState(!1),[u,d]=k.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:E}=e,S=k.useRef(null);k.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let z=te=>{te.forEach(X=>{d(X.isIntersecting)})},O=new IntersectionObserver(z,{threshold:.5});return S.current&&O.observe(S.current),()=>{O.disconnect()}}},[s]),k.useEffect(()=>{if(i){let z=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(z)}}},[i]);let L=()=>{l(!0)},W=()=>{l(!1),d(!1)};return n?s!=="intent"?[u,S,{}]:[u,S,{onFocus:Bc(p,L),onBlur:Bc(g,W),onMouseEnter:Bc(y,L),onMouseLeave:Bc(w,W),onTouchStart:Bc(E,L)}]:[!1,S,{}]}function Bc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function jj({page:s,...e}){let{router:n}=k2(),i=k.useMemo(()=>u2(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?k.createElement(Nj,{page:s,matches:i,...e}):null}function Sj(s){let{manifest:e,routeModules:n}=T2(),[i,l]=k.useState([]);return k.useEffect(()=>{let u=!1;return bj(s,e,n).then(d=>{u||l(d)}),()=>{u=!0}},[s,e,n]),i}function Nj({page:s,matches:e,...n}){let i=Hr(),{future:l,manifest:u,routeModules:d}=T2(),{basename:p}=k2(),{loaderData:g,matches:y}=Tj(),w=k.useMemo(()=>g1(s,e,y,u,i,"data"),[s,e,y,u,i]),E=k.useMemo(()=>g1(s,e,y,u,i,"assets"),[s,e,y,u,i]),S=k.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let z=new Set,O=!1;if(e.forEach(X=>{let he=u.routes[X.route.id];!he||!he.hasLoader||(!w.some(Se=>Se.route.id===X.route.id)&&X.route.id in g&&d[X.route.id]?.shouldRevalidate||he.hasClientLoader?O=!0:z.add(X.route.id))}),z.size===0)return[];let te=gj(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return O&&z.size>0&&te.searchParams.set("_routes",e.filter(X=>z.has(X.route.id)).map(X=>X.route.id).join(",")),[te.pathname+te.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,w,e,s,d]),L=k.useMemo(()=>xj(E,u),[E,u]),W=Sj(E);return k.createElement(k.Fragment,null,S.map(z=>k.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...n})),L.map(z=>k.createElement("link",{key:z,rel:"modulepreload",href:z,...n})),W.map(({key:z,link:O})=>k.createElement("link",{key:z,nonce:n.nonce,...O,crossOrigin:O.crossOrigin??n.crossOrigin})))}function Cj(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Rj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Rj&&(window.__reactRouterVersion="7.13.0")}catch{}function Aj({basename:s,children:e,unstable_useTransitions:n,window:i}){let l=k.useRef();l.current==null&&(l.current=lE({window:i,v5Compat:!0}));let u=l.current,[d,p]=k.useState({action:u.action,location:u.location}),g=k.useCallback(y=>{n===!1?p(y):k.startTransition(()=>p(y))},[n]);return k.useLayoutEffect(()=>u.listen(g),[u,g]),k.createElement(aj,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var E2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j2=k.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:w,viewTransition:E,unstable_defaultShouldRevalidate:S,...L},W){let{basename:z,unstable_useTransitions:O}=k.useContext(ur),te=typeof y=="string"&&E2.test(y),X=m2(y,z);y=X.to;let he=FE(y,{relative:l}),[Se,Ue,Le]=Ej(i,L),A=Pj(y,{replace:d,state:p,target:g,preventScrollReset:w,relative:l,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:O});function j(D){e&&e(D),D.defaultPrevented||A(D)}let R=k.createElement("a",{...L,...Le,href:X.absoluteURL||he,onClick:X.isExternal||u?e:j,ref:Cj(W,Ue),target:g,"data-discover":!te&&n==="render"?"true":void 0});return Se&&!te?k.createElement(k.Fragment,null,R,k.createElement(jj,{page:he})):R});j2.displayName="Link";var Ij=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:p,children:g,...y},w){let E=yu(d,{relative:y.relative}),S=Hr(),L=k.useContext(Ud),{navigator:W,basename:z}=k.useContext(ur),O=L!=null&&zj(E)&&p===!0,te=W.encodeLocation?W.encodeLocation(E).pathname:E.pathname,X=S.pathname,he=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;n||(X=X.toLowerCase(),he=he?he.toLowerCase():null,te=te.toLowerCase()),he&&z&&(he=Ba(he,z)||he);const Se=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let Ue=X===te||!l&&X.startsWith(te)&&X.charAt(Se)==="/",Le=he!=null&&(he===te||!l&&he.startsWith(te)&&he.charAt(te.length)==="/"),A={isActive:Ue,isPending:Le,isTransitioning:O},j=Ue?e:void 0,R;typeof i=="function"?R=i(A):R=[i,Ue?"active":null,Le?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(A):u;return k.createElement(j2,{...y,"aria-current":j,className:R,ref:w,style:D,to:d,viewTransition:p},typeof g=="function"?g(A):g)});Ij.displayName="NavLink";var Mj=k.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:d=id,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:E,unstable_defaultShouldRevalidate:S,...L},W)=>{let{unstable_useTransitions:z}=k.useContext(ur),O=Bj(),te=Uj(p,{relative:y}),X=d.toLowerCase()==="get"?"get":"post",he=typeof p=="string"&&E2.test(p),Se=Ue=>{if(g&&g(Ue),Ue.defaultPrevented)return;Ue.preventDefault();let Le=Ue.nativeEvent.submitter,A=Le?.getAttribute("formmethod")||d,j=()=>O(Le||Ue.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:l,state:u,relative:y,preventScrollReset:w,viewTransition:E,unstable_defaultShouldRevalidate:S});z&&n!==!1?k.startTransition(()=>j()):j()};return k.createElement("form",{ref:W,method:X,action:te,onSubmit:i?g:Se,...L,"data-discover":!he&&s==="render"?"true":void 0})});Mj.displayName="Form";function Dj(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S2(s){let e=k.useContext(zl);return Vn(e,Dj(s)),e}function Pj(s,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Vs(),w=Hr(),E=yu(s,{relative:u});return k.useCallback(S=>{if(hj(S,e)){S.preventDefault();let L=n!==void 0?n:su(w)===su(E),W=()=>y(s,{replace:L,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?k.startTransition(()=>W()):W()}},[w,y,E,n,i,e,s,l,u,d,p,g])}function Lj(s){Tr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=k.useRef(Hp(s)),n=k.useRef(!1),i=Hr(),l=k.useMemo(()=>dj(i.search,n.current?null:e.current),[i.search]),u=Vs(),d=k.useCallback((p,g)=>{const y=Hp(typeof p=="function"?p(new URLSearchParams(l)):p);n.current=!0,u("?"+y,g)},[u,l]);return[l,d]}var Oj=0,Vj=()=>`__${String(++Oj)}__`;function Bj(){let{router:s}=S2("useSubmit"),{basename:e}=k.useContext(ur),n=ej(),i=s.fetch,l=s.navigate;return k.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:w,body:E}=pj(u,e);if(d.navigate===!1){let S=d.fetcherKey||Vj();await i(S,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:E,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await l(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:w,body:E,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,l,e,n])}function Uj(s,{relative:e}={}){let{basename:n}=k.useContext(ur),i=k.useContext(qr);Vn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...yu(s||".",{relative:e})},d=Hr();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(E=>E).forEach(E=>p.append("index",E));let w=p.toString();u.search=w?`?${w}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:La([n,u.pathname])),su(u)}function zj(s,{relative:e}={}){let n=k.useContext(g2);Vn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=S2("useViewTransitionState"),l=yu(s,{relative:e});if(!n.isTransitioning)return!1;let u=Ba(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=Ba(n.nextLocation.pathname,i)||n.nextLocation.pathname;return vd(l.pathname,d)!=null||vd(l.pathname,u)!=null}const Fj=()=>{};var y1={};const N2=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},qj=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],d=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},C2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],d=l+1<s.length,p=d?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,w=u>>2,E=(u&3)<<4|p>>4;let S=(p&15)<<2|y>>6,L=y&63;g||(L=64,d||(S=64)),i.push(n[w],n[E],n[S],n[L])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(N2(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):qj(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const E=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||E==null)throw new Hj;const S=u<<2|p>>4;if(i.push(S),y!==64){const L=p<<4&240|y>>2;if(i.push(L),E!==64){const W=y<<6&192|E;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Hj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $j=function(s){const e=N2(s);return C2.encodeByteArray(e,!0)},bd=function(s){return $j(s).replace(/\./g,"")},R2=function(s){try{return C2.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Wj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Gj=()=>Wj().__FIREBASE_DEFAULTS__,Kj=()=>{if(typeof process>"u"||typeof y1>"u")return;const s=y1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Yj=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&R2(s[1]);return e&&JSON.parse(e)},Fd=()=>{try{return Fj()||Gj()||Kj()||Yj()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},A2=s=>Fd()?.emulatorHosts?.[s],I2=s=>{const e=A2(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},M2=()=>Fd()?.config,D2=s=>Fd()?.[`_${s}`];class Qj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Ui(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Eg(s){return(await fetch(s,{credentials:"include"})).ok}function P2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[bd(JSON.stringify(n)),bd(JSON.stringify(d)),""].join(".")}const Qc={};function Xj(){const s={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?s.emulator.push(e):s.prod.push(e);return s}function Jj(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let v1=!1;function jg(s,e){if(typeof window>"u"||typeof document>"u"||!Ui(window.location.host)||Qc[s]===e||Qc[s]||v1)return;Qc[s]=e;function n(S){return`__firebase__banner__${S}`}const i="__firebase__banner",u=Xj().prod.length>0;function d(){const S=document.getElementById(i);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,L){S.setAttribute("width","24"),S.setAttribute("id",L),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{v1=!0,d()},S}function w(S,L){S.setAttribute("id",L),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=Jj(i),L=n("text"),W=document.getElementById(L)||document.createElement("span"),z=n("learnmore"),O=document.getElementById(z)||document.createElement("a"),te=n("preprendIcon"),X=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const he=S.element;p(he),w(O,z);const Se=y();g(X,te),he.append(X,W,O,Se),document.body.appendChild(he)}u?(W.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Os(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Os())}function eS(){const s=Fd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function sS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rS(){const s=Os();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function aS(){return!eS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iS(){try{return typeof indexedDB=="object"}catch{return!1}}function oS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const lS="FirebaseError";class fa extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=lS,Object.setPrototypeOf(this,fa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?cS(u,i):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new fa(l,p,i)}}function cS(s,e){return s.replace(uS,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const uS=/\{\$([^}]+)}/g;function hS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ko(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=s[l],d=e[l];if(b1(u)&&b1(d)){if(!ko(u,d))return!1}else if(u!==d)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function b1(s){return s!==null&&typeof s=="object"}function bu(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function $c(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function dS(s,e){const n=new fS(s,e);return n.subscribe.bind(n)}class fS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");mS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=mp),l.error===void 0&&(l.error=mp),l.complete===void 0&&(l.complete=mp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function mp(){}function Bn(s){return s&&s._delegate?s._delegate:s}class Mi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const go="[DEFAULT]";class pS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Qj;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yS(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&d.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gS(s){return s===go?void 0:s}function yS(s){return s.instantiationMode==="EAGER"}class vS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Kt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Kt||(Kt={}));const bS={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},xS=Kt.INFO,wS={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},_S=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=wS[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sg{constructor(e){this.name=e,this._logLevel=xS,this._logHandler=_S,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const kS=(s,e)=>e.some(n=>s instanceof n);let x1,w1;function TS(){return x1||(x1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ES(){return w1||(w1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L2=new WeakMap,$p=new WeakMap,O2=new WeakMap,pp=new WeakMap,Ng=new WeakMap;function jS(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(Ci(s.result)),l()},d=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&L2.set(n,s)}).catch(()=>{}),Ng.set(e,s),e}function SS(s){if($p.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});$p.set(s,e)}let Wp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return $p.get(s);if(e==="objectStoreNames")return s.objectStoreNames||O2.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ci(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function NS(s){Wp=s(Wp)}function CS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(gp(this),e,...n);return O2.set(i,e.sort?e.sort():[e]),Ci(i)}:ES().includes(s)?function(...e){return s.apply(gp(this),e),Ci(L2.get(this))}:function(...e){return Ci(s.apply(gp(this),e))}}function RS(s){return typeof s=="function"?CS(s):(s instanceof IDBTransaction&&SS(s),kS(s,TS())?new Proxy(s,Wp):s)}function Ci(s){if(s instanceof IDBRequest)return jS(s);if(pp.has(s))return pp.get(s);const e=RS(s);return e!==s&&(pp.set(s,e),Ng.set(e,s)),e}const gp=s=>Ng.get(s);function AS(s,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const d=indexedDB.open(s,e),p=Ci(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Ci(d.result),g.oldVersion,g.newVersion,Ci(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const IS=["get","getKey","getAll","getAllKeys","count"],MS=["put","add","delete","clear"],yp=new Map;function _1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(yp.get(e))return yp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=MS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||IS.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return yp.set(e,u),u}NS(s=>({...s,get:(e,n,i)=>_1(e,n)||s.get(e,n,i),has:(e,n)=>!!_1(e,n)||s.has(e,n)}));class DS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function PS(s){return s.getComponent()?.type==="VERSION"}const Gp="@firebase/app",k1="0.14.7";const Ua=new Sg("@firebase/app"),LS="@firebase/app-compat",OS="@firebase/analytics-compat",VS="@firebase/analytics",BS="@firebase/app-check-compat",US="@firebase/app-check",zS="@firebase/auth",FS="@firebase/auth-compat",qS="@firebase/database",HS="@firebase/data-connect",$S="@firebase/database-compat",WS="@firebase/functions",GS="@firebase/functions-compat",KS="@firebase/installations",YS="@firebase/installations-compat",QS="@firebase/messaging",XS="@firebase/messaging-compat",JS="@firebase/performance",ZS="@firebase/performance-compat",eN="@firebase/remote-config",tN="@firebase/remote-config-compat",nN="@firebase/storage",sN="@firebase/storage-compat",rN="@firebase/firestore",aN="@firebase/ai",iN="@firebase/firestore-compat",oN="firebase",lN="12.8.0";const Kp="[DEFAULT]",cN={[Gp]:"fire-core",[LS]:"fire-core-compat",[VS]:"fire-analytics",[OS]:"fire-analytics-compat",[US]:"fire-app-check",[BS]:"fire-app-check-compat",[zS]:"fire-auth",[FS]:"fire-auth-compat",[qS]:"fire-rtdb",[HS]:"fire-data-connect",[$S]:"fire-rtdb-compat",[WS]:"fire-fn",[GS]:"fire-fn-compat",[KS]:"fire-iid",[YS]:"fire-iid-compat",[QS]:"fire-fcm",[XS]:"fire-fcm-compat",[JS]:"fire-perf",[ZS]:"fire-perf-compat",[eN]:"fire-rc",[tN]:"fire-rc-compat",[nN]:"fire-gcs",[sN]:"fire-gcs-compat",[rN]:"fire-fst",[iN]:"fire-fst-compat",[aN]:"fire-vertex","fire-js":"fire-js",[oN]:"fire-js-all"};const xd=new Map,uN=new Map,Yp=new Map;function T1(s,e){try{s.container.addComponent(e)}catch(n){Ua.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function To(s){const e=s.name;if(Yp.has(e))return Ua.debug(`There were multiple attempts to register component ${e}.`),!1;Yp.set(e,s);for(const n of xd.values())T1(n,s);for(const n of uN.values())T1(n,s);return!0}function qd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function lr(s){return s==null?!1:s.settings!==void 0}const hN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new vu("app","Firebase",hN);class dN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}const Ao=lN;function Cg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Kp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ri.create("bad-app-name",{appName:String(l)});if(n||(n=M2()),!n)throw Ri.create("no-options");const u=xd.get(l);if(u){if(ko(n,u.options)&&ko(i,u.config))return u;throw Ri.create("duplicate-app",{appName:l})}const d=new vS(l);for(const g of Yp.values())d.addComponent(g);const p=new dN(n,i,d);return xd.set(l,p),p}function Rg(s=Kp){const e=xd.get(s);if(!e&&s===Kp&&M2())return Cg();if(!e)throw Ri.create("no-app",{appName:s});return e}function aa(s,e,n){let i=cN[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ua.warn(d.join(" "));return}To(new Mi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const fN="firebase-heartbeat-database",mN=1,ru="firebase-heartbeat-store";let vp=null;function V2(){return vp||(vp=AS(fN,mN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ri.create("idb-open",{originalErrorMessage:s.message})})),vp}async function pN(s){try{const n=(await V2()).transaction(ru),i=await n.objectStore(ru).get(B2(s));return await n.done,i}catch(e){if(e instanceof fa)Ua.warn(e.message);else{const n=Ri.create("idb-get",{originalErrorMessage:e?.message});Ua.warn(n.message)}}}async function E1(s,e){try{const i=(await V2()).transaction(ru,"readwrite");await i.objectStore(ru).put(e,B2(s)),await i.done}catch(n){if(n instanceof fa)Ua.warn(n.message);else{const i=Ri.create("idb-set",{originalErrorMessage:n?.message});Ua.warn(i.message)}}}function B2(s){return`${s.name}!${s.options.appId}`}const gN=1024,yN=30;class vN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=j1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>yN){const l=wN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ua.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=j1(),{heartbeatsToSend:n,unsentEntries:i}=bN(this._heartbeatsCache.heartbeats),l=bd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ua.warn(e),""}}}function j1(){return new Date().toISOString().substring(0,10)}function bN(s,e=gN){const n=[];let i=s.slice();for(const l of s){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),S1(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),S1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iS()?oS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return E1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return E1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function S1(s){return bd(JSON.stringify({version:2,heartbeats:s})).length}function wN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function _N(s){To(new Mi("platform-logger",e=>new DS(e),"PRIVATE")),To(new Mi("heartbeat",e=>new vN(e),"PRIVATE")),aa(Gp,k1,s),aa(Gp,k1,"esm2020"),aa("fire-js","")}_N("");function U2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kN=U2,z2=new vu("auth","Firebase",U2());const wd=new Sg("@firebase/auth");function TN(s,...e){wd.logLevel<=Kt.WARN&&wd.warn(`Auth (${Ao}): ${s}`,...e)}function ld(s,...e){wd.logLevel<=Kt.ERROR&&wd.error(`Auth (${Ao}): ${s}`,...e)}function Ur(s,...e){throw Ag(s,...e)}function ia(s,...e){return Ag(s,...e)}function F2(s,e,n){const i={...kN(),[e]:n};return new vu("auth","Firebase",i).create(e,{appName:s.name})}function Oa(s){return F2(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ag(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return z2.create(s,...e)}function Tt(s,e,...n){if(!s)throw Ag(e,...n)}function Ma(s){const e="INTERNAL ASSERTION FAILED: "+s;throw ld(e),new Error(e)}function za(s,e){s||Ma(e)}function Qp(){return typeof self<"u"&&self.location?.href||""}function EN(){return N1()==="http:"||N1()==="https:"}function N1(){return typeof self<"u"&&self.location?.protocol||null}function jN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EN()||nS()||"connection"in navigator)?navigator.onLine:!0}function SN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class xu{constructor(e,n){this.shortDelay=e,this.longDelay=n,za(n>e,"Short delay should be less than long delay!"),this.isMobile=Zj()||sS()}get(){return jN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ig(s,e){za(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class q2{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ma("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ma("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ma("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const NN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const CN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RN=new xu(3e4,6e4);function Ha(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function $a(s,e,n,i,l={}){return H2(s,l,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const p=bu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return tS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Ui(s.emulatorConfig.host)&&(y.credentials="include"),q2.fetch()(await $2(s,s.config.apiHost,n,p),y)})}async function H2(s,e,n){s._canInitEmulator=!1;const i={...NN,...e};try{const l=new IN(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Gh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Gh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw Gh(s,"user-disabled",d);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw F2(s,w,y);Ur(s,w)}}catch(l){if(l instanceof fa)throw l;Ur(s,"network-request-failed",{message:String(l)})}}async function wu(s,e,n,i,l={}){const u=await $a(s,e,n,i,l);return"mfaPendingCredential"in u&&Ur(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function $2(s,e,n,i){const l=`${e}${n}?${i}`,u=s,d=u.config.emulator?Ig(s.config,l):`${s.config.apiScheme}://${l}`;return CN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function AN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ia(this.auth,"network-request-failed")),RN.get())})}}function Gh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=ia(s,e,i);return l.customData._tokenResponse=n,l}function C1(s){return s!==void 0&&s.enterprise!==void 0}class MN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DN(s,e){return $a(s,"GET","/v2/recaptchaConfig",Ha(s,e))}async function PN(s,e){return $a(s,"POST","/v1/accounts:delete",e)}async function _d(s,e){return $a(s,"POST","/v1/accounts:lookup",e)}function Xc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LN(s,e=!1){const n=Bn(s),i=await n.getIdToken(e),l=Mg(i);Tt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:i,authTime:Xc(bp(l.auth_time)),issuedAtTime:Xc(bp(l.iat)),expirationTime:Xc(bp(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function bp(s){return Number(s)*1e3}function Mg(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return ld("JWT malformed, contained fewer than 3 sections"),null;try{const l=R2(n);return l?JSON.parse(l):(ld("Failed to decode base64 JWT payload"),null)}catch(l){return ld("Caught error parsing JWT payload as JSON",l?.toString()),null}}function R1(s){const e=Mg(s);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function au(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof fa&&ON(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function ON({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class VN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Xp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kd(s){const e=s.auth,n=await s.getIdToken(),i=await au(s,_d(e,{idToken:n}));Tt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?W2(l.providerUserInfo):[],d=UN(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!d?.length,y=p?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Xp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,w)}async function BN(s){const e=Bn(s);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UN(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function W2(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function zN(s,e){const n=await H2(s,{},async()=>{const i=bu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,d=await $2(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&Ui(s.emulatorConfig.host)&&(g.credentials="include"),q2.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FN(s,e){return $a(s,"POST","/v2/accounts:revokeToken",Ha(s,e))}class Tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const n=R1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await zN(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,d=new Tl;return i&&(Tt(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),l&&(Tt(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(Tt(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tl,this.toJSON())}_performRefresh(){return Ma("not implemented")}}function xi(s,e){Tt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Vr{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new VN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Xp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await au(this,this.stsTokenManager.getToken(this.auth,e));return Tt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LN(this,e)}reload(){return BN(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(Oa(this.auth));const e=await this.getIdToken();return await au(this,PN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,w=n.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:L,providerData:W,stsTokenManager:z}=n;Tt(E&&z,e,"internal-error");const O=Tl.fromJSON(this.name,z);Tt(typeof E=="string",e,"internal-error"),xi(i,e.name),xi(l,e.name),Tt(typeof S=="boolean",e,"internal-error"),Tt(typeof L=="boolean",e,"internal-error"),xi(u,e.name),xi(d,e.name),xi(p,e.name),xi(g,e.name),xi(y,e.name),xi(w,e.name);const te=new Vr({uid:E,auth:e,email:l,emailVerified:S,displayName:i,isAnonymous:L,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:O,createdAt:y,lastLoginAt:w});return W&&Array.isArray(W)&&(te.providerData=W.map(X=>({...X}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,n,i=!1){const l=new Tl;l.updateFromServerResponse(n);const u=new Vr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await kd(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Tt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?W2(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new Tl;p.updateFromIdToken(i);const g=new Vr({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Xp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const A1=new Map;function Da(s){za(s instanceof Function,"Expected a class definition");let e=A1.get(s);return e?(za(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,A1.set(s,e),e)}class G2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}G2.type="NONE";const I1=G2;function cd(s,e,n){return`firebase:${s}:${e}:${n}`}class El{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=cd(this.userKey,l.apiKey,u),this.fullPersistenceKey=cd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _d(this.auth,{idToken:e}).catch(()=>{});return n?Vr._fromGetAccountInfoResponse(this.auth,n,e):null}return Vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new El(Da(I1),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Da(I1);const d=cd(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const w=await y._get(d);if(w){let E;if(typeof w=="string"){const S=await _d(e,{idToken:w}).catch(()=>{});if(!S)break;E=await Vr._fromGetAccountInfoResponse(e,S,w)}else E=Vr._fromJSON(e,w);y!==u&&(p=E),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new El(u,e,i):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new El(u,e,i))}}function M1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(X2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(K2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Z2(e))return"Blackberry";if(ew(e))return"Webos";if(Y2(e))return"Safari";if((e.includes("chrome/")||Q2(e))&&!e.includes("edge/"))return"Chrome";if(J2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function K2(s=Os()){return/firefox\//i.test(s)}function Y2(s=Os()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q2(s=Os()){return/crios\//i.test(s)}function X2(s=Os()){return/iemobile/i.test(s)}function J2(s=Os()){return/android/i.test(s)}function Z2(s=Os()){return/blackberry/i.test(s)}function ew(s=Os()){return/webos/i.test(s)}function Dg(s=Os()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function qN(s=Os()){return Dg(s)&&!!window.navigator?.standalone}function HN(){return rS()&&document.documentMode===10}function tw(s=Os()){return Dg(s)||J2(s)||ew(s)||Z2(s)||/windows phone/i.test(s)||X2(s)}function nw(s,e=[]){let n;switch(s){case"Browser":n=M1(Os());break;case"Worker":n=`${M1(Os())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ao}/${i}`}class $N{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function WN(s,e={}){return $a(s,"GET","/v2/passwordPolicy",Ha(s,e))}const GN=6;class KN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??GN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class YN{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D1(this),this.idTokenSubscription=new D1(this),this.beforeStateQueue=new $N(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Da(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await El.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _d(this,{idToken:e}),i=await Vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(lr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(Oa(this));const n=e?Bn(e):null;return n&&Tt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(Oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(Oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Da(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WN(this),n=new KN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await FN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Da(e)||this._popupRedirectResolver;Tt(n,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[Da(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&TN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function zi(s){return Bn(s)}class D1{constructor(e){this.auth=e,this.observer=null,this.addObserver=dS(n=>this.observer=n)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QN(s){Hd=s}function sw(s){return Hd.loadJS(s)}function XN(){return Hd.recaptchaEnterpriseScript}function JN(){return Hd.gapiScript}function ZN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class eC{constructor(){this.enterprise=new tC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nC="recaptcha-enterprise",rw="NO_RECAPTCHA";class sC{constructor(e){this.type=nC,this.auth=zi(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{DN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new MN(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,d,p){const g=window.grecaptcha;C1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(rw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eC().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(p=>{if(!n&&C1(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=XN();g.length!==0&&(g+=p),sw(g).then(()=>{l(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function P1(s,e,n,i=!1,l=!1){const u=new sC(s);let d;if(l)d=rw;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Td(s,e,n,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await P1(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await P1(s,e,n,n==="getOobCode");return i(s,d)}else return Promise.reject(u)})}function rC(s,e){const n=qd(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(ko(u,e??{}))return l;Ur(l,"already-initialized")}return n.initialize({options:e})}function aC(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Da);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function iC(s,e,n){const i=zi(s);Tt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=aw(e),{host:d,port:p}=oC(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},w=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Tt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Tt(ko(y,i.config.emulator)&&ko(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,Ui(d)?(Eg(`${u}//${d}${g}`),jg("Auth",!0)):lC()}function aw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function oC(s){const e=aw(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:L1(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:L1(d)}}}function L1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function lC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Pg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ma("not implemented")}_getIdTokenResponse(e){return Ma("not implemented")}_linkToIdToken(e,n){return Ma("not implemented")}_getReauthenticationResolver(e){return Ma("not implemented")}}async function cC(s,e){return $a(s,"POST","/v1/accounts:signUp",e)}async function uC(s,e){return wu(s,"POST","/v1/accounts:signInWithPassword",Ha(s,e))}async function hC(s,e){return $a(s,"POST","/v1/accounts:sendOobCode",Ha(s,e))}async function dC(s,e){return hC(s,e)}async function fC(s,e){return wu(s,"POST","/v1/accounts:signInWithEmailLink",Ha(s,e))}async function mC(s,e){return wu(s,"POST","/v1/accounts:signInWithEmailLink",Ha(s,e))}class iu extends Pg{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new iu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new iu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Td(e,n,"signInWithPassword",uC);case"emailLink":return fC(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Td(e,i,"signUpPassword",cC);case"emailLink":return mC(e,{idToken:n,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function jl(s,e){return wu(s,"POST","/v1/accounts:signInWithIdp",Ha(s,e))}const pC="http://localhost";class Eo extends Pg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const d=new Eo(i,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return jl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,jl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jl(e,n)}buildRequest(){const e={requestUri:pC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bu(n)}return e}}function gC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yC(s){const e=Hc($c(s)).link,n=e?Hc($c(e)).deep_link_id:null,i=Hc($c(s)).deep_link_id;return(i?Hc($c(i)).link:null)||i||n||e||s}class Lg{constructor(e){const n=Hc($c(e)),i=n.apiKey??null,l=n.oobCode??null,u=gC(n.mode??null);Tt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=yC(e);try{return new Lg(n)}catch{return null}}}class ql{constructor(){this.providerId=ql.PROVIDER_ID}static credential(e,n){return iu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Lg.parseLink(n);return Tt(i,"argument-error"),iu._fromEmailAndCode(e,i.code,i.tenantId)}}ql.PROVIDER_ID="password";ql.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ql.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class iw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _u extends iw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ki extends _u{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";class Ti extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Eo._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ti.credential(n,i)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";class Ei extends _u{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";class ji extends _u{constructor(){super("twitter.com")}static credential(e,n){return Eo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ji.credential(n,i)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";async function vC(s,e){return wu(s,"POST","/v1/accounts:signUp",Ha(s,e))}class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await Vr._fromIdTokenResponse(e,i,l),d=O1(i);return new jo({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=O1(i);return new jo({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function O1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Ed extends fa{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Ed(e,n,i,l)}}function ow(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(s,u,e,i):u})}async function bC(s,e,n=!1){const i=await au(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return jo._forOperation(s,"link",i)}async function xC(s,e,n=!1){const{auth:i}=s;if(lr(i.app))return Promise.reject(Oa(i));const l="reauthenticate";try{const u=await au(s,ow(i,l,e,s),n);Tt(u.idToken,i,"internal-error");const d=Mg(u.idToken);Tt(d,i,"internal-error");const{sub:p}=d;return Tt(s.uid===p,i,"user-mismatch"),jo._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ur(i,"user-mismatch"),u}}async function lw(s,e,n=!1){if(lr(s.app))return Promise.reject(Oa(s));const i="signIn",l=await ow(s,i,e),u=await jo._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(u.user),u}async function wC(s,e){return lw(zi(s),e)}async function cw(s){const e=zi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _C(s,e,n){const i=zi(s);await Td(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",dC)}async function M3(s,e,n){if(lr(s.app))return Promise.reject(Oa(s));const i=zi(s),d=await Td(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&cw(s),g}),p=await jo._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function kC(s,e,n){return lr(s.app)?Promise.reject(Oa(s)):wC(Bn(s),ql.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cw(s),i})}function TC(s,e){return Bn(s).setPersistence(e)}function EC(s,e,n,i){return Bn(s).onIdTokenChanged(e,n,i)}function jC(s,e,n){return Bn(s).beforeAuthStateChanged(e,n)}function SC(s,e,n,i){return Bn(s).onAuthStateChanged(e,n,i)}function NC(s){return Bn(s).signOut()}const jd="__sak";class uw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jd,"1"),this.storage.removeItem(jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const CC=1e3,RC=10;class hw extends uw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);HN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,RC):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},CC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hw.type="LOCAL";const dw=hw;class fw extends uw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fw.type="SESSION";const Og=fw;function AC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new $d(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,u)),g=await AC(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];function Vg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class IC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=Vg("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:l,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(S.data.response);break;default:clearTimeout(w),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function oa(){return window}function MC(s){oa().location.href=s}function mw(){return typeof oa().WorkerGlobalScope<"u"&&typeof oa().importScripts=="function"}async function DC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PC(){return navigator?.serviceWorker?.controller||null}function LC(){return mw()?self:null}const pw="firebaseLocalStorageDb",OC=1,Sd="firebaseLocalStorage",gw="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wd(s,e){return s.transaction([Sd],e?"readwrite":"readonly").objectStore(Sd)}function VC(){const s=indexedDB.deleteDatabase(pw);return new ku(s).toPromise()}function Jp(){const s=indexedDB.open(pw,OC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Sd,{keyPath:gw})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Sd)?e(i):(i.close(),await VC(),e(await Jp()))})})}async function V1(s,e,n){const i=Wd(s,!0).put({[gw]:e,value:n});return new ku(i).toPromise()}async function BC(s,e){const n=Wd(s,!1).get(e),i=await new ku(n).toPromise();return i===void 0?null:i.value}function B1(s,e){const n=Wd(s,!0).delete(e);return new ku(n).toPromise()}const UC=800,zC=3;class yw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>zC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(LC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await DC(),!this.activeServiceWorker)return;this.sender=new IC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await V1(e,jd,"1"),await B1(e,jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>V1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>BC(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>B1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Wd(l,!1).getAll();return new ku(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yw.type="LOCAL";const FC=yw;new xu(3e4,6e4);function qC(s,e){return e?Da(e):(Tt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Bg extends Pg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HC(s){return lw(s.auth,new Bg(s),s.bypassAuthState)}function $C(s){const{auth:e,user:n}=s;return Tt(n,e,"internal-error"),xC(n,new Bg(s),s.bypassAuthState)}async function WC(s){const{auth:e,user:n}=s;return Tt(n,e,"internal-error"),bC(n,new Bg(s),s.bypassAuthState)}class vw{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HC;case"linkViaPopup":case"linkViaRedirect":return WC;case"reauthViaPopup":case"reauthViaRedirect":return $C;default:Ur(this.auth,"internal-error")}}resolve(e){za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const GC=new xu(2e3,1e4);class kl extends vw{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,kl.currentPopupAction&&kl.currentPopupAction.cancel(),kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){za(this.filter.length===1,"Popup operations only handle one event");const e=Vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ia(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ia(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ia(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GC.get())};e()}}kl.currentPopupAction=null;const KC="pendingRedirect",ud=new Map;class YC extends vw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ud.get(this.auth._key());if(!e){try{const i=await QC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QC(s,e){const n=ZC(e),i=JC(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function XC(s,e){ud.set(s._key(),e)}function JC(s){return Da(s._redirectPersistence)}function ZC(s){return cd(KC,s.config.apiKey,s.name)}async function e4(s,e,n=!1){if(lr(s.app))return Promise.reject(Oa(s));const i=zi(s),l=qC(i,e),d=await new YC(i,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const t4=600*1e3;class n4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!bw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ia(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=t4&&this.cachedEventUids.clear(),this.cachedEventUids.has(U1(e))}saveEventToCache(e){this.cachedEventUids.add(U1(e)),this.lastProcessedEventTime=Date.now()}}function U1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function bw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function s4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bw(s);default:return!1}}async function r4(s,e={}){return $a(s,"GET","/v1/projects",e)}const a4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i4=/^https?/;async function o4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await r4(s);for(const n of e)try{if(l4(n))return}catch{}Ur(s,"unauthorized-domain")}function l4(s){const e=Qp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!i4.test(n))return!1;if(a4.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const c4=new xu(3e4,6e4);function z1(){const s=oa().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function u4(s){return new Promise((e,n)=>{function i(){z1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z1(),n(ia(s,"network-request-failed"))},timeout:c4.get()})}if(oa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(oa().gapi?.load)i();else{const l=ZN("iframefcb");return oa()[l]=()=>{gapi.load?i():n(ia(s,"network-request-failed"))},sw(`${JN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw hd=null,e})}let hd=null;function h4(s){return hd=hd||u4(s),hd}const d4=new xu(5e3,15e3),f4="__/auth/iframe",m4="emulator/auth/iframe",p4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y4(s){const e=s.config;Tt(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Ig(e,m4):`https://${s.config.authDomain}/${f4}`,i={apiKey:e.apiKey,appName:s.name,v:Ao},l=g4.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${bu(i).slice(1)}`}async function v4(s){const e=await h4(s),n=oa().gapi;return Tt(n,s,"internal-error"),e.open({where:document.body,url:y4(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p4,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const d=ia(s,"network-request-failed"),p=oa().setTimeout(()=>{u(d)},d4.get());function g(){oa().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(d)})}))}const b4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x4=500,w4=600,_4="_blank",k4="http://localhost";class F1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T4(s,e,n,i=x4,l=w4){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...b4,width:i.toString(),height:l.toString(),top:u,left:d},y=Os().toLowerCase();n&&(p=Q2(y)?_4:n),K2(y)&&(e=e||k4,g.scrollbars="yes");const w=Object.entries(g).reduce((S,[L,W])=>`${S}${L}=${W},`,"");if(qN(y)&&p!=="_self")return E4(e||"",p),new F1(null);const E=window.open(e||"",p,w);Tt(E,s,"popup-blocked");try{E.focus()}catch{}return new F1(E)}function E4(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const j4="__/auth/handler",S4="emulator/auth/handler",N4=encodeURIComponent("fac");async function q1(s,e,n,i,l,u){Tt(s.config.authDomain,s,"auth-domain-config-required"),Tt(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Ao,eventId:l};if(e instanceof iw){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",hS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))d[w]=E}if(e instanceof _u){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(d.scopes=w.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await s._getAppCheckToken(),y=g?`#${N4}=${encodeURIComponent(g)}`:"";return`${C4(s)}?${bu(p).slice(1)}${y}`}function C4({config:s}){return s.emulator?Ig(s,S4):`https://${s.authDomain}/${j4}`}const xp="webStorageSupport";class R4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Og,this._completeRedirectFn=e4,this._overrideRedirectResult=XC}async _openPopup(e,n,i,l){za(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await q1(e,n,i,Qp(),l);return T4(e,u,Vg())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await q1(e,n,i,Qp(),l);return MC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(za(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await v4(e),i=new n4(e);return n.register("authEvent",l=>(Tt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xp,{type:xp},l=>{const u=l?.[0]?.[xp];u!==void 0&&n(!!u),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=o4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tw()||Y2()||Dg()}}const A4=R4;var H1="@firebase/auth",$1="1.12.0";class I4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function M4(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D4(s){To(new Mi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;Tt(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nw(s)},y=new YN(i,l,u,g);return aC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),To(new Mi("auth-internal",e=>{const n=zi(e.getProvider("auth").getImmediate());return(i=>new I4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(H1,$1,M4(s)),aa(H1,$1,"esm2020")}const P4=300,L4=D2("authIdTokenMaxAge")||P4;let W1=null;const O4=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>L4)return;const l=n?.token;W1!==l&&(W1=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function xw(s=Rg()){const e=qd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=rC(s,{popupRedirectResolver:A4,persistence:[FC,dw,Og]}),i=D2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=O4(u.toString());jC(n,d,()=>d(n.currentUser)),EC(n,p=>d(p))}}const l=A2("auth");return l&&iC(n,`http://${l}`),n}function V4(){return document.getElementsByTagName("head")?.[0]??document}QN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=ia("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",V4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D4("Browser");var G1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ai,ww;(function(){var s;function e(A,j){function R(){}R.prototype=j.prototype,A.F=j.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(D,M,F){for(var I=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)I[ze-2]=arguments[ze];return j.prototype[M].apply(D,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(A,j,R){R||(R=0);const D=Array(16);if(typeof j=="string")for(var M=0;M<16;++M)D[M]=j.charCodeAt(R++)|j.charCodeAt(R++)<<8|j.charCodeAt(R++)<<16|j.charCodeAt(R++)<<24;else for(M=0;M<16;++M)D[M]=j[R++]|j[R++]<<8|j[R++]<<16|j[R++]<<24;j=A.g[0],R=A.g[1],M=A.g[2];let F=A.g[3],I;I=j+(F^R&(M^F))+D[0]+3614090360&4294967295,j=R+(I<<7&4294967295|I>>>25),I=F+(M^j&(R^M))+D[1]+3905402710&4294967295,F=j+(I<<12&4294967295|I>>>20),I=M+(R^F&(j^R))+D[2]+606105819&4294967295,M=F+(I<<17&4294967295|I>>>15),I=R+(j^M&(F^j))+D[3]+3250441966&4294967295,R=M+(I<<22&4294967295|I>>>10),I=j+(F^R&(M^F))+D[4]+4118548399&4294967295,j=R+(I<<7&4294967295|I>>>25),I=F+(M^j&(R^M))+D[5]+1200080426&4294967295,F=j+(I<<12&4294967295|I>>>20),I=M+(R^F&(j^R))+D[6]+2821735955&4294967295,M=F+(I<<17&4294967295|I>>>15),I=R+(j^M&(F^j))+D[7]+4249261313&4294967295,R=M+(I<<22&4294967295|I>>>10),I=j+(F^R&(M^F))+D[8]+1770035416&4294967295,j=R+(I<<7&4294967295|I>>>25),I=F+(M^j&(R^M))+D[9]+2336552879&4294967295,F=j+(I<<12&4294967295|I>>>20),I=M+(R^F&(j^R))+D[10]+4294925233&4294967295,M=F+(I<<17&4294967295|I>>>15),I=R+(j^M&(F^j))+D[11]+2304563134&4294967295,R=M+(I<<22&4294967295|I>>>10),I=j+(F^R&(M^F))+D[12]+1804603682&4294967295,j=R+(I<<7&4294967295|I>>>25),I=F+(M^j&(R^M))+D[13]+4254626195&4294967295,F=j+(I<<12&4294967295|I>>>20),I=M+(R^F&(j^R))+D[14]+2792965006&4294967295,M=F+(I<<17&4294967295|I>>>15),I=R+(j^M&(F^j))+D[15]+1236535329&4294967295,R=M+(I<<22&4294967295|I>>>10),I=j+(M^F&(R^M))+D[1]+4129170786&4294967295,j=R+(I<<5&4294967295|I>>>27),I=F+(R^M&(j^R))+D[6]+3225465664&4294967295,F=j+(I<<9&4294967295|I>>>23),I=M+(j^R&(F^j))+D[11]+643717713&4294967295,M=F+(I<<14&4294967295|I>>>18),I=R+(F^j&(M^F))+D[0]+3921069994&4294967295,R=M+(I<<20&4294967295|I>>>12),I=j+(M^F&(R^M))+D[5]+3593408605&4294967295,j=R+(I<<5&4294967295|I>>>27),I=F+(R^M&(j^R))+D[10]+38016083&4294967295,F=j+(I<<9&4294967295|I>>>23),I=M+(j^R&(F^j))+D[15]+3634488961&4294967295,M=F+(I<<14&4294967295|I>>>18),I=R+(F^j&(M^F))+D[4]+3889429448&4294967295,R=M+(I<<20&4294967295|I>>>12),I=j+(M^F&(R^M))+D[9]+568446438&4294967295,j=R+(I<<5&4294967295|I>>>27),I=F+(R^M&(j^R))+D[14]+3275163606&4294967295,F=j+(I<<9&4294967295|I>>>23),I=M+(j^R&(F^j))+D[3]+4107603335&4294967295,M=F+(I<<14&4294967295|I>>>18),I=R+(F^j&(M^F))+D[8]+1163531501&4294967295,R=M+(I<<20&4294967295|I>>>12),I=j+(M^F&(R^M))+D[13]+2850285829&4294967295,j=R+(I<<5&4294967295|I>>>27),I=F+(R^M&(j^R))+D[2]+4243563512&4294967295,F=j+(I<<9&4294967295|I>>>23),I=M+(j^R&(F^j))+D[7]+1735328473&4294967295,M=F+(I<<14&4294967295|I>>>18),I=R+(F^j&(M^F))+D[12]+2368359562&4294967295,R=M+(I<<20&4294967295|I>>>12),I=j+(R^M^F)+D[5]+4294588738&4294967295,j=R+(I<<4&4294967295|I>>>28),I=F+(j^R^M)+D[8]+2272392833&4294967295,F=j+(I<<11&4294967295|I>>>21),I=M+(F^j^R)+D[11]+1839030562&4294967295,M=F+(I<<16&4294967295|I>>>16),I=R+(M^F^j)+D[14]+4259657740&4294967295,R=M+(I<<23&4294967295|I>>>9),I=j+(R^M^F)+D[1]+2763975236&4294967295,j=R+(I<<4&4294967295|I>>>28),I=F+(j^R^M)+D[4]+1272893353&4294967295,F=j+(I<<11&4294967295|I>>>21),I=M+(F^j^R)+D[7]+4139469664&4294967295,M=F+(I<<16&4294967295|I>>>16),I=R+(M^F^j)+D[10]+3200236656&4294967295,R=M+(I<<23&4294967295|I>>>9),I=j+(R^M^F)+D[13]+681279174&4294967295,j=R+(I<<4&4294967295|I>>>28),I=F+(j^R^M)+D[0]+3936430074&4294967295,F=j+(I<<11&4294967295|I>>>21),I=M+(F^j^R)+D[3]+3572445317&4294967295,M=F+(I<<16&4294967295|I>>>16),I=R+(M^F^j)+D[6]+76029189&4294967295,R=M+(I<<23&4294967295|I>>>9),I=j+(R^M^F)+D[9]+3654602809&4294967295,j=R+(I<<4&4294967295|I>>>28),I=F+(j^R^M)+D[12]+3873151461&4294967295,F=j+(I<<11&4294967295|I>>>21),I=M+(F^j^R)+D[15]+530742520&4294967295,M=F+(I<<16&4294967295|I>>>16),I=R+(M^F^j)+D[2]+3299628645&4294967295,R=M+(I<<23&4294967295|I>>>9),I=j+(M^(R|~F))+D[0]+4096336452&4294967295,j=R+(I<<6&4294967295|I>>>26),I=F+(R^(j|~M))+D[7]+1126891415&4294967295,F=j+(I<<10&4294967295|I>>>22),I=M+(j^(F|~R))+D[14]+2878612391&4294967295,M=F+(I<<15&4294967295|I>>>17),I=R+(F^(M|~j))+D[5]+4237533241&4294967295,R=M+(I<<21&4294967295|I>>>11),I=j+(M^(R|~F))+D[12]+1700485571&4294967295,j=R+(I<<6&4294967295|I>>>26),I=F+(R^(j|~M))+D[3]+2399980690&4294967295,F=j+(I<<10&4294967295|I>>>22),I=M+(j^(F|~R))+D[10]+4293915773&4294967295,M=F+(I<<15&4294967295|I>>>17),I=R+(F^(M|~j))+D[1]+2240044497&4294967295,R=M+(I<<21&4294967295|I>>>11),I=j+(M^(R|~F))+D[8]+1873313359&4294967295,j=R+(I<<6&4294967295|I>>>26),I=F+(R^(j|~M))+D[15]+4264355552&4294967295,F=j+(I<<10&4294967295|I>>>22),I=M+(j^(F|~R))+D[6]+2734768916&4294967295,M=F+(I<<15&4294967295|I>>>17),I=R+(F^(M|~j))+D[13]+1309151649&4294967295,R=M+(I<<21&4294967295|I>>>11),I=j+(M^(R|~F))+D[4]+4149444226&4294967295,j=R+(I<<6&4294967295|I>>>26),I=F+(R^(j|~M))+D[11]+3174756917&4294967295,F=j+(I<<10&4294967295|I>>>22),I=M+(j^(F|~R))+D[2]+718787259&4294967295,M=F+(I<<15&4294967295|I>>>17),I=R+(F^(M|~j))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+j&4294967295,A.g[1]=A.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+F&4294967295}i.prototype.v=function(A,j){j===void 0&&(j=A.length);const R=j-this.blockSize,D=this.C;let M=this.h,F=0;for(;F<j;){if(M==0)for(;F<=R;)l(this,A,F),F+=this.blockSize;if(typeof A=="string"){for(;F<j;)if(D[M++]=A.charCodeAt(F++),M==this.blockSize){l(this,D),M=0;break}}else for(;F<j;)if(D[M++]=A[F++],M==this.blockSize){l(this,D),M=0;break}}this.h=M,this.o+=j},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var j=1;j<A.length-8;++j)A[j]=0;j=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=j&255,j/=256;for(this.v(A),A=Array(16),j=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)A[j++]=this.g[R]>>>D&255;return A};function u(A,j){var R=p;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=j(A)}function d(A,j){this.h=j;const R=[];let D=!0;for(let M=A.length-1;M>=0;M--){const F=A[M]|0;D&&F==j||(R[M]=F,D=!1)}this.g=R}var p={};function g(A){return-128<=A&&A<128?u(A,function(j){return new d([j|0],j<0?-1:0)}):new d([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return E;if(A<0)return O(y(-A));const j=[];let R=1;for(let D=0;A>=R;D++)j[D]=A/R|0,R*=4294967296;return new d(j,0)}function w(A,j){if(A.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(A.charAt(0)=="-")return O(w(A.substring(1),j));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(j,8));let D=E;for(let F=0;F<A.length;F+=8){var M=Math.min(8,A.length-F);const I=parseInt(A.substring(F,F+M),j);M<8?(M=y(Math.pow(j,M)),D=D.j(M).add(y(I))):(D=D.j(R),D=D.add(y(I)))}return D}var E=g(0),S=g(1),L=g(16777216);s=d.prototype,s.m=function(){if(z(this))return-O(this).m();let A=0,j=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);A+=(D>=0?D:4294967296+D)*j,j*=4294967296}return A},s.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(W(this))return"0";if(z(this))return"-"+O(this).toString(A);const j=y(Math.pow(A,6));var R=this;let D="";for(;;){const M=Se(R,j).g;R=te(R,M.j(j));let F=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=M,W(R))return F+D;for(;F.length<6;)F="0"+F;D=F+D}},s.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function W(A){if(A.h!=0)return!1;for(let j=0;j<A.g.length;j++)if(A.g[j]!=0)return!1;return!0}function z(A){return A.h==-1}s.l=function(A){return A=te(this,A),z(A)?-1:W(A)?0:1};function O(A){const j=A.g.length,R=[];for(let D=0;D<j;D++)R[D]=~A.g[D];return new d(R,~A.h).add(S)}s.abs=function(){return z(this)?O(this):this},s.add=function(A){const j=Math.max(this.g.length,A.g.length),R=[];let D=0;for(let M=0;M<=j;M++){let F=D+(this.i(M)&65535)+(A.i(M)&65535),I=(F>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);D=I>>>16,F&=65535,I&=65535,R[M]=I<<16|F}return new d(R,R[R.length-1]&-2147483648?-1:0)};function te(A,j){return A.add(O(j))}s.j=function(A){if(W(this)||W(A))return E;if(z(this))return z(A)?O(this).j(O(A)):O(O(this).j(A));if(z(A))return O(this.j(O(A)));if(this.l(L)<0&&A.l(L)<0)return y(this.m()*A.m());const j=this.g.length+A.g.length,R=[];for(var D=0;D<2*j;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<A.g.length;M++){const F=this.i(D)>>>16,I=this.i(D)&65535,ze=A.i(M)>>>16,vt=A.i(M)&65535;R[2*D+2*M]+=I*vt,X(R,2*D+2*M),R[2*D+2*M+1]+=F*vt,X(R,2*D+2*M+1),R[2*D+2*M+1]+=I*ze,X(R,2*D+2*M+1),R[2*D+2*M+2]+=F*ze,X(R,2*D+2*M+2)}for(A=0;A<j;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=j;A<2*j;A++)R[A]=0;return new d(R,0)};function X(A,j){for(;(A[j]&65535)!=A[j];)A[j+1]+=A[j]>>>16,A[j]&=65535,j++}function he(A,j){this.g=A,this.h=j}function Se(A,j){if(W(j))throw Error("division by zero");if(W(A))return new he(E,E);if(z(A))return j=Se(O(A),j),new he(O(j.g),O(j.h));if(z(j))return j=Se(A,O(j)),new he(O(j.g),j.h);if(A.g.length>30){if(z(A)||z(j))throw Error("slowDivide_ only works with positive integers.");for(var R=S,D=j;D.l(A)<=0;)R=Ue(R),D=Ue(D);var M=Le(R,1),F=Le(D,1);for(D=Le(D,2),R=Le(R,2);!W(D);){var I=F.add(D);I.l(A)<=0&&(M=M.add(R),F=I),D=Le(D,1),R=Le(R,1)}return j=te(A,M.j(j)),new he(M,j)}for(M=E;A.l(j)>=0;){for(R=Math.max(1,Math.floor(A.m()/j.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),F=y(R),I=F.j(j);z(I)||I.l(A)>0;)R-=D,F=y(R),I=F.j(j);W(F)&&(F=S),M=M.add(F),A=te(A,I)}return new he(M,A)}s.B=function(A){return Se(this,A).h},s.and=function(A){const j=Math.max(this.g.length,A.g.length),R=[];for(let D=0;D<j;D++)R[D]=this.i(D)&A.i(D);return new d(R,this.h&A.h)},s.or=function(A){const j=Math.max(this.g.length,A.g.length),R=[];for(let D=0;D<j;D++)R[D]=this.i(D)|A.i(D);return new d(R,this.h|A.h)},s.xor=function(A){const j=Math.max(this.g.length,A.g.length),R=[];for(let D=0;D<j;D++)R[D]=this.i(D)^A.i(D);return new d(R,this.h^A.h)};function Ue(A){const j=A.g.length+1,R=[];for(let D=0;D<j;D++)R[D]=A.i(D)<<1|A.i(D-1)>>>31;return new d(R,A.h)}function Le(A,j){const R=j>>5;j%=32;const D=A.g.length-R,M=[];for(let F=0;F<D;F++)M[F]=j>0?A.i(F+R)>>>j|A.i(F+R+1)<<32-j:A.i(F+R);return new d(M,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ww=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=w,Ai=d}).apply(typeof G1<"u"?G1:typeof self<"u"?self:typeof window<"u"?window:{});var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _w,Wc,kw,dd,Zp,Tw,Ew,jw;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kh=="object"&&Kh];for(var v=0;v<h.length;++v){var _=h[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function l(h,v){if(v)e:{var _=i;h=h.split(".");for(var C=0;C<h.length-1;C++){var ee=h[C];if(!(ee in _))break e;_=_[ee]}h=h[h.length-1],C=_[h],v=v(C),v!=C&&v!=null&&e(_,h,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(v){var _=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&_.push([C,v[C]]);return _}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,_){return h.call.apply(h.bind,arguments)}function y(h,v,_){return y=g,y.apply(null,arguments)}function w(h,v){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function E(h,v){function _(){}_.prototype=v.prototype,h.Z=v.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(C,ee,ce){for(var qe=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)qe[Dt-2]=arguments[Dt];return v.prototype[ee].apply(C,qe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function L(h){const v=h.length;if(v>0){const _=Array(v);for(let C=0;C<v;C++)_[C]=h[C];return _}return[]}function W(h,v){for(let C=1;C<arguments.length;C++){const ee=arguments[C];var _=typeof ee;if(_=_!="object"?_:ee?Array.isArray(ee)?"array":_:"null",_=="array"||_=="object"&&typeof ee.length=="number"){_=h.length||0;const ce=ee.length||0;h.length=_+ce;for(let qe=0;qe<ce;qe++)h[_+qe]=ee[qe]}else h.push(ee)}}class z{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function O(h){d.setTimeout(()=>{throw h},0)}function te(){var h=A;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class X{constructor(){this.h=this.g=null}add(v,_){const C=he.get();C.set(v,_),this.h?this.h.next=C:this.g=C,this.h=C}}var he=new z(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Le=!1,A=new X,j=()=>{const h=Promise.resolve(void 0);Ue=()=>{h.then(R)}};function R(){for(var h;h=te();){try{h.h.call(h.g)}catch(_){O(_)}var v=he;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Le=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,v),d.removeEventListener("test",_,v)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function ze(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}E(ze,M),ze.prototype.init=function(h,v){const _=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(_=="mouseover"?v=h.fromElement:_=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var vt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function Ee(h,v,_,C,ee){this.listener=h,this.proxy=null,this.src=v,this.type=_,this.capture=!!C,this.ha=ee,this.key=++Y,this.da=this.fa=!1}function Pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function oe(h,v,_){for(const C in h)v.call(_,h[C],C,h)}function Ve(h,v){for(const _ in h)v.call(void 0,h[_],_,h)}function V(h){const v={};for(const _ in h)v[_]=h[_];return v}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(h,v){let _,C;for(let ee=1;ee<arguments.length;ee++){C=arguments[ee];for(_ in C)h[_]=C[_];for(let ce=0;ce<G.length;ce++)_=G[ce],Object.prototype.hasOwnProperty.call(C,_)&&(h[_]=C[_])}}function Ne(h){this.src=h,this.g={},this.h=0}Ne.prototype.add=function(h,v,_,C,ee){const ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);const qe=Oe(h,v,C,ee);return qe>-1?(v=h[qe],_||(v.fa=!1)):(v=new Ee(v,this.src,ce,!!C,ee),v.fa=_,h.push(v)),v};function Me(h,v){const _=v.type;if(_ in h.g){var C=h.g[_],ee=Array.prototype.indexOf.call(C,v,void 0),ce;(ce=ee>=0)&&Array.prototype.splice.call(C,ee,1),ce&&(Pe(v),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Oe(h,v,_,C){for(let ee=0;ee<h.length;++ee){const ce=h[ee];if(!ce.da&&ce.listener==v&&ce.capture==!!_&&ce.ha==C)return ee}return-1}var tt="closure_lm_"+(Math.random()*1e6|0),He={};function ie(h,v,_,C,ee){if(Array.isArray(v)){for(let ce=0;ce<v.length;ce++)ie(h,v[ce],_,C,ee);return null}return _=jt(_),h&&h[vt]?h.J(v,_,p(C)?!!C.capture:!1,ee):We(h,v,_,!1,C,ee)}function We(h,v,_,C,ee,ce){if(!v)throw Error("Invalid event type");const qe=p(ee)?!!ee.capture:!!ee;let Dt=kt(h);if(Dt||(h[tt]=Dt=new Ne(h)),_=Dt.add(v,_,C,qe,ce),_.proxy)return _;if(C=wt(),_.proxy=C,C.src=h,C.listener=_,h.addEventListener)F||(ee=qe),ee===void 0&&(ee=!1),h.addEventListener(v.toString(),C,ee);else if(h.attachEvent)h.attachEvent(re(v.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function wt(){function h(_){return v.call(h.src,h.listener,_)}const v=Ft;return h}function ut(h,v,_,C,ee){if(Array.isArray(v))for(var ce=0;ce<v.length;ce++)ut(h,v[ce],_,C,ee);else C=p(C)?!!C.capture:!!C,_=jt(_),h&&h[vt]?(h=h.i,ce=String(v).toString(),ce in h.g&&(v=h.g[ce],_=Oe(v,_,C,ee),_>-1&&(Pe(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete h.g[ce],h.h--)))):h&&(h=kt(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Oe(v,_,C,ee)),(_=h>-1?v[h]:null)&&ft(_))}function ft(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[vt])Me(v.i,h);else{var _=h.type,C=h.proxy;v.removeEventListener?v.removeEventListener(_,C,h.capture):v.detachEvent?v.detachEvent(re(_),C):v.addListener&&v.removeListener&&v.removeListener(C),(_=kt(v))?(Me(_,h),_.h==0&&(_.src=null,v[tt]=null)):Pe(h)}}}function re(h){return h in He?He[h]:He[h]="on"+h}function Ft(h,v){if(h.da)h=!0;else{v=new ze(v,this);const _=h.listener,C=h.ha||h.src;h.fa&&ft(h),h=_.call(C,v)}return h}function kt(h){return h=h[tt],h instanceof Ne?h:null}var bt="__closure_events_fn_"+(Math.random()*1e9>>>0);function jt(h){return typeof h=="function"?h:(h[bt]||(h[bt]=function(v){return h.handleEvent(v)}),h[bt])}function lt(){D.call(this),this.i=new Ne(this),this.M=this,this.G=null}E(lt,D),lt.prototype[vt]=!0,lt.prototype.removeEventListener=function(h,v,_,C){ut(this,h,v,_,C)};function Ye(h,v){var _,C=h.G;if(C)for(_=[];C;C=C.G)_.push(C);if(h=h.M,C=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var ee=v;v=new M(C,h),fe(v,ee)}ee=!0;let ce,qe;if(_)for(qe=_.length-1;qe>=0;qe--)ce=v.g=_[qe],ee=qt(ce,C,!0,v)&&ee;if(ce=v.g=h,ee=qt(ce,C,!0,v)&&ee,ee=qt(ce,C,!1,v)&&ee,_)for(qe=0;qe<_.length;qe++)ce=v.g=_[qe],ee=qt(ce,C,!1,v)&&ee}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const _=h.g[v];for(let C=0;C<_.length;C++)Pe(_[C]);delete h.g[v],h.h--}}this.G=null},lt.prototype.J=function(h,v,_,C){return this.i.add(String(h),v,!1,_,C)},lt.prototype.K=function(h,v,_,C){return this.i.add(String(h),v,!0,_,C)};function qt(h,v,_,C){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let ee=!0;for(let ce=0;ce<v.length;++ce){const qe=v[ce];if(qe&&!qe.da&&qe.capture==_){const Dt=qe.listener,Xn=qe.ha||qe.src;qe.fa&&Me(h.i,qe),ee=Dt.call(Xn,C)!==!1&&ee}}return ee&&!C.defaultPrevented}function ns(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Nt(h){h.g=ns(()=>{h.g=null,h.i&&(h.i=!1,Nt(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Lt extends D{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Nt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(h){D.call(this),this.h=h,this.g={}}E(In,D);var Ct=[];function cn(h){oe(h.g,function(v,_){this.g.hasOwnProperty(_)&&ft(v)},h),h.g={}}In.prototype.N=function(){In.Z.N.call(this),cn(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ge=d.JSON.stringify,je=d.JSON.parse,De=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function et(){}function Qe(){}var Be={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nt(){M.call(this,"d")}E(nt,M);function Ge(){M.call(this,"c")}E(Ge,M);var $e={},St=null;function Xt(){return St=St||new lt}$e.Ia="serverreachability";function Bt(h){M.call(this,$e.Ia,h)}E(Bt,M);function tn(h){const v=Xt();Ye(v,new Bt(v))}$e.STAT_EVENT="statevent";function Mn(h,v){M.call(this,$e.STAT_EVENT,h),this.stat=v}E(Mn,M);function Rt(h){const v=Xt();Ye(v,new Mn(v,h))}$e.Ja="timingevent";function an(h,v){M.call(this,$e.Ja,h),this.size=v}E(an,M);function Un(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function wn(){this.g=!0}wn.prototype.ua=function(){this.g=!1};function ss(h,v,_,C,ee,ce){h.info(function(){if(h.g)if(ce){var qe="",Dt=ce.split("&");for(let on=0;on<Dt.length;on++){var Xn=Dt[on].split("=");if(Xn.length>1){const Pn=Xn[0];Xn=Xn[1];const fr=Pn.split("_");qe=fr.length>=2&&fr[1]=="type"?qe+(Pn+"="+Xn+"&"):qe+(Pn+"=redacted&")}}}else qe=null;else qe=ce;return"XMLHTTP REQ ("+C+") [attempt "+ee+"]: "+v+`
`+_+`
`+qe})}function rs(h,v,_,C,ee,ce,qe){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+ee+"]: "+v+`
`+_+`
`+ce+" "+qe})}function Sn(h,v,_,C){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Hn(h,_)+(C?" "+C:"")})}function Yn(h,v){h.info(function(){return"TIMEOUT: "+v})}wn.prototype.info=function(){};function Hn(h,v){if(!h.g)return v;if(!v)return null;try{const ce=JSON.parse(v);if(ce){for(h=0;h<ce.length;h++)if(Array.isArray(ce[h])){var _=ce[h];if(!(_.length<2)){var C=_[1];if(Array.isArray(C)&&!(C.length<1)){var ee=C[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let qe=1;qe<C.length;qe++)C[qe]=""}}}}return ge(ce)}catch{return v}}var vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rs;function H(){}E(H,et),H.prototype.g=function(){return new XMLHttpRequest},Rs=new H;function me(h){return encodeURIComponent(String(h))}function we(h){var v=1;h=h.split(":");const _=[];for(;v>0&&h.length;)_.push(h.shift()),v--;return h.length&&_.push(h.join(":")),_}function be(h,v,_,C){this.j=h,this.i=v,this.l=_,this.S=C||1,this.V=new In(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}var rt={},mt={};function it(h,v,_){h.M=1,h.A=Ot(pe(v)),h.u=_,h.R=!0,xt(h,null)}function xt(h,v){h.F=Date.now(),as(h),h.B=pe(h.A);var _=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),zn(_.i,"t",C),h.C=0,_=h.j.L,h.h=new de,h.g=Bu(h.j,_?v:null,!h.u),h.P>0&&(h.O=new Lt(y(h.Y,h,h.g),h.P)),v=h.V,_=h.g,C=h.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(Ct[0]=ee.toString()),ee=Ct);for(let ce=0;ce<ee.length;ce++){const qe=ie(_,ee[ce],C||v.handleEvent,!1,v.h||v);if(!qe)break;v.g[qe.key]=qe}v=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),tn(),ss(h.i,h.v,h.B,h.l,h.S,h.u)}be.prototype.ba=function(h){h=h.target;const v=this.O;v&&Cr(h)==3?v.j():this.Y(h)},be.prototype.Y=function(h){try{if(h==this.g)e:{const Dt=Cr(this.g),Xn=this.g.ya(),on=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||_s(this.g)))){this.K||Dt!=4||Xn==7||(Xn==8||on<=0?tn(3):tn(2)),_n(this);var v=this.g.ca();this.X=v;var _=pt(this);if(this.o=v==200,rs(this.i,this.v,this.B,this.l,this.S,Dt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var C,ee=this.g;if((C=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var ce=C;break t}}ce=null}if(h=ce)Sn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,b(this,h);else{this.o=!1,this.m=3,Rt(12),le(this),q(this);break e}}if(this.R){h=!0;let Pn;for(;!this.K&&this.C<_.length;)if(Pn=As(this,_),Pn==mt){Dt==4&&(this.m=4,Rt(14),h=!1),Sn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==rt){this.m=4,Rt(15),Sn(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Sn(this.i,this.l,Pn,null),b(this,Pn);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||_.length!=0||this.h.h||(this.m=1,Rt(16),h=!1),this.o=this.o&&h,!h)Sn(this.i,this.l,_,"[Invalid Chunked Response]"),le(this),q(this);else if(_.length>0&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.aa&&!qe.P&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ec(qe),qe.P=!0,Rt(11))}}else Sn(this.i,this.l,_,null),b(this,_);Dt==4&&le(this),this.o&&!this.K&&(Dt==4?Pu(this.j,this):(this.o=!1,as(this)))}else ga(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),le(this),q(this)}}}catch{}};function pt(h){if(!Jt(h))return h.g.la();const v=_s(h.g);if(v==="")return"";let _="";const C=v.length,ee=Cr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return le(h),q(h),"";h.h.i=new d.TextDecoder}for(let ce=0;ce<C;ce++)h.h.h=!0,_+=h.h.i.decode(v[ce],{stream:!(ee&&ce==C-1)});return v.length=0,h.h.g+=_,h.C=0,h.h.g}function Jt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function As(h,v){var _=h.C,C=v.indexOf(`
`,_);return C==-1?mt:(_=Number(v.substring(_,C)),isNaN(_)?rt:(C+=1,C+_>v.length?mt:(v=v.slice(C,C+_),h.C=C+_,v)))}be.prototype.cancel=function(){this.K=!0,le(this)};function as(h){h.T=Date.now()+h.H,bs(h,h.H)}function bs(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Un(y(h.aa,h),v)}function _n(h){h.D&&(d.clearTimeout(h.D),h.D=null)}be.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Yn(this.i,this.B),this.M!=2&&(tn(),Rt(17)),le(this),this.m=2,q(this)):bs(this,this.T-h)};function q(h){h.j.I==0||h.K||Pu(h.j,h)}function le(h){_n(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,cn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function b(h,v){try{var _=h.j;if(_.I!=0&&(_.g==h||ye(_.h,h))){if(!h.L&&ye(_.h,h)&&_.I==3){try{var C=_.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var ee=C;if(ee[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Vo(_),Qa(_);else break e;Qi(_),Rt(18)}}else _.xa=ee[1],0<_.xa-_.K&&ee[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Un(y(_.Va,_),6e3));Ae(_.h)<=1&&_.ta&&(_.ta=void 0)}else Qr(_,11)}else if((h.L||_.g==h)&&Vo(_),!I(v))for(ee=_.Ba.g.parse(v),v=0;v<ee.length;v++){let on=ee[v];const Pn=on[0];if(!(Pn<=_.K))if(_.K=Pn,on=on[1],_.I==2)if(on[0]=="c"){_.M=on[1],_.ba=on[2];const fr=on[3];fr!=null&&(_.ka=fr,_.j.info("VER="+_.ka));const Xr=on[4];Xr!=null&&(_.za=Xr,_.j.info("SVER="+_.za));const Rr=on[5];Rr!=null&&typeof Rr=="number"&&Rr>0&&(C=1.5*Rr,_.O=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const Ar=h.g;if(Ar){const Xi=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var ce=C.h;ce.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(xe(ce,ce.h),ce.h=null))}if(C.G){const Bo=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Bo&&(C.wa=Bo,Ke(C.J,C.G,Bo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),C=_;var qe=h;if(C.na=Vu(C,C.L?C.ba:null,C.W),qe.L){st(C.h,qe);var Dt=qe,Xn=C.O;Xn&&(Dt.H=Xn),Dt.D&&(_n(Dt),as(Dt)),C.g=qe}else Mu(C);_.i.length>0&&Yr(_)}else on[0]!="stop"&&on[0]!="close"||Qr(_,7);else _.I==3&&(on[0]=="stop"||on[0]=="close"?on[0]=="stop"?Qr(_,7):Jl(_):on[0]!="noop"&&_.l&&_.l.qa(on),_.A=0)}}tn(4)}catch{}}var T=class{constructor(h,v){this.g=h,this.map=v}};function P(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function K(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ae(h){return h.h?1:h.g?h.g.size:0}function ye(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function xe(h,v){h.g?h.g.add(v):h.h=v}function st(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}P.prototype.cancel=function(){if(this.i=Ze(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ze(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const _ of h.g.values())v=v.concat(_.G);return v}return L(h.i)}var U=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J(h,v){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const C=h[_].indexOf("=");let ee,ce=null;C>=0?(ee=h[_].substring(0,C),ce=h[_].substring(C+1)):ee=h[_],v(ee,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function Z(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Z?(this.l=h.l,ke(this,h.j),this.o=h.o,this.g=h.g,Fe(this,h.u),this.h=h.h,ot(this,$r(h.i)),this.m=h.m):h&&(v=String(h).match(U))?(this.l=!1,ke(this,v[1]||"",!0),this.o=dn(v[2]||""),this.g=dn(v[3]||"",!0),Fe(this,v[4]),this.h=dn(v[5]||"",!0),ot(this,v[6]||"",!0),this.m=dn(v[7]||"")):(this.l=!1,this.i=new Tn(null,this.l))}Z.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Ut(v,Zs,!0),":");var _=this.g;return(_||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ut(v,Zs,!0),"@"),h.push(me(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Ut(_,_.charAt(0)=="/"?ms:is,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Ut(_,zt)),h.join("")},Z.prototype.resolve=function(h){const v=pe(this);let _=!!h.j;_?ke(v,h.j):_=!!h.o,_?v.o=h.o:_=!!h.g,_?v.g=h.g:_=h.u!=null;var C=h.h;if(_)Fe(v,h.u);else if(_=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var ee=v.h.lastIndexOf("/");ee!=-1&&(C=v.h.slice(0,ee+1)+C)}if(ee=C,ee==".."||ee==".")C="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){C=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const ce=[];for(let qe=0;qe<ee.length;){const Dt=ee[qe++];Dt=="."?C&&qe==ee.length&&ce.push(""):Dt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),C&&qe==ee.length&&ce.push("")):(ce.push(Dt),C=!0)}C=ce.join("/")}else C=ee}return _?v.h=C:_=h.i.toString()!=="",_?ot(v,$r(h.i)):_=!!h.m,_&&(v.m=h.m),v};function pe(h){return new Z(h)}function ke(h,v,_){h.j=_?dn(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Fe(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function ot(h,v,_){v instanceof Tn?(h.i=v,Wa(h.i,h.l)):(_||(v=Ut(v,ps)),h.i=new Tn(v,h.l))}function Ke(h,v,_){h.i.set(v,_)}function Ot(h){return Ke(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function dn(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ut(h,v,_){return typeof h=="string"?(h=encodeURI(h).replace(v,un),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function un(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Zs=/[#\/\?@]/g,is=/[#\?:]/g,ms=/[#\?]/g,ps=/[#\?@]/g,zt=/#/g;function Tn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Nn(h){h.g||(h.g=new Map,h.h=0,h.i&&J(h.i,function(v,_){h.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}s=Tn.prototype,s.add=function(h,v){Nn(this),this.i=null,h=Sr(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(v),this.h+=1,this};function er(h,v){Nn(h),v=Sr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Is(h,v){return Nn(h),v=Sr(h,v),h.g.has(v)}s.forEach=function(h,v){Nn(this),this.g.forEach(function(_,C){_.forEach(function(ee){h.call(v,ee,C,this)},this)},this)};function Dn(h,v){Nn(h);let _=[];if(typeof v=="string")Is(h,v)&&(_=_.concat(h.g.get(Sr(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)_=_.concat(h[v]);return _}s.set=function(h,v){return Nn(this),this.i=null,h=Sr(this,h),Is(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Dn(this,h),h.length>0?String(h[0]):v):v};function zn(h,v,_){er(h,v),_.length>0&&(h.i=null,h.g.set(Sr(h,v),L(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var _=v[C];const ee=me(_);_=Dn(this,_);for(let ce=0;ce<_.length;ce++){let qe=ee;_[ce]!==""&&(qe+="="+me(_[ce])),h.push(qe)}}return this.i=h.join("&")};function $r(h){const v=new Tn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Sr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Wa(h,v){v&&!h.j&&(Nn(h),h.i=null,h.g.forEach(function(_,C){const ee=C.toLowerCase();C!=ee&&(er(this,C),zn(this,ee,_))},h)),h.j=v}function Bs(h,v){const _=new wn;if(d.Image){const C=new Image;C.onload=w(hr,_,"TestLoadImage: loaded",!0,v,C),C.onerror=w(hr,_,"TestLoadImage: error",!1,v,C),C.onabort=w(hr,_,"TestLoadImage: abort",!1,v,C),C.ontimeout=w(hr,_,"TestLoadImage: timeout",!1,v,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else v(!1)}function Yl(h,v){const _=new wn,C=new AbortController,ee=setTimeout(()=>{C.abort(),hr(_,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:C.signal}).then(ce=>{clearTimeout(ee),ce.ok?hr(_,"TestPingServer: ok",!0,v):hr(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ee),hr(_,"TestPingServer: error",!1,v)})}function hr(h,v,_,C,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),C(_)}catch{}}function Ga(){this.g=new De}function Wr(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Wr,et),Wr.prototype.g=function(){return new $i(this.i,this.h)};function $i(h,v){lt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E($i,lt),s=$i.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Nr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Po(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Po(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Ka(this):Nr(this),this.readyState==3&&Po(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Ka(this))},s.Na=function(h){this.g&&(this.response=h,Ka(this))},s.ga=function(){this.g&&Ka(this)};function Ka(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Nr(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=v.next();return h.join(`\r
`)};function Nr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function dr(h){let v="";return oe(h,function(_,C){v+=C,v+=":",v+=_,v+=`\r
`}),v}function Wi(h,v,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=dr(_),typeof h=="string"?_!=null&&me(_):Ke(h,v,_))}function pn(h){lt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(pn,lt);var Gr=/^https?$/i,Ql=["POST","PUT"];s=pn.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rs.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ce){Gi(this,ce);return}if(h=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var ee in C)_.set(ee,C[ee]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ce of C.keys())_.set(ce,C.get(ce));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(ce=>ce.toLowerCase()=="content-type"),ee=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Ql,v,void 0)>=0)||C||ee||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,qe]of _)this.g.setRequestHeader(ce,qe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ce){Gi(this,ce)}};function Gi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Xl(h),pa(h)}function Xl(h){h.A||(h.A=!0,Ye(h,"complete"),Ye(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ye(this,"complete"),Ye(this,"abort"),pa(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pa(this,!0)),pn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ki(this):this.Xa())},s.Xa=function(){Ki(this)};function Ki(h){if(h.h&&typeof u<"u"){if(h.v&&Cr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ye(h,"readystatechange"),Cr(h)==4){h.h=!1;try{const ce=h.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var C;if(C=ce===0){let qe=String(h.D).match(U)[1]||null;!qe&&d.self&&d.self.location&&(qe=d.self.location.protocol.slice(0,-1)),C=!Gr.test(qe?qe.toLowerCase():"")}_=C}if(_)Ye(h,"complete"),Ye(h,"success");else{h.o=6;try{var ee=Cr(h)>2?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.ca()+"]",Xl(h)}}finally{pa(h)}}}}function pa(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,v||Ye(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Cr(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Cr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),je(v)}};function _s(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ga(h){const v={};h=(h.g&&Cr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(I(h[C]))continue;var _=we(h[C]);const ee=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ce=v[ee]||[];v[ee]=ce,ce.push(_)}Ve(v,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kr(h,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||v}function Ya(h){this.za=0,this.i=[],this.j=new wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Kr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Kr("baseRetryDelayMs",5e3,h),this.Za=Kr("retryDelaySeedMs",1e4,h),this.Ta=Kr("forwardChannelMaxRetries",2,h),this.va=Kr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new P(h&&h.concurrentRequestLimit),this.Ba=new Ga,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ya.prototype,s.ka=8,s.I=1,s.connect=function(h,v,_,C){Rt(0),this.W=h,this.H=v||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.J=Vu(this,null,this.W),Yr(this)};function Jl(h){if(Lo(h),h.I==3){var v=h.V++,_=pe(h.J);if(Ke(_,"SID",h.M),Ke(_,"RID",v),Ke(_,"TYPE","terminate"),Yi(h,_),v=new be(h,h.j,v),v.M=2,v.A=Ot(pe(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=v.A,_=!0),_||(v.g=Bu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),as(v)}Ou(h)}function Qa(h){h.g&&(ec(h),h.g.cancel(),h.g=null)}function Lo(h){Qa(h),h.v&&(d.clearTimeout(h.v),h.v=null),Vo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Yr(h){if(!K(h.h)&&!h.m){h.m=!0;var v=h.Ea;Ue||j(),Le||(Ue(),Le=!0),A.add(v,h),h.D=0}}function Oo(h,v){return Ae(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Un(y(h.Ea,h,v),Lu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const ee=new be(this,this.j,h);let ce=this.o;if(this.U&&(ce?(ce=V(ce),fe(ce,this.U)):ce=this.U),this.u!==null||this.R||(ee.J=ce,ce=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=Iu(this,ee,v),_=pe(this.J),Ke(_,"RID",h),Ke(_,"CVER",22),this.G&&Ke(_,"X-HTTP-Session-Id",this.G),Yi(this,_),ce&&(this.R?v="headers="+me(dr(ce))+"&"+v:this.u&&Wi(_,this.u,ce)),xe(this.h,ee),this.Ra&&Ke(_,"TYPE","init"),this.S?(Ke(_,"$req",v),Ke(_,"SID","null"),ee.U=!0,it(ee,_,null)):it(ee,_,v),this.I=2}}else this.I==3&&(h?Zl(this,h):this.i.length==0||K(this.h)||Zl(this))};function Zl(h,v){var _;v?_=v.l:_=h.V++;const C=pe(h.J);Ke(C,"SID",h.M),Ke(C,"RID",_),Ke(C,"AID",h.K),Yi(h,C),h.u&&h.o&&Wi(C,h.u,h.o),_=new be(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Iu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),xe(h.h,_),it(_,C,v)}function Yi(h,v){h.H&&oe(h.H,function(_,C){Ke(v,C,_)}),h.l&&oe({},function(_,C){Ke(v,C,_)})}function Iu(h,v,_){_=Math.min(h.i.length,_);const C=h.l?y(h.l.Ka,h.l,h):null;e:{var ee=h.i;let Dt=-1;for(;;){const Xn=["count="+_];Dt==-1?_>0?(Dt=ee[0].g,Xn.push("ofs="+Dt)):Dt=0:Xn.push("ofs="+Dt);let on=!0;for(let Pn=0;Pn<_;Pn++){var ce=ee[Pn].g;const fr=ee[Pn].map;if(ce-=Dt,ce<0)Dt=Math.max(0,ee[Pn].g-100),on=!1;else try{ce="req"+ce+"_"||"";try{var qe=fr instanceof Map?fr:Object.entries(fr);for(const[Xr,Rr]of qe){let Ar=Rr;p(Rr)&&(Ar=ge(Rr)),Xn.push(ce+Xr+"="+encodeURIComponent(Ar))}}catch(Xr){throw Xn.push(ce+"type="+encodeURIComponent("_badmap")),Xr}}catch{C&&C(fr)}}if(on){qe=Xn.join("&");break e}}qe=void 0}return h=h.i.splice(0,_),v.G=h,qe}function Mu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Ue||j(),Le||(Ue(),Le=!0),A.add(v,h),h.A=0}}function Qi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Un(y(h.Da,h),Lu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Un(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Qa(this),Du(this))};function ec(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Du(h){h.g=new be(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=pe(h.na);Ke(v,"RID","rpc"),Ke(v,"SID",h.M),Ke(v,"AID",h.K),Ke(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ke(v,"TO",h.ia),Ke(v,"TYPE","xmlhttp"),Yi(h,v),h.u&&h.o&&Wi(v,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Ot(pe(v)),_.u=null,_.R=!0,xt(_,h)}s.Va=function(){this.C!=null&&(this.C=null,Qa(this),Qi(this),Rt(19))};function Vo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Pu(h,v){var _=null;if(h.g==v){Vo(h),ec(h),h.g=null;var C=2}else if(ye(h.h,v))_=v.G,st(h.h,v),C=1;else return;if(h.I!=0){if(v.o)if(C==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var ee=h.D;C=Xt(),Ye(C,new an(C,_)),Yr(h)}else Mu(h);else if(ee=v.m,ee==3||ee==0&&v.X>0||!(C==1&&Oo(h,v)||C==2&&Qi(h)))switch(_&&_.length>0&&(v=h.h,v.i=v.i.concat(_)),ee){case 1:Qr(h,5);break;case 4:Qr(h,10);break;case 3:Qr(h,6);break;default:Qr(h,2)}}}function Lu(h,v){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*v}function Qr(h,v){if(h.j.info("Error code "+v),v==2){var _=y(h.bb,h),C=h.Ua;const ee=!C;C=new Z(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ke(C,"https"),Ot(C),ee?Bs(C.toString(),_):Yl(C.toString(),_)}else Rt(2);h.I=0,h.l&&h.l.pa(v),Ou(h),Lo(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Ou(h){if(h.I=0,h.ja=[],h.l){const v=Ze(h.h);(v.length!=0||h.i.length!=0)&&(W(h.ja,v),W(h.ja,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.oa()}}function Vu(h,v,_){var C=_ instanceof Z?pe(_):new Z(_);if(C.g!="")v&&(C.g=v+"."+C.g),Fe(C,C.u);else{var ee=d.location;C=ee.protocol,v=v?v+"."+ee.hostname:ee.hostname,ee=+ee.port;const ce=new Z(null);C&&ke(ce,C),v&&(ce.g=v),ee&&Fe(ce,ee),_&&(ce.h=_),C=ce}return _=h.G,v=h.wa,_&&v&&Ke(C,_,v),Ke(C,"VER",h.ka),Yi(h,C),C}function Bu(h,v,_){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new pn(new Wr({ab:_})):new pn(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uu(){}s=Uu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Xa(){}Xa.prototype.g=function(h,v){return new Us(h,v)};function Us(h,v){lt.call(this),this.g=new Ya(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!I(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ya(this)}E(Us,lt),Us.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Us.prototype.close=function(){Jl(this.g)},Us.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=ge(h),h=_);v.i.push(new T(v.Ya++,h)),v.I==3&&Yr(v)},Us.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,Us.Z.N.call(this)};function zu(h){nt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const _ in v){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}E(zu,nt);function Fu(){Ge.call(this),this.status=1}E(Fu,Ge);function ya(h){this.g=h}E(ya,Uu),ya.prototype.ra=function(){Ye(this.g,"a")},ya.prototype.qa=function(h){Ye(this.g,new zu(h))},ya.prototype.pa=function(h){Ye(this.g,new Fu)},ya.prototype.oa=function(){Ye(this.g,"b")},Xa.prototype.createWebChannel=Xa.prototype.g,Us.prototype.send=Us.prototype.o,Us.prototype.open=Us.prototype.m,Us.prototype.close=Us.prototype.close,jw=function(){return new Xa},Ew=function(){return Xt()},Tw=$e,Zp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,dd=vs,Qn.COMPLETE="complete",kw=Qn,Qe.EventType=Be,Be.OPEN="a",Be.CLOSE="b",Be.ERROR="c",Be.MESSAGE="d",lt.prototype.listen=lt.prototype.J,Wc=Qe,pn.prototype.listenOnce=pn.prototype.K,pn.prototype.getLastError=pn.prototype.Ha,pn.prototype.getLastErrorCode=pn.prototype.ya,pn.prototype.getStatus=pn.prototype.ca,pn.prototype.getResponseJson=pn.prototype.La,pn.prototype.getResponseText=pn.prototype.la,pn.prototype.send=pn.prototype.ea,pn.prototype.setWithCredentials=pn.prototype.Fa,_w=pn}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});class Ps{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ps.UNAUTHENTICATED=new Ps(null),Ps.GOOGLE_CREDENTIALS=new Ps("google-credentials-uid"),Ps.FIRST_PARTY=new Ps("first-party-uid"),Ps.MOCK_USER=new Ps("mock-user");let Hl="12.8.0";function B4(s){Hl=s}const So=new Sg("@firebase/firestore");function bl(){return So.logLevel}function at(s,...e){if(So.logLevel<=Kt.DEBUG){const n=e.map(Ug);So.debug(`Firestore (${Hl}): ${s}`,...n)}}function Fa(s,...e){if(So.logLevel<=Kt.ERROR){const n=e.map(Ug);So.error(`Firestore (${Hl}): ${s}`,...n)}}function Ml(s,...e){if(So.logLevel<=Kt.WARN){const n=e.map(Ug);So.warn(`Firestore (${Hl}): ${s}`,...n)}}function Ug(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Et(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Sw(s,i,n)}function Sw(s,e,n){let i=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Fa(i),new Error(i)}function hn(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||Sw(e,l,i)}function Mt(s,e){return s}const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends fa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Va{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Nw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ps.UNAUTHENTICATED)))}shutdown(){}}class z4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class F4{constructor(e){this.t=e,this.currentUser=Ps.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){hn(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new Va;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Va,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Va)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(hn(typeof i.accessToken=="string",31837,{l:i}),new Nw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return hn(e===null||typeof e=="string",2055,{h:e}),new Ps(e)}}class q4{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ps.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class H4{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new q4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ps.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class K1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){hn(this.o===void 0,3512);const i=u=>{u.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,at("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new K1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(hn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new K1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function W4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class zg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=W4(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function Yt(s,e){return s<e?-1:s>e?1:0}function eg(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return wp(l)===wp(u)?Yt(l,u):wp(l)?1:-1}return Yt(s.length,e.length)}const G4=55296,K4=57343;function wp(s){const e=s.charCodeAt(0);return e>=G4&&e<=K4}function Dl(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}const Y1="__name__";class sa{constructor(e,n,i){n===void 0?n=0:n>e.length&&Et(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Et(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return sa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sa?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=sa.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Yt(e.length,n.length)}static compareSegments(e,n){const i=sa.isNumericId(e),l=sa.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?sa.extractNumericId(e).compare(sa.extractNumericId(n)):eg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ai.fromString(e.substring(4,e.length-2))}}class jn extends sa{construct(e,n,i){return new jn(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Je(Te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new jn(n)}static emptyPath(){return new jn([])}}const Y4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends sa{construct(e,n,i){return new Ns(e,n,i)}static isValidIdentifier(e){return Y4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Y1}static keyField(){return new Ns([Y1])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Je(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Je(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Je(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(i+=p,l++):(u(),l++)}if(u(),d)throw new Je(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ns(n)}static emptyPath(){return new Ns([])}}class yt{constructor(e){this.path=e}static fromPath(e){return new yt(jn.fromString(e))}static fromName(e){return new yt(jn.fromString(e).popFirst(5))}static empty(){return new yt(jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return jn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new jn(e.slice()))}}function Cw(s,e,n){if(!n)throw new Je(Te.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Q4(s,e,n,i){if(e===!0&&i===!0)throw new Je(Te.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Q1(s){if(!yt.isDocumentKey(s))throw new Je(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function X1(s){if(yt.isDocumentKey(s))throw new Je(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Rw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Gd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Et(12329,{type:typeof s})}function zr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Je(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gd(s);throw new Je(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function X4(s,e){if(e<=0)throw new Je(Te.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function fs(s,e){const n={typeString:s};return e&&(n.value=e),n}function Tu(s,e){if(!Rw(s))throw new Je(Te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(l&&typeof d!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Je(Te.INVALID_ARGUMENT,n);return!0}const J1=-62135596800,Z1=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Z1);return new dt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Je(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Je(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<J1)throw new Je(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z1}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-J1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:fs("string",dt._jsonSchemaVersion),seconds:fs("number"),nanoseconds:fs("number")};class At{static fromTimestamp(e){return new At(e)}static min(){return new At(new dt(0,0))}static max(){return new At(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ou=-1;function J4(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=At.fromTimestamp(i===1e9?new dt(n+1,0):new dt(n,i));return new Di(l,yt.empty(),e)}function Z4(s){return new Di(s.readTime,s.key,ou)}class Di{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Di(At.min(),yt.empty(),ou)}static max(){return new Di(At.max(),yt.empty(),ou)}}function eR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=yt.comparator(s.documentKey,e.documentKey),n!==0?n:Yt(s.largestBatchId,e.largestBatchId))}const tR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $l(s){if(s.code!==Te.FAILED_PRECONDITION||s.message!==tR)throw s;at("LocalStore","Unexpectedly lost primary lease")}class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Re(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Re?n:Re.resolve(n)}catch(n){return Re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Re.reject(n)}static resolve(e){return new Re(((n,i)=>{n(e)}))}static reject(e){return new Re(((n,i)=>{i(e)}))}static waitFor(e){return new Re(((n,i)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&n()}),(g=>i(g)))})),d=!0,u===l&&n()}))}static or(e){let n=Re.resolve(!1);for(const i of e)n=n.next((l=>l?Re.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new Re(((i,l)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((w=>{d[y]=w,++p,p===u&&i(d)}),(w=>l(w)))}}))}static doWhile(e,n){return new Re(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function sR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wl(s){return s.name==="IndexedDbTransactionError"}class Kd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kd.ce=-1;const Fg=-1;function Yd(s){return s==null}function Nd(s){return s===0&&1/s==-1/0}function rR(s){return typeof s=="number"&&Number.isInteger(s)&&!Nd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Aw="";function aR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=ex(e)),e=iR(s.get(n),e);return ex(e)}function iR(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case Aw:n+="";break;default:n+=u}}return n}function ex(s){return s+Aw+""}function tx(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Fi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Iw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class qn{constructor(e,n){this.comparator=e,this.root=n||Ss.EMPTY}insert(e,n){return new qn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ss.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ss.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yh(this.root,e,this.comparator,!0)}}class Yh{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ss{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??Ss.RED,this.left=l??Ss.EMPTY,this.right=u??Ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new Ss(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Ss.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Et(27949);return e+(this.isRed()?0:1)}}Ss.EMPTY=null,Ss.RED=!0,Ss.BLACK=!1;Ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Et(57766)}get value(){throw Et(16141)}get color(){throw Et(16727)}get left(){throw Et(29726)}get right(){throw Et(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new Ss(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ys{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nx(this.data.getIterator())}getIteratorFrom(e){return new nx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof ys)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ys(this.comparator);return n.data=e,n}}class nx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class cr{constructor(e){this.fields=e,e.sort(Ns.comparator)}static empty(){return new cr([])}unionWith(e){let n=new ys(Ns.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class Mw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Mw("Invalid base64 string: "+u):u}})(e);return new Cs(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new Cs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cs.EMPTY_BYTE_STRING=new Cs("");const oR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(s){if(hn(!!s,39018),typeof s=="string"){let e=0;const n=oR.exec(s);if(hn(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:es(s.seconds),nanos:es(s.nanos)}}function es(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Li(s){return typeof s=="string"?Cs.fromBase64String(s):Cs.fromUint8Array(s)}const Dw="server_timestamp",Pw="__type__",Lw="__previous_value__",Ow="__local_write_time__";function qg(s){return(s?.mapValue?.fields||{})[Pw]?.stringValue===Dw}function Qd(s){const e=s.mapValue.fields[Lw];return qg(e)?Qd(e):e}function lu(s){const e=Pi(s.mapValue.fields[Ow].timestampValue);return new dt(e.seconds,e.nanos)}class lR{constructor(e,n,i,l,u,d,p,g,y,w,E){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w,this.apiKey=E}}const Cd="(default)";class cu{constructor(e,n){this.projectId=e,this.database=n||Cd}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===Cd}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}function cR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Je(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(s.options.projectId,e)}const Vw="__type__",uR="__max__",Qh={mapValue:{}},Bw="__vector__",Rd="value";function Oi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?qg(s)?4:dR(s)?9007199254740991:hR(s)?10:11:Et(28295,{value:s})}function ha(s,e){if(s===e)return!0;const n=Oi(s);if(n!==Oi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return lu(s).isEqual(lu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Pi(l.timestampValue),p=Pi(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Li(l.bytesValue).isEqual(Li(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return es(l.geoPointValue.latitude)===es(u.geoPointValue.latitude)&&es(l.geoPointValue.longitude)===es(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return es(l.integerValue)===es(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=es(l.doubleValue),p=es(u.doubleValue);return d===p?Nd(d)===Nd(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return Dl(s.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(tx(d)!==tx(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!ha(d[g],p[g])))return!1;return!0})(s,e);default:return Et(52216,{left:s})}}function uu(s,e){return(s.values||[]).find((n=>ha(n,e)))!==void 0}function Pl(s,e){if(s===e)return 0;const n=Oi(s),i=Oi(e);if(n!==i)return Yt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yt(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=es(u.integerValue||u.doubleValue),g=es(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return sx(s.timestampValue,e.timestampValue);case 4:return sx(lu(s),lu(e));case 5:return eg(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Li(u),g=Li(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=Yt(p[y],g[y]);if(w!==0)return w}return Yt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=Yt(es(u.latitude),es(d.latitude));return p!==0?p:Yt(es(u.longitude),es(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return rx(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[Rd]?.arrayValue,w=g[Rd]?.arrayValue,E=Yt(y?.values?.length||0,w?.values?.length||0);return E!==0?E:rx(y,w)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Qh.mapValue&&d===Qh.mapValue)return 0;if(u===Qh.mapValue)return 1;if(d===Qh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let E=0;E<g.length&&E<w.length;++E){const S=eg(g[E],w[E]);if(S!==0)return S;const L=Pl(p[g[E]],y[w[E]]);if(L!==0)return L}return Yt(g.length,w.length)})(s.mapValue,e.mapValue);default:throw Et(23264,{he:n})}}function sx(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Yt(s,e);const n=Pi(s),i=Pi(e),l=Yt(n.seconds,i.seconds);return l!==0?l:Yt(n.nanos,i.nanos)}function rx(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=Pl(n[l],i[l]);if(u)return u}return Yt(n.length,i.length)}function Ll(s){return tg(s)}function tg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Pi(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Li(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return yt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=tg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const d of i)u?u=!1:l+=",",l+=`${d}:${tg(n.fields[d])}`;return l+"}"})(s.mapValue):Et(61005,{value:s})}function fd(s){switch(Oi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qd(s);return e?16+fd(e):16;case 5:return 2*s.stringValue.length;case 6:return Li(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+fd(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return Fi(i.fields,((u,d)=>{l+=u.length+fd(d)})),l})(s.mapValue);default:throw Et(13486,{value:s})}}function ax(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function ng(s){return!!s&&"integerValue"in s}function Hg(s){return!!s&&"arrayValue"in s}function ix(s){return!!s&&"nullValue"in s}function ox(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function md(s){return!!s&&"mapValue"in s}function hR(s){return(s?.mapValue?.fields||{})[Vw]?.stringValue===Bw}function Jc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Fi(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Jc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jc(s.arrayValue.values[n]);return e}return{...s}}function dR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===uR}class Xs{constructor(e){this.value=e}static empty(){return new Xs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!md(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(n)}setAll(e){let n=Ns.emptyPath(),i={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}d?i[p.lastSegment()]=Jc(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());md(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];md(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){Fi(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new Xs(Jc(this.value))}}function Uw(s){const e=[];return Fi(s.fields,((n,i)=>{const l=new Ns([n]);if(md(i)){const u=Uw(i.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new cr(e)}class Ls{constructor(e,n,i,l,u,d,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Ls(e,0,At.min(),At.min(),At.min(),Xs.empty(),0)}static newFoundDocument(e,n,i,l){return new Ls(e,1,n,At.min(),i,l,0)}static newNoDocument(e,n){return new Ls(e,2,n,At.min(),At.min(),Xs.empty(),0)}static newUnknownDocument(e,n){return new Ls(e,3,n,At.min(),At.min(),Xs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ad{constructor(e,n){this.position=e,this.inclusive=n}}function lx(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],d=s.position[l];if(u.field.isKeyField()?i=yt.comparator(yt.fromName(d.referenceValue),n.key):i=Pl(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function cx(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ha(s.position[n],e.position[n]))return!1;return!0}class hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function fR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class zw{}class ds extends zw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new pR(e,n,i):n==="array-contains"?new vR(e,i):n==="in"?new bR(e,i):n==="not-in"?new xR(e,i):n==="array-contains-any"?new wR(e,i):new ds(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new gR(e,i):new yR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Pl(n,this.value)):n!==null&&Oi(this.value)===Oi(n)&&this.matchesComparison(Pl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fr extends zw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Fr(e,n)}matches(e){return Fw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fw(s){return s.op==="and"}function qw(s){return mR(s)&&Fw(s)}function mR(s){for(const e of s.filters)if(e instanceof Fr)return!1;return!0}function sg(s){if(s instanceof ds)return s.field.canonicalString()+s.op.toString()+Ll(s.value);if(qw(s))return s.filters.map((e=>sg(e))).join(",");{const e=s.filters.map((n=>sg(n))).join(",");return`${s.op}(${e})`}}function Hw(s,e){return s instanceof ds?(function(i,l){return l instanceof ds&&i.op===l.op&&i.field.isEqual(l.field)&&ha(i.value,l.value)})(s,e):s instanceof Fr?(function(i,l){return l instanceof Fr&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,d,p)=>u&&Hw(d,l.filters[p])),!0):!1})(s,e):void Et(19439)}function $w(s){return s instanceof ds?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ll(n.value)}`})(s):s instanceof Fr?(function(n){return n.op.toString()+" {"+n.getFilters().map($w).join(" ,")+"}"})(s):"Filter"}class pR extends ds{constructor(e,n,i){super(e,n,i),this.key=yt.fromName(i.referenceValue)}matches(e){const n=yt.comparator(e.key,this.key);return this.matchesComparison(n)}}class gR extends ds{constructor(e,n){super(e,"in",n),this.keys=Ww("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yR extends ds{constructor(e,n){super(e,"not-in",n),this.keys=Ww("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Ww(s,e){return(e.arrayValue?.values||[]).map((n=>yt.fromName(n.referenceValue)))}class vR extends ds{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hg(n)&&uu(n.arrayValue,this.value)}}class bR extends ds{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uu(this.value.arrayValue,n)}}class xR extends ds{constructor(e,n){super(e,"not-in",n)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uu(this.value.arrayValue,n)}}class wR extends ds{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>uu(this.value.arrayValue,i)))}}class _R{constructor(e,n=null,i=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function ux(s,e=null,n=[],i=[],l=null,u=null,d=null){return new _R(s,e,n,i,l,u,d)}function $g(s){const e=Mt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>sg(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Yd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ll(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ll(i))).join(",")),e.Te=n}return e.Te}function Wg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!fR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Hw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!cx(s.startAt,e.startAt)&&cx(s.endAt,e.endAt)}function rg(s){return yt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Gl{constructor(e,n=null,i=[],l=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function kR(s,e,n,i,l,u,d,p){return new Gl(s,e,n,i,l,u,d,p)}function Gg(s){return new Gl(s)}function hx(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function TR(s){return yt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Gw(s){return s.collectionGroup!==null}function Zc(s){const e=Mt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new ys(Ns.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new hu(u,i))})),n.has(Ns.keyField().canonicalString())||e.Ie.push(new hu(Ns.keyField(),i))}return e.Ie}function la(s){const e=Mt(s);return e.Ee||(e.Ee=ER(e,Zc(s))),e.Ee}function ER(s,e){if(s.limitType==="F")return ux(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new hu(l.field,u)}));const n=s.endAt?new Ad(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Ad(s.startAt.position,s.startAt.inclusive):null;return ux(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function ag(s,e){const n=s.filters.concat([e]);return new Gl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function jR(s,e){const n=s.explicitOrderBy.concat([e]);return new Gl(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Id(s,e,n){return new Gl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Xd(s,e){return Wg(la(s),la(e))&&s.limitType===e.limitType}function Kw(s){return`${$g(la(s))}|lt:${s.limitType}`}function xl(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>$w(l))).join(", ")}]`),Yd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Ll(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Ll(l))).join(",")),`Target(${i})`})(la(s))}; limitType=${s.limitType})`}function Jd(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):yt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of Zc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(d,p,g){const y=lx(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,Zc(i),l)||i.endAt&&!(function(d,p,g){const y=lx(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,Zc(i),l))})(s,e)}function SR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Yw(s){return(e,n)=>{let i=!1;for(const l of Zc(s)){const u=NR(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function NR(s,e,n){const i=s.field.isKeyField()?yt.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Pl(g,y):Et(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Et(19790,{direction:s.dir})}}class Io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return Iw(this.inner)}size(){return this.innerSize}}const CR=new qn(yt.comparator);function qa(){return CR}const Qw=new qn(yt.comparator);function Gc(...s){let e=Qw;for(const n of s)e=e.insert(n.key,n);return e}function Xw(s){let e=Qw;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function yo(){return eu()}function Jw(){return eu()}function eu(){return new Io((s=>s.toString()),((s,e)=>s.isEqual(e)))}const RR=new qn(yt.comparator),AR=new ys(yt.comparator);function Qt(...s){let e=AR;for(const n of s)e=e.add(n);return e}const IR=new ys(Yt);function MR(){return IR}function Kg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function Zw(s){return{integerValue:""+s}}function e_(s,e){return rR(e)?Zw(e):Kg(s,e)}class Zd{constructor(){this._=void 0}}function DR(s,e,n){return s instanceof du?(function(l,u){const d={fields:{[Pw]:{stringValue:Dw},[Ow]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&qg(u)&&(u=Qd(u)),u&&(d.fields[Lw]=u),{mapValue:d}})(n,e):s instanceof fu?n_(s,e):s instanceof mu?s_(s,e):(function(l,u){const d=t_(l,u),p=dx(d)+dx(l.Ae);return ng(d)&&ng(l.Ae)?Zw(p):Kg(l.serializer,p)})(s,e)}function PR(s,e,n){return s instanceof fu?n_(s,e):s instanceof mu?s_(s,e):n}function t_(s,e){return s instanceof pu?(function(i){return ng(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class du extends Zd{}class fu extends Zd{constructor(e){super(),this.elements=e}}function n_(s,e){const n=r_(e);for(const i of s.elements)n.some((l=>ha(l,i)))||n.push(i);return{arrayValue:{values:n}}}class mu extends Zd{constructor(e){super(),this.elements=e}}function s_(s,e){let n=r_(e);for(const i of s.elements)n=n.filter((l=>!ha(l,i)));return{arrayValue:{values:n}}}class pu extends Zd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function dx(s){return es(s.integerValue||s.doubleValue)}function r_(s){return Hg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class a_{constructor(e,n){this.field=e,this.transform=n}}function LR(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof fu&&l instanceof fu||i instanceof mu&&l instanceof mu?Dl(i.elements,l.elements,ha):i instanceof pu&&l instanceof pu?ha(i.Ae,l.Ae):i instanceof du&&l instanceof du})(s.transform,e.transform)}class OR{constructor(e,n){this.version=e,this.transformResults=n}}class kr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ef{}function i_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Yg(s.key,kr.none()):new Eu(s.key,s.data,kr.none());{const n=s.data,i=Xs.empty();let l=new ys(Ns.comparator);for(let u of e.fields)if(!l.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),l=l.add(u)}return new qi(s.key,i,new cr(l.toArray()),kr.none())}}function VR(s,e,n){s instanceof Eu?(function(l,u,d){const p=l.value.clone(),g=mx(l.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof qi?(function(l,u,d){if(!pd(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=mx(l.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(o_(l)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function tu(s,e,n,i){return s instanceof Eu?(function(u,d,p,g){if(!pd(u.precondition,d))return p;const y=u.value.clone(),w=px(u.fieldTransforms,g,d);return y.setAll(w),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof qi?(function(u,d,p,g){if(!pd(u.precondition,d))return p;const y=px(u.fieldTransforms,g,d),w=d.data;return w.setAll(o_(u)),w.setAll(y),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(s,e,n,i):(function(u,d,p){return pd(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function BR(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=t_(i.transform,l||null);u!=null&&(n===null&&(n=Xs.empty()),n.set(i.field,u))}return n||null}function fx(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Dl(i,l,((u,d)=>LR(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Eu extends ef{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class qi extends ef{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function o_(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function mx(s,e,n){const i=new Map;hn(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],d=u.transform,p=e.data.field(u.field);i.set(u.field,PR(d,p,n[l]))}return i}function px(s,e,n){const i=new Map;for(const l of s){const u=l.transform,d=n.data.field(l.field);i.set(l.field,DR(u,d,e))}return i}class Yg extends ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UR extends ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zR{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&VR(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=tu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=tu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Jw();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(l.key)?null:p;const g=i_(d,p);g!==null&&i.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(At.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qt())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,((n,i)=>fx(n,i)))&&Dl(this.baseMutations,e.baseMutations,((n,i)=>fx(n,i)))}}class Qg{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){hn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return RR})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,i[d].version);return new Qg(e,n,i,l)}}class FR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class qR{constructor(e,n){this.count=e,this.unchangedNames=n}}var hs,en;function HR(s){switch(s){case Te.OK:return Et(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return Et(15467,{code:s})}}function l_(s){if(s===void 0)return Fa("GRPC error has no .code"),Te.UNKNOWN;switch(s){case hs.OK:return Te.OK;case hs.CANCELLED:return Te.CANCELLED;case hs.UNKNOWN:return Te.UNKNOWN;case hs.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case hs.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case hs.INTERNAL:return Te.INTERNAL;case hs.UNAVAILABLE:return Te.UNAVAILABLE;case hs.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case hs.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case hs.NOT_FOUND:return Te.NOT_FOUND;case hs.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case hs.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case hs.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case hs.ABORTED:return Te.ABORTED;case hs.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case hs.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case hs.DATA_LOSS:return Te.DATA_LOSS;default:return Et(39323,{code:s})}}(en=hs||(hs={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";function $R(){return new TextEncoder}const WR=new Ai([4294967295,4294967295],0);function gx(s){const e=$R().encode(s),n=new ww;return n.update(e),new Uint8Array(n.digest())}function yx(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ai([n,i],0),new Ai([l,u],0)]}class Xg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Kc(`Invalid padding: ${n}`);if(i<0)throw new Kc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Kc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Kc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ai.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Ai.fromNumber(i)));return l.compare(WR)===1&&(l=new Ai([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=gx(e),[i,l]=yx(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);if(!this.we(d))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Xg(u,l,n);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=gx(e),[i,l]=yx(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);this.be(d)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tf{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new tf(At.min(),l,new qn(Yt),qa(),Qt())}}class ju{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ju(i,n,Qt(),Qt(),Qt())}}class gd{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class c_{constructor(e,n){this.targetId=e,this.Ce=n}}class u_{constructor(e,n,i=Cs.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class vx{constructor(){this.ve=0,this.Fe=bx(),this.Me=Cs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qt(),n=Qt(),i=Qt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:Et(38017,{changeType:u})}})),new ju(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=bx()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,hn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class GR{constructor(e){this.Ge=e,this.ze=new Map,this.je=qa(),this.He=Xh(),this.Je=Xh(),this.Ze=new qn(Yt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Et(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(rg(u))if(i===0){const d=new yt(u.path);this.et(n,d,Ls.newNoDocument(d,At.min()))}else hn(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let d,p;try{d=Li(i).toUint8Array()}catch(g){if(g instanceof Mw)return Ml("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Xg(d,l,u)}catch(g){return Ml(g instanceof Kc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&rg(p.target)){const g=new yt(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Ls.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let i=Qt();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new tf(e,n,this.Ze,this.je,i);return this.je=qa(),this.He=Xh(),this.Je=Xh(),this.Ze=new qn(Yt),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new vx,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ys(Yt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ys(Yt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||at("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xh(){return new qn(yt.comparator)}function bx(){return new qn(yt.comparator)}const KR={asc:"ASCENDING",desc:"DESCENDING"},YR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QR={and:"AND",or:"OR"};class XR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ig(s,e){return s.useProto3Json||Yd(e)?e:{value:e}}function Md(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function JR(s,e){return Md(s,e.toTimestamp())}function ca(s){return hn(!!s,49232),At.fromTimestamp((function(n){const i=Pi(n);return new dt(i.seconds,i.nanos)})(s))}function Jg(s,e){return og(s,e).canonicalString()}function og(s,e){const n=(function(l){return new jn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function d_(s){const e=jn.fromString(s);return hn(y_(e),10190,{key:e.toString()}),e}function lg(s,e){return Jg(s.databaseId,e.path)}function _p(s,e){const n=d_(e);if(n.get(1)!==s.databaseId.projectId)throw new Je(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Je(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new yt(m_(n))}function f_(s,e){return Jg(s.databaseId,e)}function ZR(s){const e=d_(s);return e.length===4?jn.emptyPath():m_(e)}function cg(s){return new jn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function m_(s){return hn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function xx(s,e,n){return{name:lg(s,e),fields:n.value.mapValue.fields}}function eA(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Et(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,w){return y.useProto3Json?(hn(w===void 0||typeof w=="string",58123),Cs.fromBase64String(w||"")):(hn(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Cs.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const w=y.code===void 0?Te.UNKNOWN:l_(y.code);return new Je(w,y.message||"")})(d);n=new u_(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=_p(s,i.document.name),u=ca(i.document.updateTime),d=i.document.createTime?ca(i.document.createTime):At.min(),p=new Xs({mapValue:{fields:i.document.fields}}),g=Ls.newFoundDocument(l,u,d,p),y=i.targetIds||[],w=i.removedTargetIds||[];n=new gd(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=_p(s,i.document),u=i.readTime?ca(i.readTime):At.min(),d=Ls.newNoDocument(l,u),p=i.removedTargetIds||[];n=new gd([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=_p(s,i.document),u=i.removedTargetIds||[];n=new gd([],u,l,null)}else{if(!("filter"in e))return Et(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,d=new qR(l,u),p=i.targetId;n=new c_(p,d)}}return n}function tA(s,e){let n;if(e instanceof Eu)n={update:xx(s,e.key,e.value)};else if(e instanceof Yg)n={delete:lg(s,e.key)};else if(e instanceof qi)n={update:xx(s,e.key,e.data),updateMask:uA(e.fieldMask)};else{if(!(e instanceof UR))return Et(16599,{dt:e.type});n={verify:lg(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const p=d.transform;if(p instanceof du)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof fu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof mu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof pu)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Et(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:JR(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Et(27497)})(s,e.precondition)),n}function nA(s,e){return s&&s.length>0?(hn(e!==void 0,14353),s.map((n=>(function(l,u){let d=l.updateTime?ca(l.updateTime):ca(u);return d.isEqual(At.min())&&(d=ca(u)),new OR(d,l.transformResults||[])})(n,e)))):[]}function sA(s,e){return{documents:[f_(s,e.path)]}}function rA(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=f_(s,l);const u=(function(y){if(y.length!==0)return g_(Fr.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((w=>(function(S){return{field:wl(S.field),direction:oA(S.dir)}})(w)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=ig(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function aA(s){let e=ZR(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){hn(i===1,65062);const w=n.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let u=[];n.where&&(u=(function(E){const S=p_(E);return S instanceof Fr&&qw(S)?S.getFilters():[S]})(n.where));let d=[];n.orderBy&&(d=(function(E){return E.map((S=>(function(W){return new hu(_l(W.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(S)))})(n.orderBy));let p=null;n.limit&&(p=(function(E){let S;return S=typeof E=="object"?E.value:E,Yd(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(E){const S=!!E.before,L=E.values||[];return new Ad(L,S)})(n.startAt));let y=null;return n.endAt&&(y=(function(E){const S=!E.before,L=E.values||[];return new Ad(L,S)})(n.endAt)),kR(e,l,d,u,p,"F",g,y)}function iA(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function p_(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=_l(n.unaryFilter.field);return ds.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=_l(n.unaryFilter.field);return ds.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=_l(n.unaryFilter.field);return ds.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=_l(n.unaryFilter.field);return ds.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Et(61313);default:return Et(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ds.create(_l(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Et(58110);default:return Et(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Fr.create(n.compositeFilter.filters.map((i=>p_(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Et(1026)}})(n.compositeFilter.op))})(s):Et(30097,{filter:s})}function oA(s){return KR[s]}function lA(s){return YR[s]}function cA(s){return QR[s]}function wl(s){return{fieldPath:s.canonicalString()}}function _l(s){return Ns.fromServerFormat(s.fieldPath)}function g_(s){return s instanceof ds?(function(n){if(n.op==="=="){if(ox(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NAN"}};if(ix(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ox(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NAN"}};if(ix(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(n.field),op:lA(n.op),value:n.value}}})(s):s instanceof Fr?(function(n){const i=n.getFilters().map((l=>g_(l)));return i.length===1?i[0]:{compositeFilter:{op:cA(n.op),filters:i}}})(s):Et(54877,{filter:s})}function uA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function y_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function v_(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ni{constructor(e,n,i,l,u=At.min(),d=At.min(),p=Cs.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class hA{constructor(e){this.yt=e}}function dA(s){const e=aA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Id(e,e.limit,"L"):e}class fA{constructor(){this.Sn=new mA}addToCollectionParentIndex(e,n){return this.Sn.add(n),Re.resolve()}getCollectionParents(e,n){return Re.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Re.resolve()}deleteFieldIndex(e,n){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,n){return Re.resolve()}getDocumentsMatchingTarget(e,n){return Re.resolve(null)}getIndexType(e,n){return Re.resolve(0)}getFieldIndexes(e,n){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,n){return Re.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,n){return Re.resolve(Di.min())}updateCollectionGroup(e,n,i){return Re.resolve()}updateIndexEntries(e,n){return Re.resolve()}}class mA{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new ys(jn.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new ys(jn.comparator)).toArray()}}const wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},b_=41943040;class Qs{static withCacheSize(e){return new Qs(e,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Qs.DEFAULT_COLLECTION_PERCENTILE=10,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qs.DEFAULT=new Qs(b_,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qs.DISABLED=new Qs(-1,0,0);class Ol{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ol(0)}static ar(){return new Ol(-1)}}const _x="LruGarbageCollector",pA=1048576;function kx([s,e],[n,i]){const l=Yt(s,n);return l===0?Yt(e,i):l}class gA{constructor(e){this.Pr=e,this.buffer=new ys(kx),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();kx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yA{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){at(_x,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wl(n)?at(_x,"Ignoring IndexedDB error during garbage collection: ",n):await $l(n)}await this.Ar(3e5)}))}}class vA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return Re.resolve(Kd.ce);const i=new gA(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(wx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wx):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,u,d,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,d=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,n)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),bl()<=Kt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-w}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function bA(s,e){return new vA(s,e)}class xA{constructor(){this.changes=new Io((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ls.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Re.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class _A{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&tu(i.mutation,l,cr.empty(),dt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Qt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Qt()){const l=yo();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let d=Gc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=yo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Qt())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,i,l){let u=qa();const d=eu(),p=(function(){return eu()})();return n.forEach(((g,y)=>{const w=i.get(y.key);l.has(y.key)&&(w===void 0||w.mutation instanceof qi)?u=u.insert(y.key,y):w!==void 0?(d.set(y.key,w.mutation.getFieldMask()),tu(w.mutation,y,w.mutation.getFieldMask(),dt.now())):d.set(y.key,cr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,w)=>d.set(y,w))),n.forEach(((y,w)=>p.set(y,new wA(w,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=eu();let l=new qn(((d,p)=>d-p)),u=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let w=i.get(g)||cr.empty();w=p.applyToLocalView(y,w),i.set(g,w);const E=(l.get(p.batchId)||Qt()).add(g);l=l.insert(p.batchId,E)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,E=Jw();w.forEach((S=>{if(!u.has(S)){const L=i_(n.get(S),i.get(S));L!==null&&E.set(S,L),u=u.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,E))}return Re.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return TR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Gw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):Re.resolve(yo());let p=ou,g=u;return d.next((y=>Re.forEach(y,((w,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),u.get(w)?Re.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{g=g.insert(w,S)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Qt()))).next((w=>({batchId:p,changes:Xw(w)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new yt(n)).next((i=>{let l=Gc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let d=Gc();return this.indexManager.getCollectionParents(e,u).next((p=>Re.forEach(p,(g=>{const y=(function(E,S){return new Gl(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((w=>{w.forEach(((E,S)=>{d=d.insert(E,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((d=>{u.forEach(((g,y)=>{const w=y.getKey();d.get(w)===null&&(d=d.insert(w,Ls.newInvalidDocument(w)))}));let p=Gc();return d.forEach(((g,y)=>{const w=u.get(g);w!==void 0&&tu(w.mutation,y,cr.empty(),dt.now()),Jd(n,y)&&(p=p.insert(g,y))})),p}))}}class kA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Re.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ca(l.createTime)}})(n)),Re.resolve()}getNamedQuery(e,n){return Re.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:dA(l.bundledQuery),readTime:ca(l.readTime)}})(n)),Re.resolve()}}class TA{constructor(){this.overlays=new qn(yt.comparator),this.Lr=new Map}getOverlay(e,n){return Re.resolve(this.overlays.get(n))}getOverlays(e,n){const i=yo();return Re.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.bt(e,n,u)})),Re.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Re.resolve()}getOverlaysForCollection(e,n,i){const l=yo(),u=n.length+1,d=new yt(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Re.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new qn(((y,w)=>y-w));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let w=u.get(y.largestBatchId);w===null&&(w=yo(),u=u.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=yo(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>p.set(y,w))),!(p.size()>=l)););return Re.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new FR(n,i));let u=this.Lr.get(n);u===void 0&&(u=Qt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class EA{constructor(){this.sessionToken=Cs.EMPTY_BYTE_STRING}getSessionToken(e){return Re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Re.resolve()}}class Zg{constructor(){this.kr=new ys(ws.Kr),this.qr=new ys(ws.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new ws(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new ws(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new yt(new jn([])),i=new ws(n,e),l=new ws(n,e+1),u=[];return this.qr.forEachInRange([i,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new yt(new jn([])),i=new ws(n,e),l=new ws(n,e+1);let u=Qt();return this.qr.forEachInRange([i,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new ws(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ws{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return yt.comparator(e.key,n.key)||Yt(e.Hr,n.Hr)}static Ur(e,n){return Yt(e.Hr,n.Hr)||yt.comparator(e.key,n.key)}}class jA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ys(ws.Kr)}checkEmpty(e){return Re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new zR(u,n,i,l);this.mutationQueue.push(d);for(const p of l)this.Jr=this.Jr.add(new ws(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Re.resolve(d)}lookupMutationBatch(e,n){return Re.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),u=l<0?0:l;return Re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(this.mutationQueue.length===0?Fg:this.Yn-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ws(n,0),l=new ws(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(d=>{const p=this.Zr(d.Hr);u.push(p)})),Re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ys(Yt);return n.forEach((l=>{const u=new ws(l,0),d=new ws(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{i=i.add(p.Hr)}))})),Re.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;yt.isDocumentKey(u)||(u=u.child(""));const d=new ws(new yt(u),0);let p=new ys(Yt);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),d),Re.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){hn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Re.forEach(n.mutations,(l=>{const u=new ws(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new ws(n,0),l=this.Jr.firstAfterOrEqual(i);return Re.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Re.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class SA{constructor(e){this.ti=e,this.docs=(function(){return new qn(yt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,d=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Re.resolve(i?i.document.mutableCopy():Ls.newInvalidDocument(n))}getEntries(e,n){let i=qa();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Ls.newInvalidDocument(l))})),Re.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=qa();const d=n.path,p=new yt(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||eR(Z4(w),i)<=0||(l.has(w.key)||Jd(n,w))&&(u=u.insert(w.key,w.mutableCopy()))}return Re.resolve(u)}getAllFromCollectionGroup(e,n,i,l){Et(9500)}ni(e,n){return Re.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new NA(this)}getSize(e){return Re.resolve(this.size)}}class NA extends xA{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Re.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class CA{constructor(e){this.persistence=e,this.ri=new Io((n=>$g(n)),Wg),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.ii=0,this.si=new Zg,this.targetCount=0,this.oi=Ol._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),Re.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ol(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Re.resolve()}updateTargetData(e,n){return this.lr(n),Re.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Re.waitFor(u).next((()=>l))}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return Re.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),Re.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),Re.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Re.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return Re.resolve(i)}containsKey(e,n){return Re.resolve(this.si.containsKey(n))}}class x_{constructor(e,n){this._i={},this.overlays={},this.ai=new Kd(0),this.ui=!1,this.ui=!0,this.ci=new EA,this.referenceDelegate=e(this),this.li=new CA(this),this.indexManager=new fA,this.remoteDocumentCache=(function(l){return new SA(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new hA(n),this.Pi=new kA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new jA(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){at("MemoryPersistence","Starting transaction:",e);const l=new RA(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return Re.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class RA extends nR{constructor(e){super(),this.currentSequenceNumber=e}}class ey{constructor(e){this.persistence=e,this.Ri=new Zg,this.Ai=null}static Vi(e){return new ey(e)}get di(){if(this.Ai)return this.Ai;throw Et(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),Re.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),Re.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Re.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.di,(i=>{const l=yt.fromPath(i);return this.mi(e,l).next((u=>{u||n.removeEntry(l,At.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Re.or([()=>Re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Dd{constructor(e,n){this.persistence=e,this.fi=new Io((i=>aR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=bA(this,n)}static Vi(e,n){return new Dd(e,n)}Ti(){}Ii(e){return Re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return Re.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Re.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(i++,u.removeEntry(d,At.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Re.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Re.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Re.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Re.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=fd(e.data.value)),n}wr(e,n,i){return Re.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return Re.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ty{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=Qt(),l=Qt();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new ty(e,n.fromCache,i,l)}}class AA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return aS()?8:sR(Os())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,l,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new AA;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(bl()<=Kt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",xl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Re.resolve()):(bl()<=Kt.DEBUG&&at("QueryEngine","Query:",xl(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(bl()<=Kt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",xl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,la(n))):Re.resolve())}gs(e,n){if(hx(n))return Re.resolve(null);let i=la(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Id(n,null,"F"),i=la(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=Qt(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,d,g.readTime)?this.gs(e,Id(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,i,l){return hx(n)||l.isEqual(At.min())?Re.resolve(null):this.fs.getDocuments(e,i).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,i,l)?Re.resolve(null):(bl()<=Kt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),xl(n)),this.Ds(e,d,n,J4(l,ou)).next((p=>p)))}))}bs(e,n){let i=new ys(Yw(e));return n.forEach(((l,u)=>{Jd(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,i){return bl()<=Kt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",xl(n)),this.fs.getDocumentsMatchingQuery(e,n,Di.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const ny="LocalStore",MA=3e8;class DA{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new qn(Yt),this.Fs=new Io((u=>$g(u)),Wg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _A(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function PA(s,e,n,i){return new DA(s,e,n,i)}async function w_(s,e){const n=Mt(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],p=[];let g=Qt();for(const y of l){d.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of u){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function LA(s,e){const n=Mt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,w){const E=y.batch,S=E.keys();let L=Re.resolve();return S.forEach((W=>{L=L.next((()=>w.getEntry(g,W))).next((z=>{const O=y.docVersions.get(W);hn(O!==null,48541),z.version.compareTo(O)<0&&(E.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),w.addEntry(z)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(g,E)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Qt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function __(s){const e=Mt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function OA(s,e){const n=Mt(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((w,E)=>{const S=l.get(E);if(!S)return;p.push(n.li.removeMatchingKeys(u,w.removedDocuments,E).next((()=>n.li.addMatchingKeys(u,w.addedDocuments,E))));let L=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(Cs.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):w.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(w.resumeToken,i)),l=l.insert(E,L),(function(z,O,te){return z.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=MA?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(S,L,w)&&p.push(n.li.updateTargetData(u,L))}));let g=qa(),y=Qt();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,w))})),p.push(VA(u,d,e.documentUpdates).next((w=>{g=w.Bs,y=w.Ls}))),!i.isEqual(At.min())){const w=n.li.getLastRemoteSnapshotVersion(u).next((E=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(w)}return Re.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=l,u)))}function VA(s,e,n){let i=Qt(),l=Qt();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=qa();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(At.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):at(ny,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:l}}))}function BA(s,e){const n=Mt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Fg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function UA(s,e){const n=Mt(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((u=>u?(l=u,Re.resolve(l)):n.li.allocateTargetId(i).next((d=>(l=new Ni(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function ug(s,e,n){const i=Mt(s),l=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Wl(d))throw d;at(ny,`Failed to update sequence numbers for target ${e}: ${d}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function Tx(s,e,n){const i=Mt(s);let l=At.min(),u=Qt();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,w){const E=Mt(g),S=E.Fs.get(w);return S!==void 0?Re.resolve(E.vs.get(S)):E.li.getTargetData(y,w)})(i,d,la(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,n?l:At.min(),n?u:Qt()))).next((p=>(zA(i,SR(e),p),{documents:p,ks:u})))))}function zA(s,e,n){let i=s.Ms.get(e)||At.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class Ex{constructor(){this.activeTargetIds=MR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FA{constructor(){this.vo=new Ex,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ex,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qA{Mo(e){}shutdown(){}}const jx="ConnectivityMonitor";class Sx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){at(jx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){at(jx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Jh=null;function hg(){return Jh===null?Jh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jh++,"0x"+Jh.toString(16)}const kp="RestConnection",HA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class $A{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Cd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,u){const d=hg(),p=this.Qo(e,n.toUriEncodedString());at(kp,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),w=Ui(y);return this.zo(e,p,g,i,w).then((E=>(at(kp,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw Ml(kp,`RPC '${e}' ${d} failed with error: `,E,"url: ",p,"request:",i),E}))}jo(e,n,i,l,u,d){return this.Wo(e,n,i,l,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const i=HA[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class WA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Ds="WebChannelConnection",Uc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Sl extends $A{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Sl.c_){const e=Ew();Uc(e,Tw.STAT_EVENT,(n=>{n.stat===Zp.PROXY?at(Ds,"STAT_EVENT: detected buffering proxy"):n.stat===Zp.NOPROXY&&at(Ds,"STAT_EVENT: detected no buffering proxy")})),Sl.c_=!0}}zo(e,n,i,l,u){const d=hg();return new Promise(((p,g)=>{const y=new _w;y.setWithCredentials(!0),y.listenOnce(kw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case dd.NO_ERROR:const E=y.getResponseJson();at(Ds,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),p(E);break;case dd.TIMEOUT:at(Ds,`RPC '${e}' ${d} timed out`),g(new Je(Te.DEADLINE_EXCEEDED,"Request time out"));break;case dd.HTTP_ERROR:const S=y.getStatus();if(at(Ds,`RPC '${e}' ${d} failed with status:`,S,"response text:",y.getResponseText()),S>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const W=L?.error;if(W&&W.status&&W.message){const z=(function(te){const X=te.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(X)>=0?X:Te.UNKNOWN})(W.status);g(new Je(z,W.message))}else g(new Je(Te.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Je(Te.UNAVAILABLE,"Connection failed."));break;default:Et(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{at(Ds,`RPC '${e}' ${d} completed.`)}}));const w=JSON.stringify(l);at(Ds,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",w,i,15)}))}T_(e,n,i){const l=hg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const y=u.join("");at(Ds,`Creating RPC '${e}' stream ${l}: ${y}`,p);const w=d.createWebChannel(y,p);this.I_(w);let E=!1,S=!1;const L=new WA({Ho:W=>{S?at(Ds,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(E||(at(Ds,`Opening RPC '${e}' stream ${l} transport.`),w.open(),E=!0),at(Ds,`RPC '${e}' stream ${l} sending:`,W),w.send(W))},Jo:()=>w.close()});return Uc(w,Wc.EventType.OPEN,(()=>{S||(at(Ds,`RPC '${e}' stream ${l} transport opened.`),L.i_())})),Uc(w,Wc.EventType.CLOSE,(()=>{S||(S=!0,at(Ds,`RPC '${e}' stream ${l} transport closed`),L.o_(),this.E_(w))})),Uc(w,Wc.EventType.ERROR,(W=>{S||(S=!0,Ml(Ds,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),L.o_(new Je(Te.UNAVAILABLE,"The operation could not be completed")))})),Uc(w,Wc.EventType.MESSAGE,(W=>{if(!S){const z=W.data[0];hn(!!z,16349);const O=z,te=O?.error||O[0]?.error;if(te){at(Ds,`RPC '${e}' stream ${l} received error:`,te);const X=te.status;let he=(function(Le){const A=hs[Le];if(A!==void 0)return l_(A)})(X),Se=te.message;he===void 0&&(he=Te.INTERNAL,Se="Unknown error status: "+X+" with message "+te.message),S=!0,L.o_(new Je(he,Se)),w.close()}else at(Ds,`RPC '${e}' stream ${l} received:`,z),L.__(z)}})),Sl.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jw()}}function GA(s){return new Sl(s)}function Tp(){return typeof document<"u"?document:null}function nf(s){return new XR(s,!0)}Sl.c_=!1;class k_{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&at("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Nx="PersistentStream";class T_{constructor(e,n,i,l,u,d,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new k_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Te.RESOURCE_EXHAUSTED?(Fa(n.toString()),Fa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new Je(Te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return at(Nx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(at(Nx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KA extends T_{constructor(e,n,i,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=eA(this.serializer,e),i=(function(u){if(!("targetChange"in u))return At.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?At.min():d.readTime?ca(d.readTime):At.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=cg(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=rg(g)?{documents:sA(u,g)}:{query:rA(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=h_(u,d.resumeToken);const y=ig(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(At.min())>0){p.readTime=Md(u,d.snapshotVersion.toTimestamp());const y=ig(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=iA(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=cg(this.serializer),n.removeTarget=e,this.K_(n)}}class YA extends T_{constructor(e,n,i,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return hn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,hn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){hn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=nA(e.writeResults,e.commitTime),i=ca(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=cg(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>tA(this.serializer,i)))};this.K_(n)}}class QA{}class XA extends QA{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Je(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,og(n,i),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Je(Te.UNKNOWN,u.toString())}))}jo(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,og(n,i),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Je(Te.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function JA(s,e,n,i){return new XA(s,e,n,i)}class ZA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fa(n),this.aa=!1):at("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const No="RemoteStore";class eI{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{i.enqueueAndForget((async()=>{Mo(this)&&(at(No,"Restarting streams for network reachability change."),await(async function(g){const y=Mt(g);y.Ea.add(4),await Su(y),y.Va.set("Unknown"),y.Ea.delete(4),await sf(y)})(this))}))})),this.Va=new ZA(i,l)}}async function sf(s){if(Mo(s))for(const e of s.Ra)await e(!0)}async function Su(s){for(const e of s.Ra)await e(!1)}function E_(s,e){const n=Mt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iy(n)?ay(n):Kl(n).O_()&&ry(n,e))}function sy(s,e){const n=Mt(s),i=Kl(n);n.Ia.delete(e),i.O_()&&j_(n,e),n.Ia.size===0&&(i.O_()?i.L_():Mo(n)&&n.Va.set("Unknown"))}function ry(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(s).Z_(e)}function j_(s,e){s.da.$e(e),Kl(s).X_(e)}function ay(s){s.da=new GR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Kl(s).start(),s.Va.ua()}function iy(s){return Mo(s)&&!Kl(s).x_()&&s.Ia.size>0}function Mo(s){return Mt(s).Ea.size===0}function S_(s){s.da=void 0}async function tI(s){s.Va.set("Online")}async function nI(s){s.Ia.forEach(((e,n)=>{ry(s,e)}))}async function sI(s,e){S_(s),iy(s)?(s.Va.ha(e),ay(s)):s.Va.set("Unknown")}async function rI(s,e,n){if(s.Va.set("Online"),e instanceof u_&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){at(No,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pd(s,i)}else if(e instanceof gd?s.da.Xe(e):e instanceof c_?s.da.st(e):s.da.tt(e),!n.isEqual(At.min()))try{const i=await __(s.localStore);n.compareTo(i)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=u.Ia.get(y);w&&u.Ia.set(y,w.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const w=u.Ia.get(g);if(!w)return;u.Ia.set(g,w.withResumeToken(Cs.EMPTY_BYTE_STRING,w.snapshotVersion)),j_(u,g);const E=new Ni(w.target,g,y,w.sequenceNumber);ry(u,E)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){at(No,"Failed to raise snapshot:",i),await Pd(s,i)}}async function Pd(s,e,n){if(!Wl(e))throw e;s.Ea.add(1),await Su(s),s.Va.set("Offline"),n||(n=()=>__(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{at(No,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await sf(s)}))}function N_(s,e){return e().catch((n=>Pd(s,n,e)))}async function rf(s){const e=Mt(s),n=Vi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fg;for(;aI(e);)try{const l=await BA(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,iI(e,l)}catch(l){await Pd(e,l)}C_(e)&&R_(e)}function aI(s){return Mo(s)&&s.Ta.length<10}function iI(s,e){s.Ta.push(e);const n=Vi(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function C_(s){return Mo(s)&&!Vi(s).x_()&&s.Ta.length>0}function R_(s){Vi(s).start()}async function oI(s){Vi(s).ra()}async function lI(s){const e=Vi(s);for(const n of s.Ta)e.ea(n.mutations)}async function cI(s,e,n){const i=s.Ta.shift(),l=Qg.from(i,e,n);await N_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await rf(s)}async function uI(s,e){e&&Vi(s).Y_&&await(async function(i,l){if((function(d){return HR(d)&&d!==Te.ABORTED})(l.code)){const u=i.Ta.shift();Vi(i).B_(),await N_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await rf(i)}})(s,e),C_(s)&&R_(s)}async function Cx(s,e){const n=Mt(s);n.asyncQueue.verifyOperationInProgress(),at(No,"RemoteStore received new credentials");const i=Mo(n);n.Ea.add(3),await Su(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sf(n)}async function hI(s,e){const n=Mt(s);e?(n.Ea.delete(2),await sf(n)):e||(n.Ea.add(2),await Su(n),n.Va.set("Unknown"))}function Kl(s){return s.ma||(s.ma=(function(n,i,l){const u=Mt(n);return u.sa(),new KA(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:tI.bind(null,s),Yo:nI.bind(null,s),t_:sI.bind(null,s),J_:rI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),iy(s)?ay(s):s.Va.set("Unknown")):(await s.ma.stop(),S_(s))}))),s.ma}function Vi(s){return s.fa||(s.fa=(function(n,i,l){const u=Mt(n);return u.sa(),new YA(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:oI.bind(null,s),t_:uI.bind(null,s),ta:lI.bind(null,s),na:cI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await rf(s)):(await s.fa.stop(),s.Ta.length>0&&(at(No,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class oy{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const d=Date.now()+i,p=new oy(e,n,d,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Je(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ly(s,e){if(Fa("AsyncQueue",`${e}: ${s}`),Wl(s))return new Je(Te.UNAVAILABLE,`${e}: ${s}`);throw s}class Nl{static emptySet(e){return new Nl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||yt.comparator(n.key,i.key):(n,i)=>yt.comparator(n.key,i.key),this.keyedMap=Gc(),this.sortedSet=new qn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Nl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Nl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class Rx{constructor(){this.ga=new qn(yt.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Et(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Vl{constructor(e,n,i,l,u,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,l,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Vl(e,n,Nl.emptySet(n),d,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class dI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class fI{constructor(){this.queries=Ax(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=Mt(n),u=l.queries;l.queries=Ax(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Je(Te.ABORTED,"Firestore shutting down"))}}function Ax(){return new Io((s=>Kw(s)),Xd)}async function A_(s,e){const n=Mt(s);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new dI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=ly(d,`Initialization of query '${xl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&cy(n)}async function I_(s,e){const n=Mt(s),i=e.query;let l=3;const u=n.queries.get(i);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function mI(s,e){const n=Mt(s);let i=!1;for(const l of e){const u=l.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(l)&&(i=!0);d.wa=l}}i&&cy(n)}function pI(s,e,n){const i=Mt(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(n);i.queries.delete(e)}function cy(s){s.Ca.forEach((e=>{e.next()}))}var dg,Ix;(Ix=dg||(dg={})).Ma="default",Ix.Cache="cache";class M_{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Vl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dg.Cache}}class D_{constructor(e){this.key=e}}class P_{constructor(e){this.key=e}}class gI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qt(),this.mutatedKeys=Qt(),this.eu=Yw(e),this.tu=new Nl(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new Rx,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,E)=>{const S=l.get(w),L=Jd(this.query,E)?E:null,W=!!S&&this.mutatedKeys.has(S.key),z=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let O=!1;S&&L?S.data.isEqual(L.data)?W!==z&&(i.track({type:3,doc:L}),O=!0):this.su(S,L)||(i.track({type:2,doc:L}),O=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(p=!0)):!S&&L?(i.track({type:0,doc:L}),O=!0):S&&!L&&(i.track({type:1,doc:S}),O=!0,(g||y)&&(p=!0)),O&&(L?(d=d.add(L),u=z?u.add(w):u.delete(w)):(d=d.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const w=this.query.limitType==="F"?d.last():d.first();d=d.delete(w.key),u=u.delete(w.key),i.track({type:1,doc:w})}return{tu:d,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((w,E)=>(function(L,W){const z=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et(20277,{Vt:O})}};return z(L)-z(W)})(w.type,E.type)||this.eu(w.doc,E.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Vl(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Qt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new P_(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new D_(i))})),n}cu(e){this.Za=e.ks,this.Ya=Qt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const uy="SyncEngine";class yI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class vI{constructor(e){this.key=e,this.hu=!1}}class bI{constructor(e,n,i,l,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Io((p=>Kw(p)),Xd),this.Iu=new Map,this.Eu=new Set,this.Ru=new qn(yt.comparator),this.Au=new Map,this.Vu=new Zg,this.du={},this.mu=new Map,this.fu=Ol.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xI(s,e,n=!0){const i=z_(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await L_(i,e,n,!0),l}async function wI(s,e){const n=z_(s);await L_(n,e,!0,!1)}async function L_(s,e,n,i){const l=await UA(s.localStore,la(e)),u=l.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await _I(s,e,u,d==="current",l.resumeToken)),s.isPrimaryClient&&n&&E_(s.remoteStore,l),p}async function _I(s,e,n,i,l){s.pu=(E,S,L)=>(async function(z,O,te,X){let he=O.view.ru(te);he.Ss&&(he=await Tx(z.localStore,O.query,!1).then((({documents:A})=>O.view.ru(A,he))));const Se=X&&X.targetChanges.get(O.targetId),Ue=X&&X.targetMismatches.get(O.targetId)!=null,Le=O.view.applyChanges(he,z.isPrimaryClient,Se,Ue);return Dx(z,O.targetId,Le.au),Le.snapshot})(s,E,S,L);const u=await Tx(s.localStore,e,!0),d=new gI(e,u.ks),p=d.ru(u.documents),g=ju.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),y=d.applyChanges(p,s.isPrimaryClient,g);Dx(s,n,y.au);const w=new yI(e,n,d);return s.Tu.set(e,w),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function kI(s,e,n){const i=Mt(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((d=>!Xd(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await ug(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&sy(i.remoteStore,l.targetId),fg(i,l.targetId)})).catch($l)):(fg(i,l.targetId),await ug(i.localStore,l.targetId,!0))}async function TI(s,e){const n=Mt(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sy(n.remoteStore,i.targetId))}async function EI(s,e,n){const i=II(s);try{const l=await(function(d,p){const g=Mt(d),y=dt.now(),w=p.reduce(((L,W)=>L.add(W.key)),Qt());let E,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let W=qa(),z=Qt();return g.xs.getEntries(L,w).next((O=>{W=O,W.forEach(((te,X)=>{X.isValidDocument()||(z=z.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,W))).next((O=>{E=O;const te=[];for(const X of p){const he=BR(X,E.get(X.key).overlayedDocument);he!=null&&te.push(new qi(X.key,he,Uw(he.value.mapValue),kr.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,te,p)})).next((O=>{S=O;const te=O.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(L,O.batchId,te)}))})).then((()=>({batchId:S.batchId,changes:Xw(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new qn(Yt)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(i,l.batchId,n),await Nu(i,l.changes),await rf(i.remoteStore)}catch(l){const u=ly(l,"Failed to persist write");n.reject(u)}}async function O_(s,e){const n=Mt(s);try{const i=await OA(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=n.Au.get(u);d&&(hn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?hn(d.hu,14607):l.removedDocuments.size>0&&(hn(d.hu,42227),d.hu=!1))})),await Nu(n,i,e)}catch(i){await $l(i)}}function Mx(s,e,n){const i=Mt(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Mt(d);g.onlineState=p;let y=!1;g.queries.forEach(((w,E)=>{for(const S of E.ba)S.va(p)&&(y=!0)})),y&&cy(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function jI(s,e,n){const i=Mt(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let d=new qn(yt.comparator);d=d.insert(u,Ls.newNoDocument(u,At.min()));const p=Qt().add(u),g=new tf(At.min(),new Map,new qn(Yt),d,p);await O_(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),hy(i)}else await ug(i.localStore,e,!1).then((()=>fg(i,e,n))).catch($l)}async function SI(s,e){const n=Mt(s),i=e.batch.batchId;try{const l=await LA(n.localStore,e);B_(n,i,null),V_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Nu(n,l)}catch(l){await $l(l)}}async function NI(s,e,n){const i=Mt(s);try{const l=await(function(d,p){const g=Mt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next((E=>(hn(E!==null,37113),w=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);B_(i,e,n),V_(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Nu(i,l)}catch(l){await $l(l)}}function V_(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function B_(s,e,n){const i=Mt(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function fg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||U_(s,i)}))}function U_(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(sy(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),hy(s))}function Dx(s,e,n){for(const i of n)i instanceof D_?(s.Vu.addReference(i.key,e),CI(s,i)):i instanceof P_?(at(uy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||U_(s,i.key)):Et(19791,{wu:i})}function CI(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(at(uy,"New document in limbo: "+n),s.Eu.add(i),hy(s))}function hy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new yt(jn.fromString(e)),i=s.fu.next();s.Au.set(i,new vI(n)),s.Ru=s.Ru.insert(n,i),E_(s.remoteStore,new Ni(la(Gg(n.path)),i,"TargetPurposeLimboResolution",Kd.ce))}}async function Nu(s,e,n){const i=Mt(s),l=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{d.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const w=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){l.push(y);const w=ty.Es(g.targetId,y);u.push(w)}})))})),await Promise.all(d),i.Pu.J_(l),await(async function(g,y){const w=Mt(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>Re.forEach(y,(S=>Re.forEach(S.Ts,(L=>w.persistence.referenceDelegate.addReference(E,S.targetId,L))).next((()=>Re.forEach(S.Is,(L=>w.persistence.referenceDelegate.removeReference(E,S.targetId,L)))))))))}catch(E){if(!Wl(E))throw E;at(ny,"Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const L=w.vs.get(S),W=L.snapshotVersion,z=L.withLastLimboFreeSnapshotVersion(W);w.vs=w.vs.insert(S,z)}}})(i.localStore,u))}async function RI(s,e){const n=Mt(s);if(!n.currentUser.isEqual(e)){at(uy,"User change. New user:",e.toKey());const i=await w_(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Je(Te.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nu(n,i.Ns)}}function AI(s,e){const n=Mt(s),i=n.Au.get(e);if(i&&i.hu)return Qt().add(i.key);{let l=Qt();const u=n.Iu.get(e);if(!u)return l;for(const d of u){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function z_(s){const e=Mt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=O_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jI.bind(null,e),e.Pu.J_=mI.bind(null,e.eventManager),e.Pu.yu=pI.bind(null,e.eventManager),e}function II(s){const e=Mt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NI.bind(null,e),e}class Ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return PA(this.persistence,new IA,e.initialUser,this.serializer)}Cu(e){return new x_(ey.Vi,this.serializer)}Du(e){return new FA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ld.provider={build:()=>new Ld};class MI extends Ld{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){hn(this.persistence.referenceDelegate instanceof Dd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new yA(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qs.withCacheSize(this.cacheSizeBytes):Qs.DEFAULT;return new x_((i=>Dd.Vi(i,n)),this.serializer)}}class mg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Mx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=RI.bind(null,this.syncEngine),await hI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fI})()}createDatastore(e){const n=nf(e.databaseInfo.databaseId),i=GA(e.databaseInfo);return JA(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,d,p){return new eI(i,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Mx(this.syncEngine,n,0)),(function(){return Sx.v()?new Sx:new qA})())}createSyncEngine(e,n){return(function(l,u,d,p,g,y,w){const E=new bI(l,u,d,p,g,y);return w&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Mt(n);at(No,"RemoteStore shutting down."),i.Ea.add(5),await Su(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}mg.provider={build:()=>new mg};class F_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Bi="FirestoreClient";class DI{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Ps.UNAUTHENTICATED,this.clientId=zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{at(Bi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(at(Bi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Va;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ly(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ep(s,e){s.asyncQueue.verifyOperationInProgress(),at(Bi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await w_(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Px(s,e){s.asyncQueue.verifyOperationInProgress();const n=await PI(s);at(Bi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>Cx(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>Cx(e.remoteStore,l))),s._onlineComponents=e}async function PI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){at(Bi,"Using user provided OfflineComponentProvider");try{await Ep(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Te.FAILED_PRECONDITION||l.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Ml("Error using user provided cache. Falling back to memory cache: "+n),await Ep(s,new Ld)}}else at(Bi,"Using default OfflineComponentProvider"),await Ep(s,new MI(void 0));return s._offlineComponents}async function q_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(at(Bi,"Using user provided OnlineComponentProvider"),await Px(s,s._uninitializedComponentsProvider._online)):(at(Bi,"Using default OnlineComponentProvider"),await Px(s,new mg))),s._onlineComponents}function LI(s){return q_(s).then((e=>e.syncEngine))}async function H_(s){const e=await q_(s),n=e.eventManager;return n.onListen=xI.bind(null,e.syncEngine),n.onUnlisten=kI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TI.bind(null,e.syncEngine),n}function OI(s,e,n={}){const i=new Va;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const w=new F_({next:S=>{w.Nu(),d.enqueueAndForget((()=>I_(u,E)));const L=S.docs.has(p);!L&&S.fromCache?y.reject(new Je(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&S.fromCache&&g&&g.source==="server"?y.reject(new Je(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new M_(Gg(p.path),w,{includeMetadataChanges:!0,Ka:!0});return A_(u,E)})(await H_(s),s.asyncQueue,e,n,i))),i.promise}function VI(s,e,n={}){const i=new Va;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const w=new F_({next:S=>{w.Nu(),d.enqueueAndForget((()=>I_(u,E))),S.fromCache&&g.source==="server"?y.reject(new Je(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new M_(p,w,{includeMetadataChanges:!0,Ka:!0});return A_(u,E)})(await H_(s),s.asyncQueue,e,n,i))),i.promise}function BI(s,e){const n=new Va;return s.asyncQueue.enqueueAndForget((async()=>EI(await LI(s),e,n))),n.promise}function $_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const UI="ComponentProvider",Lx=new Map;function zI(s,e,n,i,l){return new lR(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,$_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const W_="firestore.googleapis.com",Ox=!0;class Vx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Je(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=W_,this.ssl=Ox}else this.host=e.host,this.ssl=e.ssl??Ox;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=b_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pA)throw new Je(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Je(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Je(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Je(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class af{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Je(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Je(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new U4;switch(i.type){case"firstParty":return new H4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Je(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Lx.get(n);i&&(at(UI,"Removing Datastore"),Lx.delete(n),i.terminate())})(this),Promise.resolve()}}function FI(s,e,n,i={}){s=zr(s,af);const l=Ui(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(Eg(`https://${p}`),jg("Firestore",!0)),u.host!==W_&&u.host!==p&&Ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!ko(g,d)&&(s._setSettings(g),i.mockUserToken)){let y,w;if(typeof i.mockUserToken=="string")y=i.mockUserToken,w=Ps.MOCK_USER;else{y=P2(i.mockUserToken,s._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Je(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Ps(E)}s._authCredentials=new z4(new Nw(y,w))}}class Hi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class ts{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ts(this.firestore,e,this._key)}toJSON(){return{type:ts._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Tu(n,ts._jsonSchema))return new ts(e,i||null,new yt(jn.fromString(n.referencePath)))}}ts._jsonSchemaVersion="firestore/documentReference/1.0",ts._jsonSchema={type:fs("string",ts._jsonSchemaVersion),referencePath:fs("string")};class Ii extends Hi{constructor(e,n,i){super(e,n,Gg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ts(this.firestore,null,new yt(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function rn(s,e,...n){if(s=Bn(s),Cw("collection","path",e),s instanceof af){const i=jn.fromString(e,...n);return X1(i),new Ii(s,null,i)}{if(!(s instanceof ts||s instanceof Ii))throw new Je(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(jn.fromString(e,...n));return X1(i),new Ii(s.firestore,null,i)}}function Xe(s,e,...n){if(s=Bn(s),arguments.length===1&&(e=zg.newId()),Cw("doc","path",e),s instanceof af){const i=jn.fromString(e,...n);return Q1(i),new ts(s,null,new yt(i))}{if(!(s instanceof ts||s instanceof Ii))throw new Je(Te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(jn.fromString(e,...n));return Q1(i),new ts(s.firestore,s instanceof Ii?s.converter:null,new yt(i))}}const Bx="AsyncQueue";class Ux{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new k_(this,"async_queue_retry"),this._c=()=>{const i=Tp();i&&at(Bx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Tp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Tp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Va;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Wl(e))throw e;at(Bx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Fa("INTERNAL UNHANDLED ERROR: ",zx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=oy.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Et(47125,{Pc:zx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zx(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Do extends af{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new Ux,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ux(e),this._firestoreClient=void 0,await e}}}function qI(s,e){const n=typeof s=="object"?s:Rg(),i=typeof s=="string"?s:Cd,l=qd(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=I2("firestore");u&&FI(l,...u)}return l}function dy(s){if(s._terminated)throw new Je(Te.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||HI(s),s._firestoreClient}function HI(s){const e=s._freezeSettings(),n=zI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new DI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class _r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _r(Cs.fromBase64String(e))}catch(n){throw new Je(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _r(Cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,_r._jsonSchema))return _r.fromBase64String(e.bytes)}}_r._jsonSchemaVersion="firestore/bytes/1.0",_r._jsonSchema={type:fs("string",_r._jsonSchemaVersion),bytes:fs("string")};class fy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Je(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cu{constructor(e){this._methodName=e}}class ua{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Je(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Je(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ua._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,ua._jsonSchema))return new ua(e.latitude,e.longitude)}}ua._jsonSchemaVersion="firestore/geoPoint/1.0",ua._jsonSchema={type:fs("string",ua._jsonSchemaVersion),latitude:fs("number"),longitude:fs("number")};class Br{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,Br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Br(e.vectorValues);throw new Je(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Br._jsonSchemaVersion="firestore/vectorValue/1.0",Br._jsonSchema={type:fs("string",Br._jsonSchemaVersion),vectorValues:fs("object")};const $I=/^__.*__$/;class WI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Eu(e,this.data,n,this.fieldTransforms)}}class G_{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function K_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et(40011,{dataSource:s})}}class my{constructor(e,n,i,l,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new my({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Od(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(K_(this.dataSource)&&$I.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class GI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||nf(e)}createContext(e,n,i,l=!1){return new my({dataSource:e,methodName:n,targetDoc:i,path:Ns.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function of(s){const e=s._freezeSettings(),n=nf(s._databaseId);return new GI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Y_(s,e,n,i,l,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);yy("Data must be an object, but it was:",d,i);const p=Q_(i,d);let g,y;if(u.merge)g=new cr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const w=[];for(const E of u.mergeFields){const S=Co(e,E,n);if(!d.contains(S))throw new Je(Te.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Z_(w,S)||w.push(S)}g=new cr(w),y=d.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=d.fieldTransforms;return new WI(new Xs(p),g,y)}class lf extends Cu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}class py extends Cu{_toFieldTransform(e){return new a_(e.path,new du)}isEqual(e){return e instanceof py}}class gy extends Cu{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new pu(e.serializer,e_(e.serializer,this.Vc));return new a_(e.path,n)}isEqual(e){return e instanceof gy&&this.Vc===e.Vc}}function KI(s,e,n,i){const l=s.createContext(1,e,n);yy("Data must be an object, but it was:",l,i);const u=[],d=Xs.empty();Fi(i,((g,y)=>{const w=J_(e,g,n);y=Bn(y);const E=l.childContextForFieldPath(w);if(y instanceof lf)u.push(w);else{const S=Ru(y,E);S!=null&&(u.push(w),d.set(w,S))}}));const p=new cr(u);return new G_(d,p,l.fieldTransforms)}function YI(s,e,n,i,l,u){const d=s.createContext(1,e,n),p=[Co(e,i,n)],g=[l];if(u.length%2!=0)throw new Je(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)p.push(Co(e,u[S])),g.push(u[S+1]);const y=[],w=Xs.empty();for(let S=p.length-1;S>=0;--S)if(!Z_(y,p[S])){const L=p[S];let W=g[S];W=Bn(W);const z=d.childContextForFieldPath(L);if(W instanceof lf)y.push(L);else{const O=Ru(W,z);O!=null&&(y.push(L),w.set(L,O))}}const E=new cr(y);return new G_(w,E,d.fieldTransforms)}function QI(s,e,n,i=!1){return Ru(n,s.createContext(i?4:3,e))}function Ru(s,e){if(X_(s=Bn(s)))return yy("Unsupported field value:",e,s),Q_(s,e);if(s instanceof Cu)return(function(i,l){if(!K_(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let d=0;for(const p of i){let g=Ru(p,l.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=Bn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return e_(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=dt.fromDate(i);return{timestampValue:Md(l.serializer,u)}}if(i instanceof dt){const u=new dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Md(l.serializer,u)}}if(i instanceof ua)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _r)return{bytesValue:h_(l.serializer,i._byteString)};if(i instanceof ts){const u=l.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Jg(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof Br)return(function(d,p){const g=d instanceof Br?d.toArray():d;return{mapValue:{fields:{[Vw]:{stringValue:Bw},[Rd]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw p.createError("VectorValues must only contain numeric values.");return Kg(p.serializer,w)}))}}}}}})(i,l);if(v_(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Gd(i)}`)})(s,e)}function Q_(s,e){const n={};return Iw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(s,((i,l)=>{const u=Ru(l,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function X_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof dt||s instanceof ua||s instanceof _r||s instanceof ts||s instanceof Cu||s instanceof Br||v_(s))}function yy(s,e,n){if(!X_(n)||!Rw(n)){const i=Gd(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Co(s,e,n){if((e=Bn(e))instanceof fy)return e._internalPath;if(typeof e=="string")return J_(s,e);throw Od("Field path arguments must be of type string or ",s,!1,void 0,n)}const XI=new RegExp("[~\\*/\\[\\]]");function J_(s,e,n){if(e.search(XI)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new fy(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Od(s,e,n,i,l){const u=i&&!i.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${l}`),g+=")"),new Je(Te.INVALID_ARGUMENT,p+s+g)}function Z_(s,e){return s.some((n=>n.isEqual(e)))}class JI{convertValue(e,n="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return es(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Et(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Fi(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[Rd].arrayValue?.values?.map((i=>es(i.doubleValue)));return new Br(n)}convertGeoPoint(e){return new ua(es(e.latitude),es(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Qd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(lu(e));default:return null}}convertTimestamp(e){const n=Pi(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=jn.fromString(e);hn(y_(i),9688,{name:e});const l=new cu(i.get(1),i.get(3)),u=new yt(i.popFirst(5));return l.isEqual(n)||Fa(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class ek extends JI{constructor(e){super(),this.firestore=e}convertBytes(e){return new _r(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ts(this.firestore,null,n)}}function Pa(){return new py("serverTimestamp")}function Cl(s){return new gy("increment",s)}const Fx="@firebase/firestore",qx="4.10.0";class tk{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ts(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Co("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZI extends tk{data(){return super.data()}}function eM(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Je(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vy{}class by extends vy{}function On(s,e,...n){let i=[];e instanceof vy&&i.push(e),i=i.concat(n),(function(u){const d=u.filter((g=>g instanceof xy)).length,p=u.filter((g=>g instanceof cf)).length;if(d>1||d>0&&p>0)throw new Je(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class cf extends by{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new cf(e,n,i)}_apply(e){const n=this._parse(e);return nk(e._query,n),new Hi(e.firestore,e.converter,ag(e._query,n))}_parse(e){const n=of(e.firestore);return(function(u,d,p,g,y,w,E){let S;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new Je(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){$x(E,w);const W=[];for(const z of E)W.push(Hx(g,u,z));S={arrayValue:{values:W}}}else S=Hx(g,u,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||$x(E,w),S=QI(p,d,E,w==="in"||w==="not-in");return ds.create(y,w,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bn(s,e,n){const i=e,l=Co("where",s);return cf._create(l,i,n)}class xy extends vy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xy(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const g of p)nk(d,g),d=ag(d,g)})(e._query,n),new Hi(e.firestore,e.converter,ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wy extends by{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wy(e,n)}_apply(e){const n=(function(l,u,d){if(l.startAt!==null)throw new Je(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Je(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hu(u,d)})(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,jR(e._query,n))}}function Vd(s,e="asc"){const n=e,i=Co("orderBy",s);return wy._create(i,n)}class _y extends by{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new _y(e,n,i)}_apply(e){return new Hi(e.firestore,e.converter,Id(e._query,this._limit,this._limitType))}}function Bd(s){return X4("limit",s),_y._create("limit",s,"F")}function Hx(s,e,n){if(typeof(n=Bn(n))=="string"){if(n==="")throw new Je(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gw(e)&&n.indexOf("/")!==-1)throw new Je(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(jn.fromString(n));if(!yt.isDocumentKey(i))throw new Je(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ax(s,new yt(i))}if(n instanceof ts)return ax(s,n._key);throw new Je(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gd(n)}.`)}function $x(s,e){if(!Array.isArray(s)||s.length===0)throw new Je(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nk(s,e){const n=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Je(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Je(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function sk(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class Yc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wo extends tk{constructor(e,n,i,l,u,d){super(e,n,i,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Co("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Je(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",wo._jsonSchema={type:fs("string",wo._jsonSchemaVersion),bundleSource:fs("string","DocumentSnapshot"),bundleName:fs("string"),bundle:fs("string")};class yd extends wo{data(e={}){return super.data(e)}}class Rl{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Yc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new yd(this._firestore,this._userDataWriter,i.key,i,new Yc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Je(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new yd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Yc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new yd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Yc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,w=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),w=d.indexOf(p.doc.key)),{type:tM(p.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Je(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tM(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et(61501,{type:s})}}Rl._jsonSchemaVersion="firestore/querySnapshot/1.0",Rl._jsonSchema={type:fs("string",Rl._jsonSchemaVersion),bundleSource:fs("string","QuerySnapshot"),bundleName:fs("string"),bundle:fs("string")};function An(s){s=zr(s,ts);const e=zr(s.firestore,Do),n=dy(e);return OI(n,s._key).then((i=>nM(e,s,i)))}function En(s){s=zr(s,Hi);const e=zr(s.firestore,Do),n=dy(e),i=new ek(e);return eM(s._query),VI(n,s._query).then((l=>new Rl(e,i,s,l)))}function xn(s,e,n){s=zr(s,ts);const i=zr(s.firestore,Do),l=sk(s.converter,e,n),u=of(i);return uf(i,[Y_(u,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,kr.none())])}function vo(s,e,n,...i){s=zr(s,ts);const l=zr(s.firestore,Do),u=of(l);let d;return d=typeof(e=Bn(e))=="string"||e instanceof fy?YI(u,"updateDoc",s._key,e,n,i):KI(u,"updateDoc",s._key,e),uf(l,[d.toMutation(s._key,kr.exists(!0))])}function Js(s){return uf(zr(s.firestore,Do),[new Yg(s._key,kr.none())])}function Bl(s,e){const n=zr(s.firestore,Do),i=Xe(s),l=sk(s.converter,e),u=of(s.firestore);return uf(n,[Y_(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,kr.exists(!1))]).then((()=>i))}function uf(s,e){const n=dy(s);return BI(n,e)}function nM(s,e,n){const i=n.docs.get(e._key),l=new ek(s);return new wo(s,l,e._key,i,new Yc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){B4(Ao),To(new Mi("firestore",((i,{instanceIdentifier:l,options:u})=>{const d=i.getProvider("app").getImmediate(),p=new Do(new F4(i.getProvider("auth-internal")),new $4(d,i.getProvider("app-check-internal")),cR(d,l),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),aa(Fx,qx,e),aa(Fx,qx,"esm2020")})();var sM="firebase",rM="12.8.0";aa(sM,rM,"app");const rk="firebasestorage.googleapis.com",ak="storageBucket",aM=120*1e3,iM=600*1e3;class Kn extends fa{constructor(e,n,i=0){super(jp(e),`Firebase Storage: ${n} (${jp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gn||(Gn={}));function jp(s){return"storage/"+s}function ky(){const s="An unknown error occurred, please check the error payload for server response.";return new Kn(Gn.UNKNOWN,s)}function oM(s){return new Kn(Gn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function lM(s){return new Kn(Gn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cM(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Kn(Gn.UNAUTHENTICATED,s)}function uM(){return new Kn(Gn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hM(s){return new Kn(Gn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function dM(){return new Kn(Gn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fM(){return new Kn(Gn.CANCELED,"User canceled the upload/download.")}function mM(s){return new Kn(Gn.INVALID_URL,"Invalid URL '"+s+"'.")}function pM(s){return new Kn(Gn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function gM(){return new Kn(Gn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ak+"' property when initializing the app?")}function yM(){return new Kn(Gn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vM(){return new Kn(Gn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function bM(s){return new Kn(Gn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pg(s){return new Kn(Gn.INVALID_ARGUMENT,s)}function ik(){return new Kn(Gn.APP_DELETED,"The Firebase app was deleted.")}function xM(s){return new Kn(Gn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nu(s,e){return new Kn(Gn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function zc(s){throw new Kn(Gn.INTERNAL_ERROR,"Internal error: "+s)}class qs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=qs.makeFromUrl(e,n)}catch{return new qs(e,"")}if(i.path==="")return i;throw pM(e)}static makeFromUrl(e,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(Se){Se.path.charAt(Se.path.length-1)==="/"&&(Se.path_=Se.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function y(Se){Se.path_=decodeURIComponent(Se.path)}const w="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",L=new RegExp(`^https?://${E}/${w}/b/${l}/o${S}`,"i"),W={bucket:1,path:3},z=n===rk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",te=new RegExp(`^https?://${z}/${l}/${O}`,"i"),he=[{regex:p,indices:g,postModify:u},{regex:L,indices:W,postModify:y},{regex:te,indices:{bucket:1,path:2},postModify:y}];for(let Se=0;Se<he.length;Se++){const Ue=he[Se],Le=Ue.regex.exec(e);if(Le){const A=Le[Ue.indices.bucket];let j=Le[Ue.indices.path];j||(j=""),i=new qs(A,j),Ue.postModify(i);break}}if(i==null)throw mM(e);return i}}class wM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function _M(s,e,n){let i=1,l=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function w(...O){y||(y=!0,e.apply(null,O))}function E(O){l=setTimeout(()=>{l=null,s(L,g())},O)}function S(){u&&clearTimeout(u)}function L(O,...te){if(y){S();return}if(O){S(),w.call(null,O,...te);return}if(g()||d){S(),w.call(null,O,...te);return}i<64&&(i*=2);let he;p===1?(p=2,he=0):he=(i+Math.random())*1e3,E(he)}let W=!1;function z(O){W||(W=!0,S(),!y&&(l!==null?(O||(p=2),clearTimeout(l),E(0)):O||(p=1)))}return E(0),u=setTimeout(()=>{d=!0,z(!0)},n),z}function kM(s){s(!1)}function TM(s){return s!==void 0}function EM(s){return typeof s=="object"&&!Array.isArray(s)}function Ty(s){return typeof s=="string"||s instanceof String}function Wx(s){return Ey()&&s instanceof Blob}function Ey(){return typeof Blob<"u"}function gg(s,e,n,i){if(i<e)throw pg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw pg(`Invalid value for '${s}'. Expected ${n} or less.`)}function hf(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function ok(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var _o;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(_o||(_o={}));function jM(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class SM{constructor(e,n,i,l,u,d,p,g,y,w,E,S=!0,L=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=E,this.retry=S,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,z)=>{this.resolve_=W,this.reject_=z,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new Zh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===_o.NO_ERROR,g=u.getStatus();if(!p||jM(g,this.additionalRetryCodes_)&&this.retry){const w=u.getErrorCode()===_o.ABORT;i(!1,new Zh(!1,null,w));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Zh(y,u))})},n=(i,l)=>{const u=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());TM(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=ky();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(l.canceled){const g=this.appDelete_?ik():fM();d(g)}else{const g=dM();d(g)}};this.canceled_?n(!1,new Zh(!1,null,!0)):this.backoffId_=_M(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function NM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function CM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function AM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function IM(s,e,n,i,l,u,d=!0,p=!1){const g=ok(s.urlParams),y=s.url+g,w=Object.assign({},s.headers);return RM(w,e),NM(w,n),CM(w,u),AM(w,i),new SM(y,s.method,w,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,d,p)}function MM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DM(...s){const e=MM();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(Ey())return new Blob(s);throw new Kn(Gn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PM(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function LM(s){if(typeof atob>"u")throw bM("base-64");return atob(s)}const ra={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Sp{constructor(e,n){this.data=e,this.contentType=n||null}}function OM(s,e){switch(s){case ra.RAW:return new Sp(lk(e));case ra.BASE64:case ra.BASE64URL:return new Sp(ck(s,e));case ra.DATA_URL:return new Sp(BM(e),UM(e))}throw ky()}function lk(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,d=s.charCodeAt(++n);i=65536|(u&1023)<<10|d&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function VM(s){let e;try{e=decodeURIComponent(s)}catch{throw nu(ra.DATA_URL,"Malformed data URL.")}return lk(e)}function ck(s,e){switch(s){case ra.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw nu(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case ra.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw nu(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=LM(e)}catch(l){throw l.message.includes("polyfill")?l:nu(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i}class uk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nu(ra.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=zM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function BM(s){const e=new uk(s);return e.base64?ck(ra.BASE64,e.rest):VM(e.rest)}function UM(s){return new uk(s).contentType}function zM(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Si{constructor(e,n){let i=0,l="";Wx(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(Wx(this.data_)){const i=this.data_,l=PM(i,e,n);return l===null?null:new Si(l)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Si(i,!0)}}static getBlob(...e){if(Ey()){const n=e.map(i=>i instanceof Si?i.data_:i);return new Si(DM.apply(null,n))}else{const n=e.map(d=>Ty(d)?OM(ra.RAW,d).data:d.data_);let i=0;n.forEach(d=>{i+=d.byteLength});const l=new Uint8Array(i);let u=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)l[u++]=d[p]}),new Si(l,!0)}}uploadData(){return this.data_}}function jy(s){let e;try{e=JSON.parse(s)}catch{return null}return EM(e)?e:null}function FM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function qM(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function hk(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function HM(s,e){return e}class Fs{constructor(e,n,i,l){this.server=e,this.local=n||e,this.writable=!!i,this.xform=l||HM}}let ed=null;function $M(s){return!Ty(s)||s.length<2?s:hk(s)}function dk(){if(ed)return ed;const s=[];s.push(new Fs("bucket")),s.push(new Fs("generation")),s.push(new Fs("metageneration")),s.push(new Fs("name","fullPath",!0));function e(u,d){return $M(d)}const n=new Fs("name");n.xform=e,s.push(n);function i(u,d){return d!==void 0?Number(d):d}const l=new Fs("size");return l.xform=i,s.push(l),s.push(new Fs("timeCreated")),s.push(new Fs("updated")),s.push(new Fs("md5Hash",null,!0)),s.push(new Fs("cacheControl",null,!0)),s.push(new Fs("contentDisposition",null,!0)),s.push(new Fs("contentEncoding",null,!0)),s.push(new Fs("contentLanguage",null,!0)),s.push(new Fs("contentType",null,!0)),s.push(new Fs("metadata","customMetadata",!0)),ed=s,ed}function WM(s,e){function n(){const i=s.bucket,l=s.fullPath,u=new qs(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function GM(s,e,n){const i={};i.type="file";const l=n.length;for(let u=0;u<l;u++){const d=n[u];i[d.local]=d.xform(i,e[d.server])}return WM(i,s),i}function fk(s,e,n){const i=jy(e);return i===null?null:GM(s,i,n)}function KM(s,e,n,i){const l=jy(e);if(l===null||!Ty(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const w=s.bucket,E=s.fullPath,S="/b/"+d(w)+"/o/"+d(E),L=hf(S,n,i),W=ok({alt:"media",token:y});return L+W})[0]}function YM(s,e){const n={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}const Gx="prefixes",Kx="items";function QM(s,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Gx])for(const l of n[Gx]){const u=l.replace(/\/$/,""),d=s._makeStorageReference(new qs(e,u));i.prefixes.push(d)}if(n[Kx])for(const l of n[Kx]){const u=s._makeStorageReference(new qs(e,l.name));i.items.push(u)}return i}function XM(s,e,n){const i=jy(n);return i===null?null:QM(s,e,i)}class Sy{constructor(e,n,i,l){this.url=e,this.method=n,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ny(s){if(!s)throw ky()}function JM(s,e){function n(i,l){const u=fk(s,l,e);return Ny(u!==null),u}return n}function ZM(s,e){function n(i,l){const u=XM(s,e,l);return Ny(u!==null),u}return n}function eD(s,e){function n(i,l){const u=fk(s,l,e);return Ny(u!==null),KM(u,l,s.host,s._protocol)}return n}function Cy(s){function e(n,i){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=uM():l=cM():n.getStatus()===402?l=lM(s.bucket):n.getStatus()===403?l=hM(s.path):l=i,l.status=n.getStatus(),l.serverResponse=i.serverResponse,l}return e}function tD(s){const e=Cy(s);function n(i,l){let u=e(i,l);return i.getStatus()===404&&(u=oM(s.path)),u.serverResponse=l.serverResponse,u}return n}function nD(s,e,n,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),i&&(u.pageToken=i),l&&(u.maxResults=l);const d=e.bucketOnlyServerUrl(),p=hf(d,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,w=new Sy(p,g,ZM(s,e.bucket),y);return w.urlParams=u,w.errorHandler=Cy(e),w}function sD(s,e,n){const i=e.fullServerUrl(),l=hf(i,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new Sy(l,u,eD(s,n),d);return p.errorHandler=tD(e),p}function rD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function aD(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=rD(null,e)),i}function iD(s,e,n,i,l){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let he="";for(let Se=0;Se<2;Se++)he=he+Math.random().toString().slice(2);return he}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=aD(e,i,l),w=YM(y,n),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,S=`\r
--`+g+"--",L=Si.getBlob(E,i,S);if(L===null)throw yM();const W={name:y.fullPath},z=hf(u,s.host,s._protocol),O="POST",te=s.maxUploadRetryTime,X=new Sy(z,O,JM(s,n),te);return X.urlParams=W,X.headers=d,X.body=L.uploadData(),X.errorHandler=Cy(e),X}class oD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,l,u){if(this.sent_)throw zc("cannot .send() more than once");if(Ui(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class lD extends oD{initXhr(){this.xhr_.responseType="text"}}function Ry(){return new lD}class Ro{constructor(e,n){this._service=e,n instanceof qs?this._location=n:this._location=qs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ro(e,n)}get root(){const e=new qs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hk(this._location.path)}get storage(){return this._service}get parent(){const e=FM(this._location.path);if(e===null)return null;const n=new qs(this._location.bucket,e);return new Ro(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xM(e)}}function cD(s,e,n){s._throwIfRoot("uploadBytes");const i=iD(s.storage,s._location,dk(),new Si(e,!0),n);return s.storage.makeRequestWithTokens(i,Ry).then(l=>({metadata:l,ref:s}))}function uD(s){const e={prefixes:[],items:[]};return mk(s,e).then(()=>e)}async function mk(s,e,n){const l=await hD(s,{pageToken:n});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await mk(s,e,l.nextPageToken)}function hD(s,e){e!=null&&typeof e.maxResults=="number"&&gg("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=nD(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(i,Ry)}function dD(s){s._throwIfRoot("getDownloadURL");const e=sD(s.storage,s._location,dk());return s.storage.makeRequestWithTokens(e,Ry).then(n=>{if(n===null)throw vM();return n})}function fD(s,e){const n=qM(s._location.path,e),i=new qs(s._location.bucket,n);return new Ro(s.storage,i)}function mD(s){return/^[A-Za-z]+:\/\//.test(s)}function pD(s,e){return new Ro(s,e)}function pk(s,e){if(s instanceof Ay){const n=s;if(n._bucket==null)throw gM();const i=new Ro(n,n._bucket);return e!=null?pk(i,e):i}else return e!==void 0?fD(s,e):s}function gD(s,e){if(e&&mD(e)){if(s instanceof Ay)return pD(s,e);throw pg("To use ref(service, url), the first argument must be a Storage instance.")}else return pk(s,e)}function Yx(s,e){const n=e?.[ak];return n==null?null:qs.makeFromBucketSpec(n,s)}function yD(s,e,n,i={}){s.host=`${e}:${n}`;const l=Ui(e);l&&(Eg(`https://${s.host}/b`),jg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:P2(u,s.app.options.projectId))}class Ay{constructor(e,n,i,l,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=rk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aM,this._maxUploadRetryTime=iM,this._requests=new Set,l!=null?this._bucket=qs.makeFromBucketSpec(l,this._host):this._bucket=Yx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qs.makeFromBucketSpec(this._url,e):this._bucket=Yx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ro(this,e)}_makeRequest(e,n,i,l,u=!0){if(this._deleted)return new wM(ik());{const d=IM(e,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,l).getPromise()}}const Qx="@firebase/storage",Xx="0.14.0";const gk="storage";function Jx(s,e,n){return s=Bn(s),cD(s,e,n)}function Zx(s){return s=Bn(s),uD(s)}function Al(s){return s=Bn(s),dD(s)}function bo(s,e){return s=Bn(s),gD(s,e)}function vD(s=Rg(),e){s=Bn(s);const i=qd(s,gk).getImmediate({identifier:e}),l=I2("storage");return l&&bD(i,...l),i}function bD(s,e,n,i={}){yD(s,e,n,i)}function xD(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new Ay(n,i,l,e,Ao)}function wD(){To(new Mi(gk,xD,"PUBLIC").setMultipleInstances(!0)),aa(Qx,Xx,""),aa(Qx,Xx,"esm2020")}wD();const yk={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Iy=Cg(yk),Fc=xw(Iy),Ie=qI(Iy),xo=vD(Iy),_D=Cg(yk,"secondary"),P3=xw(_D),kD="EYdciKDOi3UYBLk1u8hHams5tmO2",vk=k.createContext();function jr(){return k.useContext(vk)}function TD({children:s}){const[e,n]=k.useState(null),[i,l]=k.useState(!1),[u,d]=k.useState(!1),[p,g]=k.useState(null),[y,w]=k.useState(!0);k.useEffect(()=>SC(Fc,async te=>{if(n(te),te)if(te.uid===kD)l(!0),d(!1),g(null);else{l(!1);try{const X=On(rn(Ie,"clients"),bn("uid","==",te.uid)),he=await En(X);if(he.empty)d(!1),g(null);else{const Se=he.docs[0];d(!0),g({id:Se.id,...Se.data()})}}catch(X){console.error("Error fetching client data:",X),d(!1),g(null)}}else l(!1),d(!1),g(null);w(!1)}),[]);const z={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:O=>{g(te=>te&&{...te,...O})},login:async(O,te,X=!0)=>(await TC(Fc,X?dw:Og),await kC(Fc,O,te)),logout:()=>NC(Fc),resetPassword:O=>_C(Fc,O),loading:y};return a.jsx(vk.Provider,{value:z,children:s})}const bk=k.createContext();function ma(){return k.useContext(bk)}function ED({children:s}){const[e,n]=k.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=k.useState(()=>localStorage.getItem("accent")||"red");k.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),k.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(bk.Provider,{value:p,children:s})}function jD(){const[s,e]=k.useState(""),[n,i]=k.useState(""),[l,u]=k.useState(!0),[d,p]=k.useState(""),[g,y]=k.useState(!1),[w,E]=k.useState(!1),[S,L]=k.useState(!1),{login:W,resetPassword:z,currentUser:O,isAdmin:te,isClient:X,clientData:he,loading:Se}=jr(),Ue=Vs();if(k.useEffect(()=>{if(!Se&&O){if(te)Ue("/dashboard");else if(X){const j=he?.clientType;Ue(j==="core_buddy"?"/client/core-buddy":j==="circuit_vip"||j==="circuit_dropin"?"/client/circuit":"/client")}}},[Se,O,te,X,he,Ue]),Se)return null;const Le=async j=>{j.preventDefault(),p(""),y(!0);try{await W(s,n,l)}catch(R){p(R.message||"Failed to log in"),y(!1)}},A=async j=>{if(j.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await z(s.trim()),L(!0)}catch(R){R.code==="auth/user-not-found"?p("No account found with this email"):p(R.message||"Failed to send reset email")}y(!1)};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:w?"Reset Password":"Client Portal"})]}),d&&a.jsx("div",{className:"error-message",children:d}),S?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{E(!1),L(!1),p("")},children:"Back to Log In"})]}):w?a.jsxs("form",{onSubmit:A,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:j=>e(j.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:Le,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:j=>e(j.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:j=>i(j.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:j=>u(j.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!0),p("")},children:"Forgot password?"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function da({active:s}){const e=Vs(),{clientData:n}=jr(),i=n?.clientType==="block"&&n?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Profile"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6.5 6.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),a.jsx("path",{d:"M17.5 6.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),a.jsx("path",{d:"M6.5 21.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),a.jsx("path",{d:"M17.5 21.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),a.jsx("path",{d:"M6.5 6.5v11"}),a.jsx("path",{d:"M17.5 6.5v11"}),a.jsx("path",{d:"M6.5 12h11"})]}),a.jsx("span",{children:"Workouts"})]}),a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),i&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Au(s,e,n,i,l){const u=[];for(let d=0;d<s;d++){const p=(d*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:n+i*Math.sin(p),x2:e+l*Math.cos(p),y2:n+l*Math.sin(p),thick:d%5===0})}return u}const My=Au(60,100,100,85,96),Il=Au(60,100,100,78,94),SD=Au(60,100,100,82,94);Au(60,50,50,38,46);const ND=Au(60,40,40,30,37),Np=[10,25,50,100,200,500,1e3],wi=5;function pl(s){return s.toISOString().split("T")[0]}function CD(s){let e=0;for(const n of Np){if(s<n)return{prev:e,next:n};e=n}return{prev:Np[Np.length-1],next:s+100}}const RD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},AD={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},Cp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function e2(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Rp(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function ID(s,e=800){return new Promise(n=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,d=i.height;u>d?u>e&&(d=Math.round(d*e/u),u=e):d>e&&(u=Math.round(u*e/d),d=e),l.width=u,l.height=d,l.getContext("2d").drawImage(i,0,0,u,d),l.toBlob(p=>n(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}const Ys={first_workout:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 4v16"}),a.jsx("path",{d:"M18 4v16"}),a.jsx("path",{d:"M6 12h12"}),a.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),a.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]}),workouts_10:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),a.jsx("path",{d:"M12 14v4"}),a.jsx("path",{d:"M10 18h4"})]}),workouts_25:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),workouts_50:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12h4"}),a.jsx("path",{d:"M16 12h4"}),a.jsx("path",{d:"M12 4v4"}),a.jsx("path",{d:"M12 16v4"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]}),workouts_100:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),streak_2:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M9 16l2 2 4-4"})]}),streak_4:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M8 16h8"}),a.jsx("path",{d:"M12 14v4"})]}),streak_8:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),a.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]}),programme_done:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]}),habits_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),nutrition_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),a.jsx("path",{d:"M9 7h6"})]}),first_pb:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M12 14v8"}),a.jsx("path",{d:"M9 18l3 3 3-3"}),a.jsx("path",{d:"M10 6l2 2 2-2"})]}),pbs_5:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 20h18"}),a.jsx("path",{d:"M5 20V10l4-6"}),a.jsx("path",{d:"M9 20V4"}),a.jsx("path",{d:"M13 20V10l4-6"}),a.jsx("path",{d:"M17 20V4"}),a.jsx("path",{d:"M21 20V10"})]}),leaderboard_join:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},t2=[{id:"first_workout",icon:Ys.first_workout,name:"First Rep",desc:"Complete your first workout",category:"workouts"},{id:"workouts_10",icon:Ys.workouts_10,name:"On Fire",desc:"Complete 10 workouts",category:"workouts"},{id:"workouts_25",icon:Ys.workouts_25,name:"Lightning",desc:"Complete 25 workouts",category:"workouts"},{id:"workouts_50",icon:Ys.workouts_50,name:"Iron Will",desc:"Complete 50 workouts",category:"workouts"},{id:"workouts_100",icon:Ys.workouts_100,name:"Century Club",desc:"Complete 100 workouts",category:"workouts"},{id:"streak_2",icon:Ys.streak_2,name:"2 Week Warrior",desc:"2-week workout streak",category:"streak"},{id:"streak_4",icon:Ys.streak_4,name:"Month Strong",desc:"4-week workout streak",category:"streak"},{id:"streak_8",icon:Ys.streak_8,name:"Unbreakable",desc:"8-week workout streak",category:"streak"},{id:"programme_done",icon:Ys.programme_done,name:"Finisher",desc:"Complete a programme",category:"programme"},{id:"habits_7",icon:Ys.habits_7,name:"Habit Machine",desc:"7-day perfect habit streak",category:"habits"},{id:"nutrition_7",icon:Ys.nutrition_7,name:"Fuel Master",desc:"Log nutrition 7 days in a row",category:"nutrition"},{id:"first_pb",icon:Ys.first_pb,name:"Record Breaker",desc:"Set your first PB",category:"pbs"},{id:"pbs_5",icon:Ys.pbs_5,name:"Climbing",desc:"Set 5 personal bests",category:"pbs"},{id:"leaderboard_join",icon:Ys.leaderboard_join,name:"Competitor",desc:"Join the leaderboard",category:"social"}];function MD(){const{currentUser:s,isClient:e,clientData:n,logout:i,updateClientData:l,loading:u}=jr(),{isDark:d,toggleTheme:p}=ma(),g=Vs(),[y,w]=k.useState({hours:0,minutes:0,seconds:0}),[E,S]=k.useState(0),[L,W]=k.useState(0),[z,O]=k.useState(""),[te,X]=k.useState(0),[he,Se]=k.useState(0),[Ue,Le]=k.useState(!1),[A,j]=k.useState({protein:0,carbs:0,fats:0,calories:0}),[R,D]=k.useState(null),[M,F]=k.useState(0),[I,ze]=k.useState(null),[vt,Y]=k.useState(!1),[Ee,Pe]=k.useState(!1),[oe,Ve]=k.useState(0),[V,G]=k.useState(0),[fe,Ne]=k.useState([]),[Me,Oe]=k.useState([]),[tt,He]=k.useState(null),[ie,We]=k.useState(!1),wt=k.useRef(null),[ut,ft]=k.useState([]),[re,Ft]=k.useState(null),[kt,bt]=k.useState(0),[jt,lt]=k.useState(0),[Ye,qt]=k.useState(0),[ns,Nt]=k.useState(0),[Lt,In]=k.useState(null),Ct=k.useCallback((b,T="info")=>{In({message:b,type:T}),setTimeout(()=>In(null),4e3)},[]),[cn,ge]=k.useState([]),[je,De]=k.useState(!1),[et,Qe]=k.useState(""),[Be,nt]=k.useState(null),[Ge,$e]=k.useState(null),[St,Xt]=k.useState(!1),[Bt,tn]=k.useState(new Set),[Mn,Rt]=k.useState(new Set),[an,Un]=k.useState({}),[wn,ss]=k.useState({}),[rs,Sn]=k.useState({}),Yn=k.useRef(null),Hn=k.useRef(null);k.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),k.useEffect(()=>{if(n)try{const b=sessionStorage.getItem(`cbDash_${n.id}`);if(b){const T=JSON.parse(b);W(T.programmePct??0),O(T.programmeName??""),X(T.totalWorkouts??0),Se(T.habitWeekPct??0),j(T.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),D(T.nutritionTargetData??null),F(T.todayHabitsCount??0),ze(T.nextSession??null),Y(T.hasProgramme??!1),Pe(T.programmeComplete??!1),Ve(T.weeklyWorkouts??0),G(T.pbCount??0),Ne(T.topPBs??[]),Oe(T.leaderboardTop3??[]),ft(T.unlockedBadges??[]),bt(T.streakWeeks??0),Le(!0)}}catch{}},[n]),k.useEffect(()=>{n?.photoURL&&He(n.photoURL)},[n]);const vs=async b=>{const T=b.target.files?.[0];if(!(!T||!n)){if(!T.type.startsWith("image/")){Ct("Please select an image file","error");return}if(T.size>5*1024*1024){Ct("Image must be under 5MB","error");return}We(!0);try{const P=await new Promise(ye=>{const xe=new Image;xe.onload=()=>{const st=document.createElement("canvas"),Ze=400;let U=xe.width,J=xe.height;U>J?(J=J/U*Ze,U=Ze):(U=U/J*Ze,J=Ze),st.width=U,st.height=J,st.getContext("2d").drawImage(xe,0,0,U,J),st.toBlob(Z=>ye(Z),"image/jpeg",.75)},xe.src=URL.createObjectURL(T)}),K=bo(xo,`profilePhotos/${n.id}`);await Jx(K,P);const Ae=await Al(K);await vo(Xe(Ie,"clients",n.id),{photoURL:Ae}),He(Ae),l({photoURL:Ae}),Ct("Profile photo updated!","success")}catch(P){console.error("Photo upload error:",P),Ct("Failed to upload photo","error")}We(!1),wt.current&&(wt.current.value="")}};k.useEffect(()=>{const b=()=>{const P=new Date,K=new Date(P);K.setHours(23,59,59,999);const Ae=K-P,ye=Math.floor(Ae/(1e3*60*60)),xe=Math.floor(Ae%(1e3*60*60)/(1e3*60)),st=Math.floor(Ae%(1e3*60)/1e3);w({hours:ye,minutes:xe,seconds:st}),S(60-st)};b();const T=setInterval(b,1e3);return()=>clearInterval(T)},[]),k.useEffect(()=>{const b=setInterval(()=>{Nt(T=>(T+1)%Cp.length)},8e3);return()=>clearInterval(b)},[]),k.useEffect(()=>{if(!s||!n)return;(async()=>{let T=null,P=0,K=[],Ae=!1;try{const ye=pl(new Date),xe=await An(Xe(Ie,"clientProgrammes",n.id));if(xe.exists()){const is=xe.data(),ms=RD[is.templateId];if(Y(!0),ms){const ps=is.completedSessions||{},zt=Object.keys(ps).length,Tn=ms.duration*ms.daysPerWeek;W(Tn>0?Math.round(zt/Tn*100):0);const Nn=is.templateId.replace(/_/g," ").replace(/\b\w/g,Dn=>Dn.toUpperCase());O(Nn);const er=AD[is.templateId];let Is=!1;for(let Dn=1;Dn<=ms.duration&&!Is;Dn++)for(let zn=0;zn<ms.daysPerWeek&&!Is;zn++)ps[`w${Dn}d${zn}`]||(ze({week:Dn,dayIdx:zn,label:er?.[zn]||`Day ${zn+1}`}),Is=!0);Is||(Pe(!0),Ae=!0)}}const st=rn(Ie,"workoutLogs"),Ze=On(st,bn("clientId","==",n.id));T=await En(Ze);const U=T.docs.filter(is=>is.data().type!=="programme").length;X(U);const J=new Date,Z=J.getDay(),pe=Z===0?6:Z-1,ke=new Date(J);ke.setDate(J.getDate()-pe),ke.setHours(0,0,0,0);const Fe=pl(ke),ot=T.docs.filter(is=>(is.data().date||"")>=Fe).length;Ve(ot);const Ke=rn(Ie,"habitLogs"),Ot=On(Ke,bn("clientId","==",n.id),bn("date","==",ye)),dn=await En(Ot);let Ut=0;if(!dn.empty){const is=dn.docs[0].data().habits||{};Ut=Object.values(is).filter(Boolean).length}Se(Math.round(Ut/wi*100)),F(Ut);const un=await An(Xe(Ie,"nutritionTargets",n.id));un.exists()&&D(un.data());const Zs=await An(Xe(Ie,"nutritionLogs",`${n.id}_${ye}`));if(Zs.exists()){const ms=(Zs.data().entries||[]).reduce((ps,zt)=>({protein:ps.protein+(zt.protein||0),carbs:ps.carbs+(zt.carbs||0),fats:ps.fats+(zt.fats||0),calories:ps.calories+(zt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});j(ms)}}catch(ye){console.error("Error loading dashboard stats:",ye)}try{let ye=[];const xe=await An(Xe(Ie,"coreBuddyPBs",n.id));if(xe.exists()){const st=xe.data().exercises||{};G(Object.keys(st).length),P=Object.keys(st).length,ye=Object.entries(st).sort(([,Ze],[,U])=>(U.weight||0)-(Ze.weight||0)).slice(0,3).map(([Ze,U])=>({name:Ze,weight:U.weight,reps:U.reps}))}if(ye.length===0){const st={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},Ze=On(rn(Ie,"personalBests"),bn("clientId","==",n.id)),U=await En(Ze);if(!U.empty){const J={};U.docs.forEach(pe=>{const ke=pe.data().benchmarks||{};Object.entries(ke).forEach(([Fe,ot])=>{if(!ot.weight||!st[Fe])return;const Ke=(ot.weight||0)*(ot.reps||1);(!J[Fe]||Ke>(J[Fe].weight||0)*(J[Fe].reps||1))&&(J[Fe]={name:st[Fe],weight:ot.weight,reps:ot.reps})})});const Z=Object.values(J);G(Z.length),P=Z.length,ye=Z.sort((pe,ke)=>(ke.weight||0)-(pe.weight||0)).slice(0,3)}}K=ye,Ne(ye)}catch(ye){console.error("PB fetch error:",ye)}try{const ye=rn(Ie,"clients"),xe=On(ye,bn("leaderboardOptIn","==",!0)),Ze=(await En(xe)).docs.map(U=>({id:U.id,name:U.data().name,photoURL:U.data().photoURL||null}));Oe(Ze.slice(0,3))}catch(ye){console.error("Leaderboard preview error:",ye)}try{let ye=0;if(T){const pe=T.docs.map(ke=>ke.data().date).filter(Boolean).sort().reverse();if(pe.length>0){const ke=new Date;let Fe=new Date(ke);e:for(let ot=0;ot<52;ot++){const Ke=new Date(Fe),Ot=Ke.getDay(),dn=Ot===0?6:Ot-1;Ke.setDate(Ke.getDate()-dn),Ke.setHours(0,0,0,0);const Ut=new Date(Ke);Ut.setDate(Ut.getDate()+7);const un=pl(Ke),Zs=pl(Ut);if(pe.some(ms=>ms>=un&&ms<Zs))ye++;else{if(ot>0)break e;break}Fe.setDate(Fe.getDate()-7)}}}bt(ye);let xe=0;for(let pe=0;pe<30;pe++){const ke=new Date;ke.setDate(ke.getDate()-pe);const Fe=pl(ke);try{const ot=await En(On(rn(Ie,"habitLogs"),bn("clientId","==",n.id),bn("date","==",Fe)));if(ot.empty)break;{const Ke=ot.docs[0].data().habits||{};if(Object.values(Ke).filter(Boolean).length>=wi)xe++;else break}}catch{break}}lt(xe);let st=0;for(let pe=0;pe<30;pe++){const ke=new Date;ke.setDate(ke.getDate()-pe);const Fe=pl(ke);try{const ot=await An(Xe(Ie,"nutritionLogs",`${n.id}_${Fe}`));if(ot.exists()&&(ot.data().entries||[]).length>0)st++;else break}catch{break}}qt(st);const Ze=T?T.docs.length:0,U=[],J=pe=>U.push(pe);Ze>=1&&J("first_workout"),Ze>=10&&J("workouts_10"),Ze>=25&&J("workouts_25"),Ze>=50&&J("workouts_50"),Ze>=100&&J("workouts_100"),ye>=2&&J("streak_2"),ye>=4&&J("streak_4"),ye>=8&&J("streak_8"),Ae&&J("programme_done"),xe>=7&&J("habits_7"),st>=7&&J("nutrition_7"),(P>0||K.length>0)&&J("first_pb"),P>=5&&J("pbs_5"),n.leaderboardOptIn&&J("leaderboard_join"),ft(U);const Z={};U.forEach(pe=>{Z[pe]={unlockedAt:new Date().toISOString()}}),xn(Xe(Ie,"achievements",n.id),{badges:Z,updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(ye){console.error("Achievement computation error:",ye)}Le(!0)})()},[s,n]),k.useEffect(()=>{if(!(!Ue||!n))try{sessionStorage.setItem(`cbDash_${n.id}`,JSON.stringify({programmePct:L,programmeName:z,totalWorkouts:te,habitWeekPct:he,nutritionTotals:A,nutritionTargetData:R,todayHabitsCount:M,nextSession:I,hasProgramme:vt,programmeComplete:Ee,weeklyWorkouts:oe,pbCount:V,topPBs:fe,leaderboardTop3:Me,unlockedBadges:ut,streakWeeks:kt}))}catch{}},[Ue,L,z,te,he,A,R,M,I,vt,Ee,oe,V,fe,Me,ut,kt,n]);const Qn=b=>{const T=b.currentTarget,P=T.querySelector(".ripple");P&&P.remove();const K=T.getBoundingClientRect(),Ae=Math.max(K.width,K.height),ye=b.clientX-K.left-Ae/2,xe=b.clientY-K.top-Ae/2,st=document.createElement("span");st.className="ripple",st.style.cssText=`width:${Ae}px;height:${Ae}px;left:${ye}px;top:${xe}px;`,T.appendChild(st),setTimeout(()=>st.remove(),600)},Rs=n?.name?.split(" ")[0]||"there",{prev:H,next:me}=CD(te),we=me>H?Math.round((te-H)/(me-H)*100):100,be=[{label:"Programme",value:`${L}%`,pct:L,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${te}`,pct:we,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${he}%`,pct:he,color:"#38B6FF",size:"normal"}],de=b=>!R||!R[b]?0:Math.min(Math.round(A[b]/R[b]*100),100),rt=(()=>{const b=new Date().getHours();return Ue&&M>=wi&&A.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:b>=5&&b<12?{main:"Rise and grind,",sub:"let's get after it!"}:b>=12&&b<17?{main:"Oye",sub:"crack on and make it count!"}:b>=17&&b<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),mt=Ue?vt&&I&&!Ee?{label:"NEXT SESSION",message:`Week ${I.week}, Day ${I.dayIdx+1}  ${I.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:L,ringLabel:`${L}%`}:M<wi?{label:"DAILY HABITS",message:`${M}/${wi} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:he,ringLabel:`${M}/${wi}`}:A.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:vt?Ee?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null,it=k.useCallback(async()=>{if(n){De(!0);try{const b=await En(On(rn(Ie,"posts"),bn("authorId","==",n.id),Vd("createdAt","desc"),Bd(30)));ge(b.docs.map(P=>({id:P.id,...P.data()})));const T=await En(On(rn(Ie,"postLikes"),bn("userId","==",n.id)));tn(new Set(T.docs.map(P=>P.data().postId)))}catch(b){console.error("Error loading journey:",b)}finally{De(!1)}}},[n]);k.useEffect(()=>{Ue&&n&&it()},[Ue,n,it]);const xt=b=>{const T=b.target.files?.[0];if(T){if(!T.type.startsWith("image/")){Ct("Please select an image file","error");return}if(T.size>10*1024*1024){Ct("Image must be under 10MB","error");return}nt(T),$e(URL.createObjectURL(T))}},pt=()=>{nt(null),Ge&&URL.revokeObjectURL(Ge),$e(null),Hn.current&&(Hn.current.value="")},Jt=async()=>{if(!(!et.trim()&&!Be||St||!n)){Xt(!0);try{let b=null;if(Be){const T=await ID(Be),P=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,K=bo(xo,`postImages/${n.id}/${P}`);await Jx(K,T),b=await Al(K)}await Bl(rn(Ie,"posts"),{authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:et.trim(),type:b?"image":"text",imageURL:b||null,createdAt:Pa(),likeCount:0,commentCount:0}),Qe(""),pt(),Yn.current&&(Yn.current.style.height="auto"),await it(),Ct("Posted!","success")}catch(b){console.error("Error posting:",b),Ct(b?.message||"Failed to post","error")}finally{Xt(!1)}}},As=async b=>{if(window.confirm("Delete this post?"))try{await Js(Xe(Ie,"posts",b)),ge(T=>T.filter(P=>P.id!==b)),Ct("Post deleted","info")}catch(T){console.error("Delete error:",T),Ct("Failed to delete","error")}},as=async b=>{if(!n)return;const T=n.id,P=`${b}_${T}`,K=Bt.has(b),Ae=new Set(Bt);K?Ae.delete(b):Ae.add(b),tn(Ae),ge(ye=>ye.map(xe=>xe.id===b?{...xe,likeCount:Math.max(0,(xe.likeCount||0)+(K?-1:1))}:xe));try{K?(await Js(Xe(Ie,"postLikes",P)),await vo(Xe(Ie,"posts",b),{likeCount:Cl(-1)})):(await xn(Xe(Ie,"postLikes",P),{postId:b,userId:T,createdAt:Pa()}),await vo(Xe(Ie,"posts",b),{likeCount:Cl(1)}))}catch(ye){console.error("Like error:",ye),it()}},bs=async b=>{try{const T=await En(On(rn(Ie,"postComments"),bn("postId","==",b),Vd("createdAt","asc"),Bd(50)));Un(P=>({...P,[b]:T.docs.map(K=>({id:K.id,...K.data()}))}))}catch(T){console.error("Error loading comments:",T)}},_n=b=>{const T=new Set(Mn);T.has(b)?T.delete(b):(T.add(b),an[b]||bs(b)),Rt(T)},q=async b=>{const T=(wn[b]||"").trim();if(!(!T||!n)){Sn(P=>({...P,[b]:!0}));try{await Bl(rn(Ie,"postComments"),{postId:b,authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:T,createdAt:Pa()}),await vo(Xe(Ie,"posts",b),{commentCount:Cl(1)}),ss(P=>({...P,[b]:""})),ge(P=>P.map(K=>K.id===b?{...K,commentCount:(K.commentCount||0)+1}:K)),await bs(b)}catch(P){console.error("Comment error:",P),Ct("Failed to comment","error")}finally{Sn(P=>({...P,[b]:!1}))}}},le=b=>{Qe(b.target.value),b.target.style.height="auto",b.target.style.height=Math.min(b.target.scrollHeight,120)+"px"};return a.jsxs("div",{className:"cb-dashboard","data-theme":d?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:d?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:My.map((b,T)=>{const P=T<E;return a.jsx("line",{x1:b.x1,y1:b.y1,x2:b.x2,y2:b.y2,className:`ring-tick ${P?"elapsed":"remaining"}`,strokeWidth:b.thick?"3":"2"},T)})}),a.jsx("div",{className:"cb-ring-center",children:a.jsxs("div",{className:"cb-ring-logo",onClick:()=>wt.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:tt||"/Logo.webp",alt:tt?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${ie?" uploading":""}`,children:ie?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:wt,type:"file",accept:"image/*",onChange:vs,style:{display:"none"}})]})})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(y.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(y.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(y.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Cp[ns].text," ",a.jsx("strong",{children:Cp[ns].bold})]},ns)]}),a.jsx("div",{className:"cb-stats-row",children:be.map(b=>{const T=(b.size==="large",38),P=2*Math.PI*T,K=P-b.pct/100*P;return a.jsxs("div",{className:`cb-stat-item${b.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:"cb-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:T}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:T,style:{stroke:b.color},strokeDasharray:P,strokeDashoffset:K})]}),a.jsx("span",{className:"cb-stat-value",style:{color:b.color},children:b.value})]}),a.jsx("span",{className:"cb-stat-label",children:b.label})]},b.label)})}),a.jsxs("p",{className:"cb-coach-msg",children:[rt.main," ",a.jsx("strong",{children:Rs}),"  ",rt.sub]}),mt&&a.jsxs("button",{className:"cb-nudge-card",onClick:mt.action||void 0,style:mt.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-mt.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:mt.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:mt.label}),a.jsx("span",{className:"cb-nudge-title",children:mt.message}),mt.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[mt.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[a.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:b=>{Qn(b),g("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:de("protein"),color:"#14b8a6"},{label:"C",pct:de("carbs"),color:"var(--color-primary)"},{label:"F",pct:de("fats"),color:"#eab308"},{label:"Cal",pct:de("calories"),color:"#38B6FF"}].map(b=>{const P=2*Math.PI*38,K=P-b.pct/100*P;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:b.color},strokeDasharray:P,strokeDashoffset:K})]}),a.jsx("span",{style:{color:b.color},children:b.label})]},b.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:b=>{Qn(b),g("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[oe," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[te," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-grid-row",children:[a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:b=>{Qn(b),g("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:wi},(b,T)=>a.jsx("span",{className:`cb-habit-dot${T<M?" done":""}`},T))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[M,"/",wi," today"]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:b=>{Qn(b),g("/client/personal-bests?mode=corebuddy")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"PBs"}),fe.length>0?a.jsx("div",{className:"cb-pb-preview",children:fe.slice(0,2).map(b=>a.jsxs("div",{className:"cb-pb-entry",children:[a.jsx("span",{className:"cb-pb-name",children:b.name}),a.jsxs("span",{className:"cb-pb-value",children:[b.weight,"kg"]})]},b.name))}):a.jsxs("div",{className:"cb-progress-preview",children:[a.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{children:"Start lifting!"})]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:b=>{Qn(b),g("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),Me.length>0?a.jsx("div",{className:"cb-lb-preview",children:Me.map((b,T)=>{const P=["#FFD700","#A8B4C0","#CD7F32"][T],K=b.name?b.name.split(" ").map(ye=>ye[0]).join("").slice(0,2).toUpperCase():"?",Ae=b.id===n?.id;return a.jsxs("div",{className:`cb-lb-entry${Ae?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:P},children:b.photoURL?a.jsx("img",{src:b.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:K})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:P},children:["#",T+1]})]},b.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:b=>{Qn(b),g("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-achievements-section",children:[a.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),a.jsx("div",{className:"cb-badges-scroll",children:t2.map(b=>{const T=ut.includes(b.id);return a.jsxs("button",{className:`cb-badge${T?" unlocked":" locked"}`,onClick:()=>Ft(re?.id===b.id?null:b),children:[a.jsx("span",{className:"cb-badge-icon",children:b.icon}),a.jsx("span",{className:"cb-badge-name",children:b.name})]},b.id)})}),re&&a.jsxs("div",{className:"cb-badge-detail",children:[a.jsx("span",{className:"cb-badge-detail-icon",children:re.icon}),a.jsxs("div",{className:"cb-badge-detail-info",children:[a.jsx("strong",{children:re.name}),a.jsx("span",{children:re.desc}),ut.includes(re.id)?a.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"cb-badge-status locked",children:"Locked"})]})]}),a.jsxs("p",{className:"cb-badges-count",children:[ut.length,"/",t2.length," unlocked"]})]}),a.jsxs("div",{className:"cb-journey-section",children:[a.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:tt?a.jsx("img",{src:tt,alt:""}):a.jsx("span",{children:Rp(n?.name)})}),a.jsxs("div",{className:"journey-compose-body",children:[a.jsx("textarea",{ref:Yn,placeholder:"Share your progress...",value:et,onChange:le,rows:1,maxLength:500}),Ge&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:Ge,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:pt,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>Hn.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:Hn,type:"file",accept:"image/*",onChange:xt,hidden:!0}),(et.trim()||Be)&&a.jsx("button",{className:"journey-post-btn",onClick:Jt,disabled:St,children:St?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),je?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):cn.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:cn.map(b=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:b.authorPhotoURL?a.jsx("img",{src:b.authorPhotoURL,alt:""}):a.jsx("span",{children:Rp(b.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:b.authorName}),a.jsx("span",{className:"journey-post-time",children:e2(b.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>As(b.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),b.content&&a.jsx("p",{className:"journey-post-content",children:b.content}),b.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:b.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${Bt.has(b.id)?" liked":""}`,onClick:()=>as(b.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:Bt.has(b.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:b.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${Mn.has(b.id)?" active":""}`,onClick:()=>_n(b.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:b.commentCount||0})]})]}),Mn.has(b.id)&&a.jsxs("div",{className:"journey-comments",children:[an[b.id]?.length>0?an[b.id].map(T=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:T.authorPhotoURL?a.jsx("img",{src:T.authorPhotoURL,alt:""}):a.jsx("span",{children:Rp(T.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:T.authorName}),a.jsx("span",{className:"journey-comment-text",children:T.content})]}),a.jsx("span",{className:"journey-comment-time",children:e2(T.createdAt)})]})]},T.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:wn[b.id]||"",onChange:T=>ss(P=>({...P,[b.id]:T.target.value})),onKeyDown:T=>{T.key==="Enter"&&q(b.id)},maxLength:300}),a.jsx("button",{onClick:()=>q(b.id),disabled:!(wn[b.id]||"").trim()||rs[b.id],children:rs[b.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},b.id))})]})]})]}),a.jsx(da,{active:"home"}),Lt&&a.jsxs("div",{className:`toast-notification ${Lt.type}`,children:[Lt.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Lt.message]})]})}const Ap=new Map;function _i(){return new Date().toISOString().split("T")[0]}const n2=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],DD={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function PD(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function LD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=jr(),{isDark:l,toggleTheme:u,accent:d}=ma(),p=Vs(),[g,y]=k.useState("loading"),[w,E]=k.useState(null),[S,L]=k.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[W,z]=k.useState(null),[O,te]=k.useState(_i()),[X,he]=k.useState({entries:[],water:0}),[Se,Ue]=k.useState({protein:0,carbs:0,fats:0,calories:0}),[Le,A]=k.useState(!1),[j,R]=k.useState(!1),[D,M]=k.useState(()=>{const b=new Date;return{year:b.getFullYear(),month:b.getMonth()}}),[F,I]=k.useState(PD),[ze,vt]=k.useState(null),[Y,Ee]=k.useState(null),[Pe,oe]=k.useState(!1),[Ve,V]=k.useState(null),[G,fe]=k.useState(""),[Ne,Me]=k.useState(!1),[Oe,tt]=k.useState(""),[He,ie]=k.useState([]),[We,wt]=k.useState(!1),[ut,ft]=k.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[re,Ft]=k.useState(null),[kt,bt]=k.useState("100"),[jt,lt]=k.useState(0),[Ye,qt]=k.useState("weight"),[ns,Nt]=k.useState(0),[Lt,In]=k.useState(null);k.useRef(null);const Ct=k.useRef(!1),cn=k.useRef(null),ge=k.useRef(null),je=k.useRef(null),De=k.useCallback((b,T="info")=>{In({message:b,type:T}),setTimeout(()=>In(null),3e3)},[]);k.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),k.useEffect(()=>{if(!n?.id)return;(async()=>{try{const T=await An(Xe(Ie,"nutritionTargets",n.id));T.exists()?(E(T.data()),y("dashboard")):y("setup")}catch(T){console.error("Error loading nutrition data:",T),y("setup")}})()},[n?.id]),k.useEffect(()=>{if(!n?.id)return;(async()=>{try{const T=await An(Xe(Ie,"nutritionLogs",`${n.id}_${O}`));if(T.exists()){const P=T.data();he({entries:P.entries||[],water:P.water||0})}else he({entries:[],water:0})}catch(T){console.error("Error loading log:",T),he({entries:[],water:0})}})()},[n?.id,O]),k.useEffect(()=>{const b=X.entries.reduce((T,P)=>({protein:T.protein+(P.protein||0),carbs:T.carbs+(P.carbs||0),fats:T.fats+(P.fats||0),calories:T.calories+(P.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Ue(b)},[X.entries]);const et=async b=>{try{await xn(Xe(Ie,"nutritionLogs",`${n.id}_${O}`),{clientId:n.id,date:O,entries:b.entries,water:b.water,updatedAt:dt.now()})}catch(T){console.error("Error saving nutrition log:",T)}},Qe=O===_i(),Be=(b,T)=>new Date(b,T+1,0).getDate(),nt=(b,T)=>new Date(b,T,1).getDay(),Ge=["January","February","March","April","May","June","July","August","September","October","November","December"],$e=["Su","Mo","Tu","We","Th","Fr","Sa"],St=()=>{let b=parseFloat(S.weight);S.weightUnit==="lbs"&&(b*=.453592);let T;S.heightUnit==="cm"?T=parseFloat(S.height):T=(parseFloat(S.heightFeet)||0)*30.48+(parseFloat(S.heightInches)||0)*2.54;const P=parseInt(S.age);let K=S.gender==="male"?10*b+6.25*T-5*P+5:10*b+6.25*T-5*P-161;const ye=K*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[S.dailyActivity],xe={low:100,moderate:200,high:300,daily:400},st=Math.round(ye+xe[S.trainingFrequency]);let Ze=st,U,J;switch(S.goal){case"lose":Ze=st*(1-{light:.15,moderate:.2,harsh:.25}[S.deficitLevel]),U=2.2,J=.3;break;case"build":Ze=st*1.1,U=2,J=.22;break;default:U=1.8,J=.25}Ze=Math.max(Ze,S.gender==="male"?1400:1100);const Z=Math.round(b*U),pe=Math.round(Ze*J/9),ke=Math.max(0,Math.round((Ze-Z*4-pe*9)/4));z({calories:Math.round(Ze),protein:Z,carbs:ke,fats:pe,bmr:Math.round(K),neat:Math.round(ye),exerciseAdd:xe[S.trainingFrequency],tdee:Math.round(st)})},Xt=async()=>{if(W)try{const b={clientId:n.id,calories:W.calories,protein:W.protein,carbs:W.carbs,fats:W.fats,waterGoal:8,goal:S.goal,updatedAt:dt.now()};await xn(Xe(Ie,"nutritionTargets",n.id),b),E(b),y("dashboard"),De("Macro targets saved!","success")}catch(b){console.error("Error saving targets:",b),De("Failed to save targets. Please try again.","error")}},Bt=()=>{const b=S.weight&&parseFloat(S.weight)>0,T=S.age&&parseInt(S.age)>0,P=S.heightUnit==="cm"?S.height&&parseFloat(S.height)>0:S.heightFeet&&parseFloat(S.heightFeet)>0||S.heightInches&&parseFloat(S.heightInches)>0;return b&&T&&P},tn="nut_favourite_foods",Mn=()=>{try{return JSON.parse(localStorage.getItem(tn)||"[]")}catch{return[]}},Rt=b=>Mn().some(T=>T.name.toLowerCase()===(b||"").toLowerCase()),an=b=>{const T=Mn(),P=T.findIndex(K=>K.name.toLowerCase()===b.name.toLowerCase());P>=0?T.splice(P,1):T.unshift({name:b.name,protein:b.protein,carbs:b.carbs,fats:b.fats,calories:b.calories,serving:b.serving,per100g:b.per100g||null,servingUnit:b.servingUnit||"g",portion:b.portion||null}),localStorage.setItem(tn,JSON.stringify(T)),Nt(K=>K+1)},Un=b=>{const T=[...X.entries,{...b,meal:F,id:Date.now(),addedAt:new Date().toISOString()}],P={...X,entries:T};he(P),et(P),Ee(null),Ft(null),bt("100"),lt(0),qt("weight"),ft({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),De("Food added!","success")},wn=b=>{const T=X.entries.filter(K=>K.id!==b),P={...X,entries:T};he(P),et(P)},ss=k.useRef(null),rs=async()=>{oe(!0);const b=document.querySelector("#barcode-reader");if(!b){oe(!1),De("Scanner container not found.","error");return}if(!ss.current)try{const P=await Er(()=>import("./quagga.min-BbicSfvA.js").then(K=>K.q),[]);ss.current=P.default}catch(P){console.error("Failed to load barcode scanner:",P),oe(!1),De("Could not load scanner.","error");return}const T=ss.current;T.init({inputStream:{type:"LiveStream",target:b,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},P=>{if(P){console.error("Quagga init error:",P),oe(!1),De("Could not access camera. Check permissions.","error");return}T.start(),Ct.current=!0}),T.onDetected(P=>{const K=P.codeResult.decodedCodes?.filter(ye=>ye.error!==void 0)?.map(ye=>ye.error)||[];if((K.length>0?K.reduce((ye,xe)=>ye+xe,0)/K.length:1)<.15){const ye=P.codeResult.code;T.offDetected(),V(ye)}})},Sn=()=>{const b=ss.current;Ct.current&&b&&(b.stop(),b.offDetected(),Ct.current=!1),oe(!1)},Yn=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,Hn=b=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((b||"").replace(/\s/g,"")),vs=b=>{if(!b)return{value:100,unit:"g"};const T=b.toLowerCase().replace(/\s/g,""),P=T.match(/([\d.]+)/),K=P?parseFloat(P[1]):100;return Hn(b)?/cl/.test(T)?{value:K*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(T)&&!/ml/.test(T)?{value:K*1e3,unit:"ml"}:{value:K,unit:"ml"}:{value:K,unit:"g"}},Qn=b=>{if(Hn(b.serving_size)||Hn(b.quantity))return"ml";const T=b.product_name||b.product_name_en||"";return Yn.test(T)?"ml":"g"},Rs=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],H=(b,T)=>{const P=b||"",K=P.match(/\((\d+\.?\d*)\s*g\)/i),Ae=P.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(K&&Ae){const st=parseFloat(K[1]);let Ze=Ae[1].replace(/^\d+\s*/,"").trim();if(Ze&&st>0)return{label:Ze,weight:st}}const ye=P.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(ye){const st=parseFloat(ye[1]);let Ze=ye[2].replace(/^\d+\s*/,"").trim();if(Ze&&st>0)return{label:Ze,weight:st}}const xe=T||"";for(const{pattern:st,label:Ze,weight:U}of Rs)if(st.test(xe))return{label:Ze,weight:U};return null},me=b=>{const T=b.nutriments||{},P=Qn(b),K=vs(b.serving_size),Ae=P==="ml"?K.unit==="ml"?K.value:100:K.value,ye=b.product_name||b.product_name_en||"Unknown Product",xe=H(b.serving_size,ye);return{name:ye,brand:b.brands||"",image:b.image_small_url||b.image_url||null,servingSize:b.serving_size||"100g",servingValue:Ae,servingUnit:P,portion:xe,protein:Math.round(T.proteins_100g||T.proteins||0),carbs:Math.round(T.carbohydrates_100g||T.carbohydrates||0),fats:Math.round(T.fat_100g||T.fat||0),calories:Math.round(T["energy-kcal_100g"]||T["energy-kcal"]||(T.energy_100g?T.energy_100g/4.184:0)),per100g:!0}},we=async b=>{Me(!0);try{const T=`https://world.openfoodfacts.org/api/v2/product/${b}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,P=await fetch(T);if(!P.ok)throw new Error(`HTTP ${P.status}`);const K=await P.json();if(K.status==="success"||K.status===1||K.product){const Ae=me(K.product);Ae.calories===0&&Ae.protein===0&&Ae.carbs===0?De("Product found but no nutrition data available.","error"):(Ft(Ae),Ae.portion?(lt(1),bt(String(Ae.portion.weight)),qt("portion")):(lt(0),bt(String(Ae.servingValue||100)),qt("weight")),fe(""))}else De("Product not found. Try search or manual entry.","error")}catch(T){console.error("Barcode lookup error:",T),De("Failed to look up product. Check your connection.","error")}Me(!1)},be=(b,T,P)=>{const K=b.toLowerCase().trim(),Ae=T.toLowerCase().trim(),ye=P.toLowerCase().trim();let xe=0;return(K===ye||K===ye+"s"||K+"s"===ye)&&(xe+=100),(K.endsWith(" "+ye)||K.endsWith(" "+ye+"s"))&&(xe+=40),(K.startsWith(ye+" ")||K.startsWith(ye+"s "))&&(xe+=15),ye.split(/\s+/).some(Ze=>Ae===Ze||Ae.startsWith(Ze))&&(xe+=30),xe+=Math.max(0,30-K.length),xe},de=async()=>{if(!Oe.trim())return;cn.current&&cn.current.abort();const b=new AbortController;cn.current=b;const T=Oe.trim().toLowerCase(),P=T.split(/\s+/).filter(Boolean);if(Ap.has(T)){ie(Ap.get(T));return}wt(!0);try{const Ae=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Oe.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,ye=await fetch(Ae,{signal:b.signal});if(!ye.ok)throw new Error(`HTTP ${ye.status}`);const st=((await ye.json()).products||[]).map(Ze=>me(Ze)).filter(Ze=>Ze.name!=="Unknown Product"&&(Ze.calories>0||Ze.protein>0)).filter(Ze=>{const U=(Ze.name+" "+Ze.brand).toLowerCase();return P.every(J=>U.includes(J))}).sort((Ze,U)=>be(U.name,U.brand,T)-be(Ze.name,Ze.brand,T)).slice(0,10);Ap.set(T,st),ie(st),st.length===0&&De("No results found. Try a different search.","info")}catch(K){if(K.name==="AbortError")return;console.error("Search error:",K),De("Search failed. Check your connection.","error")}wt(!1)};k.useEffect(()=>{if(ge.current&&clearTimeout(ge.current),!(!Oe.trim()||Y!=="search"||re))return ge.current=setTimeout(()=>{de()},700),()=>clearTimeout(ge.current)},[Oe]);const rt=()=>{const b={...X,water:X.water+1};he(b),et(b)},mt=()=>{if(X.water<=0)return;const b={...X,water:X.water-1};he(b),et(b)},it={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},xt=80,pt=2*Math.PI*xt,Jt=(b,T,P,K,Ae)=>{const ye=K>0?Math.min(100,Math.round(P/K*100)):0,xe=pt-ye/100*pt,st=it[Ae]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:xt}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:xt,style:{stroke:st},strokeDasharray:pt,strokeDashoffset:xe})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:st},children:Math.round(P)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",K,b==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:st},children:T})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:st},children:[ye,"%"]})]})};if(k.useEffect(()=>{if(!Ve)return;const b=setTimeout(()=>{const T=Ve;Sn(),V(null),we(T)},1500);return()=>clearTimeout(b)},[Ve]),k.useEffect(()=>()=>{const b=ss.current;if(Ct.current&&b){try{b.stop(),b.offDetected()}catch{}Ct.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:S.gender==="male"?"active":"",onClick:()=>{L(b=>({...b,gender:"male"})),z(null)},children:"Male"}),a.jsx("button",{className:S.gender==="female"?"active":"",onClick:()=>{L(b=>({...b,gender:"female"})),z(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:S.age,onChange:b=>{L(T=>({...T,age:b.target.value})),z(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:S.weight,onChange:b=>{L(T=>({...T,weight:b.target.value})),z(null)},placeholder:S.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:S.weightUnit==="kg"?"active":"",onClick:()=>{L(b=>({...b,weightUnit:"kg"})),z(null)},children:"kg"}),a.jsx("button",{className:S.weightUnit==="lbs"?"active":"",onClick:()=>{L(b=>({...b,weightUnit:"lbs"})),z(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[S.heightUnit==="cm"?a.jsx("input",{type:"number",value:S.height,onChange:b=>{L(T=>({...T,height:b.target.value})),z(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:S.heightFeet,onChange:b=>{L(T=>({...T,heightFeet:b.target.value})),z(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:S.heightInches,onChange:b=>{L(T=>({...T,heightInches:b.target.value})),z(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:S.heightUnit==="cm"?"active":"",onClick:()=>{L(b=>({...b,heightUnit:"cm"})),z(null)},children:"cm"}),a.jsx("button",{className:S.heightUnit==="ft"?"active":"",onClick:()=>{L(b=>({...b,heightUnit:"ft"})),z(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:S.dailyActivity,onChange:b=>{L(T=>({...T,dailyActivity:b.target.value})),z(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:S.trainingFrequency,onChange:b=>{L(T=>({...T,trainingFrequency:b.target.value})),z(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:S.goal==="lose"?"active":"",onClick:()=>{L(b=>({...b,goal:"lose"})),z(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:S.goal==="maintain"?"active":"",onClick:()=>{L(b=>({...b,goal:"maintain"})),z(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:S.goal==="build"?"active":"",onClick:()=>{L(b=>({...b,goal:"build"})),z(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),S.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:S.deficitLevel==="light"?"active":"",onClick:()=>{L(b=>({...b,deficitLevel:"light"})),z(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:S.deficitLevel==="moderate"?"active":"",onClick:()=>{L(b=>({...b,deficitLevel:"moderate"})),z(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:S.deficitLevel==="harsh"?"active":"",onClick:()=>{L(b=>({...b,deficitLevel:"harsh"})),z(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:St,disabled:!Bt(),children:"Calculate Macros"})]}),W&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[Jt("Protein","Protein",W.protein,W.protein,"ring-protein"),Jt("Carbs","Carbs",W.carbs,W.carbs,"ring-carbs"),Jt("Fats","Fats",W.fats,W.fats,"ring-fats"),Jt("Calories","Calories",W.calories,W.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[W.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[W.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",W.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[W.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:Xt,children:"Set as My Daily Targets"})]})]}),Lt&&a.jsx("div",{className:`toast-notification ${Lt.type}`,children:Lt.message})]});const As=b=>{const T=new Date(b+"T12:00:00"),P=T.getDay(),K=new Date(T);K.setDate(T.getDate()-(P+6)%7);const Ae=[];for(let ye=0;ye<7;ye++){const xe=new Date(K);xe.setDate(K.getDate()+ye),Ae.push(xe.toISOString().split("T")[0])}return Ae},as=["M","T","W","T","F","S","S"],bs=(b,T="search")=>{I(b),T==="scan"?(Ee("scan"),Ft(null)):T==="manual"?(Ee("manual"),ft({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):T==="favourites"?Ee("favourites"):(Ee("search"),ie([]),tt(""))},_n=As(O),q=new Date(O+"T12:00:00"),le=`${Ge[q.getMonth()]} ${q.getFullYear()}`;return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),z(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const b=new Date(O+"T12:00:00");b.setDate(b.getDate()-7);const T=b.toISOString().split("T")[0];te(T)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{A(!Le),M({year:q.getFullYear(),month:q.getMonth()})},children:le}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const b=new Date(O+"T12:00:00");b.setDate(b.getDate()+7);const T=b.toISOString().split("T")[0];T<=_i()&&te(T)},"aria-label":"Next week",disabled:_n[6]>=_i(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:_n.map((b,T)=>{const P=new Date(b+"T12:00:00").getDate(),K=b===O,Ae=b>_i(),ye=b===_i();return a.jsxs("button",{className:`nut-week-day${K?" selected":""}${ye?" today":""}${Ae?" future":""}`,disabled:Ae,onClick:()=>te(b),children:[a.jsx("span",{className:"nut-week-day-letter",children:as[T]}),a.jsx("span",{className:"nut-week-day-num",children:P})]},b)})})]}),Le&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>M(b=>{let T=b.month-1,P=b.year;return T<0&&(T=11,P--),{year:P,month:T}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Ge[D.month]," ",D.year]}),a.jsx("button",{onClick:()=>M(b=>{let T=b.month+1,P=b.year;return T>11&&(T=0,P++),{year:P,month:T}}),disabled:D.year===new Date().getFullYear()&&D.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:$e.map(b=>a.jsx("span",{children:b},b))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(nt(D.year,D.month))].map((b,T)=>a.jsx("span",{},`e${T}`)),[...Array(Be(D.year,D.month))].map((b,T)=>{const P=T+1,K=`${D.year}-${String(D.month+1).padStart(2,"0")}-${String(P).padStart(2,"0")}`,Ae=K>_i(),ye=K===O,xe=K===_i();return a.jsx("button",{className:`nut-cal-day${ye?" selected":""}${xe?" today":""}${Ae?" future":""}`,disabled:Ae,onClick:()=>{te(K),A(!1)},children:P},P)})]})]}),a.jsxs("div",{className:"nut-rings-row",children:[Jt("Protein","Protein",Se.protein,w.protein,"ring-protein"),Jt("Carbs","Carbs",Se.carbs,w.carbs,"ring-carbs"),Jt("Fats","Fats",Se.fats,w.fats,"ring-fats"),Jt("Calories","kCal",Se.calories,w.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone",children:a.jsxs("div",{className:"nut-light-content",children:[Qe&&a.jsxs("button",{className:"nut-water-quick",onClick:()=>R(!0),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsxs("span",{className:"nut-water-quick-count",children:[X.water," / ",w?.waterGoal||8]}),a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:n2.map(b=>{const T=X.entries.filter(K=>(K.meal||"snacks")===b.key),P=T.reduce((K,Ae)=>({protein:K.protein+(Ae.protein||0),carbs:K.carbs+(Ae.carbs||0),fats:K.fats+(Ae.fats||0),calories:K.calories+(Ae.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${b.key}`,children:DD[b.key]}),a.jsx("span",{className:"nut-meal-card-title",children:b.label}),T.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[P.calories," cal"]}),Qe&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>vt(ze===b.key?null:b.key),"aria-label":`Add to ${b.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),T.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,w.protein>0?P.protein/w.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[P.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,w.carbs>0?P.carbs/w.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[P.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,w.fats>0?P.fats/w.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[P.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,w.calories>0?P.calories/w.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:P.calories})]})]}),T.length>0&&a.jsx("div",{className:"nut-log-list",children:T.map(K=>a.jsxs("div",{className:"nut-log-item",children:[a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:K.name}),K.serving&&a.jsx("span",{className:"nut-log-item-serving",children:K.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[K.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[K.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[K.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:K.calories})]}),Qe&&a.jsx("button",{className:"nut-log-delete",onClick:()=>wn(K.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},K.id))}),T.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:Qe?"Tap + to add food":"No entries"})})]},b.key)})})})]})}),ze&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>vt(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",n2.find(b=>b.key===ze)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const b=ze;vt(null),bs(b,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const b=ze;vt(null),bs(b,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const b=ze;vt(null),bs(b,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const b=ze;vt(null),bs(b,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),j&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>R(!1),children:a.jsxs("div",{className:"nut-water-popup",onClick:b=>b.stopPropagation(),children:[a.jsxs("div",{className:"nut-water-popup-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsx("span",{children:"Water Intake"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>R(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"nut-water-popup-body",children:[a.jsx("div",{className:"nut-water-glasses",children:[...Array(w?.waterGoal||8)].map((b,T)=>a.jsx("div",{className:`nut-water-glass ${T<X.water?"filled":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:T<X.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},T))}),a.jsxs("div",{className:"nut-water-popup-count",children:[X.water," / ",w?.waterGoal||8," glasses"]}),a.jsxs("div",{className:"nut-water-btns",children:[a.jsx("button",{onClick:mt,disabled:X.water<=0,children:"-"}),a.jsx("button",{onClick:rt,children:"+"})]})]})]})}),Y&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{Sn(),V(null),Ee(null),Ft(null)},children:a.jsxs("div",{className:"nut-modal",onClick:b=>b.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:Y==="scan"?"Scan Barcode":Y==="search"?"Search Food":Y==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{Sn(),V(null),Ee(null),Ft(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Y==="scan"&&!re&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),Pe&&!Ve&&a.jsx("div",{className:"nut-scan-line"}),Ve&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:Ve})]})]}),!Pe&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:rs,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),Pe&&!Ve&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:G,onChange:b=>fe(b.target.value),onKeyDown:b=>b.key==="Enter"&&G.trim()&&we(G.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>G.trim()&&we(G.trim()),disabled:!G.trim()||Ne,children:Ne?"...":"Look Up"})]})]}),Y==="scan"&&re&&(()=>{const b=re.servingUnit||"g",T=re.portion,P=Ye==="portion"&&T?jt*T.weight:parseFloat(kt)||0,K=P/100,Ae=b==="ml"?[100,200,250,500]:[50,100,150,200],ye=Ye==="portion"&&T?`${jt} ${T.label}${jt!==1?"s":""} (${Math.round(P)}${b})`:`${Math.round(P)}${b}`;return a.jsxs("div",{className:"nut-product-result",children:[re.image&&a.jsx("img",{src:re.image,alt:re.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:re.name}),a.jsx("button",{className:`nut-fav-star confirm${Rt(re.name)?" active":""}`,onClick:()=>an({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.servingSize,per100g:{protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories},servingUnit:re.servingUnit||"g",portion:re.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Rt(re.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),re.brand&&a.jsx("p",{className:"nut-product-brand",children:re.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",b,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[re.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[re.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[re.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[re.calories," cal"]})]}),T&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Ye==="portion"?"active":"",onClick:()=>{qt("portion"),jt<1&&lt(1)},children:"Portions"}),a.jsxs("button",{className:Ye==="weight"?"active":"",onClick:()=>{qt("weight"),bt(String(Math.round(P)||100))},children:["Custom (",b,")"]})]}),Ye==="portion"&&T?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Math.max(1,jt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:jt}),a.jsxs("span",{className:"nut-stepper-label",children:[T.label,jt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(P),b]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(jt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",b,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:kt,onChange:xe=>bt(xe.target.value),onFocus:xe=>xe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ae.map(xe=>a.jsxs("button",{className:`nut-quick-btn${kt===String(xe)?" active":""}`,onClick:()=>bt(String(xe)),children:[xe,b]},xe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(re.protein*K),"p / ",Math.round(re.carbs*K),"c / ",Math.round(re.fats*K),"f / ",Math.round(re.calories*K)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{Ft(null),Ee("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Un({name:re.name,protein:Math.round(re.protein*K),carbs:Math.round(re.carbs*K),fats:Math.round(re.fats*K),calories:Math.round(re.calories*K),serving:ye}),children:"Add"})]})]})})(),Y==="search"&&!re&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:je,value:Oe,onChange:b=>tt(b.target.value),onKeyDown:b=>{b.key==="Enter"&&(clearTimeout(ge.current),de())},onFocus:()=>setTimeout(()=>je.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:de,disabled:We,children:We?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[He.map((b,T)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{Ft(b),b.portion?(lt(1),bt(String(b.portion.weight)),qt("portion")):(lt(0),bt(String(b.servingValue||100)),qt("weight"))},children:[b.image&&a.jsx("img",{src:b.image,alt:b.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:b.name}),b.brand&&a.jsx("span",{className:"nut-search-item-brand",children:b.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[b.calories," cal  ",b.protein,"p  ",b.carbs,"c  ",b.fats,"f per 100",b.servingUnit||"g"]})]})]},T)),He.length===0&&Oe&&!We&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Y==="search"&&re&&(()=>{const b=re.servingUnit||"g",T=re.portion,P=Ye==="portion"&&T?jt*T.weight:parseFloat(kt)||0,K=P/100,Ae=b==="ml"?[100,200,250,500]:[50,100,150,200],ye=Ye==="portion"&&T?`${jt} ${T.label}${jt!==1?"s":""} (${Math.round(P)}${b})`:`${Math.round(P)}${b}`;return a.jsxs("div",{className:"nut-product-result",children:[re.image&&a.jsx("img",{src:re.image,alt:re.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:re.name}),a.jsx("button",{className:`nut-fav-star confirm${Rt(re.name)?" active":""}`,onClick:()=>an({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.servingSize,per100g:{protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories},servingUnit:re.servingUnit||"g",portion:re.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Rt(re.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),re.brand&&a.jsx("p",{className:"nut-product-brand",children:re.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",b,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[re.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[re.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[re.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[re.calories," cal"]})]}),T&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Ye==="portion"?"active":"",onClick:()=>{qt("portion"),jt<1&&lt(1)},children:"Portions"}),a.jsxs("button",{className:Ye==="weight"?"active":"",onClick:()=>{qt("weight"),bt(String(Math.round(P)||100))},children:["Custom (",b,")"]})]}),Ye==="portion"&&T?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Math.max(1,jt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:jt}),a.jsxs("span",{className:"nut-stepper-label",children:[T.label,jt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(P),b]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(jt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",b,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:kt,onChange:xe=>bt(xe.target.value),onFocus:xe=>xe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ae.map(xe=>a.jsxs("button",{className:`nut-quick-btn${kt===String(xe)?" active":""}`,onClick:()=>bt(String(xe)),children:[xe,b]},xe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(re.protein*K),"p / ",Math.round(re.carbs*K),"c / ",Math.round(re.fats*K),"f / ",Math.round(re.calories*K)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>Ft(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Un({name:re.name,protein:Math.round(re.protein*K),carbs:Math.round(re.carbs*K),fats:Math.round(re.fats*K),calories:Math.round(re.calories*K),serving:ye}),children:"Add"})]})]})})(),Y==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:ut.name,onChange:b=>ft(T=>({...T,name:b.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:ut.serving,onChange:b=>ft(T=>({...T,serving:b.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:ut.protein,onChange:b=>ft(T=>({...T,protein:b.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:ut.carbs,onChange:b=>ft(T=>({...T,carbs:b.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:ut.fats,onChange:b=>ft(T=>({...T,fats:b.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:ut.calories,onChange:b=>ft(T=>({...T,calories:b.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!ut.name.trim(),onClick:()=>Un({name:ut.name,protein:parseFloat(ut.protein)||0,carbs:parseFloat(ut.carbs)||0,fats:parseFloat(ut.fats)||0,calories:parseFloat(ut.calories)||0,serving:ut.serving||""}),children:"Add Food"})]}),Y==="favourites"&&!re&&(()=>{const b=Mn(),T=P=>{if(P.per100g){const K=P.per100g;Ft({name:P.name,brand:"",image:null,servingSize:P.serving||"100g",servingValue:100,servingUnit:P.servingUnit||"g",portion:P.portion||null,protein:K.protein,carbs:K.carbs,fats:K.fats,calories:K.calories,per100g:!0}),P.portion?(lt(1),bt(String(P.portion.weight)),qt("portion")):(lt(0),bt("100"),qt("weight"))}else Un({name:P.name,protein:P.protein,carbs:P.carbs,fats:P.fats,calories:P.calories,serving:P.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:b.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:b.map((P,K)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:Ae=>{Ae.stopPropagation(),an(P)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>T(P),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:P.name}),a.jsx("span",{className:"nut-recent-item-serving",children:P.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[P.calories," cal"]})]})]},K))})})})(),Y==="favourites"&&re&&(()=>{const b=re.servingUnit||"g",T=re.portion,P=Ye==="portion"&&T?jt*T.weight:parseFloat(kt)||0,K=P/100,Ae=b==="ml"?[100,200,250,500]:[50,100,150,200],ye=Ye==="portion"&&T?`${jt} ${T.label}${jt!==1?"s":""} (${Math.round(P)}${b})`:`${Math.round(P)}${b}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:re.name}),a.jsx("button",{className:`nut-fav-star confirm${Rt(re.name)?" active":""}`,onClick:()=>an({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.servingSize,per100g:{protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories},servingUnit:re.servingUnit||"g",portion:re.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Rt(re.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",b,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[re.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[re.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[re.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[re.calories," cal"]})]}),T&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Ye==="portion"?"active":"",onClick:()=>{qt("portion"),jt<1&&lt(1)},children:"Portions"}),a.jsxs("button",{className:Ye==="weight"?"active":"",onClick:()=>{qt("weight"),bt(String(Math.round(P)||100))},children:["Custom (",b,")"]})]}),Ye==="portion"&&T?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(Math.max(1,jt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:jt}),a.jsxs("span",{className:"nut-stepper-label",children:[T.label,jt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(P),b]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>lt(jt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",b,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:kt,onChange:xe=>bt(xe.target.value),onFocus:xe=>xe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ae.map(xe=>a.jsxs("button",{className:`nut-quick-btn${kt===String(xe)?" active":""}`,onClick:()=>bt(String(xe)),children:[xe,b]},xe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(re.protein*K),"p / ",Math.round(re.carbs*K),"c / ",Math.round(re.fats*K),"f / ",Math.round(re.calories*K)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>Ft(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Un({name:re.name,protein:Math.round(re.protein*K),carbs:Math.round(re.carbs*K),fats:Math.round(re.fats*K),calories:Math.round(re.calories*K),serving:ye}),children:"Add"})]})]})})()]})}),a.jsx(da,{active:"nutrition"}),Lt&&a.jsx("div",{className:`toast-notification ${Lt.type}`,children:Lt.message})]})}const s2="/login/assets/randomiser-glq9YJkL.jpg",OD="/login/assets/programme-card-workout-CnNzTYkz.webp",VD="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",BD="/login/assets/mg-arms-BeOQU3wx.jpg",UD=60,Ip=5,zD=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],FD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},qD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},HD={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Mp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Dp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:VD},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],qc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:BD},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],r2={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},a2=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Pp=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],gl=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],$D=[5,10,15,20,30];function WD(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function GD(s){const e=[...s];for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}function KD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=jr(),{isDark:l,toggleTheme:u,accent:d}=ma(),p=Vs(),[g,y]=k.useState("menu"),[w,E]=k.useState(["bodyweight"]),[S,L]=k.useState("core"),[W,z]=k.useState("intermediate"),[O,te]=k.useState(15),[X,he]=k.useState([]),[Se,Ue]=k.useState(!1),Le=k.useRef(!1),A=k.useRef([]),[j,R]=k.useState([]),[D,M]=k.useState(2),[F,I]=k.useState(gl[1]),[ze,vt]=k.useState(1),[Y,Ee]=k.useState(0),[Pe,oe]=k.useState("work"),[Ve,V]=k.useState(0),[G,fe]=k.useState(!1),[Ne,Me]=k.useState(0),[Oe,tt]=k.useState(null),He=k.useRef(null);k.useRef(null),k.useRef(null);const[ie,We]=k.useState(null),wt=k.useCallback((U,J="info")=>{We({message:U,type:J}),setTimeout(()=>We(null),3e3)},[]),[ut,ft]=k.useState(null),[re,Ft]=k.useState(null),[kt,bt]=k.useState(0),[jt,lt]=k.useState(0),[Ye,qt]=k.useState([]),[ns,Nt]=k.useState(""),[Lt,In]=k.useState(""),[Ct,cn]=k.useState(!1),[ge,je]=k.useState(0),[De,et]=k.useState(!1),[Qe,Be]=k.useState({}),nt=k.useRef(null),Ge=k.useRef(null),[$e,St]=k.useState([]),[Xt,Bt]=k.useState(null),[tn,Mn]=k.useState(0),[Rt,an]=k.useState(0),[Un,wn]=k.useState(0),[ss,rs]=k.useState(0),[Sn,Yn]=k.useState(0),[Hn,vs]=k.useState(0),[Qn,Rs]=k.useState({beginner:0,intermediate:0,advanced:0}),[H,me]=k.useState(null),[we,be]=k.useState(""),[de,rt]=k.useState(!1);k.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),k.useEffect(()=>{if(!s||!n)return;(async()=>{try{const J=rn(Ie,"workoutLogs"),Z=On(J,bn("clientId","==",n.id)),ke=(await En(Z)).docs.map(zt=>zt.data()),Fe=ke.filter(zt=>zt.type!=="programme");rs(Fe.length);const ot=Fe.reduce((zt,Tn)=>zt+(Tn.duration||0),0);Yn(ot);const Ke={beginner:0,intermediate:0,advanced:0};Fe.forEach(zt=>{zt.level&&Ke[zt.level]!==void 0&&Ke[zt.level]++}),Rs(Ke);const Ot=new Date,dn=Ot.getDay(),Ut=dn===0?-6:1-dn,un=new Date(Ot);un.setDate(Ot.getDate()+Ut),un.setHours(0,0,0,0);const Zs=un.getTime(),is=ke.filter(zt=>{const Tn=zt.completedAt;return Tn?(Tn.toDate?Tn.toDate().getTime():new Date(Tn).getTime())>=Zs:!1});Mn(is.filter(zt=>zt.type!=="programme").length);let ms=0;if(n)try{const zt=await An(Xe(Ie,"clientProgrammes",n.id));if(zt.exists()){const Tn=zt.data(),Nn=Tn.templateId;ms=is.filter(Dn=>Dn.type==="programme"&&Dn.programmeId===Nn).length,me(Nn);const er=Dp.find(Dn=>Dn.id===Nn);er&&be(er.name);const Is=qD[Nn];if(Is){const Dn=Object.keys(Tn.completedSessions||{}).length,zn=Is.duration*Is.daysPerWeek;wn(zn>0?Math.round(Dn/zn*100):0)}}else me(null),be(""),wn(0)}catch{}an(ms);const ps=Fe.map(zt=>zt.completedAt).filter(Boolean).map(zt=>zt.toDate?zt.toDate().getTime():new Date(zt).getTime()).sort((zt,Tn)=>Tn-zt);if(ps.length===0)vs(0);else{const zt=new Set;ps.forEach(zn=>{const $r=new Date(zn),Sr=$r.getDay(),Wa=Sr===0?-6:1-Sr,Bs=new Date($r);Bs.setDate($r.getDate()+Wa),Bs.setHours(0,0,0,0),zt.add(Bs.getTime())});const Tn=[...zt].sort((zn,$r)=>$r-zn);let Nn=0;const er=new Date(Ot),Is=Ot.getDay()===0?-6:1-Ot.getDay();er.setDate(Ot.getDate()+Is),er.setHours(0,0,0,0);let Dn=er.getTime();Tn.includes(Dn)||(Dn-=10080*60*1e3);for(let zn=0;zn<200&&Tn.includes(Dn);zn++)Nn++,Dn-=10080*60*1e3;vs(Nn)}}catch(J){console.error("Error loading workout stats:",J)}finally{rt(!0)}})()},[s,n,g]);const mt=()=>{const U=[];let J;S==="mix"?J=["core","upper","lower"]:S==="fullbody"?J=["upper","lower"]:J=[S];for(const Z of w)for(const pe of J)U.push(`exercises/${Z}/${pe}`);return U},it=async()=>{if(Le.current){for(;Le.current;)await new Promise(U=>setTimeout(U,200));return A.current}Le.current=!0,Ue(!0);try{const U=mt(),J=[];for(const Fe of U)try{const ot=bo(xo,Fe),Ke=await Zx(ot);J.push(...Ke.items)}catch{console.warn(`Folder ${Fe} not found, skipping.`)}if(J.length===0&&w.includes("bodyweight")&&S==="core")try{const Fe=bo(xo,"core"),ot=await Zx(Fe);J.push(...ot.items)}catch{console.warn("Legacy core/ folder not found either.")}if(J.length===0){const Fe=w.map(Ke=>a2.find(Ot=>Ot.key===Ke)?.label).join(" + "),ot=Pp.find(Ke=>Ke.key===S)?.label;return wt(`No exercises found for ${Fe} / ${ot}. Upload videos to Firebase Storage.`,"error"),Le.current=!1,Ue(!1),[]}const Z=new Set,pe=J.filter(Fe=>{const ot=Fe.name.replace(/\.(mp4|gif)$/i,"");return Z.has(ot)?!1:(Z.add(ot),!0)}),ke=await Promise.all(pe.map(async Fe=>{const ot=await Al(Fe),Ke=WD(Fe.name.replace(/\.(mp4|gif)$/i,"")),Ot=/\.gif$/i.test(Fe.name);return{name:Ke,videoUrl:ot,isGif:Ot}}));return A.current=ke,he(ke),Le.current=!1,Ue(!1),ke}catch(U){console.error("Error loading exercises:",U);const J=U.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${U.message||U.code||"Unknown error"}`;return wt(J,"error"),Le.current=!1,Ue(!1),[]}},xt=async()=>{y("spinning"),A.current=[];const U=await it();if(U.length===0){y("setup");return}const J=gl.find(dn=>dn.key===W);I(J);const Z=J.work+J.rest,pe=O*60,ke=Math.floor(pe/Z);let Fe,ot;ke<=6?(Fe=Math.max(3,Math.floor(ke/2)),ot=Math.floor(ke/Fe)):ke<=12?(Fe=Math.min(6,Math.floor(ke/2)),ot=Math.floor(ke/Fe)):(Fe=Math.min(10,Math.floor(ke/2)),ot=Math.floor(ke/Fe)),ot=Math.max(2,ot);const Ke=GD(U),Ot=Ke.slice(0,Math.min(Fe,Ke.length));R(Ot),M(ot),setTimeout(()=>y("preview"),2e3)},pt=()=>{y("countdown"),Me(3)};k.useEffect(()=>{if(g!=="countdown")return;if(Ne<=0){y("workout"),vt(1),Ee(0),oe("work"),V(F.work),fe(!1),ye();return}Ae();const U=setTimeout(()=>Me(J=>J-1),1e3);return()=>clearTimeout(U)},[Ne,g]),k.useEffect(()=>{if(g!=="workout"||G)return;if(Ve<=0){Jt();return}Ve<=3&&Ae();const U=setTimeout(()=>V(J=>J-1),1e3);return()=>clearTimeout(U)},[Ve,g,G]);const Jt=()=>{if(Pe==="work")oe("rest"),V(F.rest);else{const U=Y+1;if(U>=j.length){const J=ze+1;if(J>D){y("complete"),As();return}vt(J),Ee(0)}else Ee(U);oe("work"),V(F.work),ye()}},As=async()=>{if(s)try{await Bl(rn(Ie,"workoutLogs"),{clientId:n.id,level:W,duration:O,equipment:w,focus:S,exerciseCount:j.length,rounds:D,exercises:j.map(U=>U.name),completedAt:dt.now()}),Mn(U=>U+1),rs(U=>U+1),Yn(U=>U+O),Rs(U=>({...U,[W]:(U[W]||0)+1}))}catch(U){console.error("Error saving workout log:",U)}},as=async(U,J,Z)=>{if(!(!n||!J))try{const pe=n.id,ke=await An(Xe(Ie,"coreBuddyPBs",pe)),ot=(ke.exists()?ke.data():null)?.exercises||{},Ke=ot[U];let Ot=!1;if(Ke?(J>(Ke.weight||0)||J===(Ke.weight||0)&&Z>(Ke.reps||0))&&(Ot=!0):Ot=!0,Ot){const dn={...ot,[U]:{weight:J,reps:Z,achievedAt:dt.now()}};await xn(Xe(Ie,"coreBuddyPBs",pe),{clientId:n.id,exercises:dn,updatedAt:dt.now()}),wt(`New PB! ${J}kg  ${Z} reps`,"success"),Ae(),await bs(U,J)}}catch(pe){console.error("Error checking PB:",pe)}},bs=async(U,J)=>{if(n)try{const Z=await An(Xe(Ie,"coreBuddyTargets",n.id));if(!Z.exists())return;const ke=(Z.data().targets||{})[U];if(!ke||J<ke.targetWeight)return;const Fe=await An(Xe(Ie,"coreBuddyAchievements",n.id)),ot=Fe.exists()?Fe.data():{clientId:n.id,badges:[],totalVolume:0};if(ot.badges.some(Ut=>Ut.type==="pb_target"&&Ut.exercise===U&&Ut.targetWeight===ke.targetWeight))return;const Ot={type:"pb_target",exercise:U,group:FD[U]||"push",targetWeight:ke.targetWeight,achievedAt:dt.now()},dn=[...ot.badges,Ot];await xn(Xe(Ie,"coreBuddyAchievements",n.id),{...ot,badges:dn,updatedAt:dt.now()}),St(Ut=>[...Ut,Ot])}catch(Z){console.error("Error checking target badge:",Z)}},_n=async U=>{if(!(!n||U<=0))try{const J=await An(Xe(Ie,"coreBuddyAchievements",n.id)),Z=J.exists()?J.data():{clientId:n.id,badges:[],totalVolume:0},pe=Z.totalVolume||0,ke=pe+U,Fe=[];zD.forEach(Ke=>{ke>=Ke.threshold&&pe<Ke.threshold&&(Z.badges.some(dn=>dn.type==="volume_milestone"&&dn.milestone===Ke.threshold)||Fe.push({type:"volume_milestone",milestone:Ke.threshold,label:Ke.label,achievedAt:dt.now()}))});const ot=[...Z.badges,...Fe];await xn(Xe(Ie,"coreBuddyAchievements",n.id),{clientId:n.id,badges:ot,totalVolume:Math.round(ke),updatedAt:dt.now()}),Fe.length>0&&St(Ke=>[...Ke,...Fe])}catch(J){console.error("Error updating volume:",J)}},q=async U=>{if(Ft(U),U.interval){const pe=[];for(const ke of U.exercises){let Fe=null,ot=!1;if(ke.storagePath)try{const Ke=bo(xo,ke.storagePath);Fe=await Al(Ke),ot=/\.gif$/i.test(ke.storagePath)}catch{}pe.push({name:ke.name,videoUrl:Fe,isGif:ot})}R(pe),M(U.rounds),I({work:U.work,rest:U.rest}),y("preview");return}const J={};for(const pe of U.exercises)if(pe.storagePath)try{const ke=bo(xo,pe.storagePath);J[pe.name]={url:await Al(ke),isGif:/\.gif$/i.test(pe.storagePath)}}catch{}Be(J);const Z=U.exercises.map(pe=>({name:pe.name,type:pe.type,targetSets:pe.sets,targetReps:pe.reps||0,targetTime:pe.time||0,sets:[]}));qt(Z),bt(0),lt(0),Nt(""),In(""),et(!1),cn(!1),je(0),St([]),Bt(null),y("muscle_workout")},le=()=>{const U=nt.current;U&&(U.paused?(U.play(),et(!0)):(U.pause(),et(!1)))};k.useEffect(()=>{if(g!=="muscle_workout"||!Ct||ge<=0){g==="muscle_workout"&&Ct&&ge<=0&&(cn(!1),Ae());return}return Ge.current=setTimeout(()=>je(U=>U-1),1e3),()=>clearTimeout(Ge.current)},[g,Ct,ge]);const b=async()=>{const U=Ye[kt];let J={};if(U.type==="weighted"){const ke=parseFloat(ns)||0,Fe=parseInt(Lt)||0;if(Fe===0){wt("Enter your reps","error");return}J={weight:ke,reps:Fe}}else if(U.type==="reps"){const ke=parseInt(Lt)||0;if(ke===0){wt("Enter your reps","error");return}J={reps:ke}}else if(U.type==="timed"){const ke=U.targetTime-ge;J={time:Math.max(ke,1)}}const Z=[...Ye];Z[kt]={...U,sets:[...U.sets,J]},qt(Z),U.type==="weighted"&&J.weight>0&&await as(U.name,J.weight,J.reps);const pe=U.sets.length+1;if(pe<U.targetSets)lt(pe),In(""),cn(!1),je(0);else if(kt+1<Ye.length){const ke=kt+1;bt(ke),lt(0),Nt(""),In(""),et(!1),cn(!1),je(0)}else await T(Z),y("muscle_complete")},T=async U=>{if(!(!s||!n))try{const J=U.reduce((pe,ke)=>pe+ke.sets.reduce((Fe,ot)=>Fe+(ot.weight||0)*(ot.reps||0),0),0),Z=U.reduce((pe,ke)=>pe+ke.sets.length,0);await Bl(rn(Ie,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:ut,sessionId:re?.id,sessionName:re?.name,exerciseCount:U.length,totalSets:Z,duration:Math.round(Z*1.5),volume:Math.round(J),exercises:U.map(pe=>({name:pe.name,type:pe.type,sets:pe.sets})),completedAt:dt.now()}),J>0&&await _n(J),$e.length>0&&Bt({badges:[...$e]})}catch(J){console.error("Error saving muscle group workout log:",J)}},P=k.useRef(null),K=()=>(P.current||(P.current=new(window.AudioContext||window.webkitAudioContext)),P.current),Ae=()=>{try{const U=K(),J=U.createOscillator(),Z=U.createGain();J.connect(Z),Z.connect(U.destination),J.frequency.value=880,Z.gain.value=.3,J.start(U.currentTime),J.stop(U.currentTime+.15)}catch{}},ye=()=>{try{const U=K(),J=U.createOscillator(),Z=U.createGain();J.connect(Z),Z.connect(U.destination),J.frequency.value=1200,Z.gain.value=.4,J.start(U.currentTime),J.stop(U.currentTime+.3)}catch{}};k.useEffect(()=>{if(g!=="workout"||Pe!=="work"||!j[Y]?.isGif)return;const J=setInterval(()=>{const Z=He.current;if(!Z)return;const pe=Z.getAttribute("src");Z.removeAttribute("src"),setTimeout(()=>{He.current&&He.current.setAttribute("src",pe)},0)},4e3);return()=>clearInterval(J)},[g,Pe,Y,ze,j]);const xe=(U,J,Z)=>{const pe=Math.round(U/J*UD);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:SD.map((ke,Fe)=>a.jsx("line",{x1:ke.x1,y1:ke.y1,x2:ke.x2,y2:ke.y2,className:Fe<pe?`wk-tick-filled ${Z}`:"wk-tick-empty",strokeWidth:ke.thick?"3":"2"},Fe))})},st=()=>{const U=j.length*D;return((ze-1)*j.length+Y+(Pe==="rest"?.5:0))/U},Ze=ie&&a.jsx("div",{className:`toast-notification ${ie.type}`,children:ie.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:a.jsx("img",{src:s2,alt:"Randomise Workout",className:"wk-hero-bg"})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[Dp.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:Dp.map((U,J)=>U.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:U.id}}),style:{animationDelay:`${J*.06}s`},children:[a.jsx("img",{src:U.image,alt:U.name,className:"wk-prog-img"}),J===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},U.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:U.id}}),style:{animationDelay:`${J*.06}s`},children:[a.jsx("img",{src:OD,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:HD[U.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[U.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:U.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:U.name.toUpperCase()}),a.jsxs("p",{children:[U.daysPerWeek,"x per week  ",U.focus==="fullbody"?"Full Body":U.focus.charAt(0).toUpperCase()+U.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),J===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},U.id))})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[qc.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:qc.map((U,J)=>a.jsx("button",{className:`wk-muscle-hero-card${U.image?" wk-muscle-thumb":""}`,onClick:()=>{ft(U.key),y("muscle_sessions")},style:{animationDelay:`${J*.05}s`},children:U.image?a.jsx("img",{src:U.image,alt:U.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:s2,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Mp[U.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:U.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:U.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[r2[U.key]?.length||0," sessions"]})]})]})]})},U.key))})]}),a.jsx(da,{active:"workouts"}),Ze]});if(g==="setup"){const U=Pp.find(Z=>Z.key===S)?.label||S,J=gl.find(Z=>Z.key===W)?.label||W;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsx("div",{className:"wk-stats-row",children:[{label:"Total",value:`${ss}`,pct:ss>0?Math.min(Math.round(ss/100*100),100):0,color:"#14b8a6",size:"normal"},{label:"This Week",value:`${tn}/${Ip}`,pct:Math.round(Math.min(tn,Ip)/Ip*100),color:"var(--color-primary)",size:"large"},{label:"Wk Streak",value:`${Hn}`,pct:Hn>0?Math.min(Math.round(Hn/12*100),100):0,color:"#38B6FF",size:"normal"}].map(Z=>{const ke=2*Math.PI*38,Fe=ke-Z.pct/100*ke;return a.jsxs("div",{className:`wk-stat-item${Z.size==="large"?" wk-stat-large":""}`,children:[a.jsxs("div",{className:"wk-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wk-stat-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"wk-stat-fill",cx:"50",cy:"50",r:38,style:{stroke:Z.color},strokeDasharray:ke,strokeDashoffset:Fe})]}),a.jsx("span",{className:"wk-stat-value",style:{color:Z.color},children:Z.value})]}),a.jsx("span",{className:"wk-stat-label",children:Z.label})]},Z.label)})}),a.jsxs("div",{className:"wk-setup-flow",children:[a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:Pp.map(Z=>a.jsxs("button",{className:`wk-equip-btn${S===Z.key?" active":""}${Z.key==="mix"?" wk-mix-btn":""}`,onClick:()=>L(Z.key),children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:Z.icon})}),a.jsx("span",{children:Z.label})]},Z.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:gl.map(Z=>a.jsxs("button",{className:`wk-level-card wk-level-${Z.key}${W===Z.key?" active":""}`,onClick:()=>z(Z.key),children:[a.jsx("span",{className:"wk-level-name",children:Z.label}),a.jsx("span",{className:"wk-level-desc",children:Z.desc})]},Z.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:$D.map(Z=>a.jsxs("button",{className:`wk-time-btn${O===Z?" active":""}`,onClick:()=>te(Z),children:[a.jsx("span",{className:"wk-time-num",children:Z}),a.jsx("span",{className:"wk-time-unit",children:"min"})]},Z))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:a2.map(Z=>{const pe=w.includes(Z.key);return a.jsxs("button",{className:`wk-equip-btn${pe?" active":""}`,onClick:()=>{E(ke=>pe&&ke.length===1?ke:pe?ke.filter(Fe=>Fe!==Z.key):[...ke,Z.key])},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:Z.icon})}),a.jsx("span",{children:Z.label})]},Z.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[U,"  ",J,"  ",O," min"]})})]})]}),a.jsx("div",{className:"wk-go-sticky",children:a.jsx("button",{className:"wk-randomise-btn",onClick:xt,disabled:Se,children:Se?"Loading exercises...":"Randomise Workout"})}),Ze]})}if(g==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:Il.map((U,J)=>a.jsx("line",{x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,className:"wk-spin-tick",strokeWidth:U.thick?"3.5":"2",style:{animationDelay:`${J*.03}s`}},J))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),Ze]});if(g==="preview"){const U=re?.interval?{work:re.work,rest:re.rest}:gl.find(Z=>Z.key===W),J=j.length*D*(U.work+U.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y(re?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[re?.interval&&a.jsx("h2",{className:"mg-preview-title",children:re.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:j.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:D}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(J/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[U.work,"/",U.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:j.map((Z,pe)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${pe*.06}s`},onClick:()=>tt(Z),children:[a.jsx("span",{className:"wk-preview-num",children:pe+1}),a.jsx("div",{className:"wk-preview-thumb",children:Z.isGif?a.jsx("img",{src:Z.videoUrl,alt:Z.name,loading:"lazy"}):a.jsx("video",{src:`${Z.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:Z.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},pe))}),Oe&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>tt(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:Z=>Z.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>tt(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Oe.isGif?a.jsx("img",{src:Oe.videoUrl,alt:Oe.name}):a.jsx("video",{src:Oe.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Oe.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!re?.interval&&a.jsxs("button",{className:"wk-btn-secondary",onClick:()=>xt(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),a.jsx("button",{className:"wk-btn-primary",onClick:pt,children:"Start Workout"})]})]})]})}if(g==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":d,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:Ne}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const U=j[Y],J=Pe==="work"?F.work:F.rest,Z=Pe==="rest"?Y+1<j.length?j[Y+1]:ze<D?j[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"wk-video-container",children:Pe==="work"?U.isGif?a.jsx("img",{ref:He,className:"wk-video",src:U.videoUrl,alt:U.name},U.videoUrl):a.jsx("video",{className:"wk-video",src:U.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},U.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),Z&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",Z.name]})]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[Y+1," / ",j.length]}),a.jsx("h2",{className:"wk-exercise-name",children:U.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",ze," of ",D]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[xe(Ve,J,Pe==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:Ve}),a.jsx("span",{className:`wk-timer-phase ${Pe}`,children:Pe==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>fe(!G),children:G?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{V(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${st()*100}%`}})})]})}if(g==="complete"){const U=gl.find(Z=>Z.key===W),J=j.length*D*(U.work+U.rest);return a.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:Il.map((Z,pe)=>a.jsx("line",{x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,className:"wk-tick-complete",strokeWidth:Z.thick?"3.5":"2",style:{animationDelay:`${pe*.02}s`}},pe))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(J/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:j.length*D}),a.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:D}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{Ft(null),ft(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const U=qc.find(Z=>Z.key===ut),J=r2[ut]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:Mp[ut]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:U?.icon})})}),a.jsxs("h2",{children:[U?.label," Workouts"]}),a.jsxs("p",{children:[J.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:J.map((Z,pe)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{Ft(Z),y("muscle_overview")},style:{animationDelay:`${pe*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:Z.name}),a.jsx("p",{children:Z.desc}),a.jsx("div",{className:"mg-session-meta",children:Z.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[Z.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[Z.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[Z.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const ke=Z.exercises.map(Ke=>Ke.sets||0),Fe=Math.min(...ke),ot=Math.max(...ke);return Fe===ot?`${Fe} sets each`:`${Fe}-${ot} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},Z.id))})]}),Ze]})}if(g==="muscle_overview"){const U=re;if(!U)return null;const J=qc.find(Z=>Z.key===ut);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:{background:Mp[ut]},children:a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:J?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:U.name}),U.level&&a.jsx("span",{className:"mg-overview-level",children:U.level})]}),a.jsx("p",{className:"mg-overview-desc",children:U.desc})]}),U.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:U.overview})]}),U.tips&&U.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:U.tips.map((Z,pe)=>a.jsx("li",{children:Z},pe))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",U.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:U.exercises.map((Z,pe)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:pe+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:Z.name}),U.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[U.work,"s work / ",U.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[Z.sets," sets  ",Z.reps?`${Z.reps} reps`:`${Z.time}s`,Z.type==="weighted"&&"  weighted"]})]})]},pe))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>q(U),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),Ze]})}if(g==="muscle_workout"){const U=re;if(!U)return null;const J=U.exercises[kt],Z=Ye[kt];if(!J||!Z)return null;const pe=Z.sets.length,ke=U.exercises.length,Fe=U.exercises.reduce((Ut,un)=>Ut+(un.sets||0),0),Ke=Ye.reduce((Ut,un)=>Ut+un.sets.length,0)/Fe*100,Ot=Qe[J.name];J.type==="timed"&&ge===0&&!Ct&&pe===jt&&setTimeout(()=>je(J.time),0);const dn=pe+1<J.sets?"Log Set":kt+1<ke?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Ke}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",kt+1,"/",ke]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[Ot?a.jsxs("div",{className:"mg-video-container",onClick:le,children:[Ot.isGif?a.jsx("img",{className:"mg-video",src:Ot.url,alt:J.name}):a.jsx("video",{ref:nt,className:"mg-video",src:Ot.url,loop:!0,muted:!0,playsInline:!0},J.name),!De&&!Ot.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:J.name}),a.jsx("span",{className:`mg-ex-type-badge ${J.type}`,children:J.type==="weighted"?"Weight + Reps":J.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",pe+1," of ",J.sets]}),J.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",J.reps," reps"]}),J.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",J.time,"s"]})]}),J.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:ns,onChange:Ut=>Nt(Ut.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Lt,onChange:Ut=>In(Ut.target.value),placeholder:"0"})]})]}),J.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Lt,onChange:Ut=>In(Ut.target.value),placeholder:"0"})]})}),J.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[ge,"s"]})}),Ct?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>cn(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{ge===0&&je(J.time),cn(!0)},children:ge<J.time&&ge>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:b,children:dn}),Z.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:Z.sets.map((Ut,un)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",un+1,": ",Ut.weight!=null?`${Ut.weight}kg  ${Ut.reps}`:Ut.reps!=null?`${Ut.reps} reps`:`${Ut.time}s`]})]},un))})]})]}),Ze]})}if(g==="muscle_complete"){const U=Ye.reduce((pe,ke)=>pe+ke.sets.length,0),J=Ye.reduce((pe,ke)=>pe+ke.sets.reduce((Fe,ot)=>Fe+(ot.weight||0)*(ot.reps||0),0),0),Z=qc.find(pe=>pe.key===ut)?.label||"";return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:Il.map((pe,ke)=>a.jsx("line",{x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,className:"wk-tick-complete",strokeWidth:pe.thick?"3.5":"2",style:{animationDelay:`${ke*.02}s`}},ke))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsxs("h2",{className:"wk-complete-title",children:[Z," Complete!"]}),a.jsx("p",{className:"mg-complete-session-name",children:re?.name}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Ye.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:U}),a.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),J>0&&a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.round(J).toLocaleString()}),a.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{Ft(null),ft(null),Bt(null),y("menu")},children:"Done"})})]}),Xt&&a.jsx("div",{className:"mg-badge-celebration",onClick:()=>Bt(null),children:a.jsxs("div",{className:"mg-badge-celebration-card",children:[a.jsx("div",{className:"mg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),a.jsx("h3",{className:"mg-badge-celebration-title",children:Xt.badges.length===1?"Badge Earned!":`${Xt.badges.length} Badges Earned!`}),a.jsx("div",{className:"mg-badge-celebration-list",children:Xt.badges.map((pe,ke)=>a.jsx("div",{className:"mg-badge-celebration-item",children:pe.type==="pb_target"?`${pe.exercise}  ${pe.targetWeight}kg`:pe.label},ke))}),a.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const YD=60,QD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},XD=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],i2=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function td(s,e,n){const i=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:i,time:l}}const JD={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function ZD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=jr(),{isDark:l,toggleTheme:u,accent:d}=ma(),p=Vs(),g=Hr(),[y,w]=k.useState("loading"),[E,S]=k.useState(null),L=k.useRef(!1),[W,z]=k.useState(null),[O,te]=k.useState(1),[X,he]=k.useState(0),[Se,Ue]=k.useState(0),[Le,A]=k.useState(0),[j,R]=k.useState([]),[D,M]=k.useState(""),[F,I]=k.useState(""),[ze,vt]=k.useState(!1),[Y,Ee]=k.useState(0),Pe=k.useRef(null),[oe,Ve]=k.useState({}),[V,G]=k.useState(!1),fe=k.useRef(null),[Ne,Me]=k.useState(null),[Oe,tt]=k.useState([]);k.useEffect(()=>{window.scrollTo(0,0)},[y]);const[He,ie]=k.useState(null),We=k.useCallback((ge,je="info")=>{ie({message:ge,type:je}),setTimeout(()=>ie(null),4e3)},[]),wt=k.useRef(null),ut=()=>(wt.current||(wt.current=new(window.AudioContext||window.webkitAudioContext)),wt.current),ft=()=>{try{const ge=ut(),je=ge.createOscillator(),De=ge.createGain();je.connect(De),De.connect(ge.destination),je.frequency.value=1200,De.gain.value=.4,je.start(ge.currentTime),je.stop(ge.currentTime+.3)}catch{}};k.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),k.useEffect(()=>{if(!n)return;(async()=>{try{const je=Xe(Ie,"clientProgrammes",n.id),De=await An(je);De.exists()?(z(De.data()),w("dashboard")):g.state?.templateId?w("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(je){console.error("Error loading programme:",je),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),k.useEffect(()=>{if(L.current||y==="loading")return;const ge=g.state?.templateId;if(!ge)return;const je=i2.find(De=>De.id===ge);je&&(L.current=!0,S(je),w("overview"))},[y,g.state]),k.useEffect(()=>{if(!ze||Y<=0){ze&&Y<=0&&(vt(!1),ft());return}return Pe.current=setTimeout(()=>Ee(ge=>ge-1),1e3),()=>clearTimeout(Pe.current)},[ze,Y]);const re=async ge=>{if(n)try{await xn(Xe(Ie,"clientProgrammes",n.id),ge),z(ge)}catch(je){console.error("Error saving programme:",je),We("Failed to save. Check Firestore rules for clientProgrammes.","error")}},Ft=async ge=>{const je={templateId:ge.id,startDate:dt.now(),completedSessions:{}};await re(je),w("dashboard")},kt=async()=>{if(n)try{await Js(Xe(Ie,"clientProgrammes",n.id)),z(null),w("browse")}catch(ge){console.error("Error quitting programme:",ge)}},bt=()=>W?i2.find(ge=>ge.id===W.templateId):null,jt=()=>{if(!W)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const ge=W.completedSessions||{},je=Object.keys(ge).length,De=bt();if(!De)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const et=De.duration*De.daysPerWeek,Qe=Math.min(Math.floor(je/De.daysPerWeek)+1,De.duration),Be=je-(Qe-1)*De.daysPerWeek;for(let nt=1;nt<=De.duration;nt++)for(let Ge=0;Ge<De.daysPerWeek;Ge++){const $e=`w${nt}d${Ge}`;if(!ge[$e])return{currentWeek:nt,completedThisWeek:Be,nextDay:Ge,nextWeek:nt,totalCompleted:je,totalSessions:et}}return{currentWeek:De.duration,completedThisWeek:De.daysPerWeek,nextDay:-1,totalCompleted:je,totalSessions:et,complete:!0}},lt=(ge,je,De)=>{if(!W||ge<=1)return null;const et=`w${ge-1}d${je}`,Qe=W.completedSessions?.[et];if(!Qe)return null;const Be=Qe.exercises?.find(nt=>nt.name===De);return Be?.sets?.length?Be.sets[Be.sets.length-1]:null},Ye=(ge,je)=>{const De=bt();if(!De)return;te(ge),he(je),Ue(0),A(0),R([]),I(""),vt(!1),Ee(0),G(!1),Ve({});const et=De.days[je],Qe=et.exercises.map($e=>{const St=td($e,ge,De);return{name:$e.name,type:$e.type,pbKey:$e.pbKey,targetSets:St.sets,targetReps:St.reps,targetTime:St.time,sets:[]}});R(Qe);const Be=et.exercises[0],nt=lt(ge,je,Be.name);nt?.weight&&Be.type==="weighted"?M(String(nt.weight)):M(""),(async()=>{const $e={};for(const St of et.exercises)if(St.storagePath)try{const Xt=bo(xo,St.storagePath),Bt=await Al(Xt);$e[St.name]={url:Bt,isGif:/\.gif$/i.test(St.storagePath)}}catch(Xt){console.warn(`Video not found for ${St.name}:`,Xt)}Ve($e)})(),w("session")},qt=async()=>{bt();const ge=j[Se];if(!ge)return;let je={};if(ge.type==="weighted"){const Qe=parseFloat(D)||0,Be=parseInt(F)||0;if(Be===0){We("Enter your reps","error");return}je={weight:Qe,reps:Be}}else if(ge.type==="reps"){const Qe=parseInt(F)||0;if(Qe===0){We("Enter your reps","error");return}je={reps:Qe}}else if(ge.type==="timed"){const Qe=ge.targetTime-Y;je={time:Math.max(Qe,1)}}const De=[...j];De[Se]={...ge,sets:[...ge.sets,je]},R(De),ge.type==="weighted"&&je.weight>0&&await Lt(ge.name,je.weight,je.reps);const et=ge.sets.length+1;if(et<ge.targetSets)A(et),M(je.weight?String(je.weight):""),I(""),vt(!1),Ee(0);else if(Se+1<j.length){const Qe=Se+1;Ue(Qe),A(0),G(!1);const nt=bt()?.days[X]?.exercises[Qe],Ge=lt(O,X,nt?.name);Ge?.weight&&nt?.type==="weighted"?M(String(Ge.weight)):M(""),I(""),vt(!1),Ee(0)}else await ns(De)},ns=async ge=>{if(!W||!n)return;const je=`w${O}d${X}`,De={...W.completedSessions,[je]:{completedAt:new Date().toISOString(),exercises:ge.map(Be=>({name:Be.name,type:Be.type,sets:Be.sets}))}},et={...W,completedSessions:De};await re(et);const Qe=ge.reduce((Be,nt)=>Be+nt.sets.reduce((Ge,$e)=>Ge+($e.weight||0)*($e.reps||0),0),0);Qe>0&&await Nt(Qe);try{const Be=bt();await Bl(rn(Ie,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:Be?.id,programmeName:Be?.name,week:O,day:X+1,exerciseCount:ge.length,duration:Math.round(ge.reduce((nt,Ge)=>nt+Ge.sets.length*1.5,0)),volume:Math.round(Qe),completedAt:dt.now()})}catch(Be){console.error("Error saving workout log:",Be)}Oe.length>0&&(Me({badges:[...Oe]}),tt([])),w("sessionComplete")},Nt=async ge=>{if(n)try{const je=await An(Xe(Ie,"coreBuddyAchievements",n.id)),De=je.exists()?je.data():{clientId:n.id,badges:[],totalVolume:0},et=De.totalVolume||0,Qe=et+ge,Be=[];XD.forEach(Ge=>{Qe>=Ge.threshold&&et<Ge.threshold&&(De.badges.some(St=>St.type==="volume_milestone"&&St.milestone===Ge.threshold)||Be.push({type:"volume_milestone",milestone:Ge.threshold,label:Ge.label,achievedAt:dt.now()}))});const nt=[...De.badges,...Be];await xn(Xe(Ie,"coreBuddyAchievements",n.id),{clientId:n.id,badges:nt,totalVolume:Math.round(Qe),updatedAt:dt.now()}),Be.length>0&&tt(Ge=>[...Ge,...Be])}catch(je){console.error("Error updating volume:",je)}},Lt=async(ge,je,De)=>{if(n)try{const et=n.id,Qe=await An(Xe(Ie,"coreBuddyPBs",et)),nt=(Qe.exists()?Qe.data():null)?.exercises||{},Ge=nt[ge];let $e=!1;if(Ge?(je>(Ge.weight||0)||je===(Ge.weight||0)&&De>(Ge.reps||0))&&($e=!0):$e=!0,$e){const St={...nt,[ge]:{weight:je,reps:De,achievedAt:dt.now()}};await xn(Xe(Ie,"coreBuddyPBs",et),{clientId:n.id,exercises:St,updatedAt:dt.now()}),We(`New PB! ${je}kg  ${De} reps`,"success"),ft(),await In(ge,je)}}catch(et){console.error("Error checking PB:",et)}},In=async(ge,je)=>{if(n)try{const De=await An(Xe(Ie,"coreBuddyTargets",n.id));if(!De.exists())return;const Qe=(De.data().targets||{})[ge];if(!Qe||je<Qe.targetWeight)return;const Be=await An(Xe(Ie,"coreBuddyAchievements",n.id)),nt=Be.exists()?Be.data():{clientId:n.id,badges:[],totalVolume:0};if(nt.badges.some(Xt=>Xt.type==="pb_target"&&Xt.exercise===ge&&Xt.targetWeight===Qe.targetWeight))return;const $e={type:"pb_target",exercise:ge,group:QD[ge]||"push",targetWeight:Qe.targetWeight,achievedAt:dt.now()},St=[...nt.badges,$e];await xn(Xe(Ie,"coreBuddyAchievements",n.id),{...nt,badges:St,updatedAt:dt.now()}),tt(Xt=>[...Xt,$e])}catch(De){console.error("Error checking target badge:",De)}},Ct=He&&a.jsxs("div",{className:`toast-notification ${He.type}`,children:[He.type==="success"&&a.jsx("span",{children:" "}),He.message]}),cn=(ge,je)=>a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:je,"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||y==="loading")return a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&E){const ge=E;return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":d,children:[cn(ge.name,()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-overview-hero",children:[a.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:JD[ge.focus]})}),a.jsx("h2",{className:"pg-overview-name",children:ge.name}),a.jsx("p",{className:"pg-overview-desc",children:ge.description}),a.jsxs("div",{className:"pg-overview-stats",children:[a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:ge.duration}),a.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:ge.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:ge.duration*ge.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),a.jsx("div",{className:"pg-overview-days",children:ge.days.map((je,De)=>a.jsxs("div",{className:"pg-day-card",children:[a.jsxs("div",{className:"pg-day-header",children:[a.jsx("span",{className:"pg-day-name",children:je.name}),a.jsx("span",{className:"pg-day-label",children:je.label})]}),a.jsx("div",{className:"pg-day-exercises",children:je.exercises.map((et,Qe)=>{const Be=td(et,1,ge);return a.jsxs("div",{className:"pg-day-ex",children:[a.jsx("span",{className:"pg-day-ex-name",children:et.name}),a.jsx("span",{className:"pg-day-ex-target",children:et.type==="timed"?`${Be.sets}${Be.time}s`:`${Be.sets}${Be.reps}`}),a.jsx("span",{className:`pg-day-ex-badge pg-badge-${et.type}`,children:et.type==="weighted"?"WT":et.type==="timed"?"TMR":"BW"})]},Qe)})})]},De))}),a.jsxs("div",{className:"pg-overview-note",children:[a.jsx("strong",{children:"Progressive Overload:"})," +",ge.repProg," reps/week",ge.timeProg?`, +${ge.timeProg}s/week for timed`:""]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>Ft(ge),children:"Start Programme"})]}),Ct]})}if(y==="dashboard"){const ge=bt();if(!ge)return w("browse"),null;const je=jt(),De=W?.completedSessions||{},et=je.totalSessions?Math.round(je.totalCompleted/je.totalSessions*100):0,Qe=Math.round(je.totalCompleted/(je.totalSessions||1)*YD);return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":d,children:[cn("Programme",()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-dash-hero",children:[a.jsxs("div",{className:"pg-dash-ring-wrap",children:[a.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:Il.map((Be,nt)=>a.jsx("line",{x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,className:nt<Qe?"pg-tick-filled":"pg-tick-empty",strokeWidth:Be.thick?"3":"2"},nt))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),a.jsx("h2",{className:"pg-dash-name",children:ge.name}),a.jsxs("div",{className:"pg-dash-progress-text",children:[a.jsxs("span",{className:"pg-dash-pct",children:[et,"%"]}),a.jsxs("span",{className:"pg-dash-week",children:["Week ",je.currentWeek," of ",ge.duration]})]})]}),a.jsx("div",{className:"pg-weeks",children:Array.from({length:ge.duration},(Be,nt)=>{const Ge=nt+1;return a.jsxs("div",{className:`pg-week-row${Ge===je.currentWeek?" pg-week-current":""}`,children:[a.jsxs("span",{className:"pg-week-label",children:["W",Ge]}),a.jsx("div",{className:"pg-week-days",children:ge.days.map(($e,St)=>{const Xt=`w${Ge}d${St}`,Bt=!!De[Xt],tn=!je.complete&&Ge===je.nextWeek&&St===je.nextDay;return a.jsx("button",{className:`pg-day-dot${Bt?" done":""}${tn?" next":""}`,disabled:Bt,onClick:()=>{tn&&Ye(Ge,St)},children:Bt?a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}):a.jsx("span",{children:$e.name.replace("Day ","")})},St)})})]},nt)})}),!je.complete&&je.nextDay>=0&&a.jsxs("div",{className:"pg-next-session",children:[a.jsx("h3",{children:"Next Session"}),a.jsxs("p",{className:"pg-next-info",children:["Week ",je.nextWeek,"  ",ge.days[je.nextDay].name,": ",ge.days[je.nextDay].label]}),a.jsx("div",{className:"pg-next-exercises",children:ge.days[je.nextDay].exercises.map((Be,nt)=>{const Ge=td(Be,je.nextWeek,ge);return a.jsxs("div",{className:"pg-next-ex",children:[a.jsx("span",{className:"pg-next-ex-name",children:Be.name}),a.jsx("span",{className:"pg-next-ex-target",children:Be.type==="timed"?`${Ge.sets}${Ge.time}s`:`${Ge.sets}${Ge.reps}`})]},nt)})}),a.jsx("button",{className:"pg-start-btn",onClick:()=>Ye(je.nextWeek,je.nextDay),children:"Start Session"})]}),je.complete&&a.jsxs("div",{className:"pg-complete-msg",children:[a.jsx("h3",{children:"Programme Complete! "}),a.jsxs("p",{children:["You finished all ",je.totalSessions," sessions."]}),a.jsx("button",{className:"pg-start-btn",onClick:kt,children:"Choose New Programme"})]}),a.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&kt()},children:"Quit Programme"})]}),a.jsx(da,{active:"workouts"}),Ct]})}if(y==="session"){const ge=bt();if(!ge)return null;const je=ge.days[X],De=je.exercises[Se],et=td(De,O,ge),Qe=j[Se],Be=Qe?.sets?.length||0,nt=je.exercises.length,Ge=(Se+Be/et.sets)/nt,$e=oe[De.name],St=lt(O,X,De.name);De.type==="timed"&&Y===0&&!ze&&Be===Le&&setTimeout(()=>Ee(et.time),0);const Xt=()=>{$e?.isGif?G(!V):fe.current&&(V?fe.current.pause():fe.current.play(),G(!V))};return a.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"pg-session-progress",children:a.jsx("div",{className:"pg-session-progress-fill",style:{width:`${Ge*100}%`}})}),a.jsxs("div",{className:"pg-session-header",children:[a.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&w("dashboard")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),a.jsxs("div",{className:"pg-session-title",children:[a.jsxs("span",{className:"pg-session-counter",children:[Se+1," / ",nt]}),a.jsxs("span",{className:"pg-session-week",children:["Week ",O,"  ",je.name]})]})]}),$e&&a.jsxs("div",{className:"pg-video-container",onClick:Xt,children:[$e.isGif?a.jsx("img",{className:"pg-video",src:$e.url,alt:De.name}):a.jsx("video",{ref:fe,className:"pg-video",src:$e.url,loop:!0,muted:!0,playsInline:!0},De.name),!V&&a.jsxs("div",{className:"pg-video-overlay",children:[a.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),a.jsx("div",{className:"pg-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"pg-exercise-card",children:[a.jsx("h2",{className:"pg-ex-name",children:De.name}),a.jsx("span",{className:`pg-ex-type-badge pg-badge-${De.type}`,children:De.type==="weighted"?"Weight + Reps":De.type==="timed"?"Timed":"Reps Only"}),De.type==="weighted"&&St&&a.jsxs("div",{className:"pg-last-week",children:[a.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),a.jsxs("span",{className:"pg-last-week-value",children:[St.weight,"kg x ",St.reps," reps"]})]}),a.jsxs("div",{className:"pg-ex-set-info",children:[a.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Be+1," of ",et.sets]}),a.jsxs("span",{className:"pg-ex-target",children:["Target: ",De.type==="timed"?`${et.time}s hold`:`${et.reps} reps`]})]}),De.type==="weighted"&&a.jsxs("div",{className:"pg-input-area",children:[a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",value:D,onChange:Bt=>M(Bt.target.value),placeholder:"0",className:"pg-input"})]}),a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:F,onChange:Bt=>I(Bt.target.value),placeholder:String(et.reps),className:"pg-input"})]})]}),De.type==="reps"&&a.jsx("div",{className:"pg-input-area",children:a.jsxs("div",{className:"pg-input-group pg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:F,onChange:Bt=>I(Bt.target.value),placeholder:String(et.reps),className:"pg-input"})]})}),De.type==="timed"&&a.jsxs("div",{className:"pg-timer-area",children:[a.jsx("div",{className:"pg-timer-display",children:a.jsxs("span",{className:"pg-timer-value",children:[Y,"s"]})}),ze?a.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>vt(!1),children:"Stop"}):a.jsx("button",{className:"pg-timer-btn",onClick:()=>{Y===0&&Ee(et.time),vt(!0)},children:Y<et.time&&Y>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"pg-log-set-btn",onClick:qt,disabled:De.type==="timed"&&ze,children:Be+1<et.sets?"Log Set":Se+1<nt?"Log Set  Next Exercise":"Log Set  Complete"}),Qe?.sets?.length>0&&a.jsx("div",{className:"pg-completed-sets",children:Qe.sets.map((Bt,tn)=>a.jsxs("div",{className:"pg-completed-set",children:[a.jsx("span",{className:"pg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",tn+1,": ",Bt.weight!==void 0?`${Bt.weight}kg  ${Bt.reps}`:Bt.time!==void 0?`${Bt.time}s`:`${Bt.reps} reps`]})]},tn))})]}),Ct]})}if(y==="sessionComplete"){const je=bt()?.days[X],De=j.reduce((Qe,Be)=>Qe+Be.sets.length,0),et=j.reduce((Qe,Be)=>Qe+Be.sets.reduce((nt,Ge)=>nt+(Ge.weight||0)*(Ge.reps||0),0),0);return a.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"pg-session-done",children:[a.jsxs("div",{className:"pg-done-ring",children:[a.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:Il.map((Qe,Be)=>a.jsx("line",{x1:Qe.x1,y1:Qe.y1,x2:Qe.x2,y2:Qe.y2,className:"pg-tick-complete",strokeWidth:Qe.thick?"3.5":"2",style:{animationDelay:`${Be*.02}s`}},Be))}),a.jsx("div",{className:"pg-done-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),a.jsxs("p",{className:"pg-done-subtitle",children:["Week ",O,"  ",je?.name,": ",je?.label]}),a.jsxs("div",{className:"pg-done-stats",children:[a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:j.length}),a.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:De}),a.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),et>0&&a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Math.round(et).toLocaleString()}),a.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>w("dashboard"),children:"Back to Programme"})]}),Ne&&a.jsx("div",{className:"pg-badge-celebration",onClick:()=>Me(null),children:a.jsxs("div",{className:"pg-badge-celebration-card",onClick:Qe=>Qe.stopPropagation(),children:[a.jsx("div",{className:"pg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pg-badge-celebration-title",children:Ne.badges.length===1?"Badge Earned!":`${Ne.badges.length} Badges Earned!`}),a.jsx("div",{className:"pg-badge-celebration-list",children:Ne.badges.map((Qe,Be)=>a.jsx("div",{className:"pg-badge-celebration-item",children:Qe.type==="pb_target"?`${Qe.exercise}  ${Qe.targetWeight}kg`:Qe.label},Be))}),a.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Me(null),children:"Tap to dismiss"})]})}),Ct]})}return null}const e3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},t3={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Lp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function n3(s){return e3[s]||"push"}function s3(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function r3(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function a3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=jr(),{isDark:l,toggleTheme:u,accent:d}=ma(),p=Vs(),[g,y]=k.useState(!0),[w,E]=k.useState(null),[S,L]=k.useState({});k.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),k.useEffect(()=>{if(!n)return;(async()=>{try{const[R,D]=await Promise.all([An(Xe(Ie,"coreBuddyAchievements",n.id)),An(Xe(Ie,"coreBuddyPBs",n.id))]);R.exists()&&E(R.data()),D.exists()&&L(D.data().exercises||{})}catch(R){console.error("Error loading achievements:",R)}y(!1)})()},[n]);const W=w?.badges||[],z=w?.totalVolume||0,O=W.filter(j=>j.type==="pb_target"),te=W.filter(j=>j.type==="volume_milestone"),X={push:[],pull:[],lower:[],core:[]};O.forEach(j=>{const R=j.group||n3(j.exercise);X[R]&&X[R].push(j)});const he=Lp.find(j=>z<j.threshold),Se=Lp.filter(j=>z>=j.threshold).pop()?.threshold||0,Ue=he?(z-Se)/(he.threshold-Se):1;if(i||g)return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsx("div",{className:"ach-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});const Le=W.length,A=Le>0||z>0;return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ach-main",children:[a.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),a.jsxs("div",{className:"ach-stats-banner",children:[a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Le}),a.jsx("span",{className:"ach-stat-label",children:Le===1?"Badge":"Badges"})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:s3(z)}),a.jsxs("span",{className:"ach-stat-label",children:[r3(z)," lifted"]})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Object.keys(S).length}),a.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!A&&a.jsxs("div",{className:"ach-empty",children:[a.jsx("div",{className:"ach-empty-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),a.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),a.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),a.jsx("h4",{children:"No achievements yet"}),a.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),a.jsxs("div",{className:"ach-volume-hero",children:[a.jsxs("div",{className:"ach-volume-ring",children:[a.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:Il.map((j,R)=>{const D=R<Math.round(Ue*60);return a.jsx("line",{x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,className:D?"ach-tick-filled":"ach-tick-empty",strokeWidth:j.thick?"3":"2"},R)})}),a.jsxs("div",{className:"ach-volume-center",children:[a.jsx("span",{className:"ach-volume-number",children:Math.round(z).toLocaleString()}),a.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),he&&a.jsxs("div",{className:"ach-volume-next",children:["Next: ",a.jsx("strong",{children:he.label})," (",(he.threshold-z).toLocaleString(),"kg to go)"]})]}),a.jsx("div",{className:"ach-milestone-shelf",children:Lp.map((j,R)=>{const D=z>=j.threshold,M=te.find(F=>F.milestone===j.threshold);return a.jsxs("div",{className:`ach-milestone ${D?"unlocked":"locked"}`,children:[a.jsx("div",{className:"ach-milestone-hex",children:a.jsx("span",{className:"ach-milestone-icon",children:j.icon})}),a.jsx("span",{className:"ach-milestone-label",children:j.label}),M?.achievedAt&&a.jsx("span",{className:"ach-milestone-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},R)})})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),O.length===0?a.jsx("div",{className:"ach-pb-empty",children:a.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",a.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(X).map(([j,R])=>{if(R.length===0)return null;const D=t3[j];return a.jsxs("div",{className:"ach-group",children:[a.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:D.color},children:[a.jsx("span",{className:"ach-group-label",style:{color:D.color},children:D.label}),a.jsx("span",{className:"ach-group-count",children:R.length})]}),a.jsx("div",{className:"ach-badge-grid",children:R.map((M,F)=>a.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${F*.06}s`,"--group-color":D.color},children:[a.jsx("div",{className:"ach-badge-hex",style:{borderColor:D.color,boxShadow:`0 0 12px ${D.color}33`},children:a.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:D.color,strokeWidth:"2",strokeLinecap:"round",children:a.jsx("path",{d:D.icon})})}),a.jsxs("div",{className:"ach-badge-info",children:[a.jsx("span",{className:"ach-badge-exercise",children:M.exercise}),a.jsxs("span",{className:"ach-badge-value",style:{color:D.color},children:[M.targetWeight,"kg"]}),M.achievedAt&&a.jsx("span",{className:"ach-badge-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},F))})]},j)})]})]}),a.jsx(da,{active:"home"})]})}const nd=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function i3(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Op(s){return s.toISOString().split("T")[0]}function o3(s){return Array.from({length:7},(e,n)=>{const i=new Date(s);return i.setDate(s.getDate()+n),i})}function l3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=jr(),{isDark:l,toggleTheme:u,accent:d}=ma(),p=Vs(),[g,y]=k.useState({}),[w,E]=k.useState(!0),[S,L]=k.useState(!1),[W,z]=k.useState(0),[O,te]=k.useState(null),[X,he]=k.useState(null),[Se,Ue]=k.useState(!1),Le=k.useRef([]),A=k.useRef([]),j=k.useCallback((G,fe="info")=>{te({message:G,type:fe}),setTimeout(()=>te(null),3e3)},[]),R=new Date,D=Op(R),M=i3(R),F=o3(M),I=["M","T","W","T","F","S","S"];k.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),k.useEffect(()=>{if(!s||!n)return;(async()=>{try{const fe=rn(Ie,"habitLogs"),Ne=On(fe,bn("clientId","==",n.id)),Me=await En(Ne),Oe={};Me.docs.forEach(ie=>{const We=ie.data();Oe[We.date]={...We,_id:ie.id}}),y(Oe);let tt=0;const He=new Date(R);for(;;){const ie=Op(He),We=Oe[ie];if(We)if(Object.values(We.habits||{}).filter(Boolean).length>=3)tt++,He.setDate(He.getDate()-1);else break;else if(ie===D)He.setDate(He.getDate()-1);else break}z(tt)}catch(fe){console.error("Error loading habit logs:",fe)}finally{E(!1)}})()},[s,n]);const ze=g[D]||{habits:{}},vt=async G=>{if(!s||S)return;const fe=ze.habits?.[G]||!1;fe||(Le.current=[...Array(10)].map((Ne,Me)=>{const Oe=Me/10*2*Math.PI,tt=18+Math.random()*20;return{tx:Math.cos(Oe)*tt,ty:Math.sin(Oe)*tt,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),he(G),setTimeout(()=>he(null),700)),L(!0);try{const Ne=ze.habits||{},Me={...Ne,[G]:!Ne[G]},Oe=ze._id||`${n.id}_${D}`;await xn(Xe(Ie,"habitLogs",Oe),{clientId:n.id,date:D,habits:Me}),y(He=>({...He,[D]:{clientId:n.id,date:D,habits:Me,_id:Oe}})),Object.values(Me).filter(Boolean).length===nd.length&&!fe&&(A.current=[...Array(50)].map((He,ie)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][ie%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{Ue(!0),setTimeout(()=>Ue(!1),3500)},500))}catch(Ne){console.error("Error saving habit:",Ne),j("Failed to save. Try again.","error")}finally{L(!1)}},Y=F.map(G=>{const fe=Op(G),Ne=g[fe],Me=Ne?Object.values(Ne.habits||{}).filter(Boolean).length:0;return{date:G,dateStr:fe,completed:Me,total:nd.length}}),Ee=Y.reduce((G,fe)=>G+fe.completed,0),Pe=Y.reduce((G,fe)=>G+fe.total,0),oe=Pe>0?Math.round(Ee/Pe*100):0,Ve=Object.values(ze.habits||{}).filter(Boolean).length,V=Math.round(Ve/nd.length*100);return a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||w?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-ring-section",children:[a.jsxs("div",{className:"cbc-progress-ring",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-V/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-pct",children:[V,"%"]}),a.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),a.jsxs("div",{className:"cbc-streak",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{className:"cbc-streak-count",children:W}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsx("div",{className:"cbc-habits",children:nd.map(G=>{const fe=ze.habits?.[G.key]||!1,Ne=X===G.key;return a.jsxs("button",{className:`cbc-habit-btn cbc-habit-${G.key} ${fe?"cbc-habit-done":""} ${Ne?"cbc-habit-just-checked":""}`,onClick:()=>vt(G.key),disabled:S,children:[a.jsx("div",{className:"cbc-habit-check",children:fe?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${Ne?"cbc-check-animate":""}`})}):a.jsx("div",{className:"cbc-habit-circle"})}),Ne&&a.jsx("div",{className:"cbc-particles",children:Le.current.map((Me,Oe)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${Me.tx}px`,"--ty":`${Me.ty}px`,"--size":`${Me.size}px`,animationDuration:`${Me.duration}s`}},Oe))}),a.jsx("div",{className:`cbc-habit-icon cbc-icon-${G.key}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:G.icon})})}),a.jsx("span",{className:"cbc-habit-label",children:G.label})]},G.key)})})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsx("div",{className:"cbc-week-grid",children:Y.map((G,fe)=>{const Ne=G.dateStr===D,Me=G.total>0?G.completed/G.total:0,Oe=38,tt=2*Math.PI*Oe,He=tt-Me*tt;return a.jsxs("div",{className:`cbc-day-ring ${Ne?"cbc-day-today":""} ${G.completed>0?"cbc-day-active":""}`,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Oe}),a.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Oe,strokeDasharray:tt,strokeDashoffset:He})]}),a.jsx("span",{className:"cbc-day-label",children:I[fe]}),a.jsxs("span",{className:"cbc-day-count",children:[G.completed,"/",G.total]})]},fe)})}),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${oe}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[Ee," / ",Pe," habits this week (",oe,"%)"]})]})]})]}),a.jsx(da,{active:"home"}),Se&&a.jsxs("div",{className:"cbc-celebration",onClick:()=>Ue(!1),children:[a.jsx("div",{className:"cbc-confetti-container",children:A.current.map((G,fe)=>a.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${G.x}%`,"--delay":`${G.delay}s`,"--color":G.color,"--drift":`${G.drift}px`,"--spin":`${G.spin}deg`,"--duration":`${G.duration}s`,width:`${G.width}px`,height:`${G.height}px`}},fe))}),a.jsxs("div",{className:"cbc-celebration-card",children:[a.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),a.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),a.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),O&&a.jsx("div",{className:`toast-notification ${O.type}`,children:O.message})]})}function sd(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function o2(s,e){return[s,e].sort().join("_")}function c3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=jr(),{isDark:l,toggleTheme:u}=ma(),d=Vs(),[p,g]=k.useState("buddies"),[y,w]=k.useState([]),[E,S]=k.useState([]),[L,W]=k.useState([]),[z,O]=k.useState(""),[te,X]=k.useState([]),[he,Se]=k.useState([]),[Ue,Le]=k.useState(!0),[A,j]=k.useState(null),[R,D]=k.useState(null),M=k.useCallback((oe,Ve="info")=>{D({message:oe,type:Ve}),setTimeout(()=>D(null),3500)},[]);k.useEffect(()=>{!i&&(!s||!e)&&d("/")},[s,e,i,d]);const F=k.useCallback(async()=>{if(n){Le(!0);try{const oe=n.id,V=(await En(rn(Ie,"clients"))).docs.map(He=>({id:He.id,...He.data()}));Se(V);const G=Object.fromEntries(V.map(He=>[He.id,He])),fe=await En(On(rn(Ie,"buddies"),bn("user1","==",oe))),Ne=await En(On(rn(Ie,"buddies"),bn("user2","==",oe))),Me=new Set;[...fe.docs,...Ne.docs].forEach(He=>{const ie=He.data(),We=ie.user1===oe?ie.user2:ie.user1;Me.add(We)}),w(Array.from(Me).map(He=>G[He]).filter(Boolean));const Oe=await En(On(rn(Ie,"buddyRequests"),bn("toId","==",oe),bn("status","==","pending")));S(Oe.docs.map(He=>({reqId:He.id,...He.data(),fromClient:G[He.data().fromId]})).filter(He=>He.fromClient));const tt=await En(On(rn(Ie,"buddyRequests"),bn("fromId","==",oe),bn("status","==","pending")));W(tt.docs.map(He=>({reqId:He.id,...He.data(),toClient:G[He.data().toId]})).filter(He=>He.toClient))}catch(oe){console.error("Error fetching buddy data:",oe),M("Failed to load buddies","error")}finally{Le(!1)}}},[n,M]);k.useEffect(()=>{F()},[F]),k.useEffect(()=>{if(!z.trim()||!n){X([]);return}const oe=z.toLowerCase(),Ve=n.id,V=new Set(y.map(Me=>Me.id)),G=new Set(L.map(Me=>Me.toId)),fe=new Set(E.map(Me=>Me.fromId)),Ne=he.filter(Me=>Me.id===Ve||!Me.name||!Me.coreBuddyAccess?!1:Me.name.toLowerCase().includes(oe)).map(Me=>({...Me,isBuddy:V.has(Me.id),isPendingOut:G.has(Me.id),isPendingIn:fe.has(Me.id)})).slice(0,20);X(Ne)},[z,he,y,L,E,n]);const I=async oe=>{j(oe);try{const Ve=`${n.id}_${oe}`;await xn(Xe(Ie,"buddyRequests",Ve),{fromId:n.id,toId:oe,status:"pending",createdAt:Pa()}),M("Buddy request sent!","success"),await F()}catch(Ve){console.error("Error sending request:",Ve),M("Failed to send request","error")}finally{j(null)}},ze=async oe=>{j(oe.reqId);try{const Ve=o2(oe.fromId,n.id);await xn(Xe(Ie,"buddies",Ve),{user1:[oe.fromId,n.id].sort()[0],user2:[oe.fromId,n.id].sort()[1],connectedAt:Pa()}),await Js(Xe(Ie,"buddyRequests",oe.reqId)),M("Buddy added!","success"),await F()}catch(Ve){console.error("Error accepting request:",Ve),M("Failed to accept","error")}finally{j(null)}},vt=async oe=>{j(oe.reqId);try{await Js(Xe(Ie,"buddyRequests",oe.reqId)),M("Request declined","info"),await F()}catch(Ve){console.error("Error declining:",Ve),M("Failed to decline","error")}finally{j(null)}},Y=async oe=>{j(oe.reqId);try{await Js(Xe(Ie,"buddyRequests",oe.reqId)),M("Request cancelled","info"),await F()}catch(Ve){console.error("Error cancelling:",Ve),M("Failed to cancel","error")}finally{j(null)}},Ee=async oe=>{j(oe);try{const Ve=o2(n.id,oe);await Js(Xe(Ie,"buddies",Ve)),M("Buddy removed","info"),await F()}catch(Ve){console.error("Error removing buddy:",Ve),M("Failed to remove buddy","error")}finally{j(null)}},Pe=E.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),Pe>0&&a.jsx("span",{className:"bdy-tab-badge",children:Pe})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Ue?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(oe=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${oe.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:oe.photoURL?a.jsx("img",{src:oe.photoURL,alt:oe.name}):a.jsx("span",{children:sd(oe.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:oe.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:Ve=>{Ve.stopPropagation(),Ee(oe.id)},disabled:A===oe.id,"aria-label":"Remove buddy",children:A===oe.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},oe.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[E.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:E.map(oe=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:oe.fromClient.photoURL?a.jsx("img",{src:oe.fromClient.photoURL,alt:oe.fromClient.name}):a.jsx("span",{children:sd(oe.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:oe.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>ze(oe),disabled:A===oe.reqId,children:A===oe.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>vt(oe),disabled:A===oe.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},oe.reqId))})]}),L.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:L.map(oe=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:oe.toClient?.photoURL?a.jsx("img",{src:oe.toClient.photoURL,alt:oe.toClient.name}):a.jsx("span",{children:sd(oe.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:oe.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>Y(oe),disabled:A===oe.reqId,children:A===oe.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},oe.reqId))})]}),E.length===0&&L.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:z,onChange:oe=>O(oe.target.value),autoFocus:!0}),z&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>O(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),z.trim()&&te.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',z,'"']})}),te.length>0&&a.jsx("div",{className:"bdy-list",children:te.map(oe=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${oe.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:oe.photoURL?a.jsx("img",{src:oe.photoURL,alt:oe.name}):a.jsx("span",{children:sd(oe.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:oe.name}),oe.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),oe.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):oe.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):oe.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:Ve=>{Ve.stopPropagation();const V=E.find(G=>G.fromId===oe.id);V&&ze(V)},disabled:!!A,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:Ve=>{Ve.stopPropagation(),I(oe.id)},disabled:A===oe.id,children:A===oe.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},oe.id))})]})]})]}),a.jsx(da,{}),R&&a.jsxs("div",{className:`toast-notification ${R.type}`,children:[a.jsx("span",{className:"toast-icon",children:R.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):R.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:R.message})]})]})}function Vp(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Bp(s,e){return[s,e].sort().join("_")}function l2(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function u3(){const{userId:s}=HE(),{currentUser:e,isClient:n,clientData:i,loading:l}=jr(),{isDark:u,toggleTheme:d}=ma(),p=Vs(),[g,y]=k.useState(null),[w,E]=k.useState("none"),[S,L]=k.useState(null),[W,z]=k.useState(!0),[O,te]=k.useState(!1),[X,he]=k.useState(null),[Se,Ue]=k.useState([]),[Le,A]=k.useState(!1),[j,R]=k.useState(new Set),[D,M]=k.useState(new Set),[F,I]=k.useState({}),[ze,vt]=k.useState({}),[Y,Ee]=k.useState({}),Pe=k.useCallback((ie,We="info")=>{he({message:ie,type:We}),setTimeout(()=>he(null),3500)},[]);k.useEffect(()=>{!l&&(!e||!n)&&p("/")},[e,n,l,p]),k.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),k.useEffect(()=>{if(!i||!s||i.id===s)return;let ie=!1;return(async()=>{z(!0);try{const ut=(await En(rn(Ie,"clients"))).docs.map(kt=>({id:kt.id,...kt.data()})).find(kt=>kt.id===s);if(!ut){ie||z(!1);return}ie||y(ut);const ft=i.id,re=Bp(ft,s);if((await An(Xe(Ie,"buddies",re))).exists())ie||E("buddy");else{const kt=`${ft}_${s}`,bt=await An(Xe(Ie,"buddyRequests",kt));if(bt.exists()&&bt.data().status==="pending")ie||(E("pending_out"),L(kt));else{const jt=`${s}_${ft}`,lt=await An(Xe(Ie,"buddyRequests",jt));lt.exists()&&lt.data().status==="pending"?ie||(E("pending_in"),L(jt)):ie||E("none")}}}catch(We){console.error("Error loading profile:",We)}finally{ie||z(!1)}})(),()=>{ie=!0}},[i,s]);const oe=async()=>{te(!0);try{const ie=`${i.id}_${s}`;await xn(Xe(Ie,"buddyRequests",ie),{fromId:i.id,toId:s,status:"pending",createdAt:Pa()}),E("pending_out"),L(ie),Pe("Buddy request sent!","success")}catch(ie){console.error(ie),Pe("Failed to send request","error")}finally{te(!1)}},Ve=async()=>{if(S){te(!0);try{const ie=Bp(i.id,s);await xn(Xe(Ie,"buddies",ie),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:Pa()}),await Js(Xe(Ie,"buddyRequests",S)),E("buddy"),Pe("Buddy added!","success")}catch(ie){console.error(ie),Pe("Failed to accept","error")}finally{te(!1)}}},V=async()=>{if(S){te(!0);try{await Js(Xe(Ie,"buddyRequests",S)),E("none"),Pe(w==="pending_out"?"Request cancelled":"Request declined","info")}catch(ie){console.error(ie),Pe("Failed","error")}finally{te(!1)}}},G=async()=>{te(!0);try{const ie=Bp(i.id,s);await Js(Xe(Ie,"buddies",ie)),E("none"),Pe("Buddy removed","info")}catch(ie){console.error(ie),Pe("Failed to remove","error")}finally{te(!1)}},fe=k.useCallback(async()=>{if(s){A(!0);try{const ie=await En(On(rn(Ie,"posts"),bn("authorId","==",s),Vd("createdAt","desc"),Bd(30)));if(Ue(ie.docs.map(We=>({id:We.id,...We.data()}))),i){const We=await En(On(rn(Ie,"postLikes"),bn("userId","==",i.id)));R(new Set(We.docs.map(wt=>wt.data().postId)))}}catch(ie){console.error("Error loading journey:",ie)}finally{A(!1)}}},[s,i]);k.useEffect(()=>{!W&&g&&fe()},[W,g,fe]);const Ne=async ie=>{if(window.confirm("Delete this post?"))try{await Js(Xe(Ie,"posts",ie)),Ue(We=>We.filter(wt=>wt.id!==ie)),Pe("Post deleted","info")}catch(We){console.error("Delete error:",We),Pe("Failed to delete","error")}},Me=async ie=>{if(!i)return;const We=i.id,wt=`${ie}_${We}`,ut=j.has(ie),ft=new Set(j);ut?ft.delete(ie):ft.add(ie),R(ft),Ue(re=>re.map(Ft=>Ft.id===ie?{...Ft,likeCount:Math.max(0,(Ft.likeCount||0)+(ut?-1:1))}:Ft));try{ut?(await Js(Xe(Ie,"postLikes",wt)),await vo(Xe(Ie,"posts",ie),{likeCount:Cl(-1)})):(await xn(Xe(Ie,"postLikes",wt),{postId:ie,userId:We,createdAt:Pa()}),await vo(Xe(Ie,"posts",ie),{likeCount:Cl(1)}))}catch(re){console.error("Like error:",re),fe()}},Oe=async ie=>{try{const We=await En(On(rn(Ie,"postComments"),bn("postId","==",ie),Vd("createdAt","asc"),Bd(50)));I(wt=>({...wt,[ie]:We.docs.map(ut=>({id:ut.id,...ut.data()}))}))}catch(We){console.error("Error loading comments:",We)}},tt=ie=>{const We=new Set(D);We.has(ie)?We.delete(ie):(We.add(ie),F[ie]||Oe(ie)),M(We)},He=async ie=>{const We=(ze[ie]||"").trim();if(!(!We||!i)){Ee(wt=>({...wt,[ie]:!0}));try{await Bl(rn(Ie,"postComments"),{postId:ie,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:We,createdAt:Pa()}),await vo(Xe(Ie,"posts",ie),{commentCount:Cl(1)}),vt(wt=>({...wt,[ie]:""})),Ue(wt=>wt.map(ut=>ut.id===ie?{...ut,commentCount:(ut.commentCount||0)+1}:ut)),await Oe(ie)}catch(wt){console.error("Comment error:",wt),Pe("Failed to comment","error")}finally{Ee(wt=>({...wt,[ie]:!1}))}}};return l||W||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!n?null:g?a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:Vp(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),a.jsxs("div",{className:"prf-buddy-action",children:[w==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:oe,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),w==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:V,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),w==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:Ve,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:V,disabled:O,children:"Decline"})]}),w==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:G,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),Le?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):Se.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:Se.map(ie=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:ie.authorPhotoURL?a.jsx("img",{src:ie.authorPhotoURL,alt:""}):a.jsx("span",{children:Vp(ie.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:ie.authorName}),a.jsx("span",{className:"journey-post-time",children:l2(ie.createdAt)})]}),ie.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>Ne(ie.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),ie.content&&a.jsx("p",{className:"journey-post-content",children:ie.content}),ie.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:ie.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${j.has(ie.id)?" liked":""}`,onClick:()=>Me(ie.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:j.has(ie.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:ie.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${D.has(ie.id)?" active":""}`,onClick:()=>tt(ie.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:ie.commentCount||0})]})]}),D.has(ie.id)&&a.jsxs("div",{className:"journey-comments",children:[F[ie.id]?.length>0?F[ie.id].map(We=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${We.authorId}`),children:We.authorPhotoURL?a.jsx("img",{src:We.authorPhotoURL,alt:""}):a.jsx("span",{children:Vp(We.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:We.authorName}),a.jsx("span",{className:"journey-comment-text",children:We.content})]}),a.jsx("span",{className:"journey-comment-time",children:l2(We.createdAt)})]})]},We.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:ze[ie.id]||"",onChange:We=>vt(wt=>({...wt,[ie.id]:We.target.value})),onKeyDown:We=>{We.key==="Enter"&&He(ie.id)},maxLength:300}),a.jsx("button",{onClick:()=>He(ie.id),disabled:!(ze[ie.id]||"").trim()||Y[ie.id],children:Y[ie.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},ie.id))})]})]}),a.jsx(da,{}),X&&a.jsxs("div",{className:`toast-notification ${X.type}`,children:[a.jsx("span",{className:"toast-icon",children:X.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):X.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:X.message})]})]}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(da,{})]})}const Pr=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],mo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function h3(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Lr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function d3(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function f3(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function rd(s,e){if(!e)return"-";switch(s.unit){case"weight":return f3(e.weight,e.reps);case"time":return d3(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function yl(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function Up(s,e){return!e||e===0?null:(s-e)/e*100}function m3({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(z=>{const O=z.benchmarks?.[e];if(!O)return 0;switch(n){case"weight":return(O.weight||0)*(O.reps||0);case"time":return O.time||0;case"reps":return O.reps||0;case"distance":return O.distance||0;default:return 0}}),l=Math.max(...i),u=Math.min(...i),d=l-u||1,p=300,g=100,y=20,w=p-y*2,E=g-y*2,S=i.map((z,O)=>{const te=y+O/(i.length-1)*w,X=y+E-(z-u)/d*E;return{x:te,y:X,value:z}}),L=S.map((z,O)=>`${O===0?"M":"L"} ${z.x} ${z.y}`).join(" "),W=L+` L ${S[S.length-1].x} ${y+E} L ${S[0].x} ${y+E} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:W,fill:"url(#trendGradientJr)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),S.map((z,O)=>a.jsx("circle",{cx:z.x,cy:z.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},O))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((z,O)=>a.jsxs("span",{className:"pb-trend-label",children:[z.month.split("-")[1],"/",z.month.split("-")[0].slice(2)]},O))})]})}function p3(){const[s,e]=k.useState("bests"),[n,i]=k.useState([]),[l,u]=k.useState(!0),[d,p]=k.useState(!1),[g,y]=k.useState(0),[w,E]=k.useState(!1),[S,L]=k.useState(!1),[W,z]=k.useState(!1),[O,te]=k.useState({}),[X,he]=k.useState({}),[Se,Ue]=k.useState({}),[Le,A]=k.useState({}),[j,R]=k.useState({}),[D,M]=k.useState(!1),[F,I]=k.useState({}),[ze,vt]=k.useState([]),[Y,Ee]=k.useState(null),[Pe,oe]=k.useState(null),[Ve,V]=k.useState(!1),[G,fe]=k.useState(""),[Ne,Me]=k.useState(""),Oe=k.useRef(null),tt=k.useRef(0),He=k.useRef(0),ie=k.useRef("right"),We=k.useCallback(H=>{y(me=>{const we=Math.max(0,Math.min(Pr.length-1,H));return we===me?me:(ie.current=we>me?"right":"left",we)})},[]),{currentUser:wt,isClient:ut,clientData:ft,loading:re}=jr(),{isDark:Ft}=ma(),kt=Vs(),bt=k.useCallback((H,me="info")=>{oe({message:H,type:me}),setTimeout(()=>oe(null),4e3)},[]);k.useEffect(()=>{!re&&(!wt||!ut)&&kt("/")},[wt,ut,re,kt]),k.useEffect(()=>{ft&&jt()},[ft]);const jt=async()=>{try{const H=On(rn(Ie,"juniorPBs"),bn("clientId","==",ft.id)),we=(await En(H)).docs.map(it=>({id:it.id,...it.data()}));we.sort((it,xt)=>it.month.localeCompare(xt.month)),i(we);const be=On(rn(Ie,"juniorPBTargets"),bn("clientId","==",ft.id)),de=await En(be);if(!de.empty){const it=de.docs[0].data();Ue(it.targets||{}),A(it.metricTargets||{}),R(it.targets||{}),I(it.metricTargets||{})}const rt=On(rn(Ie,"juniorAchievements"),bn("clientId","==",ft.id)),mt=await En(rt);mt.empty||vt(mt.docs[0].data().badges||[])}catch(H){console.error("Error fetching junior personal bests:",H)}u(!1)},lt=h3(),Ye=n.find(H=>H.month===lt),qt=n.filter(H=>H.month<lt),ns=qt.length>0?qt[qt.length-1]:null;k.useEffect(()=>{Ye?(te(Ye.benchmarks||{}),he(Ye.bodyMetrics||{})):(te({}),he({}))},[Ye?.id]);const Nt=async(H,me)=>{const we=[];if(H==="strength"?Pr.forEach(be=>{const de=Se[be.key];if(!de)return;const rt=me[be.key];if(!rt)return;let mt;if(de.targetType==="time"){if(!de.targetValue)return;const it=de.startValue||0,xt=rt.time||0,pt=de.targetValue-it;mt=pt===0?xt>=de.targetValue?1:0:Math.max(0,(xt-it)/pt)}else if(de.targetType==="reps"){if(!de.targetReps)return;const it=de.startReps||0,xt=rt.reps||0,pt=de.targetReps-it;mt=pt===0?xt>=de.targetReps?1:0:Math.max(0,(xt-it)/pt)}else if(de.targetType==="distance"){if(!de.targetDistance)return;const it=de.startDistance||0,xt=rt.distance||0,pt=de.targetDistance-it;mt=pt===0?xt>=de.targetDistance?1:0:Math.max(0,(xt-it)/pt)}else{if(!de.targetWeight&&!de.targetReps)return;const it=(de.startWeight||0)*(de.startReps||0),xt=(de.targetWeight||0)*(de.targetReps||0),pt=(rt.weight||0)*(rt.reps||0),Jt=xt-it;mt=Jt===0?pt>=xt?1:0:Math.max(0,(pt-it)/Jt)}if(mt>=1){let it,xt;de.targetType==="time"?(it=ze.some(pt=>pt.type==="strength"&&pt.key===be.key&&pt.targetValue===de.targetValue),xt=`${be.name} ${de.targetValue}s`):de.targetType==="reps"?(it=ze.some(pt=>pt.type==="strength"&&pt.key===be.key&&pt.targetReps===de.targetReps),xt=`${be.name} ${de.targetReps} reps`):de.targetType==="distance"?(it=ze.some(pt=>pt.type==="strength"&&pt.key===be.key&&pt.targetDistance===de.targetDistance),xt=`${be.name} ${de.targetDistance}cm`):(it=ze.some(pt=>pt.type==="strength"&&pt.key===be.key&&pt.targetWeight===de.targetWeight&&pt.targetReps===de.targetReps),xt=`${be.name} ${de.targetWeight}kg  ${de.targetReps}`),it||we.push({type:"strength",key:be.key,...de.targetType==="time"?{targetType:"time",targetValue:de.targetValue}:de.targetType==="reps"?{targetType:"reps",targetReps:de.targetReps}:de.targetType==="distance"?{targetType:"distance",targetDistance:de.targetDistance}:{targetWeight:de.targetWeight,targetReps:de.targetReps},achievedMonth:lt,label:xt})}}):mo.forEach(be=>{const de=Le[be.key];if(!de||!de.targetValue)return;const rt=me[be.key];if(rt==null)return;const mt=de.startValue||0,it=de.targetValue,xt=it-mt;(xt===0?rt===it?1:0:Math.max(0,(rt-mt)/xt))>=1&&(ze.some(As=>As.type==="metric"&&As.key===be.key&&As.targetValue===it)||we.push({type:"metric",key:be.key,targetValue:it,achievedMonth:lt,label:`${be.name} ${it}${be.suffix}`}))}),we.length>0){const be=[...ze,...we];await xn(Xe(Ie,"juniorAchievements",ft.id),{clientId:ft.id,badges:be,updatedAt:dt.now()}),vt(be),Ee(we),setTimeout(()=>Ee(null),5e3)}},Lt=(H,me)=>{if(H==="strength"){const we=Se[me];if(!we)return!1;switch(Pr.find(de=>de.key===me)?.unit){case"time":return ze.some(de=>de.type==="strength"&&de.key===me&&de.targetValue===we.targetValue);case"reps":return ze.some(de=>de.type==="strength"&&de.key===me&&de.targetReps===we.targetReps);case"distance":return ze.some(de=>de.type==="strength"&&de.key===me&&de.targetDistance===we.targetDistance);default:return!we.targetWeight&&!we.targetReps?!1:ze.some(de=>de.type==="strength"&&de.key===me&&de.targetWeight===we.targetWeight&&de.targetReps===we.targetReps)}}else{const we=Le[me];return!we||!we.targetValue?!1:ze.some(be=>be.type==="metric"&&be.key===me&&be.targetValue===we.targetValue)}},In=async()=>{p(!0);try{const H=`${ft.id}_${lt}`,me=Ye||{};await xn(Xe(Ie,"juniorPBs",H),{clientId:ft.id,month:lt,benchmarks:O,bodyMetrics:me.bodyMetrics||X||{},createdAt:me.createdAt||dt.now(),updatedAt:dt.now()}),await Nt("strength",O),bt("Benchmarks saved!","success"),E(!1),await jt()}catch(H){console.error("Error saving benchmarks:",H),bt("Failed to save. Please try again.","error")}p(!1)},Ct=async()=>{p(!0);try{const H=`${ft.id}_${lt}`,me=Ye||{};await xn(Xe(Ie,"juniorPBs",H),{clientId:ft.id,month:lt,benchmarks:me.benchmarks||O||{},bodyMetrics:X,createdAt:me.createdAt||dt.now(),updatedAt:dt.now()}),await Nt("metric",X),bt("Body metrics saved!","success"),L(!1),await jt()}catch(H){console.error("Error saving metrics:",H),bt("Failed to save. Please try again.","error")}p(!1)},cn=(H,me,we)=>{te(be=>({...be,[H]:{...be[H],[me]:we===""?"":parseFloat(we)}}))},ge=(H,me)=>{he(we=>({...we,[H]:me===""?"":parseFloat(me)}))},je=(H,me,we)=>{R(be=>({...be,[H]:{...be[H],[me]:we===""?"":parseFloat(we)}}))},De=async()=>{p(!0);try{const H=`targets_${ft.id}`,me=Ye?.benchmarks||{},we={};Pr.forEach(be=>{const de=me[be.key];switch(be.unit){case"time":j[be.key]?.targetValue&&(we[be.key]={targetType:"time",targetValue:j[be.key].targetValue,startValue:de?.time||0});break;case"reps":j[be.key]?.targetReps&&(we[be.key]={targetType:"reps",targetReps:j[be.key].targetReps,startReps:de?.reps||0});break;case"distance":j[be.key]?.targetDistance&&(we[be.key]={targetType:"distance",targetDistance:j[be.key].targetDistance,startDistance:de?.distance||0});break;default:(j[be.key]?.targetWeight||j[be.key]?.targetReps)&&(we[be.key]={targetWeight:j[be.key].targetWeight||0,targetReps:j[be.key].targetReps||0,startWeight:de?.weight||0,startReps:de?.reps||0})}}),await xn(Xe(Ie,"juniorPBTargets",H),{clientId:ft.id,targets:we,metricTargets:Le,updatedAt:dt.now()}),Ue(we),R(we),bt("Targets saved!","success"),z(!1)}catch(H){console.error("Error saving targets:",H),bt("Failed to save targets.","error")}p(!1)},et=(H,me)=>{I(we=>({...we,[H]:{...we[H],targetValue:me===""?"":parseFloat(me)}}))},Qe=async()=>{p(!0);try{const H=`targets_${ft.id}`,me={};mo.forEach(we=>{if(F[we.key]?.targetValue){const be=Ye?.bodyMetrics?.[we.key]||0;me[we.key]={targetValue:F[we.key].targetValue,startValue:be}}}),await xn(Xe(Ie,"juniorPBTargets",H),{clientId:ft.id,targets:Se,metricTargets:me,updatedAt:dt.now()}),A(me),I(me),bt("Metric targets saved!","success"),M(!1)}catch(H){console.error("Error saving metric targets:",H),bt("Failed to save targets.","error")}p(!1)},Be=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const H=Xe(Ie,"juniorPBTargets",`targets_${ft.id}`);await Js(H),Ue({}),A({}),R({}),I({}),bt("All goals have been reset","success")}catch(H){console.error("Error resetting targets:",H),bt("Failed to reset goals","error")}p(!1)}},nt=(H,me)=>{const we=Se[H];if(!we||!me)return null;if(we.targetType==="time"){if(!we.targetValue)return null;const it=we.startValue||0,xt=we.targetValue,pt=me.time||0,Jt=xt-it;return Jt<=0?pt>=xt?1:0:Math.max(0,Math.min((pt-it)/Jt,1))}if(we.targetType==="reps"){if(!we.targetReps)return null;const it=we.startReps||0,xt=we.targetReps,pt=me.reps||0,Jt=xt-it;return Jt<=0?pt>=xt?1:0:Math.max(0,Math.min((pt-it)/Jt,1))}if(we.targetType==="distance"){if(!we.targetDistance)return null;const it=we.startDistance||0,xt=we.targetDistance,pt=me.distance||0,Jt=xt-it;return Jt<=0?pt>=xt?1:0:Math.max(0,Math.min((pt-it)/Jt,1))}if(!we.targetWeight&&!we.targetReps)return null;const be=(we.startWeight||0)*(we.startReps||0),de=(we.targetWeight||0)*(we.targetReps||0),rt=(me.weight||0)*(me.reps||0),mt=de-be;return mt<=0?rt>=de?1:0:Math.max(0,Math.min((rt-be)/mt,1))},Ge=H=>{const me=Le[H];if(!me||!me.targetValue)return null;const we=Ye?.bodyMetrics?.[H];if(we==null)return null;const be=me.startValue||0,de=me.targetValue,rt=de-be;return rt===0?we===de?1:0:Math.max(0,Math.min((we-be)/rt,1))},$e=H=>{tt.current=H.touches[0].clientX,He.current=0},St=H=>{He.current=H.touches[0].clientX-tt.current},Xt=()=>{He.current<-50?We(g+1):He.current>50&&We(g-1),He.current=0},Bt=H=>{const me=Ye?.bodyMetrics?.[H],we=ns?.bodyMetrics?.[H];return me==null||we==null?null:parseFloat((me-we).toFixed(2))},tn=n.find(H=>H.month===G),Mn=n.find(H=>H.month===Ne);if(re||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!wt||!ut||!ft)return null;const Rt=Pr[g],an=Ye?.benchmarks?.[Rt.key],Un=ns?.benchmarks?.[Rt.key],wn=yl(Rt,an),ss=yl(Rt,Un),rs=Up(wn,ss),Sn=nt(Rt.key,an),Yn=Sn!==null,Hn=Sn!==null&&Sn>=1,vs=Yn?Math.round(Sn*60):wn>0?15:0,Qn=Se[Rt.key],Rs=H=>H?H.targetType==="time"?`${H.startValue||0}s  ${H.targetValue}s`:H.targetType==="reps"?`${H.startReps||0}  ${H.targetReps} reps`:H.targetType==="distance"?`${H.startDistance||0}  ${H.targetDistance}cm`:`${H.startWeight||0}kg${H.startReps||0}  ${H.targetWeight}kg${H.targetReps}`:null;return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>kt("/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Junior Strength Tests"}),a.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:Oe,onTouchStart:$e,onTouchMove:St,onTouchEnd:Xt,children:[a.jsx("div",{className:`pb-ring-container slide-from-${ie.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:My.map((H,me)=>{const we=me<Math.round(vs);return a.jsx("line",{x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,className:`pb-ring-tick ${we?Hn?"hit":"filled":"empty"}`,strokeWidth:H.thick?"3":"2"},me)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:Rt.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[Rt.name,Lt("strength",Rt.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:an?rd(Rt,an):"-"}),rs!==null&&a.jsxs("div",{className:`pb-ring-change ${rs>=0?"positive":"negative"}`,children:[rs>=0?"+":"",rs.toFixed(1),"%"]}),rs===null&&an&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Qn&&a.jsx("div",{className:`pb-ring-target ${Hn?"hit":""}`,children:Hn?"Target hit!":Rs(Qn)}),!Qn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:Pr.map((H,me)=>a.jsx("button",{className:`pb-dot ${me===g?"active":""}`,onClick:()=>We(me)},me))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>We(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>We(g+1),disabled:g===Pr.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(m3,{data:n,exerciseKey:Rt.key,unit:Rt.unit})]})]}),!w&&!W&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>E(!0),children:Ye?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>z(!0),children:Object.keys(Se).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Se).length>0||Object.keys(Le).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Be,disabled:d,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Lr(lt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{E(!1),te(Ye?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Pr.map(H=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:O[H.key]?.weight??"",onChange:me=>cn(H.key,"weight",me.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:O[H.key]?.reps??"",onChange:me=>cn(H.key,"reps",me.target.value),placeholder:"0"})]})]}):H.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Reps (max in 1 min)"}),a.jsx("input",{type:"number",value:O[H.key]?.reps??"",onChange:me=>cn(H.key,"reps",me.target.value),placeholder:"0"})]})}):H.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:O[H.key]?.distance??"",onChange:me=>cn(H.key,"distance",me.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:O[H.key]?.time??"",onChange:me=>cn(H.key,"time",me.target.value),placeholder:"0"})]})})]},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{E(!1),te(Ye?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:In,disabled:d,children:d?"Saving...":"Save"})]})]}),W&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{z(!1),R(Se)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Pr.map(H=>{const me=Ye?.benchmarks?.[H.key];let we="-";if(me)switch(H.unit){case"weight":(me.weight||me.reps)&&(we=`${me.weight||0}kg  ${me.reps||0}`);break;case"time":me.time&&(we=`${me.time}s`);break;case"reps":me.reps&&(we=`${me.reps} reps`);break;case"distance":me.distance&&(we=`${me.distance} cm`);break}return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",we]})]}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:j[H.key]?.targetWeight??"",onChange:be=>je(H.key,"targetWeight",be.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:j[H.key]?.targetReps??"",onChange:be=>je(H.key,"targetReps",be.target.value),placeholder:"0"})]})]}):H.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Reps (in 1 min)"}),a.jsx("input",{type:"number",value:j[H.key]?.targetReps??"",onChange:be=>je(H.key,"targetReps",be.target.value),placeholder:"0"})]})}):H.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:j[H.key]?.targetDistance??"",onChange:be=>je(H.key,"targetDistance",be.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:j[H.key]?.targetValue??"",onChange:be=>je(H.key,"targetValue",be.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{z(!1),R(Se)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:De,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!S&&!D&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Lr(lt)}),a.jsx("div",{className:"pb-metrics-list",children:mo.map(H=>{const me=Ye?.bodyMetrics?.[H.key],we=Bt(H.key),be=Le[H.key],de=Ge(H.key),rt=de!==null&&de>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[H.name,Lt("metric",H.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),be&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",be.targetValue," ",H.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:me!=null?`${me} ${H.suffix}`:"-"}),we!==null&&a.jsxs("span",{className:`pb-metric-change ${we>0?"up":we<0?"down":"same"}`,children:[we>0?"+":"",we," ",H.suffix]})]})]}),de!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${rt?"hit":""}`,style:{width:`${Math.round(de*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${rt?"hit":""}`,children:rt?"Hit!":`${Math.round(de*100)}%`})]})]},H.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:Ye?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Le).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Se).length>0||Object.keys(Le).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Be,disabled:d,children:"Reset All Goals"})]})]}),S&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Lr(lt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),he(Ye?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:mo.map(H=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[H.name," (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:X[H.key]??"",onChange:me=>ge(H.key,me.target.value),placeholder:"0"})]})},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),he(Ye?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ct,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),I(Le)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),mo.map(H=>{const me=Ye?.bodyMetrics?.[H.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",me!=null?`${me} ${H.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:F[H.key]?.targetValue??"",onChange:we=>et(H.key,we.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),I(Le)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Qe,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[ze.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...ze].reverse().map((H,me)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${me*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:H.label}),a.jsx("span",{className:"pb-achievement-date",children:Lr(H.achievedMonth)})]})]},me))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${Ve?"active":""}`,onClick:()=>{V(!Ve),!Ve&&n.length>=2&&(fe(n[0].month),Me(n[n.length-1].month))},children:Ve?"Back to Timeline":"Compare Months"})}),Ve?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:G,onChange:H=>fe(H.target.value),children:n.map(H=>a.jsx("option",{value:H.month,children:Lr(H.month)},H.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:Ne,onChange:H=>Me(H.target.value),children:n.map(H=>a.jsx("option",{value:H.month,children:Lr(H.month)},H.month))})]})]}),tn&&Mn&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Tests"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Lr(G).split(" ")[0]}),a.jsx("span",{children:Lr(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Pr.map(H=>{const me=tn.benchmarks?.[H.key],we=Mn.benchmarks?.[H.key],be=yl(H,me),de=yl(H,we),rt=Up(de,be);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:me?rd(H,me):"-"}),a.jsx("span",{className:"pb-compare-val",children:we?rd(H,we):"-"}),a.jsx("span",{className:`pb-compare-change ${rt!==null?rt>=0?"positive":"negative":""}`,children:rt!==null?`${rt>=0?"+":""}${rt.toFixed(1)}%`:"-"})]},H.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Lr(G).split(" ")[0]}),a.jsx("span",{children:Lr(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),mo.map(H=>{const me=tn.bodyMetrics?.[H.key],we=Mn.bodyMetrics?.[H.key],be=me!=null&&we!=null?parseFloat((we-me).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:me!=null?`${me}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:we!=null?`${we}`:"-"}),a.jsx("span",{className:`pb-compare-change ${be!==null?be>0?"positive":be<0?"negative":"neutral":""}`,children:be!==null?`${be>0?"+":""}${be} ${H.suffix}`:"-"})]},H.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((H,me)=>{const we=n.filter(be=>be.month<H.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${me*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Lr(H.month)}),H.benchmarks&&Object.keys(H.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Tests"}),Pr.map(be=>{const de=H.benchmarks[be.key];if(!de)return null;const rt=we?.benchmarks?.[be.key],mt=yl(be,de),it=yl(be,rt),xt=Up(mt,it);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:be.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:rd(be,de)}),xt!==null&&a.jsxs("span",{className:`pb-timeline-change ${xt>=0?"positive":"negative"}`,children:[xt>=0?"+":"",xt.toFixed(1),"%"]})]})]},be.key)})]}),H.bodyMetrics&&Object.keys(H.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),mo.map(be=>{const de=H.bodyMetrics[be.key];if(de==null)return null;const rt=we?.bodyMetrics?.[be.key],mt=rt!=null?parseFloat((de-rt).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:be.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[de," ",be.suffix]}),mt!==null&&a.jsxs("span",{className:`pb-timeline-change ${mt>0?"positive":mt<0?"negative":"neutral"}`,children:[mt>0?"+":"",mt," ",be.suffix]})]})]},be.key)})]})]})]},H.id)})})]})})]}),Y&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Ee(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Y.map((H,me)=>a.jsx("div",{className:"pb-celebration-badge",children:H.label},me))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Pe&&a.jsxs("div",{className:`toast-notification ${Pe.type}`,children:[a.jsx("span",{className:"toast-icon",children:Pe.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Pe.message}),a.jsx("button",{className:"toast-close",onClick:()=>oe(null),children:""})]}),a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>kt("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>kt("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>kt("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),ft?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>kt("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]})]})}const na=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],po=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function g3(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Or(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function ad(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function c2(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function vl(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function zp(s,e){return!e||e===0?null:(s-e)/e*100}function y3({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(z=>{const O=z.benchmarks?.[e];return O?n==="time"?O.time||0:(O.weight||0)*(O.reps||0):0}),l=Math.max(...i),u=Math.min(...i),d=l-u||1,p=300,g=100,y=20,w=p-y*2,E=g-y*2,S=i.map((z,O)=>{const te=y+O/(i.length-1)*w,X=y+E-(z-u)/d*E;return{x:te,y:X,value:z}}),L=S.map((z,O)=>`${O===0?"M":"L"} ${z.x} ${z.y}`).join(" "),W=L+` L ${S[S.length-1].x} ${y+E} L ${S[0].x} ${y+E} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:W,fill:"url(#trendGradient)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),S.map((z,O)=>a.jsx("circle",{cx:z.x,cy:z.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},O))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((z,O)=>a.jsxs("span",{className:"pb-trend-label",children:[z.month.split("-")[1],"/",z.month.split("-")[0].slice(2)]},O))})]})}function v3(){const[s,e]=k.useState("bests"),[n,i]=k.useState([]),[l,u]=k.useState(!0),[d,p]=k.useState(!1),[g,y]=k.useState(0),[w,E]=k.useState(!1),[S,L]=k.useState(!1),[W,z]=k.useState(!1),[O,te]=k.useState({}),[X,he]=k.useState({}),[Se,Ue]=k.useState({}),[Le,A]=k.useState({}),[j,R]=k.useState({}),[D,M]=k.useState(!1),[F,I]=k.useState({}),[ze,vt]=k.useState([]),[Y,Ee]=k.useState(null),[Pe,oe]=k.useState(null),[Ve,V]=k.useState(!1),[G,fe]=k.useState(""),[Ne,Me]=k.useState(""),[Oe,tt]=k.useState({}),[He,ie]=k.useState({}),[We,wt]=k.useState(null),[ut,ft]=k.useState(null),[re,Ft]=k.useState(""),kt=k.useRef(null),bt=k.useRef(0),jt=k.useRef(0),lt=k.useRef("right"),Ye=k.useCallback(q=>{y(le=>{const b=Math.max(0,Math.min(na.length-1,q));return b===le?le:(lt.current=b>le?"right":"left",b)})},[]),{currentUser:qt,isClient:ns,clientData:Nt,loading:Lt}=jr(),{isDark:In}=ma(),Ct=Vs(),[cn]=Lj(),ge=cn.get("mode")==="corebuddy",je=!ge&&(!Nt?.clientType||Nt.clientType==="block"),De=k.useCallback((q,le="info")=>{oe({message:q,type:le}),setTimeout(()=>oe(null),4e3)},[]);k.useEffect(()=>{!Lt&&(!qt||!ns)&&Ct("/")},[qt,ns,Lt,Ct]),k.useEffect(()=>{Nt&&(je?et():(async()=>{try{const[le,b,T]=await Promise.all([An(Xe(Ie,"coreBuddyPBs",Nt.id)),An(Xe(Ie,"coreBuddyTargets",Nt.id)),An(Xe(Ie,"coreBuddyAchievements",Nt.id))]);le.exists()&&tt(le.data().exercises||{}),b.exists()&&ie(b.data().targets||{}),T.exists()&&wt(T.data())}catch(le){console.error("Error loading Core Buddy PBs:",le)}u(!1)})())},[Nt]);const et=async()=>{try{const q=On(rn(Ie,"personalBests"),bn("clientId","==",Nt.id)),b=(await En(q)).docs.map(ye=>({id:ye.id,...ye.data()}));b.sort((ye,xe)=>ye.month.localeCompare(xe.month)),i(b);const T=On(rn(Ie,"personalBestTargets"),bn("clientId","==",Nt.id)),P=await En(T);if(!P.empty){const ye=P.docs[0].data();Ue(ye.targets||{}),A(ye.metricTargets||{}),R(ye.targets||{}),I(ye.metricTargets||{})}const K=On(rn(Ie,"achievements"),bn("clientId","==",Nt.id)),Ae=await En(K);Ae.empty||vt(Ae.docs[0].data().badges||[])}catch(q){console.error("Error fetching personal bests:",q)}u(!1)},Qe=async()=>{if(!ut||!re||!Nt)return;const q=parseFloat(re),le=Oe[ut];if(!le||q<=le.weight){De("Target must be higher than current PB","error");return}p(!0);try{const b={...He,[ut]:{targetWeight:q,setAt:dt.now(),currentPBWhenSet:le.weight}};await xn(Xe(Ie,"coreBuddyTargets",Nt.id),{clientId:Nt.id,targets:b,updatedAt:dt.now()}),ie(b),ft(null),Ft(""),De("Target set!","success")}catch(b){console.error("Error saving target:",b),De("Failed to save target","error")}p(!1)},Be=q=>{if(!We?.badges)return!1;const le=He[q];return le?We.badges.some(b=>b.type==="pb_target"&&b.exercise===q&&b.targetWeight===le.targetWeight):!1},nt=q=>{const le=He[q];if(!le)return null;const b=Oe[q];if(!b)return 0;const T=le.currentPBWhenSet||0,P=le.targetWeight,K=P-T;return K<=0?b.weight>=P?1:0:Math.max(0,Math.min((b.weight-T)/K,1))},Ge=g3(),$e=n.find(q=>q.month===Ge),St=n.filter(q=>q.month<Ge),Xt=St.length>0?St[St.length-1]:null;k.useEffect(()=>{$e?(te($e.benchmarks||{}),he($e.bodyMetrics||{})):(te({}),he({}))},[$e?.id]);const Bt=async(q,le)=>{const b=[];if(q==="strength"?na.forEach(T=>{const P=Se[T.key];if(!P)return;const K=le[T.key];if(!K)return;let Ae;if(P.targetType==="time"){if(!P.targetValue)return;const ye=P.startValue||0,xe=K.time||0,st=P.targetValue-ye;Ae=st===0?xe>=P.targetValue?1:0:Math.max(0,(xe-ye)/st)}else{if(!P.targetWeight&&!P.targetReps)return;const ye=(P.startWeight||0)*(P.startReps||0),xe=(P.targetWeight||0)*(P.targetReps||0),st=(K.weight||0)*(K.reps||0),Ze=xe-ye;Ae=Ze===0?st>=xe?1:0:Math.max(0,(st-ye)/Ze)}if(Ae>=1&&!(P.targetType==="time"?ze.some(xe=>xe.type==="strength"&&xe.key===T.key&&xe.targetValue===P.targetValue):ze.some(xe=>xe.type==="strength"&&xe.key===T.key&&xe.targetWeight===P.targetWeight&&xe.targetReps===P.targetReps))){const xe=P.targetType==="time"?`${T.name} ${P.targetValue}s`:`${T.name} ${P.targetWeight}kg  ${P.targetReps}`;b.push({type:"strength",key:T.key,...P.targetType==="time"?{targetType:"time",targetValue:P.targetValue}:{targetWeight:P.targetWeight,targetReps:P.targetReps},achievedMonth:Ge,label:xe})}}):po.forEach(T=>{const P=Le[T.key];if(!P||!P.targetValue)return;const K=le[T.key];if(K==null)return;const Ae=P.startValue||0,ye=P.targetValue,xe=ye-Ae;(xe===0?K===ye?1:0:Math.max(0,(K-Ae)/xe))>=1&&(ze.some(U=>U.type==="metric"&&U.key===T.key&&U.targetValue===ye)||b.push({type:"metric",key:T.key,targetValue:ye,achievedMonth:Ge,label:`${T.name} ${ye}${T.suffix}`}))}),b.length>0){const T=[...ze,...b];await xn(Xe(Ie,"achievements",Nt.id),{clientId:Nt.id,badges:T,updatedAt:dt.now()}),vt(T),Ee(b),setTimeout(()=>Ee(null),5e3)}},tn=(q,le)=>{if(q==="strength"){const b=Se[le];return b?b.targetType==="time"?ze.some(T=>T.type==="strength"&&T.key===le&&T.targetValue===b.targetValue):!b.targetWeight&&!b.targetReps?!1:ze.some(T=>T.type==="strength"&&T.key===le&&T.targetWeight===b.targetWeight&&T.targetReps===b.targetReps):!1}else{const b=Le[le];return!b||!b.targetValue?!1:ze.some(T=>T.type==="metric"&&T.key===le&&T.targetValue===b.targetValue)}},Mn=async()=>{p(!0);try{const q=`${Nt.id}_${Ge}`,le=$e||{};await xn(Xe(Ie,"personalBests",q),{clientId:Nt.id,month:Ge,benchmarks:O,bodyMetrics:le.bodyMetrics||X||{},createdAt:le.createdAt||dt.now(),updatedAt:dt.now()}),await Bt("strength",O),De("Benchmarks saved!","success"),E(!1),await et()}catch(q){console.error("Error saving benchmarks:",q),De("Failed to save. Please try again.","error")}p(!1)},Rt=async()=>{p(!0);try{const q=`${Nt.id}_${Ge}`,le=$e||{};await xn(Xe(Ie,"personalBests",q),{clientId:Nt.id,month:Ge,benchmarks:le.benchmarks||O||{},bodyMetrics:X,createdAt:le.createdAt||dt.now(),updatedAt:dt.now()}),await Bt("metric",X),De("Body metrics saved!","success"),L(!1),await et()}catch(q){console.error("Error saving metrics:",q),De("Failed to save. Please try again.","error")}p(!1)},an=(q,le,b)=>{te(T=>({...T,[q]:{...T[q],[le]:b===""?"":parseFloat(b)}}))},Un=(q,le)=>{he(b=>({...b,[q]:le===""?"":parseFloat(le)}))},wn=(q,le,b)=>{R(T=>({...T,[q]:{...T[q],[le]:b===""?"":parseFloat(b)}}))},ss=async()=>{p(!0);try{const q=`targets_${Nt.id}`,le=$e?.benchmarks||{},b={};na.forEach(T=>{const P=le[T.key];T.unit==="time"?j[T.key]?.targetValue&&(b[T.key]={targetType:"time",targetValue:j[T.key].targetValue,startValue:P?.time||0}):(j[T.key]?.targetWeight||j[T.key]?.targetReps)&&(b[T.key]={targetWeight:j[T.key].targetWeight||0,targetReps:j[T.key].targetReps||0,startWeight:P?.weight||0,startReps:P?.reps||0})}),await xn(Xe(Ie,"personalBestTargets",q),{clientId:Nt.id,targets:b,metricTargets:Le,updatedAt:dt.now()}),Ue(b),R(b),De("Targets saved!","success"),z(!1)}catch(q){console.error("Error saving targets:",q),De("Failed to save targets.","error")}p(!1)},rs=(q,le)=>{I(b=>({...b,[q]:{...b[q],targetValue:le===""?"":parseFloat(le)}}))},Sn=async()=>{p(!0);try{const q=`targets_${Nt.id}`,le={};po.forEach(b=>{if(F[b.key]?.targetValue){const T=$e?.bodyMetrics?.[b.key]||0;le[b.key]={targetValue:F[b.key].targetValue,startValue:T}}}),await xn(Xe(Ie,"personalBestTargets",q),{clientId:Nt.id,targets:Se,metricTargets:le,updatedAt:dt.now()}),A(le),I(le),De("Metric targets saved!","success"),M(!1)}catch(q){console.error("Error saving metric targets:",q),De("Failed to save targets.","error")}p(!1)},Yn=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const q=Xe(Ie,"personalBestTargets",`targets_${Nt.id}`);await Js(q),Ue({}),A({}),R({}),I({}),De("All goals have been reset","success")}catch(q){console.error("Error resetting targets:",q),De("Failed to reset goals","error")}p(!1)}},Hn=(q,le)=>{const b=Se[q];if(!b||!le)return null;if(b.targetType==="time"){if(!b.targetValue)return null;const ye=b.startValue||0,xe=b.targetValue,st=le.time||0,Ze=xe-ye;return Ze<=0?st>=xe?1:0:Math.max(0,Math.min((st-ye)/Ze,1))}if(!b.targetWeight&&!b.targetReps)return null;const T=(b.startWeight||0)*(b.startReps||0),P=(b.targetWeight||0)*(b.targetReps||0),K=(le.weight||0)*(le.reps||0),Ae=P-T;return Ae<=0?K>=P?1:0:Math.max(0,Math.min((K-T)/Ae,1))},vs=q=>{const le=Le[q];if(!le||!le.targetValue)return null;const b=$e?.bodyMetrics?.[q];if(b==null)return null;const T=le.startValue||0,P=le.targetValue,K=P-T;return K===0?b===P?1:0:Math.max(0,Math.min((b-T)/K,1))},Qn=q=>{bt.current=q.touches[0].clientX,jt.current=0},Rs=q=>{jt.current=q.touches[0].clientX-bt.current},H=()=>{jt.current<-50?Ye(g+1):jt.current>50&&Ye(g-1),jt.current=0},me=q=>{const le=$e?.bodyMetrics?.[q],b=Xt?.bodyMetrics?.[q];return le==null||b==null?null:parseFloat((le-b).toFixed(2))},we=n.find(q=>q.month===G),be=n.find(q=>q.month===Ne);if(Lt||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!qt||!ns||!Nt)return null;if(je&&Nt?.isJunior)return a.jsx(p3,{});const de=na[g],rt=$e?.benchmarks?.[de.key],mt=Xt?.benchmarks?.[de.key],it=vl(de,rt),xt=vl(de,mt),pt=zp(it,xt),Jt=Hn(de.key,rt),As=Jt!==null,as=Jt!==null&&Jt>=1,bs=As?Math.round(Jt*60):it>0?15:0,_n=Se[de.key];return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>Ct(ge?"/client/core-buddy":"/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Personal Bests"}),a.jsx("p",{children:je?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!je&&a.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Oe).length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("div",{className:"pb-cb-empty-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),a.jsx("h4",{children:"No personal bests yet"}),a.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):a.jsx("div",{className:"pb-cb-grid",children:Object.entries(Oe).sort(([q],[le])=>q.localeCompare(le)).map(([q,le],b)=>{const T=He[q],P=nt(q),K=P!==null&&P>=1,Ae=Be(q),ye=P!==null?Math.round(P*60):60;return a.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${b*.05}s`},children:[a.jsxs("div",{className:"pb-cb-card-ring",children:[a.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:ND.map((xe,st)=>{const Ze=st<ye;return a.jsx("line",{x1:xe.x1,y1:xe.y1,x2:xe.x2,y2:xe.y2,className:`pb-ring-tick ${Ze?K?"hit":"filled":"empty"}`,strokeWidth:xe.thick?"2":"1.5"},st)})}),a.jsx("div",{className:"pb-cb-ring-icon",children:Ae?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),a.jsxs("div",{className:"pb-cb-card-info",children:[a.jsx("h4",{className:"pb-cb-card-name",children:q}),a.jsxs("div",{className:"pb-cb-card-value",children:[le.weight,"kg  ",le.reps]}),le.achievedAt&&a.jsx("div",{className:"pb-cb-card-date",children:(le.achievedAt.toDate?le.achievedAt.toDate():new Date(le.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),T&&!K&&a.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",T.targetWeight,"kg (",Math.round((P||0)*100),"%)"]}),T&&K&&!Ae&&a.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),Ae&&a.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),a.jsx("div",{className:"pb-cb-card-action",children:T?K&&Ae?a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{ft(q),Ft("")},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{ft(q),Ft("")},children:a.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},q)})}),Object.keys(Oe).length>0&&a.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>Ct("/client/core-buddy/achievements"),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),ut&&a.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>ft(null),children:a.jsxs("div",{className:"pb-cb-target-modal",onClick:q=>q.stopPropagation(),children:[a.jsx("h3",{children:"Set Target"}),a.jsx("p",{className:"pb-cb-target-exercise-name",children:ut}),a.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",a.jsxs("strong",{children:[Oe[ut]?.weight,"kg"]})]}),a.jsxs("div",{className:"pb-cb-target-input-wrap",children:[a.jsx("label",{children:"Your target (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:re,onChange:q=>Ft(q.target.value),placeholder:String((Oe[ut]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),a.jsxs("div",{className:"pb-cb-target-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>ft(null),children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Qe,disabled:d,children:d?"Saving...":"Set Target"})]})]})})]}),je&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:kt,onTouchStart:Qn,onTouchMove:Rs,onTouchEnd:H,children:[a.jsx("div",{className:`pb-ring-container slide-from-${lt.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:My.map((q,le)=>{const b=le<Math.round(bs);return a.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:`pb-ring-tick ${b?as?"hit":"filled":"empty"}`,strokeWidth:q.thick?"3":"2"},le)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:de.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[de.name,tn("strength",de.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:rt?de.unit==="time"?ad(rt.time):c2(rt.weight,rt.reps):"-"}),pt!==null&&a.jsxs("div",{className:`pb-ring-change ${pt>=0?"positive":"negative"}`,children:[pt>=0?"+":"",pt.toFixed(1),"%"]}),pt===null&&rt&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),_n&&a.jsx("div",{className:`pb-ring-target ${as?"hit":""}`,children:as?"Target hit!":_n.targetType==="time"?`${_n.startValue||0}s  ${_n.targetValue}s`:`${_n.startWeight||0}kg${_n.startReps||0}  ${_n.targetWeight}kg${_n.targetReps}`}),!_n&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:na.map((q,le)=>a.jsx("button",{className:`pb-dot ${le===g?"active":""}`,onClick:()=>Ye(le)},le))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Ye(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Ye(g+1),disabled:g===na.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(y3,{data:n,exerciseKey:de.key,unit:de.unit})]})]}),!w&&!W&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>E(!0),children:$e?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>z(!0),children:Object.keys(Se).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Se).length>0||Object.keys(Le).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Yn,disabled:d,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Or(Ge)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{E(!1),te($e?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:na.map(q=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),q.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:O[q.key]?.weight??"",onChange:le=>an(q.key,"weight",le.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:O[q.key]?.reps??"",onChange:le=>an(q.key,"reps",le.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:O[q.key]?.time??"",onChange:le=>an(q.key,"time",le.target.value),placeholder:"0"})]})})]},q.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{E(!1),te($e?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Mn,disabled:d,children:d?"Saving...":"Save"})]})]}),W&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{z(!1),R(Se)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),na.map(q=>{const le=$e?.benchmarks?.[q.key];let b="-";return le&&(q.unit==="time"&&le.time?b=`${le.time}s`:(le.weight||le.reps)&&(b=`${le.weight||0}kg  ${le.reps||0}`)),a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",b]})]}),q.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:j[q.key]?.targetWeight??"",onChange:T=>wn(q.key,"targetWeight",T.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:j[q.key]?.targetReps??"",onChange:T=>wn(q.key,"targetReps",T.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:j[q.key]?.targetValue??"",onChange:T=>wn(q.key,"targetValue",T.target.value),placeholder:"0"})]})})]},q.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{z(!1),R(Se)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:ss,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!S&&!D&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Or(Ge)}),a.jsx("div",{className:"pb-metrics-list",children:po.map(q=>{const le=$e?.bodyMetrics?.[q.key],b=me(q.key),T=Le[q.key],P=vs(q.key),K=P!==null&&P>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[q.name,tn("metric",q.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),T&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",T.targetValue," ",q.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:le!=null?`${le} ${q.suffix}`:"-"}),b!==null&&a.jsxs("span",{className:`pb-metric-change ${b>0?"up":b<0?"down":"same"}`,children:[b>0?"+":"",b," ",q.suffix]})]})]}),P!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${K?"hit":""}`,style:{width:`${Math.round(P*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${K?"hit":""}`,children:K?"Hit!":`${Math.round(P*100)}%`})]})]},q.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:$e?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Le).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Se).length>0||Object.keys(Le).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Yn,disabled:d,children:"Reset All Goals"})]})]}),S&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Or(Ge)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),he($e?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:po.map(q=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[q.name," (",q.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:X[q.key]??"",onChange:le=>Un(q.key,le.target.value),placeholder:"0"})]})},q.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),he($e?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Rt,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),I(Le)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),po.map(q=>{const le=$e?.bodyMetrics?.[q.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",le!=null?`${le} ${q.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",q.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:F[q.key]?.targetValue??"",onChange:b=>rs(q.key,b.target.value),placeholder:"0"})]})})]},q.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),I(Le)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Sn,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[ze.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...ze].reverse().map((q,le)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${le*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:q.label}),a.jsx("span",{className:"pb-achievement-date",children:Or(q.achievedMonth)})]})]},le))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${Ve?"active":""}`,onClick:()=>{V(!Ve),!Ve&&n.length>=2&&(fe(n[0].month),Me(n[n.length-1].month))},children:Ve?"Back to Timeline":"Compare Months"})}),Ve?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:G,onChange:q=>fe(q.target.value),children:n.map(q=>a.jsx("option",{value:q.month,children:Or(q.month)},q.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:Ne,onChange:q=>Me(q.target.value),children:n.map(q=>a.jsx("option",{value:q.month,children:Or(q.month)},q.month))})]})]}),we&&be&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Benchmarks"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Or(G).split(" ")[0]}),a.jsx("span",{children:Or(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),na.map(q=>{const le=we.benchmarks?.[q.key],b=be.benchmarks?.[q.key],T=vl(q,le),P=vl(q,b),K=zp(P,T);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:q.name}),a.jsx("span",{className:"pb-compare-val",children:le?q.unit==="time"?ad(le.time):`${le.weight}x${le.reps}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:b?q.unit==="time"?ad(b.time):`${b.weight}x${b.reps}`:"-"}),a.jsx("span",{className:`pb-compare-change ${K!==null?K>=0?"positive":"negative":""}`,children:K!==null?`${K>=0?"+":""}${K.toFixed(1)}%`:"-"})]},q.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Or(G).split(" ")[0]}),a.jsx("span",{children:Or(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),po.map(q=>{const le=we.bodyMetrics?.[q.key],b=be.bodyMetrics?.[q.key],T=le!=null&&b!=null?parseFloat((b-le).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:q.name}),a.jsx("span",{className:"pb-compare-val",children:le!=null?`${le}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:b!=null?`${b}`:"-"}),a.jsx("span",{className:`pb-compare-change ${T!==null?T>0?"positive":T<0?"negative":"neutral":""}`,children:T!==null?`${T>0?"+":""}${T} ${q.suffix}`:"-"})]},q.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((q,le)=>{const b=n.find(T=>T.month<q.month&&n.indexOf(T)===n.indexOf(q)-1)||n.filter(T=>T.month<q.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${le*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Or(q.month)}),q.benchmarks&&Object.keys(q.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Benchmarks"}),na.map(T=>{const P=q.benchmarks[T.key];if(!P)return null;const K=b?.benchmarks?.[T.key],Ae=vl(T,P),ye=vl(T,K),xe=zp(Ae,ye);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:T.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:T.unit==="time"?ad(P.time):c2(P.weight,P.reps)}),xe!==null&&a.jsxs("span",{className:`pb-timeline-change ${xe>=0?"positive":"negative"}`,children:[xe>=0?"+":"",xe.toFixed(1),"%"]})]})]},T.key)})]}),q.bodyMetrics&&Object.keys(q.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),po.map(T=>{const P=q.bodyMetrics[T.key];if(P==null)return null;const K=b?.bodyMetrics?.[T.key],Ae=K!=null?parseFloat((P-K).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:T.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[P," ",T.suffix]}),Ae!==null&&a.jsxs("span",{className:`pb-timeline-change ${Ae>0?"positive":Ae<0?"negative":"neutral"}`,children:[Ae>0?"+":"",Ae," ",T.suffix]})]})]},T.key)})]})]})]},q.id)})})]})})]})]}),Y&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Ee(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Y.map((q,le)=>a.jsx("div",{className:"pb-celebration-badge",children:q.label},le))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Pe&&a.jsxs("div",{className:`toast-notification ${Pe.type}`,children:[a.jsx("span",{className:"toast-icon",children:Pe.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Pe.message}),a.jsx("button",{className:"toast-close",onClick:()=>oe(null),children:""})]}),je&&a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),Nt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]}),ge&&a.jsx(da,{active:"progress"})]})}const b3=k.lazy(()=>Er(()=>import("./Dashboard-Dzh8Afz8.js"),__vite__mapDeps([0,1]))),x3=k.lazy(()=>Er(()=>import("./AddClient-BWe7lU3i.js"),__vite__mapDeps([2,3]))),w3=k.lazy(()=>Er(()=>import("./ClientDashboard-C9V6Q8zB.js"),[])),_3=k.lazy(()=>Er(()=>import("./ClientForms-BHKPxJJw.js"),__vite__mapDeps([4,5]))),k3=k.lazy(()=>Er(()=>import("./ClientTools-B7HqyZt5.js"),__vite__mapDeps([6,7]))),T3=k.lazy(()=>Er(()=>import("./MacroCalculator-BbJ4Vv0Z.js"),__vite__mapDeps([8,7]))),E3=k.lazy(()=>Er(()=>import("./ProteinSnacks-Dxeh4AfE.js"),__vite__mapDeps([9,7]))),j3=k.lazy(()=>Er(()=>import("./DailyMotivation-BTHMSFUv.js"),__vite__mapDeps([10,7]))),S3=k.lazy(()=>Er(()=>import("./CircuitDashboard-Dyb34zXL.js"),__vite__mapDeps([11,12]))),N3=k.lazy(()=>Er(()=>import("./CircuitBooking-DR6TkRK1.js"),__vite__mapDeps([13,14,12]))),C3=k.lazy(()=>Er(()=>import("./Leaderboard-tZp59dUS.js"),__vite__mapDeps([15,16])));function R3({children:s}){const{pathname:e}=Hr();return k.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),k.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function A3(){const s=Vs();return k.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function I3(){return a.jsx(ED,{children:a.jsx(TD,{children:a.jsxs(Aj,{basename:"/login",children:[a.jsx(A3,{}),a.jsx(R3,{children:a.jsx(k.Suspense,{fallback:null,children:a.jsxs(ij,{children:[a.jsx(Fn,{path:"/",element:a.jsx(jD,{})}),a.jsx(Fn,{path:"/dashboard",element:a.jsx(b3,{})}),a.jsx(Fn,{path:"/add-client",element:a.jsx(x3,{})}),a.jsx(Fn,{path:"/client",element:a.jsx(w3,{})}),a.jsx(Fn,{path:"/client/forms",element:a.jsx(_3,{})}),a.jsx(Fn,{path:"/client/tools",element:a.jsx(k3,{})}),a.jsx(Fn,{path:"/client/tools/macros",element:a.jsx(T3,{})}),a.jsx(Fn,{path:"/client/tools/snacks",element:a.jsx(E3,{})}),a.jsx(Fn,{path:"/client/tools/motivation",element:a.jsx(j3,{})}),a.jsx(Fn,{path:"/client/personal-bests",element:a.jsx(v3,{})}),a.jsx(Fn,{path:"/client/circuit",element:a.jsx(S3,{})}),a.jsx(Fn,{path:"/client/circuit/booking",element:a.jsx(N3,{})}),a.jsx(Fn,{path:"/client/core-buddy",element:a.jsx(MD,{})}),a.jsx(Fn,{path:"/client/core-buddy/nutrition",element:a.jsx(LD,{})}),a.jsx(Fn,{path:"/client/core-buddy/workouts",element:a.jsx(KD,{})}),a.jsx(Fn,{path:"/client/core-buddy/programmes",element:a.jsx(ZD,{})}),a.jsx(Fn,{path:"/client/core-buddy/achievements",element:a.jsx(a3,{})}),a.jsx(Fn,{path:"/client/core-buddy/consistency",element:a.jsx(l3,{})}),a.jsx(Fn,{path:"/client/core-buddy/buddies",element:a.jsx(c3,{})}),a.jsx(Fn,{path:"/client/core-buddy/profile/:userId",element:a.jsx(u3,{})}),a.jsx(Fn,{path:"/client/leaderboard",element:a.jsx(C3,{})}),a.jsx(Fn,{path:"*",element:a.jsx(rj,{to:"/",replace:!0})})]})})})]})})})}aE.createRoot(document.getElementById("root")).render(a.jsx(k.StrictMode,{children:a.jsx(I3,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{da as C,dt as T,Bl as a,Js as b,rn as c,Ie as d,Xe as e,M3 as f,En as g,NC as h,An as i,a as j,jr as k,ma as l,Vs as m,My as n,Vd as o,xn as p,On as q,k as r,P3 as s,vo as u,bn as w};
