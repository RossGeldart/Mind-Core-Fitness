(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();function LT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Qp={exports:{}},rd={};var K1;function VT(){if(K1)return rd;K1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,i,c){var u=null;if(c!==void 0&&(u=""+c),i.key!==void 0&&(u=""+i.key),"key"in i){c={};for(var f in i)f!=="key"&&(c[f]=i[f])}else c=i;return i=c.ref,{$$typeof:s,type:a,key:u,ref:i!==void 0?i:null,props:c}}return rd.Fragment=e,rd.jsx=t,rd.jsxs=t,rd}var Q1;function UT(){return Q1||(Q1=1,Qp.exports=VT()),Qp.exports}var o=UT(),Xp={exports:{}},Ht={};var X1;function BT(){if(X1)return Ht;X1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),C=Symbol.iterator;function L(Q){return Q===null||typeof Q!="object"?null:(Q=C&&Q[C]||Q["@@iterator"],typeof Q=="function"?Q:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,F={};function K(Q,ue,ze){this.props=Q,this.context=ue,this.refs=F,this.updater=ze||P}K.prototype.isReactComponent={},K.prototype.setState=function(Q,ue){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,ue,"setState")},K.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function G(){}G.prototype=K.prototype;function se(Q,ue,ze){this.props=Q,this.context=ue,this.refs=F,this.updater=ze||P}var Y=se.prototype=new G;Y.constructor=se,V(Y,K.prototype),Y.isPureReactComponent=!0;var fe=Array.isArray;function je(){}var q={H:null,A:null,T:null,S:null},B=Object.prototype.hasOwnProperty;function H(Q,ue,ze){var Oe=ze.ref;return{$$typeof:s,type:Q,key:ue,ref:Oe!==void 0?Oe:null,props:ze}}function Z(Q,ue){return H(Q.type,ue,Q.props)}function $(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===s}function ee(Q){var ue={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(ze){return ue[ze]})}var O=/\/+/g;function ke(Q,ue){return typeof Q=="object"&&Q!==null&&Q.key!=null?ee(""+Q.key):ue.toString(36)}function Ie(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(je,je):(Q.status="pending",Q.then(function(ue){Q.status==="pending"&&(Q.status="fulfilled",Q.value=ue)},function(ue){Q.status==="pending"&&(Q.status="rejected",Q.reason=ue)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function te(Q,ue,ze,Oe,de){var Be=typeof Q;(Be==="undefined"||Be==="boolean")&&(Q=null);var le=!1;if(Q===null)le=!0;else switch(Be){case"bigint":case"string":case"number":le=!0;break;case"object":switch(Q.$$typeof){case s:case e:le=!0;break;case T:return le=Q._init,te(le(Q._payload),ue,ze,Oe,de)}}if(le)return de=de(Q),le=Oe===""?"."+ke(Q,0):Oe,fe(de)?(ze="",le!=null&&(ze=le.replace(O,"$&/")+"/"),te(de,ue,ze,"",function(st){return st})):de!=null&&($(de)&&(de=Z(de,ze+(de.key==null||Q&&Q.key===de.key?"":(""+de.key).replace(O,"$&/")+"/")+le)),ue.push(de)),1;le=0;var ge=Oe===""?".":Oe+":";if(fe(Q))for(var be=0;be<Q.length;be++)Oe=Q[be],Be=ge+ke(Oe,be),le+=te(Oe,ue,ze,Be,de);else if(be=L(Q),typeof be=="function")for(Q=be.call(Q),be=0;!(Oe=Q.next()).done;)Oe=Oe.value,Be=ge+ke(Oe,be++),le+=te(Oe,ue,ze,Be,de);else if(Be==="object"){if(typeof Q.then=="function")return te(Ie(Q),ue,ze,Oe,de);throw ue=String(Q),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return le}function ve(Q,ue,ze){if(Q==null)return Q;var Oe=[],de=0;return te(Q,Oe,"","",function(Be){return ue.call(ze,Be,de++)}),Oe}function Le(Q){if(Q._status===-1){var ue=Q._result;ue=ue(),ue.then(function(ze){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=ze)},function(ze){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=ze)}),Q._status===-1&&(Q._status=0,Q._result=ue)}if(Q._status===1)return Q._result.default;throw Q._result}var De=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},Je={map:ve,forEach:function(Q,ue,ze){ve(Q,function(){ue.apply(this,arguments)},ze)},count:function(Q){var ue=0;return ve(Q,function(){ue++}),ue},toArray:function(Q){return ve(Q,function(ue){return ue})||[]},only:function(Q){if(!$(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return Ht.Activity=E,Ht.Children=Je,Ht.Component=K,Ht.Fragment=t,Ht.Profiler=i,Ht.PureComponent=se,Ht.StrictMode=a,Ht.Suspense=m,Ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Ht.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return q.H.useMemoCache(Q)}},Ht.cache=function(Q){return function(){return Q.apply(null,arguments)}},Ht.cacheSignal=function(){return null},Ht.cloneElement=function(Q,ue,ze){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var Oe=V({},Q.props),de=Q.key;if(ue!=null)for(Be in ue.key!==void 0&&(de=""+ue.key),ue)!B.call(ue,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ue.ref===void 0||(Oe[Be]=ue[Be]);var Be=arguments.length-2;if(Be===1)Oe.children=ze;else if(1<Be){for(var le=Array(Be),ge=0;ge<Be;ge++)le[ge]=arguments[ge+2];Oe.children=le}return H(Q.type,de,Oe)},Ht.createContext=function(Q){return Q={$$typeof:u,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:c,_context:Q},Q},Ht.createElement=function(Q,ue,ze){var Oe,de={},Be=null;if(ue!=null)for(Oe in ue.key!==void 0&&(Be=""+ue.key),ue)B.call(ue,Oe)&&Oe!=="key"&&Oe!=="__self"&&Oe!=="__source"&&(de[Oe]=ue[Oe]);var le=arguments.length-2;if(le===1)de.children=ze;else if(1<le){for(var ge=Array(le),be=0;be<le;be++)ge[be]=arguments[be+2];de.children=ge}if(Q&&Q.defaultProps)for(Oe in le=Q.defaultProps,le)de[Oe]===void 0&&(de[Oe]=le[Oe]);return H(Q,Be,de)},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(Q){return{$$typeof:f,render:Q}},Ht.isValidElement=$,Ht.lazy=function(Q){return{$$typeof:T,_payload:{_status:-1,_result:Q},_init:Le}},Ht.memo=function(Q,ue){return{$$typeof:b,type:Q,compare:ue===void 0?null:ue}},Ht.startTransition=function(Q){var ue=q.T,ze={};q.T=ze;try{var Oe=Q(),de=q.S;de!==null&&de(ze,Oe),typeof Oe=="object"&&Oe!==null&&typeof Oe.then=="function"&&Oe.then(je,De)}catch(Be){De(Be)}finally{ue!==null&&ze.types!==null&&(ue.types=ze.types),q.T=ue}},Ht.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Ht.use=function(Q){return q.H.use(Q)},Ht.useActionState=function(Q,ue,ze){return q.H.useActionState(Q,ue,ze)},Ht.useCallback=function(Q,ue){return q.H.useCallback(Q,ue)},Ht.useContext=function(Q){return q.H.useContext(Q)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(Q,ue){return q.H.useDeferredValue(Q,ue)},Ht.useEffect=function(Q,ue){return q.H.useEffect(Q,ue)},Ht.useEffectEvent=function(Q){return q.H.useEffectEvent(Q)},Ht.useId=function(){return q.H.useId()},Ht.useImperativeHandle=function(Q,ue,ze){return q.H.useImperativeHandle(Q,ue,ze)},Ht.useInsertionEffect=function(Q,ue){return q.H.useInsertionEffect(Q,ue)},Ht.useLayoutEffect=function(Q,ue){return q.H.useLayoutEffect(Q,ue)},Ht.useMemo=function(Q,ue){return q.H.useMemo(Q,ue)},Ht.useOptimistic=function(Q,ue){return q.H.useOptimistic(Q,ue)},Ht.useReducer=function(Q,ue,ze){return q.H.useReducer(Q,ue,ze)},Ht.useRef=function(Q){return q.H.useRef(Q)},Ht.useState=function(Q){return q.H.useState(Q)},Ht.useSyncExternalStore=function(Q,ue,ze){return q.H.useSyncExternalStore(Q,ue,ze)},Ht.useTransition=function(){return q.H.useTransition()},Ht.version="19.2.4",Ht}var J1;function iy(){return J1||(J1=1,Xp.exports=BT()),Xp.exports}var I=iy(),Jp={exports:{}},ad={},Zp={exports:{}},eg={};var Z1;function zT(){return Z1||(Z1=1,(function(s){function e(te,ve){var Le=te.length;te.push(ve);e:for(;0<Le;){var De=Le-1>>>1,Je=te[De];if(0<i(Je,ve))te[De]=ve,te[Le]=Je,Le=De;else break e}}function t(te){return te.length===0?null:te[0]}function a(te){if(te.length===0)return null;var ve=te[0],Le=te.pop();if(Le!==ve){te[0]=Le;e:for(var De=0,Je=te.length,Q=Je>>>1;De<Q;){var ue=2*(De+1)-1,ze=te[ue],Oe=ue+1,de=te[Oe];if(0>i(ze,Le))Oe<Je&&0>i(de,ze)?(te[De]=de,te[Oe]=Le,De=Oe):(te[De]=ze,te[ue]=Le,De=ue);else if(Oe<Je&&0>i(de,Le))te[De]=de,te[Oe]=Le,De=Oe;else break e}}return ve}function i(te,ve){var Le=te.sortIndex-ve.sortIndex;return Le!==0?Le:te.id-ve.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();s.unstable_now=function(){return u.now()-f}}var m=[],b=[],T=1,E=null,C=3,L=!1,P=!1,V=!1,F=!1,K=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function Y(te){for(var ve=t(b);ve!==null;){if(ve.callback===null)a(b);else if(ve.startTime<=te)a(b),ve.sortIndex=ve.expirationTime,e(m,ve);else break;ve=t(b)}}function fe(te){if(V=!1,Y(te),!P)if(t(m)!==null)P=!0,je||(je=!0,ee());else{var ve=t(b);ve!==null&&Ie(fe,ve.startTime-te)}}var je=!1,q=-1,B=5,H=-1;function Z(){return F?!0:!(s.unstable_now()-H<B)}function $(){if(F=!1,je){var te=s.unstable_now();H=te;var ve=!0;try{e:{P=!1,V&&(V=!1,G(q),q=-1),L=!0;var Le=C;try{t:{for(Y(te),E=t(m);E!==null&&!(E.expirationTime>te&&Z());){var De=E.callback;if(typeof De=="function"){E.callback=null,C=E.priorityLevel;var Je=De(E.expirationTime<=te);if(te=s.unstable_now(),typeof Je=="function"){E.callback=Je,Y(te),ve=!0;break t}E===t(m)&&a(m),Y(te)}else a(m);E=t(m)}if(E!==null)ve=!0;else{var Q=t(b);Q!==null&&Ie(fe,Q.startTime-te),ve=!1}}break e}finally{E=null,C=Le,L=!1}ve=void 0}}finally{ve?ee():je=!1}}}var ee;if(typeof se=="function")ee=function(){se($)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ke=O.port2;O.port1.onmessage=$,ee=function(){ke.postMessage(null)}}else ee=function(){K($,0)};function Ie(te,ve){q=K(function(){te(s.unstable_now())},ve)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(te){switch(C){case 1:case 2:case 3:var ve=3;break;default:ve=C}var Le=C;C=ve;try{return te()}finally{C=Le}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(te,ve){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Le=C;C=te;try{return ve()}finally{C=Le}},s.unstable_scheduleCallback=function(te,ve,Le){var De=s.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?De+Le:De):Le=De,te){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=Le+Je,te={id:T++,callback:ve,priorityLevel:te,startTime:Le,expirationTime:Je,sortIndex:-1},Le>De?(te.sortIndex=Le,e(b,te),t(m)===null&&te===t(b)&&(V?(G(q),q=-1):V=!0,Ie(fe,Le-De))):(te.sortIndex=Je,e(m,te),P||L||(P=!0,je||(je=!0,ee()))),te},s.unstable_shouldYield=Z,s.unstable_wrapCallback=function(te){var ve=C;return function(){var Le=C;C=ve;try{return te.apply(this,arguments)}finally{C=Le}}}})(eg)),eg}var eb;function FT(){return eb||(eb=1,Zp.exports=zT()),Zp.exports}var tg={exports:{}},nr={};var tb;function qT(){if(tb)return nr;tb=1;var s=iy();function e(m){var b="https://react.dev/errors/"+m;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)b+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+m+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function c(m,b,T){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:E==null?null:""+E,children:m,containerInfo:b,implementation:T}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,b){if(m==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return nr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,nr.createPortal=function(m,b){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return c(m,b,null,T)},nr.flushSync=function(m){var b=u.T,T=a.p;try{if(u.T=null,a.p=2,m)return m()}finally{u.T=b,a.p=T,a.d.f()}},nr.preconnect=function(m,b){typeof m=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,a.d.C(m,b))},nr.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},nr.preinit=function(m,b){if(typeof m=="string"&&b&&typeof b.as=="string"){var T=b.as,E=f(T,b.crossOrigin),C=typeof b.integrity=="string"?b.integrity:void 0,L=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;T==="style"?a.d.S(m,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:E,integrity:C,fetchPriority:L}):T==="script"&&a.d.X(m,{crossOrigin:E,integrity:C,fetchPriority:L,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},nr.preinitModule=function(m,b){if(typeof m=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var T=f(b.as,b.crossOrigin);a.d.M(m,{crossOrigin:T,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&a.d.M(m)},nr.preload=function(m,b){if(typeof m=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var T=b.as,E=f(T,b.crossOrigin);a.d.L(m,T,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},nr.preloadModule=function(m,b){if(typeof m=="string")if(b){var T=f(b.as,b.crossOrigin);a.d.m(m,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:T,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else a.d.m(m)},nr.requestFormReset=function(m){a.d.r(m)},nr.unstable_batchedUpdates=function(m,b){return m(b)},nr.useFormState=function(m,b,T){return u.H.useFormState(m,b,T)},nr.useFormStatus=function(){return u.H.useHostTransitionStatus()},nr.version="19.2.4",nr}var nb;function HT(){if(nb)return tg.exports;nb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),tg.exports=qT(),tg.exports}var sb;function $T(){if(sb)return ad;sb=1;var s=FT(),e=iy(),t=HT();function a(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function u(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function f(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(a(188))}function b(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(a(188));return r!==n?null:n}for(var l=n,d=r;;){var v=l.return;if(v===null)break;var w=v.alternate;if(w===null){if(d=v.return,d!==null){l=d;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===l)return m(v),n;if(w===d)return m(v),r;w=w.sibling}throw Error(a(188))}if(l.return!==d.return)l=v,d=w;else{for(var k=!1,U=v.child;U;){if(U===l){k=!0,l=v,d=w;break}if(U===d){k=!0,d=v,l=w;break}U=U.sibling}if(!k){for(U=w.child;U;){if(U===l){k=!0,l=w,d=v;break}if(U===d){k=!0,d=w,l=v;break}U=U.sibling}if(!k)throw Error(a(189))}}if(l.alternate!==d)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:r}function T(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=T(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,C=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),se=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function ee(n){return n===null||typeof n!="object"?null:(n=$&&n[$]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function ke(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case K:return"Profiler";case F:return"StrictMode";case fe:return"Suspense";case je:return"SuspenseList";case H:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case P:return"Portal";case se:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case Y:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case q:return r=n.displayName||null,r!==null?r:ke(n.type)||"Memo";case B:r=n._payload,n=n._init;try{return ke(n(r))}catch{}}return null}var Ie=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le={pending:!1,data:null,method:null,action:null},De=[],Je=-1;function Q(n){return{current:n}}function ue(n){0>Je||(n.current=De[Je],De[Je]=null,Je--)}function ze(n,r){Je++,De[Je]=n.current,n.current=r}var Oe=Q(null),de=Q(null),Be=Q(null),le=Q(null);function ge(n,r){switch(ze(Be,r),ze(de,n),ze(Oe,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?v1(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=v1(r),n=b1(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ue(Oe),ze(Oe,n)}function be(){ue(Oe),ue(de),ue(Be)}function st(n){n.memoizedState!==null&&ze(le,n);var r=Oe.current,l=b1(r,n.type);r!==l&&(ze(de,n),ze(Oe,l))}function Te(n){de.current===n&&(ue(Oe),ue(de)),le.current===n&&(ue(le),ed._currentValue=Le)}var dt,Tt;function Nt(n){if(dt===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);dt=r&&r[1]||"",Tt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dt+n+Tt}var Ee=!1;function Ue(n,r){if(!n||Ee)return"";Ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Me){var Ne=Me}Reflect.construct(n,[],Qe)}else{try{Qe.call()}catch(Me){Ne=Me}n.call(Qe.prototype)}}else{try{throw Error()}catch(Me){Ne=Me}(Qe=n())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Me){if(Me&&Ne&&typeof Me.stack=="string")return[Me.stack,Ne.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),k=w[0],U=w[1];if(k&&U){var ne=k.split(`
`),we=U.split(`
`);for(v=d=0;d<ne.length&&!ne[d].includes("DetermineComponentFrameRoot");)d++;for(;v<we.length&&!we[v].includes("DetermineComponentFrameRoot");)v++;if(d===ne.length||v===we.length)for(d=ne.length-1,v=we.length-1;1<=d&&0<=v&&ne[d]!==we[v];)v--;for(;1<=d&&0<=v;d--,v--)if(ne[d]!==we[v]){if(d!==1||v!==1)do if(d--,v--,0>v||ne[d]!==we[v]){var qe=`
`+ne[d].replace(" at new "," at ");return n.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",n.displayName)),qe}while(1<=d&&0<=v);break}}}finally{Ee=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Nt(l):""}function X(n,r){switch(n.tag){case 26:case 27:case 5:return Nt(n.type);case 16:return Nt("Lazy");case 13:return n.child!==r&&r!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return Ue(n.type,!1);case 11:return Ue(n.type.render,!1);case 1:return Ue(n.type,!0);case 31:return Nt("Activity");default:return""}}function Ce(n){try{var r="",l=null;do r+=X(n,l),l=n,n=n.return;while(n);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ke=Object.prototype.hasOwnProperty,$e=s.unstable_scheduleCallback,Ve=s.unstable_cancelCallback,it=s.unstable_shouldYield,xt=s.unstable_requestPaint,rt=s.unstable_now,tn=s.unstable_getCurrentPriorityLevel,vn=s.unstable_ImmediatePriority,Fn=s.unstable_UserBlockingPriority,Jn=s.unstable_NormalPriority,qn=s.unstable_LowPriority,ks=s.unstable_IdlePriority,hn=s.log,We=s.unstable_setDisableYieldValue,et=null,at=null;function jt(n){if(typeof hn=="function"&&We(n),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(et,n)}catch{}}var _t=Math.clz32?Math.clz32:ae,At=Math.log,yt=Math.LN2;function ae(n){return n>>>=0,n===0?32:31-(At(n)/yt|0)|0}var xe=256,lt=262144,ht=4194304;function Pt(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _n(n,r,l){var d=n.pendingLanes;if(d===0)return 0;var v=0,w=n.suspendedLanes,k=n.pingedLanes;n=n.warmLanes;var U=d&134217727;return U!==0?(d=U&~w,d!==0?v=Pt(d):(k&=U,k!==0?v=Pt(k):l||(l=U&~n,l!==0&&(v=Pt(l))))):(U=d&~w,U!==0?v=Pt(U):k!==0?v=Pt(k):l||(l=d&~n,l!==0&&(v=Pt(l)))),v===0?0:r!==0&&r!==v&&(r&w)===0&&(w=v&-v,l=r&-r,w>=l||w===32&&(l&4194048)!==0)?r:v}function nn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function en(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pn(){var n=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),n}function wn(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function Gn(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ls(n,r,l,d,v,w){var k=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var U=n.entanglements,ne=n.expirationTimes,we=n.hiddenUpdates;for(l=k&~l;0<l;){var qe=31-_t(l),Qe=1<<qe;U[qe]=0,ne[qe]=-1;var Ne=we[qe];if(Ne!==null)for(we[qe]=null,qe=0;qe<Ne.length;qe++){var Me=Ne[qe];Me!==null&&(Me.lane&=-536870913)}l&=~Qe}d!==0&&me(n,d,0),w!==0&&v===0&&n.tag!==0&&(n.suspendedLanes|=w&~(k&~r))}function me(n,r,l){n.pendingLanes|=r,n.suspendedLanes&=~r;var d=31-_t(r);n.entangledLanes|=r,n.entanglements[d]=n.entanglements[d]|1073741824|l&261930}function He(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var d=31-_t(l),v=1<<d;v&r|n[d]&r&&(n[d]|=r),l&=~v}}function tt(n,r){var l=r&-r;return l=(l&42)!==0?1:Ze(l),(l&(n.suspendedLanes|r))!==0?0:l}function Ze(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function pt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function wt(){var n=ve.p;return n!==0?n:(n=window.event,n===void 0?32:F1(n.type))}function Ut(n,r){var l=ve.p;try{return ve.p=n,r()}finally{ve.p=l}}var Xt=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Xt,kn="__reactProps$"+Xt,he="__reactContainer$"+Xt,ct="__reactEvents$"+Xt,Ot="__reactListeners$"+Xt,Bt="__reactHandles$"+Xt,Un="__reactResources$"+Xt,Cn="__reactMarker$"+Xt;function Bn(n){delete n[Wt],delete n[kn],delete n[ct],delete n[Ot],delete n[Bt]}function cs(n){var r=n[Wt];if(r)return r;for(var l=n.parentNode;l;){if(r=l[he]||l[Wt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=N1(n);n!==null;){if(l=n[Wt])return l;n=N1(n)}return r}n=l,l=n.parentNode}return null}function ys(n){if(n=n[Wt]||n[he]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function ns(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(a(33))}function Ps(n){var r=n[Un];return r||(r=n[Un]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Hn(n){n[Cn]=!0}var qa=new Set,Ti={};function cr(n,r){Rt(n,r),Rt(n+"Capture",r)}function Rt(n,r){for(Ti[n]=r,n=0;n<r.length;n++)qa.add(r[n])}var Sr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ur={},Br={};function Ei(n){return Ke.call(Br,n)?!0:Ke.call(ur,n)?!1:Sr.test(n)?Br[n]=!0:(ur[n]=!0,!1)}function Ha(n,r,l){if(Ei(r))if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+l)}}function Qs(n,r,l){if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+l)}}function ss(n,r,l,d){if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(r,l,""+d)}}function rs(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $a(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function bl(n,r,l){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,w=d.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return v.call(this)},set:function(k){l=""+k,w.call(this,k)}}),Object.defineProperty(n,r,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(k){l=""+k},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Sn(n){if(!n._valueTracker){var r=$a(n)?"checked":"value";n._valueTracker=bl(n,r,""+n[r])}}function Ni(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return n&&(d=$a(n)?n.checked?"true":"false":n.value),n=d,n!==l?(r.setValue(n),!0):!1}function sa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ji=/[\n"\\]/g;function Xs(n){return n.replace(ji,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function yo(n,r,l,d,v,w,k,U){n.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.type=k:n.removeAttribute("type"),r!=null?k==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+rs(r)):n.value!==""+rs(r)&&(n.value=""+rs(r)):k!=="submit"&&k!=="reset"||n.removeAttribute("value"),r!=null?xl(n,k,rs(r)):l!=null?xl(n,k,rs(l)):d!=null&&n.removeAttribute("value"),v==null&&w!=null&&(n.defaultChecked=!!w),v!=null&&(n.checked=v&&typeof v!="function"&&typeof v!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?n.name=""+rs(U):n.removeAttribute("name")}function lc(n,r,l,d,v,w,k,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),r!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||r!=null)){Sn(n);return}l=l!=null?""+rs(l):"",r=r!=null?""+rs(r):l,U||r===n.value||(n.value=r),n.defaultValue=r}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=U?n.checked:!!d,n.defaultChecked=!!d,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(n.name=k),Sn(n)}function xl(n,r,l){r==="number"&&sa(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Wa(n,r,l,d){if(n=n.options,r){r={};for(var v=0;v<l.length;v++)r["$"+l[v]]=!0;for(l=0;l<n.length;l++)v=r.hasOwnProperty("$"+n[l].value),n[l].selected!==v&&(n[l].selected=v),v&&d&&(n[l].defaultSelected=!0)}else{for(l=""+rs(l),r=null,v=0;v<n.length;v++){if(n[v].value===l){n[v].selected=!0,d&&(n[v].defaultSelected=!0);return}r!==null||n[v].disabled||(r=n[v])}r!==null&&(r.selected=!0)}}function cc(n,r,l){if(r!=null&&(r=""+rs(r),r!==n.value&&(n.value=r),l==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=l!=null?""+rs(l):""}function Ga(n,r,l,d){if(r==null){if(d!=null){if(l!=null)throw Error(a(92));if(Ie(d)){if(1<d.length)throw Error(a(93));d=d[0]}l=d}l==null&&(l=""),r=l}l=rs(r),n.defaultValue=l,d=n.textContent,d===l&&d!==""&&d!==null&&(n.value=d),Sn(n)}function Js(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _l(n,r,l){var d=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":d?n.setProperty(r,l):typeof l!="number"||l===0||uc.has(r)?r==="float"?n.cssFloat=l:n[r]=(""+l).trim():n[r]=l+"px"}function wl(n,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(n=n.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var v in r)d=r[v],r.hasOwnProperty(v)&&l[v]!==d&&_l(n,v,d)}else for(var w in r)r.hasOwnProperty(w)&&_l(n,w,r[w])}function vo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ya=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bo(n){return Ya.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function zr(){}var Sl=null;function Tr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ka=null,qs=null;function ki(n){var r=ys(n);if(r&&(n=r.stateNode)){var l=n[kn]||null;e:switch(n=r.stateNode,r.type){case"input":if(yo(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Xs(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==n&&d.form===n.form){var v=d[kn]||null;if(!v)throw Error(a(90));yo(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<l.length;r++)d=l[r],d.form===n.form&&Ni(d)}break e;case"textarea":cc(n,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Wa(n,!!l.multiple,r,!1)}}}var Qa=!1;function Xa(n,r,l){if(Qa)return n(r,l);Qa=!0;try{var d=n(r);return d}finally{if(Qa=!1,(Ka!==null||qs!==null)&&(Vh(),Ka&&(r=Ka,n=qs,qs=Ka=null,ki(r),n)))for(r=0;r<n.length;r++)ki(n[r])}}function Fr(n,r){var l=n.stateNode;if(l===null)return null;var d=l[kn]||null;if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ci=!1;if(Zs)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){Ci=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{Ci=!1}var ra=null,Tl=null,aa=null;function xo(){if(aa)return aa;var n,r=Tl,l=r.length,d,v="value"in ra?ra.value:ra.textContent,w=v.length;for(n=0;n<l&&r[n]===v[n];n++);var k=l-n;for(d=1;d<=k&&r[l-d]===v[w-d];d++);return aa=v.slice(n,1<d?1-d:void 0)}function Ja(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function wa(){return!0}function dr(){return!1}function An(n){function r(l,d,v,w,k){this._reactName=l,this._targetInst=v,this.type=d,this.nativeEvent=w,this.target=k,this.currentTarget=null;for(var U in n)n.hasOwnProperty(U)&&(l=n[U],this[U]=l?l(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?wa:dr,this.isPropagationStopped=dr,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),r}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vs=An(Sa),Za=E({},Sa,{view:0,detail:0}),Kn=An(Za),ia,_o,In,wo=E({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==In&&(In&&n.type==="mousemove"?(ia=n.screenX-In.screenX,_o=n.screenY-In.screenY):_o=ia=0,In=n),ia)},movementY:function(n){return"movementY"in n?n.movementY:_o}}),Gt=An(wo),Ai=E({},wo,{dataTransfer:0}),us=An(Ai),El=E({},Za,{relatedTarget:0}),ei=An(El),hr=E({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),hc=An(hr),Ri=E({},Sa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),fc=An(Ri),Nl=E({},Sa,{data:0}),oa=An(Nl),jl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},So={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function To(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=So[n])?!!r[n]:!1}function Ta(){return To}var Ls=E({},Za,{key:function(n){if(n.key){var r=jl[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ja(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?mc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(n){return n.type==="keypress"?Ja(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ja(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),pc=An(Ls),kl=E({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ea=An(kl),p=E({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),j=An(p),R=E({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),W=An(R),ye=E({},wo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ae=An(ye),ot=E({},Sa,{newState:0,oldState:0}),qt=An(ot),Zn=[9,13,27,32],gn=Zs&&"CompositionEvent"in window,$n=null;Zs&&"documentMode"in document&&($n=document.documentMode);var Er=Zs&&"TextEvent"in window&&!$n,la=Zs&&(!gn||$n&&8<$n&&11>=$n),Nr=" ",qr=!1;function Na(n,r){switch(n){case"keyup":return Zn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Di(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Mi=!1;function eh(n,r){switch(n){case"compositionend":return Di(r);case"keypress":return r.which!==32?null:(qr=!0,Nr);case"textInput":return n=r.data,n===Nr&&qr?null:n;default:return null}}function pu(n,r){if(Mi)return n==="compositionend"||!gn&&Na(n,r)?(n=xo(),aa=Tl=ra=null,Mi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return la&&r.locale!=="ko"?null:r.data;default:return null}}var Nm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function th(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Nm[n.type]:r==="textarea"}function gu(n,r,l,d){Ka?qs?qs.push(d):qs=[d]:Ka=d,r=$h(r,"onChange"),0<r.length&&(l=new vs("onChange","change",null,l,d),n.push({event:l,listeners:r}))}var Cl=null,Eo=null;function nh(n){h1(n,0)}function Hr(n){var r=ns(n);if(Ni(r))return n}function sh(n,r){if(n==="change")return r}var yu=!1;if(Zs){var vu;if(Zs){var bu="oninput"in document;if(!bu){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),bu=typeof xu.oninput=="function"}vu=bu}else vu=!1;yu=vu&&(!document.documentMode||9<document.documentMode)}function rh(){Cl&&(Cl.detachEvent("onpropertychange",_u),Eo=Cl=null)}function _u(n){if(n.propertyName==="value"&&Hr(Eo)){var r=[];gu(r,Eo,n,Tr(n)),Xa(nh,r)}}function jm(n,r,l){n==="focusin"?(rh(),Cl=r,Eo=l,Cl.attachEvent("onpropertychange",_u)):n==="focusout"&&rh()}function ah(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hr(Eo)}function Al(n,r){if(n==="click")return Hr(r)}function ih(n,r){if(n==="input"||n==="change")return Hr(r)}function km(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var er=typeof Object.is=="function"?Object.is:km;function No(n,r){if(er(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var v=l[d];if(!Ke.call(r,v)||!er(n[v],r[v]))return!1}return!0}function gc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function wu(n,r){var l=gc(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=r&&d>=r)return{node:l,offset:r-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=gc(l)}}function oh(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?oh(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Su(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=sa(n.document);r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=sa(n.document)}return r}function yc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Cm=Zs&&"documentMode"in document&&11>=document.documentMode,Ii=null,jo=null,ti=null,ko=!1;function lh(n,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ko||Ii==null||Ii!==sa(d)||(d=Ii,"selectionStart"in d&&yc(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ti&&No(ti,d)||(ti=d,d=$h(jo,"onSelect"),0<d.length&&(r=new vs("onSelect","select",null,r,l),n.push({event:r,listeners:d}),r.target=Ii)))}function ni(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var ca={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionrun:ni("Transition","TransitionRun"),transitionstart:ni("Transition","TransitionStart"),transitioncancel:ni("Transition","TransitionCancel"),transitionend:ni("Transition","TransitionEnd")},Rl={},si={};Zs&&(si=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function Oi(n){if(Rl[n])return Rl[n];if(!ca[n])return n;var r=ca[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in si)return Rl[n]=r[l];return n}var ch=Oi("animationend"),uh=Oi("animationiteration"),dh=Oi("animationstart"),Am=Oi("transitionrun"),Rm=Oi("transitionstart"),Tu=Oi("transitioncancel"),Eu=Oi("transitionend"),hh=new Map,vc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vc.push("scrollEnd");function Cs(n,r){hh.set(n,r),cr(r,[n])}var bc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},fr=[],Pi=0,Nu=0;function Dl(){for(var n=Pi,r=Nu=Pi=0;r<n;){var l=fr[r];fr[r++]=null;var d=fr[r];fr[r++]=null;var v=fr[r];fr[r++]=null;var w=fr[r];if(fr[r++]=null,d!==null&&v!==null){var k=d.pending;k===null?v.next=v:(v.next=k.next,k.next=v),d.pending=v}w!==0&&ku(l,v,w)}}function xc(n,r,l,d){fr[Pi++]=n,fr[Pi++]=r,fr[Pi++]=l,fr[Pi++]=d,Nu|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function ju(n,r,l,d){return xc(n,r,l,d),_c(n)}function ri(n,r){return xc(n,null,null,r),_c(n)}function ku(n,r,l){n.lanes|=l;var d=n.alternate;d!==null&&(d.lanes|=l);for(var v=!1,w=n.return;w!==null;)w.childLanes|=l,d=w.alternate,d!==null&&(d.childLanes|=l),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(v=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,v&&r!==null&&(v=31-_t(l),n=w.hiddenUpdates,d=n[v],d===null?n[v]=[r]:d.push(r),r.lane=l|536870912),w):null}function _c(n){if(50<Gu)throw Gu=0,xp=null,Error(a(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Li={};function wc(n,r,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(n,r,l,d){return new wc(n,r,l,d)}function Co(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ua(n,r){var l=n.alternate;return l===null?(l=As(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function fh(n,r){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,r=l.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Ml(n,r,l,d,v,w){var k=0;if(d=n,typeof n=="function")Co(n)&&(k=1);else if(typeof n=="string")k=ET(n,l,Oe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case H:return n=As(31,l,r,v),n.elementType=H,n.lanes=w,n;case V:return ai(l.children,v,w,r);case F:k=8,v|=24;break;case K:return n=As(12,l,r,v|2),n.elementType=K,n.lanes=w,n;case fe:return n=As(13,l,r,v),n.elementType=fe,n.lanes=w,n;case je:return n=As(19,l,r,v),n.elementType=je,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case se:k=10;break e;case G:k=9;break e;case Y:k=11;break e;case q:k=14;break e;case B:k=16,d=null;break e}k=29,l=Error(a(130,n===null?"null":typeof n,"")),d=null}return r=As(k,l,r,v),r.elementType=n,r.type=d,r.lanes=w,r}function ai(n,r,l,d){return n=As(7,n,d,r),n.lanes=l,n}function Cu(n,r,l){return n=As(6,n,null,r),n.lanes=l,n}function Il(n){var r=As(18,null,null,0);return r.stateNode=n,r}function Sc(n,r,l){return r=As(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var mh=new WeakMap;function jr(n,r){if(typeof n=="object"&&n!==null){var l=mh.get(n);return l!==void 0?l:(r={value:n,source:r,stack:Ce(r)},mh.set(n,r),r)}return{value:n,source:r,stack:Ce(r)}}var Ao=[],Ro=0,Tc=null,Ol=0,mr=[],kr=0,ii=null,$r=1,da="";function Cr(n,r){Ao[Ro++]=Ol,Ao[Ro++]=Tc,Tc=n,Ol=r}function Hs(n,r,l){mr[kr++]=$r,mr[kr++]=da,mr[kr++]=ii,ii=n;var d=$r;n=da;var v=32-_t(d)-1;d&=~(1<<v),l+=1;var w=32-_t(r)+v;if(30<w){var k=v-v%5;w=(d&(1<<k)-1).toString(32),d>>=k,v-=k,$r=1<<32-_t(r)+v|l<<v|d,da=w+n}else $r=1<<w|l<<v|d,da=n}function Au(n){n.return!==null&&(Cr(n,1),Hs(n,1,0))}function ja(n){for(;n===Tc;)Tc=Ao[--Ro],Ao[Ro]=null,Ol=Ao[--Ro],Ao[Ro]=null;for(;n===ii;)ii=mr[--kr],mr[kr]=null,da=mr[--kr],mr[kr]=null,$r=mr[--kr],mr[kr]=null}function ha(n,r){mr[kr++]=$r,mr[kr++]=da,mr[kr++]=ii,$r=r.id,da=r.overflow,ii=n}var ds=null,an=null,Jt=!1,pr=null,Tn=!1,fa=Error(a(519));function Rs(n){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wr(jr(r,n)),fa}function Ds(n){var r=n.stateNode,l=n.type,d=n.memoizedProps;switch(r[Wt]=n,r[kn]=d,l){case"dialog":rn("cancel",r),rn("close",r);break;case"iframe":case"object":case"embed":rn("load",r);break;case"video":case"audio":for(l=0;l<Ku.length;l++)rn(Ku[l],r);break;case"source":rn("error",r);break;case"img":case"image":case"link":rn("error",r),rn("load",r);break;case"details":rn("toggle",r);break;case"input":rn("invalid",r),lc(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":rn("invalid",r);break;case"textarea":rn("invalid",r),Ga(r,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||d.suppressHydrationWarning===!0||g1(r.textContent,l)?(d.popover!=null&&(rn("beforetoggle",r),rn("toggle",r)),d.onScroll!=null&&rn("scroll",r),d.onScrollEnd!=null&&rn("scrollend",r),d.onClick!=null&&(r.onclick=zr),r=!0):r=!1,r||Rs(n,!0)}function Do(n){for(ds=n.return;ds;)switch(ds.tag){case 5:case 31:case 13:Tn=!1;return;case 27:case 3:Tn=!0;return;default:ds=ds.return}}function Vi(n){if(n!==ds)return!1;if(!Jt)return Do(n),Jt=!0,!1;var r=n.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Op(n.type,n.memoizedProps)),l=!l),l&&an&&Rs(n),Do(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));an=E1(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));an=E1(n)}else r===27?(r=an,$o(n.type)?(n=Bp,Bp=null,an=n):an=r):an=ds?ya(n.stateNode.nextSibling):null;return!0}function Ui(){an=ds=null,Jt=!1}function oi(){var n=pr;return n!==null&&(Or===null?Or=n:Or.push.apply(Or,n),pr=null),n}function Wr(n){pr===null?pr=[n]:pr.push(n)}var Ru=Q(null),Bi=null,ka=null;function li(n,r,l){ze(Ru,r._currentValue),r._currentValue=l}function Ca(n){n._currentValue=Ru.current,ue(Ru)}function Du(n,r,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),n===l)break;n=n.return}}function Mu(n,r,l,d){var v=n.child;for(v!==null&&(v.return=n);v!==null;){var w=v.dependencies;if(w!==null){var k=v.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=v;for(var ne=0;ne<r.length;ne++)if(U.context===r[ne]){w.lanes|=l,U=w.alternate,U!==null&&(U.lanes|=l),Du(w.return,l,n),d||(k=null);break e}w=U.next}}else if(v.tag===18){if(k=v.return,k===null)throw Error(a(341));k.lanes|=l,w=k.alternate,w!==null&&(w.lanes|=l),Du(k,l,n),k=null}else k=v.child;if(k!==null)k.return=v;else for(k=v;k!==null;){if(k===n){k=null;break}if(v=k.sibling,v!==null){v.return=k.return,k=v;break}k=k.return}v=k}}function Mo(n,r,l,d){n=null;for(var v=r,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var k=v.alternate;if(k===null)throw Error(a(387));if(k=k.memoizedProps,k!==null){var U=v.type;er(v.pendingProps.value,k.value)||(n!==null?n.push(U):n=[U])}}else if(v===le.current){if(k=v.alternate,k===null)throw Error(a(387));k.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(n!==null?n.push(ed):n=[ed])}v=v.return}n!==null&&Mu(r,n,l,d),r.flags|=262144}function Pl(n){for(n=n.firstContext;n!==null;){if(!er(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function zi(n){Bi=n,ka=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function bs(n){return ph(Bi,n)}function Ll(n,r){return Bi===null&&zi(n),ph(n,r)}function ph(n,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ka===null){if(n===null)throw Error(a(308));ka=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else ka=ka.next=r;return l}var gh=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(l,d){n.push(d)}};this.abort=function(){r.aborted=!0,n.forEach(function(l){return l()})}},Ec=s.unstable_scheduleCallback,ma=s.unstable_NormalPriority,as={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Iu(){return{controller:new gh,data:new Map,refCount:0}}function Vl(n){n.refCount--,n.refCount===0&&Ec(ma,function(){n.controller.abort()})}var Io=null,Nc=0,Oo=0,Fi=null;function ci(n,r){if(Io===null){var l=Io=[];Nc=0,Oo=Np(),Fi={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Nc++,r.then(Po,Po),r}function Po(){if(--Nc===0&&Io!==null){Fi!==null&&(Fi.status="fulfilled");var n=Io;Io=null,Oo=0,Fi=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function yh(n,r){var l=[],d={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return n.then(function(){d.status="fulfilled",d.value=r;for(var v=0;v<l.length;v++)(0,l[v])(r)},function(v){for(d.status="rejected",d.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),d}var g=te.S;te.S=function(n,r){B0=rt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&ci(n,r),g!==null&&g(n,r)};var x=Q(null);function h(){var n=x.current;return n!==null?n:zn.pooledCache}function y(n,r){r===null?ze(x,x.current):ze(x,r.pool)}function _(){var n=h();return n===null?null:{parent:as._currentValue,pool:n}}var S=Error(a(460)),N=Error(a(474)),A=Error(a(542)),D={then:function(){}};function M(n){return n=n.status,n==="fulfilled"||n==="rejected"}function z(n,r,l){switch(l=n[l],l===void 0?n.push(r):l!==r&&(r.then(zr,zr),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Re(n),n;default:if(typeof r.status=="string")r.then(zr,zr);else{if(n=zn,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=r,n.status="pending",n.then(function(d){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=d}},function(d){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Re(n),n}throw re=r,S}}function J(n){try{var r=n._init;return r(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(re=l,S):l}}var re=null;function ce(){if(re===null)throw Error(a(459));var n=re;return re=null,n}function Re(n){if(n===S||n===A)throw Error(a(483))}var ie=null,Se=0;function Pe(n){var r=Se;return Se+=1,ie===null&&(ie=[]),z(ie,n,r)}function Fe(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function mt(n,r){throw r.$$typeof===C?Error(a(525)):(n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function ut(n){function r(pe,oe){if(n){var _e=pe.deletions;_e===null?(pe.deletions=[oe],pe.flags|=16):_e.push(oe)}}function l(pe,oe){if(!n)return null;for(;oe!==null;)r(pe,oe),oe=oe.sibling;return null}function d(pe){for(var oe=new Map;pe!==null;)pe.key!==null?oe.set(pe.key,pe):oe.set(pe.index,pe),pe=pe.sibling;return oe}function v(pe,oe){return pe=ua(pe,oe),pe.index=0,pe.sibling=null,pe}function w(pe,oe,_e){return pe.index=_e,n?(_e=pe.alternate,_e!==null?(_e=_e.index,_e<oe?(pe.flags|=67108866,oe):_e):(pe.flags|=67108866,oe)):(pe.flags|=1048576,oe)}function k(pe){return n&&pe.alternate===null&&(pe.flags|=67108866),pe}function U(pe,oe,_e,Ge){return oe===null||oe.tag!==6?(oe=Cu(_e,pe.mode,Ge),oe.return=pe,oe):(oe=v(oe,_e),oe.return=pe,oe)}function ne(pe,oe,_e,Ge){var kt=_e.type;return kt===V?qe(pe,oe,_e.props.children,Ge,_e.key):oe!==null&&(oe.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===B&&J(kt)===oe.type)?(oe=v(oe,_e.props),Fe(oe,_e),oe.return=pe,oe):(oe=Ml(_e.type,_e.key,_e.props,null,pe.mode,Ge),Fe(oe,_e),oe.return=pe,oe)}function we(pe,oe,_e,Ge){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==_e.containerInfo||oe.stateNode.implementation!==_e.implementation?(oe=Sc(_e,pe.mode,Ge),oe.return=pe,oe):(oe=v(oe,_e.children||[]),oe.return=pe,oe)}function qe(pe,oe,_e,Ge,kt){return oe===null||oe.tag!==7?(oe=ai(_e,pe.mode,Ge,kt),oe.return=pe,oe):(oe=v(oe,_e),oe.return=pe,oe)}function Qe(pe,oe,_e){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=Cu(""+oe,pe.mode,_e),oe.return=pe,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case L:return _e=Ml(oe.type,oe.key,oe.props,null,pe.mode,_e),Fe(_e,oe),_e.return=pe,_e;case P:return oe=Sc(oe,pe.mode,_e),oe.return=pe,oe;case B:return oe=J(oe),Qe(pe,oe,_e)}if(Ie(oe)||ee(oe))return oe=ai(oe,pe.mode,_e,null),oe.return=pe,oe;if(typeof oe.then=="function")return Qe(pe,Pe(oe),_e);if(oe.$$typeof===se)return Qe(pe,Ll(pe,oe),_e);mt(pe,oe)}return null}function Ne(pe,oe,_e,Ge){var kt=oe!==null?oe.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return kt!==null?null:U(pe,oe,""+_e,Ge);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case L:return _e.key===kt?ne(pe,oe,_e,Ge):null;case P:return _e.key===kt?we(pe,oe,_e,Ge):null;case B:return _e=J(_e),Ne(pe,oe,_e,Ge)}if(Ie(_e)||ee(_e))return kt!==null?null:qe(pe,oe,_e,Ge,null);if(typeof _e.then=="function")return Ne(pe,oe,Pe(_e),Ge);if(_e.$$typeof===se)return Ne(pe,oe,Ll(pe,_e),Ge);mt(pe,_e)}return null}function Me(pe,oe,_e,Ge,kt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return pe=pe.get(_e)||null,U(oe,pe,""+Ge,kt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case L:return pe=pe.get(Ge.key===null?_e:Ge.key)||null,ne(oe,pe,Ge,kt);case P:return pe=pe.get(Ge.key===null?_e:Ge.key)||null,we(oe,pe,Ge,kt);case B:return Ge=J(Ge),Me(pe,oe,_e,Ge,kt)}if(Ie(Ge)||ee(Ge))return pe=pe.get(_e)||null,qe(oe,pe,Ge,kt,null);if(typeof Ge.then=="function")return Me(pe,oe,_e,Pe(Ge),kt);if(Ge.$$typeof===se)return Me(pe,oe,_e,Ll(oe,Ge),kt);mt(oe,Ge)}return null}function bt(pe,oe,_e,Ge){for(var kt=null,bn=null,St=oe,Qt=oe=0,ln=null;St!==null&&Qt<_e.length;Qt++){St.index>Qt?(ln=St,St=null):ln=St.sibling;var xn=Ne(pe,St,_e[Qt],Ge);if(xn===null){St===null&&(St=ln);break}n&&St&&xn.alternate===null&&r(pe,St),oe=w(xn,oe,Qt),bn===null?kt=xn:bn.sibling=xn,bn=xn,St=ln}if(Qt===_e.length)return l(pe,St),Jt&&Cr(pe,Qt),kt;if(St===null){for(;Qt<_e.length;Qt++)St=Qe(pe,_e[Qt],Ge),St!==null&&(oe=w(St,oe,Qt),bn===null?kt=St:bn.sibling=St,bn=St);return Jt&&Cr(pe,Qt),kt}for(St=d(St);Qt<_e.length;Qt++)ln=Me(St,pe,Qt,_e[Qt],Ge),ln!==null&&(n&&ln.alternate!==null&&St.delete(ln.key===null?Qt:ln.key),oe=w(ln,oe,Qt),bn===null?kt=ln:bn.sibling=ln,bn=ln);return n&&St.forEach(function(Qo){return r(pe,Qo)}),Jt&&Cr(pe,Qt),kt}function Mt(pe,oe,_e,Ge){if(_e==null)throw Error(a(151));for(var kt=null,bn=null,St=oe,Qt=oe=0,ln=null,xn=_e.next();St!==null&&!xn.done;Qt++,xn=_e.next()){St.index>Qt?(ln=St,St=null):ln=St.sibling;var Qo=Ne(pe,St,xn.value,Ge);if(Qo===null){St===null&&(St=ln);break}n&&St&&Qo.alternate===null&&r(pe,St),oe=w(Qo,oe,Qt),bn===null?kt=Qo:bn.sibling=Qo,bn=Qo,St=ln}if(xn.done)return l(pe,St),Jt&&Cr(pe,Qt),kt;if(St===null){for(;!xn.done;Qt++,xn=_e.next())xn=Qe(pe,xn.value,Ge),xn!==null&&(oe=w(xn,oe,Qt),bn===null?kt=xn:bn.sibling=xn,bn=xn);return Jt&&Cr(pe,Qt),kt}for(St=d(St);!xn.done;Qt++,xn=_e.next())xn=Me(St,pe,Qt,xn.value,Ge),xn!==null&&(n&&xn.alternate!==null&&St.delete(xn.key===null?Qt:xn.key),oe=w(xn,oe,Qt),bn===null?kt=xn:bn.sibling=xn,bn=xn);return n&&St.forEach(function(PT){return r(pe,PT)}),Jt&&Cr(pe,Qt),kt}function Vn(pe,oe,_e,Ge){if(typeof _e=="object"&&_e!==null&&_e.type===V&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case L:e:{for(var kt=_e.key;oe!==null;){if(oe.key===kt){if(kt=_e.type,kt===V){if(oe.tag===7){l(pe,oe.sibling),Ge=v(oe,_e.props.children),Ge.return=pe,pe=Ge;break e}}else if(oe.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===B&&J(kt)===oe.type){l(pe,oe.sibling),Ge=v(oe,_e.props),Fe(Ge,_e),Ge.return=pe,pe=Ge;break e}l(pe,oe);break}else r(pe,oe);oe=oe.sibling}_e.type===V?(Ge=ai(_e.props.children,pe.mode,Ge,_e.key),Ge.return=pe,pe=Ge):(Ge=Ml(_e.type,_e.key,_e.props,null,pe.mode,Ge),Fe(Ge,_e),Ge.return=pe,pe=Ge)}return k(pe);case P:e:{for(kt=_e.key;oe!==null;){if(oe.key===kt)if(oe.tag===4&&oe.stateNode.containerInfo===_e.containerInfo&&oe.stateNode.implementation===_e.implementation){l(pe,oe.sibling),Ge=v(oe,_e.children||[]),Ge.return=pe,pe=Ge;break e}else{l(pe,oe);break}else r(pe,oe);oe=oe.sibling}Ge=Sc(_e,pe.mode,Ge),Ge.return=pe,pe=Ge}return k(pe);case B:return _e=J(_e),Vn(pe,oe,_e,Ge)}if(Ie(_e))return bt(pe,oe,_e,Ge);if(ee(_e)){if(kt=ee(_e),typeof kt!="function")throw Error(a(150));return _e=kt.call(_e),Mt(pe,oe,_e,Ge)}if(typeof _e.then=="function")return Vn(pe,oe,Pe(_e),Ge);if(_e.$$typeof===se)return Vn(pe,oe,Ll(pe,_e),Ge);mt(pe,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint"?(_e=""+_e,oe!==null&&oe.tag===6?(l(pe,oe.sibling),Ge=v(oe,_e),Ge.return=pe,pe=Ge):(l(pe,oe),Ge=Cu(_e,pe.mode,Ge),Ge.return=pe,pe=Ge),k(pe)):l(pe,oe)}return function(pe,oe,_e,Ge){try{Se=0;var kt=Vn(pe,oe,_e,Ge);return ie=null,kt}catch(St){if(St===S||St===A)throw St;var bn=As(29,St,null,pe.mode);return bn.lanes=Ge,bn.return=pe,bn}}}var Et=ut(!0),Yt=ut(!1),Dt=!1;function Zt(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tr(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function xs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function On(n,r,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(En&2)!==0){var v=d.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),d.pending=r,r=_c(n),ku(n,null,l),r}return xc(n,d,r,l),_c(n)}function Aa(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,He(n,l)}}function Gr(n,r){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var v=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var k={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?v=w=k:w=w.next=k,l=l.next}while(l!==null);w===null?v=w=r:w=w.next=r}else v=w=r;l={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}var pa=!1;function Ar(){if(pa){var n=Fi;if(n!==null)throw n}}function gr(n,r,l,d){pa=!1;var v=n.updateQueue;Dt=!1;var w=v.firstBaseUpdate,k=v.lastBaseUpdate,U=v.shared.pending;if(U!==null){v.shared.pending=null;var ne=U,we=ne.next;ne.next=null,k===null?w=we:k.next=we,k=ne;var qe=n.alternate;qe!==null&&(qe=qe.updateQueue,U=qe.lastBaseUpdate,U!==k&&(U===null?qe.firstBaseUpdate=we:U.next=we,qe.lastBaseUpdate=ne))}if(w!==null){var Qe=v.baseState;k=0,qe=we=ne=null,U=w;do{var Ne=U.lane&-536870913,Me=Ne!==U.lane;if(Me?(on&Ne)===Ne:(d&Ne)===Ne){Ne!==0&&Ne===Oo&&(pa=!0),qe!==null&&(qe=qe.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var bt=n,Mt=U;Ne=r;var Vn=l;switch(Mt.tag){case 1:if(bt=Mt.payload,typeof bt=="function"){Qe=bt.call(Vn,Qe,Ne);break e}Qe=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Mt.payload,Ne=typeof bt=="function"?bt.call(Vn,Qe,Ne):bt,Ne==null)break e;Qe=E({},Qe,Ne);break e;case 2:Dt=!0}}Ne=U.callback,Ne!==null&&(n.flags|=64,Me&&(n.flags|=8192),Me=v.callbacks,Me===null?v.callbacks=[Ne]:Me.push(Ne))}else Me={lane:Ne,tag:U.tag,payload:U.payload,callback:U.callback,next:null},qe===null?(we=qe=Me,ne=Qe):qe=qe.next=Me,k|=Ne;if(U=U.next,U===null){if(U=v.shared.pending,U===null)break;Me=U,U=Me.next,Me.next=null,v.lastBaseUpdate=Me,v.shared.pending=null}}while(!0);qe===null&&(ne=Qe),v.baseState=ne,v.firstBaseUpdate=we,v.lastBaseUpdate=qe,w===null&&(v.shared.lanes=0),Bo|=k,n.lanes=k,n.memoizedState=Qe}}function Rn(n,r){if(typeof n!="function")throw Error(a(191,n));n.call(r)}function Rr(n,r){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Rn(l[n],r)}var ga=Q(null),Yr=Q(0);function Kr(n,r){n=Xi,ze(Yr,n),ze(ga,r),Xi=n|r.baseLanes}function fn(){ze(Yr,Xi),ze(ga,ga.current)}function hs(){Xi=Yr.current,ue(ga),ue(Yr)}var yr=Q(null),vr=null;function Ra(n){var r=n.alternate;ze(fs,fs.current&1),ze(yr,n),vr===null&&(r===null||ga.current!==null||r.memoizedState!==null)&&(vr=n)}function Dm(n){ze(fs,fs.current),ze(yr,n),vr===null&&(vr=n)}function mv(n){n.tag===22?(ze(fs,fs.current),ze(yr,n),vr===null&&(vr=n)):Lo()}function Lo(){ze(fs,fs.current),ze(yr,yr.current)}function Qr(n){ue(yr),vr===n&&(vr=null),ue(fs)}var fs=Q(0);function vh(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Vp(l)||Up(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var qi=0,Kt=null,Pn=null,_s=null,bh=!1,jc=!1,Ul=!1,xh=0,Ou=0,kc=null,NS=0;function is(){throw Error(a(321))}function Mm(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!er(n[l],r[l]))return!1;return!0}function Im(n,r,l,d,v,w){return qi=w,Kt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,te.H=n===null||n.memoizedState===null?Xv:Km,Ul=!1,w=l(d,v),Ul=!1,jc&&(w=gv(r,l,d,v)),pv(n),w}function pv(n){te.H=Vu;var r=Pn!==null&&Pn.next!==null;if(qi=0,_s=Pn=Kt=null,bh=!1,Ou=0,kc=null,r)throw Error(a(300));n===null||ws||(n=n.dependencies,n!==null&&Pl(n)&&(ws=!0))}function gv(n,r,l,d){Kt=n;var v=0;do{if(jc&&(kc=null),Ou=0,jc=!1,25<=v)throw Error(a(301));if(v+=1,_s=Pn=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}te.H=Jv,w=r(l,d)}while(jc);return w}function jS(){var n=te.H,r=n.useState()[0];return r=typeof r.then=="function"?Pu(r):r,n=n.useState()[0],(Pn!==null?Pn.memoizedState:null)!==n&&(Kt.flags|=1024),r}function Om(){var n=xh!==0;return xh=0,n}function Pm(n,r,l){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~l}function Lm(n){if(bh){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}bh=!1}qi=0,_s=Pn=Kt=null,jc=!1,Ou=xh=0,kc=null}function br(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _s===null?Kt.memoizedState=_s=n:_s=_s.next=n,_s}function ms(){if(Pn===null){var n=Kt.alternate;n=n!==null?n.memoizedState:null}else n=Pn.next;var r=_s===null?Kt.memoizedState:_s.next;if(r!==null)_s=r,Pn=n;else{if(n===null)throw Kt.alternate===null?Error(a(467)):Error(a(310));Pn=n,n={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},_s===null?Kt.memoizedState=_s=n:_s=_s.next=n}return _s}function _h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pu(n){var r=Ou;return Ou+=1,kc===null&&(kc=[]),n=z(kc,n,r),r=Kt,(_s===null?r.memoizedState:_s.next)===null&&(r=r.alternate,te.H=r===null||r.memoizedState===null?Xv:Km),n}function wh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Pu(n);if(n.$$typeof===se)return bs(n)}throw Error(a(438,String(n)))}function Vm(n){var r=null,l=Kt.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var d=Kt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=_h(),Kt.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(n),d=0;d<n;d++)l[d]=Z;return r.index++,l}function Hi(n,r){return typeof r=="function"?r(n):r}function Sh(n){var r=ms();return Um(r,Pn,n)}function Um(n,r,l){var d=n.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=l;var v=n.baseQueue,w=d.pending;if(w!==null){if(v!==null){var k=v.next;v.next=w.next,w.next=k}r.baseQueue=v=w,d.pending=null}if(w=n.baseState,v===null)n.memoizedState=w;else{r=v.next;var U=k=null,ne=null,we=r,qe=!1;do{var Qe=we.lane&-536870913;if(Qe!==we.lane?(on&Qe)===Qe:(qi&Qe)===Qe){var Ne=we.revertLane;if(Ne===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),Qe===Oo&&(qe=!0);else if((qi&Ne)===Ne){we=we.next,Ne===Oo&&(qe=!0);continue}else Qe={lane:0,revertLane:we.revertLane,gesture:null,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},ne===null?(U=ne=Qe,k=w):ne=ne.next=Qe,Kt.lanes|=Ne,Bo|=Ne;Qe=we.action,Ul&&l(w,Qe),w=we.hasEagerState?we.eagerState:l(w,Qe)}else Ne={lane:Qe,revertLane:we.revertLane,gesture:we.gesture,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},ne===null?(U=ne=Ne,k=w):ne=ne.next=Ne,Kt.lanes|=Qe,Bo|=Qe;we=we.next}while(we!==null&&we!==r);if(ne===null?k=w:ne.next=U,!er(w,n.memoizedState)&&(ws=!0,qe&&(l=Fi,l!==null)))throw l;n.memoizedState=w,n.baseState=k,n.baseQueue=ne,d.lastRenderedState=w}return v===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function Bm(n){var r=ms(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var d=l.dispatch,v=l.pending,w=r.memoizedState;if(v!==null){l.pending=null;var k=v=v.next;do w=n(w,k.action),k=k.next;while(k!==v);er(w,r.memoizedState)||(ws=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),l.lastRenderedState=w}return[w,d]}function yv(n,r,l){var d=Kt,v=ms(),w=Jt;if(w){if(l===void 0)throw Error(a(407));l=l()}else l=r();var k=!er((Pn||v).memoizedState,l);if(k&&(v.memoizedState=l,ws=!0),v=v.queue,qm(xv.bind(null,d,v,n),[n]),v.getSnapshot!==r||k||_s!==null&&_s.memoizedState.tag&1){if(d.flags|=2048,Cc(9,{destroy:void 0},bv.bind(null,d,v,l,r),null),zn===null)throw Error(a(349));w||(qi&127)!==0||vv(d,r,l)}return l}function vv(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=Kt.updateQueue,r===null?(r=_h(),Kt.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function bv(n,r,l,d){r.value=l,r.getSnapshot=d,_v(r)&&wv(n)}function xv(n,r,l){return l(function(){_v(r)&&wv(n)})}function _v(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!er(n,l)}catch{return!0}}function wv(n){var r=ri(n,2);r!==null&&Pr(r,n,2)}function zm(n){var r=br();if(typeof n=="function"){var l=n;if(n=l(),Ul){jt(!0);try{l()}finally{jt(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:n},r}function Sv(n,r,l,d){return n.baseState=l,Um(n,Pn,typeof d=="function"?d:Hi)}function kS(n,r,l,d,v){if(Nh(n))throw Error(a(485));if(n=r.action,n!==null){var w={payload:v,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){w.listeners.push(k)}};te.T!==null?l(!0):w.isTransition=!1,d(w),l=r.pending,l===null?(w.next=r.pending=w,Tv(r,w)):(w.next=l.next,r.pending=l.next=w)}}function Tv(n,r){var l=r.action,d=r.payload,v=n.state;if(r.isTransition){var w=te.T,k={};te.T=k;try{var U=l(v,d),ne=te.S;ne!==null&&ne(k,U),Ev(n,r,U)}catch(we){Fm(n,r,we)}finally{w!==null&&k.types!==null&&(w.types=k.types),te.T=w}}else try{w=l(v,d),Ev(n,r,w)}catch(we){Fm(n,r,we)}}function Ev(n,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Nv(n,r,d)},function(d){return Fm(n,r,d)}):Nv(n,r,l)}function Nv(n,r,l){r.status="fulfilled",r.value=l,jv(r),n.state=l,r=n.pending,r!==null&&(l=r.next,l===r?n.pending=null:(l=l.next,r.next=l,Tv(n,l)))}function Fm(n,r,l){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=l,jv(r),r=r.next;while(r!==d)}n.action=null}function jv(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function kv(n,r){return r}function Cv(n,r){if(Jt){var l=zn.formState;if(l!==null){e:{var d=Kt;if(Jt){if(an){t:{for(var v=an,w=Tn;v.nodeType!==8;){if(!w){v=null;break t}if(v=ya(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){an=ya(v.nextSibling),d=v.data==="F!";break e}}Rs(d)}d=!1}d&&(r=l[0])}}return l=br(),l.memoizedState=l.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kv,lastRenderedState:r},l.queue=d,l=Yv.bind(null,Kt,d),d.dispatch=l,d=zm(!1),w=Ym.bind(null,Kt,!1,d.queue),d=br(),v={state:r,dispatch:null,action:n,pending:null},d.queue=v,l=kS.bind(null,Kt,v,w,l),v.dispatch=l,d.memoizedState=n,[r,l,!1]}function Av(n){var r=ms();return Rv(r,Pn,n)}function Rv(n,r,l){if(r=Um(n,r,kv)[0],n=Sh(Hi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Pu(r)}catch(k){throw k===S?A:k}else d=r;r=ms();var v=r.queue,w=v.dispatch;return l!==r.memoizedState&&(Kt.flags|=2048,Cc(9,{destroy:void 0},CS.bind(null,v,l),null)),[d,w,n]}function CS(n,r){n.action=r}function Dv(n){var r=ms(),l=Pn;if(l!==null)return Rv(r,l,n);ms(),r=r.memoizedState,l=ms();var d=l.queue.dispatch;return l.memoizedState=n,[r,d,!1]}function Cc(n,r,l,d){return n={tag:n,create:l,deps:d,inst:r,next:null},r=Kt.updateQueue,r===null&&(r=_h(),Kt.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,r.lastEffect=n),n}function Mv(){return ms().memoizedState}function Th(n,r,l,d){var v=br();Kt.flags|=n,v.memoizedState=Cc(1|r,{destroy:void 0},l,d===void 0?null:d)}function Eh(n,r,l,d){var v=ms();d=d===void 0?null:d;var w=v.memoizedState.inst;Pn!==null&&d!==null&&Mm(d,Pn.memoizedState.deps)?v.memoizedState=Cc(r,w,l,d):(Kt.flags|=n,v.memoizedState=Cc(1|r,w,l,d))}function Iv(n,r){Th(8390656,8,n,r)}function qm(n,r){Eh(2048,8,n,r)}function AS(n){Kt.flags|=4;var r=Kt.updateQueue;if(r===null)r=_h(),Kt.updateQueue=r,r.events=[n];else{var l=r.events;l===null?r.events=[n]:l.push(n)}}function Ov(n){var r=ms().memoizedState;return AS({ref:r,nextImpl:n}),function(){if((En&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function Pv(n,r){return Eh(4,2,n,r)}function Lv(n,r){return Eh(4,4,n,r)}function Vv(n,r){if(typeof r=="function"){n=n();var l=r(n);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Uv(n,r,l){l=l!=null?l.concat([n]):null,Eh(4,4,Vv.bind(null,r,n),l)}function Hm(){}function Bv(n,r){var l=ms();r=r===void 0?null:r;var d=l.memoizedState;return r!==null&&Mm(r,d[1])?d[0]:(l.memoizedState=[n,r],n)}function zv(n,r){var l=ms();r=r===void 0?null:r;var d=l.memoizedState;if(r!==null&&Mm(r,d[1]))return d[0];if(d=n(),Ul){jt(!0);try{n()}finally{jt(!1)}}return l.memoizedState=[d,r],d}function $m(n,r,l){return l===void 0||(qi&1073741824)!==0&&(on&261930)===0?n.memoizedState=r:(n.memoizedState=l,n=F0(),Kt.lanes|=n,Bo|=n,l)}function Fv(n,r,l,d){return er(l,r)?l:ga.current!==null?(n=$m(n,l,d),er(n,r)||(ws=!0),n):(qi&42)===0||(qi&1073741824)!==0&&(on&261930)===0?(ws=!0,n.memoizedState=l):(n=F0(),Kt.lanes|=n,Bo|=n,r)}function qv(n,r,l,d,v){var w=ve.p;ve.p=w!==0&&8>w?w:8;var k=te.T,U={};te.T=U,Ym(n,!1,r,l);try{var ne=v(),we=te.S;if(we!==null&&we(U,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var qe=yh(ne,d);Lu(n,r,qe,Zr(n))}else Lu(n,r,d,Zr(n))}catch(Qe){Lu(n,r,{then:function(){},status:"rejected",reason:Qe},Zr())}finally{ve.p=w,k!==null&&U.types!==null&&(k.types=U.types),te.T=k}}function RS(){}function Wm(n,r,l,d){if(n.tag!==5)throw Error(a(476));var v=Hv(n).queue;qv(n,v,r,Le,l===null?RS:function(){return $v(n),l(d)})}function Hv(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Le,baseState:Le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:Le},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:l},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function $v(n){var r=Hv(n);r.next===null&&(r=n.alternate.memoizedState),Lu(n,r.next.queue,{},Zr())}function Gm(){return bs(ed)}function Wv(){return ms().memoizedState}function Gv(){return ms().memoizedState}function DS(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var l=Zr();n=xs(l);var d=On(r,n,l);d!==null&&(Pr(d,r,l),Aa(d,r,l)),r={cache:Iu()},n.payload=r;return}r=r.return}}function MS(n,r,l){var d=Zr();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Nh(n)?Kv(r,l):(l=ju(n,r,l,d),l!==null&&(Pr(l,n,d),Qv(l,r,d)))}function Yv(n,r,l){var d=Zr();Lu(n,r,l,d)}function Lu(n,r,l,d){var v={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Nh(n))Kv(r,v);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var k=r.lastRenderedState,U=w(k,l);if(v.hasEagerState=!0,v.eagerState=U,er(U,k))return xc(n,r,v,0),zn===null&&Dl(),!1}catch{}if(l=ju(n,r,v,d),l!==null)return Pr(l,n,d),Qv(l,r,d),!0}return!1}function Ym(n,r,l,d){if(d={lane:2,revertLane:Np(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Nh(n)){if(r)throw Error(a(479))}else r=ju(n,l,d,2),r!==null&&Pr(r,n,2)}function Nh(n){var r=n.alternate;return n===Kt||r!==null&&r===Kt}function Kv(n,r){jc=bh=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function Qv(n,r,l){if((l&4194048)!==0){var d=r.lanes;d&=n.pendingLanes,l|=d,r.lanes=l,He(n,l)}}var Vu={readContext:bs,use:wh,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useLayoutEffect:is,useInsertionEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useSyncExternalStore:is,useId:is,useHostTransitionStatus:is,useFormState:is,useActionState:is,useOptimistic:is,useMemoCache:is,useCacheRefresh:is};Vu.useEffectEvent=is;var Xv={readContext:bs,use:wh,useCallback:function(n,r){return br().memoizedState=[n,r===void 0?null:r],n},useContext:bs,useEffect:Iv,useImperativeHandle:function(n,r,l){l=l!=null?l.concat([n]):null,Th(4194308,4,Vv.bind(null,r,n),l)},useLayoutEffect:function(n,r){return Th(4194308,4,n,r)},useInsertionEffect:function(n,r){Th(4,2,n,r)},useMemo:function(n,r){var l=br();r=r===void 0?null:r;var d=n();if(Ul){jt(!0);try{n()}finally{jt(!1)}}return l.memoizedState=[d,r],d},useReducer:function(n,r,l){var d=br();if(l!==void 0){var v=l(r);if(Ul){jt(!0);try{l(r)}finally{jt(!1)}}}else v=r;return d.memoizedState=d.baseState=v,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:v},d.queue=n,n=n.dispatch=MS.bind(null,Kt,n),[d.memoizedState,n]},useRef:function(n){var r=br();return n={current:n},r.memoizedState=n},useState:function(n){n=zm(n);var r=n.queue,l=Yv.bind(null,Kt,r);return r.dispatch=l,[n.memoizedState,l]},useDebugValue:Hm,useDeferredValue:function(n,r){var l=br();return $m(l,n,r)},useTransition:function(){var n=zm(!1);return n=qv.bind(null,Kt,n.queue,!0,!1),br().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,l){var d=Kt,v=br();if(Jt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),zn===null)throw Error(a(349));(on&127)!==0||vv(d,r,l)}v.memoizedState=l;var w={value:l,getSnapshot:r};return v.queue=w,Iv(xv.bind(null,d,w,n),[n]),d.flags|=2048,Cc(9,{destroy:void 0},bv.bind(null,d,w,l,r),null),l},useId:function(){var n=br(),r=zn.identifierPrefix;if(Jt){var l=da,d=$r;l=(d&~(1<<32-_t(d)-1)).toString(32)+l,r="_"+r+"R_"+l,l=xh++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=NS++,r="_"+r+"r_"+l.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Gm,useFormState:Cv,useActionState:Cv,useOptimistic:function(n){var r=br();r.memoizedState=r.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Ym.bind(null,Kt,!0,l),l.dispatch=r,[n,r]},useMemoCache:Vm,useCacheRefresh:function(){return br().memoizedState=DS.bind(null,Kt)},useEffectEvent:function(n){var r=br(),l={impl:n};return r.memoizedState=l,function(){if((En&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Km={readContext:bs,use:wh,useCallback:Bv,useContext:bs,useEffect:qm,useImperativeHandle:Uv,useInsertionEffect:Pv,useLayoutEffect:Lv,useMemo:zv,useReducer:Sh,useRef:Mv,useState:function(){return Sh(Hi)},useDebugValue:Hm,useDeferredValue:function(n,r){var l=ms();return Fv(l,Pn.memoizedState,n,r)},useTransition:function(){var n=Sh(Hi)[0],r=ms().memoizedState;return[typeof n=="boolean"?n:Pu(n),r]},useSyncExternalStore:yv,useId:Wv,useHostTransitionStatus:Gm,useFormState:Av,useActionState:Av,useOptimistic:function(n,r){var l=ms();return Sv(l,Pn,n,r)},useMemoCache:Vm,useCacheRefresh:Gv};Km.useEffectEvent=Ov;var Jv={readContext:bs,use:wh,useCallback:Bv,useContext:bs,useEffect:qm,useImperativeHandle:Uv,useInsertionEffect:Pv,useLayoutEffect:Lv,useMemo:zv,useReducer:Bm,useRef:Mv,useState:function(){return Bm(Hi)},useDebugValue:Hm,useDeferredValue:function(n,r){var l=ms();return Pn===null?$m(l,n,r):Fv(l,Pn.memoizedState,n,r)},useTransition:function(){var n=Bm(Hi)[0],r=ms().memoizedState;return[typeof n=="boolean"?n:Pu(n),r]},useSyncExternalStore:yv,useId:Wv,useHostTransitionStatus:Gm,useFormState:Dv,useActionState:Dv,useOptimistic:function(n,r){var l=ms();return Pn!==null?Sv(l,Pn,n,r):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:Vm,useCacheRefresh:Gv};Jv.useEffectEvent=Ov;function Qm(n,r,l,d){r=n.memoizedState,l=l(d,r),l=l==null?r:E({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Xm={enqueueSetState:function(n,r,l){n=n._reactInternals;var d=Zr(),v=xs(d);v.payload=r,l!=null&&(v.callback=l),r=On(n,v,d),r!==null&&(Pr(r,n,d),Aa(r,n,d))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var d=Zr(),v=xs(d);v.tag=1,v.payload=r,l!=null&&(v.callback=l),r=On(n,v,d),r!==null&&(Pr(r,n,d),Aa(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=Zr(),d=xs(l);d.tag=2,r!=null&&(d.callback=r),r=On(n,d,l),r!==null&&(Pr(r,n,l),Aa(r,n,l))}};function Zv(n,r,l,d,v,w,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,w,k):r.prototype&&r.prototype.isPureReactComponent?!No(l,d)||!No(v,w):!0}function e0(n,r,l,d){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==n&&Xm.enqueueReplaceState(r,r.state,null)}function Bl(n,r){var l=r;if("ref"in r){l={};for(var d in r)d!=="ref"&&(l[d]=r[d])}if(n=n.defaultProps){l===r&&(l=E({},l));for(var v in n)l[v]===void 0&&(l[v]=n[v])}return l}function t0(n){bc(n)}function n0(n){console.error(n)}function s0(n){bc(n)}function jh(n,r){try{var l=n.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function r0(n,r,l){try{var d=n.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Jm(n,r,l){return l=xs(l),l.tag=3,l.payload={element:null},l.callback=function(){jh(n,r)},l}function a0(n){return n=xs(n),n.tag=3,n}function i0(n,r,l,d){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var w=d.value;n.payload=function(){return v(w)},n.callback=function(){r0(r,l,d)}}var k=l.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(n.callback=function(){r0(r,l,d),typeof v!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var U=d.stack;this.componentDidCatch(d.value,{componentStack:U!==null?U:""})})}function IS(n,r,l,d,v){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=l.alternate,r!==null&&Mo(r,l,v,!0),l=yr.current,l!==null){switch(l.tag){case 31:case 13:return vr===null?Uh():l.alternate===null&&os===0&&(os=3),l.flags&=-257,l.flags|=65536,l.lanes=v,d===D?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([d]):r.add(d),Sp(n,d,v)),!1;case 22:return l.flags|=65536,d===D?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([d]):l.add(d)),Sp(n,d,v)),!1}throw Error(a(435,l.tag))}return Sp(n,d,v),Uh(),!1}if(Jt)return r=yr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,d!==fa&&(n=Error(a(422),{cause:d}),Wr(jr(n,l)))):(d!==fa&&(r=Error(a(423),{cause:d}),Wr(jr(r,l))),n=n.current.alternate,n.flags|=65536,v&=-v,n.lanes|=v,d=jr(d,l),v=Jm(n.stateNode,d,v),Gr(n,v),os!==4&&(os=2)),!1;var w=Error(a(520),{cause:d});if(w=jr(w,l),Wu===null?Wu=[w]:Wu.push(w),os!==4&&(os=2),r===null)return!0;d=jr(d,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,n=v&-v,l.lanes|=n,n=Jm(l.stateNode,d,n),Gr(l,n),!1;case 1:if(r=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(zo===null||!zo.has(w))))return l.flags|=65536,v&=-v,l.lanes|=v,v=a0(v),i0(v,n,l,d),Gr(l,v),!1}l=l.return}while(l!==null);return!1}var Zm=Error(a(461)),ws=!1;function $s(n,r,l,d){r.child=n===null?Yt(r,null,l,d):Et(r,n.child,l,d)}function o0(n,r,l,d,v){l=l.render;var w=r.ref;if("ref"in d){var k={};for(var U in d)U!=="ref"&&(k[U]=d[U])}else k=d;return zi(r),d=Im(n,r,l,k,w,v),U=Om(),n!==null&&!ws?(Pm(n,r,v),$i(n,r,v)):(Jt&&U&&Au(r),r.flags|=1,$s(n,r,d,v),r.child)}function l0(n,r,l,d,v){if(n===null){var w=l.type;return typeof w=="function"&&!Co(w)&&w.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=w,c0(n,r,w,d,v)):(n=Ml(l.type,null,d,r,r.mode,v),n.ref=r.ref,n.return=r,r.child=n)}if(w=n.child,!op(n,v)){var k=w.memoizedProps;if(l=l.compare,l=l!==null?l:No,l(k,d)&&n.ref===r.ref)return $i(n,r,v)}return r.flags|=1,n=ua(w,d),n.ref=r.ref,n.return=r,r.child=n}function c0(n,r,l,d,v){if(n!==null){var w=n.memoizedProps;if(No(w,d)&&n.ref===r.ref)if(ws=!1,r.pendingProps=d=w,op(n,v))(n.flags&131072)!==0&&(ws=!0);else return r.lanes=n.lanes,$i(n,r,v)}return ep(n,r,l,d,v)}function u0(n,r,l,d){var v=d.children,w=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(w=w!==null?w.baseLanes|l:l,n!==null){for(d=r.child=n.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~w}else d=0,r.child=null;return d0(n,r,w,l,d)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&y(r,w!==null?w.cachePool:null),w!==null?Kr(r,w):fn(),mv(r);else return d=r.lanes=536870912,d0(n,r,w!==null?w.baseLanes|l:l,l,d)}else w!==null?(y(r,w.cachePool),Kr(r,w),Lo(),r.memoizedState=null):(n!==null&&y(r,null),fn(),Lo());return $s(n,r,v,l),r.child}function Uu(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function d0(n,r,l,d,v){var w=h();return w=w===null?null:{parent:as._currentValue,pool:w},r.memoizedState={baseLanes:l,cachePool:w},n!==null&&y(r,null),fn(),mv(r),n!==null&&Mo(n,r,d,!0),r.childLanes=v,null}function kh(n,r){return r=Ah({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function h0(n,r,l){return Et(r,n.child,null,l),n=kh(r,r.pendingProps),n.flags|=2,Qr(r),r.memoizedState=null,n}function OS(n,r,l){var d=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Jt){if(d.mode==="hidden")return n=kh(r,d),r.lanes=536870912,Uu(null,n);if(Dm(r),(n=an)?(n=T1(n,Tn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ii!==null?{id:$r,overflow:da}:null,retryLane:536870912,hydrationErrors:null},l=Il(n),l.return=r,r.child=l,ds=r,an=null)):n=null,n===null)throw Rs(r);return r.lanes=536870912,null}return kh(r,d)}var w=n.memoizedState;if(w!==null){var k=w.dehydrated;if(Dm(r),v)if(r.flags&256)r.flags&=-257,r=h0(n,r,l);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(a(558));else if(ws||Mo(n,r,l,!1),v=(l&n.childLanes)!==0,ws||v){if(d=zn,d!==null&&(k=tt(d,l),k!==0&&k!==w.retryLane))throw w.retryLane=k,ri(n,k),Pr(d,n,k),Zm;Uh(),r=h0(n,r,l)}else n=w.treeContext,an=ya(k.nextSibling),ds=r,Jt=!0,pr=null,Tn=!1,n!==null&&ha(r,n),r=kh(r,d),r.flags|=4096;return r}return n=ua(n.child,{mode:d.mode,children:d.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Ch(n,r){var l=r.ref;if(l===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(r.flags|=4194816)}}function ep(n,r,l,d,v){return zi(r),l=Im(n,r,l,d,void 0,v),d=Om(),n!==null&&!ws?(Pm(n,r,v),$i(n,r,v)):(Jt&&d&&Au(r),r.flags|=1,$s(n,r,l,v),r.child)}function f0(n,r,l,d,v,w){return zi(r),r.updateQueue=null,l=gv(r,d,l,v),pv(n),d=Om(),n!==null&&!ws?(Pm(n,r,w),$i(n,r,w)):(Jt&&d&&Au(r),r.flags|=1,$s(n,r,l,w),r.child)}function m0(n,r,l,d,v){if(zi(r),r.stateNode===null){var w=Li,k=l.contextType;typeof k=="object"&&k!==null&&(w=bs(k)),w=new l(d,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Xm,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=d,w.state=r.memoizedState,w.refs={},Zt(r),k=l.contextType,w.context=typeof k=="object"&&k!==null?bs(k):Li,w.state=r.memoizedState,k=l.getDerivedStateFromProps,typeof k=="function"&&(Qm(r,l,k,d),w.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(k=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),k!==w.state&&Xm.enqueueReplaceState(w,w.state,null),gr(r,d,w,v),Ar(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(n===null){w=r.stateNode;var U=r.memoizedProps,ne=Bl(l,U);w.props=ne;var we=w.context,qe=l.contextType;k=Li,typeof qe=="object"&&qe!==null&&(k=bs(qe));var Qe=l.getDerivedStateFromProps;qe=typeof Qe=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=r.pendingProps!==U,qe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||we!==k)&&e0(r,w,d,k),Dt=!1;var Ne=r.memoizedState;w.state=Ne,gr(r,d,w,v),Ar(),we=r.memoizedState,U||Ne!==we||Dt?(typeof Qe=="function"&&(Qm(r,l,Qe,d),we=r.memoizedState),(ne=Dt||Zv(r,l,ne,d,Ne,we,k))?(qe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=we),w.props=d,w.state=we,w.context=k,d=ne):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{w=r.stateNode,tr(n,r),k=r.memoizedProps,qe=Bl(l,k),w.props=qe,Qe=r.pendingProps,Ne=w.context,we=l.contextType,ne=Li,typeof we=="object"&&we!==null&&(ne=bs(we)),U=l.getDerivedStateFromProps,(we=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==Qe||Ne!==ne)&&e0(r,w,d,ne),Dt=!1,Ne=r.memoizedState,w.state=Ne,gr(r,d,w,v),Ar();var Me=r.memoizedState;k!==Qe||Ne!==Me||Dt||n!==null&&n.dependencies!==null&&Pl(n.dependencies)?(typeof U=="function"&&(Qm(r,l,U,d),Me=r.memoizedState),(qe=Dt||Zv(r,l,qe,d,Ne,Me,ne)||n!==null&&n.dependencies!==null&&Pl(n.dependencies))?(we||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Me,ne),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Me,ne)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===n.memoizedProps&&Ne===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&Ne===n.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=Me),w.props=d,w.state=Me,w.context=ne,d=qe):(typeof w.componentDidUpdate!="function"||k===n.memoizedProps&&Ne===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&Ne===n.memoizedState||(r.flags|=1024),d=!1)}return w=d,Ch(n,r),d=(r.flags&128)!==0,w||d?(w=r.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,n!==null&&d?(r.child=Et(r,n.child,null,v),r.child=Et(r,null,l,v)):$s(n,r,l,v),r.memoizedState=w.state,n=r.child):n=$i(n,r,v),n}function p0(n,r,l,d){return Ui(),r.flags|=256,$s(n,r,l,d),r.child}var tp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function np(n){return{baseLanes:n,cachePool:_()}}function sp(n,r,l){return n=n!==null?n.childLanes&~l:0,r&&(n|=Jr),n}function g0(n,r,l){var d=r.pendingProps,v=!1,w=(r.flags&128)!==0,k;if((k=w)||(k=n!==null&&n.memoizedState===null?!1:(fs.current&2)!==0),k&&(v=!0,r.flags&=-129),k=(r.flags&32)!==0,r.flags&=-33,n===null){if(Jt){if(v?Ra(r):Lo(),(n=an)?(n=T1(n,Tn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ii!==null?{id:$r,overflow:da}:null,retryLane:536870912,hydrationErrors:null},l=Il(n),l.return=r,r.child=l,ds=r,an=null)):n=null,n===null)throw Rs(r);return Up(n)?r.lanes=32:r.lanes=536870912,null}var U=d.children;return d=d.fallback,v?(Lo(),v=r.mode,U=Ah({mode:"hidden",children:U},v),d=ai(d,v,l,null),U.return=r,d.return=r,U.sibling=d,r.child=U,d=r.child,d.memoizedState=np(l),d.childLanes=sp(n,k,l),r.memoizedState=tp,Uu(null,d)):(Ra(r),rp(r,U))}var ne=n.memoizedState;if(ne!==null&&(U=ne.dehydrated,U!==null)){if(w)r.flags&256?(Ra(r),r.flags&=-257,r=ap(n,r,l)):r.memoizedState!==null?(Lo(),r.child=n.child,r.flags|=128,r=null):(Lo(),U=d.fallback,v=r.mode,d=Ah({mode:"visible",children:d.children},v),U=ai(U,v,l,null),U.flags|=2,d.return=r,U.return=r,d.sibling=U,r.child=d,Et(r,n.child,null,l),d=r.child,d.memoizedState=np(l),d.childLanes=sp(n,k,l),r.memoizedState=tp,r=Uu(null,d));else if(Ra(r),Up(U)){if(k=U.nextSibling&&U.nextSibling.dataset,k)var we=k.dgst;k=we,d=Error(a(419)),d.stack="",d.digest=k,Wr({value:d,source:null,stack:null}),r=ap(n,r,l)}else if(ws||Mo(n,r,l,!1),k=(l&n.childLanes)!==0,ws||k){if(k=zn,k!==null&&(d=tt(k,l),d!==0&&d!==ne.retryLane))throw ne.retryLane=d,ri(n,d),Pr(k,n,d),Zm;Vp(U)||Uh(),r=ap(n,r,l)}else Vp(U)?(r.flags|=192,r.child=n.child,r=null):(n=ne.treeContext,an=ya(U.nextSibling),ds=r,Jt=!0,pr=null,Tn=!1,n!==null&&ha(r,n),r=rp(r,d.children),r.flags|=4096);return r}return v?(Lo(),U=d.fallback,v=r.mode,ne=n.child,we=ne.sibling,d=ua(ne,{mode:"hidden",children:d.children}),d.subtreeFlags=ne.subtreeFlags&65011712,we!==null?U=ua(we,U):(U=ai(U,v,l,null),U.flags|=2),U.return=r,d.return=r,d.sibling=U,r.child=d,Uu(null,d),d=r.child,U=n.child.memoizedState,U===null?U=np(l):(v=U.cachePool,v!==null?(ne=as._currentValue,v=v.parent!==ne?{parent:ne,pool:ne}:v):v=_(),U={baseLanes:U.baseLanes|l,cachePool:v}),d.memoizedState=U,d.childLanes=sp(n,k,l),r.memoizedState=tp,Uu(n.child,d)):(Ra(r),l=n.child,n=l.sibling,l=ua(l,{mode:"visible",children:d.children}),l.return=r,l.sibling=null,n!==null&&(k=r.deletions,k===null?(r.deletions=[n],r.flags|=16):k.push(n)),r.child=l,r.memoizedState=null,l)}function rp(n,r){return r=Ah({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Ah(n,r){return n=As(22,n,null,r),n.lanes=0,n}function ap(n,r,l){return Et(r,n.child,null,l),n=rp(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function y0(n,r,l){n.lanes|=r;var d=n.alternate;d!==null&&(d.lanes|=r),Du(n.return,r,l)}function ip(n,r,l,d,v,w){var k=n.memoizedState;k===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:v,treeForkCount:w}:(k.isBackwards=r,k.rendering=null,k.renderingStartTime=0,k.last=d,k.tail=l,k.tailMode=v,k.treeForkCount=w)}function v0(n,r,l){var d=r.pendingProps,v=d.revealOrder,w=d.tail;d=d.children;var k=fs.current,U=(k&2)!==0;if(U?(k=k&1|2,r.flags|=128):k&=1,ze(fs,k),$s(n,r,d,l),d=Jt?Ol:0,!U&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&y0(n,l,r);else if(n.tag===19)y0(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(v){case"forwards":for(l=r.child,v=null;l!==null;)n=l.alternate,n!==null&&vh(n)===null&&(v=l),l=l.sibling;l=v,l===null?(v=r.child,r.child=null):(v=l.sibling,l.sibling=null),ip(r,!1,v,l,w,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=r.child,r.child=null;v!==null;){if(n=v.alternate,n!==null&&vh(n)===null){r.child=v;break}n=v.sibling,v.sibling=l,l=v,v=n}ip(r,!0,l,null,w,d);break;case"together":ip(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function $i(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),Bo|=r.lanes,(l&r.childLanes)===0)if(n!==null){if(Mo(n,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,l=ua(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=ua(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function op(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Pl(n)))}function PS(n,r,l){switch(r.tag){case 3:ge(r,r.stateNode.containerInfo),li(r,as,n.memoizedState.cache),Ui();break;case 27:case 5:st(r);break;case 4:ge(r,r.stateNode.containerInfo);break;case 10:li(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Dm(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Ra(r),r.flags|=128,null):(l&r.child.childLanes)!==0?g0(n,r,l):(Ra(r),n=$i(n,r,l),n!==null?n.sibling:null);Ra(r);break;case 19:var v=(n.flags&128)!==0;if(d=(l&r.childLanes)!==0,d||(Mo(n,r,l,!1),d=(l&r.childLanes)!==0),v){if(d)return v0(n,r,l);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ze(fs,fs.current),d)break;return null;case 22:return r.lanes=0,u0(n,r,l,r.pendingProps);case 24:li(r,as,n.memoizedState.cache)}return $i(n,r,l)}function b0(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps)ws=!0;else{if(!op(n,l)&&(r.flags&128)===0)return ws=!1,PS(n,r,l);ws=(n.flags&131072)!==0}else ws=!1,Jt&&(r.flags&1048576)!==0&&Hs(r,Ol,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(n=J(r.elementType),r.type=n,typeof n=="function")Co(n)?(d=Bl(n,d),r.tag=1,r=m0(null,r,n,d,l)):(r.tag=0,r=ep(null,r,n,d,l));else{if(n!=null){var v=n.$$typeof;if(v===Y){r.tag=11,r=o0(null,r,n,d,l);break e}else if(v===q){r.tag=14,r=l0(null,r,n,d,l);break e}}throw r=ke(n)||n,Error(a(306,r,""))}}return r;case 0:return ep(n,r,r.type,r.pendingProps,l);case 1:return d=r.type,v=Bl(d,r.pendingProps),m0(n,r,d,v,l);case 3:e:{if(ge(r,r.stateNode.containerInfo),n===null)throw Error(a(387));d=r.pendingProps;var w=r.memoizedState;v=w.element,tr(n,r),gr(r,d,null,l);var k=r.memoizedState;if(d=k.cache,li(r,as,d),d!==w.cache&&Mu(r,[as],l,!0),Ar(),d=k.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:k.cache},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){r=p0(n,r,d,l);break e}else if(d!==v){v=jr(Error(a(424)),r),Wr(v),r=p0(n,r,d,l);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,an=ya(n.firstChild),ds=r,Jt=!0,pr=null,Tn=!0,l=Yt(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ui(),d===v){r=$i(n,r,l);break e}$s(n,r,d,l)}r=r.child}return r;case 26:return Ch(n,r),n===null?(l=A1(r.type,null,r.pendingProps,null))?r.memoizedState=l:Jt||(l=r.type,n=r.pendingProps,d=Wh(Be.current).createElement(l),d[Wt]=r,d[kn]=n,Ws(d,l,n),Hn(d),r.stateNode=d):r.memoizedState=A1(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return st(r),n===null&&Jt&&(d=r.stateNode=j1(r.type,r.pendingProps,Be.current),ds=r,Tn=!0,v=an,$o(r.type)?(Bp=v,an=ya(d.firstChild)):an=v),$s(n,r,r.pendingProps.children,l),Ch(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Jt&&((v=d=an)&&(d=hT(d,r.type,r.pendingProps,Tn),d!==null?(r.stateNode=d,ds=r,an=ya(d.firstChild),Tn=!1,v=!0):v=!1),v||Rs(r)),st(r),v=r.type,w=r.pendingProps,k=n!==null?n.memoizedProps:null,d=w.children,Op(v,w)?d=null:k!==null&&Op(v,k)&&(r.flags|=32),r.memoizedState!==null&&(v=Im(n,r,jS,null,null,l),ed._currentValue=v),Ch(n,r),$s(n,r,d,l),r.child;case 6:return n===null&&Jt&&((n=l=an)&&(l=fT(l,r.pendingProps,Tn),l!==null?(r.stateNode=l,ds=r,an=null,n=!0):n=!1),n||Rs(r)),null;case 13:return g0(n,r,l);case 4:return ge(r,r.stateNode.containerInfo),d=r.pendingProps,n===null?r.child=Et(r,null,d,l):$s(n,r,d,l),r.child;case 11:return o0(n,r,r.type,r.pendingProps,l);case 7:return $s(n,r,r.pendingProps,l),r.child;case 8:return $s(n,r,r.pendingProps.children,l),r.child;case 12:return $s(n,r,r.pendingProps.children,l),r.child;case 10:return d=r.pendingProps,li(r,r.type,d.value),$s(n,r,d.children,l),r.child;case 9:return v=r.type._context,d=r.pendingProps.children,zi(r),v=bs(v),d=d(v),r.flags|=1,$s(n,r,d,l),r.child;case 14:return l0(n,r,r.type,r.pendingProps,l);case 15:return c0(n,r,r.type,r.pendingProps,l);case 19:return v0(n,r,l);case 31:return OS(n,r,l);case 22:return u0(n,r,l,r.pendingProps);case 24:return zi(r),d=bs(as),n===null?(v=h(),v===null&&(v=zn,w=Iu(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=l),v=w),r.memoizedState={parent:d,cache:v},Zt(r),li(r,as,v)):((n.lanes&l)!==0&&(tr(n,r),gr(r,null,null,l),Ar()),v=n.memoizedState,w=r.memoizedState,v.parent!==d?(v={parent:d,cache:d},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),li(r,as,d)):(d=w.cache,li(r,as,d),d!==v.cache&&Mu(r,[as],l,!0))),$s(n,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function Wi(n){n.flags|=4}function lp(n,r,l,d,v){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(v&335544128)===v)if(n.stateNode.complete)n.flags|=8192;else if(W0())n.flags|=8192;else throw re=D,N}else n.flags&=-16777217}function x0(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!O1(r))if(W0())n.flags|=8192;else throw re=D,N}function Rh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?pn():536870912,n.lanes|=r,Mc|=r)}function Bu(n,r){if(!Jt)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Yn(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(r)for(var v=n.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=n,v=v.sibling;else for(v=n.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=n,v=v.sibling;return n.subtreeFlags|=d,n.childLanes=l,r}function LS(n,r,l){var d=r.pendingProps;switch(ja(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(r),null;case 1:return Yn(r),null;case 3:return l=r.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Ca(as),be(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Vi(r)?Wi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,oi())),Yn(r),null;case 26:var v=r.type,w=r.memoizedState;return n===null?(Wi(r),w!==null?(Yn(r),x0(r,w)):(Yn(r),lp(r,v,null,d,l))):w?w!==n.memoizedState?(Wi(r),Yn(r),x0(r,w)):(Yn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==d&&Wi(r),Yn(r),lp(r,v,n,d,l)),null;case 27:if(Te(r),l=Be.current,v=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&Wi(r);else{if(!d){if(r.stateNode===null)throw Error(a(166));return Yn(r),null}n=Oe.current,Vi(r)?Ds(r):(n=j1(v,d,l),r.stateNode=n,Wi(r))}return Yn(r),null;case 5:if(Te(r),v=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==d&&Wi(r);else{if(!d){if(r.stateNode===null)throw Error(a(166));return Yn(r),null}if(w=Oe.current,Vi(r))Ds(r);else{var k=Wh(Be.current);switch(w){case 1:w=k.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=k.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=k.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=k.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=k.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?k.createElement("select",{is:d.is}):k.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?k.createElement(v,{is:d.is}):k.createElement(v)}}w[Wt]=r,w[kn]=d;e:for(k=r.child;k!==null;){if(k.tag===5||k.tag===6)w.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===r)break e;for(;k.sibling===null;){if(k.return===null||k.return===r)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}r.stateNode=w;e:switch(Ws(w,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Wi(r)}}return Yn(r),lp(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,l),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==d&&Wi(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(a(166));if(n=Be.current,Vi(r)){if(n=r.stateNode,l=r.memoizedProps,d=null,v=ds,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}n[Wt]=r,n=!!(n.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||g1(n.nodeValue,l)),n||Rs(r,!0)}else n=Wh(n).createTextNode(d),n[Wt]=r,r.stateNode=n}return Yn(r),null;case 31:if(l=r.memoizedState,n===null||n.memoizedState!==null){if(d=Vi(r),l!==null){if(n===null){if(!d)throw Error(a(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[Wt]=r}else Ui(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Yn(r),n=!1}else l=oi(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return r.flags&256?(Qr(r),r):(Qr(r),null);if((r.flags&128)!==0)throw Error(a(558))}return Yn(r),null;case 13:if(d=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(v=Vi(r),d!==null&&d.dehydrated!==null){if(n===null){if(!v)throw Error(a(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(a(317));v[Wt]=r}else Ui(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Yn(r),v=!1}else v=oi(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Qr(r),r):(Qr(r),null)}return Qr(r),(r.flags&128)!==0?(r.lanes=l,r):(l=d!==null,n=n!==null&&n.memoizedState!==null,l&&(d=r.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==v&&(d.flags|=2048)),l!==n&&l&&(r.child.flags|=8192),Rh(r,r.updateQueue),Yn(r),null);case 4:return be(),n===null&&Ap(r.stateNode.containerInfo),Yn(r),null;case 10:return Ca(r.type),Yn(r),null;case 19:if(ue(fs),d=r.memoizedState,d===null)return Yn(r),null;if(v=(r.flags&128)!==0,w=d.rendering,w===null)if(v)Bu(d,!1);else{if(os!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(w=vh(n),w!==null){for(r.flags|=128,Bu(d,!1),n=w.updateQueue,r.updateQueue=n,Rh(r,n),r.subtreeFlags=0,n=l,l=r.child;l!==null;)fh(l,n),l=l.sibling;return ze(fs,fs.current&1|2),Jt&&Cr(r,d.treeForkCount),r.child}n=n.sibling}d.tail!==null&&rt()>Ph&&(r.flags|=128,v=!0,Bu(d,!1),r.lanes=4194304)}else{if(!v)if(n=vh(w),n!==null){if(r.flags|=128,v=!0,n=n.updateQueue,r.updateQueue=n,Rh(r,n),Bu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!Jt)return Yn(r),null}else 2*rt()-d.renderingStartTime>Ph&&l!==536870912&&(r.flags|=128,v=!0,Bu(d,!1),r.lanes=4194304);d.isBackwards?(w.sibling=r.child,r.child=w):(n=d.last,n!==null?n.sibling=w:r.child=w,d.last=w)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=rt(),n.sibling=null,l=fs.current,ze(fs,v?l&1|2:l&1),Jt&&Cr(r,d.treeForkCount),n):(Yn(r),null);case 22:case 23:return Qr(r),hs(),d=r.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(l&536870912)!==0&&(r.flags&128)===0&&(Yn(r),r.subtreeFlags&6&&(r.flags|=8192)):Yn(r),l=r.updateQueue,l!==null&&Rh(r,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==l&&(r.flags|=2048),n!==null&&ue(x),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ca(as),Yn(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function VS(n,r){switch(ja(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ca(as),be(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Te(r),null;case 31:if(r.memoizedState!==null){if(Qr(r),r.alternate===null)throw Error(a(340));Ui()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Qr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Ui()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ue(fs),null;case 4:return be(),null;case 10:return Ca(r.type),null;case 22:case 23:return Qr(r),hs(),n!==null&&ue(x),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Ca(as),null;case 25:return null;default:return null}}function _0(n,r){switch(ja(r),r.tag){case 3:Ca(as),be();break;case 26:case 27:case 5:Te(r);break;case 4:be();break;case 31:r.memoizedState!==null&&Qr(r);break;case 13:Qr(r);break;case 19:ue(fs);break;case 10:Ca(r.type);break;case 22:case 23:Qr(r),hs(),n!==null&&ue(x);break;case 24:Ca(as)}}function zu(n,r){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var v=d.next;l=v;do{if((l.tag&n)===n){d=void 0;var w=l.create,k=l.inst;d=w(),k.destroy=d}l=l.next}while(l!==v)}}catch(U){Mn(r,r.return,U)}}function Vo(n,r,l){try{var d=r.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var w=v.next;d=w;do{if((d.tag&n)===n){var k=d.inst,U=k.destroy;if(U!==void 0){k.destroy=void 0,v=r;var ne=l,we=U;try{we()}catch(qe){Mn(v,ne,qe)}}}d=d.next}while(d!==w)}}catch(qe){Mn(r,r.return,qe)}}function w0(n){var r=n.updateQueue;if(r!==null){var l=n.stateNode;try{Rr(r,l)}catch(d){Mn(n,n.return,d)}}}function S0(n,r,l){l.props=Bl(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(d){Mn(n,r,d)}}function Fu(n,r){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof l=="function"?n.refCleanup=l(d):l.current=d}}catch(v){Mn(n,r,v)}}function ui(n,r){var l=n.ref,d=n.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(v){Mn(n,r,v)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){Mn(n,r,v)}else l.current=null}function T0(n){var r=n.type,l=n.memoizedProps,d=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(v){Mn(n,n.return,v)}}function cp(n,r,l){try{var d=n.stateNode;iT(d,n.type,l,r),d[kn]=r}catch(v){Mn(n,n.return,v)}}function E0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&$o(n.type)||n.tag===4}function up(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||E0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&$o(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dp(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(n),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=zr));else if(d!==4&&(d===27&&$o(n.type)&&(l=n.stateNode,r=null),n=n.child,n!==null))for(dp(n,r,l),n=n.sibling;n!==null;)dp(n,r,l),n=n.sibling}function Dh(n,r,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(d!==4&&(d===27&&$o(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Dh(n,r,l),n=n.sibling;n!==null;)Dh(n,r,l),n=n.sibling}function N0(n){var r=n.stateNode,l=n.memoizedProps;try{for(var d=n.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);Ws(r,d,l),r[Wt]=n,r[kn]=l}catch(w){Mn(n,n.return,w)}}var Gi=!1,Ss=!1,hp=!1,j0=typeof WeakSet=="function"?WeakSet:Set,Vs=null;function US(n,r){if(n=n.containerInfo,Mp=Zh,n=Su(n),yc(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var v=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var k=0,U=-1,ne=-1,we=0,qe=0,Qe=n,Ne=null;t:for(;;){for(var Me;Qe!==l||v!==0&&Qe.nodeType!==3||(U=k+v),Qe!==w||d!==0&&Qe.nodeType!==3||(ne=k+d),Qe.nodeType===3&&(k+=Qe.nodeValue.length),(Me=Qe.firstChild)!==null;)Ne=Qe,Qe=Me;for(;;){if(Qe===n)break t;if(Ne===l&&++we===v&&(U=k),Ne===w&&++qe===d&&(ne=k),(Me=Qe.nextSibling)!==null)break;Qe=Ne,Ne=Qe.parentNode}Qe=Me}l=U===-1||ne===-1?null:{start:U,end:ne}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ip={focusedElem:n,selectionRange:l},Zh=!1,Vs=r;Vs!==null;)if(r=Vs,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Vs=n;else for(;Vs!==null;){switch(r=Vs,w=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)v=n[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,l=r,v=w.memoizedProps,w=w.memoizedState,d=l.stateNode;try{var bt=Bl(l.type,v);n=d.getSnapshotBeforeUpdate(bt,w),d.__reactInternalSnapshotBeforeUpdate=n}catch(Mt){Mn(l,l.return,Mt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,l=n.nodeType,l===9)Lp(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Lp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=r.sibling,n!==null){n.return=r.return,Vs=n;break}Vs=r.return}}function k0(n,r,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Ki(n,l),d&4&&zu(5,l);break;case 1:if(Ki(n,l),d&4)if(n=l.stateNode,r===null)try{n.componentDidMount()}catch(k){Mn(l,l.return,k)}else{var v=Bl(l.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(v,r,n.__reactInternalSnapshotBeforeUpdate)}catch(k){Mn(l,l.return,k)}}d&64&&w0(l),d&512&&Fu(l,l.return);break;case 3:if(Ki(n,l),d&64&&(n=l.updateQueue,n!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Rr(n,r)}catch(k){Mn(l,l.return,k)}}break;case 27:r===null&&d&4&&N0(l);case 26:case 5:Ki(n,l),r===null&&d&4&&T0(l),d&512&&Fu(l,l.return);break;case 12:Ki(n,l);break;case 31:Ki(n,l),d&4&&R0(n,l);break;case 13:Ki(n,l),d&4&&D0(n,l),d&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=YS.bind(null,l),mT(n,l))));break;case 22:if(d=l.memoizedState!==null||Gi,!d){r=r!==null&&r.memoizedState!==null||Ss,v=Gi;var w=Ss;Gi=d,(Ss=r)&&!w?Qi(n,l,(l.subtreeFlags&8772)!==0):Ki(n,l),Gi=v,Ss=w}break;case 30:break;default:Ki(n,l)}}function C0(n){var r=n.alternate;r!==null&&(n.alternate=null,C0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Bn(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Qn=null,Dr=!1;function Yi(n,r,l){for(l=l.child;l!==null;)A0(n,r,l),l=l.sibling}function A0(n,r,l){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(et,l)}catch{}switch(l.tag){case 26:Ss||ui(l,r),Yi(n,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ss||ui(l,r);var d=Qn,v=Dr;$o(l.type)&&(Qn=l.stateNode,Dr=!1),Yi(n,r,l),Xu(l.stateNode),Qn=d,Dr=v;break;case 5:Ss||ui(l,r);case 6:if(d=Qn,v=Dr,Qn=null,Yi(n,r,l),Qn=d,Dr=v,Qn!==null)if(Dr)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(l.stateNode)}catch(w){Mn(l,r,w)}else try{Qn.removeChild(l.stateNode)}catch(w){Mn(l,r,w)}break;case 18:Qn!==null&&(Dr?(n=Qn,w1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),zc(n)):w1(Qn,l.stateNode));break;case 4:d=Qn,v=Dr,Qn=l.stateNode.containerInfo,Dr=!0,Yi(n,r,l),Qn=d,Dr=v;break;case 0:case 11:case 14:case 15:Vo(2,l,r),Ss||Vo(4,l,r),Yi(n,r,l);break;case 1:Ss||(ui(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"&&S0(l,r,d)),Yi(n,r,l);break;case 21:Yi(n,r,l);break;case 22:Ss=(d=Ss)||l.memoizedState!==null,Yi(n,r,l),Ss=d;break;default:Yi(n,r,l)}}function R0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{zc(n)}catch(l){Mn(r,r.return,l)}}}function D0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{zc(n)}catch(l){Mn(r,r.return,l)}}function BS(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new j0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new j0),r;default:throw Error(a(435,n.tag))}}function Mh(n,r){var l=BS(n);r.forEach(function(d){if(!l.has(d)){l.add(d);var v=KS.bind(null,n,d);d.then(v,v)}})}function Mr(n,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var v=l[d],w=n,k=r,U=k;e:for(;U!==null;){switch(U.tag){case 27:if($o(U.type)){Qn=U.stateNode,Dr=!1;break e}break;case 5:Qn=U.stateNode,Dr=!1;break e;case 3:case 4:Qn=U.stateNode.containerInfo,Dr=!0;break e}U=U.return}if(Qn===null)throw Error(a(160));A0(w,k,v),Qn=null,Dr=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)M0(r,n),r=r.sibling}var Da=null;function M0(n,r){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Mr(r,n),Ir(n),d&4&&(Vo(3,n,n.return),zu(3,n),Vo(5,n,n.return));break;case 1:Mr(r,n),Ir(n),d&512&&(Ss||l===null||ui(l,l.return)),d&64&&Gi&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var v=Da;if(Mr(r,n),Ir(n),d&512&&(Ss||l===null||ui(l,l.return)),d&4){var w=l!==null?l.memoizedState:null;if(d=n.memoizedState,l===null)if(d===null)if(n.stateNode===null){e:{d=n.type,l=n.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":w=v.getElementsByTagName("title")[0],(!w||w[Cn]||w[Wt]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(d),v.head.insertBefore(w,v.querySelector("head > title"))),Ws(w,d,l),w[Wt]=n,Hn(w),d=w;break e;case"link":var k=M1("link","href",v).get(d+(l.href||""));if(k){for(var U=0;U<k.length;U++)if(w=k[U],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){k.splice(U,1);break t}}w=v.createElement(d),Ws(w,d,l),v.head.appendChild(w);break;case"meta":if(k=M1("meta","content",v).get(d+(l.content||""))){for(U=0;U<k.length;U++)if(w=k[U],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){k.splice(U,1);break t}}w=v.createElement(d),Ws(w,d,l),v.head.appendChild(w);break;default:throw Error(a(468,d))}w[Wt]=n,Hn(w),d=w}n.stateNode=d}else I1(v,n.type,n.stateNode);else n.stateNode=D1(v,d,n.memoizedProps);else w!==d?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,d===null?I1(v,n.type,n.stateNode):D1(v,d,n.memoizedProps)):d===null&&n.stateNode!==null&&cp(n,n.memoizedProps,l.memoizedProps)}break;case 27:Mr(r,n),Ir(n),d&512&&(Ss||l===null||ui(l,l.return)),l!==null&&d&4&&cp(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Mr(r,n),Ir(n),d&512&&(Ss||l===null||ui(l,l.return)),n.flags&32){v=n.stateNode;try{Js(v,"")}catch(bt){Mn(n,n.return,bt)}}d&4&&n.stateNode!=null&&(v=n.memoizedProps,cp(n,v,l!==null?l.memoizedProps:v)),d&1024&&(hp=!0);break;case 6:if(Mr(r,n),Ir(n),d&4){if(n.stateNode===null)throw Error(a(162));d=n.memoizedProps,l=n.stateNode;try{l.nodeValue=d}catch(bt){Mn(n,n.return,bt)}}break;case 3:if(Kh=null,v=Da,Da=Gh(r.containerInfo),Mr(r,n),Da=v,Ir(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{zc(r.containerInfo)}catch(bt){Mn(n,n.return,bt)}hp&&(hp=!1,I0(n));break;case 4:d=Da,Da=Gh(n.stateNode.containerInfo),Mr(r,n),Ir(n),Da=d;break;case 12:Mr(r,n),Ir(n);break;case 31:Mr(r,n),Ir(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Mh(n,d)));break;case 13:Mr(r,n),Ir(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Oh=rt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Mh(n,d)));break;case 22:v=n.memoizedState!==null;var ne=l!==null&&l.memoizedState!==null,we=Gi,qe=Ss;if(Gi=we||v,Ss=qe||ne,Mr(r,n),Ss=qe,Gi=we,Ir(n),d&8192)e:for(r=n.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(l===null||ne||Gi||Ss||zl(n)),l=null,r=n;;){if(r.tag===5||r.tag===26){if(l===null){ne=l=r;try{if(w=ne.stateNode,v)k=w.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{U=ne.stateNode;var Qe=ne.memoizedProps.style,Ne=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;U.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(bt){Mn(ne,ne.return,bt)}}}else if(r.tag===6){if(l===null){ne=r;try{ne.stateNode.nodeValue=v?"":ne.memoizedProps}catch(bt){Mn(ne,ne.return,bt)}}}else if(r.tag===18){if(l===null){ne=r;try{var Me=ne.stateNode;v?S1(Me,!0):S1(ne.stateNode,!1)}catch(bt){Mn(ne,ne.return,bt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=n.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Mh(n,l))));break;case 19:Mr(r,n),Ir(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Mh(n,d)));break;case 30:break;case 21:break;default:Mr(r,n),Ir(n)}}function Ir(n){var r=n.flags;if(r&2){try{for(var l,d=n.return;d!==null;){if(E0(d)){l=d;break}d=d.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var v=l.stateNode,w=up(n);Dh(n,w,v);break;case 5:var k=l.stateNode;l.flags&32&&(Js(k,""),l.flags&=-33);var U=up(n);Dh(n,U,k);break;case 3:case 4:var ne=l.stateNode.containerInfo,we=up(n);dp(n,we,ne);break;default:throw Error(a(161))}}catch(qe){Mn(n,n.return,qe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function I0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;I0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Ki(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)k0(n,r.alternate,r),r=r.sibling}function zl(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Vo(4,r,r.return),zl(r);break;case 1:ui(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&S0(r,r.return,l),zl(r);break;case 27:Xu(r.stateNode);case 26:case 5:ui(r,r.return),zl(r);break;case 22:r.memoizedState===null&&zl(r);break;case 30:zl(r);break;default:zl(r)}n=n.sibling}}function Qi(n,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,v=n,w=r,k=w.flags;switch(w.tag){case 0:case 11:case 15:Qi(v,w,l),zu(4,w);break;case 1:if(Qi(v,w,l),d=w,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(we){Mn(d,d.return,we)}if(d=w,v=d.updateQueue,v!==null){var U=d.stateNode;try{var ne=v.shared.hiddenCallbacks;if(ne!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ne.length;v++)Rn(ne[v],U)}catch(we){Mn(d,d.return,we)}}l&&k&64&&w0(w),Fu(w,w.return);break;case 27:N0(w);case 26:case 5:Qi(v,w,l),l&&d===null&&k&4&&T0(w),Fu(w,w.return);break;case 12:Qi(v,w,l);break;case 31:Qi(v,w,l),l&&k&4&&R0(v,w);break;case 13:Qi(v,w,l),l&&k&4&&D0(v,w);break;case 22:w.memoizedState===null&&Qi(v,w,l),Fu(w,w.return);break;case 30:break;default:Qi(v,w,l)}r=r.sibling}}function fp(n,r){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Vl(l))}function mp(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Vl(n))}function Ma(n,r,l,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)O0(n,r,l,d),r=r.sibling}function O0(n,r,l,d){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Ma(n,r,l,d),v&2048&&zu(9,r);break;case 1:Ma(n,r,l,d);break;case 3:Ma(n,r,l,d),v&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&Vl(n)));break;case 12:if(v&2048){Ma(n,r,l,d),n=r.stateNode;try{var w=r.memoizedProps,k=w.id,U=w.onPostCommit;typeof U=="function"&&U(k,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(ne){Mn(r,r.return,ne)}}else Ma(n,r,l,d);break;case 31:Ma(n,r,l,d);break;case 13:Ma(n,r,l,d);break;case 23:break;case 22:w=r.stateNode,k=r.alternate,r.memoizedState!==null?w._visibility&2?Ma(n,r,l,d):qu(n,r):w._visibility&2?Ma(n,r,l,d):(w._visibility|=2,Ac(n,r,l,d,(r.subtreeFlags&10256)!==0||!1)),v&2048&&fp(k,r);break;case 24:Ma(n,r,l,d),v&2048&&mp(r.alternate,r);break;default:Ma(n,r,l,d)}}function Ac(n,r,l,d,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var w=n,k=r,U=l,ne=d,we=k.flags;switch(k.tag){case 0:case 11:case 15:Ac(w,k,U,ne,v),zu(8,k);break;case 23:break;case 22:var qe=k.stateNode;k.memoizedState!==null?qe._visibility&2?Ac(w,k,U,ne,v):qu(w,k):(qe._visibility|=2,Ac(w,k,U,ne,v)),v&&we&2048&&fp(k.alternate,k);break;case 24:Ac(w,k,U,ne,v),v&&we&2048&&mp(k.alternate,k);break;default:Ac(w,k,U,ne,v)}r=r.sibling}}function qu(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=n,d=r,v=d.flags;switch(d.tag){case 22:qu(l,d),v&2048&&fp(d.alternate,d);break;case 24:qu(l,d),v&2048&&mp(d.alternate,d);break;default:qu(l,d)}r=r.sibling}}var Hu=8192;function Rc(n,r,l){if(n.subtreeFlags&Hu)for(n=n.child;n!==null;)P0(n,r,l),n=n.sibling}function P0(n,r,l){switch(n.tag){case 26:Rc(n,r,l),n.flags&Hu&&n.memoizedState!==null&&NT(l,Da,n.memoizedState,n.memoizedProps);break;case 5:Rc(n,r,l);break;case 3:case 4:var d=Da;Da=Gh(n.stateNode.containerInfo),Rc(n,r,l),Da=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=Hu,Hu=16777216,Rc(n,r,l),Hu=d):Rc(n,r,l));break;default:Rc(n,r,l)}}function L0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function $u(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];Vs=d,U0(d,n)}L0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)V0(n),n=n.sibling}function V0(n){switch(n.tag){case 0:case 11:case 15:$u(n),n.flags&2048&&Vo(9,n,n.return);break;case 3:$u(n);break;case 12:$u(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Ih(n)):$u(n);break;default:$u(n)}}function Ih(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var d=r[l];Vs=d,U0(d,n)}L0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Vo(8,r,r.return),Ih(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Ih(r));break;default:Ih(r)}n=n.sibling}}function U0(n,r){for(;Vs!==null;){var l=Vs;switch(l.tag){case 0:case 11:case 15:Vo(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Vl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Vs=d;else e:for(l=n;Vs!==null;){d=Vs;var v=d.sibling,w=d.return;if(C0(d),d===l){Vs=null;break e}if(v!==null){v.return=w,Vs=v;break e}Vs=w}}}var zS={getCacheForType:function(n){var r=bs(as),l=r.data.get(n);return l===void 0&&(l=n(),r.data.set(n,l)),l},cacheSignal:function(){return bs(as).controller.signal}},FS=typeof WeakMap=="function"?WeakMap:Map,En=0,zn=null,sn=null,on=0,Dn=0,Xr=null,Uo=!1,Dc=!1,pp=!1,Xi=0,os=0,Bo=0,Fl=0,gp=0,Jr=0,Mc=0,Wu=null,Or=null,yp=!1,Oh=0,B0=0,Ph=1/0,Lh=null,zo=null,Ms=0,Fo=null,Ic=null,Ji=0,vp=0,bp=null,z0=null,Gu=0,xp=null;function Zr(){return(En&2)!==0&&on!==0?on&-on:te.T!==null?Np():wt()}function F0(){if(Jr===0)if((on&536870912)===0||Jt){var n=lt;lt<<=1,(lt&3932160)===0&&(lt=262144),Jr=n}else Jr=536870912;return n=yr.current,n!==null&&(n.flags|=32),Jr}function Pr(n,r,l){(n===zn&&(Dn===2||Dn===9)||n.cancelPendingCommit!==null)&&(Oc(n,0),qo(n,on,Jr,!1)),Gn(n,l),((En&2)===0||n!==zn)&&(n===zn&&((En&2)===0&&(Fl|=l),os===4&&qo(n,on,Jr,!1)),di(n))}function q0(n,r,l){if((En&6)!==0)throw Error(a(327));var d=!l&&(r&127)===0&&(r&n.expiredLanes)===0||nn(n,r),v=d?$S(n,r):wp(n,r,!0),w=d;do{if(v===0){Dc&&!d&&qo(n,r,0,!1);break}else{if(l=n.current.alternate,w&&!qS(l)){v=wp(n,r,!1),w=!1;continue}if(v===2){if(w=r,n.errorRecoveryDisabledLanes&w)var k=0;else k=n.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){r=k;e:{var U=n;v=Wu;var ne=U.current.memoizedState.isDehydrated;if(ne&&(Oc(U,k).flags|=256),k=wp(U,k,!1),k!==2){if(pp&&!ne){U.errorRecoveryDisabledLanes|=w,Fl|=w,v=4;break e}w=Or,Or=v,w!==null&&(Or===null?Or=w:Or.push.apply(Or,w))}v=k}if(w=!1,v!==2)continue}}if(v===1){Oc(n,0),qo(n,r,0,!0);break}e:{switch(d=n,w=v,w){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:qo(d,r,Jr,!Uo);break e;case 2:Or=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(v=Oh+300-rt(),10<v)){if(qo(d,r,Jr,!Uo),_n(d,0,!0)!==0)break e;Ji=r,d.timeoutHandle=x1(H0.bind(null,d,l,Or,Lh,yp,r,Jr,Fl,Mc,Uo,w,"Throttled",-0,0),v);break e}H0(d,l,Or,Lh,yp,r,Jr,Fl,Mc,Uo,w,null,-0,0)}}break}while(!0);di(n)}function H0(n,r,l,d,v,w,k,U,ne,we,qe,Qe,Ne,Me){if(n.timeoutHandle=-1,Qe=r.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zr},P0(r,w,Qe);var bt=(w&62914560)===w?Oh-rt():(w&4194048)===w?B0-rt():0;if(bt=jT(Qe,bt),bt!==null){Ji=w,n.cancelPendingCommit=bt(J0.bind(null,n,r,w,l,d,v,k,U,ne,qe,Qe,null,Ne,Me)),qo(n,w,k,!we);return}}J0(n,r,w,l,d,v,k,U,ne)}function qS(n){for(var r=n;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var v=l[d],w=v.getSnapshot;v=v.value;try{if(!er(w(),v))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qo(n,r,l,d){r&=~gp,r&=~Fl,n.suspendedLanes|=r,n.pingedLanes&=~r,d&&(n.warmLanes|=r),d=n.expirationTimes;for(var v=r;0<v;){var w=31-_t(v),k=1<<w;d[w]=-1,v&=~k}l!==0&&me(n,l,r)}function Vh(){return(En&6)===0?(Yu(0),!1):!0}function _p(){if(sn!==null){if(Dn===0)var n=sn.return;else n=sn,ka=Bi=null,Lm(n),ie=null,Se=0,n=sn;for(;n!==null;)_0(n.alternate,n),n=n.return;sn=null}}function Oc(n,r){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,cT(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Ji=0,_p(),zn=n,sn=l=ua(n.current,null),on=r,Dn=0,Xr=null,Uo=!1,Dc=nn(n,r),pp=!1,Mc=Jr=gp=Fl=Bo=os=0,Or=Wu=null,yp=!1,(r&8)!==0&&(r|=r&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=r;0<d;){var v=31-_t(d),w=1<<v;r|=n[v],d&=~w}return Xi=r,Dl(),l}function $0(n,r){Kt=null,te.H=Vu,r===S||r===A?(r=ce(),Dn=3):r===N?(r=ce(),Dn=4):Dn=r===Zm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Xr=r,sn===null&&(os=1,jh(n,jr(r,n.current)))}function W0(){var n=yr.current;return n===null?!0:(on&4194048)===on?vr===null:(on&62914560)===on||(on&536870912)!==0?n===vr:!1}function G0(){var n=te.H;return te.H=Vu,n===null?Vu:n}function Y0(){var n=te.A;return te.A=zS,n}function Uh(){os=4,Uo||(on&4194048)!==on&&yr.current!==null||(Dc=!0),(Bo&134217727)===0&&(Fl&134217727)===0||zn===null||qo(zn,on,Jr,!1)}function wp(n,r,l){var d=En;En|=2;var v=G0(),w=Y0();(zn!==n||on!==r)&&(Lh=null,Oc(n,r)),r=!1;var k=os;e:do try{if(Dn!==0&&sn!==null){var U=sn,ne=Xr;switch(Dn){case 8:_p(),k=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(r=!0);var we=Dn;if(Dn=0,Xr=null,Pc(n,U,ne,we),l&&Dc){k=0;break e}break;default:we=Dn,Dn=0,Xr=null,Pc(n,U,ne,we)}}HS(),k=os;break}catch(qe){$0(n,qe)}while(!0);return r&&n.shellSuspendCounter++,ka=Bi=null,En=d,te.H=v,te.A=w,sn===null&&(zn=null,on=0,Dl()),k}function HS(){for(;sn!==null;)K0(sn)}function $S(n,r){var l=En;En|=2;var d=G0(),v=Y0();zn!==n||on!==r?(Lh=null,Ph=rt()+500,Oc(n,r)):Dc=nn(n,r);e:do try{if(Dn!==0&&sn!==null){r=sn;var w=Xr;t:switch(Dn){case 1:Dn=0,Xr=null,Pc(n,r,w,1);break;case 2:case 9:if(M(w)){Dn=0,Xr=null,Q0(r);break}r=function(){Dn!==2&&Dn!==9||zn!==n||(Dn=7),di(n)},w.then(r,r);break e;case 3:Dn=7;break e;case 4:Dn=5;break e;case 7:M(w)?(Dn=0,Xr=null,Q0(r)):(Dn=0,Xr=null,Pc(n,r,w,7));break;case 5:var k=null;switch(sn.tag){case 26:k=sn.memoizedState;case 5:case 27:var U=sn;if(k?O1(k):U.stateNode.complete){Dn=0,Xr=null;var ne=U.sibling;if(ne!==null)sn=ne;else{var we=U.return;we!==null?(sn=we,Bh(we)):sn=null}break t}}Dn=0,Xr=null,Pc(n,r,w,5);break;case 6:Dn=0,Xr=null,Pc(n,r,w,6);break;case 8:_p(),os=6;break e;default:throw Error(a(462))}}WS();break}catch(qe){$0(n,qe)}while(!0);return ka=Bi=null,te.H=d,te.A=v,En=l,sn!==null?0:(zn=null,on=0,Dl(),os)}function WS(){for(;sn!==null&&!it();)K0(sn)}function K0(n){var r=b0(n.alternate,n,Xi);n.memoizedProps=n.pendingProps,r===null?Bh(n):sn=r}function Q0(n){var r=n,l=r.alternate;switch(r.tag){case 15:case 0:r=f0(l,r,r.pendingProps,r.type,void 0,on);break;case 11:r=f0(l,r,r.pendingProps,r.type.render,r.ref,on);break;case 5:Lm(r);default:_0(l,r),r=sn=fh(r,Xi),r=b0(l,r,Xi)}n.memoizedProps=n.pendingProps,r===null?Bh(n):sn=r}function Pc(n,r,l,d){ka=Bi=null,Lm(r),ie=null,Se=0;var v=r.return;try{if(IS(n,v,r,l,on)){os=1,jh(n,jr(l,n.current)),sn=null;return}}catch(w){if(v!==null)throw sn=v,w;os=1,jh(n,jr(l,n.current)),sn=null;return}r.flags&32768?(Jt||d===1?n=!0:Dc||(on&536870912)!==0?n=!1:(Uo=n=!0,(d===2||d===9||d===3||d===6)&&(d=yr.current,d!==null&&d.tag===13&&(d.flags|=16384))),X0(r,n)):Bh(r)}function Bh(n){var r=n;do{if((r.flags&32768)!==0){X0(r,Uo);return}n=r.return;var l=LS(r.alternate,r,Xi);if(l!==null){sn=l;return}if(r=r.sibling,r!==null){sn=r;return}sn=r=n}while(r!==null);os===0&&(os=5)}function X0(n,r){do{var l=VS(n.alternate,n);if(l!==null){l.flags&=32767,sn=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(n=n.sibling,n!==null)){sn=n;return}sn=n=l}while(n!==null);os=6,sn=null}function J0(n,r,l,d,v,w,k,U,ne){n.cancelPendingCommit=null;do zh();while(Ms!==0);if((En&6)!==0)throw Error(a(327));if(r!==null){if(r===n.current)throw Error(a(177));if(w=r.lanes|r.childLanes,w|=Nu,ls(n,l,w,k,U,ne),n===zn&&(sn=zn=null,on=0),Ic=r,Fo=n,Ji=l,vp=w,bp=v,z0=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,QS(Jn,function(){return s1(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=te.T,te.T=null,v=ve.p,ve.p=2,k=En,En|=4;try{US(n,r,l)}finally{En=k,ve.p=v,te.T=d}}Ms=1,Z0(),e1(),t1()}}function Z0(){if(Ms===1){Ms=0;var n=Fo,r=Ic,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=te.T,te.T=null;var d=ve.p;ve.p=2;var v=En;En|=4;try{M0(r,n);var w=Ip,k=Su(n.containerInfo),U=w.focusedElem,ne=w.selectionRange;if(k!==U&&U&&U.ownerDocument&&oh(U.ownerDocument.documentElement,U)){if(ne!==null&&yc(U)){var we=ne.start,qe=ne.end;if(qe===void 0&&(qe=we),"selectionStart"in U)U.selectionStart=we,U.selectionEnd=Math.min(qe,U.value.length);else{var Qe=U.ownerDocument||document,Ne=Qe&&Qe.defaultView||window;if(Ne.getSelection){var Me=Ne.getSelection(),bt=U.textContent.length,Mt=Math.min(ne.start,bt),Vn=ne.end===void 0?Mt:Math.min(ne.end,bt);!Me.extend&&Mt>Vn&&(k=Vn,Vn=Mt,Mt=k);var pe=wu(U,Mt),oe=wu(U,Vn);if(pe&&oe&&(Me.rangeCount!==1||Me.anchorNode!==pe.node||Me.anchorOffset!==pe.offset||Me.focusNode!==oe.node||Me.focusOffset!==oe.offset)){var _e=Qe.createRange();_e.setStart(pe.node,pe.offset),Me.removeAllRanges(),Mt>Vn?(Me.addRange(_e),Me.extend(oe.node,oe.offset)):(_e.setEnd(oe.node,oe.offset),Me.addRange(_e))}}}}for(Qe=[],Me=U;Me=Me.parentNode;)Me.nodeType===1&&Qe.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Qe.length;U++){var Ge=Qe[U];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}Zh=!!Mp,Ip=Mp=null}finally{En=v,ve.p=d,te.T=l}}n.current=r,Ms=2}}function e1(){if(Ms===2){Ms=0;var n=Fo,r=Ic,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=te.T,te.T=null;var d=ve.p;ve.p=2;var v=En;En|=4;try{k0(n,r.alternate,r)}finally{En=v,ve.p=d,te.T=l}}Ms=3}}function t1(){if(Ms===4||Ms===3){Ms=0,xt();var n=Fo,r=Ic,l=Ji,d=z0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ms=5:(Ms=0,Ic=Fo=null,n1(n,n.pendingLanes));var v=n.pendingLanes;if(v===0&&(zo=null),pt(l),r=r.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(et,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=te.T,v=ve.p,ve.p=2,te.T=null;try{for(var w=n.onRecoverableError,k=0;k<d.length;k++){var U=d[k];w(U.value,{componentStack:U.stack})}}finally{te.T=r,ve.p=v}}(Ji&3)!==0&&zh(),di(n),v=n.pendingLanes,(l&261930)!==0&&(v&42)!==0?n===xp?Gu++:(Gu=0,xp=n):Gu=0,Yu(0)}}function n1(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,Vl(r)))}function zh(){return Z0(),e1(),t1(),s1()}function s1(){if(Ms!==5)return!1;var n=Fo,r=vp;vp=0;var l=pt(Ji),d=te.T,v=ve.p;try{ve.p=32>l?32:l,te.T=null,l=bp,bp=null;var w=Fo,k=Ji;if(Ms=0,Ic=Fo=null,Ji=0,(En&6)!==0)throw Error(a(331));var U=En;if(En|=4,V0(w.current),O0(w,w.current,k,l),En=U,Yu(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(et,w)}catch{}return!0}finally{ve.p=v,te.T=d,n1(n,r)}}function r1(n,r,l){r=jr(l,r),r=Jm(n.stateNode,r,2),n=On(n,r,2),n!==null&&(Gn(n,2),di(n))}function Mn(n,r,l){if(n.tag===3)r1(n,n,l);else for(;r!==null;){if(r.tag===3){r1(r,n,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(zo===null||!zo.has(d))){n=jr(l,n),l=a0(2),d=On(r,l,2),d!==null&&(i0(l,d,r,n),Gn(d,2),di(d));break}}r=r.return}}function Sp(n,r,l){var d=n.pingCache;if(d===null){d=n.pingCache=new FS;var v=new Set;d.set(r,v)}else v=d.get(r),v===void 0&&(v=new Set,d.set(r,v));v.has(l)||(pp=!0,v.add(l),n=GS.bind(null,n,r,l),r.then(n,n))}function GS(n,r,l){var d=n.pingCache;d!==null&&d.delete(r),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,zn===n&&(on&l)===l&&(os===4||os===3&&(on&62914560)===on&&300>rt()-Oh?(En&2)===0&&Oc(n,0):gp|=l,Mc===on&&(Mc=0)),di(n)}function a1(n,r){r===0&&(r=pn()),n=ri(n,r),n!==null&&(Gn(n,r),di(n))}function YS(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),a1(n,l)}function KS(n,r){var l=0;switch(n.tag){case 31:case 13:var d=n.stateNode,v=n.memoizedState;v!==null&&(l=v.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(a(314))}d!==null&&d.delete(r),a1(n,l)}function QS(n,r){return $e(n,r)}var Fh=null,Lc=null,Tp=!1,qh=!1,Ep=!1,Ho=0;function di(n){n!==Lc&&n.next===null&&(Lc===null?Fh=Lc=n:Lc=Lc.next=n),qh=!0,Tp||(Tp=!0,JS())}function Yu(n,r){if(!Ep&&qh){Ep=!0;do for(var l=!1,d=Fh;d!==null;){if(n!==0){var v=d.pendingLanes;if(v===0)var w=0;else{var k=d.suspendedLanes,U=d.pingedLanes;w=(1<<31-_t(42|n)+1)-1,w&=v&~(k&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,c1(d,w))}else w=on,w=_n(d,d===zn?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||nn(d,w)||(l=!0,c1(d,w));d=d.next}while(l);Ep=!1}}function XS(){i1()}function i1(){qh=Tp=!1;var n=0;Ho!==0&&lT()&&(n=Ho);for(var r=rt(),l=null,d=Fh;d!==null;){var v=d.next,w=o1(d,r);w===0?(d.next=null,l===null?Fh=v:l.next=v,v===null&&(Lc=l)):(l=d,(n!==0||(w&3)!==0)&&(qh=!0)),d=v}Ms!==0&&Ms!==5||Yu(n),Ho!==0&&(Ho=0)}function o1(n,r){for(var l=n.suspendedLanes,d=n.pingedLanes,v=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var k=31-_t(w),U=1<<k,ne=v[k];ne===-1?((U&l)===0||(U&d)!==0)&&(v[k]=en(U,r)):ne<=r&&(n.expiredLanes|=U),w&=~U}if(r=zn,l=on,l=_n(n,n===r?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,l===0||n===r&&(Dn===2||Dn===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&Ve(d),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||nn(n,l)){if(r=l&-l,r===n.callbackPriority)return r;switch(d!==null&&Ve(d),pt(l)){case 2:case 8:l=Fn;break;case 32:l=Jn;break;case 268435456:l=ks;break;default:l=Jn}return d=l1.bind(null,n),l=$e(l,d),n.callbackPriority=r,n.callbackNode=l,r}return d!==null&&d!==null&&Ve(d),n.callbackPriority=2,n.callbackNode=null,2}function l1(n,r){if(Ms!==0&&Ms!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(zh()&&n.callbackNode!==l)return null;var d=on;return d=_n(n,n===zn?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(q0(n,d,r),o1(n,rt()),n.callbackNode!=null&&n.callbackNode===l?l1.bind(null,n):null)}function c1(n,r){if(zh())return null;q0(n,r,!0)}function JS(){uT(function(){(En&6)!==0?$e(vn,XS):i1()})}function Np(){if(Ho===0){var n=Oo;n===0&&(n=xe,xe<<=1,(xe&261888)===0&&(xe=256)),Ho=n}return Ho}function u1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:bo(""+n)}function d1(n,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,n.id&&l.setAttribute("form",n.id),r.parentNode.insertBefore(l,r),n=new FormData(n),l.parentNode.removeChild(l),n}function ZS(n,r,l,d,v){if(r==="submit"&&l&&l.stateNode===v){var w=u1((v[kn]||null).action),k=d.submitter;k&&(r=(r=k[kn]||null)?u1(r.formAction):k.getAttribute("formAction"),r!==null&&(w=r,k=null));var U=new vs("action","action",null,d,v);n.push({event:U,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ho!==0){var ne=k?d1(v,k):new FormData(v);Wm(l,{pending:!0,data:ne,method:v.method,action:w},null,ne)}}else typeof w=="function"&&(U.preventDefault(),ne=k?d1(v,k):new FormData(v),Wm(l,{pending:!0,data:ne,method:v.method,action:w},w,ne))},currentTarget:v}]})}}for(var jp=0;jp<vc.length;jp++){var kp=vc[jp],eT=kp.toLowerCase(),tT=kp[0].toUpperCase()+kp.slice(1);Cs(eT,"on"+tT)}Cs(ch,"onAnimationEnd"),Cs(uh,"onAnimationIteration"),Cs(dh,"onAnimationStart"),Cs("dblclick","onDoubleClick"),Cs("focusin","onFocus"),Cs("focusout","onBlur"),Cs(Am,"onTransitionRun"),Cs(Rm,"onTransitionStart"),Cs(Tu,"onTransitionCancel"),Cs(Eu,"onTransitionEnd"),Rt("onMouseEnter",["mouseout","mouseover"]),Rt("onMouseLeave",["mouseout","mouseover"]),Rt("onPointerEnter",["pointerout","pointerover"]),Rt("onPointerLeave",["pointerout","pointerover"]),cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function h1(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],v=d.event;d=d.listeners;e:{var w=void 0;if(r)for(var k=d.length-1;0<=k;k--){var U=d[k],ne=U.instance,we=U.currentTarget;if(U=U.listener,ne!==w&&v.isPropagationStopped())break e;w=U,v.currentTarget=we;try{w(v)}catch(qe){bc(qe)}v.currentTarget=null,w=ne}else for(k=0;k<d.length;k++){if(U=d[k],ne=U.instance,we=U.currentTarget,U=U.listener,ne!==w&&v.isPropagationStopped())break e;w=U,v.currentTarget=we;try{w(v)}catch(qe){bc(qe)}v.currentTarget=null,w=ne}}}}function rn(n,r){var l=r[ct];l===void 0&&(l=r[ct]=new Set);var d=n+"__bubble";l.has(d)||(f1(r,n,2,!1),l.add(d))}function Cp(n,r,l){var d=0;r&&(d|=4),f1(l,n,d,r)}var Hh="_reactListening"+Math.random().toString(36).slice(2);function Ap(n){if(!n[Hh]){n[Hh]=!0,qa.forEach(function(l){l!=="selectionchange"&&(nT.has(l)||Cp(l,!1,n),Cp(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Hh]||(r[Hh]=!0,Cp("selectionchange",!1,r))}}function f1(n,r,l,d){switch(F1(r)){case 2:var v=AT;break;case 8:v=RT;break;default:v=$p}l=v.bind(null,r,l,n),v=void 0,!Ci||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),d?v!==void 0?n.addEventListener(r,l,{capture:!0,passive:v}):n.addEventListener(r,l,!0):v!==void 0?n.addEventListener(r,l,{passive:v}):n.addEventListener(r,l,!1)}function Rp(n,r,l,d,v){var w=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var k=d.tag;if(k===3||k===4){var U=d.stateNode.containerInfo;if(U===v)break;if(k===4)for(k=d.return;k!==null;){var ne=k.tag;if((ne===3||ne===4)&&k.stateNode.containerInfo===v)return;k=k.return}for(;U!==null;){if(k=cs(U),k===null)return;if(ne=k.tag,ne===5||ne===6||ne===26||ne===27){d=w=k;continue e}U=U.parentNode}}d=d.return}Xa(function(){var we=w,qe=Tr(l),Qe=[];e:{var Ne=hh.get(n);if(Ne!==void 0){var Me=vs,bt=n;switch(n){case"keypress":if(Ja(l)===0)break e;case"keydown":case"keyup":Me=pc;break;case"focusin":bt="focus",Me=ei;break;case"focusout":bt="blur",Me=ei;break;case"beforeblur":case"afterblur":Me=ei;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=Gt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=us;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=j;break;case ch:case uh:case dh:Me=hc;break;case Eu:Me=W;break;case"scroll":case"scrollend":Me=Kn;break;case"wheel":Me=Ae;break;case"copy":case"cut":case"paste":Me=fc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=Ea;break;case"toggle":case"beforetoggle":Me=qt}var Mt=(r&4)!==0,Vn=!Mt&&(n==="scroll"||n==="scrollend"),pe=Mt?Ne!==null?Ne+"Capture":null:Ne;Mt=[];for(var oe=we,_e;oe!==null;){var Ge=oe;if(_e=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||_e===null||pe===null||(Ge=Fr(oe,pe),Ge!=null&&Mt.push(Qu(oe,Ge,_e))),Vn)break;oe=oe.return}0<Mt.length&&(Ne=new Me(Ne,bt,null,l,qe),Qe.push({event:Ne,listeners:Mt}))}}if((r&7)===0){e:{if(Ne=n==="mouseover"||n==="pointerover",Me=n==="mouseout"||n==="pointerout",Ne&&l!==Sl&&(bt=l.relatedTarget||l.fromElement)&&(cs(bt)||bt[he]))break e;if((Me||Ne)&&(Ne=qe.window===qe?qe:(Ne=qe.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Me?(bt=l.relatedTarget||l.toElement,Me=we,bt=bt?cs(bt):null,bt!==null&&(Vn=c(bt),Mt=bt.tag,bt!==Vn||Mt!==5&&Mt!==27&&Mt!==6)&&(bt=null)):(Me=null,bt=we),Me!==bt)){if(Mt=Gt,Ge="onMouseLeave",pe="onMouseEnter",oe="mouse",(n==="pointerout"||n==="pointerover")&&(Mt=Ea,Ge="onPointerLeave",pe="onPointerEnter",oe="pointer"),Vn=Me==null?Ne:ns(Me),_e=bt==null?Ne:ns(bt),Ne=new Mt(Ge,oe+"leave",Me,l,qe),Ne.target=Vn,Ne.relatedTarget=_e,Ge=null,cs(qe)===we&&(Mt=new Mt(pe,oe+"enter",bt,l,qe),Mt.target=_e,Mt.relatedTarget=Vn,Ge=Mt),Vn=Ge,Me&&bt)t:{for(Mt=sT,pe=Me,oe=bt,_e=0,Ge=pe;Ge;Ge=Mt(Ge))_e++;Ge=0;for(var kt=oe;kt;kt=Mt(kt))Ge++;for(;0<_e-Ge;)pe=Mt(pe),_e--;for(;0<Ge-_e;)oe=Mt(oe),Ge--;for(;_e--;){if(pe===oe||oe!==null&&pe===oe.alternate){Mt=pe;break t}pe=Mt(pe),oe=Mt(oe)}Mt=null}else Mt=null;Me!==null&&m1(Qe,Ne,Me,Mt,!1),bt!==null&&Vn!==null&&m1(Qe,Vn,bt,Mt,!0)}}e:{if(Ne=we?ns(we):window,Me=Ne.nodeName&&Ne.nodeName.toLowerCase(),Me==="select"||Me==="input"&&Ne.type==="file")var bn=sh;else if(th(Ne))if(yu)bn=ih;else{bn=ah;var St=jm}else Me=Ne.nodeName,!Me||Me.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?we&&vo(we.elementType)&&(bn=sh):bn=Al;if(bn&&(bn=bn(n,we))){gu(Qe,bn,l,qe);break e}St&&St(n,Ne,we),n==="focusout"&&we&&Ne.type==="number"&&we.memoizedProps.value!=null&&xl(Ne,"number",Ne.value)}switch(St=we?ns(we):window,n){case"focusin":(th(St)||St.contentEditable==="true")&&(Ii=St,jo=we,ti=null);break;case"focusout":ti=jo=Ii=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,lh(Qe,l,qe);break;case"selectionchange":if(Cm)break;case"keydown":case"keyup":lh(Qe,l,qe)}var Qt;if(gn)e:{switch(n){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else Mi?Na(n,l)&&(ln="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(ln="onCompositionStart");ln&&(la&&l.locale!=="ko"&&(Mi||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&Mi&&(Qt=xo()):(ra=qe,Tl="value"in ra?ra.value:ra.textContent,Mi=!0)),St=$h(we,ln),0<St.length&&(ln=new oa(ln,n,null,l,qe),Qe.push({event:ln,listeners:St}),Qt?ln.data=Qt:(Qt=Di(l),Qt!==null&&(ln.data=Qt)))),(Qt=Er?eh(n,l):pu(n,l))&&(ln=$h(we,"onBeforeInput"),0<ln.length&&(St=new oa("onBeforeInput","beforeinput",null,l,qe),Qe.push({event:St,listeners:ln}),St.data=Qt)),ZS(Qe,n,we,l,qe)}h1(Qe,r)})}function Qu(n,r,l){return{instance:n,listener:r,currentTarget:l}}function $h(n,r){for(var l=r+"Capture",d=[];n!==null;){var v=n,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Fr(n,l),v!=null&&d.unshift(Qu(n,v,w)),v=Fr(n,r),v!=null&&d.push(Qu(n,v,w))),n.tag===3)return d;n=n.return}return[]}function sT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function m1(n,r,l,d,v){for(var w=r._reactName,k=[];l!==null&&l!==d;){var U=l,ne=U.alternate,we=U.stateNode;if(U=U.tag,ne!==null&&ne===d)break;U!==5&&U!==26&&U!==27||we===null||(ne=we,v?(we=Fr(l,w),we!=null&&k.unshift(Qu(l,we,ne))):v||(we=Fr(l,w),we!=null&&k.push(Qu(l,we,ne)))),l=l.return}k.length!==0&&n.push({event:r,listeners:k})}var rT=/\r\n?/g,aT=/\u0000|\uFFFD/g;function p1(n){return(typeof n=="string"?n:""+n).replace(rT,`
`).replace(aT,"")}function g1(n,r){return r=p1(r),p1(n)===r}function Ln(n,r,l,d,v,w){switch(l){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Js(n,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Js(n,""+d);break;case"className":Qs(n,"class",d);break;case"tabIndex":Qs(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Qs(n,l,d);break;case"style":wl(n,d,w);break;case"data":if(r!=="object"){Qs(n,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||l!=="href")){n.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=bo(""+d),n.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(r!=="input"&&Ln(n,r,"name",v.name,v,null),Ln(n,r,"formEncType",v.formEncType,v,null),Ln(n,r,"formMethod",v.formMethod,v,null),Ln(n,r,"formTarget",v.formTarget,v,null)):(Ln(n,r,"encType",v.encType,v,null),Ln(n,r,"method",v.method,v,null),Ln(n,r,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=bo(""+d),n.setAttribute(l,d);break;case"onClick":d!=null&&(n.onclick=zr);break;case"onScroll":d!=null&&rn("scroll",n);break;case"onScrollEnd":d!=null&&rn("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}l=bo(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""+d):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":d===!0?n.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,d):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(l,d):n.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(l):n.setAttribute(l,d);break;case"popover":rn("beforetoggle",n),rn("toggle",n),Ha(n,"popover",d);break;case"xlinkActuate":ss(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ss(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ss(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ss(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ss(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ss(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ss(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ss(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ss(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ha(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=dc.get(l)||l,Ha(n,l,d))}}function Dp(n,r,l,d,v,w){switch(l){case"style":wl(n,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof d=="string"?Js(n,d):(typeof d=="number"||typeof d=="bigint")&&Js(n,""+d);break;case"onScroll":d!=null&&rn("scroll",n);break;case"onScrollEnd":d!=null&&rn("scrollend",n);break;case"onClick":d!=null&&(n.onclick=zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ti.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),r=l.slice(2,v?l.length-7:void 0),w=n[kn]||null,w=w!=null?w[l]:null,typeof w=="function"&&n.removeEventListener(r,w,v),typeof d=="function")){typeof w!="function"&&w!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(r,d,v);break e}l in n?n[l]=d:d===!0?n.setAttribute(l,""):Ha(n,l,d)}}}function Ws(n,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rn("error",n),rn("load",n);var d=!1,v=!1,w;for(w in l)if(l.hasOwnProperty(w)){var k=l[w];if(k!=null)switch(w){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Ln(n,r,w,k,l,null)}}v&&Ln(n,r,"srcSet",l.srcSet,l,null),d&&Ln(n,r,"src",l.src,l,null);return;case"input":rn("invalid",n);var U=w=k=v=null,ne=null,we=null;for(d in l)if(l.hasOwnProperty(d)){var qe=l[d];if(qe!=null)switch(d){case"name":v=qe;break;case"type":k=qe;break;case"checked":ne=qe;break;case"defaultChecked":we=qe;break;case"value":w=qe;break;case"defaultValue":U=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(a(137,r));break;default:Ln(n,r,d,qe,l,null)}}lc(n,w,U,ne,we,k,v,!1);return;case"select":rn("invalid",n),d=k=w=null;for(v in l)if(l.hasOwnProperty(v)&&(U=l[v],U!=null))switch(v){case"value":w=U;break;case"defaultValue":k=U;break;case"multiple":d=U;default:Ln(n,r,v,U,l,null)}r=w,l=k,n.multiple=!!d,r!=null?Wa(n,!!d,r,!1):l!=null&&Wa(n,!!d,l,!0);return;case"textarea":rn("invalid",n),w=v=d=null;for(k in l)if(l.hasOwnProperty(k)&&(U=l[k],U!=null))switch(k){case"value":d=U;break;case"defaultValue":v=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(a(91));break;default:Ln(n,r,k,U,l,null)}Ga(n,d,v,w);return;case"option":for(ne in l)l.hasOwnProperty(ne)&&(d=l[ne],d!=null)&&(ne==="selected"?n.selected=d&&typeof d!="function"&&typeof d!="symbol":Ln(n,r,ne,d,l,null));return;case"dialog":rn("beforetoggle",n),rn("toggle",n),rn("cancel",n),rn("close",n);break;case"iframe":case"object":rn("load",n);break;case"video":case"audio":for(d=0;d<Ku.length;d++)rn(Ku[d],n);break;case"image":rn("error",n),rn("load",n);break;case"details":rn("toggle",n);break;case"embed":case"source":case"link":rn("error",n),rn("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in l)if(l.hasOwnProperty(we)&&(d=l[we],d!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:Ln(n,r,we,d,l,null)}return;default:if(vo(r)){for(qe in l)l.hasOwnProperty(qe)&&(d=l[qe],d!==void 0&&Dp(n,r,qe,d,l,void 0));return}}for(U in l)l.hasOwnProperty(U)&&(d=l[U],d!=null&&Ln(n,r,U,d,l,null))}function iT(n,r,l,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,k=null,U=null,ne=null,we=null,qe=null;for(Me in l){var Qe=l[Me];if(l.hasOwnProperty(Me)&&Qe!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":ne=Qe;default:d.hasOwnProperty(Me)||Ln(n,r,Me,null,d,Qe)}}for(var Ne in d){var Me=d[Ne];if(Qe=l[Ne],d.hasOwnProperty(Ne)&&(Me!=null||Qe!=null))switch(Ne){case"type":w=Me;break;case"name":v=Me;break;case"checked":we=Me;break;case"defaultChecked":qe=Me;break;case"value":k=Me;break;case"defaultValue":U=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(a(137,r));break;default:Me!==Qe&&Ln(n,r,Ne,Me,d,Qe)}}yo(n,k,U,ne,we,qe,w,v);return;case"select":Me=k=U=Ne=null;for(w in l)if(ne=l[w],l.hasOwnProperty(w)&&ne!=null)switch(w){case"value":break;case"multiple":Me=ne;default:d.hasOwnProperty(w)||Ln(n,r,w,null,d,ne)}for(v in d)if(w=d[v],ne=l[v],d.hasOwnProperty(v)&&(w!=null||ne!=null))switch(v){case"value":Ne=w;break;case"defaultValue":U=w;break;case"multiple":k=w;default:w!==ne&&Ln(n,r,v,w,d,ne)}r=U,l=k,d=Me,Ne!=null?Wa(n,!!l,Ne,!1):!!d!=!!l&&(r!=null?Wa(n,!!l,r,!0):Wa(n,!!l,l?[]:"",!1));return;case"textarea":Me=Ne=null;for(U in l)if(v=l[U],l.hasOwnProperty(U)&&v!=null&&!d.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Ln(n,r,U,null,d,v)}for(k in d)if(v=d[k],w=l[k],d.hasOwnProperty(k)&&(v!=null||w!=null))switch(k){case"value":Ne=v;break;case"defaultValue":Me=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(a(91));break;default:v!==w&&Ln(n,r,k,v,d,w)}cc(n,Ne,Me);return;case"option":for(var bt in l)Ne=l[bt],l.hasOwnProperty(bt)&&Ne!=null&&!d.hasOwnProperty(bt)&&(bt==="selected"?n.selected=!1:Ln(n,r,bt,null,d,Ne));for(ne in d)Ne=d[ne],Me=l[ne],d.hasOwnProperty(ne)&&Ne!==Me&&(Ne!=null||Me!=null)&&(ne==="selected"?n.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol":Ln(n,r,ne,Ne,d,Me));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in l)Ne=l[Mt],l.hasOwnProperty(Mt)&&Ne!=null&&!d.hasOwnProperty(Mt)&&Ln(n,r,Mt,null,d,Ne);for(we in d)if(Ne=d[we],Me=l[we],d.hasOwnProperty(we)&&Ne!==Me&&(Ne!=null||Me!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(a(137,r));break;default:Ln(n,r,we,Ne,d,Me)}return;default:if(vo(r)){for(var Vn in l)Ne=l[Vn],l.hasOwnProperty(Vn)&&Ne!==void 0&&!d.hasOwnProperty(Vn)&&Dp(n,r,Vn,void 0,d,Ne);for(qe in d)Ne=d[qe],Me=l[qe],!d.hasOwnProperty(qe)||Ne===Me||Ne===void 0&&Me===void 0||Dp(n,r,qe,Ne,d,Me);return}}for(var pe in l)Ne=l[pe],l.hasOwnProperty(pe)&&Ne!=null&&!d.hasOwnProperty(pe)&&Ln(n,r,pe,null,d,Ne);for(Qe in d)Ne=d[Qe],Me=l[Qe],!d.hasOwnProperty(Qe)||Ne===Me||Ne==null&&Me==null||Ln(n,r,Qe,Ne,d,Me)}function y1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var v=l[d],w=v.transferSize,k=v.initiatorType,U=v.duration;if(w&&U&&y1(k)){for(k=0,U=v.responseEnd,d+=1;d<l.length;d++){var ne=l[d],we=ne.startTime;if(we>U)break;var qe=ne.transferSize,Qe=ne.initiatorType;qe&&y1(Qe)&&(ne=ne.responseEnd,k+=qe*(ne<U?1:(U-we)/(ne-we)))}if(--d,r+=8*(w+k)/(v.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Mp=null,Ip=null;function Wh(n){return n.nodeType===9?n:n.ownerDocument}function v1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b1(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Op(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pp=null;function lT(){var n=window.event;return n&&n.type==="popstate"?n===Pp?!1:(Pp=n,!0):(Pp=null,!1)}var x1=typeof setTimeout=="function"?setTimeout:void 0,cT=typeof clearTimeout=="function"?clearTimeout:void 0,_1=typeof Promise=="function"?Promise:void 0,uT=typeof queueMicrotask=="function"?queueMicrotask:typeof _1<"u"?function(n){return _1.resolve(null).then(n).catch(dT)}:x1;function dT(n){setTimeout(function(){throw n})}function $o(n){return n==="head"}function w1(n,r){var l=r,d=0;do{var v=l.nextSibling;if(n.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(d===0){n.removeChild(v),zc(r);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Xu(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Xu(l);for(var w=l.firstChild;w;){var k=w.nextSibling,U=w.nodeName;w[Cn]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=k}}else l==="body"&&Xu(n.ownerDocument.body);l=v}while(l);zc(r)}function S1(n,r){var l=n;n=0;do{var d=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=d}while(l)}function Lp(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Lp(l),Bn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function hT(n,r,l,d){for(;n.nodeType===1;){var v=l;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Cn])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==v.rel||n.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||n.getAttribute("title")!==(v.title==null?null:v.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(v.src==null?null:v.src)||n.getAttribute("type")!==(v.type==null?null:v.type)||n.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=ya(n.nextSibling),n===null)break}return null}function fT(n,r,l){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=ya(n.nextSibling),n===null))return null;return n}function T1(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=ya(n.nextSibling),n===null))return null;return n}function Vp(n){return n.data==="$?"||n.data==="$~"}function Up(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function mT(n,r){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||l.readyState!=="loading")r();else{var d=function(){r(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function ya(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Bp=null;function E1(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(r===0)return ya(n.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}n=n.nextSibling}return null}function N1(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return n;r--}else l!=="/$"&&l!=="/&"||r++}n=n.previousSibling}return null}function j1(n,r,l){switch(r=Wh(l),n){case"html":if(n=r.documentElement,!n)throw Error(a(452));return n;case"head":if(n=r.head,!n)throw Error(a(453));return n;case"body":if(n=r.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Xu(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Bn(n)}var va=new Map,k1=new Set;function Gh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Zi=ve.d;ve.d={f:pT,r:gT,D:yT,C:vT,L:bT,m:xT,X:wT,S:_T,M:ST};function pT(){var n=Zi.f(),r=Vh();return n||r}function gT(n){var r=ys(n);r!==null&&r.tag===5&&r.type==="form"?$v(r):Zi.r(n)}var Vc=typeof document>"u"?null:document;function C1(n,r,l){var d=Vc;if(d&&typeof r=="string"&&r){var v=Xs(r);v='link[rel="'+n+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),k1.has(v)||(k1.add(v),n={rel:n,crossOrigin:l,href:r},d.querySelector(v)===null&&(r=d.createElement("link"),Ws(r,"link",n),Hn(r),d.head.appendChild(r)))}}function yT(n){Zi.D(n),C1("dns-prefetch",n,null)}function vT(n,r){Zi.C(n,r),C1("preconnect",n,r)}function bT(n,r,l){Zi.L(n,r,l);var d=Vc;if(d&&n&&r){var v='link[rel="preload"][as="'+Xs(r)+'"]';r==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Xs(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Xs(l.imageSizes)+'"]')):v+='[href="'+Xs(n)+'"]';var w=v;switch(r){case"style":w=Uc(n);break;case"script":w=Bc(n)}va.has(w)||(n=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:n,as:r},l),va.set(w,n),d.querySelector(v)!==null||r==="style"&&d.querySelector(Ju(w))||r==="script"&&d.querySelector(Zu(w))||(r=d.createElement("link"),Ws(r,"link",n),Hn(r),d.head.appendChild(r)))}}function xT(n,r){Zi.m(n,r);var l=Vc;if(l&&n){var d=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+Xs(d)+'"][href="'+Xs(n)+'"]',w=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Bc(n)}if(!va.has(w)&&(n=E({rel:"modulepreload",href:n},r),va.set(w,n),l.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Zu(w)))return}d=l.createElement("link"),Ws(d,"link",n),Hn(d),l.head.appendChild(d)}}}function _T(n,r,l){Zi.S(n,r,l);var d=Vc;if(d&&n){var v=Ps(d).hoistableStyles,w=Uc(n);r=r||"default";var k=v.get(w);if(!k){var U={loading:0,preload:null};if(k=d.querySelector(Ju(w)))U.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},l),(l=va.get(w))&&zp(n,l);var ne=k=d.createElement("link");Hn(ne),Ws(ne,"link",n),ne._p=new Promise(function(we,qe){ne.onload=we,ne.onerror=qe}),ne.addEventListener("load",function(){U.loading|=1}),ne.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Yh(k,r,d)}k={type:"stylesheet",instance:k,count:1,state:U},v.set(w,k)}}}function wT(n,r){Zi.X(n,r);var l=Vc;if(l&&n){var d=Ps(l).hoistableScripts,v=Bc(n),w=d.get(v);w||(w=l.querySelector(Zu(v)),w||(n=E({src:n,async:!0},r),(r=va.get(v))&&Fp(n,r),w=l.createElement("script"),Hn(w),Ws(w,"link",n),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function ST(n,r){Zi.M(n,r);var l=Vc;if(l&&n){var d=Ps(l).hoistableScripts,v=Bc(n),w=d.get(v);w||(w=l.querySelector(Zu(v)),w||(n=E({src:n,async:!0,type:"module"},r),(r=va.get(v))&&Fp(n,r),w=l.createElement("script"),Hn(w),Ws(w,"link",n),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function A1(n,r,l,d){var v=(v=Be.current)?Gh(v):null;if(!v)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Uc(l.href),l=Ps(v).hoistableStyles,d=l.get(r),d||(d={type:"style",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Uc(l.href);var w=Ps(v).hoistableStyles,k=w.get(n);if(k||(v=v.ownerDocument||v,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,k),(w=v.querySelector(Ju(n)))&&!w._p&&(k.instance=w,k.state.loading=5),va.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},va.set(n,l),w||TT(v,n,l,k.state))),r&&d===null)throw Error(a(528,""));return k}if(r&&d!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Bc(l),l=Ps(v).hoistableScripts,d=l.get(r),d||(d={type:"script",instance:null,count:0,state:null},l.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Uc(n){return'href="'+Xs(n)+'"'}function Ju(n){return'link[rel="stylesheet"]['+n+"]"}function R1(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function TT(n,r,l,d){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=n.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),Ws(r,"link",l),Hn(r),n.head.appendChild(r))}function Bc(n){return'[src="'+Xs(n)+'"]'}function Zu(n){return"script[async]"+n}function D1(n,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var d=n.querySelector('style[data-href~="'+Xs(l.href)+'"]');if(d)return r.instance=d,Hn(d),d;var v=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),Hn(d),Ws(d,"style",v),Yh(d,l.precedence,n),r.instance=d;case"stylesheet":v=Uc(l.href);var w=n.querySelector(Ju(v));if(w)return r.state.loading|=4,r.instance=w,Hn(w),w;d=R1(l),(v=va.get(v))&&zp(d,v),w=(n.ownerDocument||n).createElement("link"),Hn(w);var k=w;return k._p=new Promise(function(U,ne){k.onload=U,k.onerror=ne}),Ws(w,"link",d),r.state.loading|=4,Yh(w,l.precedence,n),r.instance=w;case"script":return w=Bc(l.src),(v=n.querySelector(Zu(w)))?(r.instance=v,Hn(v),v):(d=l,(v=va.get(w))&&(d=E({},l),Fp(d,v)),n=n.ownerDocument||n,v=n.createElement("script"),Hn(v),Ws(v,"link",d),n.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,Yh(d,l.precedence,n));return r.instance}function Yh(n,r,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,w=v,k=0;k<d.length;k++){var U=d[k];if(U.dataset.precedence===r)w=U;else if(w!==v)break}w?w.parentNode.insertBefore(n,w.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(n,r.firstChild))}function zp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Fp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Kh=null;function M1(n,r,l){if(Kh===null){var d=new Map,v=Kh=new Map;v.set(l,d)}else v=Kh,d=v.get(l),d||(d=new Map,v.set(l,d));if(d.has(n))return d;for(d.set(n,null),l=l.getElementsByTagName(n),v=0;v<l.length;v++){var w=l[v];if(!(w[Cn]||w[Wt]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var k=w.getAttribute(r)||"";k=n+k;var U=d.get(k);U?U.push(w):d.set(k,[w])}}return d}function I1(n,r,l){n=n.ownerDocument||n,n.head.insertBefore(l,r==="title"?n.querySelector("head > title"):null)}function ET(n,r,l){if(l===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function O1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function NT(n,r,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Uc(d.href),w=r.querySelector(Ju(v));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Qh.bind(n),r.then(n,n)),l.state.loading|=4,l.instance=w,Hn(w);return}w=r.ownerDocument||r,d=R1(d),(v=va.get(v))&&zp(d,v),w=w.createElement("link"),Hn(w);var k=w;k._p=new Promise(function(U,ne){k.onload=U,k.onerror=ne}),Ws(w,"link",d),l.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=Qh.bind(n),r.addEventListener("load",l),r.addEventListener("error",l))}}var qp=0;function jT(n,r){return n.stylesheets&&n.count===0&&Jh(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var d=setTimeout(function(){if(n.stylesheets&&Jh(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+r);0<n.imgBytes&&qp===0&&(qp=62500*oT());var v=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Jh(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>qp?50:800)+r);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function Qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Xh=null;function Jh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Xh=new Map,r.forEach(kT,n),Xh=null,Qh.call(n))}function kT(n,r){if(!(r.state.loading&4)){var l=Xh.get(n);if(l)var d=l.get(null);else{l=new Map,Xh.set(n,l);for(var v=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var k=v[w];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(l.set(k.dataset.precedence,k),d=k)}d&&l.set(null,d)}v=r.instance,k=v.getAttribute("data-precedence"),w=l.get(k)||d,w===d&&l.set(null,v),l.set(k,v),this.count++,d=Qh.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),w?w.parentNode.insertBefore(v,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(v,n.firstChild)),r.state.loading|=4}}var ed={$$typeof:se,Provider:null,Consumer:null,_currentValue:Le,_currentValue2:Le,_threadCount:0};function CT(n,r,l,d,v,w,k,U,ne){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wn(0),this.hiddenUpdates=wn(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function P1(n,r,l,d,v,w,k,U,ne,we,qe,Qe){return n=new CT(n,r,l,k,ne,we,qe,Qe,U),r=1,w===!0&&(r|=24),w=As(3,null,null,r),n.current=w,w.stateNode=n,r=Iu(),r.refCount++,n.pooledCache=r,r.refCount++,w.memoizedState={element:d,isDehydrated:l,cache:r},Zt(w),n}function L1(n){return n?(n=Li,n):Li}function V1(n,r,l,d,v,w){v=L1(v),d.context===null?d.context=v:d.pendingContext=v,d=xs(r),d.payload={element:l},w=w===void 0?null:w,w!==null&&(d.callback=w),l=On(n,d,r),l!==null&&(Pr(l,n,r),Aa(l,n,r))}function U1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function Hp(n,r){U1(n,r),(n=n.alternate)&&U1(n,r)}function B1(n){if(n.tag===13||n.tag===31){var r=ri(n,67108864);r!==null&&Pr(r,n,67108864),Hp(n,67108864)}}function z1(n){if(n.tag===13||n.tag===31){var r=Zr();r=Ze(r);var l=ri(n,r);l!==null&&Pr(l,n,r),Hp(n,r)}}var Zh=!0;function AT(n,r,l,d){var v=te.T;te.T=null;var w=ve.p;try{ve.p=2,$p(n,r,l,d)}finally{ve.p=w,te.T=v}}function RT(n,r,l,d){var v=te.T;te.T=null;var w=ve.p;try{ve.p=8,$p(n,r,l,d)}finally{ve.p=w,te.T=v}}function $p(n,r,l,d){if(Zh){var v=Wp(d);if(v===null)Rp(n,r,d,ef,l),q1(n,d);else if(MT(v,n,r,l,d))d.stopPropagation();else if(q1(n,d),r&4&&-1<DT.indexOf(n)){for(;v!==null;){var w=ys(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var k=Pt(w.pendingLanes);if(k!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;k;){var ne=1<<31-_t(k);U.entanglements[1]|=ne,k&=~ne}di(w),(En&6)===0&&(Ph=rt()+500,Yu(0))}}break;case 31:case 13:U=ri(w,2),U!==null&&Pr(U,w,2),Vh(),Hp(w,2)}if(w=Wp(d),w===null&&Rp(n,r,d,ef,l),w===v)break;v=w}v!==null&&d.stopPropagation()}else Rp(n,r,d,null,l)}}function Wp(n){return n=Tr(n),Gp(n)}var ef=null;function Gp(n){if(ef=null,n=cs(n),n!==null){var r=c(n);if(r===null)n=null;else{var l=r.tag;if(l===13){if(n=u(r),n!==null)return n;n=null}else if(l===31){if(n=f(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return ef=n,null}function F1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tn()){case vn:return 2;case Fn:return 8;case Jn:case qn:return 32;case ks:return 268435456;default:return 32}default:return 32}}var Yp=!1,Wo=null,Go=null,Yo=null,td=new Map,nd=new Map,Ko=[],DT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q1(n,r){switch(n){case"focusin":case"focusout":Wo=null;break;case"dragenter":case"dragleave":Go=null;break;case"mouseover":case"mouseout":Yo=null;break;case"pointerover":case"pointerout":td.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":nd.delete(r.pointerId)}}function sd(n,r,l,d,v,w){return n===null||n.nativeEvent!==w?(n={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:w,targetContainers:[v]},r!==null&&(r=ys(r),r!==null&&B1(r)),n):(n.eventSystemFlags|=d,r=n.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),n)}function MT(n,r,l,d,v){switch(r){case"focusin":return Wo=sd(Wo,n,r,l,d,v),!0;case"dragenter":return Go=sd(Go,n,r,l,d,v),!0;case"mouseover":return Yo=sd(Yo,n,r,l,d,v),!0;case"pointerover":var w=v.pointerId;return td.set(w,sd(td.get(w)||null,n,r,l,d,v)),!0;case"gotpointercapture":return w=v.pointerId,nd.set(w,sd(nd.get(w)||null,n,r,l,d,v)),!0}return!1}function H1(n){var r=cs(n.target);if(r!==null){var l=c(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){n.blockedOn=r,Ut(n.priority,function(){z1(l)});return}}else if(r===31){if(r=f(l),r!==null){n.blockedOn=r,Ut(n.priority,function(){z1(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function tf(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=Wp(n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);Sl=d,l.target.dispatchEvent(d),Sl=null}else return r=ys(l),r!==null&&B1(r),n.blockedOn=l,!1;r.shift()}return!0}function $1(n,r,l){tf(n)&&l.delete(r)}function IT(){Yp=!1,Wo!==null&&tf(Wo)&&(Wo=null),Go!==null&&tf(Go)&&(Go=null),Yo!==null&&tf(Yo)&&(Yo=null),td.forEach($1),nd.forEach($1)}function nf(n,r){n.blockedOn===r&&(n.blockedOn=null,Yp||(Yp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,IT)))}var sf=null;function W1(n){sf!==n&&(sf=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){sf===n&&(sf=null);for(var r=0;r<n.length;r+=3){var l=n[r],d=n[r+1],v=n[r+2];if(typeof d!="function"){if(Gp(d||l)===null)continue;break}var w=ys(l);w!==null&&(n.splice(r,3),r-=3,Wm(w,{pending:!0,data:v,method:l.method,action:d},d,v))}}))}function zc(n){function r(ne){return nf(ne,n)}Wo!==null&&nf(Wo,n),Go!==null&&nf(Go,n),Yo!==null&&nf(Yo,n),td.forEach(r),nd.forEach(r);for(var l=0;l<Ko.length;l++){var d=Ko[l];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Ko.length&&(l=Ko[0],l.blockedOn===null);)H1(l),l.blockedOn===null&&Ko.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var v=l[d],w=l[d+1],k=v[kn]||null;if(typeof w=="function")k||W1(l);else if(k){var U=null;if(w&&w.hasAttribute("formAction")){if(v=w,k=w[kn]||null)U=k.formAction;else if(Gp(v)!==null)continue}else U=k.action;typeof U=="function"?l[d+1]=U:(l.splice(d,3),d-=3),W1(l)}}}function G1(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(k){return v=k})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function Kp(n){this._internalRoot=n}rf.prototype.render=Kp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,d=Zr();V1(l,d,n,r,null,null)},rf.prototype.unmount=Kp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;V1(n.current,2,null,n,null,null),Vh(),r[he]=null}};function rf(n){this._internalRoot=n}rf.prototype.unstable_scheduleHydration=function(n){if(n){var r=wt();n={blockedOn:null,target:n,priority:r};for(var l=0;l<Ko.length&&r!==0&&r<Ko[l].priority;l++);Ko.splice(l,0,n),l===0&&H1(n)}};var Y1=e.version;if(Y1!=="19.2.4")throw Error(a(527,Y1,"19.2.4"));ve.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=b(r),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var OT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{et=af.inject(OT),at=af}catch{}}return ad.createRoot=function(n,r){if(!i(n))throw Error(a(299));var l=!1,d="",v=t0,w=n0,k=s0;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(k=r.onRecoverableError)),r=P1(n,1,!1,null,null,l,d,null,v,w,k,G1),n[he]=r.current,Ap(n),new Kp(r)},ad.hydrateRoot=function(n,r,l){if(!i(n))throw Error(a(299));var d=!1,v="",w=t0,k=n0,U=s0,ne=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(k=l.onCaughtError),l.onRecoverableError!==void 0&&(U=l.onRecoverableError),l.formState!==void 0&&(ne=l.formState)),r=P1(n,1,!0,r,l??null,d,v,ne,w,k,U,G1),r.context=L1(null),l=r.current,d=Zr(),d=Ze(d),v=xs(d),v.callback=null,On(l,v,d),l=d,r.current.lanes=l,Gn(r,l),di(r),n[he]=r.current,Ap(n),new rf(r)},ad.version="19.2.4",ad}var rb;function WT(){if(rb)return Jp.exports;rb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Jp.exports=$T(),Jp.exports}var GT=WT();var ab="popstate";function YT(s={}){function e(a,i){let{pathname:c,search:u,hash:f}=a.location;return Ng("",{pathname:c,search:u,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(a,i){return typeof i=="string"?i:kd(i)}return QT(e,t,null,s)}function Xn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ua(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KT(){return Math.random().toString(36).substring(2,10)}function ib(s,e){return{usr:s.state,key:s.key,idx:e}}function Ng(s,e,t=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?iu(e):e,state:t,key:e&&e.key||a||KT()}}function kd({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function iu(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function QT(s,e,t,a={}){let{window:i=document.defaultView,v5Compat:c=!1}=a,u=i.history,f="POP",m=null,b=T();b==null&&(b=0,u.replaceState({...u.state,idx:b},""));function T(){return(u.state||{idx:null}).idx}function E(){f="POP";let F=T(),K=F==null?null:F-b;b=F,m&&m({action:f,location:V.location,delta:K})}function C(F,K){f="PUSH";let G=Ng(V.location,F,K);b=T()+1;let se=ib(G,b),Y=V.createHref(G);try{u.pushState(se,"",Y)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;i.location.assign(Y)}c&&m&&m({action:f,location:V.location,delta:1})}function L(F,K){f="REPLACE";let G=Ng(V.location,F,K);b=T();let se=ib(G,b),Y=V.createHref(G);u.replaceState(se,"",Y),c&&m&&m({action:f,location:V.location,delta:0})}function P(F){return XT(F)}let V={get action(){return f},get location(){return s(i,u)},listen(F){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(ab,E),m=F,()=>{i.removeEventListener(ab,E),m=null}},createHref(F){return e(i,F)},createURL:P,encodeLocation(F){let K=P(F);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:C,replace:L,go(F){return u.go(F)}};return V}function XT(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Xn(t,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:kd(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function d_(s,e,t="/"){return JT(s,e,t,!1)}function JT(s,e,t,a){let i=typeof e=="string"?iu(e):e,c=oo(i.pathname||"/",t);if(c==null)return null;let u=h_(s);ZT(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let b=uE(c);f=lE(u[m],b,a)}return f}function h_(s,e=[],t=[],a="",i=!1){let c=(u,f,m=i,b)=>{let T={relativePath:b===void 0?u.path||"":b,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(T.relativePath.startsWith("/")){if(!T.relativePath.startsWith(a)&&m)return;Xn(T.relativePath.startsWith(a),`Absolute route path "${T.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),T.relativePath=T.relativePath.slice(a.length)}let E=ro([a,T.relativePath]),C=t.concat(T);u.children&&u.children.length>0&&(Xn(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),h_(u.children,e,C,E,m)),!(u.path==null&&!u.index)&&e.push({path:E,score:iE(E,u.index),routesMeta:C})};return s.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))c(u,f);else for(let m of f_(u.path))c(u,f,!0,m)}),e}function f_(s){let e=s.split("/");if(e.length===0)return[];let[t,...a]=e,i=t.endsWith("?"),c=t.replace(/\?$/,"");if(a.length===0)return i?[c,""]:[c];let u=f_(a.join("/")),f=[];return f.push(...u.map(m=>m===""?c:[c,m].join("/"))),i&&f.push(...u),f.map(m=>s.startsWith("/")&&m===""?"/":m)}function ZT(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:oE(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var eE=/^:[\w-]+$/,tE=3,nE=2,sE=1,rE=10,aE=-2,ob=s=>s==="*";function iE(s,e){let t=s.split("/"),a=t.length;return t.some(ob)&&(a+=aE),e&&(a+=nE),t.filter(i=>!ob(i)).reduce((i,c)=>i+(eE.test(c)?tE:c===""?sE:rE),a)}function oE(s,e){return s.length===e.length&&s.slice(0,-1).every((a,i)=>a===e[i])?s[s.length-1]-e[e.length-1]:0}function lE(s,e,t=!1){let{routesMeta:a}=s,i={},c="/",u=[];for(let f=0;f<a.length;++f){let m=a[f],b=f===a.length-1,T=c==="/"?e:e.slice(c.length)||"/",E=If({path:m.relativePath,caseSensitive:m.caseSensitive,end:b},T),C=m.route;if(!E&&b&&t&&!a[a.length-1].route.index&&(E=If({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},T)),!E)return null;Object.assign(i,E.params),u.push({params:i,pathname:ro([c,E.pathname]),pathnameBase:mE(ro([c,E.pathnameBase])),route:C}),E.pathnameBase!=="/"&&(c=ro([c,E.pathnameBase]))}return u}function If(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,a]=cE(s.path,s.caseSensitive,s.end),i=e.match(t);if(!i)return null;let c=i[0],u=c.replace(/(.)\/+$/,"$1"),f=i.slice(1);return{params:a.reduce((b,{paramName:T,isOptional:E},C)=>{if(T==="*"){let P=f[C]||"";u=c.slice(0,c.length-P.length).replace(/(.)\/+$/,"$1")}const L=f[C];return E&&!L?b[T]=void 0:b[T]=(L||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:u,pattern:s}}function cE(s,e=!1,t=!0){Ua(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(a.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),a]}function uE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ua(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function oo(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=s.charAt(t);return a&&a!=="/"?null:s.slice(t)||"/"}var dE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function hE(s,e="/"){let{pathname:t,search:a="",hash:i=""}=typeof s=="string"?iu(s):s,c;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?c=lb(t.substring(1),"/"):c=lb(t,e)):c=e,{pathname:c,search:pE(a),hash:gE(i)}}function lb(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ng(s,e,t,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fE(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function oy(s){let e=fE(s);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function ly(s,e,t,a=!1){let i;typeof s=="string"?i=iu(s):(i={...s},Xn(!i.pathname||!i.pathname.includes("?"),ng("?","pathname","search",i)),Xn(!i.pathname||!i.pathname.includes("#"),ng("#","pathname","hash",i)),Xn(!i.search||!i.search.includes("#"),ng("#","search","hash",i)));let c=s===""||i.pathname==="",u=c?"/":i.pathname,f;if(u==null)f=t;else{let E=e.length-1;if(!a&&u.startsWith("..")){let C=u.split("/");for(;C[0]==="..";)C.shift(),E-=1;i.pathname=C.join("/")}f=E>=0?e[E]:"/"}let m=hE(i,f),b=u&&u!=="/"&&u.endsWith("/"),T=(c||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(b||T)&&(m.pathname+="/"),m}var ro=s=>s.join("/").replace(/\/\/+/g,"/"),mE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),pE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,gE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,yE=class{constructor(s,e,t,a=!1){this.status=s,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function vE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function bE(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var m_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function p_(s,e){let t=s;if(typeof t!="string"||!dE.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,i=!1;if(m_)try{let c=new URL(window.location.href),u=t.startsWith("//")?new URL(c.protocol+t):new URL(t),f=oo(u.pathname,e);u.origin===c.origin&&f!=null?t=f+u.search+u.hash:i=!0}catch{Ua(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var g_=["POST","PUT","PATCH","DELETE"];new Set(g_);var xE=["GET",...g_];new Set(xE);var ou=I.createContext(null);ou.displayName="DataRouter";var nm=I.createContext(null);nm.displayName="DataRouterState";var _E=I.createContext(!1),y_=I.createContext({isTransitioning:!1});y_.displayName="ViewTransition";var wE=I.createContext(new Map);wE.displayName="Fetchers";var SE=I.createContext(null);SE.displayName="Await";var na=I.createContext(null);na.displayName="Navigation";var Bd=I.createContext(null);Bd.displayName="Location";var wi=I.createContext({outlet:null,matches:[],isDataRoute:!1});wi.displayName="Route";var cy=I.createContext(null);cy.displayName="RouteError";var v_="REACT_ROUTER_ERROR",TE="REDIRECT",EE="ROUTE_ERROR_RESPONSE";function NE(s){if(s.startsWith(`${v_}:${TE}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function jE(s){if(s.startsWith(`${v_}:${EE}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new yE(e.status,e.statusText,e.data)}catch{}}function kE(s,{relative:e}={}){Xn(lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=I.useContext(na),{hash:i,pathname:c,search:u}=zd(s,{relative:e}),f=c;return t!=="/"&&(f=c==="/"?t:ro([t,c])),a.createHref({pathname:f,search:u,hash:i})}function lu(){return I.useContext(Bd)!=null}function fo(){return Xn(lu(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Bd).location}var b_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function x_(s){I.useContext(na).static||I.useLayoutEffect(s)}function Os(){let{isDataRoute:s}=I.useContext(wi);return s?zE():CE()}function CE(){Xn(lu(),"useNavigate() may be used only in the context of a <Router> component.");let s=I.useContext(ou),{basename:e,navigator:t}=I.useContext(na),{matches:a}=I.useContext(wi),{pathname:i}=fo(),c=JSON.stringify(oy(a)),u=I.useRef(!1);return x_(()=>{u.current=!0}),I.useCallback((m,b={})=>{if(Ua(u.current,b_),!u.current)return;if(typeof m=="number"){t.go(m);return}let T=ly(m,JSON.parse(c),i,b.relative==="path");s==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:ro([e,T.pathname])),(b.replace?t.replace:t.push)(T,b.state,b)},[e,t,c,i,s])}I.createContext(null);function zd(s,{relative:e}={}){let{matches:t}=I.useContext(wi),{pathname:a}=fo(),i=JSON.stringify(oy(t));return I.useMemo(()=>ly(s,JSON.parse(i),a,e==="path"),[s,i,a,e])}function AE(s,e){return __(s,e)}function __(s,e,t,a,i){Xn(lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=I.useContext(na),{matches:u}=I.useContext(wi),f=u[u.length-1],m=f?f.params:{},b=f?f.pathname:"/",T=f?f.pathnameBase:"/",E=f&&f.route;{let G=E&&E.path||"";S_(b,!E||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let C=fo(),L;if(e){let G=typeof e=="string"?iu(e):e;Xn(T==="/"||G.pathname?.startsWith(T),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${G.pathname}" was given in the \`location\` prop.`),L=G}else L=C;let P=L.pathname||"/",V=P;if(T!=="/"){let G=T.replace(/^\//,"").split("/");V="/"+P.replace(/^\//,"").split("/").slice(G.length).join("/")}let F=d_(s,{pathname:V});Ua(E||F!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),Ua(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=OE(F&&F.map(G=>Object.assign({},G,{params:Object.assign({},m,G.params),pathname:ro([T,c.encodeLocation?c.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?T:ro([T,c.encodeLocation?c.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),u,t,a,i);return e&&K?I.createElement(Bd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},K):K}function RE(){let s=BE(),e=vE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:c},"ErrorBoundary")," or"," ",I.createElement("code",{style:c},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:i},t):null,u)}var DE=I.createElement(RE,null),w_=class extends I.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=jE(s.digest);t&&(s=t)}let e=s!==void 0?I.createElement(wi.Provider,{value:this.props.routeContext},I.createElement(cy.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?I.createElement(ME,{error:s},e):e}};w_.contextType=_E;var sg=new WeakMap;function ME({children:s,error:e}){let{basename:t}=I.useContext(na);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=NE(e.digest);if(a){let i=sg.get(e);if(i)throw i;let c=p_(a.location,t);if(m_&&!sg.get(e))if(c.isExternal||a.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:a.replace}));throw sg.set(e,u),u}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return s}function IE({routeContext:s,match:e,children:t}){let a=I.useContext(ou);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(wi.Provider,{value:s},t)}function OE(s,e=[],t=null,a=null,i=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let c=s,u=t?.errors;if(u!=null){let T=c.findIndex(E=>E.route.id&&u?.[E.route.id]!==void 0);Xn(T>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,T+1))}let f=!1,m=-1;if(t)for(let T=0;T<c.length;T++){let E=c[T];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=T),E.route.id){let{loaderData:C,errors:L}=t,P=E.route.loader&&!C.hasOwnProperty(E.route.id)&&(!L||L[E.route.id]===void 0);if(E.route.lazy||P){f=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}let b=t&&a?(T,E)=>{a(T,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:bE(t.matches),errorInfo:E})}:void 0;return c.reduceRight((T,E,C)=>{let L,P=!1,V=null,F=null;t&&(L=u&&E.route.id?u[E.route.id]:void 0,V=E.route.errorElement||DE,f&&(m<0&&C===0?(S_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,F=null):m===C&&(P=!0,F=E.route.hydrateFallbackElement||null)));let K=e.concat(c.slice(0,C+1)),G=()=>{let se;return L?se=V:P?se=F:E.route.Component?se=I.createElement(E.route.Component,null):E.route.element?se=E.route.element:se=T,I.createElement(IE,{match:E,routeContext:{outlet:T,matches:K,isDataRoute:t!=null},children:se})};return t&&(E.route.ErrorBoundary||E.route.errorElement||C===0)?I.createElement(w_,{location:t.location,revalidation:t.revalidation,component:V,error:L,children:G(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:b}):G()},null)}function uy(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PE(s){let e=I.useContext(ou);return Xn(e,uy(s)),e}function LE(s){let e=I.useContext(nm);return Xn(e,uy(s)),e}function VE(s){let e=I.useContext(wi);return Xn(e,uy(s)),e}function dy(s){let e=VE(s),t=e.matches[e.matches.length-1];return Xn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function UE(){return dy("useRouteId")}function BE(){let s=I.useContext(cy),e=LE("useRouteError"),t=dy("useRouteError");return s!==void 0?s:e.errors?.[t]}function zE(){let{router:s}=PE("useNavigate"),e=dy("useNavigate"),t=I.useRef(!1);return x_(()=>{t.current=!0}),I.useCallback(async(i,c={})=>{Ua(t.current,b_),t.current&&(typeof i=="number"?await s.navigate(i):await s.navigate(i,{fromRouteId:e,...c}))},[s,e])}var cb={};function S_(s,e,t){!e&&!cb[s]&&(cb[s]=!0,Ua(!1,t))}I.memo(FE);function FE({routes:s,future:e,state:t,onError:a}){return __(s,void 0,t,a,e)}function qE({to:s,replace:e,state:t,relative:a}){Xn(lu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=I.useContext(na);Ua(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=I.useContext(wi),{pathname:u}=fo(),f=Os(),m=ly(s,oy(c),u,a==="path"),b=JSON.stringify(m);return I.useEffect(()=>{f(JSON.parse(b),{replace:e,state:t,relative:a})},[f,b,a,e,t]),null}function Us(s){Xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function HE({basename:s="/",children:e=null,location:t,navigationType:a="POP",navigator:i,static:c=!1,unstable_useTransitions:u}){Xn(!lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=s.replace(/^\/*/,"/"),m=I.useMemo(()=>({basename:f,navigator:i,static:c,unstable_useTransitions:u,future:{}}),[f,i,c,u]);typeof t=="string"&&(t=iu(t));let{pathname:b="/",search:T="",hash:E="",state:C=null,key:L="default"}=t,P=I.useMemo(()=>{let V=oo(b,f);return V==null?null:{location:{pathname:V,search:T,hash:E,state:C,key:L},navigationType:a}},[f,b,T,E,C,L,a]);return Ua(P!=null,`<Router basename="${f}"> is not able to match the URL "${b}${T}${E}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:I.createElement(na.Provider,{value:m},I.createElement(Bd.Provider,{children:e,value:P}))}function $E({children:s,location:e}){return AE(jg(s),e)}function jg(s,e=[]){let t=[];return I.Children.forEach(s,(a,i)=>{if(!I.isValidElement(a))return;let c=[...e,i];if(a.type===I.Fragment){t.push.apply(t,jg(a.props.children,c));return}Xn(a.type===Us,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let u={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(u.children=jg(a.props.children,c)),t.push(u)}),t}var bf="get",xf="application/x-www-form-urlencoded";function sm(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function WE(s){return sm(s)&&s.tagName.toLowerCase()==="button"}function GE(s){return sm(s)&&s.tagName.toLowerCase()==="form"}function YE(s){return sm(s)&&s.tagName.toLowerCase()==="input"}function KE(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function QE(s,e){return s.button===0&&(!e||e==="_self")&&!KE(s)}var of=null;function XE(){if(of===null)try{new FormData(document.createElement("form"),0),of=!1}catch{of=!0}return of}var JE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(s){return s!=null&&!JE.has(s)?(Ua(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xf}"`),null):s}function ZE(s,e){let t,a,i,c,u;if(GE(s)){let f=s.getAttribute("action");a=f?oo(f,e):null,t=s.getAttribute("method")||bf,i=rg(s.getAttribute("enctype"))||xf,c=new FormData(s)}else if(WE(s)||YE(s)&&(s.type==="submit"||s.type==="image")){let f=s.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=s.getAttribute("formaction")||f.getAttribute("action");if(a=m?oo(m,e):null,t=s.getAttribute("formmethod")||f.getAttribute("method")||bf,i=rg(s.getAttribute("formenctype"))||rg(f.getAttribute("enctype"))||xf,c=new FormData(f,s),!XE()){let{name:b,type:T,value:E}=s;if(T==="image"){let C=b?`${b}.`:"";c.append(`${C}x`,"0"),c.append(`${C}y`,"0")}else b&&c.append(b,E)}}else{if(sm(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bf,a=null,i=xf,u=s}return c&&i==="text/plain"&&(u=c,c=void 0),{action:a,method:t.toLowerCase(),encType:i,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hy(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function eN(s,e,t,a){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${a}`:i.pathname=`${i.pathname}.${a}`:i.pathname==="/"?i.pathname=`_root.${a}`:e&&oo(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${a}`,i}async function tN(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nN(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function sN(s,e,t){let a=await Promise.all(s.map(async i=>{let c=e.routes[i.route.id];if(c){let u=await tN(c,t);return u.links?u.links():[]}return[]}));return oN(a.flat(1).filter(nN).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ub(s,e,t,a,i,c){let u=(m,b)=>t[b]?m.route.id!==t[b].route.id:!0,f=(m,b)=>t[b].pathname!==m.pathname||t[b].route.path?.endsWith("*")&&t[b].params["*"]!==m.params["*"];return c==="assets"?e.filter((m,b)=>u(m,b)||f(m,b)):c==="data"?e.filter((m,b)=>{let T=a.routes[m.route.id];if(!T||!T.hasLoader)return!1;if(u(m,b)||f(m,b))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function rN(s,e,{includeHydrateFallback:t}={}){return aN(s.map(a=>{let i=e.routes[a.route.id];if(!i)return[];let c=[i.module];return i.clientActionModule&&(c=c.concat(i.clientActionModule)),i.clientLoaderModule&&(c=c.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(c=c.concat(i.hydrateFallbackModule)),i.imports&&(c=c.concat(i.imports)),c}).flat(1))}function aN(s){return[...new Set(s)]}function iN(s){let e={},t=Object.keys(s).sort();for(let a of t)e[a]=s[a];return e}function oN(s,e){let t=new Set;return new Set(e),s.reduce((a,i)=>{let c=JSON.stringify(iN(i));return t.has(c)||(t.add(c),a.push({key:c,link:i})),a},[])}function T_(){let s=I.useContext(ou);return hy(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function lN(){let s=I.useContext(nm);return hy(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var fy=I.createContext(void 0);fy.displayName="FrameworkContext";function E_(){let s=I.useContext(fy);return hy(s,"You must render this element inside a <HydratedRouter> element"),s}function cN(s,e){let t=I.useContext(fy),[a,i]=I.useState(!1),[c,u]=I.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:b,onMouseLeave:T,onTouchStart:E}=e,C=I.useRef(null);I.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let V=K=>{K.forEach(G=>{u(G.isIntersecting)})},F=new IntersectionObserver(V,{threshold:.5});return C.current&&F.observe(C.current),()=>{F.disconnect()}}},[s]),I.useEffect(()=>{if(a){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[a]);let L=()=>{i(!0)},P=()=>{i(!1),u(!1)};return t?s!=="intent"?[c,C,{}]:[c,C,{onFocus:id(f,L),onBlur:id(m,P),onMouseEnter:id(b,L),onMouseLeave:id(T,P),onTouchStart:id(E,L)}]:[!1,C,{}]}function id(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function uN({page:s,...e}){let{router:t}=T_(),a=I.useMemo(()=>d_(t.routes,s,t.basename),[t.routes,s,t.basename]);return a?I.createElement(hN,{page:s,matches:a,...e}):null}function dN(s){let{manifest:e,routeModules:t}=E_(),[a,i]=I.useState([]);return I.useEffect(()=>{let c=!1;return sN(s,e,t).then(u=>{c||i(u)}),()=>{c=!0}},[s,e,t]),a}function hN({page:s,matches:e,...t}){let a=fo(),{future:i,manifest:c,routeModules:u}=E_(),{basename:f}=T_(),{loaderData:m,matches:b}=lN(),T=I.useMemo(()=>ub(s,e,b,c,a,"data"),[s,e,b,c,a]),E=I.useMemo(()=>ub(s,e,b,c,a,"assets"),[s,e,b,c,a]),C=I.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let V=new Set,F=!1;if(e.forEach(G=>{let se=c.routes[G.route.id];!se||!se.hasLoader||(!T.some(Y=>Y.route.id===G.route.id)&&G.route.id in m&&u[G.route.id]?.shouldRevalidate||se.hasClientLoader?F=!0:V.add(G.route.id))}),V.size===0)return[];let K=eN(s,f,i.unstable_trailingSlashAwareDataRequests,"data");return F&&V.size>0&&K.searchParams.set("_routes",e.filter(G=>V.has(G.route.id)).map(G=>G.route.id).join(",")),[K.pathname+K.search]},[f,i.unstable_trailingSlashAwareDataRequests,m,a,c,T,e,s,u]),L=I.useMemo(()=>rN(E,c),[E,c]),P=dN(E);return I.createElement(I.Fragment,null,C.map(V=>I.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),L.map(V=>I.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),P.map(({key:V,link:F})=>I.createElement("link",{key:V,nonce:t.nonce,...F,crossOrigin:F.crossOrigin??t.crossOrigin})))}function fN(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var mN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mN&&(window.__reactRouterVersion="7.13.0")}catch{}function pN({basename:s,children:e,unstable_useTransitions:t,window:a}){let i=I.useRef();i.current==null&&(i.current=YT({window:a,v5Compat:!0}));let c=i.current,[u,f]=I.useState({action:c.action,location:c.location}),m=I.useCallback(b=>{t===!1?f(b):I.startTransition(()=>f(b))},[t]);return I.useLayoutEffect(()=>c.listen(m),[c,m]),I.createElement(HE,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:c,unstable_useTransitions:t})}var N_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j_=I.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:i,reloadDocument:c,replace:u,state:f,target:m,to:b,preventScrollReset:T,viewTransition:E,unstable_defaultShouldRevalidate:C,...L},P){let{basename:V,unstable_useTransitions:F}=I.useContext(na),K=typeof b=="string"&&N_.test(b),G=p_(b,V);b=G.to;let se=kE(b,{relative:i}),[Y,fe,je]=cN(a,L),q=bN(b,{replace:u,state:f,target:m,preventScrollReset:T,relative:i,viewTransition:E,unstable_defaultShouldRevalidate:C,unstable_useTransitions:F});function B(Z){e&&e(Z),Z.defaultPrevented||q(Z)}let H=I.createElement("a",{...L,...je,href:G.absoluteURL||se,onClick:G.isExternal||c?e:B,ref:fN(P,fe),target:m,"data-discover":!K&&t==="render"?"true":void 0});return Y&&!K?I.createElement(I.Fragment,null,H,I.createElement(uN,{page:se})):H});j_.displayName="Link";var gN=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:i=!1,style:c,to:u,viewTransition:f,children:m,...b},T){let E=zd(u,{relative:b.relative}),C=fo(),L=I.useContext(nm),{navigator:P,basename:V}=I.useContext(na),F=L!=null&&TN(E)&&f===!0,K=P.encodeLocation?P.encodeLocation(E).pathname:E.pathname,G=C.pathname,se=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;t||(G=G.toLowerCase(),se=se?se.toLowerCase():null,K=K.toLowerCase()),se&&V&&(se=oo(se,V)||se);const Y=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let fe=G===K||!i&&G.startsWith(K)&&G.charAt(Y)==="/",je=se!=null&&(se===K||!i&&se.startsWith(K)&&se.charAt(K.length)==="/"),q={isActive:fe,isPending:je,isTransitioning:F},B=fe?e:void 0,H;typeof a=="function"?H=a(q):H=[a,fe?"active":null,je?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let Z=typeof c=="function"?c(q):c;return I.createElement(j_,{...b,"aria-current":B,className:H,ref:T,style:Z,to:u,viewTransition:f},typeof m=="function"?m(q):m)});gN.displayName="NavLink";var yN=I.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:i,state:c,method:u=bf,action:f,onSubmit:m,relative:b,preventScrollReset:T,viewTransition:E,unstable_defaultShouldRevalidate:C,...L},P)=>{let{unstable_useTransitions:V}=I.useContext(na),F=wN(),K=SN(f,{relative:b}),G=u.toLowerCase()==="get"?"get":"post",se=typeof f=="string"&&N_.test(f),Y=fe=>{if(m&&m(fe),fe.defaultPrevented)return;fe.preventDefault();let je=fe.nativeEvent.submitter,q=je?.getAttribute("formmethod")||u,B=()=>F(je||fe.currentTarget,{fetcherKey:e,method:q,navigate:t,replace:i,state:c,relative:b,preventScrollReset:T,viewTransition:E,unstable_defaultShouldRevalidate:C});V&&t!==!1?I.startTransition(()=>B()):B()};return I.createElement("form",{ref:P,method:G,action:K,onSubmit:a?m:Y,...L,"data-discover":!se&&s==="render"?"true":void 0})});yN.displayName="Form";function vN(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function k_(s){let e=I.useContext(ou);return Xn(e,vN(s)),e}function bN(s,{target:e,replace:t,state:a,preventScrollReset:i,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let b=Os(),T=fo(),E=zd(s,{relative:c});return I.useCallback(C=>{if(QE(C,e)){C.preventDefault();let L=t!==void 0?t:kd(T)===kd(E),P=()=>b(s,{replace:L,state:a,preventScrollReset:i,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:f});m?I.startTransition(()=>P()):P()}},[T,b,E,t,a,e,s,i,c,u,f,m])}var xN=0,_N=()=>`__${String(++xN)}__`;function wN(){let{router:s}=k_("useSubmit"),{basename:e}=I.useContext(na),t=UE(),a=s.fetch,i=s.navigate;return I.useCallback(async(c,u={})=>{let{action:f,method:m,encType:b,formData:T,body:E}=ZE(c,e);if(u.navigate===!1){let C=u.fetcherKey||_N();await a(C,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:T,body:E,formMethod:u.method||m,formEncType:u.encType||b,flushSync:u.flushSync})}else await i(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:T,body:E,formMethod:u.method||m,formEncType:u.encType||b,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[a,i,e,t])}function SN(s,{relative:e}={}){let{basename:t}=I.useContext(na),a=I.useContext(wi);Xn(a,"useFormAction must be used inside a RouteContext");let[i]=a.matches.slice(-1),c={...zd(s||".",{relative:e})},u=fo();if(s==null){c.search=u.search;let f=new URLSearchParams(c.search),m=f.getAll("index");if(m.some(T=>T==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let T=f.toString();c.search=T?`?${T}`:""}}return(!s||s===".")&&i.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:ro([t,c.pathname])),kd(c)}function TN(s,{relative:e}={}){let t=I.useContext(y_);Xn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=k_("useViewTransitionState"),i=zd(s,{relative:e});if(!t.isTransitioning)return!1;let c=oo(t.currentLocation.pathname,a)||t.currentLocation.pathname,u=oo(t.nextLocation.pathname,a)||t.nextLocation.pathname;return If(i.pathname,u)!=null||If(i.pathname,c)!=null}const EN=()=>{};var db={};const C_=function(s){const e=[];let t=0;for(let a=0;a<s.length;a++){let i=s.charCodeAt(a);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(s.charCodeAt(++a)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},NN=function(s){const e=[];let t=0,a=0;for(;t<s.length;){const i=s[t++];if(i<128)e[a++]=String.fromCharCode(i);else if(i>191&&i<224){const c=s[t++];e[a++]=String.fromCharCode((i&31)<<6|c&63)}else if(i>239&&i<365){const c=s[t++],u=s[t++],f=s[t++],m=((i&7)<<18|(c&63)<<12|(u&63)<<6|f&63)-65536;e[a++]=String.fromCharCode(55296+(m>>10)),e[a++]=String.fromCharCode(56320+(m&1023))}else{const c=s[t++],u=s[t++];e[a++]=String.fromCharCode((i&15)<<12|(c&63)<<6|u&63)}}return e.join("")},A_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<s.length;i+=3){const c=s[i],u=i+1<s.length,f=u?s[i+1]:0,m=i+2<s.length,b=m?s[i+2]:0,T=c>>2,E=(c&3)<<4|f>>4;let C=(f&15)<<2|b>>6,L=b&63;m||(L=64,u||(C=64)),a.push(t[T],t[E],t[C],t[L])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(C_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):NN(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<s.length;){const c=t[s.charAt(i++)],f=i<s.length?t[s.charAt(i)]:0;++i;const b=i<s.length?t[s.charAt(i)]:64;++i;const E=i<s.length?t[s.charAt(i)]:64;if(++i,c==null||f==null||b==null||E==null)throw new jN;const C=c<<2|f>>4;if(a.push(C),b!==64){const L=f<<4&240|b>>2;if(a.push(L),E!==64){const P=b<<6&192|E;a.push(P)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class jN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kN=function(s){const e=C_(s);return A_.encodeByteArray(e,!0)},Of=function(s){return kN(s).replace(/\./g,"")},R_=function(s){try{return A_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function CN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const AN=()=>CN().__FIREBASE_DEFAULTS__,RN=()=>{if(typeof process>"u"||typeof db>"u")return;const s=db.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},DN=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&R_(s[1]);return e&&JSON.parse(e)},rm=()=>{try{return EN()||AN()||RN()||DN()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},D_=s=>rm()?.emulatorHosts?.[s],M_=s=>{const e=D_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},I_=()=>rm()?.config,O_=s=>rm()?.[`_${s}`];class MN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}function pl(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function my(s){return(await fetch(s,{credentials:"include"})).ok}function P_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",i=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Of(JSON.stringify(t)),Of(JSON.stringify(u)),""].join(".")}const bd={};function IN(){const s={prod:[],emulator:[]};for(const e of Object.keys(bd))bd[e]?s.emulator.push(e):s.prod.push(e);return s}function ON(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let hb=!1;function py(s,e){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||bd[s]===e||bd[s]||hb)return;bd[s]=e;function t(C){return`__firebase__banner__${C}`}const a="__firebase__banner",c=IN().prod.length>0;function u(){const C=document.getElementById(a);C&&C.remove()}function f(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function m(C,L){C.setAttribute("width","24"),C.setAttribute("id",L),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function b(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{hb=!0,u()},C}function T(C,L){C.setAttribute("id",L),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function E(){const C=ON(a),L=t("text"),P=document.getElementById(L)||document.createElement("span"),V=t("learnmore"),F=document.getElementById(V)||document.createElement("a"),K=t("preprendIcon"),G=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const se=C.element;f(se),T(F,V);const Y=b();m(G,K),se.append(G,P,F,Y),document.body.appendChild(se)}c?(P.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(or())}function LN(){const s=rm()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UN(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function BN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zN(){const s=or();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function FN(){return!LN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qN(){try{return typeof indexedDB=="object"}catch{return!1}}function HN(){return new Promise((s,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(a),s(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const $N="FirebaseError";class Si extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=$N,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fd.prototype.create)}}class Fd{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},i=`${this.service}/${e}`,c=this.errors[e],u=c?WN(c,a):"Error",f=`${this.serviceName}: ${u} (${i}).`;return new Si(i,f,a)}}function WN(s,e){return s.replace(GN,(t,a)=>{const i=e[a];return i!=null?String(i):`<${a}?>`})}const GN=/\{\$([^}]+)}/g;function YN(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Kl(s,e){if(s===e)return!0;const t=Object.keys(s),a=Object.keys(e);for(const i of t){if(!a.includes(i))return!1;const c=s[i],u=e[i];if(fb(c)&&fb(u)){if(!Kl(c,u))return!1}else if(c!==u)return!1}for(const i of a)if(!t.includes(i))return!1;return!0}function fb(s){return s!==null&&typeof s=="object"}function qd(s){const e=[];for(const[t,a]of Object.entries(s))Array.isArray(a)?a.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function fd(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[i,c]=a.split("=");e[decodeURIComponent(i)]=decodeURIComponent(c)}}),e}function md(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function KN(s,e){const t=new QN(s,e);return t.subscribe.bind(t)}class QN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let i;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");XN(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:a},i.next===void 0&&(i.next=ag),i.error===void 0&&(i.error=ag),i.complete===void 0&&(i.complete=ag);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XN(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function ag(){}function es(s){return s&&s._delegate?s._delegate:s}class ll{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $l="[DEFAULT]";class JN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new MN;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ej(e))try{this.getOrInitializeService({instanceIdentifier:$l})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:i});a.resolve(c)}catch{}}}}clearInstance(e=$l){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$l){return this.instances.has(e)}getOptions(e=$l){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[c,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);a===f&&u.resolve(i)}return i}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(a)??new Set;i.add(e),this.onInitCallbacks.set(a,i);const c=this.instances.get(a);return c&&e(c,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const i of a)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:ZN(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=$l){return this.component?this.component.multipleInstances?e:$l:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZN(s){return s===$l?void 0:s}function ej(s){return s.instantiationMode==="EAGER"}class tj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var cn;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(cn||(cn={}));const nj={debug:cn.DEBUG,verbose:cn.VERBOSE,info:cn.INFO,warn:cn.WARN,error:cn.ERROR,silent:cn.SILENT},sj=cn.INFO,rj={[cn.DEBUG]:"log",[cn.VERBOSE]:"log",[cn.INFO]:"info",[cn.WARN]:"warn",[cn.ERROR]:"error"},aj=(s,e,...t)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),i=rj[e];if(i)console[i](`[${a}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gy{constructor(e){this.name=e,this._logLevel=sj,this._logHandler=aj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in cn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,cn.DEBUG,...e),this._logHandler(this,cn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,cn.VERBOSE,...e),this._logHandler(this,cn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,cn.INFO,...e),this._logHandler(this,cn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,cn.WARN,...e),this._logHandler(this,cn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,cn.ERROR,...e),this._logHandler(this,cn.ERROR,...e)}}const ij=(s,e)=>e.some(t=>s instanceof t);let mb,pb;function oj(){return mb||(mb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lj(){return pb||(pb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L_=new WeakMap,kg=new WeakMap,V_=new WeakMap,ig=new WeakMap,yy=new WeakMap;function cj(s){const e=new Promise((t,a)=>{const i=()=>{s.removeEventListener("success",c),s.removeEventListener("error",u)},c=()=>{t(rl(s.result)),i()},u=()=>{a(s.error),i()};s.addEventListener("success",c),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&L_.set(t,s)}).catch(()=>{}),yy.set(e,s),e}function uj(s){if(kg.has(s))return;const e=new Promise((t,a)=>{const i=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",u),s.removeEventListener("abort",u)},c=()=>{t(),i()},u=()=>{a(s.error||new DOMException("AbortError","AbortError")),i()};s.addEventListener("complete",c),s.addEventListener("error",u),s.addEventListener("abort",u)});kg.set(s,e)}let Cg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return kg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||V_.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rl(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function dj(s){Cg=s(Cg)}function hj(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=s.call(og(this),e,...t);return V_.set(a,e.sort?e.sort():[e]),rl(a)}:lj().includes(s)?function(...e){return s.apply(og(this),e),rl(L_.get(this))}:function(...e){return rl(s.apply(og(this),e))}}function fj(s){return typeof s=="function"?hj(s):(s instanceof IDBTransaction&&uj(s),ij(s,oj())?new Proxy(s,Cg):s)}function rl(s){if(s instanceof IDBRequest)return cj(s);if(ig.has(s))return ig.get(s);const e=fj(s);return e!==s&&(ig.set(s,e),yy.set(e,s)),e}const og=s=>yy.get(s);function mj(s,e,{blocked:t,upgrade:a,blocking:i,terminated:c}={}){const u=indexedDB.open(s,e),f=rl(u);return a&&u.addEventListener("upgradeneeded",m=>{a(rl(u.result),m.oldVersion,m.newVersion,rl(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{c&&m.addEventListener("close",()=>c()),i&&m.addEventListener("versionchange",b=>i(b.oldVersion,b.newVersion,b))}).catch(()=>{}),f}const pj=["get","getKey","getAll","getAllKeys","count"],gj=["put","add","delete","clear"],lg=new Map;function gb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,i=gj.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(i||pj.includes(t)))return;const c=async function(u,...f){const m=this.transaction(u,i?"readwrite":"readonly");let b=m.store;return a&&(b=b.index(f.shift())),(await Promise.all([b[t](...f),i&&m.done]))[0]};return lg.set(e,c),c}dj(s=>({...s,get:(e,t,a)=>gb(e,t)||s.get(e,t,a),has:(e,t)=>!!gb(e,t)||s.has(e,t)}));class yj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vj(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function vj(s){return s.getComponent()?.type==="VERSION"}const Ag="@firebase/app",yb="0.14.7";const lo=new gy("@firebase/app"),bj="@firebase/app-compat",xj="@firebase/analytics-compat",_j="@firebase/analytics",wj="@firebase/app-check-compat",Sj="@firebase/app-check",Tj="@firebase/auth",Ej="@firebase/auth-compat",Nj="@firebase/database",jj="@firebase/data-connect",kj="@firebase/database-compat",Cj="@firebase/functions",Aj="@firebase/functions-compat",Rj="@firebase/installations",Dj="@firebase/installations-compat",Mj="@firebase/messaging",Ij="@firebase/messaging-compat",Oj="@firebase/performance",Pj="@firebase/performance-compat",Lj="@firebase/remote-config",Vj="@firebase/remote-config-compat",Uj="@firebase/storage",Bj="@firebase/storage-compat",zj="@firebase/firestore",Fj="@firebase/ai",qj="@firebase/firestore-compat",Hj="firebase",$j="12.8.0";const Rg="[DEFAULT]",Wj={[Ag]:"fire-core",[bj]:"fire-core-compat",[_j]:"fire-analytics",[xj]:"fire-analytics-compat",[Sj]:"fire-app-check",[wj]:"fire-app-check-compat",[Tj]:"fire-auth",[Ej]:"fire-auth-compat",[Nj]:"fire-rtdb",[jj]:"fire-data-connect",[kj]:"fire-rtdb-compat",[Cj]:"fire-fn",[Aj]:"fire-fn-compat",[Rj]:"fire-iid",[Dj]:"fire-iid-compat",[Mj]:"fire-fcm",[Ij]:"fire-fcm-compat",[Oj]:"fire-perf",[Pj]:"fire-perf-compat",[Lj]:"fire-rc",[Vj]:"fire-rc-compat",[Uj]:"fire-gcs",[Bj]:"fire-gcs-compat",[zj]:"fire-fst",[qj]:"fire-fst-compat",[Fj]:"fire-vertex","fire-js":"fire-js",[Hj]:"fire-js-all"};const Pf=new Map,Gj=new Map,Dg=new Map;function vb(s,e){try{s.container.addComponent(e)}catch(t){lo.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ql(s){const e=s.name;if(Dg.has(e))return lo.debug(`There were multiple attempts to register component ${e}.`),!1;Dg.set(e,s);for(const t of Pf.values())vb(t,s);for(const t of Gj.values())vb(t,s);return!0}function am(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ea(s){return s==null?!1:s.settings!==void 0}const Yj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},al=new Fd("app","Firebase",Yj);class Kj{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw al.create("app-deleted",{appName:this._name})}}const sc=$j;function vy(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const a={name:Rg,automaticDataCollectionEnabled:!0,...e},i=a.name;if(typeof i!="string"||!i)throw al.create("bad-app-name",{appName:String(i)});if(t||(t=I_()),!t)throw al.create("no-options");const c=Pf.get(i);if(c){if(Kl(t,c.options)&&Kl(a,c.config))return c;throw al.create("duplicate-app",{appName:i})}const u=new tj(i);for(const m of Dg.values())u.addComponent(m);const f=new Kj(t,a,u);return Pf.set(i,f),f}function by(s=Rg){const e=Pf.get(s);if(!e&&s===Rg&&I_())return vy();if(!e)throw al.create("no-app",{appName:s});return e}function mi(s,e,t){let a=Wj[s]??s;t&&(a+=`-${t}`);const i=a.match(/\s|\//),c=e.match(/\s|\//);if(i||c){const u=[`Unable to register library "${a}" with version "${e}":`];i&&u.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lo.warn(u.join(" "));return}Ql(new ll(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const Qj="firebase-heartbeat-database",Xj=1,Cd="firebase-heartbeat-store";let cg=null;function U_(){return cg||(cg=mj(Qj,Xj,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Cd)}catch(t){console.warn(t)}}}}).catch(s=>{throw al.create("idb-open",{originalErrorMessage:s.message})})),cg}async function Jj(s){try{const t=(await U_()).transaction(Cd),a=await t.objectStore(Cd).get(B_(s));return await t.done,a}catch(e){if(e instanceof Si)lo.warn(e.message);else{const t=al.create("idb-get",{originalErrorMessage:e?.message});lo.warn(t.message)}}}async function bb(s,e){try{const a=(await U_()).transaction(Cd,"readwrite");await a.objectStore(Cd).put(e,B_(s)),await a.done}catch(t){if(t instanceof Si)lo.warn(t.message);else{const a=al.create("idb-set",{originalErrorMessage:t?.message});lo.warn(a.message)}}}function B_(s){return`${s.name}!${s.options.appId}`}const Zj=1024,ek=30;class tk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sk(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=xb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>ek){const i=rk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){lo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=xb(),{heartbeatsToSend:t,unsentEntries:a}=nk(this._heartbeatsCache.heartbeats),i=Of(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return lo.warn(e),""}}}function xb(){return new Date().toISOString().substring(0,10)}function nk(s,e=Zj){const t=[];let a=s.slice();for(const i of s){const c=t.find(u=>u.agent===i.agent);if(c){if(c.dates.push(i.date),_b(t)>e){c.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),_b(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class sk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qN()?HN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Jj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function _b(s){return Of(JSON.stringify({version:2,heartbeats:s})).length}function rk(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let a=1;a<s.length;a++)s[a].date<t&&(t=s[a].date,e=a);return e}function ak(s){Ql(new ll("platform-logger",e=>new yj(e),"PRIVATE")),Ql(new ll("heartbeat",e=>new tk(e),"PRIVATE")),mi(Ag,yb,s),mi(Ag,yb,"esm2020"),mi("fire-js","")}ak("");function z_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ik=z_,F_=new Fd("auth","Firebase",z_());const Lf=new gy("@firebase/auth");function ok(s,...e){Lf.logLevel<=cn.WARN&&Lf.warn(`Auth (${sc}): ${s}`,...e)}function _f(s,...e){Lf.logLevel<=cn.ERROR&&Lf.error(`Auth (${sc}): ${s}`,...e)}function Ba(s,...e){throw xy(s,...e)}function pi(s,...e){return xy(s,...e)}function q_(s,e,t){const a={...ik(),[e]:t};return new Fd("auth","Firebase",a).create(e,{appName:s.name})}function ao(s){return q_(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xy(s,...e){if(typeof s!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(t,...a)}return F_.create(s,...e)}function Lt(s,e,...t){if(!s)throw xy(e,...t)}function no(s){const e="INTERNAL ASSERTION FAILED: "+s;throw _f(e),new Error(e)}function co(s,e){s||no(e)}function Mg(){return typeof self<"u"&&self.location?.href||""}function lk(){return wb()==="http:"||wb()==="https:"}function wb(){return typeof self<"u"&&self.location?.protocol||null}function ck(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lk()||UN()||"connection"in navigator)?navigator.onLine:!0}function uk(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Hd{constructor(e,t){this.shortDelay=e,this.longDelay=t,co(t>e,"Short delay should be less than long delay!"),this.isMobile=PN()||BN()}get(){return ck()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _y(s,e){co(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class H_{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;no("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;no("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;no("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const hk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fk=new Hd(3e4,6e4);function mo(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function po(s,e,t,a,i={}){return $_(s,i,async()=>{let c={},u={};a&&(e==="GET"?u=a:c={body:JSON.stringify(a)});const f=qd({key:s.config.apiKey,...u}).slice(1),m=await s._getAdditionalHeaders();m["Content-Type"]="application/json",s.languageCode&&(m["X-Firebase-Locale"]=s.languageCode);const b={method:e,headers:m,...c};return VN()||(b.referrerPolicy="no-referrer"),s.emulatorConfig&&pl(s.emulatorConfig.host)&&(b.credentials="include"),H_.fetch()(await W_(s,s.config.apiHost,t,f),b)})}async function $_(s,e,t){s._canInitEmulator=!1;const a={...dk,...e};try{const i=new pk(s),c=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw lf(s,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const f=c.ok?u.errorMessage:u.error.message,[m,b]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(s,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw lf(s,"email-already-in-use",u);if(m==="USER_DISABLED")throw lf(s,"user-disabled",u);const T=a[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw q_(s,T,b);Ba(s,T)}}catch(i){if(i instanceof Si)throw i;Ba(s,"network-request-failed",{message:String(i)})}}async function $d(s,e,t,a,i={}){const c=await po(s,e,t,a,i);return"mfaPendingCredential"in c&&Ba(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function W_(s,e,t,a){const i=`${e}${t}?${a}`,c=s,u=c.config.emulator?_y(s.config,i):`${s.config.apiScheme}://${i}`;return hk.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function mk(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(pi(this.auth,"network-request-failed")),fk.get())})}}function lf(s,e,t){const a={appName:s.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const i=pi(s,e,a);return i.customData._tokenResponse=t,i}function Sb(s){return s!==void 0&&s.enterprise!==void 0}class gk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yk(s,e){return po(s,"GET","/v2/recaptchaConfig",mo(s,e))}async function vk(s,e){return po(s,"POST","/v1/accounts:delete",e)}async function Vf(s,e){return po(s,"POST","/v1/accounts:lookup",e)}function xd(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bk(s,e=!1){const t=es(s),a=await t.getIdToken(e),i=wy(a);Lt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const c=typeof i.firebase=="object"?i.firebase:void 0,u=c?.sign_in_provider;return{claims:i,token:a,authTime:xd(ug(i.auth_time)),issuedAtTime:xd(ug(i.iat)),expirationTime:xd(ug(i.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function ug(s){return Number(s)*1e3}function wy(s){const[e,t,a]=s.split(".");if(e===void 0||t===void 0||a===void 0)return _f("JWT malformed, contained fewer than 3 sections"),null;try{const i=R_(t);return i?JSON.parse(i):(_f("Failed to decode base64 JWT payload"),null)}catch(i){return _f("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Tb(s){const e=wy(s);return Lt(e,"internal-error"),Lt(typeof e.exp<"u","internal-error"),Lt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ad(s,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Si&&xk(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function xk({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class _k{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ig{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xd(this.lastLoginAt),this.creationTime=xd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Uf(s){const e=s.auth,t=await s.getIdToken(),a=await Ad(s,Vf(e,{idToken:t}));Lt(a?.users.length,e,"internal-error");const i=a.users[0];s._notifyReloadListener(i);const c=i.providerUserInfo?.length?G_(i.providerUserInfo):[],u=Sk(s.providerData,c),f=s.isAnonymous,m=!(s.email&&i.passwordHash)&&!u?.length,b=f?m:!1,T={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Ig(i.createdAt,i.lastLoginAt),isAnonymous:b};Object.assign(s,T)}async function wk(s){const e=es(s);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Sk(s,e){return[...s.filter(a=>!e.some(i=>i.providerId===a.providerId)),...e]}function G_(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Tk(s,e){const t=await $_(s,{},async()=>{const a=qd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:c}=s.config,u=await W_(s,i,"/v1/token",`key=${c}`),f=await s._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:a};return s.emulatorConfig&&pl(s.emulatorConfig.host)&&(m.credentials="include"),H_.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Ek(s,e){return po(s,"POST","/v2/accounts:revokeToken",mo(s,e))}class Yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Lt(e.idToken,"internal-error"),Lt(typeof e.idToken<"u","internal-error"),Lt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Lt(e.length!==0,"internal-error");const t=Tb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Lt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:i,expiresIn:c}=await Tk(e,t);this.updateTokensAndExpiration(a,i,Number(c))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:i,expirationTime:c}=t,u=new Yc;return a&&(Lt(typeof a=="string","internal-error",{appName:e}),u.refreshToken=a),i&&(Lt(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),c&&(Lt(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yc,this.toJSON())}_performRefresh(){return no("not implemented")}}function Xo(s,e){Lt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class La{constructor({uid:e,auth:t,stsTokenManager:a,...i}){this.providerId="firebase",this.proactiveRefresh=new _k(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ig(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ad(this,this.stsTokenManager.getToken(this.auth,e));return Lt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bk(this,e)}reload(){return wk(this)}_assign(e){this!==e&&(Lt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new La({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Lt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await Uf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ea(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await Ad(this,vk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,i=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,b=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:E,emailVerified:C,isAnonymous:L,providerData:P,stsTokenManager:V}=t;Lt(E&&V,e,"internal-error");const F=Yc.fromJSON(this.name,V);Lt(typeof E=="string",e,"internal-error"),Xo(a,e.name),Xo(i,e.name),Lt(typeof C=="boolean",e,"internal-error"),Lt(typeof L=="boolean",e,"internal-error"),Xo(c,e.name),Xo(u,e.name),Xo(f,e.name),Xo(m,e.name),Xo(b,e.name),Xo(T,e.name);const K=new La({uid:E,auth:e,email:i,emailVerified:C,displayName:a,isAnonymous:L,photoURL:u,phoneNumber:c,tenantId:f,stsTokenManager:F,createdAt:b,lastLoginAt:T});return P&&Array.isArray(P)&&(K.providerData=P.map(G=>({...G}))),m&&(K._redirectEventId=m),K}static async _fromIdTokenResponse(e,t,a=!1){const i=new Yc;i.updateFromServerResponse(t);const c=new La({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:a});return await Uf(c),c}static async _fromGetAccountInfoResponse(e,t,a){const i=t.users[0];Lt(i.localId!==void 0,"internal-error");const c=i.providerUserInfo!==void 0?G_(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!c?.length,f=new Yc;f.updateFromIdToken(a);const m=new La({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:u}),b={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Ig(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!c?.length};return Object.assign(m,b),m}}const Eb=new Map;function so(s){co(s instanceof Function,"Expected a class definition");let e=Eb.get(s);return e?(co(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Eb.set(s,e),e)}class Y_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Y_.type="NONE";const Nb=Y_;function wf(s,e,t){return`firebase:${s}:${e}:${t}`}class Kc{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:i,name:c}=this.auth;this.fullUserKey=wf(this.userKey,i.apiKey,c),this.fullPersistenceKey=wf("persistence",i.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vf(this.auth,{idToken:e}).catch(()=>{});return t?La._fromGetAccountInfoResponse(this.auth,t,e):null}return La._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Kc(so(Nb),e,a);const i=(await Promise.all(t.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let c=i[0]||so(Nb);const u=wf(a,e.config.apiKey,e.name);let f=null;for(const b of t)try{const T=await b._get(u);if(T){let E;if(typeof T=="string"){const C=await Vf(e,{idToken:T}).catch(()=>{});if(!C)break;E=await La._fromGetAccountInfoResponse(e,C,T)}else E=La._fromJSON(e,T);b!==c&&(f=E),c=b;break}}catch{}const m=i.filter(b=>b._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new Kc(c,e,a):(c=m[0],f&&await c._set(u,f.toJSON()),await Promise.all(t.map(async b=>{if(b!==c)try{await b._remove(u)}catch{}})),new Kc(c,e,a))}}function jb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(J_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(K_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e2(e))return"Blackberry";if(t2(e))return"Webos";if(Q_(e))return"Safari";if((e.includes("chrome/")||X_(e))&&!e.includes("edge/"))return"Chrome";if(Z_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(t);if(a?.length===2)return a[1]}return"Other"}function K_(s=or()){return/firefox\//i.test(s)}function Q_(s=or()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function X_(s=or()){return/crios\//i.test(s)}function J_(s=or()){return/iemobile/i.test(s)}function Z_(s=or()){return/android/i.test(s)}function e2(s=or()){return/blackberry/i.test(s)}function t2(s=or()){return/webos/i.test(s)}function Sy(s=or()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Nk(s=or()){return Sy(s)&&!!window.navigator?.standalone}function jk(){return zN()&&document.documentMode===10}function n2(s=or()){return Sy(s)||Z_(s)||t2(s)||e2(s)||/windows phone/i.test(s)||J_(s)}function s2(s,e=[]){let t;switch(s){case"Browser":t=jb(or());break;case"Worker":t=`${jb(or())}-${s}`;break;default:t=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${sc}/${a}`}class kk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=c=>new Promise((u,f)=>{try{const m=e(c);u(m)}catch(m){f(m)}});a.onAbort=t,this.queue.push(a);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function Ck(s,e={}){return po(s,"GET","/v2/passwordPolicy",mo(s,e))}const Ak=6;class Rk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Ak,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let i=0;i<e.length;i++)a=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,i,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class Dk{constructor(e,t,a,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kb(this),this.idTokenSubscription=new kb(this),this.beforeStateQueue=new kk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=so(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Kc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vf(this,{idToken:e}),a=await La._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ea(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=a?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&f?.user&&(a=f.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Lt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ea(this.app))return Promise.reject(ao(this));const t=e?es(e):null;return t&&Lt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Lt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ea(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ea(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(so(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ck(this),t=new Rk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fd("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await Ek(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&so(e)||this._popupRedirectResolver;Lt(t,this,"argument-error"),this.redirectPersistenceManager=await Kc.create(this,[so(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,i){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Lt(f,this,"internal-error"),f.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,a,i);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Lt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ok(`Error while retrieving App Check token: ${e.error}`),e?.token}}function gl(s){return es(s)}class kb{constructor(e){this.auth=e,this.observer=null,this.addObserver=KN(t=>this.observer=t)}get next(){return Lt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let im={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mk(s){im=s}function r2(s){return im.loadJS(s)}function Ik(){return im.recaptchaEnterpriseScript}function Ok(){return im.gapiScript}function Pk(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Lk{constructor(){this.enterprise=new Vk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Vk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Uk="recaptcha-enterprise",a2="NO_RECAPTCHA";class Bk{constructor(e){this.type=Uk,this.auth=gl(e)}async verify(e="verify",t=!1){async function a(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,f)=>{yk(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const b=new gk(m);return c.tenantId==null?c._agentRecaptchaConfig=b:c._tenantRecaptchaConfigs[c.tenantId]=b,u(b.siteKey)}}).catch(m=>{f(m)})})}function i(c,u,f){const m=window.grecaptcha;Sb(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:e}).then(b=>{u(b)}).catch(()=>{u(a2)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Lk().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{a(this.auth).then(f=>{if(!t&&Sb(window.grecaptcha))i(f,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Ik();m.length!==0&&(m+=f),r2(m).then(()=>{i(f,c,u)}).catch(b=>{u(b)})}}).catch(f=>{u(f)})})}}async function Cb(s,e,t,a=!1,i=!1){const c=new Bk(s);let u;if(i)u=a2;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,b=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:b,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return a?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Bf(s,e,t,a,i){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Cb(s,e,t,t==="getOobCode");return a(s,c)}else return a(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Cb(s,e,t,t==="getOobCode");return a(s,u)}else return Promise.reject(c)})}function zk(s,e){const t=am(s,"auth");if(t.isInitialized()){const i=t.getImmediate(),c=t.getOptions();if(Kl(c,e??{}))return i;Ba(i,"already-initialized")}return t.initialize({options:e})}function Fk(s,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(so);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function qk(s,e,t){const a=gl(s);Lt(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const i=!1,c=i2(e),{host:u,port:f}=Hk(e),m=f===null?"":`:${f}`,b={url:`${c}//${u}${m}/`},T=Object.freeze({host:u,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!a._canInitEmulator){Lt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Lt(Kl(b,a.config.emulator)&&Kl(T,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=b,a.emulatorConfig=T,a.settings.appVerificationDisabledForTesting=!0,pl(u)?(my(`${c}//${u}${m}`),py("Auth",!0)):$k()}function i2(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Hk(s){const e=i2(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(a);if(i){const c=i[1];return{host:c,port:Ab(a.substr(c.length+1))}}else{const[c,u]=a.split(":");return{host:c,port:Ab(u)}}}function Ab(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function $k(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ty{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return no("not implemented")}_getIdTokenResponse(e){return no("not implemented")}_linkToIdToken(e,t){return no("not implemented")}_getReauthenticationResolver(e){return no("not implemented")}}async function Wk(s,e){return po(s,"POST","/v1/accounts:signUp",e)}async function Gk(s,e){return $d(s,"POST","/v1/accounts:signInWithPassword",mo(s,e))}async function Yk(s,e){return po(s,"POST","/v1/accounts:sendOobCode",mo(s,e))}async function Kk(s,e){return Yk(s,e)}async function Qk(s,e){return $d(s,"POST","/v1/accounts:signInWithEmailLink",mo(s,e))}async function Xk(s,e){return $d(s,"POST","/v1/accounts:signInWithEmailLink",mo(s,e))}class Rd extends Ty{constructor(e,t,a,i=null){super("password",a),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Rd(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new Rd(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,t,"signInWithPassword",Gk);case"emailLink":return Qk(e,{email:this._email,oobCode:this._password});default:Ba(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,a,"signUpPassword",Wk);case"emailLink":return Xk(e,{idToken:t,email:this._email,oobCode:this._password});default:Ba(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qc(s,e){return $d(s,"POST","/v1/accounts:signInWithIdp",mo(s,e))}const Jk="http://localhost";class Xl extends Ty{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ba("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:i,...c}=t;if(!a||!i)return null;const u=new Xl(a,i);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Qc(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Qc(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qc(e,t)}buildRequest(){const e={requestUri:Jk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qd(t)}return e}}function Zk(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eC(s){const e=fd(md(s)).link,t=e?fd(md(e)).deep_link_id:null,a=fd(md(s)).deep_link_id;return(a?fd(md(a)).link:null)||a||t||e||s}class Ey{constructor(e){const t=fd(md(e)),a=t.apiKey??null,i=t.oobCode??null,c=Zk(t.mode??null);Lt(a&&i&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=eC(e);try{return new Ey(t)}catch{return null}}}class cu{constructor(){this.providerId=cu.PROVIDER_ID}static credential(e,t){return Rd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=Ey.parseLink(t);return Lt(a,"argument-error"),Rd._fromEmailAndCode(e,a.code,a.tenantId)}}cu.PROVIDER_ID="password";cu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class o2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wd extends o2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zo extends Wd{constructor(){super("facebook.com")}static credential(e){return Xl._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zo.credential(e.oauthAccessToken)}catch{return null}}}Zo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zo.PROVIDER_ID="facebook.com";class el extends Wd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xl._fromParams({providerId:el.PROVIDER_ID,signInMethod:el.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return el.credentialFromTaggedObject(e)}static credentialFromError(e){return el.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return el.credential(t,a)}catch{return null}}}el.GOOGLE_SIGN_IN_METHOD="google.com";el.PROVIDER_ID="google.com";class tl extends Wd{constructor(){super("github.com")}static credential(e){return Xl._fromParams({providerId:tl.PROVIDER_ID,signInMethod:tl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tl.credentialFromTaggedObject(e)}static credentialFromError(e){return tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tl.credential(e.oauthAccessToken)}catch{return null}}}tl.GITHUB_SIGN_IN_METHOD="github.com";tl.PROVIDER_ID="github.com";class nl extends Wd{constructor(){super("twitter.com")}static credential(e,t){return Xl._fromParams({providerId:nl.PROVIDER_ID,signInMethod:nl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nl.credentialFromTaggedObject(e)}static credentialFromError(e){return nl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return nl.credential(t,a)}catch{return null}}}nl.TWITTER_SIGN_IN_METHOD="twitter.com";nl.PROVIDER_ID="twitter.com";async function tC(s,e){return $d(s,"POST","/v1/accounts:signUp",mo(s,e))}class Jl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,i=!1){const c=await La._fromIdTokenResponse(e,a,i),u=Rb(a);return new Jl({user:c,providerId:u,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const i=Rb(a);return new Jl({user:e,providerId:i,_tokenResponse:a,operationType:t})}}function Rb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class zf extends Si{constructor(e,t,a,i){super(t.code,t.message),this.operationType=a,this.user=i,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,i){return new zf(e,t,a,i)}}function l2(s,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(s,c,e,a):c})}async function nC(s,e,t=!1){const a=await Ad(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Jl._forOperation(s,"link",a)}async function sC(s,e,t=!1){const{auth:a}=s;if(ea(a.app))return Promise.reject(ao(a));const i="reauthenticate";try{const c=await Ad(s,l2(a,i,e,s),t);Lt(c.idToken,a,"internal-error");const u=wy(c.idToken);Lt(u,a,"internal-error");const{sub:f}=u;return Lt(s.uid===f,a,"user-mismatch"),Jl._forOperation(s,i,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ba(a,"user-mismatch"),c}}async function c2(s,e,t=!1){if(ea(s.app))return Promise.reject(ao(s));const a="signIn",i=await l2(s,a,e),c=await Jl._fromIdTokenResponse(s,a,i);return t||await s._updateCurrentUser(c.user),c}async function rC(s,e){return c2(gl(s),e)}async function u2(s){const e=gl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aC(s,e,t){const a=gl(s);await Bf(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Kk)}async function d2(s,e,t){if(ea(s.app))return Promise.reject(ao(s));const a=gl(s),u=await Bf(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tC).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&u2(s),m}),f=await Jl._fromIdTokenResponse(a,"signIn",u);return await a._updateCurrentUser(f.user),f}function iC(s,e,t){return ea(s.app)?Promise.reject(ao(s)):rC(es(s),cu.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&u2(s),a})}function oC(s,e){return es(s).setPersistence(e)}function lC(s,e,t,a){return es(s).onIdTokenChanged(e,t,a)}function cC(s,e,t){return es(s).beforeAuthStateChanged(e,t)}function uC(s,e,t,a){return es(s).onAuthStateChanged(e,t,a)}function Ny(s){return es(s).signOut()}const Ff="__sak";class h2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const dC=1e3,hC=10;class f2 extends h2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=n2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),i=this.localCache[t];a!==i&&e(t,i,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const a=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(a);!t&&this.localCache[a]===u||this.notifyListeners(a,u)},c=this.storage.getItem(a);jk()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,hC):i()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}f2.type="LOCAL";const m2=f2;class p2 extends h2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}p2.type="SESSION";const jy=p2;function fC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class om{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const a=new om(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:i,data:c}=t.data,u=this.handlersMap[i];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:i});const f=Array.from(u).map(async b=>b(t.origin,c)),m=await fC(f);t.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}om.receivers=[];function ky(s="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return s+t}class mC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let c,u;return new Promise((f,m)=>{const b=ky("",20);i.port1.start();const T=setTimeout(()=>{m(new Error("unsupported_event"))},a);u={messageChannel:i,onMessage(E){const C=E;if(C.data.eventId===b)switch(C.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(C.data.response);break;default:clearTimeout(T),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:b,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function gi(){return window}function pC(s){gi().location.href=s}function g2(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function gC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yC(){return navigator?.serviceWorker?.controller||null}function vC(){return g2()?self:null}const y2="firebaseLocalStorageDb",bC=1,qf="firebaseLocalStorage",v2="fbase_key";class Gd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lm(s,e){return s.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function xC(){const s=indexedDB.deleteDatabase(y2);return new Gd(s).toPromise()}function Og(){const s=indexedDB.open(y2,bC);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(qf,{keyPath:v2})}catch(i){t(i)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(qf)?e(a):(a.close(),await xC(),e(await Og()))})})}async function Db(s,e,t){const a=lm(s,!0).put({[v2]:e,value:t});return new Gd(a).toPromise()}async function _C(s,e){const t=lm(s,!1).get(e),a=await new Gd(t).toPromise();return a===void 0?null:a.value}function Mb(s,e){const t=lm(s,!0).delete(e);return new Gd(t).toPromise()}const wC=800,SC=3;class b2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>SC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=om._getInstance(vC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await gC(),!this.activeServiceWorker)return;this.sender=new mC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Og();return await Db(e,Ff,"1"),await Mb(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>Db(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>_C(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Mb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const c=lm(i,!1).getAll();return new Gd(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:i,value:c}of e)a.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(c)&&(this.notifyListeners(i,c),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!a.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const i of Array.from(a))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b2.type="LOCAL";const TC=b2;new Hd(3e4,6e4);function EC(s,e){return e?so(e):(Lt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Cy extends Ty{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function NC(s){return c2(s.auth,new Cy(s),s.bypassAuthState)}function jC(s){const{auth:e,user:t}=s;return Lt(t,e,"internal-error"),sC(t,new Cy(s),s.bypassAuthState)}async function kC(s){const{auth:e,user:t}=s;return Lt(t,e,"internal-error"),nC(t,new Cy(s),s.bypassAuthState)}class x2{constructor(e,t,a,i,c=!1){this.auth=e,this.resolver=a,this.user=i,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:i,tenantId:c,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:a,tenantId:c||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NC;case"linkViaPopup":case"linkViaRedirect":return kC;case"reauthViaPopup":case"reauthViaRedirect":return jC;default:Ba(this.auth,"internal-error")}}resolve(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CC=new Hd(2e3,1e4);class Gc extends x2{constructor(e,t,a,i,c){super(e,t,i,c),this.provider=a,this.authWindow=null,this.pollId=null,Gc.currentPopupAction&&Gc.currentPopupAction.cancel(),Gc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Lt(e,this.auth,"internal-error"),e}async onExecution(){co(this.filter.length===1,"Popup operations only handle one event");const e=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CC.get())};e()}}Gc.currentPopupAction=null;const AC="pendingRedirect",Sf=new Map;class RC extends x2{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const a=await DC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DC(s,e){const t=OC(e),a=IC(s);if(!await a._isAvailable())return!1;const i=await a._get(t)==="true";return await a._remove(t),i}function MC(s,e){Sf.set(s._key(),e)}function IC(s){return so(s._redirectPersistence)}function OC(s){return wf(AC,s.config.apiKey,s.name)}async function PC(s,e,t=!1){if(ea(s.app))return Promise.reject(ao(s));const a=gl(s),i=EC(a,e),u=await new RC(a,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await a._persistUserIfCurrent(u.user),await a._setRedirectUser(null,e)),u}const LC=600*1e3;class VC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!_2(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(pi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ib(e))}saveEventToCache(e){this.cachedEventUids.add(Ib(e)),this.lastProcessedEventTime=Date.now()}}function Ib(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function _2({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function UC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _2(s);default:return!1}}async function BC(s,e={}){return po(s,"GET","/v1/projects",e)}const zC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FC=/^https?/;async function qC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await BC(s);for(const t of e)try{if(HC(t))return}catch{}Ba(s,"unauthorized-domain")}function HC(s){const e=Mg(),{protocol:t,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&a===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===a}if(!FC.test(t))return!1;if(zC.test(s))return a===s;const i=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(a)}const $C=new Hd(3e4,6e4);function Ob(){const s=gi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function WC(s){return new Promise((e,t)=>{function a(){Ob(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ob(),t(pi(s,"network-request-failed"))},timeout:$C.get()})}if(gi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gi().gapi?.load)a();else{const i=Pk("iframefcb");return gi()[i]=()=>{gapi.load?a():t(pi(s,"network-request-failed"))},r2(`${Ok()}?onload=${i}`).catch(c=>t(c))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function GC(s){return Tf=Tf||WC(s),Tf}const YC=new Hd(5e3,15e3),KC="__/auth/iframe",QC="emulator/auth/iframe",XC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZC(s){const e=s.config;Lt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?_y(e,QC):`https://${s.config.authDomain}/${KC}`,a={apiKey:e.apiKey,appName:s.name,v:sc},i=JC.get(s.config.apiHost);i&&(a.eid=i);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${t}?${qd(a).slice(1)}`}async function eA(s){const e=await GC(s),t=gi().gapi;return Lt(t,s,"internal-error"),e.open({where:document.body,url:ZC(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XC,dontclear:!0},a=>new Promise(async(i,c)=>{await a.restyle({setHideOnLeave:!1});const u=pi(s,"network-request-failed"),f=gi().setTimeout(()=>{c(u)},YC.get());function m(){gi().clearTimeout(f),i(a)}a.ping(m).then(m,()=>{c(u)})}))}const tA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nA=500,sA=600,rA="_blank",aA="http://localhost";class Pb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iA(s,e,t,a=nA,i=sA){const c=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-a)/2,0).toString();let f="";const m={...tA,width:a.toString(),height:i.toString(),top:c,left:u},b=or().toLowerCase();t&&(f=X_(b)?rA:t),K_(b)&&(e=e||aA,m.scrollbars="yes");const T=Object.entries(m).reduce((C,[L,P])=>`${C}${L}=${P},`,"");if(Nk(b)&&f!=="_self")return oA(e||"",f),new Pb(null);const E=window.open(e||"",f,T);Lt(E,s,"popup-blocked");try{E.focus()}catch{}return new Pb(E)}function oA(s,e){const t=document.createElement("a");t.href=s,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}const lA="__/auth/handler",cA="emulator/auth/handler",uA=encodeURIComponent("fac");async function Lb(s,e,t,a,i,c){Lt(s.config.authDomain,s,"auth-domain-config-required"),Lt(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:a,v:sc,eventId:i};if(e instanceof o2){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",YN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,E]of Object.entries({}))u[T]=E}if(e instanceof Wd){const T=e.getScopes().filter(E=>E!=="");T.length>0&&(u.scopes=T.join(","))}s.tenantId&&(u.tid=s.tenantId);const f=u;for(const T of Object.keys(f))f[T]===void 0&&delete f[T];const m=await s._getAppCheckToken(),b=m?`#${uA}=${encodeURIComponent(m)}`:"";return`${dA(s)}?${qd(f).slice(1)}${b}`}function dA({config:s}){return s.emulator?_y(s,cA):`https://${s.authDomain}/${lA}`}const dg="webStorageSupport";class hA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jy,this._completeRedirectFn=PC,this._overrideRedirectResult=MC}async _openPopup(e,t,a,i){co(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Lb(e,t,a,Mg(),i);return iA(e,c,ky())}async _openRedirect(e,t,a,i){await this._originValidation(e);const c=await Lb(e,t,a,Mg(),i);return pC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:c}=this.eventManagers[t];return i?Promise.resolve(i):(co(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await eA(e),a=new VC(e);return t.register("authEvent",i=>(Lt(i?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dg,{type:dg},i=>{const c=i?.[0]?.[dg];c!==void 0&&t(!!c),Ba(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return n2()||Q_()||Sy()}}const fA=hA;var Vb="@firebase/auth",Ub="1.12.0";class mA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Lt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pA(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gA(s){Ql(new ll("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=a.options;Lt(u&&!u.includes(":"),"invalid-api-key",{appName:a.name});const m={apiKey:u,authDomain:f,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s2(s)},b=new Dk(a,i,c,m);return Fk(b,t),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Ql(new ll("auth-internal",e=>{const t=gl(e.getProvider("auth").getImmediate());return(a=>new mA(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(Vb,Ub,pA(s)),mi(Vb,Ub,"esm2020")}const yA=300,vA=O_("authIdTokenMaxAge")||yA;let Bb=null;const bA=s=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>vA)return;const i=t?.token;Bb!==i&&(Bb=i,await fetch(s,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function w2(s=by()){const e=am(s,"auth");if(e.isInitialized())return e.getImmediate();const t=zk(s,{popupRedirectResolver:fA,persistence:[TC,m2,jy]}),a=O_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const u=bA(c.toString());cC(t,u,()=>u(t.currentUser)),lC(t,f=>u(f))}}const i=D_("auth");return i&&qk(t,`http://${i}`),t}function xA(){return document.getElementsByTagName("head")?.[0]??document}Mk({loadJS(s){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=i=>{const c=pi("internal-error");c.customData=i,t(c)},a.type="text/javascript",a.charset="UTF-8",xA().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gA("Browser");var zb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var il,S2;(function(){var s;function e(q,B){function H(){}H.prototype=B.prototype,q.F=B.prototype,q.prototype=new H,q.prototype.constructor=q,q.D=function(Z,$,ee){for(var O=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)O[ke-2]=arguments[ke];return B.prototype[$].apply(Z,O)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(q,B,H){H||(H=0);const Z=Array(16);if(typeof B=="string")for(var $=0;$<16;++$)Z[$]=B.charCodeAt(H++)|B.charCodeAt(H++)<<8|B.charCodeAt(H++)<<16|B.charCodeAt(H++)<<24;else for($=0;$<16;++$)Z[$]=B[H++]|B[H++]<<8|B[H++]<<16|B[H++]<<24;B=q.g[0],H=q.g[1],$=q.g[2];let ee=q.g[3],O;O=B+(ee^H&($^ee))+Z[0]+3614090360&4294967295,B=H+(O<<7&4294967295|O>>>25),O=ee+($^B&(H^$))+Z[1]+3905402710&4294967295,ee=B+(O<<12&4294967295|O>>>20),O=$+(H^ee&(B^H))+Z[2]+606105819&4294967295,$=ee+(O<<17&4294967295|O>>>15),O=H+(B^$&(ee^B))+Z[3]+3250441966&4294967295,H=$+(O<<22&4294967295|O>>>10),O=B+(ee^H&($^ee))+Z[4]+4118548399&4294967295,B=H+(O<<7&4294967295|O>>>25),O=ee+($^B&(H^$))+Z[5]+1200080426&4294967295,ee=B+(O<<12&4294967295|O>>>20),O=$+(H^ee&(B^H))+Z[6]+2821735955&4294967295,$=ee+(O<<17&4294967295|O>>>15),O=H+(B^$&(ee^B))+Z[7]+4249261313&4294967295,H=$+(O<<22&4294967295|O>>>10),O=B+(ee^H&($^ee))+Z[8]+1770035416&4294967295,B=H+(O<<7&4294967295|O>>>25),O=ee+($^B&(H^$))+Z[9]+2336552879&4294967295,ee=B+(O<<12&4294967295|O>>>20),O=$+(H^ee&(B^H))+Z[10]+4294925233&4294967295,$=ee+(O<<17&4294967295|O>>>15),O=H+(B^$&(ee^B))+Z[11]+2304563134&4294967295,H=$+(O<<22&4294967295|O>>>10),O=B+(ee^H&($^ee))+Z[12]+1804603682&4294967295,B=H+(O<<7&4294967295|O>>>25),O=ee+($^B&(H^$))+Z[13]+4254626195&4294967295,ee=B+(O<<12&4294967295|O>>>20),O=$+(H^ee&(B^H))+Z[14]+2792965006&4294967295,$=ee+(O<<17&4294967295|O>>>15),O=H+(B^$&(ee^B))+Z[15]+1236535329&4294967295,H=$+(O<<22&4294967295|O>>>10),O=B+($^ee&(H^$))+Z[1]+4129170786&4294967295,B=H+(O<<5&4294967295|O>>>27),O=ee+(H^$&(B^H))+Z[6]+3225465664&4294967295,ee=B+(O<<9&4294967295|O>>>23),O=$+(B^H&(ee^B))+Z[11]+643717713&4294967295,$=ee+(O<<14&4294967295|O>>>18),O=H+(ee^B&($^ee))+Z[0]+3921069994&4294967295,H=$+(O<<20&4294967295|O>>>12),O=B+($^ee&(H^$))+Z[5]+3593408605&4294967295,B=H+(O<<5&4294967295|O>>>27),O=ee+(H^$&(B^H))+Z[10]+38016083&4294967295,ee=B+(O<<9&4294967295|O>>>23),O=$+(B^H&(ee^B))+Z[15]+3634488961&4294967295,$=ee+(O<<14&4294967295|O>>>18),O=H+(ee^B&($^ee))+Z[4]+3889429448&4294967295,H=$+(O<<20&4294967295|O>>>12),O=B+($^ee&(H^$))+Z[9]+568446438&4294967295,B=H+(O<<5&4294967295|O>>>27),O=ee+(H^$&(B^H))+Z[14]+3275163606&4294967295,ee=B+(O<<9&4294967295|O>>>23),O=$+(B^H&(ee^B))+Z[3]+4107603335&4294967295,$=ee+(O<<14&4294967295|O>>>18),O=H+(ee^B&($^ee))+Z[8]+1163531501&4294967295,H=$+(O<<20&4294967295|O>>>12),O=B+($^ee&(H^$))+Z[13]+2850285829&4294967295,B=H+(O<<5&4294967295|O>>>27),O=ee+(H^$&(B^H))+Z[2]+4243563512&4294967295,ee=B+(O<<9&4294967295|O>>>23),O=$+(B^H&(ee^B))+Z[7]+1735328473&4294967295,$=ee+(O<<14&4294967295|O>>>18),O=H+(ee^B&($^ee))+Z[12]+2368359562&4294967295,H=$+(O<<20&4294967295|O>>>12),O=B+(H^$^ee)+Z[5]+4294588738&4294967295,B=H+(O<<4&4294967295|O>>>28),O=ee+(B^H^$)+Z[8]+2272392833&4294967295,ee=B+(O<<11&4294967295|O>>>21),O=$+(ee^B^H)+Z[11]+1839030562&4294967295,$=ee+(O<<16&4294967295|O>>>16),O=H+($^ee^B)+Z[14]+4259657740&4294967295,H=$+(O<<23&4294967295|O>>>9),O=B+(H^$^ee)+Z[1]+2763975236&4294967295,B=H+(O<<4&4294967295|O>>>28),O=ee+(B^H^$)+Z[4]+1272893353&4294967295,ee=B+(O<<11&4294967295|O>>>21),O=$+(ee^B^H)+Z[7]+4139469664&4294967295,$=ee+(O<<16&4294967295|O>>>16),O=H+($^ee^B)+Z[10]+3200236656&4294967295,H=$+(O<<23&4294967295|O>>>9),O=B+(H^$^ee)+Z[13]+681279174&4294967295,B=H+(O<<4&4294967295|O>>>28),O=ee+(B^H^$)+Z[0]+3936430074&4294967295,ee=B+(O<<11&4294967295|O>>>21),O=$+(ee^B^H)+Z[3]+3572445317&4294967295,$=ee+(O<<16&4294967295|O>>>16),O=H+($^ee^B)+Z[6]+76029189&4294967295,H=$+(O<<23&4294967295|O>>>9),O=B+(H^$^ee)+Z[9]+3654602809&4294967295,B=H+(O<<4&4294967295|O>>>28),O=ee+(B^H^$)+Z[12]+3873151461&4294967295,ee=B+(O<<11&4294967295|O>>>21),O=$+(ee^B^H)+Z[15]+530742520&4294967295,$=ee+(O<<16&4294967295|O>>>16),O=H+($^ee^B)+Z[2]+3299628645&4294967295,H=$+(O<<23&4294967295|O>>>9),O=B+($^(H|~ee))+Z[0]+4096336452&4294967295,B=H+(O<<6&4294967295|O>>>26),O=ee+(H^(B|~$))+Z[7]+1126891415&4294967295,ee=B+(O<<10&4294967295|O>>>22),O=$+(B^(ee|~H))+Z[14]+2878612391&4294967295,$=ee+(O<<15&4294967295|O>>>17),O=H+(ee^($|~B))+Z[5]+4237533241&4294967295,H=$+(O<<21&4294967295|O>>>11),O=B+($^(H|~ee))+Z[12]+1700485571&4294967295,B=H+(O<<6&4294967295|O>>>26),O=ee+(H^(B|~$))+Z[3]+2399980690&4294967295,ee=B+(O<<10&4294967295|O>>>22),O=$+(B^(ee|~H))+Z[10]+4293915773&4294967295,$=ee+(O<<15&4294967295|O>>>17),O=H+(ee^($|~B))+Z[1]+2240044497&4294967295,H=$+(O<<21&4294967295|O>>>11),O=B+($^(H|~ee))+Z[8]+1873313359&4294967295,B=H+(O<<6&4294967295|O>>>26),O=ee+(H^(B|~$))+Z[15]+4264355552&4294967295,ee=B+(O<<10&4294967295|O>>>22),O=$+(B^(ee|~H))+Z[6]+2734768916&4294967295,$=ee+(O<<15&4294967295|O>>>17),O=H+(ee^($|~B))+Z[13]+1309151649&4294967295,H=$+(O<<21&4294967295|O>>>11),O=B+($^(H|~ee))+Z[4]+4149444226&4294967295,B=H+(O<<6&4294967295|O>>>26),O=ee+(H^(B|~$))+Z[11]+3174756917&4294967295,ee=B+(O<<10&4294967295|O>>>22),O=$+(B^(ee|~H))+Z[2]+718787259&4294967295,$=ee+(O<<15&4294967295|O>>>17),O=H+(ee^($|~B))+Z[9]+3951481745&4294967295,q.g[0]=q.g[0]+B&4294967295,q.g[1]=q.g[1]+($+(O<<21&4294967295|O>>>11))&4294967295,q.g[2]=q.g[2]+$&4294967295,q.g[3]=q.g[3]+ee&4294967295}a.prototype.v=function(q,B){B===void 0&&(B=q.length);const H=B-this.blockSize,Z=this.C;let $=this.h,ee=0;for(;ee<B;){if($==0)for(;ee<=H;)i(this,q,ee),ee+=this.blockSize;if(typeof q=="string"){for(;ee<B;)if(Z[$++]=q.charCodeAt(ee++),$==this.blockSize){i(this,Z),$=0;break}}else for(;ee<B;)if(Z[$++]=q[ee++],$==this.blockSize){i(this,Z),$=0;break}}this.h=$,this.o+=B},a.prototype.A=function(){var q=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);q[0]=128;for(var B=1;B<q.length-8;++B)q[B]=0;B=this.o*8;for(var H=q.length-8;H<q.length;++H)q[H]=B&255,B/=256;for(this.v(q),q=Array(16),B=0,H=0;H<4;++H)for(let Z=0;Z<32;Z+=8)q[B++]=this.g[H]>>>Z&255;return q};function c(q,B){var H=f;return Object.prototype.hasOwnProperty.call(H,q)?H[q]:H[q]=B(q)}function u(q,B){this.h=B;const H=[];let Z=!0;for(let $=q.length-1;$>=0;$--){const ee=q[$]|0;Z&&ee==B||(H[$]=ee,Z=!1)}this.g=H}var f={};function m(q){return-128<=q&&q<128?c(q,function(B){return new u([B|0],B<0?-1:0)}):new u([q|0],q<0?-1:0)}function b(q){if(isNaN(q)||!isFinite(q))return E;if(q<0)return F(b(-q));const B=[];let H=1;for(let Z=0;q>=H;Z++)B[Z]=q/H|0,H*=4294967296;return new u(B,0)}function T(q,B){if(q.length==0)throw Error("number format error: empty string");if(B=B||10,B<2||36<B)throw Error("radix out of range: "+B);if(q.charAt(0)=="-")return F(T(q.substring(1),B));if(q.indexOf("-")>=0)throw Error('number format error: interior "-" character');const H=b(Math.pow(B,8));let Z=E;for(let ee=0;ee<q.length;ee+=8){var $=Math.min(8,q.length-ee);const O=parseInt(q.substring(ee,ee+$),B);$<8?($=b(Math.pow(B,$)),Z=Z.j($).add(b(O))):(Z=Z.j(H),Z=Z.add(b(O)))}return Z}var E=m(0),C=m(1),L=m(16777216);s=u.prototype,s.m=function(){if(V(this))return-F(this).m();let q=0,B=1;for(let H=0;H<this.g.length;H++){const Z=this.i(H);q+=(Z>=0?Z:4294967296+Z)*B,B*=4294967296}return q},s.toString=function(q){if(q=q||10,q<2||36<q)throw Error("radix out of range: "+q);if(P(this))return"0";if(V(this))return"-"+F(this).toString(q);const B=b(Math.pow(q,6));var H=this;let Z="";for(;;){const $=Y(H,B).g;H=K(H,$.j(B));let ee=((H.g.length>0?H.g[0]:H.h)>>>0).toString(q);if(H=$,P(H))return ee+Z;for(;ee.length<6;)ee="0"+ee;Z=ee+Z}},s.i=function(q){return q<0?0:q<this.g.length?this.g[q]:this.h};function P(q){if(q.h!=0)return!1;for(let B=0;B<q.g.length;B++)if(q.g[B]!=0)return!1;return!0}function V(q){return q.h==-1}s.l=function(q){return q=K(this,q),V(q)?-1:P(q)?0:1};function F(q){const B=q.g.length,H=[];for(let Z=0;Z<B;Z++)H[Z]=~q.g[Z];return new u(H,~q.h).add(C)}s.abs=function(){return V(this)?F(this):this},s.add=function(q){const B=Math.max(this.g.length,q.g.length),H=[];let Z=0;for(let $=0;$<=B;$++){let ee=Z+(this.i($)&65535)+(q.i($)&65535),O=(ee>>>16)+(this.i($)>>>16)+(q.i($)>>>16);Z=O>>>16,ee&=65535,O&=65535,H[$]=O<<16|ee}return new u(H,H[H.length-1]&-2147483648?-1:0)};function K(q,B){return q.add(F(B))}s.j=function(q){if(P(this)||P(q))return E;if(V(this))return V(q)?F(this).j(F(q)):F(F(this).j(q));if(V(q))return F(this.j(F(q)));if(this.l(L)<0&&q.l(L)<0)return b(this.m()*q.m());const B=this.g.length+q.g.length,H=[];for(var Z=0;Z<2*B;Z++)H[Z]=0;for(Z=0;Z<this.g.length;Z++)for(let $=0;$<q.g.length;$++){const ee=this.i(Z)>>>16,O=this.i(Z)&65535,ke=q.i($)>>>16,Ie=q.i($)&65535;H[2*Z+2*$]+=O*Ie,G(H,2*Z+2*$),H[2*Z+2*$+1]+=ee*Ie,G(H,2*Z+2*$+1),H[2*Z+2*$+1]+=O*ke,G(H,2*Z+2*$+1),H[2*Z+2*$+2]+=ee*ke,G(H,2*Z+2*$+2)}for(q=0;q<B;q++)H[q]=H[2*q+1]<<16|H[2*q];for(q=B;q<2*B;q++)H[q]=0;return new u(H,0)};function G(q,B){for(;(q[B]&65535)!=q[B];)q[B+1]+=q[B]>>>16,q[B]&=65535,B++}function se(q,B){this.g=q,this.h=B}function Y(q,B){if(P(B))throw Error("division by zero");if(P(q))return new se(E,E);if(V(q))return B=Y(F(q),B),new se(F(B.g),F(B.h));if(V(B))return B=Y(q,F(B)),new se(F(B.g),B.h);if(q.g.length>30){if(V(q)||V(B))throw Error("slowDivide_ only works with positive integers.");for(var H=C,Z=B;Z.l(q)<=0;)H=fe(H),Z=fe(Z);var $=je(H,1),ee=je(Z,1);for(Z=je(Z,2),H=je(H,2);!P(Z);){var O=ee.add(Z);O.l(q)<=0&&($=$.add(H),ee=O),Z=je(Z,1),H=je(H,1)}return B=K(q,$.j(B)),new se($,B)}for($=E;q.l(B)>=0;){for(H=Math.max(1,Math.floor(q.m()/B.m())),Z=Math.ceil(Math.log(H)/Math.LN2),Z=Z<=48?1:Math.pow(2,Z-48),ee=b(H),O=ee.j(B);V(O)||O.l(q)>0;)H-=Z,ee=b(H),O=ee.j(B);P(ee)&&(ee=C),$=$.add(ee),q=K(q,O)}return new se($,q)}s.B=function(q){return Y(this,q).h},s.and=function(q){const B=Math.max(this.g.length,q.g.length),H=[];for(let Z=0;Z<B;Z++)H[Z]=this.i(Z)&q.i(Z);return new u(H,this.h&q.h)},s.or=function(q){const B=Math.max(this.g.length,q.g.length),H=[];for(let Z=0;Z<B;Z++)H[Z]=this.i(Z)|q.i(Z);return new u(H,this.h|q.h)},s.xor=function(q){const B=Math.max(this.g.length,q.g.length),H=[];for(let Z=0;Z<B;Z++)H[Z]=this.i(Z)^q.i(Z);return new u(H,this.h^q.h)};function fe(q){const B=q.g.length+1,H=[];for(let Z=0;Z<B;Z++)H[Z]=q.i(Z)<<1|q.i(Z-1)>>>31;return new u(H,q.h)}function je(q,B){const H=B>>5;B%=32;const Z=q.g.length-H,$=[];for(let ee=0;ee<Z;ee++)$[ee]=B>0?q.i(ee+H)>>>B|q.i(ee+H+1)<<32-B:q.i(ee+H);return new u($,q.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,S2=a,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=b,u.fromString=T,il=u}).apply(typeof zb<"u"?zb:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var T2,pd,E2,Ef,Pg,N2,j2,k2;(function(){var s,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var j=0;j<p.length;++j){var R=p[j];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var a=t(this);function i(p,j){if(j)e:{var R=a;p=p.split(".");for(var W=0;W<p.length-1;W++){var ye=p[W];if(!(ye in R))break e;R=R[ye]}p=p[p.length-1],W=R[p],j=j(W),j!=W&&j!=null&&e(R,p,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(p){return p||function(j){var R=[],W;for(W in j)Object.prototype.hasOwnProperty.call(j,W)&&R.push([W,j[W]]);return R}});var c=c||{},u=this||self;function f(p){var j=typeof p;return j=="object"&&p!=null||j=="function"}function m(p,j,R){return p.call.apply(p.bind,arguments)}function b(p,j,R){return b=m,b.apply(null,arguments)}function T(p,j){var R=Array.prototype.slice.call(arguments,1);return function(){var W=R.slice();return W.push.apply(W,arguments),p.apply(this,W)}}function E(p,j){function R(){}R.prototype=j.prototype,p.Z=j.prototype,p.prototype=new R,p.prototype.constructor=p,p.Ob=function(W,ye,Ae){for(var ot=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)ot[qt-2]=arguments[qt];return j.prototype[ye].apply(W,ot)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function L(p){const j=p.length;if(j>0){const R=Array(j);for(let W=0;W<j;W++)R[W]=p[W];return R}return[]}function P(p,j){for(let W=1;W<arguments.length;W++){const ye=arguments[W];var R=typeof ye;if(R=R!="object"?R:ye?Array.isArray(ye)?"array":R:"null",R=="array"||R=="object"&&typeof ye.length=="number"){R=p.length||0;const Ae=ye.length||0;p.length=R+Ae;for(let ot=0;ot<Ae;ot++)p[R+ot]=ye[ot]}else p.push(ye)}}class V{constructor(j,R){this.i=j,this.j=R,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function F(p){u.setTimeout(()=>{throw p},0)}function K(){var p=q;let j=null;return p.g&&(j=p.g,p.g=p.g.next,p.g||(p.h=null),j.next=null),j}class G{constructor(){this.h=this.g=null}add(j,R){const W=se.get();W.set(j,R),this.h?this.h.next=W:this.g=W,this.h=W}}var se=new V(()=>new Y,p=>p.reset());class Y{constructor(){this.next=this.g=this.h=null}set(j,R){this.h=j,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,je=!1,q=new G,B=()=>{const p=Promise.resolve(void 0);fe=()=>{p.then(H)}};function H(){for(var p;p=K();){try{p.h.call(p.g)}catch(R){F(R)}var j=se;j.j(p),j.h<100&&(j.h++,p.next=j.g,j.g=p)}je=!1}function Z(){this.u=this.u,this.C=this.C}Z.prototype.u=!1,Z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Z.prototype[Symbol.dispose]=function(){this.dispose()},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(p,j){this.type=p,this.g=this.target=j,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var ee=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var p=!1,j=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const R=()=>{};u.addEventListener("test",R,j),u.removeEventListener("test",R,j)}catch{}return p})();function O(p){return/^[\s\xa0]*$/.test(p)}function ke(p,j){$.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,j)}E(ke,$),ke.prototype.init=function(p,j){const R=this.type=p.type,W=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=j,j=p.relatedTarget,j||(R=="mouseover"?j=p.fromElement:R=="mouseout"&&(j=p.toElement)),this.relatedTarget=j,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),te=0;function ve(p,j,R,W,ye){this.listener=p,this.proxy=null,this.src=j,this.type=R,this.capture=!!W,this.ha=ye,this.key=++te,this.da=this.fa=!1}function Le(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function De(p,j,R){for(const W in p)j.call(R,p[W],W,p)}function Je(p,j){for(const R in p)j.call(void 0,p[R],R,p)}function Q(p){const j={};for(const R in p)j[R]=p[R];return j}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ze(p,j){let R,W;for(let ye=1;ye<arguments.length;ye++){W=arguments[ye];for(R in W)p[R]=W[R];for(let Ae=0;Ae<ue.length;Ae++)R=ue[Ae],Object.prototype.hasOwnProperty.call(W,R)&&(p[R]=W[R])}}function Oe(p){this.src=p,this.g={},this.h=0}Oe.prototype.add=function(p,j,R,W,ye){const Ae=p.toString();p=this.g[Ae],p||(p=this.g[Ae]=[],this.h++);const ot=Be(p,j,W,ye);return ot>-1?(j=p[ot],R||(j.fa=!1)):(j=new ve(j,this.src,Ae,!!W,ye),j.fa=R,p.push(j)),j};function de(p,j){const R=j.type;if(R in p.g){var W=p.g[R],ye=Array.prototype.indexOf.call(W,j,void 0),Ae;(Ae=ye>=0)&&Array.prototype.splice.call(W,ye,1),Ae&&(Le(j),p.g[R].length==0&&(delete p.g[R],p.h--))}}function Be(p,j,R,W){for(let ye=0;ye<p.length;++ye){const Ae=p[ye];if(!Ae.da&&Ae.listener==j&&Ae.capture==!!R&&Ae.ha==W)return ye}return-1}var le="closure_lm_"+(Math.random()*1e6|0),ge={};function be(p,j,R,W,ye){if(Array.isArray(j)){for(let Ae=0;Ae<j.length;Ae++)be(p,j[Ae],R,W,ye);return null}return R=Ce(R),p&&p[Ie]?p.J(j,R,f(W)?!!W.capture:!1,ye):st(p,j,R,!1,W,ye)}function st(p,j,R,W,ye,Ae){if(!j)throw Error("Invalid event type");const ot=f(ye)?!!ye.capture:!!ye;let qt=Ue(p);if(qt||(p[le]=qt=new Oe(p)),R=qt.add(j,R,W,ot,Ae),R.proxy)return R;if(W=Te(),R.proxy=W,W.src=p,W.listener=R,p.addEventListener)ee||(ye=ot),ye===void 0&&(ye=!1),p.addEventListener(j.toString(),W,ye);else if(p.attachEvent)p.attachEvent(Nt(j.toString()),W);else if(p.addListener&&p.removeListener)p.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Te(){function p(R){return j.call(p.src,p.listener,R)}const j=Ee;return p}function dt(p,j,R,W,ye){if(Array.isArray(j))for(var Ae=0;Ae<j.length;Ae++)dt(p,j[Ae],R,W,ye);else W=f(W)?!!W.capture:!!W,R=Ce(R),p&&p[Ie]?(p=p.i,Ae=String(j).toString(),Ae in p.g&&(j=p.g[Ae],R=Be(j,R,W,ye),R>-1&&(Le(j[R]),Array.prototype.splice.call(j,R,1),j.length==0&&(delete p.g[Ae],p.h--)))):p&&(p=Ue(p))&&(j=p.g[j.toString()],p=-1,j&&(p=Be(j,R,W,ye)),(R=p>-1?j[p]:null)&&Tt(R))}function Tt(p){if(typeof p!="number"&&p&&!p.da){var j=p.src;if(j&&j[Ie])de(j.i,p);else{var R=p.type,W=p.proxy;j.removeEventListener?j.removeEventListener(R,W,p.capture):j.detachEvent?j.detachEvent(Nt(R),W):j.addListener&&j.removeListener&&j.removeListener(W),(R=Ue(j))?(de(R,p),R.h==0&&(R.src=null,j[le]=null)):Le(p)}}}function Nt(p){return p in ge?ge[p]:ge[p]="on"+p}function Ee(p,j){if(p.da)p=!0;else{j=new ke(j,this);const R=p.listener,W=p.ha||p.src;p.fa&&Tt(p),p=R.call(W,j)}return p}function Ue(p){return p=p[le],p instanceof Oe?p:null}var X="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ce(p){return typeof p=="function"?p:(p[X]||(p[X]=function(j){return p.handleEvent(j)}),p[X])}function Ke(){Z.call(this),this.i=new Oe(this),this.M=this,this.G=null}E(Ke,Z),Ke.prototype[Ie]=!0,Ke.prototype.removeEventListener=function(p,j,R,W){dt(this,p,j,R,W)};function $e(p,j){var R,W=p.G;if(W)for(R=[];W;W=W.G)R.push(W);if(p=p.M,W=j.type||j,typeof j=="string")j=new $(j,p);else if(j instanceof $)j.target=j.target||p;else{var ye=j;j=new $(W,p),ze(j,ye)}ye=!0;let Ae,ot;if(R)for(ot=R.length-1;ot>=0;ot--)Ae=j.g=R[ot],ye=Ve(Ae,W,!0,j)&&ye;if(Ae=j.g=p,ye=Ve(Ae,W,!0,j)&&ye,ye=Ve(Ae,W,!1,j)&&ye,R)for(ot=0;ot<R.length;ot++)Ae=j.g=R[ot],ye=Ve(Ae,W,!1,j)&&ye}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var p=this.i;for(const j in p.g){const R=p.g[j];for(let W=0;W<R.length;W++)Le(R[W]);delete p.g[j],p.h--}}this.G=null},Ke.prototype.J=function(p,j,R,W){return this.i.add(String(p),j,!1,R,W)},Ke.prototype.K=function(p,j,R,W){return this.i.add(String(p),j,!0,R,W)};function Ve(p,j,R,W){if(j=p.i.g[String(j)],!j)return!0;j=j.concat();let ye=!0;for(let Ae=0;Ae<j.length;++Ae){const ot=j[Ae];if(ot&&!ot.da&&ot.capture==R){const qt=ot.listener,Zn=ot.ha||ot.src;ot.fa&&de(p.i,ot),ye=qt.call(Zn,W)!==!1&&ye}}return ye&&!W.defaultPrevented}function it(p,j){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=b(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:u.setTimeout(p,j||0)}function xt(p){p.g=it(()=>{p.g=null,p.i&&(p.i=!1,xt(p))},p.l);const j=p.h;p.h=null,p.m.apply(null,j)}class rt extends Z{constructor(j,R){super(),this.m=j,this.l=R,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tn(p){Z.call(this),this.h=p,this.g={}}E(tn,Z);var vn=[];function Fn(p){De(p.g,function(j,R){this.g.hasOwnProperty(R)&&Tt(j)},p),p.g={}}tn.prototype.N=function(){tn.Z.N.call(this),Fn(this)},tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jn=u.JSON.stringify,qn=u.JSON.parse,ks=class{stringify(p){return u.JSON.stringify(p,void 0)}parse(p){return u.JSON.parse(p,void 0)}};function hn(){}function We(){}var et={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function at(){$.call(this,"d")}E(at,$);function jt(){$.call(this,"c")}E(jt,$);var _t={},At=null;function yt(){return At=At||new Ke}_t.Ia="serverreachability";function ae(p){$.call(this,_t.Ia,p)}E(ae,$);function xe(p){const j=yt();$e(j,new ae(j))}_t.STAT_EVENT="statevent";function lt(p,j){$.call(this,_t.STAT_EVENT,p),this.stat=j}E(lt,$);function ht(p){const j=yt();$e(j,new lt(j,p))}_t.Ja="timingevent";function Pt(p,j){$.call(this,_t.Ja,p),this.size=j}E(Pt,$);function _n(p,j){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){p()},j)}function nn(){this.g=!0}nn.prototype.ua=function(){this.g=!1};function en(p,j,R,W,ye,Ae){p.info(function(){if(p.g)if(Ae){var ot="",qt=Ae.split("&");for(let gn=0;gn<qt.length;gn++){var Zn=qt[gn].split("=");if(Zn.length>1){const $n=Zn[0];Zn=Zn[1];const Er=$n.split("_");ot=Er.length>=2&&Er[1]=="type"?ot+($n+"="+Zn+"&"):ot+($n+"=redacted&")}}}else ot=null;else ot=Ae;return"XMLHTTP REQ ("+W+") [attempt "+ye+"]: "+j+`
`+R+`
`+ot})}function pn(p,j,R,W,ye,Ae,ot){p.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ye+"]: "+j+`
`+R+`
`+Ae+" "+ot})}function wn(p,j,R,W){p.info(function(){return"XMLHTTP TEXT ("+j+"): "+ls(p,R)+(W?" "+W:"")})}function Gn(p,j){p.info(function(){return"TIMEOUT: "+j})}nn.prototype.info=function(){};function ls(p,j){if(!p.g)return j;if(!j)return null;try{const Ae=JSON.parse(j);if(Ae){for(p=0;p<Ae.length;p++)if(Array.isArray(Ae[p])){var R=Ae[p];if(!(R.length<2)){var W=R[1];if(Array.isArray(W)&&!(W.length<1)){var ye=W[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(let ot=1;ot<W.length;ot++)W[ot]=""}}}}return Jn(Ae)}catch{return j}}var me={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},He={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tt;function Ze(){}E(Ze,hn),Ze.prototype.g=function(){return new XMLHttpRequest},tt=new Ze;function pt(p){return encodeURIComponent(String(p))}function wt(p){var j=1;p=p.split(":");const R=[];for(;j>0&&p.length;)R.push(p.shift()),j--;return p.length&&R.push(p.join(":")),R}function Ut(p,j,R,W){this.j=p,this.i=j,this.l=R,this.S=W||1,this.V=new tn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xt}function Xt(){this.i=null,this.g="",this.h=!1}var Wt={},kn={};function he(p,j,R){p.M=1,p.A=Ni(ss(j)),p.u=R,p.R=!0,ct(p,null)}function ct(p,j){p.F=Date.now(),Cn(p),p.B=ss(p.A);var R=p.B,W=p.S;Array.isArray(W)||(W=[String(W)]),vo(R.i,"t",W),p.C=0,R=p.j.L,p.h=new Xt,p.g=So(p.j,R?j:null,!p.u),p.P>0&&(p.O=new rt(b(p.Y,p,p.g),p.P)),j=p.V,R=p.g,W=p.ba;var ye="readystatechange";Array.isArray(ye)||(ye&&(vn[0]=ye.toString()),ye=vn);for(let Ae=0;Ae<ye.length;Ae++){const ot=be(R,ye[Ae],W||j.handleEvent,!1,j.h||j);if(!ot)break;j.g[ot.key]=ot}j=p.J?Q(p.J):{},p.u?(p.v||(p.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,j)):(p.v="GET",p.g.ea(p.B,p.v,null,j)),xe(),en(p.i,p.v,p.B,p.l,p.S,p.u)}Ut.prototype.ba=function(p){p=p.target;const j=this.O;j&&dr(p)==3?j.j():this.Y(p)},Ut.prototype.Y=function(p){try{if(p==this.g)e:{const qt=dr(this.g),Zn=this.g.ya(),gn=this.g.ca();if(!(qt<3)&&(qt!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||qt!=4||Zn==7||(Zn==8||gn<=0?xe(3):xe(2)),cs(this);var j=this.g.ca();this.X=j;var R=Ot(this);if(this.o=j==200,pn(this.i,this.v,this.B,this.l,this.S,qt,j),this.o){if(this.U&&!this.L){t:{if(this.g){var W,ye=this.g;if((W=ye.g?ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(W)){var Ae=W;break t}}Ae=null}if(p=Ae)wn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ps(this,p);else{this.o=!1,this.m=3,ht(12),ns(this),ys(this);break e}}if(this.R){p=!0;let $n;for(;!this.K&&this.C<R.length;)if($n=Un(this,R),$n==kn){qt==4&&(this.m=4,ht(14),p=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if($n==Wt){this.m=4,ht(15),wn(this.i,this.l,R,"[Invalid Chunk]"),p=!1;break}else wn(this.i,this.l,$n,null),Ps(this,$n);if(Bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||R.length!=0||this.h.h||(this.m=1,ht(16),p=!1),this.o=this.o&&p,!p)wn(this.i,this.l,R,"[Invalid Chunked Response]"),ns(this),ys(this);else if(R.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),hr(ot),ot.P=!0,ht(11))}}else wn(this.i,this.l,R,null),Ps(this,R);qt==4&&ns(this),this.o&&!this.K&&(qt==4?fc(this.j,this):(this.o=!1,Cn(this)))}else Sa(this.g),j==400&&R.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),ns(this),ys(this)}}}catch{}};function Ot(p){if(!Bt(p))return p.g.la();const j=An(p.g);if(j==="")return"";let R="";const W=j.length,ye=dr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return ns(p),ys(p),"";p.h.i=new u.TextDecoder}for(let Ae=0;Ae<W;Ae++)p.h.h=!0,R+=p.h.i.decode(j[Ae],{stream:!(ye&&Ae==W-1)});return j.length=0,p.h.g+=R,p.C=0,p.h.g}function Bt(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Un(p,j){var R=p.C,W=j.indexOf(`
`,R);return W==-1?kn:(R=Number(j.substring(R,W)),isNaN(R)?Wt:(W+=1,W+R>j.length?kn:(j=j.slice(W,W+R),p.C=W+R,j)))}Ut.prototype.cancel=function(){this.K=!0,ns(this)};function Cn(p){p.T=Date.now()+p.H,Bn(p,p.H)}function Bn(p,j){if(p.D!=null)throw Error("WatchDog timer not null");p.D=_n(b(p.aa,p),j)}function cs(p){p.D&&(u.clearTimeout(p.D),p.D=null)}Ut.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Gn(this.i,this.B),this.M!=2&&(xe(),ht(17)),ns(this),this.m=2,ys(this)):Bn(this,this.T-p)};function ys(p){p.j.I==0||p.K||fc(p.j,p)}function ns(p){cs(p);var j=p.O;j&&typeof j.dispose=="function"&&j.dispose(),p.O=null,Fn(p.V),p.g&&(j=p.g,p.g=null,j.abort(),j.dispose())}function Ps(p,j){try{var R=p.j;if(R.I!=0&&(R.g==p||Rt(R.h,p))){if(!p.L&&Rt(R.h,p)&&R.I==3){try{var W=R.Ba.g.parse(j)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ye=W;if(ye[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<p.F)Ri(R),ia(R);else break e;ei(R),ht(18)}}else R.xa=ye[1],0<R.xa-R.K&&ye[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=_n(b(R.Va,R),6e3));cr(R.h)<=1&&R.ta&&(R.ta=void 0)}else oa(R,11)}else if((p.L||R.g==p)&&Ri(R),!O(j))for(ye=R.Ba.g.parse(j),j=0;j<ye.length;j++){let gn=ye[j];const $n=gn[0];if(!($n<=R.K))if(R.K=$n,gn=gn[1],R.I==2)if(gn[0]=="c"){R.M=gn[1],R.ba=gn[2];const Er=gn[3];Er!=null&&(R.ka=Er,R.j.info("VER="+R.ka));const la=gn[4];la!=null&&(R.za=la,R.j.info("SVER="+R.za));const Nr=gn[5];Nr!=null&&typeof Nr=="number"&&Nr>0&&(W=1.5*Nr,R.O=W,R.j.info("backChannelRequestTimeoutMs_="+W)),W=R;const qr=p.g;if(qr){const Na=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Na){var Ae=W.h;Ae.g||Na.indexOf("spdy")==-1&&Na.indexOf("quic")==-1&&Na.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(Sr(Ae,Ae.h),Ae.h=null))}if(W.G){const Di=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;Di&&(W.wa=Di,Sn(W.J,W.G,Di))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-p.F,R.j.info("Handshake RTT: "+R.T+"ms")),W=R;var ot=p;if(W.na=mc(W,W.L?W.ba:null,W.W),ot.L){ur(W.h,ot);var qt=ot,Zn=W.O;Zn&&(qt.H=Zn),qt.D&&(cs(qt),Cn(qt)),W.g=ot}else El(W);R.i.length>0&&In(R)}else gn[0]!="stop"&&gn[0]!="close"||oa(R,7);else R.I==3&&(gn[0]=="stop"||gn[0]=="close"?gn[0]=="stop"?oa(R,7):Kn(R):gn[0]!="noop"&&R.l&&R.l.qa(gn),R.A=0)}}xe(4)}catch{}}var Hn=class{constructor(p,j){this.g=p,this.map=j}};function qa(p){this.l=p||10,u.PerformanceNavigationTiming?(p=u.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ti(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function cr(p){return p.h?1:p.g?p.g.size:0}function Rt(p,j){return p.h?p.h==j:p.g?p.g.has(j):!1}function Sr(p,j){p.g?p.g.add(j):p.h=j}function ur(p,j){p.h&&p.h==j?p.h=null:p.g&&p.g.has(j)&&p.g.delete(j)}qa.prototype.cancel=function(){if(this.i=Br(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Br(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let j=p.i;for(const R of p.g.values())j=j.concat(R.G);return j}return L(p.i)}var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ha(p,j){if(p){p=p.split("&");for(let R=0;R<p.length;R++){const W=p[R].indexOf("=");let ye,Ae=null;W>=0?(ye=p[R].substring(0,W),Ae=p[R].substring(W+1)):ye=p[R],j(ye,Ae?decodeURIComponent(Ae.replace(/\+/g," ")):"")}}}function Qs(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;p instanceof Qs?(this.l=p.l,rs(this,p.j),this.o=p.o,this.g=p.g,$a(this,p.u),this.h=p.h,bl(this,dc(p.i)),this.m=p.m):p&&(j=String(p).match(Ei))?(this.l=!1,rs(this,j[1]||"",!0),this.o=sa(j[2]||""),this.g=sa(j[3]||"",!0),$a(this,j[4]),this.h=sa(j[5]||"",!0),bl(this,j[6]||"",!0),this.m=sa(j[7]||"")):(this.l=!1,this.i=new Ga(null,this.l))}Qs.prototype.toString=function(){const p=[];var j=this.j;j&&p.push(ji(j,yo,!0),":");var R=this.g;return(R||j=="file")&&(p.push("//"),(j=this.o)&&p.push(ji(j,yo,!0),"@"),p.push(pt(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&p.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&p.push("/"),p.push(ji(R,R.charAt(0)=="/"?xl:lc,!0))),(R=this.i.toString())&&p.push("?",R),(R=this.m)&&p.push("#",ji(R,cc)),p.join("")},Qs.prototype.resolve=function(p){const j=ss(this);let R=!!p.j;R?rs(j,p.j):R=!!p.o,R?j.o=p.o:R=!!p.g,R?j.g=p.g:R=p.u!=null;var W=p.h;if(R)$a(j,p.u);else if(R=!!p.h){if(W.charAt(0)!="/")if(this.g&&!this.h)W="/"+W;else{var ye=j.h.lastIndexOf("/");ye!=-1&&(W=j.h.slice(0,ye+1)+W)}if(ye=W,ye==".."||ye==".")W="";else if(ye.indexOf("./")!=-1||ye.indexOf("/.")!=-1){W=ye.lastIndexOf("/",0)==0,ye=ye.split("/");const Ae=[];for(let ot=0;ot<ye.length;){const qt=ye[ot++];qt=="."?W&&ot==ye.length&&Ae.push(""):qt==".."?((Ae.length>1||Ae.length==1&&Ae[0]!="")&&Ae.pop(),W&&ot==ye.length&&Ae.push("")):(Ae.push(qt),W=!0)}W=Ae.join("/")}else W=ye}return R?j.h=W:R=p.i.toString()!=="",R?bl(j,dc(p.i)):R=!!p.m,R&&(j.m=p.m),j};function ss(p){return new Qs(p)}function rs(p,j,R){p.j=R?sa(j,!0):j,p.j&&(p.j=p.j.replace(/:$/,""))}function $a(p,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);p.u=j}else p.u=null}function bl(p,j,R){j instanceof Ga?(p.i=j,bo(p.i,p.l)):(R||(j=ji(j,Wa)),p.i=new Ga(j,p.l))}function Sn(p,j,R){p.i.set(j,R)}function Ni(p){return Sn(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function sa(p,j){return p?j?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function ji(p,j,R){return typeof p=="string"?(p=encodeURI(p).replace(j,Xs),R&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Xs(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var yo=/[#\/\?@]/g,lc=/[#\?:]/g,xl=/[#\?]/g,Wa=/[#\?@]/g,cc=/#/g;function Ga(p,j){this.h=this.g=null,this.i=p||null,this.j=!!j}function Js(p){p.g||(p.g=new Map,p.h=0,p.i&&Ha(p.i,function(j,R){p.add(decodeURIComponent(j.replace(/\+/g," ")),R)}))}s=Ga.prototype,s.add=function(p,j){Js(this),this.i=null,p=Ya(this,p);let R=this.g.get(p);return R||this.g.set(p,R=[]),R.push(j),this.h+=1,this};function uc(p,j){Js(p),j=Ya(p,j),p.g.has(j)&&(p.i=null,p.h-=p.g.get(j).length,p.g.delete(j))}function _l(p,j){return Js(p),j=Ya(p,j),p.g.has(j)}s.forEach=function(p,j){Js(this),this.g.forEach(function(R,W){R.forEach(function(ye){p.call(j,ye,W,this)},this)},this)};function wl(p,j){Js(p);let R=[];if(typeof j=="string")_l(p,j)&&(R=R.concat(p.g.get(Ya(p,j))));else for(p=Array.from(p.g.values()),j=0;j<p.length;j++)R=R.concat(p[j]);return R}s.set=function(p,j){return Js(this),this.i=null,p=Ya(this,p),_l(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[j]),this.h+=1,this},s.get=function(p,j){return p?(p=wl(this,p),p.length>0?String(p[0]):j):j};function vo(p,j,R){uc(p,j),R.length>0&&(p.i=null,p.g.set(Ya(p,j),L(R)),p.h+=R.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],j=Array.from(this.g.keys());for(let W=0;W<j.length;W++){var R=j[W];const ye=pt(R);R=wl(this,R);for(let Ae=0;Ae<R.length;Ae++){let ot=ye;R[Ae]!==""&&(ot+="="+pt(R[Ae])),p.push(ot)}}return this.i=p.join("&")};function dc(p){const j=new Ga;return j.i=p.i,p.g&&(j.g=new Map(p.g),j.h=p.h),j}function Ya(p,j){return j=String(j),p.j&&(j=j.toLowerCase()),j}function bo(p,j){j&&!p.j&&(Js(p),p.i=null,p.g.forEach(function(R,W){const ye=W.toLowerCase();W!=ye&&(uc(this,W),vo(this,ye,R))},p)),p.j=j}function zr(p,j){const R=new nn;if(u.Image){const W=new Image;W.onload=T(Tr,R,"TestLoadImage: loaded",!0,j,W),W.onerror=T(Tr,R,"TestLoadImage: error",!1,j,W),W.onabort=T(Tr,R,"TestLoadImage: abort",!1,j,W),W.ontimeout=T(Tr,R,"TestLoadImage: timeout",!1,j,W),u.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=p}else j(!1)}function Sl(p,j){const R=new nn,W=new AbortController,ye=setTimeout(()=>{W.abort(),Tr(R,"TestPingServer: timeout",!1,j)},1e4);fetch(p,{signal:W.signal}).then(Ae=>{clearTimeout(ye),Ae.ok?Tr(R,"TestPingServer: ok",!0,j):Tr(R,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ye),Tr(R,"TestPingServer: error",!1,j)})}function Tr(p,j,R,W,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),W(R)}catch{}}function Ka(){this.g=new ks}function qs(p){this.i=p.Sb||null,this.h=p.ab||!1}E(qs,hn),qs.prototype.g=function(){return new ki(this.i,this.h)};function ki(p,j){Ke.call(this),this.H=p,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ki,Ke),s=ki.prototype,s.open=function(p,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=j,this.readyState=1,Fr(this)},s.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(j.body=p),(this.H||u).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xa(this)),this.readyState=0},s.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qa(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qa(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}s.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var j=p.value?p.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!p.done}))&&(this.response=this.responseText+=j)}p.done?Xa(this):Fr(this),this.readyState==3&&Qa(this)}},s.Oa=function(p){this.g&&(this.response=this.responseText=p,Xa(this))},s.Na=function(p){this.g&&(this.response=p,Xa(this))},s.ga=function(){this.g&&Xa(this)};function Xa(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Fr(p)}s.setRequestHeader=function(p,j){this.A.append(p,j)},s.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],j=this.h.entries();for(var R=j.next();!R.done;)R=R.value,p.push(R[0]+": "+R[1]),R=j.next();return p.join(`\r
`)};function Fr(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Zs(p){let j="";return De(p,function(R,W){j+=W,j+=":",j+=R,j+=`\r
`}),j}function Ci(p,j,R){e:{for(W in R){var W=!1;break e}W=!0}W||(R=Zs(R),typeof p=="string"?R!=null&&pt(R):Sn(p,j,R))}function Nn(p){Ke.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Nn,Ke);var ra=/^https?$/i,Tl=["POST","PUT"];s=Nn.prototype,s.Fa=function(p){this.H=p},s.ea=function(p,j,R,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);j=j?j.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tt.g(),this.g.onreadystatechange=C(b(this.Ca,this));try{this.B=!0,this.g.open(j,String(p),!0),this.B=!1}catch(Ae){aa(this,Ae);return}if(p=R||"",R=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ye in W)R.set(ye,W[ye]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Ae of W.keys())R.set(Ae,W.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(R.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),ye=u.FormData&&p instanceof u.FormData,!(Array.prototype.indexOf.call(Tl,j,void 0)>=0)||W||ye||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,ot]of R)this.g.setRequestHeader(Ae,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(Ae){aa(this,Ae)}};function aa(p,j){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=j,p.o=5,xo(p),wa(p)}function xo(p){p.A||(p.A=!0,$e(p,"complete"),$e(p,"error"))}s.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,$e(this,"complete"),$e(this,"abort"),wa(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wa(this,!0)),Nn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ja(this):this.Xa())},s.Xa=function(){Ja(this)};function Ja(p){if(p.h&&typeof c<"u"){if(p.v&&dr(p)==4)setTimeout(p.Ca.bind(p),0);else if($e(p,"readystatechange"),dr(p)==4){p.h=!1;try{const Ae=p.ca();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var R;if(!(R=j)){var W;if(W=Ae===0){let ot=String(p.D).match(Ei)[1]||null;!ot&&u.self&&u.self.location&&(ot=u.self.location.protocol.slice(0,-1)),W=!ra.test(ot?ot.toLowerCase():"")}R=W}if(R)$e(p,"complete"),$e(p,"success");else{p.o=6;try{var ye=dr(p)>2?p.g.statusText:""}catch{ye=""}p.l=ye+" ["+p.ca()+"]",xo(p)}}finally{wa(p)}}}}function wa(p,j){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const R=p.g;p.g=null,j||$e(p,"ready");try{R.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function dr(p){return p.g?p.g.readyState:0}s.ca=function(){try{return dr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(p){if(this.g){var j=this.g.responseText;return p&&j.indexOf(p)==0&&(j=j.substring(p.length)),qn(j)}};function An(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Sa(p){const j={};p=(p.g&&dr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<p.length;W++){if(O(p[W]))continue;var R=wt(p[W]);const ye=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const Ae=j[ye]||[];j[ye]=Ae,Ae.push(R)}Je(j,function(W){return W.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(p,j,R){return R&&R.internalChannelParams&&R.internalChannelParams[p]||j}function Za(p){this.za=0,this.i=[],this.j=new nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vs("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vs("baseRetryDelayMs",5e3,p),this.Za=vs("retryDelaySeedMs",1e4,p),this.Ta=vs("forwardChannelMaxRetries",2,p),this.va=vs("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new qa(p&&p.concurrentRequestLimit),this.Ba=new Ka,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Za.prototype,s.ka=8,s.I=1,s.connect=function(p,j,R,W){ht(0),this.W=p,this.H=j||{},R&&W!==void 0&&(this.H.OSID=R,this.H.OAID=W),this.F=this.X,this.J=mc(this,null,this.W),In(this)};function Kn(p){if(_o(p),p.I==3){var j=p.V++,R=ss(p.J);if(Sn(R,"SID",p.M),Sn(R,"RID",j),Sn(R,"TYPE","terminate"),Ai(p,R),j=new Ut(p,p.j,j),j.M=2,j.A=Ni(ss(R)),R=!1,u.navigator&&u.navigator.sendBeacon)try{R=u.navigator.sendBeacon(j.A.toString(),"")}catch{}!R&&u.Image&&(new Image().src=j.A,R=!0),R||(j.g=So(j.j,null),j.g.ea(j.A)),j.F=Date.now(),Cn(j)}jl(p)}function ia(p){p.g&&(hr(p),p.g.cancel(),p.g=null)}function _o(p){ia(p),p.v&&(u.clearTimeout(p.v),p.v=null),Ri(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&u.clearTimeout(p.m),p.m=null)}function In(p){if(!Ti(p.h)&&!p.m){p.m=!0;var j=p.Ea;fe||B(),je||(fe(),je=!0),q.add(j,p),p.D=0}}function wo(p,j){return cr(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=j.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=_n(b(p.Ea,p,j),Nl(p,p.D)),p.D++,!0)}s.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ye=new Ut(this,this.j,p);let Ae=this.o;if(this.U&&(Ae?(Ae=Q(Ae),ze(Ae,this.U)):Ae=this.U),this.u!==null||this.R||(ye.J=Ae,Ae=null),this.S)e:{for(var j=0,R=0;R<this.i.length;R++){t:{var W=this.i[R];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(j+=W,j>4096){j=R;break e}if(j===4096||R===this.i.length-1){j=R+1;break e}}j=1e3}else j=1e3;j=us(this,ye,j),R=ss(this.J),Sn(R,"RID",p),Sn(R,"CVER",22),this.G&&Sn(R,"X-HTTP-Session-Id",this.G),Ai(this,R),Ae&&(this.R?j="headers="+pt(Zs(Ae))+"&"+j:this.u&&Ci(R,this.u,Ae)),Sr(this.h,ye),this.Ra&&Sn(R,"TYPE","init"),this.S?(Sn(R,"$req",j),Sn(R,"SID","null"),ye.U=!0,he(ye,R,null)):he(ye,R,j),this.I=2}}else this.I==3&&(p?Gt(this,p):this.i.length==0||Ti(this.h)||Gt(this))};function Gt(p,j){var R;j?R=j.l:R=p.V++;const W=ss(p.J);Sn(W,"SID",p.M),Sn(W,"RID",R),Sn(W,"AID",p.K),Ai(p,W),p.u&&p.o&&Ci(W,p.u,p.o),R=new Ut(p,p.j,R,p.D+1),p.u===null&&(R.J=p.o),j&&(p.i=j.G.concat(p.i)),j=us(p,R,1e3),R.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Sr(p.h,R),he(R,W,j)}function Ai(p,j){p.H&&De(p.H,function(R,W){Sn(j,W,R)}),p.l&&De({},function(R,W){Sn(j,W,R)})}function us(p,j,R){R=Math.min(p.i.length,R);const W=p.l?b(p.l.Ka,p.l,p):null;e:{var ye=p.i;let qt=-1;for(;;){const Zn=["count="+R];qt==-1?R>0?(qt=ye[0].g,Zn.push("ofs="+qt)):qt=0:Zn.push("ofs="+qt);let gn=!0;for(let $n=0;$n<R;$n++){var Ae=ye[$n].g;const Er=ye[$n].map;if(Ae-=qt,Ae<0)qt=Math.max(0,ye[$n].g-100),gn=!1;else try{Ae="req"+Ae+"_"||"";try{var ot=Er instanceof Map?Er:Object.entries(Er);for(const[la,Nr]of ot){let qr=Nr;f(Nr)&&(qr=Jn(Nr)),Zn.push(Ae+la+"="+encodeURIComponent(qr))}}catch(la){throw Zn.push(Ae+"type="+encodeURIComponent("_badmap")),la}}catch{W&&W(Er)}}if(gn){ot=Zn.join("&");break e}}ot=void 0}return p=p.i.splice(0,R),j.G=p,ot}function El(p){if(!p.g&&!p.v){p.Y=1;var j=p.Da;fe||B(),je||(fe(),je=!0),q.add(j,p),p.A=0}}function ei(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=_n(b(p.Da,p),Nl(p,p.A)),p.A++,!0)}s.Da=function(){if(this.v=null,hc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=_n(b(this.Wa,this),p)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),ia(this),hc(this))};function hr(p){p.B!=null&&(u.clearTimeout(p.B),p.B=null)}function hc(p){p.g=new Ut(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var j=ss(p.na);Sn(j,"RID","rpc"),Sn(j,"SID",p.M),Sn(j,"AID",p.K),Sn(j,"CI",p.F?"0":"1"),!p.F&&p.ia&&Sn(j,"TO",p.ia),Sn(j,"TYPE","xmlhttp"),Ai(p,j),p.u&&p.o&&Ci(j,p.u,p.o),p.O&&(p.g.H=p.O);var R=p.g;p=p.ba,R.M=1,R.A=Ni(ss(j)),R.u=null,R.R=!0,ct(R,p)}s.Va=function(){this.C!=null&&(this.C=null,ia(this),ei(this),ht(19))};function Ri(p){p.C!=null&&(u.clearTimeout(p.C),p.C=null)}function fc(p,j){var R=null;if(p.g==j){Ri(p),hr(p),p.g=null;var W=2}else if(Rt(p.h,j))R=j.G,ur(p.h,j),W=1;else return;if(p.I!=0){if(j.o)if(W==1){R=j.u?j.u.length:0,j=Date.now()-j.F;var ye=p.D;W=yt(),$e(W,new Pt(W,R)),In(p)}else El(p);else if(ye=j.m,ye==3||ye==0&&j.X>0||!(W==1&&wo(p,j)||W==2&&ei(p)))switch(R&&R.length>0&&(j=p.h,j.i=j.i.concat(R)),ye){case 1:oa(p,5);break;case 4:oa(p,10);break;case 3:oa(p,6);break;default:oa(p,2)}}}function Nl(p,j){let R=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(R*=2),R*j}function oa(p,j){if(p.j.info("Error code "+j),j==2){var R=b(p.bb,p),W=p.Ua;const ye=!W;W=new Qs(W||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||rs(W,"https"),Ni(W),ye?zr(W.toString(),R):Sl(W.toString(),R)}else ht(2);p.I=0,p.l&&p.l.pa(j),jl(p),_o(p)}s.bb=function(p){p?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function jl(p){if(p.I=0,p.ja=[],p.l){const j=Br(p.h);(j.length!=0||p.i.length!=0)&&(P(p.ja,j),P(p.ja,p.i),p.h.i.length=0,L(p.i),p.i.length=0),p.l.oa()}}function mc(p,j,R){var W=R instanceof Qs?ss(R):new Qs(R);if(W.g!="")j&&(W.g=j+"."+W.g),$a(W,W.u);else{var ye=u.location;W=ye.protocol,j=j?j+"."+ye.hostname:ye.hostname,ye=+ye.port;const Ae=new Qs(null);W&&rs(Ae,W),j&&(Ae.g=j),ye&&$a(Ae,ye),R&&(Ae.h=R),W=Ae}return R=p.G,j=p.wa,R&&j&&Sn(W,R,j),Sn(W,"VER",p.ka),Ai(p,W),W}function So(p,j,R){if(j&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=p.Aa&&!p.ma?new Nn(new qs({ab:R})):new Nn(p.ma),j.Fa(p.L),j}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function To(){}s=To.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ta(){}Ta.prototype.g=function(p,j){return new Ls(p,j)};function Ls(p,j){Ke.call(this),this.g=new Za(j),this.l=p,this.h=j&&j.messageUrlParams||null,p=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(p?p["X-WebChannel-Content-Type"]=j.messageContentType:p={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(p?p["X-WebChannel-Client-Profile"]=j.sa:p={"X-WebChannel-Client-Profile":j.sa}),this.g.U=p,(p=j&&j.Qb)&&!O(p)&&(this.g.u=p),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!O(j)&&(this.g.G=j,p=this.h,p!==null&&j in p&&(p=this.h,j in p&&delete p[j])),this.j=new Ea(this)}E(Ls,Ke),Ls.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ls.prototype.close=function(){Kn(this.g)},Ls.prototype.o=function(p){var j=this.g;if(typeof p=="string"){var R={};R.__data__=p,p=R}else this.v&&(R={},R.__data__=Jn(p),p=R);j.i.push(new Hn(j.Ya++,p)),j.I==3&&In(j)},Ls.prototype.N=function(){this.g.l=null,delete this.j,Kn(this.g),delete this.g,Ls.Z.N.call(this)};function pc(p){at.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var j=p.__sm__;if(j){e:{for(const R in j){p=R;break e}p=void 0}(this.i=p)&&(p=this.i,j=j!==null&&p in j?j[p]:void 0),this.data=j}else this.data=p}E(pc,at);function kl(){jt.call(this),this.status=1}E(kl,jt);function Ea(p){this.g=p}E(Ea,To),Ea.prototype.ra=function(){$e(this.g,"a")},Ea.prototype.qa=function(p){$e(this.g,new pc(p))},Ea.prototype.pa=function(p){$e(this.g,new kl)},Ea.prototype.oa=function(){$e(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,Ls.prototype.send=Ls.prototype.o,Ls.prototype.open=Ls.prototype.m,Ls.prototype.close=Ls.prototype.close,k2=function(){return new Ta},j2=function(){return yt()},N2=_t,Pg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,Ef=me,He.COMPLETE="complete",E2=He,We.EventType=et,et.OPEN="a",et.CLOSE="b",et.ERROR="c",et.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,pd=We,Nn.prototype.listenOnce=Nn.prototype.K,Nn.prototype.getLastError=Nn.prototype.Ha,Nn.prototype.getLastErrorCode=Nn.prototype.ya,Nn.prototype.getStatus=Nn.prototype.ca,Nn.prototype.getResponseJson=Nn.prototype.La,Nn.prototype.getResponseText=Nn.prototype.la,Nn.prototype.send=Nn.prototype.ea,Nn.prototype.setWithCredentials=Nn.prototype.Fa,T2=Nn}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});class rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");let uu="12.8.0";function _A(s){uu=s}const Zl=new gy("@firebase/firestore");function qc(){return Zl.logLevel}function gt(s,...e){if(Zl.logLevel<=cn.DEBUG){const t=e.map(Ay);Zl.debug(`Firestore (${uu}): ${s}`,...t)}}function uo(s,...e){if(Zl.logLevel<=cn.ERROR){const t=e.map(Ay);Zl.error(`Firestore (${uu}): ${s}`,...t)}}function eu(s,...e){if(Zl.logLevel<=cn.WARN){const t=e.map(Ay);Zl.warn(`Firestore (${uu}): ${s}`,...t)}}function Ay(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Vt(s,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,C2(s,a,t)}function C2(s,e,t){let a=`FIRESTORE (${uu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw uo(a),new Error(a)}function jn(s,e,t,a){let i="Unexpected state";typeof t=="string"?i=t:a=t,s||C2(e,i,a)}function $t(s,e){return s}const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends Si{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class io{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class A2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rr.UNAUTHENTICATED)))}shutdown(){}}class SA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class TA{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){jn(this.o===void 0,42304);let a=this.i;const i=m=>this.i!==a?(a=this.i,t(m)):Promise.resolve();let c=new io;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new io,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await i(this.currentUser)}))},f=m=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new io)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(jn(typeof a.accessToken=="string",31837,{l:a}),new A2(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jn(e===null||typeof e=="string",2055,{h:e}),new rr(e)}}class EA{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class NA{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new EA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ea(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){jn(this.o===void 0,3512);const a=c=>{c.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,gt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const i=c=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>i(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?i(c):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(jn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Fb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kA(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}class Ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=kA(40);for(let c=0;c<i.length;++c)a.length<20&&i[c]<t&&(a+=e.charAt(i[c]%62))}return a}}function un(s,e){return s<e?-1:s>e?1:0}function Lg(s,e){const t=Math.min(s.length,e.length);for(let a=0;a<t;a++){const i=s.charAt(a),c=e.charAt(a);if(i!==c)return hg(i)===hg(c)?un(i,c):hg(i)?1:-1}return un(s.length,e.length)}const CA=55296,AA=57343;function hg(s){const e=s.charCodeAt(0);return e>=CA&&e<=AA}function tu(s,e,t){return s.length===e.length&&s.every(((a,i)=>t(a,e[i])))}const qb="__name__";class hi{constructor(e,t,a){t===void 0?t=0:t>e.length&&Vt(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Vt(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return hi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let i=0;i<a;i++){const c=hi.compareSegments(e.get(i),t.get(i));if(c!==0)return c}return un(e.length,t.length)}static compareSegments(e,t){const a=hi.isNumericId(e),i=hi.isNumericId(t);return a&&!i?-1:!a&&i?1:a&&i?hi.extractNumericId(e).compare(hi.extractNumericId(t)):Lg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return il.fromString(e.substring(4,e.length-2))}}class Wn extends hi{construct(e,t,a){return new Wn(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new ft(Ye.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((i=>i.length>0)))}return new Wn(t)}static emptyPath(){return new Wn([])}}const RA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ys extends hi{construct(e,t,a){return new Ys(e,t,a)}static isValidIdentifier(e){return RA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ys.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qb}static keyField(){return new Ys([qb])}static fromServerFormat(e){const t=[];let a="",i=0;const c=()=>{if(a.length===0)throw new ft(Ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let u=!1;for(;i<e.length;){const f=e[i];if(f==="\\"){if(i+1===e.length)throw new ft(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ft(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=m,i+=2}else f==="`"?(u=!u,i++):f!=="."||u?(a+=f,i++):(c(),i++)}if(c(),u)throw new ft(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ys(t)}static emptyPath(){return new Ys([])}}class Ct{constructor(e){this.path=e}static fromPath(e){return new Ct(Wn.fromString(e))}static fromName(e){return new Ct(Wn.fromString(e).popFirst(5))}static empty(){return new Ct(Wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Wn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ct(new Wn(e.slice()))}}function R2(s,e,t){if(!t)throw new ft(Ye.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function DA(s,e,t,a){if(e===!0&&a===!0)throw new ft(Ye.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Hb(s){if(!Ct.isDocumentKey(s))throw new ft(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function $b(s){if(Ct.isDocumentKey(s))throw new ft(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function D2(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function cm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Vt(12329,{type:typeof s})}function za(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ft(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cm(s);throw new ft(Ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function js(s,e){const t={typeString:s};return e&&(t.value=e),t}function Yd(s,e){if(!D2(s))throw new ft(Ye.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const i=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){t=`JSON missing required field: '${a}'`;break}const u=s[a];if(i&&typeof u!==i){t=`JSON field '${a}' must be a ${i}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${a}' field to equal '${c.value}'`;break}}if(t)throw new ft(Ye.INVALID_ARGUMENT,t);return!0}const Wb=-62135596800,Gb=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*Gb);return new vt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ft(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ft(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Wb)throw new ft(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ft(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gb}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yd(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Wb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:js("string",vt._jsonSchemaVersion),seconds:js("number"),nanoseconds:js("number")};class zt{static fromTimestamp(e){return new zt(e)}static min(){return new zt(new vt(0,0))}static max(){return new zt(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Dd=-1;function MA(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,i=zt.fromTimestamp(a===1e9?new vt(t+1,0):new vt(t,a));return new cl(i,Ct.empty(),e)}function IA(s){return new cl(s.readTime,s.key,Dd)}class cl{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new cl(zt.min(),Ct.empty(),Dd)}static max(){return new cl(zt.max(),Ct.empty(),Dd)}}function OA(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ct.comparator(s.documentKey,e.documentKey),t!==0?t:un(s.largestBatchId,e.largestBatchId))}const PA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function du(s){if(s.code!==Ye.FAILED_PRECONDITION||s.message!==PA)throw s;gt("LocalStore","Unexpectedly lost primary lease")}class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xe(((a,i)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,i)},this.catchCallback=c=>{this.wrapFailure(t,c).next(a,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Xe?t:Xe.resolve(t)}catch(t){return Xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Xe.reject(t)}static resolve(e){return new Xe(((t,a)=>{t(e)}))}static reject(e){return new Xe(((t,a)=>{a(e)}))}static waitFor(e){return new Xe(((t,a)=>{let i=0,c=0,u=!1;e.forEach((f=>{++i,f.next((()=>{++c,u&&c===i&&t()}),(m=>a(m)))})),u=!0,c===i&&t()}))}static or(e){let t=Xe.resolve(!1);for(const a of e)t=t.next((i=>i?Xe.resolve(i):a()));return t}static forEach(e,t){const a=[];return e.forEach(((i,c)=>{a.push(t.call(this,i,c))})),this.waitFor(a)}static mapArray(e,t){return new Xe(((a,i)=>{const c=e.length,u=new Array(c);let f=0;for(let m=0;m<c;m++){const b=m;t(e[b]).next((T=>{u[b]=T,++f,f===c&&a(u)}),(T=>i(T)))}}))}static doWhile(e,t){return new Xe(((a,i)=>{const c=()=>{e()===!0?t().next((()=>{c()}),i):a()};c()}))}}function VA(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hu(s){return s.name==="IndexedDbTransactionError"}class um{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}um.ce=-1;const Dy=-1;function dm(s){return s==null}function Hf(s){return s===0&&1/s==-1/0}function UA(s){return typeof s=="number"&&Number.isInteger(s)&&!Hf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const M2="";function BA(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Yb(e)),e=zA(s.get(t),e);return Yb(e)}function zA(s,e){let t=e;const a=s.length;for(let i=0;i<a;i++){const c=s.charAt(i);switch(c){case"\0":t+="";break;case M2:t+="";break;default:t+=c}}return t}function Yb(s){return s+M2+""}function Kb(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function yl(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function I2(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ts{constructor(e,t){this.comparator=e,this.root=t||Gs.EMPTY}insert(e,t){return new ts(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gs.BLACK,null,null))}remove(e){return new ts(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(e,a.key);if(i===0)return t+a.left.size;i<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uf(this.root,e,this.comparator,!0)}}class uf{constructor(e,t,a,i){this.isReverse=i,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?a(e.key,t):1,t&&i&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gs{constructor(e,t,a,i,c){this.key=e,this.value=t,this.color=a??Gs.RED,this.left=i??Gs.EMPTY,this.right=c??Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,i,c){return new Gs(e??this.key,t??this.value,a??this.color,i??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let i=this;const c=a(e,i.key);return i=c<0?i.copy(null,null,null,i.left.insert(e,t,a),null):c===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Gs.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Vt(27949);return e+(this.isRed()?0:1)}}Gs.EMPTY=null,Gs.RED=!0,Gs.BLACK=!1;Gs.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt(57766)}get value(){throw Vt(16141)}get color(){throw Vt(16727)}get left(){throw Vt(29726)}get right(){throw Vt(36894)}copy(e,t,a,i,c){return this}insert(e,t,a){return new Gs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Is{constructor(e){this.comparator=e,this.data=new ts(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qb(this.data.getIterator())}getIteratorFrom(e){return new Qb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof Is)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=a.getNext().key;if(this.comparator(i,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Is(this.comparator);return t.data=e,t}}class Qb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ta{constructor(e){this.fields=e,e.sort(Ys.comparator)}static empty(){return new ta([])}unionWith(e){let t=new Is(Ys.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new ta(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tu(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}class O2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ks{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new O2("Invalid base64 string: "+c):c}})(e);return new Ks(t)}static fromUint8Array(e){const t=(function(i){let c="";for(let u=0;u<i.length;++u)c+=String.fromCharCode(i[u]);return c})(e);return new Ks(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ks.EMPTY_BYTE_STRING=new Ks("");const FA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ul(s){if(jn(!!s,39018),typeof s=="string"){let e=0;const t=FA.exec(s);if(jn(!!t,46558,{timestamp:s}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:ps(s.seconds),nanos:ps(s.nanos)}}function ps(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function dl(s){return typeof s=="string"?Ks.fromBase64String(s):Ks.fromUint8Array(s)}const P2="server_timestamp",L2="__type__",V2="__previous_value__",U2="__local_write_time__";function My(s){return(s?.mapValue?.fields||{})[L2]?.stringValue===P2}function hm(s){const e=s.mapValue.fields[V2];return My(e)?hm(e):e}function Md(s){const e=ul(s.mapValue.fields[U2].timestampValue);return new vt(e.seconds,e.nanos)}class qA{constructor(e,t,a,i,c,u,f,m,b,T,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=i,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=b,this.isUsingEmulator=T,this.apiKey=E}}const $f="(default)";class Id{constructor(e,t){this.projectId=e,this.database=t||$f}static empty(){return new Id("","")}get isDefaultDatabase(){return this.database===$f}isEqual(e){return e instanceof Id&&e.projectId===this.projectId&&e.database===this.database}}function HA(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ft(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(s.options.projectId,e)}const B2="__type__",$A="__max__",df={mapValue:{}},z2="__vector__",Wf="value";function hl(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?My(s)?4:GA(s)?9007199254740991:WA(s)?10:11:Vt(28295,{value:s})}function xi(s,e){if(s===e)return!0;const t=hl(s);if(t!==hl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Md(s).isEqual(Md(e));case 3:return(function(i,c){if(typeof i.timestampValue=="string"&&typeof c.timestampValue=="string"&&i.timestampValue.length===c.timestampValue.length)return i.timestampValue===c.timestampValue;const u=ul(i.timestampValue),f=ul(c.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(i,c){return dl(i.bytesValue).isEqual(dl(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(i,c){return ps(i.geoPointValue.latitude)===ps(c.geoPointValue.latitude)&&ps(i.geoPointValue.longitude)===ps(c.geoPointValue.longitude)})(s,e);case 2:return(function(i,c){if("integerValue"in i&&"integerValue"in c)return ps(i.integerValue)===ps(c.integerValue);if("doubleValue"in i&&"doubleValue"in c){const u=ps(i.doubleValue),f=ps(c.doubleValue);return u===f?Hf(u)===Hf(f):isNaN(u)&&isNaN(f)}return!1})(s,e);case 9:return tu(s.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return(function(i,c){const u=i.mapValue.fields||{},f=c.mapValue.fields||{};if(Kb(u)!==Kb(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!xi(u[m],f[m])))return!1;return!0})(s,e);default:return Vt(52216,{left:s})}}function Od(s,e){return(s.values||[]).find((t=>xi(t,e)))!==void 0}function nu(s,e){if(s===e)return 0;const t=hl(s),a=hl(e);if(t!==a)return un(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return un(s.booleanValue,e.booleanValue);case 2:return(function(c,u){const f=ps(c.integerValue||c.doubleValue),m=ps(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(s,e);case 3:return Xb(s.timestampValue,e.timestampValue);case 4:return Xb(Md(s),Md(e));case 5:return Lg(s.stringValue,e.stringValue);case 6:return(function(c,u){const f=dl(c),m=dl(u);return f.compareTo(m)})(s.bytesValue,e.bytesValue);case 7:return(function(c,u){const f=c.split("/"),m=u.split("/");for(let b=0;b<f.length&&b<m.length;b++){const T=un(f[b],m[b]);if(T!==0)return T}return un(f.length,m.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,u){const f=un(ps(c.latitude),ps(u.latitude));return f!==0?f:un(ps(c.longitude),ps(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Jb(s.arrayValue,e.arrayValue);case 10:return(function(c,u){const f=c.fields||{},m=u.fields||{},b=f[Wf]?.arrayValue,T=m[Wf]?.arrayValue,E=un(b?.values?.length||0,T?.values?.length||0);return E!==0?E:Jb(b,T)})(s.mapValue,e.mapValue);case 11:return(function(c,u){if(c===df.mapValue&&u===df.mapValue)return 0;if(c===df.mapValue)return 1;if(u===df.mapValue)return-1;const f=c.fields||{},m=Object.keys(f),b=u.fields||{},T=Object.keys(b);m.sort(),T.sort();for(let E=0;E<m.length&&E<T.length;++E){const C=Lg(m[E],T[E]);if(C!==0)return C;const L=nu(f[m[E]],b[T[E]]);if(L!==0)return L}return un(m.length,T.length)})(s.mapValue,e.mapValue);default:throw Vt(23264,{he:t})}}function Xb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return un(s,e);const t=ul(s),a=ul(e),i=un(t.seconds,a.seconds);return i!==0?i:un(t.nanos,a.nanos)}function Jb(s,e){const t=s.values||[],a=e.values||[];for(let i=0;i<t.length&&i<a.length;++i){const c=nu(t[i],a[i]);if(c)return c}return un(t.length,a.length)}function su(s){return Vg(s)}function Vg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const a=ul(t);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return dl(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ct.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let a="[",i=!0;for(const c of t.values||[])i?i=!1:a+=",",a+=Vg(c);return a+"]"})(s.arrayValue):"mapValue"in s?(function(t){const a=Object.keys(t.fields||{}).sort();let i="{",c=!0;for(const u of a)c?c=!1:i+=",",i+=`${u}:${Vg(t.fields[u])}`;return i+"}"})(s.mapValue):Vt(61005,{value:s})}function Nf(s){switch(hl(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hm(s);return e?16+Nf(e):16;case 5:return 2*s.stringValue.length;case 6:return dl(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((i,c)=>i+Nf(c)),0)})(s.arrayValue);case 10:case 11:return(function(a){let i=0;return yl(a.fields,((c,u)=>{i+=c.length+Nf(u)})),i})(s.mapValue);default:throw Vt(13486,{value:s})}}function Zb(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ug(s){return!!s&&"integerValue"in s}function Iy(s){return!!s&&"arrayValue"in s}function ex(s){return!!s&&"nullValue"in s}function tx(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function jf(s){return!!s&&"mapValue"in s}function WA(s){return(s?.mapValue?.fields||{})[B2]?.stringValue===z2}function _d(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return yl(s.mapValue.fields,((t,a)=>e.mapValue.fields[t]=_d(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_d(s.arrayValue.values[t]);return e}return{...s}}function GA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===$A}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_d(t)}setAll(e){let t=Ys.emptyPath(),a={},i=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,a,i),a={},i=[],t=f.popLast()}u?a[f.lastSegment()]=_d(u):i.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,a,i)}delete(e){const t=this.field(e.popLast());jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let i=t.mapValue.fields[e.get(a)];jf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,a){yl(t,((i,c)=>e[i]=c));for(const i of a)delete e[i]}clone(){return new Ur(_d(this.value))}}function F2(s){const e=[];return yl(s.fields,((t,a)=>{const i=new Ys([t]);if(jf(a)){const c=F2(a.mapValue).fields;if(c.length===0)e.push(i);else for(const u of c)e.push(i.child(u))}else e.push(i)})),new ta(e)}class ar{constructor(e,t,a,i,c,u,f){this.key=e,this.documentType=t,this.version=a,this.readTime=i,this.createTime=c,this.data=u,this.documentState=f}static newInvalidDocument(e){return new ar(e,0,zt.min(),zt.min(),zt.min(),Ur.empty(),0)}static newFoundDocument(e,t,a,i){return new ar(e,1,t,zt.min(),a,i,0)}static newNoDocument(e,t){return new ar(e,2,t,zt.min(),zt.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new ar(e,3,t,zt.min(),zt.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gf{constructor(e,t){this.position=e,this.inclusive=t}}function nx(s,e,t){let a=0;for(let i=0;i<s.position.length;i++){const c=e[i],u=s.position[i];if(c.field.isKeyField()?a=Ct.comparator(Ct.fromName(u.referenceValue),t.key):a=nu(u,t.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function sx(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!xi(s.position[t],e.position[t]))return!1;return!0}class Pd{constructor(e,t="asc"){this.field=e,this.dir=t}}function YA(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class q2{}class Ns extends q2{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new QA(e,t,a):t==="array-contains"?new ZA(e,a):t==="in"?new eR(e,a):t==="not-in"?new tR(e,a):t==="array-contains-any"?new nR(e,a):new Ns(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new XA(e,a):new JA(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nu(t,this.value)):t!==null&&hl(this.value)===hl(t)&&this.matchesComparison(nu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fa extends q2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fa(e,t)}matches(e){return H2(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function H2(s){return s.op==="and"}function $2(s){return KA(s)&&H2(s)}function KA(s){for(const e of s.filters)if(e instanceof Fa)return!1;return!0}function Bg(s){if(s instanceof Ns)return s.field.canonicalString()+s.op.toString()+su(s.value);if($2(s))return s.filters.map((e=>Bg(e))).join(",");{const e=s.filters.map((t=>Bg(t))).join(",");return`${s.op}(${e})`}}function W2(s,e){return s instanceof Ns?(function(a,i){return i instanceof Ns&&a.op===i.op&&a.field.isEqual(i.field)&&xi(a.value,i.value)})(s,e):s instanceof Fa?(function(a,i){return i instanceof Fa&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce(((c,u,f)=>c&&W2(u,i.filters[f])),!0):!1})(s,e):void Vt(19439)}function G2(s){return s instanceof Ns?(function(t){return`${t.field.canonicalString()} ${t.op} ${su(t.value)}`})(s):s instanceof Fa?(function(t){return t.op.toString()+" {"+t.getFilters().map(G2).join(" ,")+"}"})(s):"Filter"}class QA extends Ns{constructor(e,t,a){super(e,t,a),this.key=Ct.fromName(a.referenceValue)}matches(e){const t=Ct.comparator(e.key,this.key);return this.matchesComparison(t)}}class XA extends Ns{constructor(e,t){super(e,"in",t),this.keys=Y2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class JA extends Ns{constructor(e,t){super(e,"not-in",t),this.keys=Y2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Y2(s,e){return(e.arrayValue?.values||[]).map((t=>Ct.fromName(t.referenceValue)))}class ZA extends Ns{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Iy(t)&&Od(t.arrayValue,this.value)}}class eR extends Ns{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Od(this.value.arrayValue,t)}}class tR extends Ns{constructor(e,t){super(e,"not-in",t)}matches(e){if(Od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Od(this.value.arrayValue,t)}}class nR extends Ns{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Iy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>Od(this.value.arrayValue,a)))}}class sR{constructor(e,t=null,a=[],i=[],c=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=i,this.limit=c,this.startAt=u,this.endAt=f,this.Te=null}}function rx(s,e=null,t=[],a=[],i=null,c=null,u=null){return new sR(s,e,t,a,i,c,u)}function Oy(s){const e=$t(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Bg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>su(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>su(a))).join(",")),e.Te=t}return e.Te}function Py(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!YA(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!W2(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!sx(s.startAt,e.startAt)&&sx(s.endAt,e.endAt)}function zg(s){return Ct.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class fu{constructor(e,t=null,a=[],i=[],c=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=i,this.limit=c,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function rR(s,e,t,a,i,c,u,f){return new fu(s,e,t,a,i,c,u,f)}function Ly(s){return new fu(s)}function ax(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function aR(s){return Ct.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function K2(s){return s.collectionGroup!==null}function wd(s){const e=$t(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Is(Ys.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((b=>{b.isInequality()&&(f=f.add(b.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Pd(c,a))})),t.has(Ys.keyField().canonicalString())||e.Ie.push(new Pd(Ys.keyField(),a))}return e.Ie}function yi(s){const e=$t(s);return e.Ee||(e.Ee=iR(e,wd(s))),e.Ee}function iR(s,e){if(s.limitType==="F")return rx(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((i=>{const c=i.dir==="desc"?"asc":"desc";return new Pd(i.field,c)}));const t=s.endAt?new Gf(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Gf(s.startAt.position,s.startAt.inclusive):null;return rx(s.path,s.collectionGroup,e,s.filters,s.limit,t,a)}}function Fg(s,e){const t=s.filters.concat([e]);return new fu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function oR(s,e){const t=s.explicitOrderBy.concat([e]);return new fu(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function qg(s,e,t){return new fu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function fm(s,e){return Py(yi(s),yi(e))&&s.limitType===e.limitType}function Q2(s){return`${Oy(yi(s))}|lt:${s.limitType}`}function Hc(s){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((i=>G2(i))).join(", ")}]`),dm(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((i=>su(i))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((i=>su(i))).join(",")),`Target(${a})`})(yi(s))}; limitType=${s.limitType})`}function mm(s,e){return e.isFoundDocument()&&(function(a,i){const c=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Ct.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(s,e)&&(function(a,i){for(const c of wd(a))if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(a,i){for(const c of a.filters)if(!c.matches(i))return!1;return!0})(s,e)&&(function(a,i){return!(a.startAt&&!(function(u,f,m){const b=nx(u,f,m);return u.inclusive?b<=0:b<0})(a.startAt,wd(a),i)||a.endAt&&!(function(u,f,m){const b=nx(u,f,m);return u.inclusive?b>=0:b>0})(a.endAt,wd(a),i))})(s,e)}function lR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function X2(s){return(e,t)=>{let a=!1;for(const i of wd(s)){const c=cR(i,e,t);if(c!==0)return c;a=a||i.field.isKeyField()}return 0}}function cR(s,e,t){const a=s.field.isKeyField()?Ct.comparator(e.key,t.key):(function(c,u,f){const m=u.data.field(c),b=f.data.field(c);return m!==null&&b!==null?nu(m,b):Vt(42886)})(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Vt(19790,{direction:s.dir})}}class rc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[i,c]of a)if(this.equalsFn(i,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),i=this.inner[a];if(i===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let c=0;c<i.length;c++)if(this.equalsFn(i[c][0],e))return void(i[c]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return a.length===1?delete this.inner[t]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yl(this.inner,((t,a)=>{for(const[i,c]of a)e(i,c)}))}isEmpty(){return I2(this.inner)}size(){return this.innerSize}}const uR=new ts(Ct.comparator);function ho(){return uR}const J2=new ts(Ct.comparator);function gd(...s){let e=J2;for(const t of s)e=e.insert(t.key,t);return e}function Z2(s){let e=J2;return s.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Wl(){return Sd()}function ew(){return Sd()}function Sd(){return new rc((s=>s.toString()),((s,e)=>s.isEqual(e)))}const dR=new ts(Ct.comparator),hR=new Is(Ct.comparator);function dn(...s){let e=hR;for(const t of s)e=e.add(t);return e}const fR=new Is(un);function mR(){return fR}function Vy(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hf(e)?"-0":e}}function tw(s){return{integerValue:""+s}}function pR(s,e){return UA(e)?tw(e):Vy(s,e)}class pm{constructor(){this._=void 0}}function gR(s,e,t){return s instanceof Yf?(function(i,c){const u={fields:{[L2]:{stringValue:P2},[U2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return c&&My(c)&&(c=hm(c)),c&&(u.fields[V2]=c),{mapValue:u}})(t,e):s instanceof Ld?sw(s,e):s instanceof Vd?rw(s,e):(function(i,c){const u=nw(i,c),f=ix(u)+ix(i.Ae);return Ug(u)&&Ug(i.Ae)?tw(f):Vy(i.serializer,f)})(s,e)}function yR(s,e,t){return s instanceof Ld?sw(s,e):s instanceof Vd?rw(s,e):t}function nw(s,e){return s instanceof Kf?(function(a){return Ug(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(e)?e:{integerValue:0}:null}class Yf extends pm{}class Ld extends pm{constructor(e){super(),this.elements=e}}function sw(s,e){const t=aw(e);for(const a of s.elements)t.some((i=>xi(i,a)))||t.push(a);return{arrayValue:{values:t}}}class Vd extends pm{constructor(e){super(),this.elements=e}}function rw(s,e){let t=aw(e);for(const a of s.elements)t=t.filter((i=>!xi(i,a)));return{arrayValue:{values:t}}}class Kf extends pm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ix(s){return ps(s.integerValue||s.doubleValue)}function aw(s){return Iy(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function vR(s,e){return s.field.isEqual(e.field)&&(function(a,i){return a instanceof Ld&&i instanceof Ld||a instanceof Vd&&i instanceof Vd?tu(a.elements,i.elements,xi):a instanceof Kf&&i instanceof Kf?xi(a.Ae,i.Ae):a instanceof Yf&&i instanceof Yf})(s.transform,e.transform)}class bR{constructor(e,t){this.version=e,this.transformResults=t}}class _a{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _a}static exists(e){return new _a(void 0,e)}static updateTime(e){return new _a(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class gm{}function iw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Uy(s.key,_a.none()):new Kd(s.key,s.data,_a.none());{const t=s.data,a=Ur.empty();let i=new Is(Ys.comparator);for(let c of e.fields)if(!i.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?a.delete(c):a.set(c,u),i=i.add(c)}return new vl(s.key,a,new ta(i.toArray()),_a.none())}}function xR(s,e,t){s instanceof Kd?(function(i,c,u){const f=i.value.clone(),m=lx(i.fieldTransforms,c,u.transformResults);f.setAll(m),c.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(s,e,t):s instanceof vl?(function(i,c,u){if(!kf(i.precondition,c))return void c.convertToUnknownDocument(u.version);const f=lx(i.fieldTransforms,c,u.transformResults),m=c.data;m.setAll(ow(i)),m.setAll(f),c.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(s,e,t):(function(i,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Td(s,e,t,a){return s instanceof Kd?(function(c,u,f,m){if(!kf(c.precondition,u))return f;const b=c.value.clone(),T=cx(c.fieldTransforms,m,u);return b.setAll(T),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null})(s,e,t,a):s instanceof vl?(function(c,u,f,m){if(!kf(c.precondition,u))return f;const b=cx(c.fieldTransforms,m,u),T=u.data;return T.setAll(ow(c)),T.setAll(b),u.convertToFoundDocument(u.version,T).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(s,e,t,a):(function(c,u,f){return kf(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(s,e,t)}function _R(s,e){let t=null;for(const a of s.fieldTransforms){const i=e.data.field(a.field),c=nw(a.transform,i||null);c!=null&&(t===null&&(t=Ur.empty()),t.set(a.field,c))}return t||null}function ox(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&tu(a,i,((c,u)=>vR(c,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Kd extends gm{constructor(e,t,a,i=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vl extends gm{constructor(e,t,a,i,c=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=i,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ow(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}})),e}function lx(s,e,t){const a=new Map;jn(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let i=0;i<t.length;i++){const c=s[i],u=c.transform,f=e.data.field(c.field);a.set(c.field,yR(u,f,t[i]))}return a}function cx(s,e,t){const a=new Map;for(const i of s){const c=i.transform,u=t.data.field(i.field);a.set(i.field,gR(c,u,e))}return a}class Uy extends gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wR extends gm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SR{constructor(e,t,a,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const c=this.mutations[i];c.key.isEqual(e.key)&&xR(c,e,a[i])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Td(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Td(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=ew();return this.mutations.forEach((i=>{const c=e.get(i.key),u=c.overlayedDocument;let f=this.applyToLocalView(u,c.mutatedFields);f=t.has(i.key)?null:f;const m=iw(u,f);m!==null&&a.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(zt.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dn())}isEqual(e){return this.batchId===e.batchId&&tu(this.mutations,e.mutations,((t,a)=>ox(t,a)))&&tu(this.baseMutations,e.baseMutations,((t,a)=>ox(t,a)))}}class By{constructor(e,t,a,i){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=i}static from(e,t,a){jn(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let i=(function(){return dR})();const c=e.mutations;for(let u=0;u<c.length;u++)i=i.insert(c[u].key,a[u].version);return new By(e,t,a,i)}}class TR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ER{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ts,yn;function NR(s){switch(s){case Ye.OK:return Vt(64938);case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0;default:return Vt(15467,{code:s})}}function lw(s){if(s===void 0)return uo("GRPC error has no .code"),Ye.UNKNOWN;switch(s){case Ts.OK:return Ye.OK;case Ts.CANCELLED:return Ye.CANCELLED;case Ts.UNKNOWN:return Ye.UNKNOWN;case Ts.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Ts.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Ts.INTERNAL:return Ye.INTERNAL;case Ts.UNAVAILABLE:return Ye.UNAVAILABLE;case Ts.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Ts.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Ts.NOT_FOUND:return Ye.NOT_FOUND;case Ts.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Ts.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Ts.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Ts.ABORTED:return Ye.ABORTED;case Ts.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Ts.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Ts.DATA_LOSS:return Ye.DATA_LOSS;default:return Vt(39323,{code:s})}}(yn=Ts||(Ts={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";function jR(){return new TextEncoder}const kR=new il([4294967295,4294967295],0);function ux(s){const e=jR().encode(s),t=new S2;return t.update(e),new Uint8Array(t.digest())}function dx(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),i=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new il([t,a],0),new il([i,c],0)]}class zy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new yd(`Invalid padding: ${t}`);if(a<0)throw new yd(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new yd(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new yd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=il.fromNumber(this.ge)}ye(e,t,a){let i=e.add(t.multiply(il.fromNumber(a)));return i.compare(kR)===1&&(i=new il([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ux(e),[a,i]=dx(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(a,i,c);if(!this.we(u))return!1}return!0}static create(e,t,a){const i=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new zy(c,i,t);return a.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=ux(e),[a,i]=dx(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(a,i,c);this.be(u)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class yd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ym{constructor(e,t,a,i,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=i,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const i=new Map;return i.set(e,Qd.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new ym(zt.min(),i,new ts(un),ho(),dn())}}class Qd{constructor(e,t,a,i,c){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=i,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Qd(a,t,dn(),dn(),dn())}}class Cf{constructor(e,t,a,i){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=i}}class cw{constructor(e,t){this.targetId=e,this.Ce=t}}class uw{constructor(e,t,a=Ks.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=i}}class hx{constructor(){this.ve=0,this.Fe=fx(),this.Me=Ks.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dn(),t=dn(),a=dn();return this.Fe.forEach(((i,c)=>{switch(c){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:a=a.add(i);break;default:Vt(38017,{changeType:c})}})),new Qd(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=fx()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,jn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class CR{constructor(e){this.Ge=e,this.ze=new Map,this.je=ho(),this.He=hf(),this.Je=hf(),this.Ze=new ts(un)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Vt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,a=e.Ce.count,i=this.ot(t);if(i){const c=i.target;if(zg(c))if(a===0){const u=new Ct(c.path);this.et(t,u,ar.newNoDocument(u,zt.min()))}else jn(a===1,20013,{expectedCount:a});else{const u=this._t(t);if(u!==a){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const b=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,b)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:i=0},hashCount:c=0}=t;let u,f;try{u=dl(a).toUint8Array()}catch(m){if(m instanceof O2)return eu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new zy(u,i,c)}catch(m){return eu(m instanceof yd?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let i=0;return a.forEach((c=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const f=this.ot(u);if(f){if(c.current&&zg(f.target)){const m=new Ct(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,ar.newNoDocument(m,e))}c.Be&&(t.set(u,c.ke()),c.Ke())}}));let a=dn();this.Je.forEach(((c,u)=>{let f=!0;u.forEachWhile((m=>{const b=this.ot(m);return!b||b.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(a=a.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const i=new ym(e,t,this.Ze,this.je,a);return this.je=ho(),this.He=hf(),this.Je=hf(),this.Ze=new ts(un),i}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new hx,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Is(un),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Is(un),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||gt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hf(){return new ts(Ct.comparator)}function fx(){return new ts(Ct.comparator)}const AR={asc:"ASCENDING",desc:"DESCENDING"},RR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DR={and:"AND",or:"OR"};class MR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hg(s,e){return s.useProto3Json||dm(e)?e:{value:e}}function Qf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function IR(s,e){return Qf(s,e.toTimestamp())}function vi(s){return jn(!!s,49232),zt.fromTimestamp((function(t){const a=ul(t);return new vt(a.seconds,a.nanos)})(s))}function Fy(s,e){return $g(s,e).canonicalString()}function $g(s,e){const t=(function(i){return new Wn(["projects",i.projectId,"databases",i.database])})(s).child("documents");return e===void 0?t:t.child(e)}function hw(s){const e=Wn.fromString(s);return jn(yw(e),10190,{key:e.toString()}),e}function Wg(s,e){return Fy(s.databaseId,e.path)}function fg(s,e){const t=hw(e);if(t.get(1)!==s.databaseId.projectId)throw new ft(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ft(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ct(mw(t))}function fw(s,e){return Fy(s.databaseId,e)}function OR(s){const e=hw(s);return e.length===4?Wn.emptyPath():mw(e)}function Gg(s){return new Wn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function mw(s){return jn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function mx(s,e,t){return{name:Wg(s,e),fields:t.value.mapValue.fields}}function PR(s,e){let t;if("targetChange"in e){e.targetChange;const a=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Vt(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],c=(function(b,T){return b.useProto3Json?(jn(T===void 0||typeof T=="string",58123),Ks.fromBase64String(T||"")):(jn(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Ks.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(b){const T=b.code===void 0?Ye.UNKNOWN:lw(b.code);return new ft(T,b.message||"")})(u);t=new uw(a,i,c,f||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const i=fg(s,a.document.name),c=vi(a.document.updateTime),u=a.document.createTime?vi(a.document.createTime):zt.min(),f=new Ur({mapValue:{fields:a.document.fields}}),m=ar.newFoundDocument(i,c,u,f),b=a.targetIds||[],T=a.removedTargetIds||[];t=new Cf(b,T,m.key,m)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const i=fg(s,a.document),c=a.readTime?vi(a.readTime):zt.min(),u=ar.newNoDocument(i,c),f=a.removedTargetIds||[];t=new Cf([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const i=fg(s,a.document),c=a.removedTargetIds||[];t=new Cf([],c,i,null)}else{if(!("filter"in e))return Vt(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:i=0,unchangedNames:c}=a,u=new ER(i,c),f=a.targetId;t=new cw(f,u)}}return t}function LR(s,e){let t;if(e instanceof Kd)t={update:mx(s,e.key,e.value)};else if(e instanceof Uy)t={delete:Wg(s,e.key)};else if(e instanceof vl)t={update:mx(s,e.key,e.data),updateMask:WR(e.fieldMask)};else{if(!(e instanceof wR))return Vt(16599,{dt:e.type});t={verify:Wg(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(c,u){const f=u.transform;if(f instanceof Yf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ld)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Vd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Kf)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Vt(20930,{transform:u.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(i,c){return c.updateTime!==void 0?{updateTime:IR(i,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Vt(27497)})(s,e.precondition)),t}function VR(s,e){return s&&s.length>0?(jn(e!==void 0,14353),s.map((t=>(function(i,c){let u=i.updateTime?vi(i.updateTime):vi(c);return u.isEqual(zt.min())&&(u=vi(c)),new bR(u,i.transformResults||[])})(t,e)))):[]}function UR(s,e){return{documents:[fw(s,e.path)]}}function BR(s,e){const t={structuredQuery:{}},a=e.path;let i;e.collectionGroup!==null?(i=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=fw(s,i);const c=(function(b){if(b.length!==0)return gw(Fa.create(b,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(b){if(b.length!==0)return b.map((T=>(function(C){return{field:$c(C.field),direction:qR(C.dir)}})(T)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Hg(s,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:t,parent:i}}function zR(s){let e=OR(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let i=null;if(a>0){jn(a===1,65062);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let c=[];t.where&&(c=(function(E){const C=pw(E);return C instanceof Fa&&$2(C)?C.getFilters():[C]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((C=>(function(P){return new Pd(Wc(P.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(C)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let C;return C=typeof E=="object"?E.value:E,dm(C)?null:C})(t.limit));let m=null;t.startAt&&(m=(function(E){const C=!!E.before,L=E.values||[];return new Gf(L,C)})(t.startAt));let b=null;return t.endAt&&(b=(function(E){const C=!E.before,L=E.values||[];return new Gf(L,C)})(t.endAt)),rR(e,i,u,c,f,"F",m,b)}function FR(s,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pw(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Wc(t.unaryFilter.field);return Ns.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=Wc(t.unaryFilter.field);return Ns.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Wc(t.unaryFilter.field);return Ns.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Wc(t.unaryFilter.field);return Ns.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vt(61313);default:return Vt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ns.create(Wc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vt(58110);default:return Vt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Fa.create(t.compositeFilter.filters.map((a=>pw(a))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Vt(1026)}})(t.compositeFilter.op))})(s):Vt(30097,{filter:s})}function qR(s){return AR[s]}function HR(s){return RR[s]}function $R(s){return DR[s]}function $c(s){return{fieldPath:s.canonicalString()}}function Wc(s){return Ys.fromServerFormat(s.fieldPath)}function gw(s){return s instanceof Ns?(function(t){if(t.op==="=="){if(tx(t.value))return{unaryFilter:{field:$c(t.field),op:"IS_NAN"}};if(ex(t.value))return{unaryFilter:{field:$c(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tx(t.value))return{unaryFilter:{field:$c(t.field),op:"IS_NOT_NAN"}};if(ex(t.value))return{unaryFilter:{field:$c(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$c(t.field),op:HR(t.op),value:t.value}}})(s):s instanceof Fa?(function(t){const a=t.getFilters().map((i=>gw(i)));return a.length===1?a[0]:{compositeFilter:{op:$R(t.op),filters:a}}})(s):Vt(54877,{filter:s})}function WR(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function vw(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class sl{constructor(e,t,a,i,c=zt.min(),u=zt.min(),f=Ks.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=i,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class GR{constructor(e){this.yt=e}}function YR(s){const e=zR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?qg(e,e.limit,"L"):e}class KR{constructor(){this.Sn=new QR}addToCollectionParentIndex(e,t){return this.Sn.add(t),Xe.resolve()}getCollectionParents(e,t){return Xe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Xe.resolve()}deleteFieldIndex(e,t){return Xe.resolve()}deleteAllFieldIndexes(e){return Xe.resolve()}createTargetIndexes(e,t){return Xe.resolve()}getDocumentsMatchingTarget(e,t){return Xe.resolve(null)}getIndexType(e,t){return Xe.resolve(0)}getFieldIndexes(e,t){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,t){return Xe.resolve(cl.min())}getMinOffsetFromCollectionGroup(e,t){return Xe.resolve(cl.min())}updateCollectionGroup(e,t,a){return Xe.resolve()}updateIndexEntries(e,t){return Xe.resolve()}}class QR{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t]||new Is(Wn.comparator),c=!i.has(a);return this.index[t]=i.add(a),c}has(e){const t=e.lastSegment(),a=e.popLast(),i=this.index[t];return i&&i.has(a)}getEntries(e){return(this.index[e]||new Is(Wn.comparator)).toArray()}}const px={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bw=41943040;class Vr{static withCacheSize(e){return new Vr(e,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}Vr.DEFAULT_COLLECTION_PERCENTILE=10,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vr.DEFAULT=new Vr(bw,Vr.DEFAULT_COLLECTION_PERCENTILE,Vr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vr.DISABLED=new Vr(-1,0,0);class ru{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ru(0)}static ar(){return new ru(-1)}}const gx="LruGarbageCollector",XR=1048576;function yx([s,e],[t,a]){const i=un(s,t);return i===0?un(e,a):i}class JR{constructor(e){this.Pr=e,this.buffer=new Is(yx),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();yx(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZR{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){gt(gx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hu(t)?gt(gx,"Ignoring IndexedDB error during garbage collection: ",t):await du(t)}await this.Ar(3e5)}))}}class e4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return Xe.resolve(um.ce);const a=new JR(t);return this.Vr.forEachTarget(e,(i=>a.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>a.Er(i))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),Xe.resolve(px)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),px):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,i,c,u,f,m,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,u=Date.now(),this.nthSequenceNumber(e,i)))).next((E=>(a=E,f=Date.now(),this.removeTargets(e,a,t)))).next((E=>(c=E,m=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(b=Date.now(),qc()<=cn.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-T}ms
	Determined least recently used ${i} in `+(f-u)+`ms
	Removed ${c} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(b-m)+`ms
Total Duration: ${b-T}ms`),Xe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:c,documentsRemoved:E}))))}}function t4(s,e){return new e4(s,e)}class n4{constructor(){this.changes=new rc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?Xe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class s4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class r4{constructor(e,t,a,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=i}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(a=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(a!==null&&Td(a.mutation,i,ta.empty(),vt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,dn()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=dn()){const i=Wl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,a).next((c=>{let u=gd();return c.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const a=Wl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,dn())))}populateOverlays(e,t,a){const i=[];return a.forEach((c=>{t.has(c)||i.push(c)})),this.documentOverlayCache.getOverlays(e,i).next((c=>{c.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,a,i){let c=ho();const u=Sd(),f=(function(){return Sd()})();return t.forEach(((m,b)=>{const T=a.get(b.key);i.has(b.key)&&(T===void 0||T.mutation instanceof vl)?c=c.insert(b.key,b):T!==void 0?(u.set(b.key,T.mutation.getFieldMask()),Td(T.mutation,b,T.mutation.getFieldMask(),vt.now())):u.set(b.key,ta.empty())})),this.recalculateAndSaveOverlays(e,c).next((m=>(m.forEach(((b,T)=>u.set(b,T))),t.forEach(((b,T)=>f.set(b,new s4(T,u.get(b)??null)))),f)))}recalculateAndSaveOverlays(e,t){const a=Sd();let i=new ts(((u,f)=>u-f)),c=dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const b=t.get(m);if(b===null)return;let T=a.get(m)||ta.empty();T=f.applyToLocalView(b,T),a.set(m,T);const E=(i.get(f.batchId)||dn()).add(m);i=i.insert(f.batchId,E)}))})).next((()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),b=m.key,T=m.value,E=ew();T.forEach((C=>{if(!c.has(C)){const L=iw(t.get(C),a.get(C));L!==null&&E.set(C,L),c=c.add(C)}})),u.push(this.documentOverlayCache.saveOverlays(e,b,E))}return Xe.waitFor(u)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,i){return aR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):K2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,i):this.getDocumentsMatchingCollectionQuery(e,t,a,i)}getNextDocuments(e,t,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,i).next((c=>{const u=i-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,i-c.size):Xe.resolve(Wl());let f=Dd,m=c;return u.next((b=>Xe.forEach(b,((T,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),c.get(T)?Xe.resolve():this.remoteDocumentCache.getEntry(e,T).next((C=>{m=m.insert(T,C)}))))).next((()=>this.populateOverlays(e,b,c))).next((()=>this.computeViews(e,m,b,dn()))).next((T=>({batchId:f,changes:Z2(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ct(t)).next((a=>{let i=gd();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,i){const c=t.collectionGroup;let u=gd();return this.indexManager.getCollectionParents(e,c).next((f=>Xe.forEach(f,(m=>{const b=(function(E,C){return new fu(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(c));return this.getDocumentsMatchingCollectionQuery(e,b,a,i).next((T=>{T.forEach(((E,C)=>{u=u.insert(E,C)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,a,i){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,c,i)))).next((u=>{c.forEach(((m,b)=>{const T=b.getKey();u.get(T)===null&&(u=u.insert(T,ar.newInvalidDocument(T)))}));let f=gd();return u.forEach(((m,b)=>{const T=c.get(m);T!==void 0&&Td(T.mutation,b,ta.empty(),vt.now()),mm(t,b)&&(f=f.insert(m,b))})),f}))}}class a4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Xe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:vi(i.createTime)}})(t)),Xe.resolve()}getNamedQuery(e,t){return Xe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:YR(i.bundledQuery),readTime:vi(i.readTime)}})(t)),Xe.resolve()}}class i4{constructor(){this.overlays=new ts(Ct.comparator),this.Lr=new Map}getOverlay(e,t){return Xe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Wl();return Xe.forEach(t,(i=>this.getOverlay(e,i).next((c=>{c!==null&&a.set(i,c)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((i,c)=>{this.bt(e,t,c)})),Xe.resolve()}removeOverlaysForBatchId(e,t,a){const i=this.Lr.get(a);return i!==void 0&&(i.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(a)),Xe.resolve()}getOverlaysForCollection(e,t,a){const i=Wl(),c=t.length+1,u=new Ct(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,b=m.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===c&&m.largestBatchId>a&&i.set(m.getKey(),m)}return Xe.resolve(i)}getOverlaysForCollectionGroup(e,t,a,i){let c=new ts(((b,T)=>b-T));const u=this.overlays.getIterator();for(;u.hasNext();){const b=u.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>a){let T=c.get(b.largestBatchId);T===null&&(T=Wl(),c=c.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const f=Wl(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((b,T)=>f.set(b,T))),!(f.size()>=i)););return Xe.resolve(f)}bt(e,t,a){const i=this.overlays.get(a.key);if(i!==null){const u=this.Lr.get(i.largestBatchId).delete(a.key);this.Lr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(a.key,new TR(t,a));let c=this.Lr.get(t);c===void 0&&(c=dn(),this.Lr.set(t,c)),this.Lr.set(t,c.add(a.key))}}class o4{constructor(){this.sessionToken=Ks.EMPTY_BYTE_STRING}getSessionToken(e){return Xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Xe.resolve()}}class qy{constructor(){this.kr=new Is(Bs.Kr),this.qr=new Is(Bs.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new Bs(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new Bs(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Ct(new Wn([])),a=new Bs(t,e),i=new Bs(t,e+1),c=[];return this.qr.forEachInRange([a,i],(u=>{this.Wr(u),c.push(u.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ct(new Wn([])),a=new Bs(t,e),i=new Bs(t,e+1);let c=dn();return this.qr.forEachInRange([a,i],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new Bs(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Bs{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ct.comparator(e.key,t.key)||un(e.Hr,t.Hr)}static Ur(e,t){return un(e.Hr,t.Hr)||Ct.comparator(e.key,t.key)}}class l4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Is(Bs.Kr)}checkEmpty(e){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,i){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new SR(c,t,a,i);this.mutationQueue.push(u);for(const f of i)this.Jr=this.Jr.add(new Bs(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Xe.resolve(u)}lookupMutationBatch(e,t){return Xe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,i=this.Xr(a),c=i<0?0:i;return Xe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?Dy:this.Yn-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Bs(t,0),i=new Bs(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([a,i],(u=>{const f=this.Zr(u.Hr);c.push(f)})),Xe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Is(un);return t.forEach((i=>{const c=new Bs(i,0),u=new Bs(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,u],(f=>{a=a.add(f.Hr)}))})),Xe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,i=a.length+1;let c=a;Ct.isDocumentKey(c)||(c=c.child(""));const u=new Bs(new Ct(c),0);let f=new Is(un);return this.Jr.forEachWhile((m=>{const b=m.key.path;return!!a.isPrefixOf(b)&&(b.length===i&&(f=f.add(m.Hr)),!0)}),u),Xe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((a=>{const i=this.Zr(a);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){jn(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return Xe.forEach(t.mutations,(i=>{const c=new Bs(i.key,t.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new Bs(t,0),i=this.Jr.firstAfterOrEqual(a);return Xe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class c4{constructor(e){this.ti=e,this.docs=(function(){return new ts(Ct.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,i=this.docs.get(a),c=i?i.size:0,u=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return Xe.resolve(a?a.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let a=ho();return t.forEach((i=>{const c=this.docs.get(i);a=a.insert(i,c?c.document.mutableCopy():ar.newInvalidDocument(i))})),Xe.resolve(a)}getDocumentsMatchingQuery(e,t,a,i){let c=ho();const u=t.path,f=new Ct(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:b,value:{document:T}}=m.getNext();if(!u.isPrefixOf(b.path))break;b.path.length>u.length+1||OA(IA(T),a)<=0||(i.has(T.key)||mm(t,T))&&(c=c.insert(T.key,T.mutableCopy()))}return Xe.resolve(c)}getAllFromCollectionGroup(e,t,a,i){Vt(9500)}ni(e,t){return Xe.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new u4(this)}getSize(e){return Xe.resolve(this.size)}}class u4 extends n4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(a)})),Xe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class d4{constructor(e){this.persistence=e,this.ri=new rc((t=>Oy(t)),Py),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.ii=0,this.si=new qy,this.targetCount=0,this.oi=ru._r()}forEachTarget(e,t){return this.ri.forEach(((a,i)=>t(i))),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),Xe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ru(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Xe.resolve()}updateTargetData(e,t){return this.lr(t),Xe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,t,a){let i=0;const c=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&a.get(f.targetId)===null&&(this.ri.delete(u),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)})),Xe.waitFor(c).next((()=>i))}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return Xe.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),Xe.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const i=this.persistence.referenceDelegate,c=[];return i&&t.forEach((u=>{c.push(i.markPotentiallyOrphaned(e,u))})),Xe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Xe.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return Xe.resolve(a)}containsKey(e,t){return Xe.resolve(this.si.containsKey(t))}}class xw{constructor(e,t){this._i={},this.overlays={},this.ai=new um(0),this.ui=!1,this.ui=!0,this.ci=new o4,this.referenceDelegate=e(this),this.li=new d4(this),this.indexManager=new KR,this.remoteDocumentCache=(function(i){return new c4(i)})((a=>this.referenceDelegate.hi(a))),this.serializer=new GR(t),this.Pi=new a4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new i4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new l4(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){gt("MemoryPersistence","Starting transaction:",e);const i=new h4(this.ai.next());return this.referenceDelegate.Ti(),a(i).next((c=>this.referenceDelegate.Ii(i).next((()=>c)))).toPromise().then((c=>(i.raiseOnCommittedEvent(),c)))}Ei(e,t){return Xe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class h4 extends LA{constructor(e){super(),this.currentSequenceNumber=e}}class Hy{constructor(e){this.persistence=e,this.Ri=new qy,this.Ai=null}static Vi(e){return new Hy(e)}get di(){if(this.Ai)return this.Ai;throw Vt(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),Xe.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),Xe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Xe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((c=>this.di.add(c.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.di,(a=>{const i=Ct.fromPath(a);return this.mi(e,i).next((c=>{c||t.removeEntry(i,zt.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Xe.or([()=>Xe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Xf{constructor(e,t){this.persistence=e,this.fi=new rc((a=>BA(a.path)),((a,i)=>a.isEqual(i))),this.garbageCollector=t4(this,t)}static Vi(e,t){return new Xf(e,t)}Ti(){}Ii(e){return Xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((i=>a+i))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return Xe.forEach(this.fi,((a,i)=>this.wr(e,a,i).next((c=>c?Xe.resolve():t(i)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const i=this.persistence.getRemoteDocumentCache(),c=i.newChangeBuffer();return i.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(a++,c.removeEntry(u,zt.min()))})))).next((()=>c.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Xe.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),Xe.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),Xe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Xe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}wr(e,t,a){return Xe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return Xe.resolve(i!==void 0&&i>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class $y{constructor(e,t,a,i){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=i}static Es(e,t){let a=dn(),i=dn();for(const c of t.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}return new $y(e,t.fromCache,a,i)}}class f4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class m4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return FN()?8:VA(or())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,i){const c={result:null};return this.gs(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ps(e,t,i,a).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new f4;return this.ys(e,t,u).next((f=>{if(c.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>c.result))}ws(e,t,a,i){return a.documentReadCount<this.Vs?(qc()<=cn.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",Hc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Xe.resolve()):(qc()<=cn.DEBUG&&gt("QueryEngine","Query:",Hc(t),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ds*i?(qc()<=cn.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",Hc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(t))):Xe.resolve())}gs(e,t){if(ax(t))return Xe.resolve(null);let a=yi(t);return this.indexManager.getIndexType(e,a).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=qg(t,null,"F"),a=yi(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((c=>{const u=dn(...c);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,a).next((m=>{const b=this.bs(t,f);return this.Ss(t,b,u,m.readTime)?this.gs(e,qg(t,null,"F")):this.Ds(e,b,t,m)}))))})))))}ps(e,t,a,i){return ax(t)||i.isEqual(zt.min())?Xe.resolve(null):this.fs.getDocuments(e,a).next((c=>{const u=this.bs(t,c);return this.Ss(t,u,a,i)?Xe.resolve(null):(qc()<=cn.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hc(t)),this.Ds(e,u,t,MA(i,Dd)).next((f=>f)))}))}bs(e,t){let a=new Is(X2(e));return t.forEach(((i,c)=>{mm(e,c)&&(a=a.add(c))})),a}Ss(e,t,a,i){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(i)>0)}ys(e,t,a){return qc()<=cn.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",Hc(t)),this.fs.getDocumentsMatchingQuery(e,t,cl.min(),a)}Ds(e,t,a,i){return this.fs.getDocumentsMatchingQuery(e,a,i).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Wy="LocalStore",p4=3e8;class g4{constructor(e,t,a,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new ts(un),this.Fs=new rc((c=>Oy(c)),Py),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function y4(s,e,t,a){return new g4(s,e,t,a)}async function _w(s,e){const t=$t(s);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let i;return t.mutationQueue.getAllMutationBatches(a).next((c=>(i=c,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((c=>{const u=[],f=[];let m=dn();for(const b of i){u.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}for(const b of c){f.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}return t.localDocuments.getDocuments(a,m).next((b=>({Ns:b,removedBatchIds:u,addedBatchIds:f})))}))}))}function v4(s,e){const t=$t(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const i=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,b,T){const E=b.batch,C=E.keys();let L=Xe.resolve();return C.forEach((P=>{L=L.next((()=>T.getEntry(m,P))).next((V=>{const F=b.docVersions.get(P);jn(F!==null,48541),V.version.compareTo(F)<0&&(E.applyToRemoteDocument(V,b),V.isValidDocument()&&(V.setReadTime(b.commitVersion),T.addEntry(V)))}))})),L.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,a,e,c).next((()=>c.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(f){let m=dn();for(let b=0;b<f.mutationResults.length;++b)f.mutationResults[b].transformResults.length>0&&(m=m.add(f.batch.mutations[b].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(a,i)))}))}function ww(s){const e=$t(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function b4(s,e){const t=$t(s),a=e.snapshotVersion;let i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;const f=[];e.targetChanges.forEach(((T,E)=>{const C=i.get(E);if(!C)return;f.push(t.li.removeMatchingKeys(c,T.removedDocuments,E).next((()=>t.li.addMatchingKeys(c,T.addedDocuments,E))));let L=C.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(Ks.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):T.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(T.resumeToken,a)),i=i.insert(E,L),(function(V,F,K){return V.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=p4?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(C,L,T)&&f.push(t.li.updateTargetData(c,L))}));let m=ho(),b=dn();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))})),f.push(x4(c,u,e.documentUpdates).next((T=>{m=T.Bs,b=T.Ls}))),!a.isEqual(zt.min())){const T=t.li.getLastRemoteSnapshotVersion(c).next((E=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,a)));f.push(T)}return Xe.waitFor(f).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,m,b))).next((()=>m))})).then((c=>(t.vs=i,c)))}function x4(s,e,t){let a=dn(),i=dn();return t.forEach((c=>a=a.add(c))),e.getEntries(s,a).next((c=>{let u=ho();return t.forEach(((f,m)=>{const b=c.get(f);m.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(zt.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!b.isValidDocument()||m.version.compareTo(b.version)>0||m.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):gt(Wy,"Ignoring outdated watch update for ",f,". Current version:",b.version," Watch version:",m.version)})),{Bs:u,Ls:i}}))}function _4(s,e){const t=$t(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Dy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function w4(s,e){const t=$t(s);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let i;return t.li.getTargetData(a,e).next((c=>c?(i=c,Xe.resolve(i)):t.li.allocateTargetId(a).next((u=>(i=new sl(e,u,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,i).next((()=>i)))))))})).then((a=>{const i=t.vs.get(a.targetId);return(i===null||a.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function Yg(s,e,t){const a=$t(s),i=a.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",c,(u=>a.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!hu(u))throw u;gt(Wy,`Failed to update sequence numbers for target ${e}: ${u}`)}a.vs=a.vs.remove(e),a.Fs.delete(i.target)}function vx(s,e,t){const a=$t(s);let i=zt.min(),c=dn();return a.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,b,T){const E=$t(m),C=E.Fs.get(T);return C!==void 0?Xe.resolve(E.vs.get(C)):E.li.getTargetData(b,T)})(a,u,yi(e)).next((f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(u,f.targetId).next((m=>{c=m}))})).next((()=>a.Cs.getDocumentsMatchingQuery(u,e,t?i:zt.min(),t?c:dn()))).next((f=>(S4(a,lR(e),f),{documents:f,ks:c})))))}function S4(s,e,t){let a=s.Ms.get(e)||zt.min();t.forEach(((i,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),s.Ms.set(e,a)}class bx{constructor(){this.activeTargetIds=mR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T4{constructor(){this.vo=new bx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new bx,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class E4{Mo(e){}shutdown(){}}const xx="ConnectivityMonitor";class _x{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){gt(xx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){gt(xx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ff=null;function Kg(){return ff===null?ff=(function(){return 268435456+Math.round(2147483648*Math.random())})():ff++,"0x"+ff.toString(16)}const mg="RestConnection",N4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class j4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${i}`,this.$o=this.databaseId.database===$f?`project_id=${a}`:`project_id=${a}&database_id=${i}`}Wo(e,t,a,i,c){const u=Kg(),f=this.Qo(e,t.toUriEncodedString());gt(mg,`Sending RPC '${e}' ${u}:`,f,a);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,i,c);const{host:b}=new URL(f),T=pl(b);return this.zo(e,f,m,a,T).then((E=>(gt(mg,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw eu(mg,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",a),E}))}jo(e,t,a,i,c,u){return this.Wo(e,t,a,i,c)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,c)=>e[c]=i)),a&&a.headers.forEach(((i,c)=>e[c]=i))}Qo(e,t){const a=N4[e];let i=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}class k4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const sr="WebChannelConnection",od=(s,e,t)=>{s.listen(e,(a=>{try{t(a)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Xc extends j4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Xc.c_){const e=j2();od(e,N2.STAT_EVENT,(t=>{t.stat===Pg.PROXY?gt(sr,"STAT_EVENT: detected buffering proxy"):t.stat===Pg.NOPROXY&&gt(sr,"STAT_EVENT: detected no buffering proxy")})),Xc.c_=!0}}zo(e,t,a,i,c){const u=Kg();return new Promise(((f,m)=>{const b=new T2;b.setWithCredentials(!0),b.listenOnce(E2.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Ef.NO_ERROR:const E=b.getResponseJson();gt(sr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case Ef.TIMEOUT:gt(sr,`RPC '${e}' ${u} timed out`),m(new ft(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case Ef.HTTP_ERROR:const C=b.getStatus();if(gt(sr,`RPC '${e}' ${u} failed with status:`,C,"response text:",b.getResponseText()),C>0){let L=b.getResponseJson();Array.isArray(L)&&(L=L[0]);const P=L?.error;if(P&&P.status&&P.message){const V=(function(K){const G=K.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(G)>=0?G:Ye.UNKNOWN})(P.status);m(new ft(V,P.message))}else m(new ft(Ye.UNKNOWN,"Server responded with status "+b.getStatus()))}else m(new ft(Ye.UNAVAILABLE,"Connection failed."));break;default:Vt(9055,{l_:e,streamId:u,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{gt(sr,`RPC '${e}' ${u} completed.`)}}));const T=JSON.stringify(i);gt(sr,`RPC '${e}' ${u} sending request:`,i),b.send(t,"POST",T,a,15)}))}T_(e,t,a){const i=Kg(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,a),f.encodeInitMessageHeaders=!0;const b=c.join("");gt(sr,`Creating RPC '${e}' stream ${i}: ${b}`,f);const T=u.createWebChannel(b,f);this.I_(T);let E=!1,C=!1;const L=new k4({Ho:P=>{C?gt(sr,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(E||(gt(sr,`Opening RPC '${e}' stream ${i} transport.`),T.open(),E=!0),gt(sr,`RPC '${e}' stream ${i} sending:`,P),T.send(P))},Jo:()=>T.close()});return od(T,pd.EventType.OPEN,(()=>{C||(gt(sr,`RPC '${e}' stream ${i} transport opened.`),L.i_())})),od(T,pd.EventType.CLOSE,(()=>{C||(C=!0,gt(sr,`RPC '${e}' stream ${i} transport closed`),L.o_(),this.E_(T))})),od(T,pd.EventType.ERROR,(P=>{C||(C=!0,eu(sr,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),L.o_(new ft(Ye.UNAVAILABLE,"The operation could not be completed")))})),od(T,pd.EventType.MESSAGE,(P=>{if(!C){const V=P.data[0];jn(!!V,16349);const F=V,K=F?.error||F[0]?.error;if(K){gt(sr,`RPC '${e}' stream ${i} received error:`,K);const G=K.status;let se=(function(je){const q=Ts[je];if(q!==void 0)return lw(q)})(G),Y=K.message;se===void 0&&(se=Ye.INTERNAL,Y="Unknown error status: "+G+" with message "+K.message),C=!0,L.o_(new ft(se,Y)),T.close()}else gt(sr,`RPC '${e}' stream ${i} received:`,V),L.__(V)}})),Xc.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return k2()}}function C4(s){return new Xc(s)}function pg(){return typeof document<"u"?document:null}function vm(s){return new MR(s,!0)}Xc.c_=!1;class Sw{constructor(e,t,a=1e3,i=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=i,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-a);i>0&&gt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const wx="PersistentStream";class Tw{constructor(e,t,a,i,c,u,f,m){this.Ci=e,this.b_=a,this.S_=i,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Sw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ye.RESOURCE_EXHAUSTED?(uo(t.toString()),uo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,i])=>{this.D_===t&&this.G_(a,i)}),(a=>{e((()=>{const i=new ft(Ye.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(i)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{a((()=>this.z_(i)))})),this.stream.onMessage((i=>{a((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return gt(wx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(gt(wx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class A4 extends Tw{constructor(e,t,a,i,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,i,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=PR(this.serializer,e),a=(function(c){if(!("targetChange"in c))return zt.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?zt.min():u.readTime?vi(u.readTime):zt.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=Gg(this.serializer),t.addTarget=(function(c,u){let f;const m=u.target;if(f=zg(m)?{documents:UR(c,m)}:{query:BR(c,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=dw(c,u.resumeToken);const b=Hg(c,u.expectedCount);b!==null&&(f.expectedCount=b)}else if(u.snapshotVersion.compareTo(zt.min())>0){f.readTime=Qf(c,u.snapshotVersion.toTimestamp());const b=Hg(c,u.expectedCount);b!==null&&(f.expectedCount=b)}return f})(this.serializer,e);const a=FR(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=Gg(this.serializer),t.removeTarget=e,this.K_(t)}}class R4 extends Tw{constructor(e,t,a,i,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,i,u),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return jn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){jn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=VR(e.writeResults,e.commitTime),a=vi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Gg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>LR(this.serializer,a)))};this.K_(t)}}class D4{}class M4 extends D4{constructor(e,t,a,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ft(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Wo(e,$g(t,a),i,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(Ye.UNKNOWN,c.toString())}))}jo(e,t,a,i,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,$g(t,a),i,u,f,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ft(Ye.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function I4(s,e,t,a){return new M4(s,e,t,a)}class O4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(uo(t),this.aa=!1):gt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ec="RemoteStore";class P4{constructor(e,t,a,i,c){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((u=>{a.enqueueAndForget((async()=>{ac(this)&&(gt(ec,"Restarting streams for network reachability change."),await(async function(m){const b=$t(m);b.Ea.add(4),await Xd(b),b.Va.set("Unknown"),b.Ea.delete(4),await bm(b)})(this))}))})),this.Va=new O4(a,i)}}async function bm(s){if(ac(s))for(const e of s.Ra)await e(!0)}async function Xd(s){for(const e of s.Ra)await e(!1)}function Ew(s,e){const t=$t(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Qy(t)?Ky(t):mu(t).O_()&&Yy(t,e))}function Gy(s,e){const t=$t(s),a=mu(t);t.Ia.delete(e),a.O_()&&Nw(t,e),t.Ia.size===0&&(a.O_()?a.L_():ac(t)&&t.Va.set("Unknown"))}function Yy(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(zt.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mu(s).Z_(e)}function Nw(s,e){s.da.$e(e),mu(s).X_(e)}function Ky(s){s.da=new CR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),mu(s).start(),s.Va.ua()}function Qy(s){return ac(s)&&!mu(s).x_()&&s.Ia.size>0}function ac(s){return $t(s).Ea.size===0}function jw(s){s.da=void 0}async function L4(s){s.Va.set("Online")}async function V4(s){s.Ia.forEach(((e,t)=>{Yy(s,e)}))}async function U4(s,e){jw(s),Qy(s)?(s.Va.ha(e),Ky(s)):s.Va.set("Unknown")}async function B4(s,e,t){if(s.Va.set("Online"),e instanceof uw&&e.state===2&&e.cause)try{await(async function(i,c){const u=c.cause;for(const f of c.targetIds)i.Ia.has(f)&&(await i.remoteSyncer.rejectListen(f,u),i.Ia.delete(f),i.da.removeTarget(f))})(s,e)}catch(a){gt(ec,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Jf(s,a)}else if(e instanceof Cf?s.da.Xe(e):e instanceof cw?s.da.st(e):s.da.tt(e),!t.isEqual(zt.min()))try{const a=await ww(s.localStore);t.compareTo(a)>=0&&await(function(c,u){const f=c.da.Tt(u);return f.targetChanges.forEach(((m,b)=>{if(m.resumeToken.approximateByteSize()>0){const T=c.Ia.get(b);T&&c.Ia.set(b,T.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,b)=>{const T=c.Ia.get(m);if(!T)return;c.Ia.set(m,T.withResumeToken(Ks.EMPTY_BYTE_STRING,T.snapshotVersion)),Nw(c,m);const E=new sl(T.target,m,b,T.sequenceNumber);Yy(c,E)})),c.remoteSyncer.applyRemoteEvent(f)})(s,t)}catch(a){gt(ec,"Failed to raise snapshot:",a),await Jf(s,a)}}async function Jf(s,e,t){if(!hu(e))throw e;s.Ea.add(1),await Xd(s),s.Va.set("Offline"),t||(t=()=>ww(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{gt(ec,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await bm(s)}))}function kw(s,e){return e().catch((t=>Jf(s,t,e)))}async function xm(s){const e=$t(s),t=fl(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dy;for(;z4(e);)try{const i=await _4(e.localStore,a);if(i===null){e.Ta.length===0&&t.L_();break}a=i.batchId,F4(e,i)}catch(i){await Jf(e,i)}Cw(e)&&Aw(e)}function z4(s){return ac(s)&&s.Ta.length<10}function F4(s,e){s.Ta.push(e);const t=fl(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function Cw(s){return ac(s)&&!fl(s).x_()&&s.Ta.length>0}function Aw(s){fl(s).start()}async function q4(s){fl(s).ra()}async function H4(s){const e=fl(s);for(const t of s.Ta)e.ea(t.mutations)}async function $4(s,e,t){const a=s.Ta.shift(),i=By.from(a,e,t);await kw(s,(()=>s.remoteSyncer.applySuccessfulWrite(i))),await xm(s)}async function W4(s,e){e&&fl(s).Y_&&await(async function(a,i){if((function(u){return NR(u)&&u!==Ye.ABORTED})(i.code)){const c=a.Ta.shift();fl(a).B_(),await kw(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,i))),await xm(a)}})(s,e),Cw(s)&&Aw(s)}async function Sx(s,e){const t=$t(s);t.asyncQueue.verifyOperationInProgress(),gt(ec,"RemoteStore received new credentials");const a=ac(t);t.Ea.add(3),await Xd(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bm(t)}async function G4(s,e){const t=$t(s);e?(t.Ea.delete(2),await bm(t)):e||(t.Ea.add(2),await Xd(t),t.Va.set("Unknown"))}function mu(s){return s.ma||(s.ma=(function(t,a,i){const c=$t(t);return c.sa(),new A4(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(s.datastore,s.asyncQueue,{Zo:L4.bind(null,s),Yo:V4.bind(null,s),t_:U4.bind(null,s),J_:B4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Qy(s)?Ky(s):s.Va.set("Unknown")):(await s.ma.stop(),jw(s))}))),s.ma}function fl(s){return s.fa||(s.fa=(function(t,a,i){const c=$t(t);return c.sa(),new R4(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,i)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:q4.bind(null,s),t_:W4.bind(null,s),ta:H4.bind(null,s),na:$4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await xm(s)):(await s.fa.stop(),s.Ta.length>0&&(gt(ec,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Xy{constructor(e,t,a,i,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=i,this.removalCallback=c,this.deferred=new io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,i,c){const u=Date.now()+a,f=new Xy(e,t,u,i,c);return f.start(a),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(Ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(s,e){if(uo("AsyncQueue",`${e}: ${s}`),hu(s))return new ft(Ye.UNAVAILABLE,`${e}: ${s}`);throw s}class Jc{static emptySet(e){return new Jc(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Ct.comparator(t.key,a.key):(t,a)=>Ct.comparator(t.key,a.key),this.keyedMap=gd(),this.sortedSet=new ts(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,c=a.getNext().key;if(!i.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Jc;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class Tx{constructor(){this.ga=new ts(Ct.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Vt(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class au{constructor(e,t,a,i,c,u,f,m,b){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=i,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=b}static fromInitialDocuments(e,t,a,i,c){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new au(e,t,Jc.emptySet(t),u,a,i,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==a[i].type||!t[i].doc.isEqual(a[i].doc))return!1;return!0}}class Y4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class K4{constructor(){this.queries=Ex(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const i=$t(t),c=i.queries;i.queries=Ex(),c.forEach(((u,f)=>{for(const m of f.ba)m.onError(a)}))})(this,new ft(Ye.ABORTED,"Firestore shutting down"))}}function Ex(){return new rc((s=>Q2(s)),fm)}async function Rw(s,e){const t=$t(s);let a=3;const i=e.query;let c=t.queries.get(i);c?!c.Sa()&&e.Da()&&(a=2):(c=new Y4,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await t.onListen(i,!0);break;case 1:c.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const f=Jy(u,`Initialization of query '${Hc(e.query)}' failed`);return void e.onError(f)}t.queries.set(i,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Zy(t)}async function Dw(s,e){const t=$t(s),a=e.query;let i=3;const c=t.queries.get(a);if(c){const u=c.ba.indexOf(e);u>=0&&(c.ba.splice(u,1),c.ba.length===0?i=e.Da()?0:1:!c.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function Q4(s,e){const t=$t(s);let a=!1;for(const i of e){const c=i.query,u=t.queries.get(c);if(u){for(const f of u.ba)f.Fa(i)&&(a=!0);u.wa=i}}a&&Zy(t)}function X4(s,e,t){const a=$t(s),i=a.queries.get(e);if(i)for(const c of i.ba)c.onError(t);a.queries.delete(e)}function Zy(s){s.Ca.forEach((e=>{e.next()}))}var Qg,Nx;(Nx=Qg||(Qg={})).Ma="default",Nx.Cache="cache";class Mw{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const i of e.docChanges)i.type!==3&&a.push(i);e=new au(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=au.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}class Iw{constructor(e){this.key=e}}class Ow{constructor(e){this.key=e}}class J4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=dn(),this.mutatedKeys=dn(),this.eu=X2(e),this.tu=new Jc(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new Tx,i=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,b=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((T,E)=>{const C=i.get(T),L=mm(this.query,E)?E:null,P=!!C&&this.mutatedKeys.has(C.key),V=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let F=!1;C&&L?C.data.isEqual(L.data)?P!==V&&(a.track({type:3,doc:L}),F=!0):this.su(C,L)||(a.track({type:2,doc:L}),F=!0,(m&&this.eu(L,m)>0||b&&this.eu(L,b)<0)&&(f=!0)):!C&&L?(a.track({type:0,doc:L}),F=!0):C&&!L&&(a.track({type:1,doc:C}),F=!0,(m||b)&&(f=!0)),F&&(L?(u=u.add(L),c=V?c.add(T):c.delete(T)):(u=u.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const T=this.query.limitType==="F"?u.last():u.first();u=u.delete(T.key),c=c.delete(T.key),a.track({type:1,doc:T})}return{tu:u,iu:a,Ss:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,i){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((T,E)=>(function(L,P){const V=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt(20277,{Vt:F})}};return V(L)-V(P)})(T.type,E.type)||this.eu(T.doc,E.doc))),this.ou(a),i=i??!1;const f=t&&!i?this._u():[],m=this.Ya.size===0&&this.current&&!i?1:0,b=m!==this.Xa;return this.Xa=m,u.length!==0||b?{snapshot:new au(this.query,e.tu,c,u,e.mutatedKeys,m===0,b,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=dn(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new Ow(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new Iw(a))})),t}cu(e){this.Za=e.ks,this.Ya=dn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return au.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ev="SyncEngine";class Z4{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class eD{constructor(e){this.key=e,this.hu=!1}}class tD{constructor(e,t,a,i,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=i,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new rc((f=>Q2(f)),fm),this.Iu=new Map,this.Eu=new Set,this.Ru=new ts(Ct.comparator),this.Au=new Map,this.Vu=new qy,this.du={},this.mu=new Map,this.fu=ru.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nD(s,e,t=!0){const a=zw(s);let i;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),i=c.view.lu()):i=await Pw(a,e,t,!0),i}async function sD(s,e){const t=zw(s);await Pw(t,e,!0,!1)}async function Pw(s,e,t,a){const i=await w4(s.localStore,yi(e)),c=i.targetId,u=s.sharedClientState.addLocalQueryTarget(c,t);let f;return a&&(f=await rD(s,e,c,u==="current",i.resumeToken)),s.isPrimaryClient&&t&&Ew(s.remoteStore,i),f}async function rD(s,e,t,a,i){s.pu=(E,C,L)=>(async function(V,F,K,G){let se=F.view.ru(K);se.Ss&&(se=await vx(V.localStore,F.query,!1).then((({documents:q})=>F.view.ru(q,se))));const Y=G&&G.targetChanges.get(F.targetId),fe=G&&G.targetMismatches.get(F.targetId)!=null,je=F.view.applyChanges(se,V.isPrimaryClient,Y,fe);return kx(V,F.targetId,je.au),je.snapshot})(s,E,C,L);const c=await vx(s.localStore,e,!0),u=new J4(e,c.ks),f=u.ru(c.documents),m=Qd.createSynthesizedTargetChangeForCurrentChange(t,a&&s.onlineState!=="Offline",i),b=u.applyChanges(f,s.isPrimaryClient,m);kx(s,t,b.au);const T=new Z4(e,t,u);return s.Tu.set(e,T),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),b.snapshot}async function aD(s,e,t){const a=$t(s),i=a.Tu.get(e),c=a.Iu.get(i.targetId);if(c.length>1)return a.Iu.set(i.targetId,c.filter((u=>!fm(u,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(i.targetId),a.sharedClientState.isActiveQueryTarget(i.targetId)||await Yg(a.localStore,i.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(i.targetId),t&&Gy(a.remoteStore,i.targetId),Xg(a,i.targetId)})).catch(du)):(Xg(a,i.targetId),await Yg(a.localStore,i.targetId,!0))}async function iD(s,e){const t=$t(s),a=t.Tu.get(e),i=t.Iu.get(a.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Gy(t.remoteStore,a.targetId))}async function oD(s,e,t){const a=mD(s);try{const i=await(function(u,f){const m=$t(u),b=vt.now(),T=f.reduce(((L,P)=>L.add(P.key)),dn());let E,C;return m.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let P=ho(),V=dn();return m.xs.getEntries(L,T).next((F=>{P=F,P.forEach(((K,G)=>{G.isValidDocument()||(V=V.add(K))}))})).next((()=>m.localDocuments.getOverlayedDocuments(L,P))).next((F=>{E=F;const K=[];for(const G of f){const se=_R(G,E.get(G.key).overlayedDocument);se!=null&&K.push(new vl(G.key,se,F2(se.value.mapValue),_a.exists(!0)))}return m.mutationQueue.addMutationBatch(L,b,K,f)})).next((F=>{C=F;const K=F.applyToLocalDocumentSet(E,V);return m.documentOverlayCache.saveOverlays(L,F.batchId,K)}))})).then((()=>({batchId:C.batchId,changes:Z2(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(i.batchId),(function(u,f,m){let b=u.du[u.currentUser.toKey()];b||(b=new ts(un)),b=b.insert(f,m),u.du[u.currentUser.toKey()]=b})(a,i.batchId,t),await Jd(a,i.changes),await xm(a.remoteStore)}catch(i){const c=Jy(i,"Failed to persist write");t.reject(c)}}async function Lw(s,e){const t=$t(s);try{const a=await b4(t.localStore,e);e.targetChanges.forEach(((i,c)=>{const u=t.Au.get(c);u&&(jn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?jn(u.hu,14607):i.removedDocuments.size>0&&(jn(u.hu,42227),u.hu=!1))})),await Jd(t,a,e)}catch(a){await du(a)}}function jx(s,e,t){const a=$t(s);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const i=[];a.Tu.forEach(((c,u)=>{const f=u.view.va(e);f.snapshot&&i.push(f.snapshot)})),(function(u,f){const m=$t(u);m.onlineState=f;let b=!1;m.queries.forEach(((T,E)=>{for(const C of E.ba)C.va(f)&&(b=!0)})),b&&Zy(m)})(a.eventManager,e),i.length&&a.Pu.J_(i),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function lD(s,e,t){const a=$t(s);a.sharedClientState.updateQueryState(e,"rejected",t);const i=a.Au.get(e),c=i&&i.key;if(c){let u=new ts(Ct.comparator);u=u.insert(c,ar.newNoDocument(c,zt.min()));const f=dn().add(c),m=new ym(zt.min(),new Map,new ts(un),u,f);await Lw(a,m),a.Ru=a.Ru.remove(c),a.Au.delete(e),tv(a)}else await Yg(a.localStore,e,!1).then((()=>Xg(a,e,t))).catch(du)}async function cD(s,e){const t=$t(s),a=e.batch.batchId;try{const i=await v4(t.localStore,e);Uw(t,a,null),Vw(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Jd(t,i)}catch(i){await du(i)}}async function uD(s,e,t){const a=$t(s);try{const i=await(function(u,f){const m=$t(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let T;return m.mutationQueue.lookupMutationBatch(b,f).next((E=>(jn(E!==null,37113),T=E.keys(),m.mutationQueue.removeMutationBatch(b,E)))).next((()=>m.mutationQueue.performConsistencyCheck(b))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(b,T,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,T))).next((()=>m.localDocuments.getDocuments(b,T)))}))})(a.localStore,e);Uw(a,e,t),Vw(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Jd(a,i)}catch(i){await du(i)}}function Vw(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function Uw(s,e,t){const a=$t(s);let i=a.du[a.currentUser.toKey()];if(i){const c=i.get(e);c&&(t?c.reject(t):c.resolve(),i=i.remove(e)),a.du[a.currentUser.toKey()]=i}}function Xg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),t&&s.Pu.yu(a,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||Bw(s,a)}))}function Bw(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(Gy(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),tv(s))}function kx(s,e,t){for(const a of t)a instanceof Iw?(s.Vu.addReference(a.key,e),dD(s,a)):a instanceof Ow?(gt(ev,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||Bw(s,a.key)):Vt(19791,{wu:a})}function dD(s,e){const t=e.key,a=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(a)||(gt(ev,"New document in limbo: "+t),s.Eu.add(a),tv(s))}function tv(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ct(Wn.fromString(e)),a=s.fu.next();s.Au.set(a,new eD(t)),s.Ru=s.Ru.insert(t,a),Ew(s.remoteStore,new sl(yi(Ly(t.path)),a,"TargetPurposeLimboResolution",um.ce))}}async function Jd(s,e,t){const a=$t(s),i=[],c=[],u=[];a.Tu.isEmpty()||(a.Tu.forEach(((f,m)=>{u.push(a.pu(m,e,t).then((b=>{if((b||t)&&a.isPrimaryClient){const T=b?!b.fromCache:t?.targetChanges.get(m.targetId)?.current;a.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(b){i.push(b);const T=$y.Es(m.targetId,b);c.push(T)}})))})),await Promise.all(u),a.Pu.J_(i),await(async function(m,b){const T=$t(m);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>Xe.forEach(b,(C=>Xe.forEach(C.Ts,(L=>T.persistence.referenceDelegate.addReference(E,C.targetId,L))).next((()=>Xe.forEach(C.Is,(L=>T.persistence.referenceDelegate.removeReference(E,C.targetId,L)))))))))}catch(E){if(!hu(E))throw E;gt(Wy,"Failed to update sequence numbers: "+E)}for(const E of b){const C=E.targetId;if(!E.fromCache){const L=T.vs.get(C),P=L.snapshotVersion,V=L.withLastLimboFreeSnapshotVersion(P);T.vs=T.vs.insert(C,V)}}})(a.localStore,c))}async function hD(s,e){const t=$t(s);if(!t.currentUser.isEqual(e)){gt(ev,"User change. New user:",e.toKey());const a=await _w(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((f=>{f.forEach((m=>{m.reject(new ft(Ye.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Jd(t,a.Ns)}}function fD(s,e){const t=$t(s),a=t.Au.get(e);if(a&&a.hu)return dn().add(a.key);{let i=dn();const c=t.Iu.get(e);if(!c)return i;for(const u of c){const f=t.Tu.get(u);i=i.unionWith(f.view.nu)}return i}}function zw(s){const e=$t(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lD.bind(null,e),e.Pu.J_=Q4.bind(null,e.eventManager),e.Pu.yu=X4.bind(null,e.eventManager),e}function mD(s){const e=$t(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uD.bind(null,e),e}class Zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return y4(this.persistence,new m4,e.initialUser,this.serializer)}Cu(e){return new xw(Hy.Vi,this.serializer)}Du(e){return new T4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zf.provider={build:()=>new Zf};class pD extends Zf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){jn(this.persistence.referenceDelegate instanceof Xf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new ZR(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vr.withCacheSize(this.cacheSizeBytes):Vr.DEFAULT;return new xw((a=>Xf.Vi(a,t)),this.serializer)}}class Jg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>jx(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=hD.bind(null,this.syncEngine),await G4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new K4})()}createDatastore(e){const t=vm(e.databaseInfo.databaseId),a=C4(e.databaseInfo);return I4(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,i,c,u,f){return new P4(a,i,c,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>jx(this.syncEngine,t,0)),(function(){return _x.v()?new _x:new E4})())}createSyncEngine(e,t){return(function(i,c,u,f,m,b,T){const E=new tD(i,c,u,f,m,b);return T&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const a=$t(t);gt(ec,"RemoteStore shutting down."),a.Ea.add(5),await Xd(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Jg.provider={build:()=>new Jg};class Fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):uo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ml="FirestoreClient";class gD{constructor(e,t,a,i,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=i,this.user=rr.UNAUTHENTICATED,this.clientId=Ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async u=>{gt(ml,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(a,(u=>(gt(ml,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Jy(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function gg(s,e){s.asyncQueue.verifyOperationInProgress(),gt(ml,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener((async i=>{a.isEqual(i)||(await _w(e.localStore,i),a=i)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Cx(s,e){s.asyncQueue.verifyOperationInProgress();const t=await yD(s);gt(ml,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((a=>Sx(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,i)=>Sx(e.remoteStore,i))),s._onlineComponents=e}async function yD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){gt(ml,"Using user provided OfflineComponentProvider");try{await gg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ye.FAILED_PRECONDITION||i.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;eu("Error using user provided cache. Falling back to memory cache: "+t),await gg(s,new Zf)}}else gt(ml,"Using default OfflineComponentProvider"),await gg(s,new pD(void 0));return s._offlineComponents}async function qw(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(gt(ml,"Using user provided OnlineComponentProvider"),await Cx(s,s._uninitializedComponentsProvider._online)):(gt(ml,"Using default OnlineComponentProvider"),await Cx(s,new Jg))),s._onlineComponents}function vD(s){return qw(s).then((e=>e.syncEngine))}async function Hw(s){const e=await qw(s),t=e.eventManager;return t.onListen=nD.bind(null,e.syncEngine),t.onUnlisten=aD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=sD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iD.bind(null,e.syncEngine),t}function bD(s,e,t={}){const a=new io;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,m,b){const T=new Fw({next:C=>{T.Nu(),u.enqueueAndForget((()=>Dw(c,E)));const L=C.docs.has(f);!L&&C.fromCache?b.reject(new ft(Ye.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&C.fromCache&&m&&m.source==="server"?b.reject(new ft(Ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(C)},error:C=>b.reject(C)}),E=new Mw(Ly(f.path),T,{includeMetadataChanges:!0,Ka:!0});return Rw(c,E)})(await Hw(s),s.asyncQueue,e,t,a))),a.promise}function xD(s,e,t={}){const a=new io;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,m,b){const T=new Fw({next:C=>{T.Nu(),u.enqueueAndForget((()=>Dw(c,E))),C.fromCache&&m.source==="server"?b.reject(new ft(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(C)},error:C=>b.reject(C)}),E=new Mw(f,T,{includeMetadataChanges:!0,Ka:!0});return Rw(c,E)})(await Hw(s),s.asyncQueue,e,t,a))),a.promise}function _D(s,e){const t=new io;return s.asyncQueue.enqueueAndForget((async()=>oD(await vD(s),e,t))),t.promise}function $w(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const wD="ComponentProvider",Ax=new Map;function SD(s,e,t,a,i){return new qA(s,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,$w(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,a)}const Ww="firestore.googleapis.com",Rx=!0;class Dx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ft(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ww,this.ssl=Rx}else this.host=e.host,this.ssl=e.ssl??Rx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=bw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XR)throw new ft(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$w(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ft(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ft(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ft(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,i){return a.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _m{constructor(e,t,a,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ft(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new wA;switch(a.type){case"firstParty":return new NA(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ft(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=Ax.get(t);a&&(gt(wD,"Removing Datastore"),Ax.delete(t),a.terminate())})(this),Promise.resolve()}}function TD(s,e,t,a={}){s=za(s,_m);const i=pl(e),c=s._getSettings(),u={...c,emulatorOptions:s._getEmulatorOptions()},f=`${e}:${t}`;i&&(my(`https://${f}`),py("Firestore",!0)),c.host!==Ww&&c.host!==f&&eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:f,ssl:i,emulatorOptions:a};if(!Kl(m,u)&&(s._setSettings(m),a.mockUserToken)){let b,T;if(typeof a.mockUserToken=="string")b=a.mockUserToken,T=rr.MOCK_USER;else{b=P_(a.mockUserToken,s._app?.options.projectId);const E=a.mockUserToken.sub||a.mockUserToken.user_id;if(!E)throw new ft(Ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new rr(E)}s._authCredentials=new SA(new A2(b,T))}}class ic{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ic(this.firestore,e,this._query)}}class gs{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gs(this.firestore,e,this._key)}toJSON(){return{type:gs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Yd(t,gs._jsonSchema))return new gs(e,a||null,new Ct(Wn.fromString(t.referencePath)))}}gs._jsonSchemaVersion="firestore/documentReference/1.0",gs._jsonSchema={type:js("string",gs._jsonSchemaVersion),referencePath:js("string")};class ol extends ic{constructor(e,t,a){super(e,t,Ly(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gs(this.firestore,null,new Ct(e))}withConverter(e){return new ol(this.firestore,e,this._path)}}function Ft(s,e,...t){if(s=es(s),R2("collection","path",e),s instanceof _m){const a=Wn.fromString(e,...t);return $b(a),new ol(s,null,a)}{if(!(s instanceof gs||s instanceof ol))throw new ft(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Wn.fromString(e,...t));return $b(a),new ol(s.firestore,null,a)}}function It(s,e,...t){if(s=es(s),arguments.length===1&&(e=Ry.newId()),R2("doc","path",e),s instanceof _m){const a=Wn.fromString(e,...t);return Hb(a),new gs(s,null,new Ct(a))}{if(!(s instanceof gs||s instanceof ol))throw new ft(Ye.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Wn.fromString(e,...t));return Hb(a),new gs(s.firestore,s instanceof ol?s.converter:null,new Ct(a))}}const Mx="AsyncQueue";class Ix{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Sw(this,"async_queue_retry"),this._c=()=>{const a=pg();a&&gt(Mx,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=pg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=pg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new io;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!hu(e))throw e;gt(Mx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,uo("INTERNAL UNHANDLED ERROR: ",Ox(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Xy.createAndSchedule(this,e,t,a,(c=>this.hc(c)));return this.tc.push(i),i}uc(){this.nc&&Vt(47125,{Pc:Ox(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ox(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class oc extends _m{constructor(e,t,a,i){super(e,t,a,i),this.type="firestore",this._queue=new Ix,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ix(e),this._firestoreClient=void 0,await e}}}function ED(s,e){const t=typeof s=="object"?s:by(),a=typeof s=="string"?s:$f,i=am(t,"firestore").getImmediate({identifier:a});if(!i._initialized){const c=M_("firestore");c&&TD(i,...c)}return i}function nv(s){if(s._terminated)throw new ft(Ye.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||ND(s),s._firestoreClient}function ND(s){const e=s._freezeSettings(),t=SD(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new gD(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(i){const c=i?._online.build();return{_offline:i?._offline.build(c),_online:c}})(s._componentsProvider))}class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(Ks.fromBase64String(e))}catch(t){throw new ft(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ba(Ks.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ba._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yd(e,ba._jsonSchema))return ba.fromBase64String(e.bytes)}}ba._jsonSchemaVersion="firestore/bytes/1.0",ba._jsonSchema={type:js("string",ba._jsonSchemaVersion),bytes:js("string")};class sv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ft(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ys(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rv{constructor(e){this._methodName=e}}class bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ft(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ft(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(e){if(Yd(e,bi._jsonSchema))return new bi(e.latitude,e.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:js("string",bi._jsonSchemaVersion),latitude:js("number"),longitude:js("number")};class Va{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,i){if(a.length!==i.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==i[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Va._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yd(e,Va._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Va(e.vectorValues);throw new ft(Ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Va._jsonSchemaVersion="firestore/vectorValue/1.0",Va._jsonSchema={type:js("string",Va._jsonSchemaVersion),vectorValues:js("object")};const jD=/^__.*__$/;class kD{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new vl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kd(e,this.data,t,this.fieldTransforms)}}class Gw{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new vl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Yw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt(40011,{dataSource:s})}}class av{constructor(e,t,a,i,c,u){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=i,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new av({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const t=this.path?.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return em(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Yw(this.dataSource)&&jD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class CD{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||vm(e)}createContext(e,t,a,i=!1){return new av({dataSource:e,methodName:t,targetDoc:a,path:Ys.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wm(s){const e=s._freezeSettings(),t=vm(s._databaseId);return new CD(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Kw(s,e,t,a,i,c={}){const u=s.createContext(c.merge||c.mergeFields?2:0,e,t,i);iv("Data must be an object, but it was:",u,a);const f=Qw(a,u);let m,b;if(c.merge)m=new ta(u.fieldMask),b=u.fieldTransforms;else if(c.mergeFields){const T=[];for(const E of c.mergeFields){const C=tc(e,E,t);if(!u.contains(C))throw new ft(Ye.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);Zw(T,C)||T.push(C)}m=new ta(T),b=u.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,b=u.fieldTransforms;return new kD(new Ur(f),m,b)}class Sm extends rv{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sm}}function AD(s,e,t,a){const i=s.createContext(1,e,t);iv("Data must be an object, but it was:",i,a);const c=[],u=Ur.empty();yl(a,((m,b)=>{const T=Jw(e,m,t);b=es(b);const E=i.childContextForFieldPath(T);if(b instanceof Sm)c.push(T);else{const C=Zd(b,E);C!=null&&(c.push(T),u.set(T,C))}}));const f=new ta(c);return new Gw(u,f,i.fieldTransforms)}function RD(s,e,t,a,i,c){const u=s.createContext(1,e,t),f=[tc(e,a,t)],m=[i];if(c.length%2!=0)throw new ft(Ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<c.length;C+=2)f.push(tc(e,c[C])),m.push(c[C+1]);const b=[],T=Ur.empty();for(let C=f.length-1;C>=0;--C)if(!Zw(b,f[C])){const L=f[C];let P=m[C];P=es(P);const V=u.childContextForFieldPath(L);if(P instanceof Sm)b.push(L);else{const F=Zd(P,V);F!=null&&(b.push(L),T.set(L,F))}}const E=new ta(b);return new Gw(T,E,u.fieldTransforms)}function DD(s,e,t,a=!1){return Zd(t,s.createContext(a?4:3,e))}function Zd(s,e){if(Xw(s=es(s)))return iv("Unsupported field value:",e,s),Qw(s,e);if(s instanceof rv)return(function(a,i){if(!Yw(i.dataSource))throw i.createError(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(i);c&&i.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,i){const c=[];let u=0;for(const f of a){let m=Zd(f,i.childContextForArray(u));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),u++}return{arrayValue:{values:c}}})(s,e)}return(function(a,i){if((a=es(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return pR(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=vt.fromDate(a);return{timestampValue:Qf(i.serializer,c)}}if(a instanceof vt){const c=new vt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Qf(i.serializer,c)}}if(a instanceof bi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ba)return{bytesValue:dw(i.serializer,a._byteString)};if(a instanceof gs){const c=i.databaseId,u=a.firestore._databaseId;if(!u.isEqual(c))throw i.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Fy(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof Va)return(function(u,f){const m=u instanceof Va?u.toArray():u;return{mapValue:{fields:{[B2]:{stringValue:z2},[Wf]:{arrayValue:{values:m.map((T=>{if(typeof T!="number")throw f.createError("VectorValues must only contain numeric values.");return Vy(f.serializer,T)}))}}}}}})(a,i);if(vw(a))return a._toProto(i.serializer);throw i.createError(`Unsupported field value: ${cm(a)}`)})(s,e)}function Qw(s,e){const t={};return I2(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yl(s,((a,i)=>{const c=Zd(i,e.childContextForField(a));c!=null&&(t[a]=c)})),{mapValue:{fields:t}}}function Xw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof vt||s instanceof bi||s instanceof ba||s instanceof gs||s instanceof rv||s instanceof Va||vw(s))}function iv(s,e,t){if(!Xw(t)||!D2(t)){const a=cm(t);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function tc(s,e,t){if((e=es(e))instanceof sv)return e._internalPath;if(typeof e=="string")return Jw(s,e);throw em("Field path arguments must be of type string or ",s,!1,void 0,t)}const MD=new RegExp("[~\\*/\\[\\]]");function Jw(s,e,t){if(e.search(MD)>=0)throw em(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new sv(...e.split("."))._internalPath}catch{throw em(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function em(s,e,t,a,i){const c=a&&!a.isEmpty(),u=i!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(c||u)&&(m+=" (found",c&&(m+=` in field ${a}`),u&&(m+=` in document ${i}`),m+=")"),new ft(Ye.INVALID_ARGUMENT,f+s+m)}function Zw(s,e){return s.some((t=>t.isEqual(e)))}class ID{convertValue(e,t="none"){switch(hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ps(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Vt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return yl(e,((i,c)=>{a[i]=this.convertValue(c,t)})),a}convertVectorValue(e){const t=e.fields?.[Wf].arrayValue?.values?.map((a=>ps(a.doubleValue)));return new Va(t)}convertGeoPoint(e){return new bi(ps(e.latitude),ps(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=hm(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Md(e));default:return null}}convertTimestamp(e){const t=ul(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Wn.fromString(e);jn(yw(a),9688,{name:e});const i=new Id(a.get(1),a.get(3)),c=new Ct(a.popFirst(5));return i.isEqual(t)||uo(`Document ${c} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}class eS extends ID{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gs(this.firestore,null,t)}}const Px="@firebase/firestore",Lx="4.10.0";class tS{constructor(e,t,a,i,c){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=i,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new gs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(tc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class OD extends tS{data(){return super.data()}}function PD(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ft(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ov{}class nS extends ov{}function _r(s,e,...t){let a=[];e instanceof ov&&a.push(e),a=a.concat(t),(function(c){const u=c.filter((m=>m instanceof lv)).length,f=c.filter((m=>m instanceof Tm)).length;if(u>1||u>0&&f>0)throw new ft(Ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const i of a)s=i._apply(s);return s}class Tm extends nS{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Tm(e,t,a)}_apply(e){const t=this._parse(e);return sS(e._query,t),new ic(e.firestore,e.converter,Fg(e._query,t))}_parse(e){const t=wm(e.firestore);return(function(c,u,f,m,b,T,E){let C;if(b.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ft(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Ux(E,T);const P=[];for(const V of E)P.push(Vx(m,c,V));C={arrayValue:{values:P}}}else C=Vx(m,c,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Ux(E,T),C=DD(f,u,E,T==="in"||T==="not-in");return Ns.create(b,T,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ir(s,e,t){const a=e,i=tc("where",s);return Tm._create(i,a,t)}class lv extends ov{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lv(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:Fa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,c){let u=i;const f=c.getFlattenedFilters();for(const m of f)sS(u,m),u=Fg(u,m)})(e._query,t),new ic(e.firestore,e.converter,Fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cv extends nS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cv(e,t)}_apply(e){const t=(function(i,c,u){if(i.startAt!==null)throw new ft(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ft(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pd(c,u)})(e._query,this._field,this._direction);return new ic(e.firestore,e.converter,oR(e._query,t))}}function LD(s,e="asc"){const t=e,a=tc("orderBy",s);return cv._create(a,t)}function Vx(s,e,t){if(typeof(t=es(t))=="string"){if(t==="")throw new ft(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!K2(e)&&t.indexOf("/")!==-1)throw new ft(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Wn.fromString(t));if(!Ct.isDocumentKey(a))throw new ft(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Zb(s,new Ct(a))}if(t instanceof gs)return Zb(s,t._key);throw new ft(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cm(t)}.`)}function Ux(s,e){if(!Array.isArray(s)||s.length===0)throw new ft(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sS(s,e){const t=(function(i,c){for(const u of i)for(const f of u.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(s.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ft(Ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ft(Ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function rS(s,e,t){let a;return a=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,a}class vd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gl extends tS{constructor(e,t,a,i,c,u){super(e,t,a,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(tc("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(Ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Gl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Gl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gl._jsonSchema={type:js("string",Gl._jsonSchemaVersion),bundleSource:js("string","DocumentSnapshot"),bundleName:js("string"),bundle:js("string")};class Af extends Gl{data(e={}){return super.data(e)}}class Zc{constructor(e,t,a,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vd(i.hasPendingWrites,i.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Af(this._firestore,this._userDataWriter,a.key,a,new vd(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ft(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,c){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((f=>{const m=new Af(i._firestore,i._userDataWriter,f.doc.key,f.doc,new vd(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const m=new Af(i._firestore,i._userDataWriter,f.doc.key,f.doc,new vd(i._snapshot.mutatedKeys.has(f.doc.key),i._snapshot.fromCache),i.query.converter);let b=-1,T=-1;return f.type!==0&&(b=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),T=u.indexOf(f.doc.key)),{type:VD(f.type),doc:m,oldIndex:b,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(Ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],i=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),i.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function VD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt(61501,{type:s})}}Zc._jsonSchemaVersion="firestore/querySnapshot/1.0",Zc._jsonSchema={type:js("string",Zc._jsonSchemaVersion),bundleSource:js("string","QuerySnapshot"),bundleName:js("string"),bundle:js("string")};function _i(s){s=za(s,gs);const e=za(s.firestore,oc),t=nv(e);return bD(t,s._key).then((a=>UD(e,s,a)))}function mn(s){s=za(s,ic);const e=za(s.firestore,oc),t=nv(e),a=new eS(e);return PD(s._query),xD(t,s._query).then((i=>new Zc(e,a,s,i)))}function Pa(s,e,t){s=za(s,gs);const a=za(s.firestore,oc),i=rS(s.converter,e,t),c=wm(a);return Em(a,[Kw(c,"setDoc",s._key,i,s.converter!==null,t).toMutation(s._key,_a.none())])}function Es(s,e,t,...a){s=za(s,gs);const i=za(s.firestore,oc),c=wm(i);let u;return u=typeof(e=es(e))=="string"||e instanceof sv?RD(c,"updateDoc",s._key,e,t,a):AD(c,"updateDoc",s._key,e),Em(i,[u.toMutation(s._key,_a.exists(!0))])}function xa(s){return Em(za(s.firestore,oc),[new Uy(s._key,_a.none())])}function fi(s,e){const t=za(s.firestore,oc),a=It(s),i=rS(s.converter,e),c=wm(s.firestore);return Em(t,[Kw(c,"addDoc",a._key,i,s.converter!==null,{}).toMutation(a._key,_a.exists(!1))]).then((()=>a))}function Em(s,e){const t=nv(s);return _D(t,e)}function UD(s,e,t){const a=t.docs.get(e._key),i=new eS(s);return new Gl(s,i,e._key,a,new vd(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){_A(sc),Ql(new ll("firestore",((a,{instanceIdentifier:i,options:c})=>{const u=a.getProvider("app").getImmediate(),f=new oc(new TA(a.getProvider("auth-internal")),new jA(u,a.getProvider("app-check-internal")),HA(u,i),u);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),mi(Px,Lx,e),mi(Px,Lx,"esm2020")})();var BD="firebase",zD="12.8.0";mi(BD,zD,"app");const aS="firebasestorage.googleapis.com",iS="storageBucket",FD=120*1e3,qD=600*1e3;class Fs extends Si{constructor(e,t,a=0){super(yg(e),`Firebase Storage: ${t} (${yg(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zs;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zs||(zs={}));function yg(s){return"storage/"+s}function oS(){const s="An unknown error occurred, please check the error payload for server response.";return new Fs(zs.UNKNOWN,s)}function HD(s){return new Fs(zs.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function $D(s){return new Fs(zs.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function WD(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Fs(zs.UNAUTHENTICATED,s)}function GD(){return new Fs(zs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function YD(s){return new Fs(zs.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function KD(){return new Fs(zs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QD(){return new Fs(zs.CANCELED,"User canceled the upload/download.")}function XD(s){return new Fs(zs.INVALID_URL,"Invalid URL '"+s+"'.")}function JD(s){return new Fs(zs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function ZD(){return new Fs(zs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iS+"' property when initializing the app?")}function eM(){return new Fs(zs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Zg(s){return new Fs(zs.INVALID_ARGUMENT,s)}function lS(){return new Fs(zs.APP_DELETED,"The Firebase app was deleted.")}function tM(s){return new Fs(zs.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ld(s){throw new Fs(zs.INTERNAL_ERROR,"Internal error: "+s)}class wr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=wr.makeFromUrl(e,t)}catch{return new wr(e,"")}if(a.path==="")return a;throw JD(e)}static makeFromUrl(e,t){let a=null;const i="([A-Za-z0-9.\\-_]+)";function c(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+i+u,"i"),m={bucket:1,path:3};function b(Y){Y.path_=decodeURIComponent(Y.path)}const T="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),C="(/([^?#]*).*)?$",L=new RegExp(`^https?://${E}/${T}/b/${i}/o${C}`,"i"),P={bucket:1,path:3},V=t===aS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,F="([^?#]*)",K=new RegExp(`^https?://${V}/${i}/${F}`,"i"),se=[{regex:f,indices:m,postModify:c},{regex:L,indices:P,postModify:b},{regex:K,indices:{bucket:1,path:2},postModify:b}];for(let Y=0;Y<se.length;Y++){const fe=se[Y],je=fe.regex.exec(e);if(je){const q=je[fe.indices.bucket];let B=je[fe.indices.path];B||(B=""),a=new wr(q,B),fe.postModify(a);break}}if(a==null)throw XD(e);return a}}class nM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sM(s,e,t){let a=1,i=null,c=null,u=!1,f=0;function m(){return f===2}let b=!1;function T(...F){b||(b=!0,e.apply(null,F))}function E(F){i=setTimeout(()=>{i=null,s(L,m())},F)}function C(){c&&clearTimeout(c)}function L(F,...K){if(b){C();return}if(F){C(),T.call(null,F,...K);return}if(m()||u){C(),T.call(null,F,...K);return}a<64&&(a*=2);let se;f===1?(f=2,se=0):se=(a+Math.random())*1e3,E(se)}let P=!1;function V(F){P||(P=!0,C(),!b&&(i!==null?(F||(f=2),clearTimeout(i),E(0)):F||(f=1)))}return E(0),c=setTimeout(()=>{u=!0,V(!0)},t),V}function rM(s){s(!1)}function aM(s){return s!==void 0}function iM(s){return typeof s=="object"&&!Array.isArray(s)}function cS(s){return typeof s=="string"||s instanceof String}function ey(s,e,t,a){if(a<e)throw Zg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>t)throw Zg(`Invalid value for '${s}'. Expected ${t} or less.`)}function uv(s,e,t){let a=e;return t==null&&(a=`https://${e}`),`${t}://${a}/v0${s}`}function uS(s){const e=encodeURIComponent;let t="?";for(const a in s)if(s.hasOwnProperty(a)){const i=e(a)+"="+e(s[a]);t=t+i+"&"}return t=t.slice(0,-1),t}var Yl;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Yl||(Yl={}));function oM(s,e){const t=s>=500&&s<600,i=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return t||i||c}class lM{constructor(e,t,a,i,c,u,f,m,b,T,E,C=!0,L=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=i,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=T,this.connectionFactory_=E,this.retry=C,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,V)=>{this.resolve_=P,this.reject_=V,this.start_()})}start_(){const e=(a,i)=>{if(i){a(!1,new mf(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const u=f=>{const m=f.loaded,b=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,b)};this.progressCallback_!==null&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const f=c.getErrorCode()===Yl.NO_ERROR,m=c.getStatus();if(!f||oM(m,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===Yl.ABORT;a(!1,new mf(!1,null,T));return}const b=this.successCodes_.indexOf(m)!==-1;a(!0,new mf(b,c))})},t=(a,i)=>{const c=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());aM(m)?c(m):c()}catch(m){u(m)}else if(f!==null){const m=oS();m.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,m)):u(m)}else if(i.canceled){const m=this.appDelete_?lS():QD();u(m)}else{const m=KD();u(m)}};this.canceled_?t(!1,new mf(!1,null,!0)):this.backoffId_=sM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mf{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function cM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function uM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function hM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function fM(s,e,t,a,i,c,u=!0,f=!1){const m=uS(s.urlParams),b=s.url+m,T=Object.assign({},s.headers);return dM(T,e),cM(T,t),uM(T,c),hM(T,a),new lM(b,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,i,u,f)}function dv(s){let e;try{e=JSON.parse(s)}catch{return null}return iM(e)?e:null}function mM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function pM(s,e){const t=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?t:s+"/"+t}function dS(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function gM(s,e){return e}class xr{constructor(e,t,a,i){this.server=e,this.local=t||e,this.writable=!!a,this.xform=i||gM}}let pf=null;function yM(s){return!cS(s)||s.length<2?s:dS(s)}function vM(){if(pf)return pf;const s=[];s.push(new xr("bucket")),s.push(new xr("generation")),s.push(new xr("metageneration")),s.push(new xr("name","fullPath",!0));function e(c,u){return yM(u)}const t=new xr("name");t.xform=e,s.push(t);function a(c,u){return u!==void 0?Number(u):u}const i=new xr("size");return i.xform=a,s.push(i),s.push(new xr("timeCreated")),s.push(new xr("updated")),s.push(new xr("md5Hash",null,!0)),s.push(new xr("cacheControl",null,!0)),s.push(new xr("contentDisposition",null,!0)),s.push(new xr("contentEncoding",null,!0)),s.push(new xr("contentLanguage",null,!0)),s.push(new xr("contentType",null,!0)),s.push(new xr("metadata","customMetadata",!0)),pf=s,pf}function bM(s,e){function t(){const a=s.bucket,i=s.fullPath,c=new wr(a,i);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:t})}function xM(s,e,t){const a={};a.type="file";const i=t.length;for(let c=0;c<i;c++){const u=t[c];a[u.local]=u.xform(a,e[u.server])}return bM(a,s),a}function _M(s,e,t){const a=dv(e);return a===null?null:xM(s,a,t)}function wM(s,e,t,a){const i=dv(e);if(i===null||!cS(i.downloadTokens))return null;const c=i.downloadTokens;if(c.length===0)return null;const u=encodeURIComponent;return c.split(",").map(b=>{const T=s.bucket,E=s.fullPath,C="/b/"+u(T)+"/o/"+u(E),L=uv(C,t,a),P=uS({alt:"media",token:b});return L+P})[0]}const Bx="prefixes",zx="items";function SM(s,e,t){const a={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Bx])for(const i of t[Bx]){const c=i.replace(/\/$/,""),u=s._makeStorageReference(new wr(e,c));a.prefixes.push(u)}if(t[zx])for(const i of t[zx]){const c=s._makeStorageReference(new wr(e,i.name));a.items.push(c)}return a}function TM(s,e,t){const a=dv(t);return a===null?null:SM(s,e,a)}class hS{constructor(e,t,a,i){this.url=e,this.method=t,this.handler=a,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function fS(s){if(!s)throw oS()}function EM(s,e){function t(a,i){const c=TM(s,e,i);return fS(c!==null),c}return t}function NM(s,e){function t(a,i){const c=_M(s,i,e);return fS(c!==null),wM(c,i,s.host,s._protocol)}return t}function mS(s){function e(t,a){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=GD():i=WD():t.getStatus()===402?i=$D(s.bucket):t.getStatus()===403?i=YD(s.path):i=a,i.status=t.getStatus(),i.serverResponse=a.serverResponse,i}return e}function jM(s){const e=mS(s);function t(a,i){let c=e(a,i);return a.getStatus()===404&&(c=HD(s.path)),c.serverResponse=i.serverResponse,c}return t}function kM(s,e,t,a,i){const c={};e.isRoot?c.prefix="":c.prefix=e.path+"/",t.length>0&&(c.delimiter=t),a&&(c.pageToken=a),i&&(c.maxResults=i);const u=e.bucketOnlyServerUrl(),f=uv(u,s.host,s._protocol),m="GET",b=s.maxOperationRetryTime,T=new hS(f,m,EM(s,e.bucket),b);return T.urlParams=c,T.errorHandler=mS(e),T}function CM(s,e,t){const a=e.fullServerUrl(),i=uv(a,s.host,s._protocol),c="GET",u=s.maxOperationRetryTime,f=new hS(i,c,NM(s,t),u);return f.errorHandler=jM(e),f}class AM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,a,i,c){if(this.sent_)throw ld("cannot .send() more than once");if(pl(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const u in c)c.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,c[u].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ld("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ld("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ld("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ld("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class RM extends AM{initXhr(){this.xhr_.responseType="text"}}function pS(){return new RM}class nc{constructor(e,t){this._service=e,t instanceof wr?this._location=t:this._location=wr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new nc(e,t)}get root(){const e=new wr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dS(this._location.path)}get storage(){return this._service}get parent(){const e=mM(this._location.path);if(e===null)return null;const t=new wr(this._location.bucket,e);return new nc(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw tM(e)}}function DM(s){const e={prefixes:[],items:[]};return gS(s,e).then(()=>e)}async function gS(s,e,t){const i=await MM(s,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await gS(s,e,i.nextPageToken)}function MM(s,e){e!=null&&typeof e.maxResults=="number"&&ey("options.maxResults",1,1e3,e.maxResults);const t=e||{},a=kM(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(a,pS)}function IM(s){s._throwIfRoot("getDownloadURL");const e=CM(s.storage,s._location,vM());return s.storage.makeRequestWithTokens(e,pS).then(t=>{if(t===null)throw eM();return t})}function OM(s,e){const t=pM(s._location.path,e),a=new wr(s._location.bucket,t);return new nc(s.storage,a)}function PM(s){return/^[A-Za-z]+:\/\//.test(s)}function LM(s,e){return new nc(s,e)}function yS(s,e){if(s instanceof hv){const t=s;if(t._bucket==null)throw ZD();const a=new nc(t,t._bucket);return e!=null?yS(a,e):a}else return e!==void 0?OM(s,e):s}function VM(s,e){if(e&&PM(e)){if(s instanceof hv)return LM(s,e);throw Zg("To use ref(service, url), the first argument must be a Storage instance.")}else return yS(s,e)}function Fx(s,e){const t=e?.[iS];return t==null?null:wr.makeFromBucketSpec(t,s)}function UM(s,e,t,a={}){s.host=`${e}:${t}`;const i=pl(e);i&&(my(`https://${s.host}/b`),py("Storage",!0)),s._isUsingEmulator=!0,s._protocol=i?"https":"http";const{mockUserToken:c}=a;c&&(s._overrideAuthToken=typeof c=="string"?c:P_(c,s.app.options.projectId))}class hv{constructor(e,t,a,i,c,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=i,this._firebaseVersion=c,this._isUsingEmulator=u,this._bucket=null,this._host=aS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FD,this._maxUploadRetryTime=qD,this._requests=new Set,i!=null?this._bucket=wr.makeFromBucketSpec(i,this._host):this._bucket=Fx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wr.makeFromBucketSpec(this._url,e):this._bucket=Fx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ey("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ey("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nc(this,e)}_makeRequest(e,t,a,i,c=!0){if(this._deleted)return new nM(lS());{const u=fM(e,this._appId,a,i,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[a,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,i).getPromise()}}const qx="@firebase/storage",Hx="0.14.0";const vS="storage";function $x(s){return s=es(s),DM(s)}function BM(s){return s=es(s),IM(s)}function Wx(s,e){return s=es(s),VM(s,e)}function zM(s=by(),e){s=es(s);const a=am(s,vS).getImmediate({identifier:e}),i=M_("storage");return i&&FM(a,...i),a}function FM(s,e,t,a={}){UM(s,e,t,a)}function qM(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),i=s.getProvider("app-check-internal");return new hv(t,a,i,e,sc)}function HM(){Ql(new ll(vS,qM,"PUBLIC").setMultipleInstances(!0)),mi(qx,Hx,""),mi(qx,Hx,"esm2020")}HM();const bS={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},fv=vy(bS),cd=w2(fv),nt=ED(fv),Gx=zM(fv),$M=vy(bS,"secondary"),tm=w2($M),WM="EYdciKDOi3UYBLk1u8hHams5tmO2",xS=I.createContext();function lr(){return I.useContext(xS)}function GM({children:s}){const[e,t]=I.useState(null),[a,i]=I.useState(!1),[c,u]=I.useState(!1),[f,m]=I.useState(null),[b,T]=I.useState(!0);I.useEffect(()=>uC(cd,async F=>{if(t(F),F)if(F.uid===WM)i(!0),u(!1),m(null);else{i(!1);try{const K=_r(Ft(nt,"clients"),ir("uid","==",F.uid)),G=await mn(K);if(G.empty)u(!1),m(null);else{const se=G.docs[0];u(!0),m({id:se.id,...se.data()})}}catch(K){console.error("Error fetching client data:",K),u(!1),m(null)}}else i(!1),u(!1),m(null);T(!1)}),[]);const P={currentUser:e,isAdmin:a,isClient:c,clientData:f,login:async(V,F,K=!0)=>(await oC(cd,K?m2:jy),await iC(cd,V,F)),logout:()=>Ny(cd),resetPassword:V=>aC(cd,V),loading:b};return o.jsx(xS.Provider,{value:P,children:s})}const _S=I.createContext();function go(){return I.useContext(_S)}function YM({children:s}){const[e,t]=I.useState(()=>{const c=localStorage.getItem("theme");return c?c==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});I.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]);const i={isDark:e,toggleTheme:()=>t(!e)};return o.jsx(_S.Provider,{value:i,children:s})}function KM(){const[s,e]=I.useState(""),[t,a]=I.useState(""),[i,c]=I.useState(!0),[u,f]=I.useState(""),[m,b]=I.useState(!1),[T,E]=I.useState(!1),[C,L]=I.useState(!1),{login:P,resetPassword:V,currentUser:F,isAdmin:K,isClient:G,clientData:se,loading:Y}=lr(),fe=Os();if(I.useEffect(()=>{if(!Y&&F){if(K)fe("/dashboard");else if(G){const B=se?.clientType;fe(B==="core_buddy"?"/client/core-buddy":B==="circuit_vip"||B==="circuit_dropin"?"/client/circuit":"/client")}}},[Y,F,K,G,se,fe]),Y)return o.jsx("div",{className:"login-container",children:o.jsx("div",{className:"login-loading",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"loading-logo"})})});const je=async B=>{B.preventDefault(),f(""),b(!0);try{await P(s,t,i)}catch(H){f(H.message||"Failed to log in"),b(!1)}},q=async B=>{if(B.preventDefault(),f(""),!s.trim()){f("Please enter your email address");return}b(!0);try{await V(s.trim()),L(!0)}catch(H){H.code==="auth/user-not-found"?f("No account found with this email"):f(H.message||"Failed to send reset email")}b(!1)};return o.jsx("div",{className:"login-container",children:o.jsxs("div",{className:"login-card",children:[o.jsxs("div",{className:"login-header",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"login-logo"}),o.jsx("p",{children:T?"Reset Password":"Client Portal"})]}),u&&o.jsx("div",{className:"error-message",children:u}),C?o.jsxs("div",{className:"reset-sent",children:[o.jsx("div",{className:"reset-sent-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsx("p",{children:"Reset email sent!"}),o.jsx("span",{children:"Check your inbox for a password reset link"}),o.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{E(!1),L(!1),f("")},children:"Back to Log In"})]}):T?o.jsxs("form",{onSubmit:q,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",value:s,onChange:B=>e(B.target.value),placeholder:"Enter your email",required:!0})]}),o.jsx("button",{type:"submit",className:"login-btn",disabled:m,children:m?"Sending...":"Send Reset Link"}),o.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!1),f("")},children:"Back to Log In"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("form",{onSubmit:je,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",value:s,onChange:B=>e(B.target.value),required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsx("input",{type:"password",id:"password",value:t,onChange:B=>a(B.target.value),required:!0})]}),o.jsx("div",{className:"remember-me",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",checked:i,onChange:B=>c(B.target.checked)}),o.jsx("span",{children:"Remember me"})]})}),o.jsx("button",{type:"submit",className:"login-btn",disabled:m,children:m?"Logging in...":"Log In"})]}),o.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!0),f("")},children:"Forgot password?"})]}),o.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function QM(){const[s,e]=I.useState([]),[t,a]=I.useState([]),[i,c]=I.useState(!0),[u,f]=I.useState(null),[m,b]=I.useState({}),[T,E]=I.useState(null),[C,L]=I.useState(""),[P,V]=I.useState("all"),[F,K]=I.useState(null),[G,se]=I.useState({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),[Y,fe]=I.useState([]),[je,q]=I.useState(!1),[B,H]=I.useState(!1),[Z,$]=I.useState("list");I.useEffect(()=>{ee()},[]);const ee=async()=>{try{const[X,Ce]=await Promise.all([mn(_r(Ft(nt,"clients"),LD("createdAt","desc"))),mn(Ft(nt,"sessions"))]),Ke=X.docs.map(Ve=>({id:Ve.id,...Ve.data()})),$e=Ce.docs.map(Ve=>({id:Ve.id,...Ve.data()}));e(Ke),a($e)}catch(X){console.error("Error fetching data:",X)}c(!1)},O=X=>{const Ce=new Date,Ke=Ce.getFullYear(),$e=(Ce.getMonth()+1).toString().padStart(2,"0"),Ve=Ce.getDate().toString().padStart(2,"0"),it=`${Ke}-${$e}-${Ve}`,xt=`${Ce.getHours().toString().padStart(2,"0")}:${Ce.getMinutes().toString().padStart(2,"0")}`;return t.filter(rt=>rt.clientId!==X?!1:rt.date<it||rt.date===it&&rt.time<xt).length},ke=X=>{const Ce=O(X.id);return(X.totalSessions||0)-Ce},Ie=X=>{const Ce=new Date,Ke=Ce.getFullYear(),$e=(Ce.getMonth()+1).toString().padStart(2,"0"),Ve=Ce.getDate().toString().padStart(2,"0"),it=`${Ke}-${$e}-${Ve}`,xt=`${Ce.getHours().toString().padStart(2,"0")}:${Ce.getMinutes().toString().padStart(2,"0")}`;return t.filter(rt=>rt.clientId!==X?!1:rt.date>it||rt.date===it&&rt.time>=xt).length},te=X=>X?(X.toDate?X.toDate():new Date(X)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",ve=async(X,Ce)=>{if(window.confirm(`Are you sure you want to delete ${Ce}? This will also delete all their booked sessions.`))try{const $e=t.filter(Ve=>Ve.clientId===X).map(Ve=>xa(It(nt,"sessions",Ve.id)));await Promise.all($e),await xa(It(nt,"clients",X)),e(s.filter(Ve=>Ve.id!==X)),a(t.filter(Ve=>Ve.clientId!==X))}catch(Ke){console.error("Error deleting client:",Ke),alert("Failed to delete client")}},Le=X=>{if(!X)return"";const Ce=X.toDate?X.toDate():new Date(X),Ke=Ce.getFullYear(),$e=(Ce.getMonth()+1).toString().padStart(2,"0"),Ve=Ce.getDate().toString().padStart(2,"0");return`${Ke}-${$e}-${Ve}`},De=X=>{f(X.id),b({name:X.name,email:X.email,password:"",clientType:X.clientType||"block",weeksInBlock:X.weeksInBlock||"",totalSessions:X.totalSessions||"",sessionsRemaining:X.sessionsRemaining,sessionDuration:X.sessionDuration||45,startDate:Le(X.startDate),endDate:Le(X.endDate),status:X.status,hasPortalAccess:!!X.uid,circuitAccess:!!X.circuitAccess,coreBuddyAccess:!!X.coreBuddyAccess})},Je=X=>{const{name:Ce,value:Ke}=X.target;if(b($e=>({...$e,[Ce]:Ke})),Ce==="startDate"||Ce==="weeksInBlock"){const $e=Ce==="startDate"?Ke:m.startDate,Ve=parseInt(Ce==="weeksInBlock"?Ke:m.weeksInBlock);if($e&&Ve>0){const it=new Date($e),xt=new Date(it);xt.setDate(xt.getDate()+Ve*7);const rt=xt.getFullYear(),tn=(xt.getMonth()+1).toString().padStart(2,"0"),vn=xt.getDate().toString().padStart(2,"0");b(Fn=>({...Fn,[Ce]:Ke,endDate:`${rt}-${tn}-${vn}`}))}}},Q=async X=>{try{const Ce=s.find(it=>it.id===X);let Ke=Ce?.uid;if(m.password&&m.password.length>=6&&!Ce?.uid)try{const it=await d2(tm,m.email.trim().toLowerCase(),m.password);await Ny(tm),Ke=it.user.uid}catch(it){if(console.error("Error creating auth account:",it),it.code==="auth/email-already-in-use")alert("This email already has a portal account. Password not changed.");else if(it.code==="auth/weak-password"){alert("Password must be at least 6 characters.");return}else{alert("Failed to create portal account: "+it.message);return}}const $e=m.clientType==="block",Ve={name:m.name.trim(),email:m.email.trim().toLowerCase(),clientType:m.clientType,status:m.status,coreBuddyAccess:m.coreBuddyAccess};if($e)Ve.weeksInBlock=parseInt(m.weeksInBlock)||0,Ve.totalSessions=parseInt(m.totalSessions)||0,Ve.sessionDuration=parseInt(m.sessionDuration),Ve.circuitAccess=m.circuitAccess,m.startDate&&(Ve.startDate=vt.fromDate(new Date(m.startDate))),m.endDate&&(Ve.endDate=vt.fromDate(new Date(m.endDate)));else{const it=s.find(xt=>xt.id===X);it?.circuitStrikes===void 0&&(Ve.circuitStrikes=0),it?.circuitBanUntil===void 0&&(Ve.circuitBanUntil=null)}Ke&&!Ce?.uid&&(Ve.uid=Ke),await Es(It(nt,"clients",X),Ve),e(s.map(it=>it.id===X?{...it,...m,uid:Ke||it.uid,weeksInBlock:parseInt(m.weeksInBlock),totalSessions:parseInt(m.totalSessions),sessionDuration:parseInt(m.sessionDuration),startDate:vt.fromDate(new Date(m.startDate)),endDate:vt.fromDate(new Date(m.endDate))}:it)),f(null),Ke&&!Ce?.uid&&alert("Portal access created! Client can now log in.")}catch(Ce){console.error("Error updating client:",Ce),alert("Failed to update client")}},ue=async X=>{try{const Ce=s.find(Ke=>Ke.id===X)?.status==="archived"?"active":"archived";await Es(It(nt,"clients",X),{status:Ce}),e(s.map(Ke=>Ke.id===X?{...Ke,status:Ce}:Ke))}catch(Ce){console.error("Error archiving client:",Ce),alert("Failed to update client status")}},ze=async X=>{K({clientId:X.id,clientName:X.name}),$("list"),se({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""}),q(!0);try{const Ce=_r(Ft(nt,"sessionNotes"),ir("clientId","==",X.id)),$e=(await mn(Ce)).docs.map(Ve=>({id:Ve.id,...Ve.data()}));$e.sort((Ve,it)=>{const xt=Ve.createdAt?.toMillis?.()||0;return(it.createdAt?.toMillis?.()||0)-xt}),fe($e)}catch(Ce){console.error("Error fetching notes:",Ce),fe([])}q(!1)},Oe=()=>{K(null),fe([]),$("list")},de=async()=>{if(!F)return;const{sessionNotes:X,whatWentWell:Ce,whatWentWrong:Ke,whatsNext:$e}=G;if(!(!X.trim()&&!Ce.trim()&&!Ke.trim()&&!$e.trim())){H(!0);try{const it=new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});await fi(Ft(nt,"sessionNotes"),{clientId:F.clientId,date:it,sessionNotes:X.trim(),whatWentWell:Ce.trim(),whatWentWrong:Ke.trim(),whatsNext:$e.trim(),createdAt:vt.now()}),se({sessionNotes:"",whatWentWell:"",whatWentWrong:"",whatsNext:""});const xt=_r(Ft(nt,"sessionNotes"),ir("clientId","==",F.clientId)),tn=(await mn(xt)).docs.map(vn=>({id:vn.id,...vn.data()}));tn.sort((vn,Fn)=>{const Jn=vn.createdAt?.toMillis?.()||0;return(Fn.createdAt?.toMillis?.()||0)-Jn}),fe(tn),$("list")}catch(Ve){console.error("Error saving note:",Ve),alert("Failed to save note. Check Firestore rules for sessionNotes collection.")}H(!1)}},Be=async X=>{if(window.confirm("Delete this session note?"))try{await xa(It(nt,"sessionNotes",X)),fe(Y.filter(Ce=>Ce.id!==X))}catch(Ce){console.error("Error deleting note:",Ce)}};if(i)return o.jsx("div",{className:"client-list-loading",children:"Loading clients..."});if(s.length===0)return o.jsxs("div",{className:"client-list-empty",children:[o.jsx("p",{children:"No clients yet"}),o.jsx("span",{children:"Add your first client to get started"})]});const le=X=>X.clientType==="circuit_vip"?"VIP":X.clientType==="circuit_dropin"?"Drop-in":X.clientType==="core_buddy"?"Core Buddy":"Block",ge=s.filter(X=>X.name?.toLowerCase().includes(C.toLowerCase())||X.email?.toLowerCase().includes(C.toLowerCase())),be=X=>X.clientType==="circuit_vip"||X.clientType==="circuit_dropin",st=X=>X.clientType==="core_buddy",Te=ge.filter(X=>!be(X)&&!st(X)),dt=ge.filter(X=>be(X)),Tt=ge.filter(X=>st(X)),Nt=P==="block"?Te:P==="circuit"?dt:P==="core_buddy"?Tt:ge,Ee=X=>{u||E(Ce=>Ce===X?null:X)},Ue=X=>{const Ce=T===X.id,Ke=u===X.id,$e=!X.clientType||X.clientType==="block";return o.jsxs("div",{className:`client-card ${X.status==="archived"?"archived":""} ${Ce||Ke?"expanded":"collapsed"}`,children:[o.jsxs("div",{className:"client-name-row",onClick:()=>Ee(X.id),children:[o.jsxs("div",{className:"client-name-row-left",children:[o.jsx("span",{className:"client-name-initial",children:X.name?.charAt(0)?.toUpperCase()}),o.jsxs("div",{className:"client-name-text",children:[o.jsx("h3",{children:X.name}),o.jsx("span",{className:"client-name-sub",children:$e?`${ke(X)}/${X.totalSessions||0} sessions`:le(X)})]})]}),o.jsxs("div",{className:"client-name-row-right",children:[(X.clientType==="circuit_vip"||X.clientType==="circuit_dropin"||X.clientType==="core_buddy")&&o.jsx("span",{className:`client-type-badge ${X.clientType==="circuit_vip"?"vip":X.clientType==="core_buddy"?"core-buddy":"dropin"}`,children:le(X)}),o.jsx("span",{className:`status-dot ${X.status}`}),o.jsx("svg",{className:`client-chevron ${Ce||Ke?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M6 9l6 6 6-6"})})]})]}),(Ce||Ke)&&o.jsx("div",{className:"client-expand-panel",children:Ke?o.jsxs("div",{className:"edit-form",children:[o.jsx("div",{className:"edit-type-toggle",children:[{value:"block",label:"Block"},{value:"circuit_vip",label:"VIP"},{value:"circuit_dropin",label:"Drop-in"},{value:"core_buddy",label:"Core Buddy"}].map(Ve=>o.jsx("button",{type:"button",className:`edit-type-btn ${m.clientType===Ve.value?"active":""}`,onClick:()=>b(it=>({...it,clientType:Ve.value})),children:Ve.label},Ve.value))}),o.jsxs("div",{className:"edit-row",children:[o.jsx("input",{type:"text",name:"name",value:m.name,onChange:Je,placeholder:"Name"}),o.jsx("input",{type:"email",name:"email",value:m.email,onChange:Je,placeholder:"Email"})]}),m.clientType==="block"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"edit-row",children:[o.jsx("input",{type:"number",name:"weeksInBlock",value:m.weeksInBlock,onChange:Je,placeholder:"Weeks",min:"1"}),o.jsx("input",{type:"number",name:"totalSessions",value:m.totalSessions,onChange:Je,placeholder:"Total Sessions",min:"1"}),o.jsxs("select",{name:"sessionDuration",value:m.sessionDuration,onChange:Je,children:[o.jsx("option",{value:"30",children:"30 min"}),o.jsx("option",{value:"45",children:"45 min"})]})]}),o.jsxs("div",{className:"edit-row",children:[o.jsx("input",{type:"date",name:"startDate",value:m.startDate,onChange:Je}),o.jsx("input",{type:"date",name:"endDate",value:m.endDate,onChange:Je})]})]}),o.jsx("div",{className:"edit-row password-row",children:m.hasPortalAccess?o.jsx("div",{className:"portal-status has-access",children:"Has portal access"}):o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"text",name:"password",value:m.password,onChange:Je,placeholder:"Set portal password (min 6 chars)"}),o.jsx("span",{className:"password-hint",children:"Set password to enable client portal"})]})}),m.clientType==="block"&&o.jsx("div",{className:"edit-row circuit-row",children:o.jsxs("label",{className:"circuit-access-toggle",children:[o.jsx("input",{type:"checkbox",checked:m.circuitAccess,onChange:Ve=>b(it=>({...it,circuitAccess:Ve.target.checked}))}),o.jsx("span",{children:"Circuit Class Access"})]})}),m.clientType!=="core_buddy"&&o.jsx("div",{className:"edit-row circuit-row",children:o.jsxs("label",{className:"circuit-access-toggle",children:[o.jsx("input",{type:"checkbox",checked:m.coreBuddyAccess,onChange:Ve=>b(it=>({...it,coreBuddyAccess:Ve.target.checked}))}),o.jsx("span",{children:"Core Buddy Access"})]})}),o.jsxs("div",{className:"edit-actions",children:[o.jsx("button",{className:"save-edit-btn",onClick:()=>Q(X.id),children:"Save"}),o.jsx("button",{className:"cancel-edit-btn",onClick:()=>{f(null)},children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"client-expand-info",children:[o.jsx("span",{className:"client-email",children:X.email}),o.jsx("span",{className:`status-badge ${X.status}`,children:X.status})]}),$e?o.jsxs("div",{className:"client-details",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Block"}),o.jsxs("span",{className:"detail-value",children:[X.weeksInBlock," weeks"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Sessions"}),o.jsxs("span",{className:"detail-value",children:[ke(X)," / ",X.totalSessions," remaining"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Booked"}),o.jsxs("span",{className:"detail-value",children:[Ie(X.id)," sessions"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Duration"}),o.jsxs("span",{className:"detail-value",children:[X.sessionDuration||45," min"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Start"}),o.jsx("span",{className:"detail-value",children:te(X.startDate)})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"End"}),o.jsx("span",{className:"detail-value",children:te(X.endDate)})]})]}):o.jsxs("div",{className:"client-details circuit-details",children:[o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Type"}),o.jsx("span",{className:"detail-value",children:X.clientType==="circuit_vip"?"Monthly VIP":"Drop-in"})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Strikes"}),o.jsxs("span",{className:"detail-value",children:[X.circuitStrikes||0,"/3"]})]}),o.jsxs("div",{className:"detail-item",children:[o.jsx("span",{className:"detail-label",children:"Joined"}),o.jsx("span",{className:"detail-value",children:te(X.createdAt)})]})]}),o.jsxs("div",{className:"client-actions",children:[$e&&o.jsxs("button",{className:"action-btn notes",onClick:Ve=>{Ve.stopPropagation(),ze(X)},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Notes"]}),o.jsx("button",{className:"action-btn edit",onClick:Ve=>{Ve.stopPropagation(),De(X)},children:"Edit"}),o.jsx("button",{className:"action-btn archive",onClick:Ve=>{Ve.stopPropagation(),ue(X.id)},children:X.status==="archived"?"Reactivate":"Archive"}),o.jsx("button",{className:"action-btn delete",onClick:Ve=>{Ve.stopPropagation(),ve(X.id,X.name)},children:"Delete"})]})]})})]},X.id)};return o.jsxs("div",{className:"client-list",children:[o.jsxs("div",{className:"client-search",children:[o.jsxs("svg",{className:"client-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("path",{d:"M21 21l-4.35-4.35"})]}),o.jsx("input",{type:"text",placeholder:"Search clients...",value:C,onChange:X=>L(X.target.value),className:"client-search-input"}),C&&o.jsx("button",{className:"client-search-clear",onClick:()=>L(""),children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),o.jsx("div",{className:"client-type-filter",children:[{value:"all",label:"All",count:ge.length},{value:"block",label:"Block",count:Te.length},{value:"circuit",label:"Circuit",count:dt.length},{value:"core_buddy",label:"Core Buddy",count:Tt.length}].map(X=>o.jsxs("button",{className:`client-filter-btn ${P===X.value?"active":""}`,onClick:()=>V(X.value),children:[X.label,o.jsx("span",{className:"client-filter-count",children:X.count})]},X.value))}),P==="all"?o.jsxs(o.Fragment,{children:[Te.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"client-section-header",children:["Block Members ",o.jsx("span",{children:Te.length})]}),Te.map(Ue)]}),dt.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"client-section-header",children:["Circuit Members ",o.jsx("span",{children:dt.length})]}),dt.map(Ue)]})]}):o.jsxs(o.Fragment,{children:[Nt.length===0&&o.jsxs("div",{className:"client-section-empty",children:["No ",P," clients found"]}),Nt.map(Ue)]}),F&&o.jsx("div",{className:"notes-modal-overlay",onClick:Oe,children:o.jsxs("div",{className:"notes-modal",onClick:X=>X.stopPropagation(),children:[o.jsxs("div",{className:"notes-modal-header",children:[o.jsxs("h3",{children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",children:[o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),F.clientName]}),o.jsx("button",{className:"notes-modal-close",onClick:Oe,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),Z==="list"?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"notes-modal-body",children:je?o.jsx("div",{className:"notes-loading",children:"Loading notes..."}):Y.length===0?o.jsxs("div",{className:"notes-empty",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",width:"40",height:"40",children:[o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"})]}),o.jsx("p",{children:"No session notes yet"}),o.jsx("span",{children:"Add notes after each session"})]}):o.jsx("div",{className:"notes-list",children:Y.map(X=>o.jsxs("div",{className:"note-card",children:[o.jsxs("div",{className:"note-card-header",children:[o.jsx("span",{className:"note-date",children:X.date}),o.jsx("button",{className:"note-delete-btn",onClick:()=>Be(X.id),children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"14",height:"14",children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]})})]}),X.sessionNotes&&o.jsxs("div",{className:"note-section",children:[o.jsx("span",{className:"note-section-label",children:"Session Notes"}),o.jsx("p",{children:X.sessionNotes})]}),X.whatWentWell&&o.jsxs("div",{className:"note-section went-well",children:[o.jsx("span",{className:"note-section-label",children:"What Went Well"}),o.jsx("p",{children:X.whatWentWell})]}),X.whatWentWrong&&o.jsxs("div",{className:"note-section went-wrong",children:[o.jsx("span",{className:"note-section-label",children:"What Went Wrong"}),o.jsx("p",{children:X.whatWentWrong})]}),X.whatsNext&&o.jsxs("div",{className:"note-section whats-next",children:[o.jsx("span",{className:"note-section-label",children:"What's Next"}),o.jsx("p",{children:X.whatsNext})]})]},X.id))})}),o.jsx("div",{className:"notes-modal-footer",children:o.jsxs("button",{className:"notes-add-btn",onClick:()=>$("add"),children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Session Notes"]})})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"notes-modal-body",children:o.jsxs("div",{className:"notes-form",children:[o.jsxs("div",{className:"notes-form-group",children:[o.jsx("label",{children:"Session Notes"}),o.jsx("textarea",{value:G.sessionNotes,onChange:X=>se(Ce=>({...Ce,sessionNotes:X.target.value})),placeholder:"Overview of the session...",rows:"3"})]}),o.jsxs("div",{className:"notes-form-group went-well",children:[o.jsxs("label",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"What Went Well"]}),o.jsx("textarea",{value:G.whatWentWell,onChange:X=>se(Ce=>({...Ce,whatWentWell:X.target.value})),placeholder:"Positives from the session...",rows:"2"})]}),o.jsxs("div",{className:"notes-form-group went-wrong",children:[o.jsxs("label",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),"What Went Wrong"]}),o.jsx("textarea",{value:G.whatWentWrong,onChange:X=>se(Ce=>({...Ce,whatWentWrong:X.target.value})),placeholder:"Areas to improve...",rows:"2"})]}),o.jsxs("div",{className:"notes-form-group whats-next",children:[o.jsxs("label",{children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"14",height:"14",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})}),"What's Next"]}),o.jsx("textarea",{value:G.whatsNext,onChange:X=>se(Ce=>({...Ce,whatsNext:X.target.value})),placeholder:"Goals for next session...",rows:"2"})]})]})}),o.jsxs("div",{className:"notes-modal-footer",children:[o.jsx("button",{className:"notes-cancel-btn",onClick:()=>$("list"),children:"Back"}),o.jsx("button",{className:"notes-save-btn",onClick:de,disabled:B,children:B?"Saving...":"Save Notes"})]})]})]})})]})}const ty={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},Rf=["monday","tuesday","wednesday","thursday","friday"],XM=["Monday","Tuesday","Wednesday","Thursday","Friday"],JM=["Mon","Tue","Wed","Thu","Fri"],Yx=s=>{const[e,t]=s.split(":"),a=parseInt(e),i=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${t}${i}`},ZM=s=>{const e=new Date(s),t=e.getDay(),a=e.getDate()-t+(t===0?-6:1);return e.setDate(a),Rf.map((i,c)=>{const u=new Date(e);return u.setDate(e.getDate()+c),u})},Lr=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${a}`},ny=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Ed=(s,e)=>{const t=ny(s)+e,a=Math.floor(t/60),i=t%60;return`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},e3=s=>{const e=ty[s];if(!e)return[];const t=[];if(e.morning){let a=e.morning.start;for(;a<e.morning.end;)t.push({time:a,period:"morning"}),a=Ed(a,15)}if(e.afternoon){let a=e.afternoon.start;for(;a<e.afternoon.end;)t.push({time:a,period:"afternoon"}),a=Ed(a,15)}return t};function t3(){const[s,e]=I.useState(new Date),[t,a]=I.useState([]),[i,c]=I.useState([]),[u,f]=I.useState([]),[m,b]=I.useState([]),[T,E]=I.useState([]),[C,L]=I.useState([]),[P,V]=I.useState(null),[F,K]=I.useState(null),[G,se]=I.useState(!1),[Y,fe]=I.useState(!0);I.useEffect(()=>{a(ZM(s))},[s]),I.useEffect(()=>{Z()},[]);const je=le=>{if(V(le),se(!1),le.startDate){const ge=le.startDate.toDate?le.startDate.toDate():new Date(le.startDate);e(ge)}K(null)},q=le=>{const ge=new Date,be=Lr(ge),st=`${ge.getHours().toString().padStart(2,"0")}:${ge.getMinutes().toString().padStart(2,"0")}`;return u.filter(Te=>Te.clientId!==le?!1:Te.date<be||Te.date===be&&Te.time<st).length},B=le=>{const ge=q(le.id);return(le.totalSessions||0)-ge},H=le=>{const ge=new Date,be=ge.getFullYear(),st=(ge.getMonth()+1).toString().padStart(2,"0"),Te=ge.getDate().toString().padStart(2,"0"),dt=`${be}-${st}-${Te}`,Tt=`${ge.getHours().toString().padStart(2,"0")}:${ge.getMinutes().toString().padStart(2,"0")}`;return u.filter(Nt=>Nt.clientId!==le?!1:Nt.date>dt||Nt.date===dt&&Nt.time>=Tt).length},Z=async()=>{try{const ge=(await mn(Ft(nt,"clients"))).docs.map(X=>({id:X.id,...X.data()})).filter(X=>X.status==="active");c(ge);const st=(await mn(Ft(nt,"sessions"))).docs.map(X=>({id:X.id,...X.data()}));f(st);const dt=(await mn(Ft(nt,"holidays"))).docs.map(X=>({id:X.id,...X.data()}));b(dt);const Nt=(await mn(Ft(nt,"blockedTimes"))).docs.map(X=>({id:X.id,...X.data()}));E(Nt);const Ue=(await mn(Ft(nt,"openedSlots"))).docs.map(X=>({id:X.id,...X.data()}));L(Ue)}catch(le){console.error("Error fetching data:",le)}fe(!1)},$=le=>{const ge=new Date(s);ge.setDate(ge.getDate()+le*7),e(ge),K(null)},ee=()=>{e(new Date),K(null)},O=le=>{const ge=Lr(le);return m.some(be=>be.date===ge)},ke=(le,ge)=>{const be=Lr(le);return T.some(st=>st.date===be&&st.time===ge)},Ie=(le,ge)=>{const be=Lr(le);return C.some(st=>st.date===be&&st.time===ge)},te=le=>{const ge=Rf[le.getDay()-1];return ge&&ty[ge]?.defaultBlocked},ve=async(le,ge)=>{const be=Lr(le);if(te(le)){const Te=C.find(dt=>dt.date===be&&dt.time===ge);try{if(Te)await xa(It(nt,"openedSlots",Te.id)),L(C.filter(dt=>dt.id!==Te.id));else{const dt=await fi(Ft(nt,"openedSlots"),{date:be,time:ge,createdAt:vt.now()});L([...C,{id:dt.id,date:be,time:ge}])}}catch(dt){console.error("Error toggling opened slot:",dt),alert("Failed to update time slot")}return}const st=T.find(Te=>Te.date===be&&Te.time===ge);try{if(st)await xa(It(nt,"blockedTimes",st.id)),E(T.filter(Te=>Te.id!==st.id));else{const Te=await fi(Ft(nt,"blockedTimes"),{date:be,time:ge,createdAt:vt.now()});E([...T,{id:Te.id,date:be,time:ge}])}}catch(Te){console.error("Error toggling blocked time:",Te),alert("Failed to update time slot")}},Le=le=>{const ge=Lr(le);return u.filter(be=>be.date===ge)},De=(le,ge)=>{const be=Lr(le);return u.find(st=>st.date===be&&st.time===ge)},Je=(le,ge,be)=>{const st=Rf[le.getDay()-1];if(!st||O(le))return!1;const Te=ty[st],dt=Math.ceil(be/15);if(Te.defaultBlocked)for(let $e=0;$e<dt;$e++){const Ve=Ed(ge,$e*15);if(!Ie(le,Ve))return!1}else for(let $e=0;$e<dt;$e++){const Ve=Ed(ge,$e*15);if(ke(le,Ve))return!1}const Tt=Lr(le);if(u.find($e=>$e.date===Tt&&$e.time===ge))return!1;const Ee=Ed(ge,be),Ue=Te.morning&&Ee<=Te.morning.end,X=Te.afternoon&&Ee<=Te.afternoon.end,Ce=Te.morning&&ge>=Te.morning.start&&ge<Te.morning.end,Ke=Te.afternoon&&ge>=Te.afternoon.start&&ge<Te.afternoon.end;if(Ce&&!Ue||Ke&&!X)return!1;for(const $e of u){if($e.date!==Tt)continue;const Ve=ny($e.time),it=Ve+($e.duration||45),xt=ny(ge),rt=xt+be;if(xt<it&&rt>Ve)return!1}return!0},Q=async(le,ge)=>{const be=De(le,ge);if(be){if(window.confirm(`Cancel ${be.clientName}'s session at ${Yx(ge)}?`))try{await xa(It(nt,"sessions",be.id)),f(u.filter(Te=>Te.id!==be.id))}catch(Te){console.error("Error cancelling session:",Te),alert("Failed to cancel session")}return}if(!P){alert("Please select a client first");return}if(!Je(le,ge,P.sessionDuration||45)){alert("This slot is not available for this client's session duration");return}if(u.filter(Te=>Te.clientId===P.id).length>=P.totalSessions){alert(`${P.name} has already booked all ${P.totalSessions} sessions`);return}try{const Te=Lr(le),dt={clientId:P.id,clientName:P.name,date:Te,time:ge,duration:P.sessionDuration||45,createdAt:vt.now()},Tt=await fi(Ft(nt,"sessions"),dt);f([...u,{id:Tt.id,...dt}])}catch(Te){console.error("Error booking session:",Te),alert("Failed to book session")}},ue=async()=>{if(!P)return;const le=P.startDate?.toDate?P.startDate.toDate():new Date(P.startDate),ge=P.endDate?.toDate?P.endDate.toDate():new Date(P.endDate),be=u.filter(Ee=>Ee.clientId!==P.id?!1:t.some(Ue=>Lr(Ue)===Ee.date));if(be.length===0){alert("No sessions in current week to repeat. Book some sessions first, then use this button.");return}const st=P.weeksInBlock||Math.ceil((ge-le)/(10080*60*1e3)),Te=be.map(Ee=>({dayOfWeek:new Date(Ee.date).getDay(),time:Ee.time}));let dt=[];const Tt=u.filter(Ee=>Ee.clientId===P.id).length;for(let Ee=0;Ee<st;Ee++){const Ue=new Date(le);Ue.setDate(Ue.getDate()+Ee*7);const X=new Date(Ue),Ce=X.getDay(),Ke=X.getDate()-Ce+(Ce===0?-6:1);X.setDate(Ke);for(const $e of Te){const Ve=new Date(X),it=$e.dayOfWeek===0?6:$e.dayOfWeek-1;Ve.setDate(X.getDate()+it);const xt=Lr(Ve);u.some(rt=>rt.clientId===P.id&&rt.date===xt&&rt.time===$e.time)||Ve<le||Ve>ge||m.some(rt=>rt.date===xt)||dt.push({dateKey:xt,time:$e.time,sessionDate:Ve})}}const Nt=Tt+dt.length;if(Nt>P.totalSessions){alert(`This would create ${dt.length} new sessions (${Nt} total), but client only has ${P.totalSessions} sessions in their package.

You can still book ${P.totalSessions-Tt} more sessions.`);return}if(dt.length===0){alert("All weeks already have sessions booked for this pattern.");return}if(window.confirm(`This will create ${dt.length} new sessions across the block.

(${Tt} existing + ${dt.length} new = ${Nt} total)

Continue?`))try{const Ee=[];for(const Ue of dt){const X={clientId:P.id,clientName:P.name,date:Ue.dateKey,time:Ue.time,duration:P.sessionDuration||45,createdAt:vt.now()},Ce=await fi(Ft(nt,"sessions"),X);Ee.push({id:Ce.id,...X})}f([...u,...Ee]),alert(`Created ${Ee.length} new sessions!`)}catch(Ee){console.error("Error repeating weekly:",Ee),alert("Failed to repeat sessions")}},ze=async le=>{const ge=Lr(le),be=m.find(st=>st.date===ge);try{if(be)await xa(It(nt,"holidays",be.id)),b(m.filter(st=>st.id!==be.id));else{const st=await fi(Ft(nt,"holidays"),{date:ge,createdAt:vt.now()});b([...m,{id:st.id,date:ge}])}}catch(st){console.error("Error toggling day availability:",st),alert("Failed to update day availability")}};if(Y)return o.jsx("div",{className:"calendar-loading",children:"Loading calendar..."});const Oe=t[0],de=t[4],Be=Oe&&de?`${Oe.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${de.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return o.jsxs("div",{className:"calendar",children:[o.jsxs("div",{className:"calendar-header",children:[o.jsxs("div",{className:"calendar-nav",children:[o.jsx("button",{onClick:()=>$(-1),children:""}),o.jsx("button",{onClick:ee,children:"Today"}),o.jsx("button",{onClick:()=>$(1),children:""})]}),o.jsx("h3",{children:Be})]}),o.jsxs("div",{className:"client-selector",children:[o.jsx("span",{className:"selector-label",children:"Booking for:"}),P?o.jsxs("div",{className:"selected-client",children:[o.jsxs("div",{className:"selected-info",children:[o.jsx("strong",{children:P.name}),o.jsxs("span",{children:[P.sessionDuration||45,"min  ",B(P),"/",P.totalSessions," remaining"]}),o.jsxs("span",{className:"booked-info",children:[H(P.id)," booked"]})]}),o.jsx("button",{onClick:()=>V(null),children:"Change"})]}):o.jsx("button",{className:"select-client-btn",onClick:()=>se(!0),children:"Select Client"})]}),P&&o.jsxs("div",{className:"repeat-weekly-section",children:[o.jsx("button",{className:"repeat-weekly-btn",onClick:ue,children:"Repeat This Week's Schedule For All Weeks"}),o.jsx("span",{className:"repeat-hint",children:"Copies current week's sessions to all weeks in block"})]}),o.jsx("div",{className:"day-cards",children:t.map((le,ge)=>{const be=Le(le),st=Lr(le)===Lr(new Date),Te=O(le);return o.jsxs("div",{className:`day-card ${F===ge?"selected":""} ${st?"today":""} ${Te?"holiday":""}`,onClick:()=>K(F===ge?null:ge),children:[o.jsxs("div",{className:"day-card-header",children:[o.jsx("span",{className:"day-name",children:JM[ge]}),o.jsx("span",{className:"day-date",children:le.getDate()})]}),Te?o.jsx("div",{className:"day-card-status holiday",children:"Unavailable"}):o.jsxs("div",{className:"day-card-status",children:[be.length," session",be.length!==1?"s":""]})]},ge)})}),F!==null&&t[F]&&o.jsxs("div",{className:"time-panel",children:[o.jsxs("div",{className:"time-panel-header",children:[o.jsxs("h4",{children:[XM[F]," ",t[F].getDate()]}),o.jsx("button",{className:"close-panel",onClick:()=>K(null),children:""})]}),o.jsx("div",{className:"availability-toggle",children:o.jsx("button",{className:`toggle-availability-btn ${O(t[F])?"unavailable":"available"}`,onClick:()=>ze(t[F]),children:O(t[F])?"Mark Day Available":"Mark Day Unavailable"})}),O(t[F])?o.jsxs("div",{className:"day-unavailable-message",children:[o.jsx("p",{children:"This day is marked as unavailable"}),o.jsx("span",{children:"Tap the button above to make it available again"})]}):o.jsxs("div",{className:"time-slots",children:[te(t[F])&&o.jsx("div",{className:"default-blocked-notice",children:"Flex day  slots are closed by default. Tap the toggle to open slots."}),e3(Rf[F]).map(({time:le,period:ge},be,st)=>{const Te=De(t[F],le),dt=te(t[F]),Tt=dt?!Ie(t[F],le):ke(t[F],le),Nt=dt&&Ie(t[F],le),Ee=P&&Je(t[F],le,P.sessionDuration||45),Ue=be===0||st[be-1]?.period!==ge;return o.jsxs("div",{children:[Ue&&o.jsx("div",{className:"period-label",children:ge==="morning"?"Morning":"Afternoon"}),o.jsxs("div",{className:"time-slot-row",children:[o.jsxs("button",{className:`time-slot ${Te?"booked":""} ${Tt&&!Te?"blocked":""} ${Nt&&!Te?"opened":""} ${Ee?"available":""} ${!Te&&!Tt&&!Ee&&P?"unavailable":""}`,onClick:()=>(!Tt||Te)&&Q(t[F],le),disabled:Tt&&!Te,children:[o.jsx("span",{className:"slot-time",children:Yx(le)}),Te?o.jsxs("span",{className:"slot-client",children:[Te.clientName," (",Te.duration,"m)"]}):Tt?o.jsx("span",{className:"slot-blocked",children:dt?"Closed":"Blocked"}):Ee?o.jsx("span",{className:"slot-available",children:"Available"}):P?o.jsx("span",{className:"slot-unavailable",children:"Unavailable"}):Nt?o.jsx("span",{className:"slot-available",children:"Open"}):o.jsx("span",{className:"slot-empty",children:"Select client to book"})]}),o.jsx("button",{className:`block-toggle-btn ${dt?Nt?"is-opened":"":Tt?"is-blocked":""}`,onClick:()=>ve(t[F],le),disabled:!!Te,title:dt?Nt?"Close this slot":"Open this slot":Tt?"Unblock this time":"Block this time",children:dt?Nt?"":"+":Tt?"":""})]})]},le)})]})]}),G&&o.jsx("div",{className:"modal-overlay",onClick:()=>se(!1),children:o.jsxs("div",{className:"modal-content",onClick:le=>le.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:"Select Client"}),o.jsx("button",{className:"close-btn",onClick:()=>se(!1),children:""})]}),o.jsx("div",{className:"client-list-picker",children:i.length===0?o.jsx("p",{className:"no-items",children:"No active clients"}):i.map(le=>{const ge=le.startDate?.toDate?le.startDate.toDate():new Date(le.startDate),be=le.endDate?.toDate?le.endDate.toDate():new Date(le.endDate),st=B(le),Te=H(le.id);return o.jsxs("button",{className:"client-option",onClick:()=>je(le),children:[o.jsx("strong",{children:le.name}),o.jsxs("span",{children:[le.sessionDuration||45,"min  ",st,"/",le.totalSessions," remaining  ",Te," booked"]}),o.jsxs("span",{className:"client-dates",children:[ge.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," - ",be.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]},le.id)})})]})})]})}const Kx=s=>{const[e,t]=s.split(":"),a=parseInt(e),i=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${t}${i}`},Ud=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${a}`},wS=s=>s===Ud(new Date),n3=s=>{const e=new Date;return e.setDate(e.getDate()+1),s===Ud(e)},Qx=s=>wS(s)?"Today":n3(s)?"Tomorrow":new Date(s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"}),Xx=s=>{const e=new Date,t=Ud(e),a=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;if(s.date<t)return!0;if(s.date===t){const i=Jx(s.time)+(s.duration||45);return Jx(a)>=i}return!1},Jx=s=>{const[e,t]=s.split(":").map(Number);return e*60+t};function s3(){const[s,e]=I.useState([]),[t,a]=I.useState(!0),[i,c]=I.useState(new Date);I.useEffect(()=>{u();const P=setInterval(()=>{c(new Date)},6e4);return()=>clearInterval(P)},[]);const u=async()=>{try{const V=(await mn(Ft(nt,"sessions"))).docs.map(G=>({id:G.id,...G.data()})),F=Ud(new Date),K=V.filter(G=>G.date>=F).sort((G,se)=>G.date!==se.date?G.date.localeCompare(se.date):G.time.localeCompare(se.time));e(K)}catch(P){console.error("Error fetching sessions:",P)}a(!1)},f=async P=>{if(window.confirm(`Cancel ${P.clientName}'s session at ${Kx(P.time)} on ${Qx(P.date)}?`))try{await xa(It(nt,"sessions",P.id)),e(s.filter(V=>V.id!==P.id))}catch(V){console.error("Error cancelling session:",V),alert("Failed to cancel session")}};if(t)return o.jsx("div",{className:"schedule-loading",children:"Loading schedule..."});const m=s.reduce((P,V)=>{const F=V.date;return P[F]||(P[F]=[]),P[F].push(V),P},{}),b=Object.keys(m).sort(),T=Ud(new Date),E=m[T]||[],C=E.filter(P=>Xx(P)).length,L=E.length-C;return o.jsxs("div",{className:"schedule",children:[o.jsxs("div",{className:"today-summary",children:[o.jsx("h3",{children:"Today's Sessions"}),o.jsx("div",{className:"today-count",children:E.length===0?o.jsx("span",{className:"no-sessions",children:"No sessions today"}):o.jsxs("div",{className:"today-stats",children:[o.jsxs("span",{className:"completed-count",children:[C," completed"]}),o.jsxs("span",{className:"remaining-count",children:[L," remaining"]})]})})]}),b.length===0?o.jsx("div",{className:"no-upcoming",children:o.jsx("p",{children:"No upcoming sessions booked"})}):o.jsx("div",{className:"sessions-list",children:b.map(P=>o.jsxs("div",{className:`date-group ${wS(P)?"today":""}`,children:[o.jsxs("div",{className:"date-header",children:[o.jsx("span",{className:"date-label",children:Qx(P)}),o.jsxs("span",{className:"date-count",children:[m[P].length," session",m[P].length!==1?"s":""]})]}),o.jsx("div",{className:"date-sessions",children:m[P].map(V=>{const F=Xx(V);return o.jsxs("div",{className:`session-card ${F?"completed":""}`,children:[o.jsx("div",{className:"session-time",children:Kx(V.time)}),o.jsxs("div",{className:"session-details",children:[o.jsx("strong",{children:V.clientName}),o.jsxs("span",{children:[V.duration,"min session"]})]}),F?o.jsx("div",{className:"completed-badge",children:""}):o.jsx("button",{className:"cancel-session-btn",onClick:()=>f(V),children:"Cancel"})]},V.id)})})]},P))})]})}const SS={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},sy=["monday","tuesday","wednesday","thursday","friday"],r3=["Monday","Tuesday","Wednesday","Thursday","Friday"],a3=s=>{const[e,t]=s.split(":"),a=parseInt(e),i=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${t}${i}`},ud=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${a}`},i3=s=>{const e=new Date(s),t=e.getDay(),a=e.getDate()-t+(t===0?-6:1);return e.setDate(a),sy.map((i,c)=>{const u=new Date(e);return u.setDate(e.getDate()+c),u})},ry=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Nd=(s,e)=>{const t=ry(s)+e,a=Math.floor(t/60),i=t%60;return`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},o3=s=>{const e=SS[s];if(!e)return[];const t=[];if(e.morning){let a=e.morning.start;for(;a<e.morning.end;)t.push({time:a,period:"morning"}),a=Nd(a,15)}if(e.afternoon){let a=e.afternoon.start;for(;a<e.afternoon.end;)t.push({time:a,period:"afternoon"}),a=Nd(a,15)}return t};function l3(){const[s,e]=I.useState(new Date),[t,a]=I.useState([]),[i,c]=I.useState([]),[u,f]=I.useState([]),[m,b]=I.useState([]),[T,E]=I.useState([]),[C,L]=I.useState(!0),[P,V]=I.useState(45);I.useEffect(()=>{a(i3(s))},[s]),I.useEffect(()=>{F()},[]);const F=async()=>{try{const Z=(await mn(Ft(nt,"sessions"))).docs.map(Ie=>({id:Ie.id,...Ie.data()}));c(Z);const ee=(await mn(Ft(nt,"holidays"))).docs.map(Ie=>({id:Ie.id,...Ie.data()}));f(ee);const O=await mn(Ft(nt,"blockedTimes"));b(O.docs.map(Ie=>({id:Ie.id,...Ie.data()})));const ke=await mn(Ft(nt,"openedSlots"));E(ke.docs.map(Ie=>({id:Ie.id,...Ie.data()})))}catch(H){console.error("Error fetching data:",H)}L(!1)},K=H=>{const Z=new Date(s);Z.setDate(Z.getDate()+H*7),e(Z)},G=()=>{e(new Date)},se=H=>{const Z=ud(H);return u.some($=>$.date===Z)},Y=(H,Z)=>{const $=sy[H.getDay()-1];if(!$||se(H))return!1;const ee=ud(H),O=SS[$],ke=Math.ceil(P/15);if(O.defaultBlocked)for(let ue=0;ue<ke;ue++){const ze=Nd(Z,ue*15);if(!T.some(Oe=>Oe.date===ee&&Oe.time===ze))return!1}else for(let ue=0;ue<ke;ue++){const ze=Nd(Z,ue*15);if(m.some(Oe=>Oe.date===ee&&Oe.time===ze))return!1}const Ie=new Date,te=ud(Ie);if(ee<te)return!1;if(ee===te){const ue=`${Ie.getHours().toString().padStart(2,"0")}:${Ie.getMinutes().toString().padStart(2,"0")}`;if(Z<ue)return!1}const ve=Nd(Z,P),Le=O.morning&&Z>=O.morning.start&&Z<O.morning.end,De=O.afternoon&&Z>=O.afternoon.start&&Z<O.afternoon.end,Je=O.morning&&ve<=O.morning.end,Q=O.afternoon&&ve<=O.afternoon.end;if(Le&&!Je||De&&!Q)return!1;for(const ue of i){if(ue.date!==ee)continue;const ze=ry(ue.time),Oe=ze+(ue.duration||45),de=ry(Z),Be=de+P;if(de<Oe&&Be>ze)return!1}return!0},fe=(H,Z)=>{const $=sy[Z];return o3($).filter(O=>Y(H,O.time))};if(C)return o.jsx("div",{className:"availability-loading",children:"Loading availability..."});const je=t[0],q=t[4],B=je&&q?`${je.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${q.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return o.jsxs("div",{className:"availability",children:[o.jsxs("div",{className:"availability-header",children:[o.jsxs("div",{className:"availability-nav",children:[o.jsx("button",{onClick:()=>K(-1),children:""}),o.jsx("button",{onClick:G,children:"Today"}),o.jsx("button",{onClick:()=>K(1),children:""})]}),o.jsx("h3",{children:B}),o.jsxs("div",{className:"duration-selector",children:[o.jsx("label",{children:"Session:"}),o.jsxs("select",{value:P,onChange:H=>V(Number(H.target.value)),children:[o.jsx("option",{value:30,children:"30 min"}),o.jsx("option",{value:45,children:"45 min"}),o.jsx("option",{value:60,children:"60 min"})]})]})]}),o.jsx("div",{className:"availability-grid",children:t.map((H,Z)=>{const $=se(H),ee=$?[]:fe(H,Z),O=ud(H)===ud(new Date),ke=H<new Date&&!O;return o.jsxs("div",{className:`day-column ${O?"today":""} ${ke?"past":""}`,children:[o.jsxs("div",{className:"day-header",children:[o.jsx("span",{className:"day-name",children:r3[Z]}),o.jsxs("span",{className:"day-date",children:[H.getDate(),"/",H.getMonth()+1]}),$&&o.jsx("span",{className:"holiday-badge",children:"Holiday"})]}),o.jsx("div",{className:"slots-container",children:$?o.jsx("div",{className:"no-slots",children:"Unavailable"}):ee.length===0?o.jsx("div",{className:"no-slots",children:"Fully booked"}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"slots-count",children:[ee.length," slots"]}),o.jsx("div",{className:"slots-list",children:ee.map(Ie=>o.jsx("div",{className:`slot ${Ie.period}`,children:a3(Ie.time)},Ie.time))})]})})]},Z)})})]})}const vg=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,Zx=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),e_=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const i=new Date(s);i.setHours(9,45,0,0),s>i&&(t=7)}const a=new Date(s);return a.setDate(s.getDate()+t),a},Df=s=>s==="circuit_vip"?"VIP":s==="circuit_dropin"?"Drop-in":"Block",Mf=s=>s==="circuit_vip"?"vip":s==="circuit_dropin"?"dropin":"block";function c3(){const[s,e]=I.useState(!0),[t,a]=I.useState([]),[i,c]=I.useState([]),[u,f]=I.useState(null),[m,b]=I.useState("upcoming"),[T,E]=I.useState(!1),[C,L]=I.useState(null),[P,V]=I.useState(!1),[F,K]=I.useState(!1),G=I.useCallback((de,Be="info")=>{L({message:de,type:Be}),setTimeout(()=>L(null),4e3)},[]);I.useEffect(()=>{se()},[]);const se=async()=>{try{const Be=(await mn(Ft(nt,"circuitSessions"))).docs.map(Te=>({id:Te.id,...Te.data()}));Be.sort((Te,dt)=>dt.date.localeCompare(Te.date)),a(Be);const ge=(await mn(Ft(nt,"clients"))).docs.map(Te=>({id:Te.id,...Te.data()})).filter(Te=>Te.clientType==="circuit_vip"||Te.clientType==="circuit_dropin"||Te.circuitAccess===!0);c(ge);const be=vg(e_()),st=Be.find(Te=>Te.date===be);st?f(st):Be.length>0&&f(Be[0])}catch(de){console.error("Error loading circuit data:",de),G("Failed to load circuit data","error")}e(!1)},Y=async de=>{if(!(!u||T)&&window.confirm("Remove this member from the slot?")){E(!0);try{const Be=[...u.slots],le=Be.findIndex(st=>st.slotNumber===de);if(le===-1){E(!1);return}let ge=[...u.waitlist||[]];if(ge.length>0){const st=ge.shift();Be[le]={slotNumber:de,memberId:st.memberId,memberName:st.memberName,memberType:st.memberType,status:"confirmed",bookedAt:vt.now()},G(`Slot given to ${st.memberName} from waitlist`,"success")}else Be[le]={slotNumber:de,memberId:null,memberName:null,memberType:null,status:"available"},G("Member removed from slot","success");await Es(It(nt,"circuitSessions",u.id),{slots:Be,waitlist:ge});const be={...u,slots:Be,waitlist:ge};f(be),a(st=>st.map(Te=>Te.id===be.id?be:Te))}catch(Be){console.error("Error removing from slot:",Be),G("Failed to remove member","error")}E(!1)}},fe=async(de,Be)=>{if(!(!u||T)){E(!0);try{const le=[...u.slots],ge=le.findIndex(Te=>Te.slotNumber===de&&Te.status==="available");if(ge===-1){G("Slot is not available","error"),E(!1);return}if(le.some(Te=>Te.memberId===Be.id)){G(`${Be.name} already has a slot`,"error"),E(!1);return}le[ge]={slotNumber:de,memberId:Be.id,memberName:Be.name,memberType:Be.clientType||"block",status:"confirmed",bookedAt:vt.now()};const be=(u.waitlist||[]).filter(Te=>Te.memberId!==Be.id);await Es(It(nt,"circuitSessions",u.id),{slots:le,waitlist:be});const st={...u,slots:le,waitlist:be};f(st),a(Te=>Te.map(dt=>dt.id===st.id?st:dt)),G(`${Be.name} added to slot ${de}`,"success")}catch(le){console.error("Error adding to slot:",le),G("Failed to add member","error")}E(!1)}},je=async de=>{if(!(!u||T)){E(!0);try{const Be=(u.waitlist||[]).filter(ge=>ge.memberId!==de);await Es(It(nt,"circuitSessions",u.id),{waitlist:Be});const le={...u,waitlist:Be};f(le),a(ge=>ge.map(be=>be.id===le.id?le:be)),G("Removed from waitlist","success")}catch(Be){console.error("Error removing from waitlist:",Be),G("Failed to remove from waitlist","error")}E(!1)}},q=async(de,Be)=>{if(!(!u||T)){E(!0);try{const le=[...u.slots],ge=le.findIndex(st=>st.slotNumber===de);if(ge===-1){E(!1);return}if(le[ge]={...le[ge],attended:Be},await Es(It(nt,"circuitSessions",u.id),{slots:le}),Be===!1){const st=le[ge].memberId;if(st){const Te=It(nt,"clients",st),dt=await _i(Te);if(dt.exists()){const Nt=(dt.data().circuitStrikes||0)+1,Ee={circuitStrikes:Nt};if(Nt>=3){const Ue=new Date;Ue.setMonth(Ue.getMonth()+1),Ee.circuitBanUntil=vt.fromDate(Ue),Ee.circuitStrikes=0,G(`${le[ge].memberName} banned for 1 month (3 strikes)`,"error")}else G(`No-show recorded - ${le[ge].memberName} (${Nt}/3 strikes)`,"error");await Es(Te,Ee)}}}else G(`${le[ge].memberName} marked as attended`,"success");const be={...u,slots:le};f(be),a(st=>st.map(Te=>Te.id===be.id?be:Te))}catch(le){console.error("Error marking attendance:",le),G("Failed to update attendance","error")}E(!1)}},B=async(de,Be)=>{if(!T&&window.confirm(`Reset strikes for ${Be}?`)){E(!0);try{await Es(It(nt,"clients",de),{circuitStrikes:0,circuitBanUntil:null}),c(le=>le.map(ge=>ge.id===de?{...ge,circuitStrikes:0,circuitBanUntil:null}:ge)),G(`Strikes reset for ${Be}`,"success")}catch(le){console.error("Error resetting strikes:",le),G("Failed to reset strikes","error")}E(!1)}},H=async(de,Be)=>{if(!T&&window.confirm(`Lift ban for ${Be}?`)){E(!0);try{await Es(It(nt,"clients",de),{circuitBanUntil:null,circuitStrikes:0}),c(le=>le.map(ge=>ge.id===de?{...ge,circuitBanUntil:null,circuitStrikes:0}:ge)),G(`Ban lifted for ${Be}`,"success")}catch(le){console.error("Error lifting ban:",le),G("Failed to lift ban","error")}E(!1)}};if(s)return o.jsxs("div",{className:"cm-loading",children:[o.jsx("div",{className:"cm-loading-spinner"}),o.jsx("span",{children:"Loading circuit data..."})]});const Z=vg(new Date),$=vg(e_()),ee=t.filter(de=>de.date>=Z),O=t.filter(de=>de.date<Z),ke=m==="upcoming"?ee:O,Ie=u?u.slots.filter(de=>de.status!=="available").length:0,te=u?u.slots.filter(de=>de.status==="available").length:0,ve=u?u.date>=Z:!1,Le=u?u.slots.filter(de=>de.memberId).map(de=>de.memberId):[],De=u?(u.waitlist||[]).map(de=>de.memberId):[],Je=i.filter(de=>!Le.includes(de.id)&&!De.includes(de.id)),Q=i.filter(de=>de.clientType==="circuit_vip").length,ue=i.filter(de=>de.clientType==="circuit_dropin").length,ze=i.filter(de=>de.circuitAccess&&de.clientType!=="circuit_vip"&&de.clientType!=="circuit_dropin").length,Oe=i.filter(de=>de.circuitBanUntil?(de.circuitBanUntil.toDate?de.circuitBanUntil.toDate():new Date(de.circuitBanUntil))>new Date:!1);return o.jsxs("div",{className:"cm-container",children:[o.jsxs("div",{className:"cm-stats-row",children:[o.jsxs("div",{className:"cm-stat-pill",children:[o.jsx("span",{className:"cm-stat-num",children:Q}),o.jsx("span",{className:"cm-stat-label",children:"VIP"})]}),o.jsxs("div",{className:"cm-stat-pill",children:[o.jsx("span",{className:"cm-stat-num",children:ue}),o.jsx("span",{className:"cm-stat-label",children:"Drop-in"})]}),o.jsxs("div",{className:"cm-stat-pill",children:[o.jsx("span",{className:"cm-stat-num",children:ze}),o.jsx("span",{className:"cm-stat-label",children:"Block"})]}),o.jsxs("div",{className:"cm-stat-pill",children:[o.jsx("span",{className:"cm-stat-num",children:t.length}),o.jsx("span",{className:"cm-stat-label",children:"Sessions"})]})]}),o.jsxs("div",{className:"cm-view-toggle",children:[o.jsx("button",{className:`cm-toggle-btn ${P?"":"active"}`,onClick:()=>V(!1),children:"Sessions"}),o.jsx("button",{className:`cm-toggle-btn ${P?"active":""}`,onClick:()=>V(!0),children:"Members"})]}),!P&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"cm-tabs",children:[o.jsxs("button",{className:`cm-tab ${m==="upcoming"?"active":""}`,onClick:()=>b("upcoming"),children:["Upcoming (",ee.length,")"]}),o.jsxs("button",{className:`cm-tab ${m==="past"?"active":""}`,onClick:()=>b("past"),children:["Past (",O.length,")"]})]}),o.jsx("div",{className:"cm-sessions-list",children:ke.length===0?o.jsx("div",{className:"cm-empty",children:o.jsxs("p",{children:["No ",m," sessions"]})}):ke.map(de=>{const Be=de.slots.filter(be=>be.status!=="available").length,le=u?.id===de.id,ge=de.date===$;return o.jsxs("button",{className:`cm-session-btn ${le?"selected":""} ${ge?"next":""}`,onClick:()=>{f(de),K(!1)},children:[o.jsxs("div",{className:"cm-session-btn-left",children:[o.jsx("span",{className:"cm-session-date",children:Zx(de.date)}),ge&&o.jsx("span",{className:"cm-next-badge",children:"Next"})]}),o.jsxs("div",{className:"cm-session-btn-right",children:[o.jsxs("span",{className:"cm-session-fill",children:[Be,"/8"]}),(de.waitlist?.length||0)>0&&o.jsxs("span",{className:"cm-waitlist-count",children:["+",de.waitlist.length," wl"]})]})]},de.id)})}),u&&o.jsxs("div",{className:"cm-detail",children:[o.jsxs("div",{className:"cm-detail-header",children:[o.jsxs("div",{children:[o.jsx("h3",{children:Zx(u.date)}),o.jsxs("p",{children:[u.time," - ",u.endTime,"  ",Ie,"/8 booked  ",te," available"]})]}),!ve&&o.jsx("button",{className:`cm-attendance-btn ${F?"active":""}`,onClick:()=>K(!F),children:F?"Done":"Attendance"})]}),o.jsx("div",{className:"cm-slots",children:u.slots.map(de=>{const Be=de.status==="available";return o.jsxs("div",{className:`cm-slot ${Be?"empty":"filled"} ${de.attended===!0?"attended":""} ${de.attended===!1?"no-show":""}`,children:[o.jsx("span",{className:"cm-slot-num",children:de.slotNumber}),Be?o.jsxs("div",{className:"cm-slot-empty",children:[o.jsx("span",{children:"Available"}),ve&&o.jsx(u3,{members:Je,onSelect:le=>fe(de.slotNumber,le),disabled:T})]}):o.jsxs("div",{className:"cm-slot-filled",children:[o.jsxs("div",{className:"cm-slot-info",children:[o.jsx("span",{className:"cm-slot-name",children:de.memberName}),o.jsx("span",{className:`cm-type-badge ${Mf(de.memberType)}`,children:Df(de.memberType)})]}),o.jsxs("div",{className:"cm-slot-actions",children:[F&&de.attended===void 0&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"cm-attend-yes",onClick:()=>q(de.slotNumber,!0),disabled:T,title:"Attended",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:o.jsx("path",{d:"M5 13l4 4L19 7"})})}),o.jsx("button",{className:"cm-attend-no",onClick:()=>q(de.slotNumber,!1),disabled:T,title:"No-show",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:o.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),de.attended===!0&&o.jsx("span",{className:"cm-attended-label",children:"Attended"}),de.attended===!1&&o.jsx("span",{className:"cm-noshow-label",children:"No-show"}),ve&&o.jsx("button",{className:"cm-remove-btn",onClick:()=>Y(de.slotNumber),disabled:T,title:"Remove from slot",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})]},de.slotNumber)})}),(u.waitlist?.length||0)>0&&o.jsxs("div",{className:"cm-waitlist",children:[o.jsxs("h4",{children:["Waitlist (",u.waitlist.length,")"]}),u.waitlist.map((de,Be)=>o.jsxs("div",{className:"cm-waitlist-row",children:[o.jsxs("span",{className:"cm-wl-pos",children:["#",Be+1]}),o.jsx("span",{className:"cm-wl-name",children:de.memberName}),o.jsx("span",{className:`cm-type-badge ${Mf(de.memberType)}`,children:Df(de.memberType)}),ve&&o.jsx("button",{className:"cm-wl-remove",onClick:()=>je(de.memberId),disabled:T,children:"Remove"})]},de.memberId))]})]})]}),P&&o.jsxs("div",{className:"cm-members",children:[Oe.length>0&&o.jsxs("div",{className:"cm-ban-alert",children:[o.jsxs("h4",{children:["Currently Banned (",Oe.length,")"]}),Oe.map(de=>{const Be=de.circuitBanUntil?.toDate?de.circuitBanUntil.toDate():new Date(de.circuitBanUntil);return o.jsxs("div",{className:"cm-ban-row",children:[o.jsxs("div",{className:"cm-ban-info",children:[o.jsx("span",{className:"cm-ban-name",children:de.name}),o.jsxs("span",{className:"cm-ban-until",children:["Until ",Be.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),o.jsx("button",{className:"cm-lift-ban-btn",onClick:()=>H(de.id,de.name),disabled:T,children:"Lift Ban"})]},de.id)})]}),o.jsx("div",{className:"cm-members-list",children:i.length===0?o.jsxs("div",{className:"cm-empty",children:[o.jsx("p",{children:"No circuit members yet"}),o.jsx("span",{children:"Add members via the Clients page"})]}):i.map(de=>{const Be=de.circuitStrikes||0,le=Oe.some(ge=>ge.id===de.id);return o.jsxs("div",{className:`cm-member-card ${le?"banned":""}`,children:[o.jsxs("div",{className:"cm-member-top",children:[o.jsx("span",{className:"cm-member-name",children:de.name}),o.jsx("span",{className:`cm-type-badge ${Mf(de.clientType)}`,children:Df(de.clientType)})]}),o.jsxs("div",{className:"cm-member-bottom",children:[o.jsxs("div",{className:"cm-strikes",children:[[0,1,2].map(ge=>o.jsx("span",{className:`cm-strike-dot ${ge<Be?"active":""}`},ge)),o.jsxs("span",{className:"cm-strike-text",children:[Be,"/3 strikes"]})]}),o.jsxs("div",{className:"cm-member-actions",children:[le&&o.jsx("button",{className:"cm-small-btn ban",onClick:()=>H(de.id,de.name),disabled:T,children:"Lift Ban"}),Be>0&&!le&&o.jsx("button",{className:"cm-small-btn reset",onClick:()=>B(de.id,de.name),disabled:T,children:"Reset"})]})]})]},de.id)})})]}),C&&o.jsx("div",{className:`cm-toast ${C.type}`,children:o.jsx("span",{children:C.message})})]})}function u3({members:s,onSelect:e,disabled:t}){const[a,i]=I.useState(!1),[c,u]=I.useState(""),f=s.filter(m=>m.name.toLowerCase().includes(c.toLowerCase()));return s.length===0?null:o.jsxs("div",{className:"cm-add-dropdown",children:[o.jsx("button",{className:"cm-add-trigger",onClick:()=>i(!a),disabled:t,children:"+ Add"}),a&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"cm-dropdown-backdrop",onClick:()=>{i(!1),u("")}}),o.jsxs("div",{className:"cm-dropdown-menu",children:[s.length>4&&o.jsx("input",{type:"text",className:"cm-dropdown-search",placeholder:"Search...",value:c,onChange:m=>u(m.target.value),autoFocus:!0}),o.jsxs("div",{className:"cm-dropdown-list",children:[f.map(m=>o.jsxs("button",{className:"cm-dropdown-item",onClick:()=>{e(m),i(!1),u("")},children:[o.jsx("span",{children:m.name}),o.jsx("span",{className:`cm-type-badge sm ${Mf(m.clientType)}`,children:Df(m.clientType)})]},m.id)),f.length===0&&o.jsx("div",{className:"cm-dropdown-empty",children:"No members found"})]})]})]})]})}function d3(){const[s,e]=I.useState(()=>localStorage.getItem("adminActiveView")||"schedule"),t=te=>{e(te),localStorage.setItem("adminActiveView",te)},[a,i]=I.useState(0),[c,u]=I.useState(!1),[f,m]=I.useState([]),[b,T]=I.useState(null),[E,C]=I.useState(null),{currentUser:L,logout:P,isAdmin:V,loading:F}=lr(),{isDark:K,toggleTheme:G}=go(),se=Os(),Y=I.useRef(0),fe=I.useRef(!1);I.useRef(null);const je=I.useCallback((te,ve="info")=>{C({message:te,type:ve}),setTimeout(()=>C(null),4e3)},[]);I.useEffect(()=>{!F&&(!L||!V)&&se("/")},[L,V,F,se]),I.useEffect(()=>{L&&V&&q()},[L,V]);const q=async()=>{try{const te=_r(Ft(nt,"rescheduleRequests"),ir("status","==","pending")),Le=(await mn(te)).docs.map(De=>({id:De.id,...De.data()}));Le.sort((De,Je)=>{const Q=De.createdAt?.toDate?De.createdAt.toDate():new Date(0);return(Je.createdAt?.toDate?Je.createdAt.toDate():new Date(0))-Q}),m(Le)}catch(te){console.error("Error fetching reschedule requests:",te)}};I.useEffect(()=>{(async()=>{if(!(!L||!V))try{const[ve,Le]=await Promise.all([mn(Ft(nt,"clients")),mn(Ft(nt,"sessions"))]),De=new Set(ve.docs.map(Q=>Q.id)),Je=Le.docs.filter(Q=>!De.has(Q.data().clientId));if(Je.length>0){console.log(`Cleaning up ${Je.length} orphaned sessions...`);const Q=Je.map(ue=>xa(It(nt,"sessions",ue.id)));await Promise.all(Q),console.log("Orphaned sessions cleaned up successfully")}}catch(ve){console.error("Error cleaning up orphaned sessions:",ve)}})()},[L,V]),I.useEffect(()=>{const te=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,ve=Je=>{te()<=0&&(Y.current=Je.touches[0].clientY,fe.current=!1)},Le=Je=>{const Q=te(),ze=Je.touches[0].clientY-Y.current;if(Q>5||ze<=0){fe.current=!1,i(0);return}ze>20&&Q<=0&&(fe.current=!0,i(Math.min((ze-20)*.4,80)))},De=()=>{fe.current&&a>60?(u(!0),setTimeout(()=>{window.location.reload()},300)):i(0),fe.current=!1};return document.addEventListener("touchstart",ve,{passive:!0}),document.addEventListener("touchmove",Le,{passive:!0}),document.addEventListener("touchend",De),()=>{document.removeEventListener("touchstart",ve),document.removeEventListener("touchmove",Le),document.removeEventListener("touchend",De)}},[a]);const B=()=>{u(!0),setTimeout(()=>{window.location.reload()},300)},H=async()=>{try{await P(),se("/")}catch(te){console.error("Failed to log out:",te)}},Z=()=>{se("/add-client")},$=te=>new Date(te).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),ee=te=>{const[ve,Le]=te.split(":"),De=parseInt(ve),Je=De>=12?"pm":"am";return`${De>12?De-12:De===0?12:De}:${Le}${Je}`},O=async te=>{if(window.confirm(`Approve reschedule for ${te.clientName}?

From: ${$(te.originalDate)} at ${ee(te.originalTime)}
To: ${$(te.requestedDate)} at ${ee(te.requestedTime)}`)){T(te.id);try{await Es(It(nt,"sessions",te.sessionId),{date:te.requestedDate,time:te.requestedTime}),await Es(It(nt,"rescheduleRequests",te.id),{status:"approved",respondedAt:vt.now()}),m(f.filter(ve=>ve.id!==te.id)),je(`Approved reschedule for ${te.clientName}`,"success")}catch(ve){console.error("Error approving request:",ve),je("Failed to approve request","error")}T(null)}},ke=async te=>{if(window.confirm(`Reject reschedule request from ${te.clientName}?`)){T(te.id);try{await Es(It(nt,"rescheduleRequests",te.id),{status:"rejected",respondedAt:vt.now()}),m(f.filter(ve=>ve.id!==te.id)),je(`Request from ${te.clientName} rejected`,"info")}catch(ve){console.error("Error rejecting request:",ve),je("Failed to reject request","error")}T(null)}};if(F)return o.jsx("div",{className:"loading",children:"Loading..."});if(!L||!V)return null;const Ie=f.length;return o.jsxs("div",{className:"dashboard",children:[a>0&&o.jsxs("div",{className:"pull-indicator",style:{height:a},children:[o.jsx("div",{className:`pull-spinner ${c?"spinning":""}`,children:c?"":""}),o.jsx("span",{children:c?"Refreshing...":a>60?"Release to refresh":"Pull to refresh"})]}),o.jsxs("header",{className:"dashboard-header",children:[o.jsxs("div",{className:"header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"admin-header-logo"}),o.jsx("span",{className:"admin-badge",children:"Admin"})]}),o.jsxs("nav",{className:"header-nav",children:[o.jsx("button",{className:`nav-btn ${s==="schedule"?"active":""}`,onClick:()=>t("schedule"),children:"Today"}),o.jsx("button",{className:`nav-btn ${s==="clients"?"active":""}`,onClick:()=>t("clients"),children:"Clients"}),o.jsx("button",{className:`nav-btn ${s==="calendar"?"active":""}`,onClick:()=>t("calendar"),children:"Calendar"}),o.jsxs("button",{className:`nav-btn ${s==="requests"?"active":""} ${Ie>0?"has-badge":""}`,onClick:()=>t("requests"),children:["Requests",Ie>0&&o.jsx("span",{className:"nav-badge",children:Ie})]}),o.jsx("button",{className:`nav-btn ${s==="availability"?"active":""}`,onClick:()=>t("availability"),children:"Slots"}),o.jsx("button",{className:`nav-btn ${s==="circuits"?"active":""}`,onClick:()=>t("circuits"),children:"Circuits"})]}),o.jsxs("div",{className:"header-actions",children:[o.jsx("button",{className:"theme-toggle-btn",onClick:G,"aria-label":K?"Switch to light mode":"Switch to dark mode",children:K?o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),o.jsx("button",{className:"refresh-btn",onClick:B,disabled:c,children:c?"":""}),o.jsx("button",{className:"logout-btn",onClick:H,children:"Log Out"})]})]}),E&&o.jsx("div",{className:"toast-container",children:o.jsxs("div",{className:`toast ${E.type}`,children:[o.jsxs("span",{className:"toast-icon",children:[E.type==="success"&&o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),E.type==="error"&&o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),E.type==="info"&&o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})]}),o.jsx("span",{className:"toast-message",children:E.message})]})}),o.jsxs("main",{className:"dashboard-main",children:[s==="schedule"&&o.jsxs("div",{className:"schedule-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Schedule"})}),o.jsx(s3,{})]}),s==="clients"&&o.jsxs("div",{className:"clients-view",children:[o.jsxs("div",{className:"view-header",children:[o.jsx("h2",{children:"Clients"}),o.jsx("button",{className:"add-btn",onClick:Z,children:"+ Add Client"})]}),o.jsx(QM,{})]}),s==="calendar"&&o.jsxs("div",{className:"calendar-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Calendar"})}),o.jsx(t3,{})]}),s==="requests"&&o.jsxs("div",{className:"requests-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Reschedule Requests"})}),f.length===0?o.jsxs("div",{className:"no-requests",children:[o.jsx("div",{className:"empty-icon",children:o.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"20",y:"25",width:"60",height:"50",rx:"4"}),o.jsx("path",{d:"M20 35 L50 55 L80 35"}),o.jsx("circle",{cx:"50",cy:"70",r:"3",fill:"currentColor"})]})}),o.jsx("p",{children:"No pending requests"}),o.jsx("span",{children:"When clients request to reschedule, they will appear here"})]}):o.jsx("div",{className:"requests-list",children:f.map(te=>o.jsxs("div",{className:"request-card",children:[o.jsxs("div",{className:"request-header",children:[o.jsx("span",{className:"client-name",children:te.clientName}),o.jsx("span",{className:"request-time",children:te.createdAt?.toDate?te.createdAt.toDate().toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""})]}),o.jsx("div",{className:"request-details",children:o.jsxs("div",{className:"request-change",children:[o.jsxs("div",{className:"from-session",children:[o.jsx("span",{className:"label",children:"From:"}),o.jsxs("span",{className:"value",children:[$(te.originalDate)," at ",ee(te.originalTime)]})]}),o.jsx("div",{className:"arrow",children:""}),o.jsxs("div",{className:"to-session",children:[o.jsx("span",{className:"label",children:"To:"}),o.jsxs("span",{className:"value",children:[$(te.requestedDate)," at ",ee(te.requestedTime)]})]})]})}),o.jsxs("div",{className:"request-actions",children:[o.jsx("button",{className:"approve-btn",onClick:()=>O(te),disabled:b===te.id,children:b===te.id?"Processing...":"Approve"}),o.jsx("button",{className:"reject-btn",onClick:()=>ke(te),disabled:b===te.id,children:"Reject"})]})]},te.id))})]}),s==="availability"&&o.jsxs("div",{className:"availability-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Available Slots"})}),o.jsx(l3,{})]}),s==="circuits"&&o.jsxs("div",{className:"circuits-view",children:[o.jsx("div",{className:"view-header",children:o.jsx("h2",{children:"Circuit Management"})}),o.jsx(c3,{})]})]})]})}const h3=[{value:"block",label:"Block (1-2-1)"},{value:"circuit_vip",label:"Circuit VIP"},{value:"circuit_dropin",label:"Circuit Drop-in"}];function f3(){const[s,e]=I.useState({name:"",email:"",password:"",clientType:"block",circuitAccess:!1,weeksInBlock:"",numberOfSessions:"",sessionDuration:"45",startDate:"",endDate:""}),[t,a]=I.useState(!1),[i,c]=I.useState(""),{currentUser:u,isAdmin:f,loading:m}=lr(),b=Os();I.useEffect(()=>{!m&&(!u||!f)&&b("/")},[u,f,m,b]),I.useEffect(()=>{if(s.startDate&&s.weeksInBlock){const P=new Date(s.startDate),V=parseInt(s.weeksInBlock);if(!isNaN(V)&&V>0){const F=new Date(P);F.setDate(F.getDate()+V*7);const K=F.getFullYear(),G=(F.getMonth()+1).toString().padStart(2,"0"),se=F.getDate().toString().padStart(2,"0");e(Y=>({...Y,endDate:`${K}-${G}-${se}`}))}}},[s.startDate,s.weeksInBlock]);const T=P=>{const{name:V,value:F,type:K,checked:G}=P.target;e(se=>({...se,[V]:K==="checkbox"?G:F}))},E=async P=>{P.preventDefault(),c(""),a(!0);try{const V=await d2(tm,s.email.trim().toLowerCase(),s.password);await Ny(tm);const F=s.clientType==="block",K={uid:V.user.uid,name:s.name.trim(),email:s.email.trim().toLowerCase(),clientType:s.clientType,status:"active",createdAt:vt.now()};F?(K.circuitAccess=s.circuitAccess,K.weeksInBlock=parseInt(s.weeksInBlock),K.totalSessions=parseInt(s.numberOfSessions),K.sessionsRemaining=parseInt(s.numberOfSessions),K.sessionDuration=parseInt(s.sessionDuration),K.startDate=vt.fromDate(new Date(s.startDate)),K.endDate=vt.fromDate(new Date(s.endDate))):(K.circuitStrikes=0,K.circuitBanUntil=null),await fi(Ft(nt,"clients"),K),b("/dashboard")}catch(V){console.error("Error adding client:",V),V.code==="auth/email-already-in-use"?c("This email is already registered."):V.code==="auth/weak-password"?c("Password should be at least 6 characters."):c("Failed to add client. Please try again."),a(!1)}},C=()=>{b("/dashboard")};if(m)return o.jsx("div",{className:"loading",children:"Loading..."});if(!u||!f)return null;const L=s.clientType==="block";return o.jsxs("div",{className:"add-client-page",children:[o.jsxs("header",{className:"page-header",children:[o.jsx("button",{className:"back-btn",onClick:C,children:" Back"}),o.jsx("h1",{children:"Add New Client"})]}),o.jsxs("main",{className:"page-content",children:[i&&o.jsx("div",{className:"form-error",children:i}),o.jsxs("form",{onSubmit:E,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Client Type"}),o.jsx("div",{className:"client-type-toggle",children:h3.map(P=>o.jsx("button",{type:"button",className:`type-btn ${s.clientType===P.value?"active":""}`,onClick:()=>e(V=>({...V,clientType:P.value})),children:P.label},P.value))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"name",children:"Client Name"}),o.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:T,placeholder:"John Smith",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Client Email"}),o.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:T,placeholder:"john@example.com",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Client Portal Password"}),o.jsx("input",{type:"text",id:"password",name:"password",value:s.password,onChange:T,placeholder:"Set a password for client login",minLength:"6",required:!0}),o.jsx("span",{className:"helper-text",children:"Minimum 6 characters. Share this with your client."})]}),L&&o.jsx("div",{className:"form-group",children:o.jsxs("label",{className:"circuit-toggle-label",children:[o.jsx("input",{type:"checkbox",name:"circuitAccess",checked:s.circuitAccess,onChange:T}),o.jsx("span",{children:"Also allow Circuit Class access"})]})}),L&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"weeksInBlock",children:"Weeks in Block"}),o.jsx("input",{type:"number",id:"weeksInBlock",name:"weeksInBlock",value:s.weeksInBlock,onChange:T,placeholder:"8",min:"1",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"numberOfSessions",children:"Number of Sessions"}),o.jsx("input",{type:"number",id:"numberOfSessions",name:"numberOfSessions",value:s.numberOfSessions,onChange:T,placeholder:"16",min:"1",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"sessionDuration",children:"Session Duration"}),o.jsxs("select",{id:"sessionDuration",name:"sessionDuration",value:s.sessionDuration,onChange:T,required:!0,children:[o.jsx("option",{value:"30",children:"30 minutes"}),o.jsx("option",{value:"45",children:"45 minutes"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"startDate",children:"Start Date"}),o.jsx("input",{type:"date",id:"startDate",name:"startDate",value:s.startDate,onChange:T,required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"endDate",children:"End Date (auto-calculated)"}),o.jsx("input",{type:"date",id:"endDate",name:"endDate",value:s.endDate,onChange:T,required:!0}),o.jsx("span",{className:"helper-text",children:"Calculated from start date + weeks"})]})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{type:"button",className:"cancel-btn",onClick:C,children:"Cancel"}),o.jsx("button",{type:"submit",className:"submit-btn",disabled:t,children:t?"Saving...":"Save Client"})]})]})]})]})}const TS={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},m3=["monday","tuesday","wednesday","thursday","friday"],to=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${a}`},ay=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},jd=(s,e)=>{const t=ay(s)+e,a=Math.floor(t/60),i=t%60;return`${a.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},p3=s=>{const e=TS[s];if(!e)return[];const t=[];if(e.morning){let a=e.morning.start;for(;a<e.morning.end;)t.push({time:a,period:"morning"}),a=jd(a,15)}if(e.afternoon){let a=e.afternoon.start;for(;a<e.afternoon.end;)t.push({time:a,period:"afternoon"}),a=jd(a,15)}return t},g3=s=>{const e=s.getDay();return e>=1&&e<=5},ES=s=>{const e=s.getDay();return e===0||e===6?null:m3[e-1]},y3=(s,e,t,a,i,c=null,u=[],f=[])=>{const m=ES(s);if(!m)return!1;const b=to(s),T=TS[m];if(i.some(G=>G.date===b))return!1;if(T.defaultBlocked){const G=Math.ceil(t/15);for(let se=0;se<G;se++){const Y=jd(e,se*15);if(!f.some(fe=>fe.date===b&&fe.time===Y))return!1}}else{const G=Math.ceil(t/15);for(let se=0;se<G;se++){const Y=jd(e,se*15);if(u.some(fe=>fe.date===b&&fe.time===Y))return!1}}const E=new Date,C=to(E);if(b<C)return!1;if(b===C){const G=`${E.getHours().toString().padStart(2,"0")}:${E.getMinutes().toString().padStart(2,"0")}`;if(e<G)return!1}const L=jd(e,t),P=T.morning&&e>=T.morning.start&&e<T.morning.end,V=T.afternoon&&e>=T.afternoon.start&&e<T.afternoon.end,F=T.morning&&L<=T.morning.end,K=T.afternoon&&L<=T.afternoon.end;if(P&&!F||V&&!K||!P&&!V)return!1;for(const G of a){if(c&&G.id===c||G.date!==b)continue;const se=ay(G.time),Y=se+(G.duration||45),fe=ay(e),je=fe+t;if(fe<Y&&je>se)return!1}return!0},v3=(s,e,t,a,i=null,c=[],u=[])=>{const f=ES(s);return f?p3(f).filter(b=>y3(s,b.time,e,t,a,i,c,u)):[]};function b3(){const[s,e]=I.useState([]),[t,a]=I.useState([]),[i,c]=I.useState([]),[u,f]=I.useState([]),[m,b]=I.useState([]),[T,E]=I.useState([]),[C,L]=I.useState(!0),[P,V]=I.useState(null),[F,K]=I.useState(!1),[G,se]=I.useState(null),[Y,fe]=I.useState(null),[je,q]=I.useState(null),[B,H]=I.useState([]),[Z,$]=I.useState(!1),[ee,O]=I.useState([]),[ke,Ie]=I.useState(null),[te,ve]=I.useState(!1),[Le,De]=I.useState(0),Je=I.useRef(null),Q=I.useRef(0),ue=I.useRef(!1),[ze,Oe]=I.useState(null),[de,Be]=I.useState(null),[le,ge]=I.useState(!1),[be,st]=I.useState([]),[Te,dt]=I.useState(!1),[Tt,Nt]=I.useState(null),[Ee,Ue]=I.useState(null),[X,Ce]=I.useState([]),[Ke,$e]=I.useState(null),Ve=I.useRef(null),{currentUser:it,isClient:xt,clientData:rt,logout:tn,loading:vn}=lr(),{isDark:Fn,toggleTheme:Jn}=go(),qn=Os(),ks=I.useCallback((he,ct="info")=>{Ie({message:he,type:ct}),setTimeout(()=>Ie(null),4e3)},[]),hn=he=>{const ct=he.currentTarget,Ot=ct.querySelector(".ripple");Ot&&Ot.remove();const Bt=document.createElement("span"),Un=Math.max(ct.clientWidth,ct.clientHeight),Cn=Un/2,Bn=ct.getBoundingClientRect();Bt.style.width=Bt.style.height=`${Un}px`,Bt.style.left=`${he.clientX-Bn.left-Cn}px`,Bt.style.top=`${he.clientY-Bn.top-Cn}px`,Bt.classList.add("ripple"),ct.appendChild(Bt),setTimeout(()=>Bt.remove(),600)},We=he=>{Je.current&&Je.current.scrollTop===0&&(Q.current=he.touches[0].clientY,ue.current=!0)},et=he=>{if(!ue.current||!Je.current)return;const Ot=he.touches[0].clientY-Q.current;Ot>20&&Je.current.scrollTop===0&&(he.preventDefault(),De(Math.min((Ot-20)*.35,80)))},at=async()=>{Le>55&&!te&&(ve(!0),await At(),ks("Refreshed!","success"),ve(!1)),De(0),ue.current=!1},jt=(he,ct)=>{const Ot=he.touches[0];he.currentTarget.dataset.startX=Ot.clientX,he.currentTarget.dataset.startY=Ot.clientY},_t=(he,ct)=>{const Ot=he.touches[0],Bt=parseFloat(he.currentTarget.dataset.startX),Un=parseFloat(he.currentTarget.dataset.startY),Cn=Ot.clientX-Bt,Bn=Ot.clientY-Un;Math.abs(Cn)>Math.abs(Bn)&&Math.abs(Cn)>10&&(he.preventDefault(),Cn<-50?Oe(ct):Cn>50&&Oe(null))};I.useEffect(()=>{!vn&&(!it||!xt)&&qn("/")},[it,xt,vn,qn]),I.useEffect(()=>{rt&&At()},[rt]),I.useEffect(()=>{if(!C&&rt){const he=setTimeout(()=>dt(!0),300);return()=>clearTimeout(he)}},[C,rt]),I.useEffect(()=>{const he=()=>{const Ot=_n();if(Ot.length===0){Nt(null);return}const Bt=Ot[0],Un=new Date,Bn=new Date(Bt.date+"T"+Bt.time)-Un;if(Bn<=0){Nt(null);return}const cs=Math.floor(Bn/(1e3*60*60*24)),ys=Math.floor(Bn%(1e3*60*60*24)/(1e3*60*60)),ns=Math.floor(Bn%(1e3*60*60)/(1e3*60)),Ps=Math.floor(Bn%(1e3*60)/1e3);Nt({days:cs,hours:ys,minutes:ns,seconds:Ps,session:Bt})};he();const ct=setInterval(he,1e3);return()=>clearInterval(ct)},[s,C]);const At=async()=>{try{const he=_r(Ft(nt,"sessions"),ir("clientId","==",rt.id)),Ot=(await mn(he)).docs.map(Rt=>({id:Rt.id,...Rt.data()}));Ot.sort((Rt,Sr)=>Rt.date!==Sr.date?Rt.date.localeCompare(Sr.date):Rt.time.localeCompare(Sr.time)),e(Ot);const Bt=await mn(Ft(nt,"sessions"));a(Bt.docs.map(Rt=>({id:Rt.id,...Rt.data()})));const Un=await mn(Ft(nt,"holidays"));c(Un.docs.map(Rt=>({id:Rt.id,...Rt.data()})));const Cn=await mn(Ft(nt,"blockedTimes"));f(Cn.docs.map(Rt=>({id:Rt.id,...Rt.data()})));const Bn=await mn(Ft(nt,"openedSlots"));b(Bn.docs.map(Rt=>({id:Rt.id,...Rt.data()})));const cs=_r(Ft(nt,"rescheduleRequests"),ir("clientId","==",rt.id)),ns=(await mn(cs)).docs.map(Rt=>({id:Rt.id,...Rt.data()}));O(ns.filter(Rt=>Rt.status==="pending"));const Ps=ns.filter(Rt=>{if(Rt.status==="pending"||!Rt.respondedAt)return!1;const Sr=Rt.respondedAt.toDate?Rt.respondedAt.toDate():new Date(Rt.respondedAt),ur=new Date;return ur.setDate(ur.getDate()-7),Sr>ur&&!Rt.dismissed});E(Ps);const Hn=_r(Ft(nt,"achievements"),ir("clientId","==",rt.id)),qa=await mn(Hn);if(!qa.empty){const Rt=qa.docs[0].data().badges||[];st(Rt)}const Ti=new Date().toISOString().split("T")[0],cr=await _i(It(nt,"clients",rt.id));if(cr.exists()){const Rt=cr.data();Rt.dailyQuote&&Rt.dailyQuote.date===Ti?Ue(Rt.dailyQuote):Ue(null)}try{const Rt=_r(Ft(nt,"sessionNotes"),ir("clientId","==",rt.id)),ur=(await mn(Rt)).docs.map(Br=>({id:Br.id,...Br.data()}));ur.sort((Br,Ei)=>{const Ha=Br.createdAt?.toMillis?.()||0;return(Ei.createdAt?.toMillis?.()||0)-Ha}),Ce(ur)}catch(Rt){console.error("Error fetching session notes:",Rt)}}catch(he){console.error("Error fetching data:",he)}L(!1)},yt=he=>new Date(he).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),ae=he=>{const[ct,Ot]=he.split(":"),Bt=parseInt(ct),Un=Bt>=12?"pm":"am";return`${Bt>12?Bt-12:Bt===0?12:Bt}:${Ot}${Un}`},xe=he=>he?(he.toDate?he.toDate():new Date(he)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",lt=he=>{const ct=new Date,Ot=to(ct),Bt=`${ct.getHours().toString().padStart(2,"0")}:${ct.getMinutes().toString().padStart(2,"0")}`;return he.date<Ot||he.date===Ot&&he.time<Bt},ht=he=>{const Ot=to(new Date);return he.date===Ot&&!lt(he)},Pt=()=>s.filter(he=>lt(he)).length,_n=()=>s.filter(he=>!lt(he)),nn=he=>{Be({title:"Cancel Session?",message:`Cancel your session on ${yt(he.date)} at ${ae(he.time)}? This cannot be undone.`,onConfirm:async()=>{Be(null),V(he.id),Oe(null);try{await xa(It(nt,"sessions",he.id)),e(s.filter(ct=>ct.id!==he.id)),ks("Session cancelled","success")}catch(ct){console.error("Error cancelling session:",ct),ks("Failed to cancel session. Please try again.","error")}V(null)},onCancel:()=>Be(null)})},en=async()=>{try{await tn(),qn("/")}catch(he){console.error("Failed to log out:",he)}},pn=he=>ee.some(ct=>ct.sessionId===he),wn=he=>{se(he),fe(null),q(null),H([]),K(!0)},Gn=()=>{K(!1),se(null),fe(null),q(null),H([])},ls=()=>rt.endDate?rt.endDate.toDate?rt.endDate.toDate():new Date(rt.endDate):new Date,me=()=>{const he=[],ct=new Date,Ot=ls(),Bt=new Date(ct);for(Bt.setDate(Bt.getDate()+1);Bt<=Ot;){if(g3(Bt)){const Un=to(Bt);i.some(Bn=>Bn.date===Un)||he.push(new Date(Bt))}Bt.setDate(Bt.getDate()+1)}return he},He=he=>{fe(he),q(null);const ct=G?.duration||rt.sessionDuration||45;let Ot=v3(he,ct,t,i,G?.id,u,m);G&&to(he)===G.date&&(Ot=Ot.filter(Bt=>Bt.time!==G.time)),H(Ot)},tt=async()=>{if(!(!Y||!je||!G)){$(!0);try{await fi(Ft(nt,"rescheduleRequests"),{sessionId:G.id,clientId:rt.id,clientName:rt.name,originalDate:G.date,originalTime:G.time,requestedDate:to(Y),requestedTime:je,duration:G.duration,status:"pending",createdAt:vt.now(),respondedAt:null,dismissed:!1}),Gn(),ks("Reschedule request submitted! You'll be notified when your trainer responds.","success"),At()}catch(he){console.error("Error submitting reschedule request:",he),ks("Failed to submit request. Please try again.","error")}$(!1)}},Ze=async he=>{try{await Es(It(nt,"rescheduleRequests",he),{dismissed:!0}),E(T.filter(ct=>ct.id!==he))}catch(ct){console.error("Error dismissing notification:",ct)}},pt=()=>{const he=_n();if(he.length===0)return null;const ct=he[0],Ot=new Date,Un=new Date(ct.date+"T"+ct.time)-Ot;if(Un<=0)return null;const Cn=Math.floor(Un/(1e3*60*60*24)),Bn=Math.floor(Un%(1e3*60*60*24)/(1e3*60*60)),cs=Math.floor(Un%(1e3*60*60)/(1e3*60));return{days:Cn,hours:Bn,minutes:cs,session:ct}};if(vn||C)return o.jsxs("div",{className:"client-dashboard",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("div",{className:"skeleton skeleton-logo"})})}),o.jsxs("main",{className:"client-main",children:[o.jsxs("div",{className:"skeleton-welcome",children:[o.jsx("div",{className:"skeleton skeleton-title"}),o.jsx("div",{className:"skeleton skeleton-btn-small"})]}),o.jsxs("div",{className:"skeleton-actions",children:[o.jsx("div",{className:"skeleton skeleton-btn"}),o.jsx("div",{className:"skeleton skeleton-btn"})]}),o.jsx("div",{className:"skeleton skeleton-card-large"}),o.jsx("div",{className:"skeleton skeleton-card-medium"}),o.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!it||!xt||!rt)return null;const wt=Pt(),Ut=rt.totalSessions-wt,Xt=_n(),Wt=F?me():[];pt();const kn=rt.totalSessions>0?wt/rt.totalSessions*100:0;return o.jsxs("div",{className:"client-dashboard",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("div",{className:`pull-refresh-indicator ${Le>0?"visible":""} ${te?"refreshing":""}`,style:{height:Le},children:[o.jsx("div",{className:`refresh-spinner ${te?"spinning":""}`,children:o.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:o.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),o.jsx("span",{className:"refresh-text",children:te?"Refreshing...":"Pull to refresh"})]}),o.jsxs("main",{className:"client-main page-transition-enter",ref:Je,onTouchStart:We,onTouchMove:et,onTouchEnd:at,children:[o.jsxs("div",{className:"welcome-section",children:[o.jsxs("h2",{children:["Welcome, ",rt.name.split(" ")[0]]}),o.jsxs("div",{className:"welcome-actions",children:[o.jsx("button",{className:"theme-toggle",onClick:Jn,"aria-label":Fn?"Switch to light mode":"Switch to dark mode",children:Fn?o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),o.jsx("button",{className:"logout-btn",onClick:en,children:"Log Out"})]})]}),T.length>0&&o.jsx("div",{className:"notifications-section",children:T.map(he=>o.jsxs("div",{className:`notification ${he.status}`,children:[o.jsxs("div",{className:"notification-content",children:[o.jsx("span",{className:"notification-icon",children:he.status==="approved"?"":""}),o.jsxs("div",{className:"notification-text",children:[o.jsx("strong",{children:he.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),o.jsx("p",{children:he.status==="approved"?`Your session has been moved to ${yt(he.requestedDate)} at ${ae(he.requestedTime)}`:`Your request to reschedule from ${yt(he.originalDate)} was declined. Please contact your trainer.`})]})]}),o.jsx("button",{className:"dismiss-btn",onClick:()=>Ze(he.id),children:""})]},he.id))}),Tt&&o.jsxs("div",{className:"ring-timer-container",children:[o.jsxs("div",{className:"ring-timer",children:[o.jsx("svg",{className:"ring-timer-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((he,ct)=>{const Ot=(ct*6-90)*(Math.PI/180),Bt=85,Un=96,Cn=100+Bt*Math.cos(Ot),Bn=100+Bt*Math.sin(Ot),cs=100+Un*Math.cos(Ot),ys=100+Un*Math.sin(Ot),Ps=60-Tt.seconds,Hn=ct<Ps;return o.jsx("line",{x1:Cn,y1:Bn,x2:cs,y2:ys,className:`ring-tick ${Hn?"elapsed":"remaining"}`,strokeWidth:ct%5===0?"3":"2"},ct)})}),o.jsxs("div",{className:"ring-timer-center",children:[o.jsx("div",{className:"ring-timer-logo",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),o.jsxs("div",{className:"ring-timer-countdown",children:[Tt.days>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"timer-digit",children:String(Tt.days).padStart(2,"0")}),o.jsx("span",{className:"timer-colon",children:":"})]}),o.jsx("span",{className:"timer-digit",children:String(Tt.hours).padStart(2,"0")}),o.jsx("span",{className:"timer-colon",children:":"}),o.jsx("span",{className:"timer-digit",children:String(Tt.minutes).padStart(2,"0")}),o.jsx("span",{className:"timer-colon",children:":"}),o.jsx("span",{className:"timer-digit timer-seconds",children:String(Tt.seconds).padStart(2,"0")})]}),o.jsx("div",{className:"ring-timer-label",children:"until next session"})]})]}),o.jsxs("div",{className:"ring-timer-session-info",children:[yt(Tt.session.date)," at ",ae(Tt.session.time)]})]}),o.jsxs("div",{className:"block-info-card",children:[o.jsx("div",{className:"block-header-row",children:o.jsx("h3",{children:"Your Training Block"})}),o.jsxs("div",{className:"progress-section",children:[o.jsxs("div",{className:"progress-ring-container",children:[o.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[o.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),o.jsx("circle",{className:`progress-ring-fill ${Te?"animate":""}`,cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:Te?`${2*Math.PI*42*(1-kn/100)}`:`${2*Math.PI*42}`,strokeLinecap:"round"})]}),o.jsxs("div",{className:"progress-ring-text",children:[o.jsxs("span",{className:"progress-percent",children:[Math.round(kn),"%"]}),o.jsx("span",{className:"progress-label",children:"complete"})]})]}),o.jsxs("div",{className:"progress-stats",children:[o.jsxs("div",{className:"progress-stat",children:[o.jsx("span",{className:"progress-stat-value",children:wt}),o.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),o.jsxs("div",{className:"progress-stat",children:[o.jsx("span",{className:"progress-stat-value",children:Ut}),o.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),o.jsxs("div",{className:"progress-stat",children:[o.jsx("span",{className:"progress-stat-value",children:rt.totalSessions}),o.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),o.jsxs("div",{className:"block-dates",children:[o.jsxs("div",{className:"date-item",children:[o.jsx("span",{className:"date-label",children:"Start Date"}),o.jsx("span",{className:"date-value",children:xe(rt.startDate)})]}),o.jsxs("div",{className:"date-item",children:[o.jsx("span",{className:"date-label",children:"End Date"}),o.jsx("span",{className:"date-value",children:xe(rt.endDate)})]}),o.jsxs("div",{className:"date-item",children:[o.jsx("span",{className:"date-label",children:"Session Duration"}),o.jsxs("span",{className:"date-value",children:[rt.sessionDuration," minutes"]})]})]})]}),X.length>0&&o.jsxs("div",{className:"session-notes-card",ref:Ve,children:[o.jsxs("div",{className:"session-notes-header",children:[o.jsxs("div",{className:"session-notes-title",children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",children:[o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),o.jsx("span",{children:"Session Notes"})]}),o.jsx("span",{className:"session-notes-count",children:X.length})]}),o.jsx("div",{className:"session-notes-list",children:X.slice(0,Ke==="show-all"?void 0:3).map((he,ct)=>o.jsxs("div",{className:`session-note-item ${Ke===he.id?"expanded":""}`,onClick:()=>$e(Ke===he.id?null:he.id),children:[o.jsxs("div",{className:"session-note-top",children:[o.jsx("span",{className:"session-note-date",children:he.date}),o.jsx("svg",{className:`session-note-chevron ${Ke===he.id?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:o.jsx("path",{d:"M6 9l6 6 6-6"})})]}),he.sessionNotes&&o.jsx("p",{className:"session-note-preview",children:Ke===he.id?he.sessionNotes:he.sessionNotes.length>80?he.sessionNotes.slice(0,80)+"...":he.sessionNotes}),Ke===he.id&&o.jsxs("div",{className:"session-note-details",children:[he.whatWentWell&&o.jsxs("div",{className:"session-note-section went-well",children:[o.jsx("span",{className:"session-note-label",children:"What Went Well"}),o.jsx("p",{children:he.whatWentWell})]}),he.whatWentWrong&&o.jsxs("div",{className:"session-note-section went-wrong",children:[o.jsx("span",{className:"session-note-label",children:"What Went Wrong"}),o.jsx("p",{children:he.whatWentWrong})]}),he.whatsNext&&o.jsxs("div",{className:"session-note-section whats-next",children:[o.jsx("span",{className:"session-note-label",children:"What's Next"}),o.jsx("p",{children:he.whatsNext})]})]})]},he.id))}),X.length>3&&Ke===null&&o.jsxs("button",{className:"session-notes-viewall",onClick:()=>$e("show-all"),children:["View all ",X.length," notes",o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),Ke==="show-all"&&X.length>3&&o.jsxs("button",{className:"session-notes-viewall",onClick:()=>$e(null),children:["Show less",o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",style:{transform:"rotate(180deg)"},children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),o.jsxs("div",{className:"quick-actions",children:[o.jsx("button",{className:"forms-btn ripple-btn",onClick:he=>{hn(he),qn("/client/forms")},children:"Forms & Questionnaires"}),o.jsx("button",{className:"tools-btn ripple-btn",onClick:he=>{hn(he),qn("/client/tools")},children:"Tools & Calculators"})]}),o.jsx("div",{className:"quick-actions",style:{marginTop:"-8px"},children:o.jsx("button",{className:"forms-btn ripple-btn",onClick:he=>{hn(he),qn("/client/personal-bests")},style:{flex:"1 1 100%"},children:"Personal Bests & Progress"})}),be.length>0&&o.jsxs("div",{className:"achievements-card",children:[o.jsxs("div",{className:"achievements-card-header",children:[o.jsxs("div",{className:"achievements-card-title",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),o.jsx("span",{children:"Targets Achieved"})]}),o.jsx("span",{className:"achievements-card-count",children:be.length})]}),o.jsx("div",{className:"achievements-card-list",children:[...be].reverse().slice(0,3).map((he,ct)=>o.jsxs("div",{className:"achievements-card-item",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),o.jsx("span",{className:"achievements-card-label",children:he.label}),o.jsx("span",{className:"achievements-card-date",children:he.achievedMonth})]},ct))}),be.length>3&&o.jsxs("button",{className:"achievements-card-viewall",onClick:()=>qn("/client/personal-bests"),children:["View all ",be.length," achievements",o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),Ee?o.jsxs("div",{className:"daily-quote-card",children:[o.jsx("div",{className:"daily-quote-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),o.jsxs("div",{className:"daily-quote-content",children:[o.jsx("div",{className:"daily-quote-text",children:Ee.text}),o.jsxs("div",{className:"daily-quote-author",children:[" ",Ee.author]})]})]}):o.jsxs("div",{className:"daily-quote-cta",onClick:()=>qn("/client/tools/motivation"),children:[o.jsx("div",{className:"daily-quote-cta-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),o.jsxs("div",{className:"daily-quote-cta-text",children:[o.jsx("span",{className:"daily-quote-cta-title",children:"Get More Inspiration"}),o.jsx("span",{className:"daily-quote-cta-sub",children:"Tap to get today's motivation"})]}),o.jsx("svg",{className:"daily-quote-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),o.jsxs("div",{className:"sessions-section",children:[o.jsxs("h3",{children:["Upcoming Sessions (",Xt.length,")"]}),Xt.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:o.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),o.jsx("line",{x1:"20",y1:"35",x2:"80",y2:"35"}),o.jsx("line",{x1:"35",y1:"15",x2:"35",y2:"35"}),o.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"35"}),o.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),o.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),o.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"}),o.jsx("circle",{cx:"60",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"})]})}),o.jsx("h4",{children:"No upcoming sessions"}),o.jsx("p",{children:"Contact your trainer to book sessions"})]}):o.jsx("div",{className:"sessions-list",children:Xt.map(he=>o.jsxs("div",{className:`session-card-wrapper ${ze===he.id?"swiped":""}`,onTouchStart:ct=>jt(ct,he.id),onTouchMove:ct=>_t(ct,he.id),children:[o.jsxs("div",{className:"session-card-swipe-actions",children:[o.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:ct=>{hn(ct),Oe(null),wn(he)},disabled:pn(he.id),children:"Reschedule"}),o.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:ct=>{hn(ct),nn(he)},disabled:P===he.id,children:"Cancel"})]}),o.jsxs("div",{className:`session-card ${ht(he)?"today-session":""}`,onClick:()=>ze===he.id&&Oe(null),children:[o.jsxs("div",{className:"session-info",children:[o.jsxs("div",{className:"session-date",children:[ht(he)&&o.jsx("span",{className:"today-label",children:"Today - "}),yt(he.date)]}),o.jsxs("div",{className:"session-time",children:[ae(he.time)," (",he.duration," min)"]}),pn(he.id)&&o.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),o.jsxs("div",{className:"session-actions",children:[o.jsx("button",{className:"reschedule-btn ripple-btn",onClick:ct=>{ct.stopPropagation(),hn(ct),wn(he)},disabled:pn(he.id),children:"Reschedule"}),o.jsx("button",{className:"cancel-btn ripple-btn",onClick:ct=>{ct.stopPropagation(),hn(ct),nn(he)},disabled:P===he.id,children:P===he.id?"Cancelling...":"Cancel"})]}),o.jsxs("div",{className:"swipe-hint",children:[o.jsx("span",{className:"swipe-hint-text",children:"Swipe"}),o.jsxs("span",{className:"swipe-hint-chevrons",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})]})]})]})]},he.id))})]}),o.jsxs("div",{className:"completed-section",children:[o.jsxs("h3",{children:["Completed Sessions (",wt,")"]}),wt===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("div",{className:"empty-state-icon",children:o.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"50",cy:"50",r:"35"}),o.jsx("path",{d:"M35 50 L45 60 L65 40",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),o.jsx("path",{d:"M50 25 L50 50 L65 55",strokeLinecap:"round",strokeLinejoin:"round"})]})}),o.jsx("h4",{children:"No completed sessions yet"}),o.jsx("p",{children:"Your completed sessions will appear here"})]}):o.jsxs("div",{className:"sessions-list completed",children:[s.filter(he=>lt(he)).slice(-5).reverse().map(he=>o.jsxs("div",{className:"session-card completed",children:[o.jsxs("div",{className:"session-info",children:[o.jsx("div",{className:"session-date",children:yt(he.date)}),o.jsx("div",{className:"session-time",children:ae(he.time)})]}),o.jsx("span",{className:"completed-badge",children:"Completed"})]},he.id)),wt>5&&o.jsxs("div",{className:"more-sessions",children:["And ",wt-5," more completed sessions"]})]})]})]}),F&&G&&o.jsx("div",{className:"modal-overlay",onClick:Gn,children:o.jsxs("div",{className:"reschedule-modal",onClick:he=>he.stopPropagation(),children:[o.jsxs("div",{className:"modal-header",children:[o.jsx("h3",{children:"Reschedule Session"}),o.jsx("button",{className:"close-modal-btn",onClick:Gn,children:""})]}),o.jsxs("div",{className:"modal-body",children:[o.jsx("div",{className:"current-session-info",children:o.jsxs("p",{children:["Current: ",o.jsx("strong",{children:yt(G.date)})," at ",o.jsx("strong",{children:ae(G.time)})]})}),o.jsxs("div",{className:"date-selection",children:[o.jsx("h4",{children:"Select New Date"}),Wt.length===0?o.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):o.jsx("div",{className:"dates-grid",children:Wt.map((he,ct)=>o.jsxs("button",{className:`date-btn ${Y&&to(Y)===to(he)?"selected":""}`,onClick:()=>He(he),children:[o.jsx("span",{className:"date-day",children:he.toLocaleDateString("en-GB",{weekday:"short"})}),o.jsx("span",{className:"date-num",children:he.getDate()}),o.jsx("span",{className:"date-month",children:he.toLocaleDateString("en-GB",{month:"short"})})]},ct))})]}),Y&&o.jsxs("div",{className:"time-selection",children:[o.jsx("h4",{children:"Select Time"}),B.length===0?o.jsx("p",{className:"no-slots",children:"No available slots on this date"}):o.jsx("div",{className:"times-grid",children:B.map((he,ct)=>o.jsx("button",{className:`time-btn ${je===he.time?"selected":""} ${he.period}`,onClick:()=>q(he.time),children:ae(he.time)},ct))})]})]}),o.jsxs("div",{className:"modal-footer",children:[o.jsx("button",{className:"cancel-modal-btn",onClick:Gn,children:"Cancel"}),o.jsx("button",{className:"submit-reschedule-btn",onClick:tt,disabled:!Y||!je||Z,children:Z?"Submitting...":"Request Reschedule"})]})]})}),ke&&o.jsxs("div",{className:`toast-notification ${ke.type}`,children:[o.jsx("span",{className:"toast-icon",children:ke.type==="success"?o.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):ke.type==="error"?o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),o.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),o.jsx("span",{className:"toast-message",children:ke.message}),o.jsx("button",{className:"toast-close",onClick:()=>Ie(null),children:""})]}),de&&o.jsx("div",{className:"confirm-modal-overlay",onClick:de.onCancel,children:o.jsxs("div",{className:"confirm-modal",onClick:he=>he.stopPropagation(),children:[o.jsx("h3",{children:de.title}),o.jsx("p",{children:de.message}),o.jsxs("div",{className:"confirm-modal-actions",children:[o.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:he=>{hn(he),de.onCancel()},children:"Keep Session"}),o.jsx("button",{className:"confirm-btn ripple-btn",onClick:he=>{hn(he),de.onConfirm()},children:"Yes, Cancel"})]})]})}),le&&o.jsx("div",{className:"fab-backdrop",onClick:()=>ge(!1)}),o.jsxs("div",{className:`fab-container ${le?"open":""}`,children:[o.jsx("button",{className:`fab-main ripple-btn ${le?"open":""}`,onClick:he=>{hn(he),ge(!le)},"aria-label":"Quick actions",children:o.jsx("span",{className:"fab-icon",children:"+"})}),o.jsxs("div",{className:"fab-actions",children:[o.jsxs("button",{className:"fab-action ripple-btn",onClick:he=>{hn(he),ge(!1),qn("/client/tools")},children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"Tools & Calculators"]}),o.jsxs("button",{className:"fab-action ripple-btn",onClick:he=>{hn(he),ge(!1),qn("/client/forms")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),o.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Forms & Questionnaires"]}),o.jsxs("button",{className:"fab-action ripple-btn",onClick:he=>{hn(he),ge(!1),qn("/client/personal-bests")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M12 20V10"}),o.jsx("path",{d:"M18 20V4"}),o.jsx("path",{d:"M6 20v-4"})]}),"Personal Bests"]}),X.length>0&&o.jsxs("button",{className:"fab-action ripple-btn",onClick:he=>{hn(he),ge(!1),Ve.current?.scrollIntoView({behavior:"smooth",block:"start"})},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),"Session Notes"]}),rt?.circuitAccess&&o.jsxs("button",{className:"fab-action ripple-btn",onClick:he=>{hn(he),ge(!1),qn("/client/circuit")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 6v6l4 2"})]}),"Circuit Classes"]}),rt?.coreBuddyAccess&&o.jsxs("button",{className:"fab-action ripple-btn",onClick:he=>{hn(he),ge(!1),qn("/client/core-buddy")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),"Core Buddy"]})]})]})]})}function x3(){const[s,e]=I.useState(null),[t,a]=I.useState(!1),{currentUser:i,isClient:c,clientData:u,logout:f,loading:m}=lr(),b=Os(),[T,E]=I.useState({fitnessGoals:"",currentActivityLevel:"",exerciseHistory:"",injuries:"",medicalConditions:"",sleepHours:"",stressLevel:"",dietaryInfo:"",availability:"",additionalInfo:""}),[C,L]=I.useState({q1HeartCondition:!1,q2ChestPain:!1,q3ChestPainLastMonth:!1,q4Balance:!1,q5BoneJoint:!1,q6BloodPressure:!1,q7OtherReason:!1,additionalDetails:"",declaration:!1});I.useEffect(()=>{!m&&(!i||!c)&&b("/")},[i,c,m,b]),I.useEffect(()=>{u?.welcomeForm&&E(u.welcomeForm),u?.parqForm&&L(u.parqForm)},[u]);const P=Y=>{const{name:fe,value:je}=Y.target;E(q=>({...q,[fe]:je}))},V=Y=>{const{name:fe,type:je,checked:q,value:B}=Y.target;L(H=>({...H,[fe]:je==="checkbox"?q:B}))},F=async()=>{a(!0);try{await Es(It(nt,"clients",u.id),{welcomeForm:{...T,completedAt:vt.now()}}),alert("Welcome form saved successfully!"),e(null)}catch(Y){console.error("Error saving welcome form:",Y),alert("Failed to save form. Please try again.")}a(!1)},K=async()=>{if(!C.declaration){alert("Please confirm the declaration to submit the form.");return}a(!0);try{await Es(It(nt,"clients",u.id),{parqForm:{...C,completedAt:vt.now()}}),alert("PAR-Q form saved successfully!"),e(null)}catch(Y){console.error("Error saving PAR-Q form:",Y),alert("Failed to save form. Please try again.")}a(!1)};if(m)return o.jsx("div",{className:"client-loading",children:"Loading..."});if(!i||!c||!u)return null;const G=!!u?.welcomeForm?.completedAt,se=!!u?.parqForm?.completedAt;return o.jsxs("div",{className:"client-forms-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"forms-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>b("/client"),children:" Back"}),s?s==="welcome"?o.jsxs("div",{className:"form-container",children:[o.jsxs("div",{className:"form-header",children:[o.jsx("h2",{children:"Welcome Questionnaire"}),o.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),o.jsxs("div",{className:"form-body",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"What are your main fitness goals?"}),o.jsx("textarea",{name:"fitnessGoals",value:T.fitnessGoals,onChange:P,placeholder:"e.g., Lose weight, build muscle, improve endurance, increase flexibility...",rows:"3"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"How would you describe your current activity level?"}),o.jsxs("select",{name:"currentActivityLevel",value:T.currentActivityLevel,onChange:P,children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),o.jsx("option",{value:"light",children:"Lightly Active (1-2 days/week)"}),o.jsx("option",{value:"moderate",children:"Moderately Active (3-4 days/week)"}),o.jsx("option",{value:"active",children:"Very Active (5+ days/week)"}),o.jsx("option",{value:"athlete",children:"Athlete/Highly Active"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"What is your exercise history?"}),o.jsx("textarea",{name:"exerciseHistory",value:T.exerciseHistory,onChange:P,placeholder:"Describe your previous experience with exercise, sports, or training...",rows:"3"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Do you have any current or past injuries?"}),o.jsx("textarea",{name:"injuries",value:T.injuries,onChange:P,placeholder:"List any injuries that may affect your training...",rows:"2"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Do you have any medical conditions we should know about?"}),o.jsx("textarea",{name:"medicalConditions",value:T.medicalConditions,onChange:P,placeholder:"e.g., Diabetes, asthma, heart conditions...",rows:"2"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"How many hours of sleep do you typically get?"}),o.jsxs("select",{name:"sleepHours",value:T.sleepHours,onChange:P,children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"less-5",children:"Less than 5 hours"}),o.jsx("option",{value:"5-6",children:"5-6 hours"}),o.jsx("option",{value:"7-8",children:"7-8 hours"}),o.jsx("option",{value:"more-8",children:"More than 8 hours"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"How would you rate your current stress level?"}),o.jsxs("select",{name:"stressLevel",value:T.stressLevel,onChange:P,children:[o.jsx("option",{value:"",children:"Select..."}),o.jsx("option",{value:"low",children:"Low"}),o.jsx("option",{value:"moderate",children:"Moderate"}),o.jsx("option",{value:"high",children:"High"}),o.jsx("option",{value:"very-high",children:"Very High"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Tell us about your diet/nutrition"}),o.jsx("textarea",{name:"dietaryInfo",value:T.dietaryInfo,onChange:P,placeholder:"Any dietary restrictions, typical eating habits, nutrition goals...",rows:"3"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"What is your preferred training schedule/availability?"}),o.jsx("textarea",{name:"availability",value:T.availability,onChange:P,placeholder:"Days and times that work best for you...",rows:"2"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Anything else you'd like us to know?"}),o.jsx("textarea",{name:"additionalInfo",value:T.additionalInfo,onChange:P,placeholder:"Any other information that might be helpful...",rows:"3"})]}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),o.jsx("button",{className:"save-btn",onClick:F,disabled:t,children:t?"Saving...":"Save"})]})]})]}):o.jsxs("div",{className:"form-container",children:[o.jsxs("div",{className:"form-header",children:[o.jsx("h2",{children:"PAR-Q Health Screening"}),o.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),o.jsxs("div",{className:"form-body",children:[o.jsx("div",{className:"parq-intro",children:o.jsx("p",{children:"The Physical Activity Readiness Questionnaire (PAR-Q) is designed to identify those who should check with a doctor before starting an exercise program."})}),o.jsxs("div",{className:"parq-questions",children:[o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q1HeartCondition",checked:C.q1HeartCondition,onChange:V}),o.jsx("span",{children:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q2ChestPain",checked:C.q2ChestPain,onChange:V}),o.jsx("span",{children:"Do you feel pain in your chest when you do physical activity?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q3ChestPainLastMonth",checked:C.q3ChestPainLastMonth,onChange:V}),o.jsx("span",{children:"In the past month, have you had chest pain when you were not doing physical activity?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q4Balance",checked:C.q4Balance,onChange:V}),o.jsx("span",{children:"Do you lose your balance because of dizziness or do you ever lose consciousness?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q5BoneJoint",checked:C.q5BoneJoint,onChange:V}),o.jsx("span",{children:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q6BloodPressure",checked:C.q6BloodPressure,onChange:V}),o.jsx("span",{children:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"})]})}),o.jsx("div",{className:"parq-question",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"q7OtherReason",checked:C.q7OtherReason,onChange:V}),o.jsx("span",{children:"Do you know of any other reason why you should not do physical activity?"})]})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"If you answered YES to any questions, please provide details:"}),o.jsx("textarea",{name:"additionalDetails",value:C.additionalDetails,onChange:V,placeholder:"Please explain any conditions or concerns...",rows:"4"})]}),o.jsx("div",{className:"parq-declaration",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"declaration",checked:C.declaration,onChange:V}),o.jsx("span",{children:"I have read, understood and completed this questionnaire. Any questions I had were answered to my full satisfaction. I confirm that the information provided is accurate to the best of my knowledge."})]})}),o.jsxs("div",{className:"form-actions",children:[o.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),o.jsx("button",{className:"save-btn",onClick:K,disabled:t,children:t?"Saving...":"Submit"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"forms-intro",children:[o.jsx("h2",{children:"Forms"}),o.jsx("p",{children:"Please complete these forms to help us better understand your fitness journey and ensure your safety."})]}),o.jsxs("div",{className:"forms-list",children:[o.jsxs("div",{className:`form-card ${G?"completed":""}`,children:[o.jsxs("div",{className:"form-card-info",children:[o.jsx("h3",{children:"Welcome Questionnaire"}),o.jsx("p",{children:"Tell us about your fitness goals, experience, and lifestyle."}),G&&o.jsx("span",{className:"completed-badge",children:"Completed"})]}),o.jsx("button",{onClick:()=>e("welcome"),children:G?"View / Edit":"Start"})]}),o.jsxs("div",{className:`form-card ${se?"completed":""}`,children:[o.jsxs("div",{className:"form-card-info",children:[o.jsx("h3",{children:"PAR-Q Health Screening"}),o.jsx("p",{children:"Physical Activity Readiness Questionnaire for your safety."}),se&&o.jsx("span",{className:"completed-badge",children:"Completed"})]}),o.jsx("button",{onClick:()=>e("parq"),children:se?"View / Edit":"Start"})]})]})]})]})]})}function _3(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),i=Os();return I.useEffect(()=>{!a&&(!s||!e)&&i("/")},[s,e,a,i]),a?o.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:o.jsxs("div",{className:"client-tools-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"tools-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>i("/client"),children:" Back"}),o.jsxs("div",{className:"tools-intro",children:[o.jsx("h2",{children:"Tools"}),o.jsx("p",{children:"Use these tools to help plan your nutrition and stay motivated."})]}),o.jsxs("div",{className:"tools-grid",children:[o.jsxs("div",{className:"tool-select-card",onClick:()=>i("/client/tools/macros"),children:[o.jsx("div",{className:"tool-select-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[o.jsx("path",{d:"M4 6h16M4 12h16M4 18h7"}),o.jsx("circle",{cx:"17",cy:"18",r:"3"}),o.jsx("path",{d:"M17 15v6M14 18h6"})]})}),o.jsxs("div",{className:"tool-select-info",children:[o.jsx("h3",{children:"Macro Calculator"}),o.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),o.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),o.jsxs("div",{className:"tool-select-card",onClick:()=>i("/client/tools/snacks"),children:[o.jsx("div",{className:"tool-select-icon snack-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[o.jsx("path",{d:"M18 8h1a4 4 0 010 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),o.jsxs("div",{className:"tool-select-info",children:[o.jsx("h3",{children:"Protein Snack Generator"}),o.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),o.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),o.jsxs("div",{className:"tool-select-card",onClick:()=>i("/client/tools/motivation"),children:[o.jsx("div",{className:"tool-select-icon quote-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),o.jsxs("div",{className:"tool-select-info",children:[o.jsx("h3",{children:"Daily Motivation"}),o.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),o.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]})]})]})}function w3(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),i=Os(),[c,u]=I.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[f,m]=I.useState(null),[b,T]=I.useState(!1);I.useEffect(()=>{!a&&(!s||!e)&&i("/")},[s,e,a,i]);const E=V=>{const{name:F,value:K}=V.target;u(G=>({...G,[F]:K})),T(!1)},C=()=>{let V=parseFloat(c.weight);c.weightUnit==="lbs"&&(V=V*.453592);let F;if(c.heightUnit==="cm")F=parseFloat(c.height);else{const Ie=parseFloat(c.heightFeet)||0,te=parseFloat(c.heightInches)||0;F=Ie*30.48+te*2.54}const K=parseInt(c.age);let G;c.gender==="male"?G=10*V+6.25*F-5*K+5:G=10*V+6.25*F-5*K-161;const Y=G*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[c.activityLevel];let fe=Y,je,q;switch(c.goal){case"lose":fe=Y-{light:250,moderate:500,harsh:750}[c.deficitLevel],je=2.2,q=.3;break;case"build":fe=Y+300,je=2,q=.22;break;default:je=1.8,q=.25;break}const B=c.gender==="male"?1500:1200;fe=Math.max(fe,B);const H=Math.round(V*je),Z=H*4,$=fe*q,ee=Math.round($/9),O=fe-Z-$,ke=Math.max(0,Math.round(O/4));m({bmr:Math.round(G),tdee:Math.round(Y),targetCalories:Math.round(fe),protein:H,carbs:ke,fats:ee,proteinCalories:Math.round(Z),carbCalories:Math.round(O),fatCalories:Math.round($)}),T(!0)},L=()=>{const V=c.weight&&parseFloat(c.weight)>0,F=c.age&&parseInt(c.age)>0;let K;return c.heightUnit==="cm"?K=c.height&&parseFloat(c.height)>0:K=c.heightFeet&&parseFloat(c.heightFeet)>0||c.heightInches&&parseFloat(c.heightInches)>0,V&&F&&K},P=()=>{switch(c.goal){case"lose":return"Weight Loss";case"build":return"Muscle Building";default:return"Maintenance"}};return a?o.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:o.jsxs("div",{className:"client-tools-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"tools-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>i("/client/tools"),children:" Back to Tools"}),o.jsxs("div",{className:"tool-card",children:[o.jsxs("div",{className:"tool-header",children:[o.jsx("h3",{children:"Macro Calculator"}),o.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),o.jsxs("div",{className:"calculator-form",children:[o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Gender"}),o.jsxs("div",{className:"toggle-group",children:[o.jsx("button",{type:"button",className:c.gender==="male"?"active":"",onClick:()=>{u(V=>({...V,gender:"male"})),T(!1)},children:"Male"}),o.jsx("button",{type:"button",className:c.gender==="female"?"active":"",onClick:()=>{u(V=>({...V,gender:"female"})),T(!1)},children:"Female"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Age"}),o.jsx("input",{type:"number",name:"age",value:c.age,onChange:E,placeholder:"Years",min:"15",max:"100"})]})]}),o.jsxs("div",{className:"form-row",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Weight"}),o.jsxs("div",{className:"input-with-unit",children:[o.jsx("input",{type:"number",name:"weight",value:c.weight,onChange:E,placeholder:c.weightUnit==="kg"?"kg":"lbs",min:"30",max:"300"}),o.jsxs("div",{className:"unit-toggle",children:[o.jsx("button",{type:"button",className:c.weightUnit==="kg"?"active":"",onClick:()=>{u(V=>({...V,weightUnit:"kg"})),T(!1)},children:"kg"}),o.jsx("button",{type:"button",className:c.weightUnit==="lbs"?"active":"",onClick:()=>{u(V=>({...V,weightUnit:"lbs"})),T(!1)},children:"lbs"})]})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Height"}),o.jsxs("div",{className:"input-with-unit",children:[c.heightUnit==="cm"?o.jsx("input",{type:"number",name:"height",value:c.height,onChange:E,placeholder:"cm",min:"100",max:"250"}):o.jsxs("div",{className:"height-imperial",children:[o.jsx("input",{type:"number",name:"heightFeet",value:c.heightFeet,onChange:E,placeholder:"ft",min:"4",max:"7"}),o.jsx("input",{type:"number",name:"heightInches",value:c.heightInches,onChange:E,placeholder:"in",min:"0",max:"11"})]}),o.jsxs("div",{className:"unit-toggle",children:[o.jsx("button",{type:"button",className:c.heightUnit==="cm"?"active":"",onClick:()=>{u(V=>({...V,heightUnit:"cm"})),T(!1)},children:"cm"}),o.jsx("button",{type:"button",className:c.heightUnit==="ft"?"active":"",onClick:()=>{u(V=>({...V,heightUnit:"ft"})),T(!1)},children:"ft/in"})]})]})]})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{children:"Activity Level"}),o.jsxs("select",{name:"activityLevel",value:c.activityLevel,onChange:E,children:[o.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),o.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),o.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),o.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),o.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{children:"Fitness Goal"}),o.jsxs("div",{className:"goal-options",children:[o.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="lose"?"active":""}`,onClick:()=>{u(V=>({...V,goal:"lose"})),T(!1)},children:[o.jsx("span",{className:"goal-icon",children:"-"}),o.jsx("span",{children:"Lose Weight"})]}),o.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="maintain"?"active":""}`,onClick:()=>{u(V=>({...V,goal:"maintain"})),T(!1)},children:[o.jsx("span",{className:"goal-icon",children:"="}),o.jsx("span",{children:"Maintain"})]}),o.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="build"?"active":""}`,onClick:()=>{u(V=>({...V,goal:"build"})),T(!1)},children:[o.jsx("span",{className:"goal-icon",children:"+"}),o.jsx("span",{children:"Build Muscle"})]})]})]}),c.goal==="lose"&&o.jsxs("div",{className:"form-group full-width deficit-section",children:[o.jsx("label",{children:"Calorie Deficit Level"}),o.jsxs("div",{className:"deficit-options",children:[o.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="light"?"active":""}`,onClick:()=>{u(V=>({...V,deficitLevel:"light"})),T(!1)},children:[o.jsx("span",{className:"deficit-name",children:"Light"}),o.jsx("span",{className:"deficit-desc",children:"-250 cal/day"}),o.jsx("span",{className:"deficit-rate",children:"~0.5 lb/week"})]}),o.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="moderate"?"active":""}`,onClick:()=>{u(V=>({...V,deficitLevel:"moderate"})),T(!1)},children:[o.jsx("span",{className:"deficit-name",children:"Moderate"}),o.jsx("span",{className:"deficit-desc",children:"-500 cal/day"}),o.jsx("span",{className:"deficit-rate",children:"~1 lb/week"})]}),o.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="harsh"?"active":""}`,onClick:()=>{u(V=>({...V,deficitLevel:"harsh"})),T(!1)},children:[o.jsx("span",{className:"deficit-name",children:"Aggressive"}),o.jsx("span",{className:"deficit-desc",children:"-750 cal/day"}),o.jsx("span",{className:"deficit-rate",children:"~1.5 lb/week"})]})]})]}),o.jsx("button",{className:"calculate-btn",onClick:C,disabled:!L(),children:"Calculate Macros"})]}),b&&f&&(()=>{const V=f.proteinCalories+f.carbCalories+f.fatCalories,F=Math.round(f.proteinCalories/V*100),K=Math.round(f.carbCalories/V*100),G=100-F-K;return o.jsxs("div",{className:"results-section",children:[o.jsxs("div",{className:"results-header",children:[o.jsx("h4",{children:"Your Daily Targets"}),o.jsx("span",{className:"goal-badge",children:P()})]}),o.jsxs("div",{className:"calories-display",children:[o.jsx("span",{className:"calories-value",children:f.targetCalories}),o.jsx("span",{className:"calories-label",children:"calories/day"})]}),o.jsxs("div",{className:"macro-percentage-bar",children:[o.jsxs("div",{className:"macro-bar-track",children:[o.jsx("div",{className:"macro-bar-segment protein",style:{width:`${F}%`},children:F>=12&&o.jsxs("span",{children:[F,"%"]})}),o.jsx("div",{className:"macro-bar-segment carbs",style:{width:`${K}%`},children:K>=12&&o.jsxs("span",{children:[K,"%"]})}),o.jsx("div",{className:"macro-bar-segment fats",style:{width:`${G}%`},children:G>=12&&o.jsxs("span",{children:[G,"%"]})})]}),o.jsxs("div",{className:"macro-bar-legend",children:[o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-dot protein"}),"Protein ",F,"%"]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-dot carbs"}),"Carbs ",K,"%"]}),o.jsxs("div",{className:"legend-item",children:[o.jsx("span",{className:"legend-dot fats"}),"Fats ",G,"%"]})]})]}),o.jsxs("div",{className:"macros-grid",children:[o.jsxs("div",{className:"macro-card protein",style:{animationDelay:"0.1s"},children:[o.jsxs("div",{className:"macro-value",children:[f.protein,"g"]}),o.jsx("div",{className:"macro-label",children:"Protein"}),o.jsxs("div",{className:"macro-calories",children:[f.proteinCalories," cal"]})]}),o.jsxs("div",{className:"macro-card carbs",style:{animationDelay:"0.2s"},children:[o.jsxs("div",{className:"macro-value",children:[f.carbs,"g"]}),o.jsx("div",{className:"macro-label",children:"Carbs"}),o.jsxs("div",{className:"macro-calories",children:[f.carbCalories," cal"]})]}),o.jsxs("div",{className:"macro-card fats",style:{animationDelay:"0.3s"},children:[o.jsxs("div",{className:"macro-value",children:[f.fats,"g"]}),o.jsx("div",{className:"macro-label",children:"Fats"}),o.jsxs("div",{className:"macro-calories",children:[f.fatCalories," cal"]})]})]}),o.jsxs("div",{className:"results-info",children:[o.jsxs("div",{className:"info-row",children:[o.jsx("span",{children:"Basal Metabolic Rate (BMR)"}),o.jsxs("span",{className:"info-value",children:[f.bmr," cal"]})]}),o.jsxs("div",{className:"info-row",children:[o.jsx("span",{children:"Total Daily Energy Expenditure (TDEE)"}),o.jsxs("span",{className:"info-value",children:[f.tdee," cal"]})]})]}),o.jsx("div",{className:"results-note",children:o.jsx("p",{children:"These are estimated values. Individual results may vary based on metabolism, body composition, and other factors. Consult with your trainer for personalized guidance."})})]})})()]})]})]})}const t_=[{name:"Greek Yoghurt & Honey",protein:20,calories:180,prep:0,category:"no-prep",instructions:"Grab a pot of Greek yoghurt, drizzle with honey. Done. Go for full-fat or 0% depending on your macros."},{name:"Protein Bar",protein:20,calories:220,prep:0,category:"no-prep",instructions:"Unwrap and eat. Keep one in your bag for emergencies. Look for bars with 20g+ protein and under 5g sugar."},{name:"Beef Jerky",protein:15,calories:120,prep:0,category:"no-prep",instructions:"Open the pack and snack. Great for on the go. Check the label  some brands are loaded with sugar."},{name:"Handful of Almonds",protein:7,calories:170,prep:0,category:"no-prep",instructions:"Grab about 30g (roughly 23 almonds). Good fats and protein. Keep a bag at your desk or in your car."},{name:"Boiled Eggs (x2)",protein:12,calories:140,prep:0,category:"no-prep",instructions:"Batch boil at the start of the week  10 mins in boiling water, cool in ice water, peel and store in the fridge. Grab 2 when you need them."},{name:"String Cheese (x2)",protein:14,calories:160,prep:0,category:"no-prep",instructions:"Peel and eat. Keep a few in the fridge for quick grabs. Pair with some fruit if you want extra carbs."},{name:"Cottage Cheese Pot",protein:14,calories:110,prep:0,category:"no-prep",instructions:"Eat straight from the pot. Add a pinch of salt and pepper, or keep it sweet with a drizzle of honey."},{name:"Edamame Beans",protein:11,calories:120,prep:0,category:"no-prep",instructions:"Buy pre-cooked and shelled from the supermarket. Sprinkle with sea salt or chilli flakes. Eat cold or warm in the microwave for 1 min."},{name:"Turkey Slices (50g)",protein:12,calories:60,prep:0,category:"no-prep",instructions:"Straight from the pack. Roll up a few slices on their own or wrap around some cheese for extra protein."},{name:"Roasted Chickpeas",protein:10,calories:160,prep:0,category:"no-prep",instructions:"Buy a bag of roasted chickpeas or make a batch: drain tinned chickpeas, toss in oil and spices, roast at 200C for 25 mins. Store in a jar."},{name:"Protein Shake & Banana",protein:30,calories:280,prep:1,category:"quick",instructions:"Add one scoop of protein powder to 300ml water or milk in a shaker. Shake for 10 seconds. Eat a banana on the side."},{name:"Peanut Butter on Rice Cakes",protein:14,calories:260,prep:1,category:"quick",instructions:"Spread 1-2 tablespoons of peanut butter across 2 rice cakes. Top with sliced banana or a drizzle of honey if you want."},{name:"Greek Yoghurt & Granola",protein:22,calories:300,prep:1,category:"quick",instructions:"Scoop Greek yoghurt into a bowl. Top with a handful of granola and some berries. Use high-protein granola if you can find it."},{name:"Turkey & Cream Cheese Roll-Ups",protein:18,calories:180,prep:2,category:"quick",instructions:"Lay out 3-4 turkey slices. Spread a thin layer of cream cheese on each. Roll them up. Add cucumber or spinach inside for crunch."},{name:"Cottage Cheese & Pineapple",protein:15,calories:160,prep:1,category:"quick",instructions:"Scoop cottage cheese into a bowl, top with tinned or fresh pineapple chunks. The sweet and savoury combo works surprisingly well."},{name:"Ham & Cheese Wrap",protein:22,calories:320,prep:2,category:"quick",instructions:"Lay a tortilla flat. Add 2-3 ham slices and a slice of cheese. Add lettuce or spinach if you have it. Roll up tight and eat."},{name:"Tuna & Crackers",protein:20,calories:220,prep:2,category:"quick",instructions:"Drain a small tin of tuna, mix with a squeeze of lemon and black pepper. Spoon onto 4-5 crackers. Add hot sauce if you like it."},{name:"Protein Yoghurt Bowl",protein:25,calories:250,prep:1,category:"quick",instructions:"Mix a scoop of protein powder into Greek yoghurt until smooth. Top with berries, nuts, or a drizzle of honey."},{name:"Hummus & Veggie Sticks",protein:8,calories:180,prep:1,category:"quick",instructions:"Grab a pot of hummus and chop up carrots, cucumber, and peppers into sticks. Dip and eat. Simple."},{name:"Chocolate Milk (500ml)",protein:17,calories:340,prep:1,category:"quick",instructions:"Pour 500ml milk, stir in 2 tablespoons of chocolate protein powder or cocoa. Great post-workout  the carbs help recovery."},{name:"Peanut Butter & Apple Slices",protein:10,calories:250,prep:1,category:"quick",instructions:"Slice an apple into wedges. Dip into 1-2 tablespoons of peanut butter. Sweet, crunchy, and filling."},{name:"Overnight Oats (pre-made)",protein:18,calories:310,prep:1,category:"quick",instructions:"Prep the night before: mix 50g oats, 1 scoop protein powder, 150ml milk, and a handful of berries in a jar. Refrigerate overnight. Grab and eat cold."},{name:"Smoked Salmon on Crackers",protein:16,calories:200,prep:2,category:"quick",instructions:"Lay out 4-5 crackers. Top each with a slice of smoked salmon and a small squeeze of lemon. Add cream cheese if you want extra."},{name:"Protein Smoothie Bowl",protein:28,calories:350,prep:2,category:"quick",instructions:"Blend 1 scoop protein powder, 1 frozen banana, and a splash of milk until thick. Pour into a bowl. Top with granola, berries, and seeds."},{name:"Almond Butter & Banana Toast",protein:12,calories:280,prep:2,category:"quick",instructions:"Toast a slice of wholemeal bread. Spread with almond butter. Slice half a banana on top. Sprinkle with cinnamon."},{name:"Scrambled Eggs on Toast",protein:22,calories:320,prep:4,category:"cook",instructions:"Crack 3 eggs into a pan on medium-low heat. Stir continuously with a spatula until just set  keep them soft. Season with salt and pepper, serve on wholemeal toast."},{name:"Protein Pancake Mug Cake",protein:25,calories:280,prep:3,category:"cook",instructions:"Mix 1 scoop protein powder, 1 egg, and 2 tablespoons of oats in a mug. Microwave for 90 seconds. Top with peanut butter or berries."},{name:"Tuna Mayo on Toast",protein:24,calories:340,prep:3,category:"cook",instructions:"Drain a tin of tuna, mix with 1 tablespoon of light mayo, salt, pepper, and a squeeze of lemon. Toast 2 slices of bread. Pile the tuna on top."},{name:"Egg & Cheese Muffin",protein:18,calories:300,prep:4,category:"cook",instructions:"Fry or microwave an egg. Toast an English muffin. Layer the egg with a slice of cheese and optionally a slice of ham. Press together."},{name:"Chicken Quesadilla",protein:26,calories:380,prep:5,category:"cook",instructions:"Use leftover chicken or pre-cooked slices. Lay a tortilla in a dry pan on medium heat. Add chicken and grated cheese on one half. Fold over, cook 2 mins each side until golden and melted."},{name:"Beans on Toast",protein:16,calories:340,prep:3,category:"cook",instructions:"Heat a tin of baked beans in the microwave for 2 mins, stirring halfway. Toast 2 slices of wholemeal bread. Pour beans on top. Add grated cheese for extra protein."},{name:"Omelette (2 eggs)",protein:14,calories:180,prep:4,category:"cook",instructions:"Beat 2 eggs with salt and pepper. Pour into a hot, lightly oiled pan. Swirl to cover the base. Add fillings (cheese, ham, peppers) when the edges set. Fold in half and serve."},{name:"Protein Porridge",protein:28,calories:380,prep:4,category:"cook",instructions:"Cook 50g oats with 250ml milk in a pan or microwave (3 mins). Stir in 1 scoop of protein powder once it cools slightly. Top with banana and a drizzle of honey."},{name:"Cheese Toastie",protein:16,calories:350,prep:3,category:"cook",instructions:"Butter the outside of 2 slices of bread. Place cheese (and ham if you have it) between the unbuttered sides. Cook in a dry pan on medium heat, 2 mins each side until golden."},{name:"Egg Fried Rice (leftover rice)",protein:16,calories:360,prep:5,category:"cook",instructions:"Heat a splash of oil in a pan on high heat. Add leftover cold rice and stir-fry for 2 mins. Push to one side, crack in 2 eggs and scramble. Mix together, add soy sauce to taste."}];function S3(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),i=Os(),[c,u]=I.useState(null),[f,m]=I.useState("all"),[b,T]=I.useState(!1),E=I.useRef([]);I.useEffect(()=>{!a&&(!s||!e)&&i("/")},[s,e,a,i]);const C=F=>{const K=[...F];for(let G=K.length-1;G>0;G--){const se=Math.floor(Math.random()*(G+1));[K[G],K[se]]=[K[se],K[G]]}return K},L=()=>{const F=f==="all"?t_:t_.filter(K=>K.category===f);E.current.length===0&&(E.current=C(F)),T(!0),setTimeout(()=>{const K=E.current.pop();u(K),T(!1)},300)},P=F=>F===0?"No prep":`${F} min`,V=F=>{switch(F){case"no-prep":return"Grab & Go";case"quick":return"Quick Prep";case"cook":return"Light Cook";default:return F}};return a?o.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:o.jsxs("div",{className:"client-tools-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"tools-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>i("/client/tools"),children:" Back to Tools"}),o.jsxs("div",{className:"tool-card",children:[o.jsxs("div",{className:"tool-header",children:[o.jsx("h3",{children:"Protein Snack Generator"}),o.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),o.jsxs("div",{className:"snack-generator",children:[o.jsx("div",{className:"snack-filters",children:[{value:"all",label:"All"},{value:"no-prep",label:"Grab & Go"},{value:"quick",label:"Quick Prep"},{value:"cook",label:"Light Cook"}].map(F=>o.jsx("button",{className:`snack-filter-btn ${f===F.value?"active":""}`,onClick:()=>{m(F.value),u(null),E.current=[]},children:F.label},F.value))}),c&&!b&&o.jsxs("div",{className:"snack-result",children:[o.jsx("div",{className:"snack-name",children:c.name}),o.jsxs("div",{className:"snack-details",children:[o.jsxs("div",{className:"snack-detail",children:[o.jsxs("span",{className:"snack-detail-value",children:[c.protein,"g"]}),o.jsx("span",{className:"snack-detail-label",children:"Protein"})]}),o.jsxs("div",{className:"snack-detail",children:[o.jsx("span",{className:"snack-detail-value",children:c.calories}),o.jsx("span",{className:"snack-detail-label",children:"Calories"})]}),o.jsxs("div",{className:"snack-detail",children:[o.jsx("span",{className:"snack-detail-value",children:P(c.prep)}),o.jsx("span",{className:"snack-detail-label",children:"Prep Time"})]})]}),o.jsxs("div",{className:"snack-prep-indicator",children:[o.jsx("div",{className:`prep-dot ${c.category==="no-prep"||c.category==="quick"||c.category==="cook"?"active":""}`}),o.jsx("div",{className:`prep-dot ${c.category==="quick"||c.category==="cook"?"active":""}`}),o.jsx("div",{className:`prep-dot ${c.category==="cook"?"active":""}`}),o.jsx("span",{className:"prep-indicator-label",children:V(c.category)})]}),o.jsxs("div",{className:"snack-instructions",children:[o.jsx("div",{className:"snack-instructions-label",children:"How to make it"}),o.jsx("p",{children:c.instructions})]})]}),b&&o.jsx("div",{className:"snack-result shuffling",children:o.jsx("div",{className:"snack-shuffle-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"})})})}),o.jsx("button",{className:"snack-generate-btn",onClick:L,children:c?"Give Me Another":"Give Me a Snack"})]})]})]})]})}const bg=[{text:"The only bad workout is the one that didn't happen.",author:"Unknown"},{text:"Your body can stand almost anything. It's your mind that you have to convince.",author:"Unknown"},{text:"Discipline is choosing between what you want now and what you want most.",author:"Abraham Lincoln"},{text:"The pain you feel today will be the strength you feel tomorrow.",author:"Unknown"},{text:"Don't wish for it. Work for it.",author:"Unknown"},{text:"Success isn't always about greatness. It's about consistency.",author:"Dwayne Johnson"},{text:"The harder you work, the luckier you get.",author:"Gary Player"},{text:"Fall seven times, stand up eight.",author:"Japanese Proverb"},{text:"What seems impossible today will one day become your warm-up.",author:"Unknown"},{text:"You don't have to be extreme, just consistent.",author:"Unknown"},{text:"Strength does not come from the body. It comes from the will.",author:"Unknown"},{text:"The only way to define your limits is by going beyond them.",author:"Arthur C. Clarke"},{text:"Motivation gets you started. Habit keeps you going.",author:"Jim Ryun"},{text:"If it doesn't challenge you, it doesn't change you.",author:"Fred DeVito"},{text:"Progress, not perfection.",author:"Unknown"},{text:"The best project you'll ever work on is you.",author:"Unknown"},{text:"A year from now you'll wish you had started today.",author:"Karen Lamb"},{text:"You are one workout away from a good mood.",author:"Unknown"},{text:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{text:"The body achieves what the mind believes.",author:"Unknown"},{text:"Small daily improvements are the key to staggering long-term results.",author:"Unknown"},{text:"It's not about having time. It's about making time.",author:"Unknown"},{text:"Sore today, strong tomorrow.",author:"Unknown"},{text:"Champions keep playing until they get it right.",author:"Billie Jean King"},{text:"Be stronger than your excuses.",author:"Unknown"},{text:"When you feel like quitting, think about why you started.",author:"Unknown"},{text:"The difference between try and triumph is a little umph.",author:"Marvin Phillips"},{text:"Your only limit is you.",author:"Unknown"},{text:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{text:"Making excuses burns zero calories per hour.",author:"Unknown"},{text:"Results happen over time, not overnight. Work hard, stay consistent, and be patient.",author:"Unknown"},{text:"You don't find willpower, you create it.",author:"Unknown"},{text:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{text:"Sweat is just fat crying.",author:"Unknown"},{text:"Today I will do what others won't, so tomorrow I can do what others can't.",author:"Jerry Rice"},{text:"The only person you are destined to become is the person you decide to be.",author:"Ralph Waldo Emerson"},{text:"Don't count the days, make the days count.",author:"Muhammad Ali"},{text:"It never gets easier, you just get stronger.",author:"Unknown"},{text:"Suffer the pain of discipline or suffer the pain of regret.",author:"Jim Rohn"},{text:"Strive for progress, not perfection.",author:"Unknown"},{text:"Your health is an investment, not an expense.",author:"Unknown"},{text:"Action is the foundational key to all success.",author:"Pablo Picasso"},{text:"Good things come to those who sweat.",author:"Unknown"},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"No matter how slow you go, you're still lapping everyone on the couch.",author:"Unknown"},{text:"Train insane or remain the same.",author:"Unknown"},{text:"The hardest step is the first one out the door.",author:"Unknown"},{text:"Work hard in silence, let your results be the noise.",author:"Frank Ocean"},{text:"Every champion was once a contender who refused to give up.",author:"Rocky Balboa"},{text:"Take care of your body. It's the only place you have to live.",author:"Jim Rohn"},{text:"Energy and persistence conquer all things.",author:"Benjamin Franklin"},{text:"The mind is the most important muscle.",author:"Unknown"},{text:"You are stronger than you think.",author:"Unknown"},{text:"Obsessed is a word the lazy use to describe the dedicated.",author:"Unknown"},{text:"The only weight you need to lose is the weight of your doubts.",author:"Unknown"}];function T3(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),i=Os(),[c,u]=I.useState(null),[f,m]=I.useState(!0),[b,T]=I.useState(!1);I.useEffect(()=>{!a&&(!s||!e)&&i("/")},[s,e,a,i]),I.useEffect(()=>{t&&E()},[t]);const E=async()=>{try{const L=new Date().toISOString().split("T")[0],P=It(nt,"clients",t.id),V=await _i(P);if(V.exists()){const F=V.data();F.dailyQuote&&F.dailyQuote.date===L&&u(F.dailyQuote)}}catch(L){console.error("Error loading daily quote:",L)}m(!1)},C=async()=>{if(c)return;T(!0);const L=new Date().toISOString().split("T")[0];let P=[];try{const Y=await _i(It(nt,"clients",t.id));Y.exists()&&(P=Y.data().quoteUsedIndices||[])}catch{}P.length>=bg.length&&(P=[]);const V=bg.map((Y,fe)=>fe).filter(Y=>!P.includes(Y)),F=Math.floor(Math.random()*V.length),K=V[F],G=bg[K],se={text:G.text,author:G.author,date:L};try{await Pa(It(nt,"clients",t.id),{dailyQuote:se,quoteUsedIndices:[...P,K]},{merge:!0}),setTimeout(()=>{u(se),T(!1)},300)}catch(Y){console.error("Error saving daily quote:",Y),T(!1)}};return a?o.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:o.jsxs("div",{className:"client-tools-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"tools-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>i("/client/tools"),children:" Back to Tools"}),o.jsxs("div",{className:"tool-card",children:[o.jsxs("div",{className:"tool-header",children:[o.jsx("h3",{children:"Daily Motivation"}),o.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),o.jsxs("div",{className:"quote-generator",children:[f?o.jsxs("div",{className:"quote-skeleton",children:[o.jsx("div",{className:"skeleton-icon"}),o.jsx("div",{className:"skeleton-line long"}),o.jsx("div",{className:"skeleton-line medium"}),o.jsx("div",{className:"skeleton-line short"})]}):c?o.jsxs("div",{className:"quote-result",children:[o.jsx("div",{className:"quote-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),o.jsx("div",{className:"quote-text",children:c.text}),o.jsxs("div",{className:"quote-author",children:[" ",c.author]}),o.jsx("div",{className:"quote-date-note",children:"Your inspiration for today"})]}):b?o.jsx("div",{className:"quote-result shuffling",children:o.jsx("div",{className:"quote-shuffle-icon",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("path",{d:"M12 6v6l4 2"})]})})}):o.jsxs("div",{className:"quote-empty",children:[o.jsx("div",{className:"quote-empty-graphic",children:o.jsxs("svg",{viewBox:"0 0 80 80",fill:"none",children:[o.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"var(--border-color)",strokeWidth:"2",strokeDasharray:"4 4"}),o.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",fill:"var(--color-primary)",opacity:"0.2"}),o.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",stroke:"var(--color-primary)",strokeWidth:"1.5"})]})}),o.jsx("h4",{className:"quote-empty-title",children:"Your Daily Inspiration"}),o.jsx("p",{children:"Tap below to reveal today's motivational quote  a new one every day to keep you going."})]}),!c&&!f&&o.jsx("button",{className:"quote-generate-btn",onClick:C,disabled:b,children:b?"Finding your quote...":"Get Inspired"})]})]})]})]})}const Ia=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],ql=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function E3(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Oa(s){const[e,t]=s.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function gf(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),t=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function n_(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function Fc(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function xg(s,e){return!e||e===0?null:(s-e)/e*100}function N3({data:s,exerciseKey:e,unit:t}){if(!s||s.length<2)return o.jsx("div",{className:"pb-trend-empty",children:o.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(V=>{const F=V.benchmarks?.[e];return F?t==="time"?F.time||0:(F.weight||0)*(F.reps||0):0}),i=Math.max(...a),c=Math.min(...a),u=i-c||1,f=300,m=100,b=20,T=f-b*2,E=m-b*2,C=a.map((V,F)=>{const K=b+F/(a.length-1)*T,G=b+E-(V-c)/u*E;return{x:K,y:G,value:V}}),L=C.map((V,F)=>`${F===0?"M":"L"} ${V.x} ${V.y}`).join(" "),P=L+` L ${C[C.length-1].x} ${b+E} L ${C[0].x} ${b+E} Z`;return o.jsxs("div",{className:"pb-trend-chart",children:[o.jsxs("svg",{viewBox:`0 0 ${f} ${m}`,preserveAspectRatio:"xMidYMid meet",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),o.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),o.jsx("path",{d:P,fill:"url(#trendGradient)"}),o.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),C.map((V,F)=>o.jsx("circle",{cx:V.x,cy:V.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},F))]}),o.jsx("div",{className:"pb-trend-labels",children:s.map((V,F)=>o.jsxs("span",{className:"pb-trend-label",children:[V.month.split("-")[1],"/",V.month.split("-")[0].slice(2)]},F))})]})}function j3(){const[s,e]=I.useState("bests"),[t,a]=I.useState([]),[i,c]=I.useState(!0),[u,f]=I.useState(!1),[m,b]=I.useState(0),[T,E]=I.useState(!1),[C,L]=I.useState(!1),[P,V]=I.useState(!1),[F,K]=I.useState({}),[G,se]=I.useState({}),[Y,fe]=I.useState({}),[je,q]=I.useState({}),[B,H]=I.useState({}),[Z,$]=I.useState(!1),[ee,O]=I.useState({}),[ke,Ie]=I.useState([]),[te,ve]=I.useState(null),[Le,De]=I.useState(null),[Je,Q]=I.useState(!1),[ue,ze]=I.useState(""),[Oe,de]=I.useState(""),Be=I.useRef(null),le=I.useRef(0),ge=I.useRef(0),{currentUser:be,isClient:st,clientData:Te,loading:dt}=lr(),{isDark:Tt}=go(),Nt=Os(),Ee=I.useCallback((me,He="info")=>{De({message:me,type:He}),setTimeout(()=>De(null),4e3)},[]);I.useEffect(()=>{!dt&&(!be||!st)&&Nt("/")},[be,st,dt,Nt]),I.useEffect(()=>{Te&&Ue()},[Te]);const Ue=async()=>{try{const me=_r(Ft(nt,"personalBests"),ir("clientId","==",Te.id)),tt=(await mn(me)).docs.map(Xt=>({id:Xt.id,...Xt.data()}));tt.sort((Xt,Wt)=>Xt.month.localeCompare(Wt.month)),a(tt);const Ze=_r(Ft(nt,"personalBestTargets"),ir("clientId","==",Te.id)),pt=await mn(Ze);if(!pt.empty){const Xt=pt.docs[0].data();fe(Xt.targets||{}),q(Xt.metricTargets||{}),H(Xt.targets||{}),O(Xt.metricTargets||{})}const wt=_r(Ft(nt,"achievements"),ir("clientId","==",Te.id)),Ut=await mn(wt);Ut.empty||Ie(Ut.docs[0].data().badges||[])}catch(me){console.error("Error fetching personal bests:",me)}c(!1)},X=E3(),Ce=t.find(me=>me.month===X),Ke=t.filter(me=>me.month<X),$e=Ke.length>0?Ke[Ke.length-1]:null;I.useEffect(()=>{Ce?(K(Ce.benchmarks||{}),se(Ce.bodyMetrics||{})):(K({}),se({}))},[Ce?.id]);const Ve=async(me,He)=>{const tt=[];if(me==="strength"?Ia.forEach(Ze=>{const pt=Y[Ze.key];if(!pt||!pt.targetValue)return;const wt=He[Ze.key];if(!wt)return;let Ut=0;pt.targetType==="weight"?Ut=wt.weight||0:pt.targetType==="reps"?Ut=wt.reps||0:pt.targetType==="time"&&(Ut=wt.time||0);const Xt=pt.startValue||0,Wt=pt.targetValue,kn=Wt-Xt;if((kn===0?Ut>=Wt?1:0:Math.max(0,(Ut-Xt)/kn))>=1&&!ke.some(Ot=>Ot.type==="strength"&&Ot.key===Ze.key&&Ot.targetValue===Wt)){const Ot=pt.targetType==="weight"?"kg":pt.targetType==="reps"?" reps":"s";tt.push({type:"strength",key:Ze.key,targetType:pt.targetType,targetValue:Wt,achievedMonth:X,label:`${Ze.name} ${Wt}${Ot}`})}}):ql.forEach(Ze=>{const pt=je[Ze.key];if(!pt||!pt.targetValue)return;const wt=He[Ze.key];if(wt==null)return;const Ut=pt.startValue||0,Xt=pt.targetValue,Wt=Xt-Ut;(Wt===0?wt===Xt?1:0:Math.max(0,(wt-Ut)/Wt))>=1&&(ke.some(ct=>ct.type==="metric"&&ct.key===Ze.key&&ct.targetValue===Xt)||tt.push({type:"metric",key:Ze.key,targetValue:Xt,achievedMonth:X,label:`${Ze.name} ${Xt}${Ze.suffix}`}))}),tt.length>0){const Ze=[...ke,...tt];await Pa(It(nt,"achievements",Te.id),{clientId:Te.id,badges:Ze,updatedAt:vt.now()}),Ie(Ze),ve(tt),setTimeout(()=>ve(null),5e3)}},it=(me,He)=>{if(me==="strength"){const tt=Y[He];return!tt||!tt.targetValue?!1:ke.some(Ze=>Ze.type==="strength"&&Ze.key===He&&Ze.targetValue===tt.targetValue)}else{const tt=je[He];return!tt||!tt.targetValue?!1:ke.some(Ze=>Ze.type==="metric"&&Ze.key===He&&Ze.targetValue===tt.targetValue)}},xt=async()=>{f(!0);try{const me=`${Te.id}_${X}`,He=Ce||{};await Pa(It(nt,"personalBests",me),{clientId:Te.id,month:X,benchmarks:F,bodyMetrics:He.bodyMetrics||G||{},createdAt:He.createdAt||vt.now(),updatedAt:vt.now()}),await Ve("strength",F),Ee("Benchmarks saved!","success"),E(!1),await Ue()}catch(me){console.error("Error saving benchmarks:",me),Ee("Failed to save. Please try again.","error")}f(!1)},rt=async()=>{f(!0);try{const me=`${Te.id}_${X}`,He=Ce||{};await Pa(It(nt,"personalBests",me),{clientId:Te.id,month:X,benchmarks:He.benchmarks||F||{},bodyMetrics:G,createdAt:He.createdAt||vt.now(),updatedAt:vt.now()}),await Ve("metric",G),Ee("Body metrics saved!","success"),L(!1),await Ue()}catch(me){console.error("Error saving metrics:",me),Ee("Failed to save. Please try again.","error")}f(!1)},tn=(me,He,tt)=>{K(Ze=>({...Ze,[me]:{...Ze[me],[He]:tt===""?"":parseFloat(tt)}}))},vn=(me,He)=>{se(tt=>({...tt,[me]:He===""?"":parseFloat(He)}))},Fn=(me,He,tt)=>{H(Ze=>({...Ze,[me]:{...Ze[me],[He]:He==="targetType"?tt:tt===""?"":parseFloat(tt)}}))},Jn=async()=>{f(!0);try{const me=`targets_${Te.id}`,He=Ce?.benchmarks||{},tt={};Ia.forEach(Ze=>{if(B[Ze.key]?.targetValue){const pt=B[Ze.key].targetType||(Ze.unit==="time"?"time":"weight");let wt=0;const Ut=He[Ze.key];Ut&&(pt==="weight"?wt=Ut.weight||0:pt==="reps"?wt=Ut.reps||0:pt==="time"&&(wt=Ut.time||0)),tt[Ze.key]={targetType:pt,targetValue:B[Ze.key].targetValue,startValue:wt}}}),await Pa(It(nt,"personalBestTargets",me),{clientId:Te.id,targets:tt,metricTargets:je,updatedAt:vt.now()}),fe(tt),H(tt),Ee("Targets saved!","success"),V(!1)}catch(me){console.error("Error saving targets:",me),Ee("Failed to save targets.","error")}f(!1)},qn=(me,He)=>{O(tt=>({...tt,[me]:{...tt[me],targetValue:He===""?"":parseFloat(He)}}))},ks=async()=>{f(!0);try{const me=`targets_${Te.id}`,He={};ql.forEach(tt=>{if(ee[tt.key]?.targetValue){const Ze=Ce?.bodyMetrics?.[tt.key]||0;He[tt.key]={targetValue:ee[tt.key].targetValue,startValue:Ze}}}),await Pa(It(nt,"personalBestTargets",me),{clientId:Te.id,targets:Y,metricTargets:He,updatedAt:vt.now()}),q(He),O(He),Ee("Metric targets saved!","success"),$(!1)}catch(me){console.error("Error saving metric targets:",me),Ee("Failed to save targets.","error")}f(!1)},hn=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){f(!0);try{const me=It(nt,"personalBestTargets",`targets_${Te.id}`);await xa(me),fe({}),q({}),H({}),O({}),Ee("All goals have been reset","success")}catch(me){console.error("Error resetting targets:",me),Ee("Failed to reset goals","error")}f(!1)}},We=(me,He)=>{const tt=Y[me];if(!tt||!tt.targetValue||!He)return null;const Ze=tt.startValue||0,pt=tt.targetValue;let wt=0;tt.targetType==="weight"?wt=He.weight||0:tt.targetType==="reps"?wt=He.reps||0:tt.targetType==="time"&&(wt=He.time||0);const Ut=pt-Ze;return Ut<=0?wt>=pt?1:0:Math.max(0,Math.min((wt-Ze)/Ut,1))},et=me=>{const He=je[me];if(!He||!He.targetValue)return null;const tt=Ce?.bodyMetrics?.[me];if(tt==null)return null;const Ze=He.startValue||0,pt=He.targetValue,wt=pt-Ze;return wt===0?tt===pt?1:0:Math.max(0,Math.min((tt-Ze)/wt,1))},at=me=>{le.current=me.touches[0].clientX,ge.current=0},jt=me=>{ge.current=me.touches[0].clientX-le.current},_t=()=>{ge.current<-50&&m<Ia.length-1?b(me=>me+1):ge.current>50&&m>0&&b(me=>me-1),ge.current=0},At=me=>{const He=Ce?.bodyMetrics?.[me],tt=$e?.bodyMetrics?.[me];return He==null||tt==null?null:parseFloat((He-tt).toFixed(2))},yt=t.find(me=>me.month===ue),ae=t.find(me=>me.month===Oe);if(dt||i)return o.jsxs("div",{className:"pb-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"pb-main",children:[o.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),o.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!be||!st||!Te)return null;const xe=Ia[m],lt=Ce?.benchmarks?.[xe.key],ht=$e?.benchmarks?.[xe.key],Pt=Fc(xe,lt),_n=Fc(xe,ht),nn=xg(Pt,_n),en=We(xe.key,lt),pn=en!==null,wn=en!==null&&en>=1,Gn=pn?Math.round(en*60):Pt>0?15:0,ls=Y[xe.key];return o.jsxs("div",{className:"pb-page",children:[o.jsx("header",{className:"client-header",children:o.jsx("div",{className:"header-content",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),o.jsxs("main",{className:"pb-main page-transition-enter",children:[o.jsx("button",{className:"back-btn",onClick:()=>Nt(-1),children:" Back"}),o.jsxs("div",{className:"pb-intro",children:[o.jsx("h2",{children:"Personal Bests"}),o.jsx("p",{children:"Track your strength benchmarks and body measurements each month."})]}),o.jsxs("div",{className:"pb-tabs",children:[o.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),o.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),o.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&o.jsxs("div",{className:"pb-strength-section",children:[!T&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"pb-carousel",ref:Be,onTouchStart:at,onTouchMove:jt,onTouchEnd:_t,children:[o.jsx("div",{className:"pb-ring-container",children:o.jsxs("div",{className:"pb-ring",children:[o.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((me,He)=>{const tt=(He*6-90)*(Math.PI/180),Ze=85,pt=96,wt=100+Ze*Math.cos(tt),Ut=100+Ze*Math.sin(tt),Xt=100+pt*Math.cos(tt),Wt=100+pt*Math.sin(tt),kn=He<Math.round(Gn);return o.jsx("line",{x1:wt,y1:Ut,x2:Xt,y2:Wt,className:`pb-ring-tick ${kn?wn?"hit":"filled":"empty"}`,strokeWidth:He%5===0?"3":"2"},He)})}),o.jsxs("div",{className:"pb-ring-center",children:[o.jsx("div",{className:"pb-ring-category",children:xe.category}),o.jsxs("div",{className:"pb-ring-exercise",children:[xe.name,it("strength",xe.key)&&o.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),o.jsx("div",{className:"pb-ring-value",children:lt?xe.unit==="time"?gf(lt.time):n_(lt.weight,lt.reps):"-"}),nn!==null&&o.jsxs("div",{className:`pb-ring-change ${nn>=0?"positive":"negative"}`,children:[nn>=0?"+":"",nn.toFixed(1),"%"]}),nn===null&&lt&&o.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),ls&&o.jsxs("div",{className:`pb-ring-target ${wn?"hit":""}`,children:[wn?"Target hit!":`${ls.startValue||0}  ${ls.targetValue}`," ",ls.targetType==="weight"?"kg":ls.targetType==="reps"?"reps":ls.targetType==="time"?"s":"kg"]}),!ls&&o.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})}),o.jsx("div",{className:"pb-carousel-dots",children:Ia.map((me,He)=>o.jsx("button",{className:`pb-dot ${He===m?"active":""}`,onClick:()=>b(He)},He))}),o.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>b(me=>Math.max(0,me-1)),disabled:m===0,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),o.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>b(me=>Math.min(Ia.length-1,me+1)),disabled:m===Ia.length-1,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),o.jsxs("div",{className:"pb-trend-section",children:[o.jsx("h4",{children:"Trend"}),o.jsx(N3,{data:t,exerciseKey:xe.key,unit:xe.unit})]})]}),!T&&!P&&o.jsxs("div",{className:"pb-action-buttons",children:[o.jsx("button",{className:"pb-edit-btn",onClick:()=>E(!0),children:Ce?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),o.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>V(!0),children:Object.keys(Y).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Y).length>0||Object.keys(je).length>0)&&o.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:hn,disabled:u,children:"Reset All Goals"})]}),T&&o.jsxs("div",{className:"pb-edit-card",children:[o.jsxs("div",{className:"pb-edit-header",children:[o.jsxs("h3",{children:["Benchmarks - ",Oa(X)]}),o.jsx("button",{className:"pb-edit-close",onClick:()=>{E(!1),K(Ce?.benchmarks||{})},children:""})]}),o.jsx("div",{className:"pb-edit-body",children:Ia.map(me=>o.jsxs("div",{className:"pb-edit-exercise",children:[o.jsx("div",{className:"pb-edit-exercise-name",children:me.name}),me.unit==="weight"?o.jsxs("div",{className:"pb-edit-row",children:[o.jsxs("div",{className:"pb-edit-field",children:[o.jsx("label",{children:"Weight (kg)"}),o.jsx("input",{type:"number",step:"0.5",value:F[me.key]?.weight??"",onChange:He=>tn(me.key,"weight",He.target.value),placeholder:"0"})]}),o.jsxs("div",{className:"pb-edit-field",children:[o.jsx("label",{children:"Reps"}),o.jsx("input",{type:"number",value:F[me.key]?.reps??"",onChange:He=>tn(me.key,"reps",He.target.value),placeholder:"0"})]})]}):o.jsx("div",{className:"pb-edit-row",children:o.jsxs("div",{className:"pb-edit-field full",children:[o.jsx("label",{children:"Time (seconds)"}),o.jsx("input",{type:"number",step:"0.01",value:F[me.key]?.time??"",onChange:He=>tn(me.key,"time",He.target.value),placeholder:"0"})]})})]},me.key))}),o.jsxs("div",{className:"pb-edit-actions",children:[o.jsx("button",{className:"pb-cancel-btn",onClick:()=>{E(!1),K(Ce?.benchmarks||{})},children:"Cancel"}),o.jsx("button",{className:"pb-save-btn",onClick:xt,disabled:u,children:u?"Saving...":"Save"})]})]}),P&&o.jsxs("div",{className:"pb-edit-card",children:[o.jsxs("div",{className:"pb-edit-header",children:[o.jsx("h3",{children:"Set Your Targets"}),o.jsx("button",{className:"pb-edit-close",onClick:()=>{V(!1),H(Y)},children:""})]}),o.jsxs("div",{className:"pb-edit-body",children:[o.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Ia.map(me=>{const He=B[me.key]?.targetType||(me.unit==="time"?"time":"weight"),tt=He==="weight"?"kg":He==="reps"?"reps":"seconds",Ze=Ce?.benchmarks?.[me.key];let pt="-";return Ze&&(He==="weight"&&Ze.weight?pt=`${Ze.weight}kg`:He==="reps"&&Ze.reps?pt=`${Ze.reps} reps`:He==="time"&&Ze.time&&(pt=`${Ze.time}s`)),o.jsxs("div",{className:"pb-edit-exercise",children:[o.jsxs("div",{className:"pb-edit-exercise-header",children:[o.jsx("div",{className:"pb-edit-exercise-name",children:me.name}),o.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",pt]})]}),me.unit==="weight"&&o.jsxs("div",{className:"pb-target-type-toggle",children:[o.jsx("button",{type:"button",className:He==="weight"?"active":"",onClick:()=>Fn(me.key,"targetType","weight"),children:"Weight"}),o.jsx("button",{type:"button",className:He==="reps"?"active":"",onClick:()=>Fn(me.key,"targetType","reps"),children:"Reps"})]}),o.jsx("div",{className:"pb-edit-row",children:o.jsxs("div",{className:"pb-edit-field full",children:[o.jsxs("label",{children:["Target (",tt,")"]}),o.jsx("input",{type:"number",step:He==="weight"?"0.5":"1",value:B[me.key]?.targetValue??"",onChange:wt=>Fn(me.key,"targetValue",wt.target.value),placeholder:"0"})]})})]},me.key)})]}),o.jsxs("div",{className:"pb-edit-actions",children:[o.jsx("button",{className:"pb-cancel-btn",onClick:()=>{V(!1),H(Y)},children:"Cancel"}),o.jsx("button",{className:"pb-save-btn",onClick:Jn,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&o.jsxs("div",{className:"pb-metrics-section",children:[!C&&!Z&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"pb-metrics-card",children:[o.jsx("h3",{children:"Body Measurements"}),o.jsx("p",{className:"pb-metrics-month",children:Oa(X)}),o.jsx("div",{className:"pb-metrics-list",children:ql.map(me=>{const He=Ce?.bodyMetrics?.[me.key],tt=At(me.key),Ze=je[me.key],pt=et(me.key),wt=pt!==null&&pt>=1;return o.jsxs("div",{className:"pb-metric-row",children:[o.jsxs("div",{className:"pb-metric-top",children:[o.jsxs("div",{className:"pb-metric-left",children:[o.jsxs("span",{className:"pb-metric-name",children:[me.name,it("metric",me.key)&&o.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),Ze&&o.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",Ze.targetValue," ",me.suffix]})]}),o.jsxs("div",{className:"pb-metric-values",children:[o.jsx("span",{className:"pb-metric-current",children:He!=null?`${He} ${me.suffix}`:"-"}),tt!==null&&o.jsxs("span",{className:`pb-metric-change ${tt>0?"up":tt<0?"down":"same"}`,children:[tt>0?"+":"",tt," ",me.suffix]})]})]}),pt!==null&&o.jsxs("div",{className:"pb-metric-progress",children:[o.jsx("div",{className:"pb-metric-bar",children:o.jsx("div",{className:`pb-metric-bar-fill ${wt?"hit":""}`,style:{width:`${Math.round(pt*100)}%`}})}),o.jsx("span",{className:`pb-metric-percent ${wt?"hit":""}`,children:wt?"Hit!":`${Math.round(pt*100)}%`})]})]},me.key)})})]}),o.jsxs("div",{className:"pb-action-buttons",children:[o.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:Ce?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),o.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>$(!0),children:Object.keys(je).length>0?"Edit Targets":"Set Targets"}),(Object.keys(Y).length>0||Object.keys(je).length>0)&&o.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:hn,disabled:u,children:"Reset All Goals"})]})]}),C&&o.jsxs("div",{className:"pb-edit-card",children:[o.jsxs("div",{className:"pb-edit-header",children:[o.jsxs("h3",{children:["Measurements - ",Oa(X)]}),o.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),se(Ce?.bodyMetrics||{})},children:""})]}),o.jsx("div",{className:"pb-edit-body",children:ql.map(me=>o.jsx("div",{className:"pb-edit-metric",children:o.jsxs("div",{className:"pb-edit-field full",children:[o.jsxs("label",{children:[me.name," (",me.suffix,")"]}),o.jsx("input",{type:"number",step:"0.1",value:G[me.key]??"",onChange:He=>vn(me.key,He.target.value),placeholder:"0"})]})},me.key))}),o.jsxs("div",{className:"pb-edit-actions",children:[o.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),se(Ce?.bodyMetrics||{})},children:"Cancel"}),o.jsx("button",{className:"pb-save-btn",onClick:rt,disabled:u,children:u?"Saving...":"Save"})]})]}),Z&&o.jsxs("div",{className:"pb-edit-card",children:[o.jsxs("div",{className:"pb-edit-header",children:[o.jsx("h3",{children:"Body Metric Targets"}),o.jsx("button",{className:"pb-edit-close",onClick:()=>{$(!1),O(je)},children:""})]}),o.jsxs("div",{className:"pb-edit-body",children:[o.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),ql.map(me=>{const He=Ce?.bodyMetrics?.[me.key];return o.jsxs("div",{className:"pb-edit-exercise",children:[o.jsxs("div",{className:"pb-edit-exercise-header",children:[o.jsx("div",{className:"pb-edit-exercise-name",children:me.name}),o.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",He!=null?`${He} ${me.suffix}`:"-"]})]}),o.jsx("div",{className:"pb-edit-row",children:o.jsxs("div",{className:"pb-edit-field full",children:[o.jsxs("label",{children:["Target (",me.suffix,")"]}),o.jsx("input",{type:"number",step:"0.1",value:ee[me.key]?.targetValue??"",onChange:tt=>qn(me.key,tt.target.value),placeholder:"0"})]})})]},me.key)})]}),o.jsxs("div",{className:"pb-edit-actions",children:[o.jsx("button",{className:"pb-cancel-btn",onClick:()=>{$(!1),O(je)},children:"Cancel"}),o.jsx("button",{className:"pb-save-btn",onClick:ks,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),s==="history"&&o.jsx("div",{className:"pb-history-section",children:t.length===0?o.jsxs("div",{className:"pb-empty",children:[o.jsx("h4",{children:"No records yet"}),o.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):o.jsxs(o.Fragment,{children:[ke.length>0&&o.jsxs("div",{className:"pb-achievements-wall",children:[o.jsxs("h4",{className:"pb-achievements-wall-title",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),o.jsx("div",{className:"pb-achievements-list",children:[...ke].reverse().map((me,He)=>o.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${He*.05}s`},children:[o.jsx("div",{className:"pb-achievement-star",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),o.jsxs("div",{className:"pb-achievement-info",children:[o.jsx("span",{className:"pb-achievement-label",children:me.label}),o.jsx("span",{className:"pb-achievement-date",children:Oa(me.achievedMonth)})]})]},He))})]}),o.jsx("div",{className:"pb-history-controls",children:o.jsx("button",{className:`pb-compare-toggle ${Je?"active":""}`,onClick:()=>{Q(!Je),!Je&&t.length>=2&&(ze(t[0].month),de(t[t.length-1].month))},children:Je?"Back to Timeline":"Compare Months"})}),Je?o.jsxs("div",{className:"pb-compare",children:[o.jsxs("div",{className:"pb-compare-selectors",children:[o.jsxs("div",{className:"pb-compare-select",children:[o.jsx("label",{children:"From"}),o.jsx("select",{value:ue,onChange:me=>ze(me.target.value),children:t.map(me=>o.jsx("option",{value:me.month,children:Oa(me.month)},me.month))})]}),o.jsx("div",{className:"pb-compare-vs",children:"vs"}),o.jsxs("div",{className:"pb-compare-select",children:[o.jsx("label",{children:"To"}),o.jsx("select",{value:Oe,onChange:me=>de(me.target.value),children:t.map(me=>o.jsx("option",{value:me.month,children:Oa(me.month)},me.month))})]})]}),yt&&ae&&o.jsxs("div",{className:"pb-compare-results",children:[o.jsxs("div",{className:"pb-compare-group",children:[o.jsx("h4",{children:"Strength Benchmarks"}),o.jsxs("div",{className:"pb-compare-table",children:[o.jsxs("div",{className:"pb-compare-header-row",children:[o.jsx("span",{children:"Exercise"}),o.jsx("span",{children:Oa(ue).split(" ")[0]}),o.jsx("span",{children:Oa(Oe).split(" ")[0]}),o.jsx("span",{children:"Change"})]}),Ia.map(me=>{const He=yt.benchmarks?.[me.key],tt=ae.benchmarks?.[me.key],Ze=Fc(me,He),pt=Fc(me,tt),wt=xg(pt,Ze);return o.jsxs("div",{className:"pb-compare-row",children:[o.jsx("span",{className:"pb-compare-name",children:me.name}),o.jsx("span",{className:"pb-compare-val",children:He?me.unit==="time"?gf(He.time):`${He.weight}x${He.reps}`:"-"}),o.jsx("span",{className:"pb-compare-val",children:tt?me.unit==="time"?gf(tt.time):`${tt.weight}x${tt.reps}`:"-"}),o.jsx("span",{className:`pb-compare-change ${wt!==null?wt>=0?"positive":"negative":""}`,children:wt!==null?`${wt>=0?"+":""}${wt.toFixed(1)}%`:"-"})]},me.key)})]})]}),o.jsxs("div",{className:"pb-compare-group",children:[o.jsx("h4",{children:"Body Measurements"}),o.jsxs("div",{className:"pb-compare-table",children:[o.jsxs("div",{className:"pb-compare-header-row",children:[o.jsx("span",{children:"Measurement"}),o.jsx("span",{children:Oa(ue).split(" ")[0]}),o.jsx("span",{children:Oa(Oe).split(" ")[0]}),o.jsx("span",{children:"Change"})]}),ql.map(me=>{const He=yt.bodyMetrics?.[me.key],tt=ae.bodyMetrics?.[me.key],Ze=He!=null&&tt!=null?parseFloat((tt-He).toFixed(2)):null;return o.jsxs("div",{className:"pb-compare-row",children:[o.jsx("span",{className:"pb-compare-name",children:me.name}),o.jsx("span",{className:"pb-compare-val",children:He!=null?`${He}`:"-"}),o.jsx("span",{className:"pb-compare-val",children:tt!=null?`${tt}`:"-"}),o.jsx("span",{className:`pb-compare-change ${Ze!==null?Ze>0?"positive":Ze<0?"negative":"neutral":""}`,children:Ze!==null?`${Ze>0?"+":""}${Ze} ${me.suffix}`:"-"})]},me.key)})]})]})]})]}):o.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((me,He)=>{const tt=t.find(Ze=>Ze.month<me.month&&t.indexOf(Ze)===t.indexOf(me)-1)||t.filter(Ze=>Ze.month<me.month).pop();return o.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${He*.05}s`},children:[o.jsx("div",{className:"pb-timeline-dot"}),o.jsxs("div",{className:"pb-timeline-card",children:[o.jsx("h4",{children:Oa(me.month)}),me.benchmarks&&Object.keys(me.benchmarks).length>0&&o.jsxs("div",{className:"pb-timeline-group",children:[o.jsx("h5",{children:"Strength Benchmarks"}),Ia.map(Ze=>{const pt=me.benchmarks[Ze.key];if(!pt)return null;const wt=tt?.benchmarks?.[Ze.key],Ut=Fc(Ze,pt),Xt=Fc(Ze,wt),Wt=xg(Ut,Xt);return o.jsxs("div",{className:"pb-timeline-row",children:[o.jsx("span",{className:"pb-timeline-label",children:Ze.name}),o.jsxs("div",{className:"pb-timeline-values",children:[o.jsx("span",{className:"pb-timeline-value",children:Ze.unit==="time"?gf(pt.time):n_(pt.weight,pt.reps)}),Wt!==null&&o.jsxs("span",{className:`pb-timeline-change ${Wt>=0?"positive":"negative"}`,children:[Wt>=0?"+":"",Wt.toFixed(1),"%"]})]})]},Ze.key)})]}),me.bodyMetrics&&Object.keys(me.bodyMetrics).length>0&&o.jsxs("div",{className:"pb-timeline-group",children:[o.jsx("h5",{children:"Body Measurements"}),ql.map(Ze=>{const pt=me.bodyMetrics[Ze.key];if(pt==null)return null;const wt=tt?.bodyMetrics?.[Ze.key],Ut=wt!=null?parseFloat((pt-wt).toFixed(2)):null;return o.jsxs("div",{className:"pb-timeline-row",children:[o.jsx("span",{className:"pb-timeline-label",children:Ze.name}),o.jsxs("div",{className:"pb-timeline-values",children:[o.jsxs("span",{className:"pb-timeline-value",children:[pt," ",Ze.suffix]}),Ut!==null&&o.jsxs("span",{className:`pb-timeline-change ${Ut>0?"positive":Ut<0?"negative":"neutral"}`,children:[Ut>0?"+":"",Ut," ",Ze.suffix]})]})]},Ze.key)})]})]})]},me.id)})})]})})]}),te&&o.jsx("div",{className:"pb-celebration-overlay",onClick:()=>ve(null),children:o.jsxs("div",{className:"pb-celebration-card",children:[o.jsx("div",{className:"pb-celebration-icon",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),o.jsx("h3",{className:"pb-celebration-title",children:te.length===1?"Target Achieved!":`${te.length} Targets Achieved!`}),o.jsx("div",{className:"pb-celebration-badges",children:te.map((me,He)=>o.jsx("div",{className:"pb-celebration-badge",children:me.label},He))}),o.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Le&&o.jsxs("div",{className:`toast-notification ${Le.type}`,children:[o.jsx("span",{className:"toast-icon",children:Le.type==="success"?o.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),o.jsx("span",{className:"toast-message",children:Le.message}),o.jsx("button",{className:"toast-close",onClick:()=>De(null),children:""})]})]})}const _g=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const i=new Date(s);i.setHours(9,45,0,0),s>i&&(t=7)}const a=new Date(s);return a.setDate(s.getDate()+t),a},wg=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,k3=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});function C3(){const[s,e]=I.useState(!0),[t,a]=I.useState(null),[i,c]=I.useState(null),[u,f]=I.useState({attended:0,streak:0,strikes:0}),[m,b]=I.useState(null),{currentUser:T,isClient:E,clientData:C,logout:L,loading:P}=lr(),{isDark:V,toggleTheme:F}=go(),K=Os();I.useCallback((q,B="info")=>{b({message:q,type:B}),setTimeout(()=>b(null),4e3)},[]),I.useEffect(()=>{!P&&(!T||!E)&&K("/")},[T,E,P,K]),I.useEffect(()=>{const q=()=>{const H=new Date,Z=_g();Z.setHours(9,0,0,0);const $=Z-H;if($<=0){a({days:0,hours:0,minutes:0,seconds:0});return}a({days:Math.floor($/864e5),hours:Math.floor($%864e5/36e5),minutes:Math.floor($%36e5/6e4),seconds:Math.floor($%6e4/1e3)})};q();const B=setInterval(q,1e3);return()=>clearInterval(B)},[]),I.useEffect(()=>{C&&G()},[C]);const G=async()=>{try{const q=wg(_g()),B=It(nt,"circuitSessions",q),H=await _i(B);if(H.exists()){const Je=H.data().slots?.find(Q=>Q.memberId===C.id);c(Je||null)}else c(null);const $=(await mn(Ft(nt,"circuitSessions"))).docs.map(De=>({id:De.id,...De.data()})),ee=new Date;ee.setHours(0,0,0,0);let O=0;const ke=[];$.forEach(De=>{new Date(De.date+"T09:00:00")<ee&&De.slots?.some(ue=>ue.memberId===C.id&&(ue.status==="confirmed"||ue.status==="attended"))&&(O++,ke.push(De.date))}),ke.sort((De,Je)=>Je.localeCompare(De));let Ie=0,te=new Date(ee);const ve=te.getDay(),Le=ve>=6?ve-6:ve+1;te.setDate(te.getDate()-Le);for(const De of ke)if(De===wg(te))Ie++,te.setDate(te.getDate()-7);else break;f({attended:O,streak:Ie,strikes:C.circuitStrikes||0,banUntil:C.circuitBanUntil||null})}catch(q){console.error("Error fetching circuit data:",q)}e(!1)};if(P||s)return o.jsx("div",{className:"circuit-page",children:o.jsx("div",{className:"circuit-loading",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"circuit-loading-logo"})})});const se=wg(_g()),Y=C?.clientType||"block",fe=Y==="circuit_vip"||Y==="circuit_dropin",je=Y==="circuit_vip"?"VIP":Y==="circuit_dropin"?"Drop-in":"Block";return o.jsxs("div",{className:`circuit-page ${V?"dark":""}`,children:[o.jsxs("header",{className:"circuit-header",children:[o.jsxs("div",{className:"circuit-header-left",children:[!fe&&o.jsx("button",{className:"circuit-back-btn",onClick:()=>K("/client"),children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),o.jsx("img",{src:"/Logo.PNG",alt:"MCF",className:"circuit-header-logo"})]}),o.jsxs("div",{className:"circuit-header-right",children:[o.jsx("button",{className:"circuit-icon-btn",onClick:F,children:V?"":""}),fe&&o.jsx("button",{className:"circuit-icon-btn logout",onClick:L,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})})})]})]}),o.jsxs("main",{className:"circuit-main",children:[o.jsxs("div",{className:"circuit-intro",children:[o.jsx("h2",{children:"Circuit Class"}),o.jsxs("p",{children:["Hey ",C?.name?.split(" ")[0],"! Your Saturday session awaits."]})]}),t&&o.jsxs("div",{className:"circuit-countdown",children:[o.jsxs("div",{className:"circuit-ring",children:[o.jsx("svg",{className:"circuit-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((q,B)=>{const H=(B*6-90)*(Math.PI/180),Z=85,$=96,ee=100+Z*Math.cos(H),O=100+Z*Math.sin(H),ke=100+$*Math.cos(H),Ie=100+$*Math.sin(H),te=60-t.seconds,ve=B<te;return o.jsx("line",{x1:ee,y1:O,x2:ke,y2:Ie,className:`circuit-tick ${ve?"elapsed":"remaining"}`,strokeWidth:B%5===0?"3":"2"},B)})}),o.jsxs("div",{className:"circuit-ring-center",children:[o.jsx("div",{className:"circuit-ring-logo",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),o.jsx("div",{className:"circuit-ring-label",children:"Next Class"}),o.jsxs("div",{className:"circuit-ring-countdown",children:[t.days>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"circuit-digit",children:String(t.days).padStart(2,"0")}),o.jsx("span",{className:"circuit-colon",children:":"})]}),o.jsx("span",{className:"circuit-digit",children:String(t.hours).padStart(2,"0")}),o.jsx("span",{className:"circuit-colon",children:":"}),o.jsx("span",{className:"circuit-digit",children:String(t.minutes).padStart(2,"0")}),o.jsx("span",{className:"circuit-colon",children:":"}),o.jsx("span",{className:"circuit-digit circuit-seconds",children:String(t.seconds).padStart(2,"0")})]}),o.jsx("div",{className:"circuit-ring-sub",children:"Saturday 9:00am"})]})]}),o.jsx("p",{className:"circuit-date-full",children:k3(se)})]}),o.jsx("div",{className:`circuit-status-card ${i?"booked":"not-booked"}`,children:i?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"circuit-status-check",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M5 13l4 4L19 7"})})}),o.jsxs("div",{className:"circuit-status-info",children:[o.jsx("h3",{children:"You're Locked In"}),o.jsxs("p",{children:["Slot #",i.slotNumber,"  ",je]})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"circuit-status-alert",children:"!"}),o.jsxs("div",{className:"circuit-status-info",children:[o.jsx("h3",{children:"Not Booked Yet"}),o.jsx("p",{children:"Tap below to view and book your slot"})]}),o.jsx("button",{className:"circuit-book-now-btn",onClick:()=>K("/client/circuit/booking"),children:"Book Now"})]})}),o.jsxs("div",{className:"circuit-stats-card",children:[o.jsx("h3",{children:"Your Stats"}),o.jsxs("div",{className:"circuit-stats-grid",children:[o.jsxs("div",{className:"circuit-stat",children:[o.jsx("span",{className:"circuit-stat-value",children:u.attended}),o.jsx("span",{className:"circuit-stat-label",children:"Classes"})]}),o.jsxs("div",{className:"circuit-stat",children:[o.jsx("span",{className:"circuit-stat-value",children:u.streak}),o.jsx("span",{className:"circuit-stat-label",children:"Week Streak"})]}),o.jsxs("div",{className:"circuit-stat",children:[o.jsxs("span",{className:`circuit-stat-value ${u.strikes>=2?"warning":""}`,children:[u.strikes,"/3"]}),o.jsx("span",{className:"circuit-stat-label",children:"Strikes"})]})]}),u.banUntil&&(()=>{const q=u.banUntil.toDate?u.banUntil.toDate():new Date(u.banUntil.seconds*1e3);return q>new Date?o.jsxs("div",{className:"circuit-ban-notice",children:["Booking suspended until ",q.toLocaleDateString("en-GB",{day:"numeric",month:"long"})]}):null})()]}),o.jsxs("div",{className:"circuit-rules",children:[o.jsx("h4",{children:"Class Rules"}),o.jsxs("ul",{children:[o.jsxs("li",{children:["Lock in your slot by ",o.jsx("strong",{children:"Wednesday"})]}),o.jsxs("li",{children:["Cancel at least ",o.jsx("strong",{children:"24 hours"})," before class"]}),o.jsx("li",{children:"3 no-show strikes = 1 month booking ban"})]})]}),Y!=="circuit_vip"&&o.jsxs("div",{className:"circuit-vip-promo",children:[o.jsx("div",{className:"vip-promo-badge",children:"VIP"}),o.jsx("h3",{children:"Become a VIP Member"}),o.jsxs("p",{className:"vip-promo-price",children:["Just ",o.jsx("strong",{children:"25"}),"/month"]}),o.jsx("p",{className:"vip-promo-desc",children:"Full access with a priority spot every week  your slot is automatically locked in before anyone else can book."}),o.jsxs("ul",{className:"vip-promo-perks",children:[o.jsx("li",{children:"Guaranteed slot every Saturday"}),o.jsx("li",{children:"Auto-booked  no need to race for a spot"}),o.jsx("li",{children:"Cancel anytime for the week, reinstated the next"})]}),o.jsxs("a",{href:"https://wa.me/447449782055?text=Hi%20Ross%2C%20I%27d%20like%20to%20become%20a%20VIP%20circuit%20member!",target:"_blank",rel:"noopener noreferrer",className:"vip-promo-wa-btn",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Message on WhatsApp"]})]})]}),o.jsx("button",{className:"circuit-fab",onClick:()=>K("/client/circuit/booking"),children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),o.jsx("path",{d:"M3 9h18M9 21V9"})]})}),m&&o.jsx("div",{className:`toast-notification ${m.type}`,children:o.jsx("span",{children:m.message})})]})}const yf=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const i=new Date(s);i.setHours(9,45,0,0),s>i&&(t=7)}const a=new Date(s);return a.setDate(s.getDate()+t),a},A3=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,R3=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),s_=s=>s==="circuit_vip"?"VIP":s==="circuit_dropin"?"Drop-in":"Block",r_=s=>s==="circuit_vip"?"vip":s==="circuit_dropin"?"dropin":"block";function D3(){const[s,e]=I.useState(!0),[t,a]=I.useState(!1),[i,c]=I.useState(null),[u,f]=I.useState(null),{currentUser:m,isClient:b,clientData:T,loading:E}=lr(),{isDark:C}=go(),L=Os(),P=I.useCallback((O,ke="info")=>{f({message:O,type:ke}),setTimeout(()=>f(null),4e3)},[]);I.useEffect(()=>{!E&&(!m||!b)&&L("/")},[m,b,E,L]),I.useEffect(()=>{T&&V()},[T]);const V=async()=>{try{const O=A3(yf()),ke=It(nt,"circuitSessions",O),Ie=await _i(ke);if(Ie.exists()){const te={id:Ie.id,...Ie.data()},ve=_r(Ft(nt,"clients"),ir("clientType","==","circuit_vip"),ir("status","==","active")),De=(await mn(ve)).docs.map(ue=>({id:ue.id,...ue.data()})),Je=te.slots.filter(ue=>ue.memberId).map(ue=>ue.memberId),Q=De.filter(ue=>!Je.includes(ue.id));if(Q.length>0){const ue=[...te.slots];let ze=!1;for(const Oe of Q){const de=ue.findIndex(Be=>Be.status==="available");if(de===-1)break;ue[de]={slotNumber:ue[de].slotNumber,memberId:Oe.id,memberName:Oe.name,memberType:"circuit_vip",status:"confirmed",bookedAt:vt.now()},ze=!0}ze&&(await Es(ke,{slots:ue}),te.slots=ue)}c(te)}else{const te=_r(Ft(nt,"clients"),ir("clientType","==","circuit_vip"),ir("status","==","active")),Le=(await mn(te)).docs.map(Q=>({id:Q.id,...Q.data()})),De=[];for(let Q=0;Q<8;Q++)Q<Le.length?De.push({slotNumber:Q+1,memberId:Le[Q].id,memberName:Le[Q].name,memberType:"circuit_vip",status:"confirmed",bookedAt:vt.now()}):De.push({slotNumber:Q+1,memberId:null,memberName:null,memberType:null,status:"available"});const Je={date:O,time:"09:00",endTime:"09:45",maxCapacity:8,slots:De,waitlist:[],createdAt:vt.now()};await Pa(ke,Je),c({id:O,...Je})}}catch(O){console.error("Error loading session:",O),P("Failed to load session","error")}e(!1)},F=async O=>{if(!t){a(!0);try{if(T.circuitBanUntil&&(T.circuitBanUntil.toDate?T.circuitBanUntil.toDate():new Date(T.circuitBanUntil))>new Date){P("You are currently suspended from booking","error"),a(!1);return}const ke=yf(),Ie=new Date(ke);if(Ie.setDate(Ie.getDate()-3),Ie.setHours(23,59,59,999),new Date>Ie){P("Booking deadline has passed (Wednesday)","error"),a(!1);return}if(i.slots.some(De=>De.memberId===T.id)){P("You already have a slot booked","error"),a(!1);return}const te=[...i.slots],ve=te.findIndex(De=>De.slotNumber===O&&De.status==="available");if(ve===-1){P("Slot is no longer available","error"),a(!1);return}te[ve]={slotNumber:O,memberId:T.id,memberName:T.name,memberType:T.clientType||"block",status:"confirmed",bookedAt:vt.now()};const Le=(i.waitlist||[]).filter(De=>De.memberId!==T.id);await Es(It(nt,"circuitSessions",i.id),{slots:te,waitlist:Le}),c(De=>({...De,slots:te,waitlist:Le})),P("Slot booked!","success")}catch(ke){console.error("Error booking slot:",ke),P("Failed to book slot","error")}a(!1)}},K=async()=>{if(!t){a(!0);try{const O=yf();O.setHours(9,0,0,0);const ke=new Date(O.getTime()-1440*60*1e3);if(new Date>ke){P("Cancellation deadline passed (24hrs before class)","error"),a(!1);return}const Ie=[...i.slots],te=Ie.findIndex(De=>De.memberId===T.id);if(te===-1){a(!1);return}const ve=Ie[te].slotNumber;let Le=[...i.waitlist||[]];if(Le.length>0){const De=Le.shift();Ie[te]={slotNumber:ve,memberId:De.memberId,memberName:De.memberName,memberType:De.memberType,status:"confirmed",bookedAt:vt.now()}}else Ie[te]={slotNumber:ve,memberId:null,memberName:null,memberType:null,status:"available"};await Es(It(nt,"circuitSessions",i.id),{slots:Ie,waitlist:Le}),c(De=>({...De,slots:Ie,waitlist:Le})),P("Slot released","success")}catch(O){console.error("Error releasing slot:",O),P("Failed to release slot","error")}a(!1)}},G=async()=>{if(!t){a(!0);try{if(i.waitlist?.some(ke=>ke.memberId===T.id)){P("Already on the waitlist","error"),a(!1);return}if(i.slots.some(ke=>ke.memberId===T.id)){P("You already have a slot","error"),a(!1);return}const O=[...i.waitlist||[],{memberId:T.id,memberName:T.name,memberType:T.clientType||"block",addedAt:vt.now()}];await Es(It(nt,"circuitSessions",i.id),{waitlist:O}),c(ke=>({...ke,waitlist:O})),P("Added to waitlist!","success")}catch(O){console.error("Error joining waitlist:",O),P("Failed to join waitlist","error")}a(!1)}},se=async()=>{if(!t){a(!0);try{const O=(i.waitlist||[]).filter(ke=>ke.memberId!==T.id);await Es(It(nt,"circuitSessions",i.id),{waitlist:O}),c(ke=>({...ke,waitlist:O})),P("Removed from waitlist","success")}catch(O){console.error("Error leaving waitlist:",O),P("Failed to leave waitlist","error")}a(!1)}};if(E||s)return o.jsx("div",{className:"cb-page",children:o.jsx("div",{className:"cb-loading",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-loading-logo"})})});if(!i)return null;const Y=i.slots.find(O=>O.memberId===T.id),fe=i.waitlist?.some(O=>O.memberId===T.id),je=i.slots.filter(O=>O.status==="available").length,q=je===0,B=yf(),H=new Date(B);H.setDate(H.getDate()-3),H.setHours(23,59,59,999);const Z=new Date>H,$=new Date(B);$.setHours(9,0,0,0),$.setTime($.getTime()-1440*60*1e3);const ee=new Date>$;return o.jsxs("div",{className:`cb-page ${C?"dark":""}`,children:[o.jsxs("header",{className:"cb-header",children:[o.jsx("button",{className:"cb-back-btn",onClick:()=>L("/client/circuit"),children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),o.jsx("h1",{children:"Class Booking"}),o.jsx("div",{className:"cb-header-spacer"})]}),o.jsxs("main",{className:"cb-main",children:[o.jsxs("div",{className:"cb-class-info",children:[o.jsx("h2",{children:R3(i.date)}),o.jsxs("p",{children:[i.time," - ",i.endTime,"  ",je," slot",je!==1?"s":""," available"]})]}),Z&&!Y&&o.jsx("div",{className:"cb-deadline-notice",children:"Booking deadline has passed for this week"}),o.jsx("div",{className:"cb-slots-grid",children:i.slots.map(O=>{const ke=O.memberId===T.id,Ie=O.status==="available";return O.memberType,o.jsxs("div",{className:`cb-slot ${ke?"mine":""} ${Ie?"available":"filled"}`,children:[o.jsx("div",{className:"cb-slot-number",children:O.slotNumber}),o.jsx("div",{className:"cb-slot-body",children:Ie?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"cb-slot-available",children:"Available"}),!Y&&!Z&&o.jsx("button",{className:"cb-slot-book-btn",onClick:()=>F(O.slotNumber),disabled:t,children:"Book"})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"cb-slot-name",children:O.memberName}),o.jsx("span",{className:`cb-slot-badge ${r_(O.memberType)}`,children:s_(O.memberType)})]})}),ke&&o.jsx("button",{className:"cb-slot-release-btn",onClick:K,disabled:t||ee,title:ee?"Cancellation deadline passed":"Cancel this slot",children:ee?"Locked":"Cancel"})]},O.slotNumber)})}),!Y&&q&&o.jsx("div",{className:"cb-waitlist-section",children:fe?o.jsxs("div",{className:"cb-waitlist-status",children:[o.jsxs("p",{children:["You're on the waitlist (position #",(i.waitlist?.findIndex(O=>O.memberId===T.id)||0)+1,")"]}),o.jsx("button",{className:"cb-waitlist-leave-btn",onClick:se,disabled:t,children:"Leave Waitlist"})]}):o.jsx("button",{className:"cb-waitlist-join-btn",onClick:G,disabled:t,children:"Class Full - Join Waitlist"})}),i.waitlist?.length>0&&o.jsxs("div",{className:"cb-waitlist-preview",children:[o.jsxs("h4",{children:["Waitlist (",i.waitlist.length,")"]}),i.waitlist.map((O,ke)=>o.jsxs("div",{className:"cb-waitlist-item",children:[o.jsxs("span",{className:"cb-waitlist-pos",children:["#",ke+1]}),o.jsx("span",{className:"cb-waitlist-name",children:O.memberName}),o.jsx("span",{className:`cb-slot-badge ${r_(O.memberType)}`,children:s_(O.memberType)})]},O.memberId))]}),o.jsx("div",{className:"cb-rules",children:o.jsxs("p",{children:[o.jsx("strong",{children:"Book by Wednesday"}),"  ",o.jsx("strong",{children:"Cancel 24hrs before"}),"  ",o.jsx("strong",{children:"3 no-shows = 1 month ban"})]})})]}),u&&o.jsx("div",{className:`toast-notification ${u.type}`,children:o.jsx("span",{children:u.message})})]})}function M3(){const{currentUser:s,isClient:e,clientData:t,logout:a,loading:i}=lr(),{isDark:c,toggleTheme:u}=go(),f=Os(),[m,b]=I.useState({hours:0,minutes:0,seconds:0}),[T,E]=I.useState(0),[C,L]=I.useState(null),P=I.useCallback((K,G="info")=>{L({message:K,type:G}),setTimeout(()=>L(null),4e3)},[]);I.useEffect(()=>{!i&&!s&&f("/")},[i,s,f]),I.useEffect(()=>{const K=()=>{const se=new Date,Y=new Date(se);Y.setHours(23,59,59,999);const fe=Y-se,je=Math.floor(fe/(1e3*60*60)),q=Math.floor(fe%(1e3*60*60)/(1e3*60)),B=Math.floor(fe%(1e3*60)/1e3);b({hours:je,minutes:q,seconds:B}),E(60-B)};K();const G=setInterval(K,1e3);return()=>clearInterval(G)},[]);const V=K=>{const G=K.currentTarget,se=G.querySelector(".ripple");se&&se.remove();const Y=G.getBoundingClientRect(),fe=Math.max(Y.width,Y.height),je=K.clientX-Y.left-fe/2,q=K.clientY-Y.top-fe/2,B=document.createElement("span");B.className="ripple",B.style.cssText=`width:${fe}px;height:${fe}px;left:${je}px;top:${q}px;`,G.appendChild(B),setTimeout(()=>B.remove(),600)},F=t?.name?.split(" ")[0]||"there";return i?o.jsx("div",{className:"cb-loading",children:o.jsx("div",{className:"cb-loading-spinner"})}):o.jsxs("div",{className:"cb-dashboard","data-theme":c?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Core Buddy"})]}),o.jsxs("div",{className:"cb-header-right",children:[o.jsx("button",{className:"cb-theme-toggle",onClick:u,"aria-label":"Toggle theme",children:c?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),o.jsx("button",{className:"cb-logout",onClick:a,"aria-label":"Log out",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),o.jsx("polyline",{points:"16 17 21 12 16 7"}),o.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]}),o.jsxs("main",{className:"cb-main",children:[o.jsx("div",{className:"cb-greeting",children:o.jsxs("h2",{children:["Hey ",F]})}),o.jsxs("div",{className:"cb-ring-container",children:[o.jsxs("div",{className:"cb-ring",children:[o.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((K,G)=>{const se=(G*6-90)*(Math.PI/180),Y=85,fe=96,je=100+Y*Math.cos(se),q=100+Y*Math.sin(se),B=100+fe*Math.cos(se),H=100+fe*Math.sin(se),Z=G<T;return o.jsx("line",{x1:je,y1:q,x2:B,y2:H,className:`ring-tick ${Z?"elapsed":"remaining"}`,strokeWidth:G%5===0?"3":"2"},G)})}),o.jsxs("div",{className:"cb-ring-center",children:[o.jsx("div",{className:"cb-ring-logo",children:o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),o.jsxs("div",{className:"cb-ring-countdown",children:[o.jsx("span",{className:"cb-timer-digit",children:String(m.hours).padStart(2,"0")}),o.jsx("span",{className:"cb-timer-colon",children:":"}),o.jsx("span",{className:"cb-timer-digit",children:String(m.minutes).padStart(2,"0")}),o.jsx("span",{className:"cb-timer-colon",children:":"}),o.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(m.seconds).padStart(2,"0")})]}),o.jsx("div",{className:"cb-ring-label",children:"remaining today"})]})]}),o.jsxs("p",{className:"cb-ring-tagline",children:["You have 24 hours a day... ",o.jsx("strong",{children:"make it count"})," with Core Buddy"]})]}),o.jsxs("div",{className:"cb-features",children:[o.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:K=>{V(K),f("/client/core-buddy/nutrition")},children:[o.jsxs("div",{className:"cb-card-top-row",children:[o.jsx("div",{className:"cb-card-icon cb-icon-nutrition",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),o.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),o.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),o.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),o.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),o.jsx("div",{className:"cb-card-content",children:o.jsx("h3",{children:"Today's Nutrition"})}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsx("div",{className:"cb-card-preview-row",children:o.jsx("div",{className:"cb-mini-rings",children:[{cls:"cb-ring-protein",label:"P",filled:15},{cls:"cb-ring-carbs",label:"C",filled:28},{cls:"cb-ring-fats",label:"F",filled:38},{cls:"cb-ring-cals",label:"Cal",filled:22}].map(K=>o.jsxs("div",{className:`cb-mini-ring ${K.cls}`,children:[o.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(60)].map((G,se)=>{const Y=(se*6-90)*(Math.PI/180),fe=50+38*Math.cos(Y),je=50+38*Math.sin(Y),q=50+46*Math.cos(Y),B=50+46*Math.sin(Y);return o.jsx("line",{x1:fe,y1:je,x2:q,y2:B,className:se<K.filled?"cb-tick-filled":"cb-tick-empty",strokeWidth:se%5===0?"3":"2"},se)})}),o.jsx("span",{children:K.label})]},K.cls))})}),o.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),o.jsxs("button",{className:"cb-feature-card cb-card-workouts ripple-btn",onClick:K=>{V(K),f("/client/core-buddy/workouts")},children:[o.jsx("div",{className:"cb-card-icon cb-icon-workouts",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M6.5 6.5L17.5 17.5"}),o.jsx("path",{d:"M3 10V7a1 1 0 0 1 1-1h3"}),o.jsx("path",{d:"M14 3h3a1 1 0 0 1 1 1v3"}),o.jsx("path",{d:"M21 14v3a1 1 0 0 1-1 1h-3"}),o.jsx("path",{d:"M10 21H7a1 1 0 0 1-1-1v-3"})]})}),o.jsxs("div",{className:"cb-card-content",children:[o.jsx("h3",{children:"Workouts"}),o.jsx("p",{children:"Randomise or build your own session"})]}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsxs("button",{className:"cb-feature-card cb-card-progress ripple-btn",onClick:K=>{V(K),f("/client/personal-bests")},children:[o.jsx("div",{className:"cb-card-icon cb-icon-progress",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})})}),o.jsxs("div",{className:"cb-card-content",children:[o.jsx("h3",{children:"My Progress"}),o.jsx("p",{children:"Track personal bests and body metrics"})]}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsxs("button",{className:"cb-feature-card cb-card-consistency cb-card-has-preview ripple-btn",onClick:K=>{V(K),P("Consistency tracking coming soon!","info")},children:[o.jsxs("div",{className:"cb-card-top-row",children:[o.jsx("div",{className:"cb-card-icon cb-icon-consistency",children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})})}),o.jsx("div",{className:"cb-card-content",children:o.jsx("h3",{children:"Consistency"})}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]}),o.jsx("div",{className:"cb-card-preview-row",children:o.jsx("div",{className:"cb-week-rings",children:["M","T","W","T","F","S","S"].map((K,G)=>{const se=G<3?[55,42,30][G]:0;return o.jsxs("div",{className:`cb-week-ring ${G<3?"cb-week-ring-active":""}`,children:[o.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(60)].map((Y,fe)=>{const je=(fe*6-90)*(Math.PI/180),q=50+38*Math.cos(je),B=50+38*Math.sin(je),H=50+46*Math.cos(je),Z=50+46*Math.sin(je);return o.jsx("line",{x1:q,y1:B,x2:H,y2:Z,className:fe<se?"cb-week-tick-filled":"cb-week-tick-empty",strokeWidth:fe%5===0?"3":"2"},fe)})}),o.jsx("span",{children:K})]},G)})})}),o.jsx("p",{className:"cb-card-desc",children:"Weekly streaks and habit tracking"})]}),o.jsxs("button",{className:"cb-feature-card cb-card-leaderboard cb-card-locked ripple-btn",onClick:K=>{V(K),P("Leaderboard coming soon!","info")},children:[o.jsx("div",{className:"cb-card-icon cb-icon-leaderboard",children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M8 21h8"}),o.jsx("path",{d:"M12 17v4"}),o.jsx("path",{d:"M7 4h10l-1 9H8L7 4z"}),o.jsx("path",{d:"M17 4c0 0 2 0 2 2s-2 4-2 4"}),o.jsx("path",{d:"M7 4c0 0-2 0-2 2s2 4 2 4"})]})}),o.jsxs("div",{className:"cb-card-content",children:[o.jsx("h3",{children:"Leaderboard"}),o.jsx("p",{children:"Compete with your Core Buddies"})]}),o.jsx("span",{className:"cb-coming-soon",children:"Coming Soon"}),o.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]}),C&&o.jsxs("div",{className:`toast-notification ${C.type}`,children:[C.type==="info"&&o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),o.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),C.message]})]})}var Sg={exports:{}},a_;function I3(){return a_||(a_=1,(function(s,e){(function(t,a){s.exports=a()})(window,(function(){return(function(t){var a={};function i(c){if(a[c])return a[c].exports;var u=a[c]={i:c,l:!1,exports:{}};return t[c].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=t,i.c=a,i.d=function(c,u,f){i.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:f})},i.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},i.t=function(c,u){if(1&u&&(c=i(c)),8&u||4&u&&typeof c=="object"&&c&&c.__esModule)return c;var f=Object.create(null);if(i.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:c}),2&u&&typeof c!="string")for(var m in c)i.d(f,m,(function(b){return c[b]}).bind(null,m));return f},i.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return i.d(u,"a",u),u},i.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},i.p="/",i(i.s=90)})([function(t,a,i){var c=i(68);t.exports=function(u,f,m){return(f=c(f))in u?Object.defineProperty(u,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):u[f]=m,u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){function i(c){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},t.exports.__esModule=!0,t.exports.default=t.exports,i(c)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){if(!(i instanceof c))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(68);function u(f,m){for(var b=0;b<m.length;b++){var T=m[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(f,c(T.key),T)}}t.exports=function(f,m,b){return m&&u(f.prototype,m),b&&u(f,b),Object.defineProperty(f,"prototype",{writable:!1}),f},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(9).default,u=i(150);t.exports=function(f,m){if(m&&(c(m)=="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(f)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(38);t.exports=function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),f&&c(u,f)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(146)();t.exports=c;try{regeneratorRuntime=c}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=c:Function("r","regeneratorRuntime = r")(c)}},function(t,a){function i(c,u,f,m,b,T,E){try{var C=c[T](E),L=C.value}catch(P){return void f(P)}C.done?u(L):Promise.resolve(L).then(m,b)}t.exports=function(c){return function(){var u=this,f=arguments;return new Promise((function(m,b){var T=c.apply(u,f);function E(L){i(T,m,b,E,C,"next",L)}function C(L){i(T,m,b,E,C,"throw",L)}E(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(46),u=typeof self=="object"&&self&&self.Object===Object&&self,f=c||u||Function("return this")();t.exports=f},function(t,a){function i(c){return t.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t.exports.__esModule=!0,t.exports.default=t.exports,i(c)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i){var c=typeof i;return i!=null&&(c=="object"||c=="function")}},function(t,a){t.exports=function(i){return i!=null&&typeof i=="object"}},function(t,a){var i=Array.isArray;t.exports=i},function(t,a,i){var c=i(151);function u(){return t.exports=u=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(f,m,b){var T=c(f,m);if(T){var E=Object.getOwnPropertyDescriptor(T,m);return E.get?E.get.call(arguments.length<3?f:b):E.value}},t.exports.__esModule=!0,t.exports.default=t.exports,u.apply(null,arguments)}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(102),u=i(108);t.exports=function(f,m){var b=u(f,m);return c(b)?b:void 0}},function(t,a,i){var c=i(91),u=i(134)((function(f,m,b){c(f,m,b)}));t.exports=u},function(t,a,i){var c=i(152),u=i(153),f=i(66),m=i(154);t.exports=function(b){return c(b)||u(b)||f(b)||m()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(19),u=i(104),f=i(105),m=c?c.toStringTag:void 0;t.exports=function(b){return b==null?b===void 0?"[object Undefined]":"[object Null]":m&&m in Object(b)?u(b):f(b)}},function(t,a,i){var c=i(60),u=i(29);t.exports=function(f,m,b,T){var E=!b;b||(b={});for(var C=-1,L=m.length;++C<L;){var P=m[C],V=T?T(b[P],f[P],P,b,f):void 0;V===void 0&&(V=f[P]),E?u(b,P,V):c(b,P,V)}return b}},function(t,a,i){var c=i(8).Symbol;t.exports=c},function(t,a,i){var c=i(61),u=i(132),f=i(26);t.exports=function(m){return f(m)?c(m,!0):u(m)}},function(t,a,i){var c=i(92),u=i(93),f=i(94),m=i(95),b=i(96);function T(E){var C=-1,L=E==null?0:E.length;for(this.clear();++C<L;){var P=E[C];this.set(P[0],P[1])}}T.prototype.clear=c,T.prototype.delete=u,T.prototype.get=f,T.prototype.has=m,T.prototype.set=b,t.exports=T},function(t,a,i){var c=i(23);t.exports=function(u,f){for(var m=u.length;m--;)if(c(u[m][0],f))return m;return-1}},function(t,a){t.exports=function(i,c){return i===c||i!=i&&c!=c}},function(t,a,i){var c=i(14)(Object,"create");t.exports=c},function(t,a,i){var c=i(117);t.exports=function(u,f){var m=u.__data__;return c(f)?m[typeof f=="string"?"string":"hash"]:m.map}},function(t,a,i){var c=i(28),u=i(56);t.exports=function(f){return f!=null&&u(f.length)&&!c(f)}},function(t,a,i){var c=i(14)(i(8),"Map");t.exports=c},function(t,a,i){var c=i(17),u=i(10);t.exports=function(f){if(!u(f))return!1;var m=c(f);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}},function(t,a,i){var c=i(50);t.exports=function(u,f,m){f=="__proto__"&&c?c(u,f,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[f]=m}},function(t,a){t.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},function(t,a,i){var c=i(124);t.exports=function(u){var f=new u.constructor(u.byteLength);return new c(f).set(new c(u)),f}},function(t,a,i){var c=i(55)(Object.getPrototypeOf,Object);t.exports=c},function(t,a){var i=Object.prototype;t.exports=function(c){var u=c&&c.constructor;return c===(typeof u=="function"&&u.prototype||i)}},function(t,a,i){var c=i(126),u=i(11),f=Object.prototype,m=f.hasOwnProperty,b=f.propertyIsEnumerable,T=c((function(){return arguments})())?c:function(E){return u(E)&&m.call(E,"callee")&&!b.call(E,"callee")};t.exports=T},function(t,a,i){(function(c){var u=i(8),f=i(128),m=a&&!a.nodeType&&a,b=m&&typeof c=="object"&&c&&!c.nodeType&&c,T=b&&b.exports===m?u.Buffer:void 0,E=(T?T.isBuffer:void 0)||f;c.exports=E}).call(this,i(30)(t))},function(t,a){t.exports=function(i){return function(c){return i(c)}}},function(t,a,i){(function(c){var u=i(46),f=a&&!a.nodeType&&a,m=f&&typeof c=="object"&&c&&!c.nodeType&&c,b=m&&m.exports===f&&u.process,T=(function(){try{var E=m&&m.require&&m.require("util").types;return E||b&&b.binding&&b.binding("util")}catch{}})();c.exports=T}).call(this,i(30)(t))},function(t,a){function i(c,u){return t.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,m){return f.__proto__=m,f},t.exports.__esModule=!0,t.exports.default=t.exports,i(c,u)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(61),u=i(159),f=i(26);t.exports=function(m){return f(m)?c(m):u(m)}},function(t,a,i){var c=i(163),u=i(75),f=Object.prototype.propertyIsEnumerable,m=Object.getOwnPropertySymbols,b=m?function(T){return T==null?[]:(T=Object(T),c(m(T),(function(E){return f.call(T,E)})))}:u;t.exports=b},function(t,a){t.exports=function(i,c){for(var u=-1,f=c.length,m=i.length;++u<f;)i[m+u]=c[u];return i}},function(t,a,i){var c=i(166),u=i(27),f=i(167),m=i(168),b=i(169),T=i(17),E=i(47),C=E(c),L=E(u),P=E(f),V=E(m),F=E(b),K=T;(c&&K(new c(new ArrayBuffer(1)))!="[object DataView]"||u&&K(new u)!="[object Map]"||f&&K(f.resolve())!="[object Promise]"||m&&K(new m)!="[object Set]"||b&&K(new b)!="[object WeakMap]")&&(K=function(G){var se=T(G),Y=se=="[object Object]"?G.constructor:void 0,fe=Y?E(Y):"";if(fe)switch(fe){case C:return"[object DataView]";case L:return"[object Map]";case P:return"[object Promise]";case V:return"[object Set]";case F:return"[object WeakMap]"}return se}),t.exports=K},function(t,a,i){var c=i(12),u=i(180),f=i(181),m=i(184);t.exports=function(b,T){return c(b)?b:u(b,T)?[b]:f(m(b))}},function(t,a,i){var c=i(17),u=i(11);t.exports=function(f){return typeof f=="symbol"||u(f)&&c(f)=="[object Symbol]"}},function(t,a,i){var c=i(21),u=i(97),f=i(98),m=i(99),b=i(100),T=i(101);function E(C){var L=this.__data__=new c(C);this.size=L.size}E.prototype.clear=u,E.prototype.delete=f,E.prototype.get=m,E.prototype.has=b,E.prototype.set=T,t.exports=E},function(t,a,i){(function(c){var u=typeof c=="object"&&c&&c.Object===Object&&c;t.exports=u}).call(this,i(103))},function(t,a){var i=Function.prototype.toString;t.exports=function(c){if(c!=null){try{return i.call(c)}catch{}try{return c+""}catch{}}return""}},function(t,a,i){var c=i(109),u=i(116),f=i(118),m=i(119),b=i(120);function T(E){var C=-1,L=E==null?0:E.length;for(this.clear();++C<L;){var P=E[C];this.set(P[0],P[1])}}T.prototype.clear=c,T.prototype.delete=u,T.prototype.get=f,T.prototype.has=m,T.prototype.set=b,t.exports=T},function(t,a,i){var c=i(29),u=i(23);t.exports=function(f,m,b){(b!==void 0&&!u(f[m],b)||b===void 0&&!(m in f))&&c(f,m,b)}},function(t,a,i){var c=i(14),u=(function(){try{var f=c(Object,"defineProperty");return f({},"",{}),f}catch{}})();t.exports=u},function(t,a,i){(function(c){var u=i(8),f=a&&!a.nodeType&&a,m=f&&typeof c=="object"&&c&&!c.nodeType&&c,b=m&&m.exports===f?u.Buffer:void 0,T=b?b.allocUnsafe:void 0;c.exports=function(E,C){if(C)return E.slice();var L=E.length,P=T?T(L):new E.constructor(L);return E.copy(P),P}}).call(this,i(30)(t))},function(t,a,i){var c=i(31);t.exports=function(u,f){var m=f?c(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}},function(t,a){t.exports=function(i,c){var u=-1,f=i.length;for(c||(c=Array(f));++u<f;)c[u]=i[u];return c}},function(t,a,i){var c=i(125),u=i(32),f=i(33);t.exports=function(m){return typeof m.constructor!="function"||f(m)?{}:c(u(m))}},function(t,a){t.exports=function(i,c){return function(u){return i(c(u))}}},function(t,a){t.exports=function(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=9007199254740991}},function(t,a,i){var c=i(17),u=i(32),f=i(11),m=Function.prototype,b=Object.prototype,T=m.toString,E=b.hasOwnProperty,C=T.call(Object);t.exports=function(L){if(!f(L)||c(L)!="[object Object]")return!1;var P=u(L);if(P===null)return!0;var V=E.call(P,"constructor")&&P.constructor;return typeof V=="function"&&V instanceof V&&T.call(V)==C}},function(t,a,i){var c=i(129),u=i(36),f=i(37),m=f&&f.isTypedArray,b=m?u(m):c;t.exports=b},function(t,a){t.exports=function(i,c){if((c!=="constructor"||typeof i[c]!="function")&&c!="__proto__")return i[c]}},function(t,a,i){var c=i(29),u=i(23),f=Object.prototype.hasOwnProperty;t.exports=function(m,b,T){var E=m[b];f.call(m,b)&&u(E,T)&&(T!==void 0||b in m)||c(m,b,T)}},function(t,a,i){var c=i(131),u=i(34),f=i(12),m=i(35),b=i(62),T=i(58),E=Object.prototype.hasOwnProperty;t.exports=function(C,L){var P=f(C),V=!P&&u(C),F=!P&&!V&&m(C),K=!P&&!V&&!F&&T(C),G=P||V||F||K,se=G?c(C.length,String):[],Y=se.length;for(var fe in C)!L&&!E.call(C,fe)||G&&(fe=="length"||F&&(fe=="offset"||fe=="parent")||K&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||b(fe,Y))||se.push(fe);return se}},function(t,a){var i=/^(?:0|[1-9]\d*)$/;t.exports=function(c,u){var f=typeof c;return!!(u=u??9007199254740991)&&(f=="number"||f!="symbol"&&i.test(c))&&c>-1&&c%1==0&&c<u}},function(t,a){t.exports=function(i){return i}},function(t,a,i){var c=i(136),u=Math.max;t.exports=function(f,m,b){return m=u(m===void 0?f.length-1:m,0),function(){for(var T=arguments,E=-1,C=u(T.length-m,0),L=Array(C);++E<C;)L[E]=T[m+E];E=-1;for(var P=Array(m+1);++E<m;)P[E]=T[E];return P[m]=b(L),c(f,this,P)}}},function(t,a,i){var c=i(137),u=i(139)(c);t.exports=u},function(t,a,i){var c=i(67);t.exports=function(u,f){if(u){if(typeof u=="string")return c(u,f);var m={}.toString.call(u).slice(8,-1);return m==="Object"&&u.constructor&&(m=u.constructor.name),m==="Map"||m==="Set"?Array.from(u):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?c(u,f):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){(c==null||c>i.length)&&(c=i.length);for(var u=0,f=Array(c);u<c;u++)f[u]=i[u];return f},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(9).default,u=i(145);t.exports=function(f){var m=u(f,"string");return c(m)=="symbol"?m:m+""},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){this.v=i,this.k=c},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(71);function u(){var f,m,b=typeof Symbol=="function"?Symbol:{},T=b.iterator||"@@iterator",E=b.toStringTag||"@@toStringTag";function C(Y,fe,je,q){var B=fe&&fe.prototype instanceof P?fe:P,H=Object.create(B.prototype);return c(H,"_invoke",(function(Z,$,ee){var O,ke,Ie,te=0,ve=ee||[],Le=!1,De={p:0,n:0,v:f,a:Je,f:Je.bind(f,4),d:function(Q,ue){return O=Q,ke=0,Ie=f,De.n=ue,L}};function Je(Q,ue){for(ke=Q,Ie=ue,m=0;!Le&&te&&!ze&&m<ve.length;m++){var ze,Oe=ve[m],de=De.p,Be=Oe[2];Q>3?(ze=Be===ue)&&(Ie=Oe[(ke=Oe[4])?5:(ke=3,3)],Oe[4]=Oe[5]=f):Oe[0]<=de&&((ze=Q<2&&de<Oe[1])?(ke=0,De.v=ue,De.n=Oe[1]):de<Be&&(ze=Q<3||Oe[0]>ue||ue>Be)&&(Oe[4]=Q,Oe[5]=ue,De.n=Be,ke=0))}if(ze||Q>1)return L;throw Le=!0,ue}return function(Q,ue,ze){if(te>1)throw TypeError("Generator is already running");for(Le&&ue===1&&Je(ue,ze),ke=ue,Ie=ze;(m=ke<2?f:Ie)||!Le;){O||(ke?ke<3?(ke>1&&(De.n=-1),Je(ke,Ie)):De.n=Ie:De.v=Ie);try{if(te=2,O){if(ke||(Q="next"),m=O[Q]){if(!(m=m.call(O,Ie)))throw TypeError("iterator result is not an object");if(!m.done)return m;Ie=m.value,ke<2&&(ke=0)}else ke===1&&(m=O.return)&&m.call(O),ke<2&&(Ie=TypeError("The iterator does not provide a '"+Q+"' method"),ke=1);O=f}else if((m=(Le=De.n<0)?Ie:Z.call($,De))!==L)break}catch(Oe){O=f,ke=1,Ie=Oe}finally{te=1}}return{value:m,done:Le}}})(Y,je,q),!0),H}var L={};function P(){}function V(){}function F(){}m=Object.getPrototypeOf;var K=[][T]?m(m([][T]())):(c(m={},T,(function(){return this})),m),G=F.prototype=P.prototype=Object.create(K);function se(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,F):(Y.__proto__=F,c(Y,E,"GeneratorFunction")),Y.prototype=Object.create(G),Y}return V.prototype=F,c(G,"constructor",F),c(F,"constructor",V),V.displayName="GeneratorFunction",c(F,E,"GeneratorFunction"),c(G),c(G,E,"Generator"),c(G,T,(function(){return this})),c(G,"toString",(function(){return"[object Generator]"})),(t.exports=u=function(){return{w:C,m:se}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){function i(c,u,f,m){var b=Object.defineProperty;try{b({},"",{})}catch{b=0}t.exports=i=function(T,E,C,L){function P(V,F){i(T,V,(function(K){return this._invoke(V,F,K)}))}E?b?b(T,E,{value:C,enumerable:!L,configurable:!L,writable:!L}):T[E]=C:(P("next",0),P("throw",1),P("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,i(c,u,f,m)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(70),u=i(73);t.exports=function(f,m,b,T,E){return new u(c().w(f,m,b,T),E||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(69),u=i(71);t.exports=function f(m,b){function T(C,L,P,V){try{var F=m[C](L),K=F.value;return K instanceof c?b.resolve(K.v).then((function(G){T("next",G,P,V)}),(function(G){T("throw",G,P,V)})):b.resolve(K).then((function(G){F.value=G,P(F)}),(function(G){return T("throw",G,P,V)}))}catch(G){V(G)}}var E;this.next||(u(f.prototype),u(f.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),u(this,"_invoke",(function(C,L,P){function V(){return new b((function(F,K){T(C,P,F,K)}))}return E=E?E.then(V,V):V()}),!0)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){for(var u=-1,f=i==null?0:i.length,m=Array(f);++u<f;)m[u]=c(i[u],u,i);return m}},function(t,a){t.exports=function(){return[]}},function(t,a,i){var c=i(41),u=i(32),f=i(40),m=i(75),b=Object.getOwnPropertySymbols?function(T){for(var E=[];T;)c(E,f(T)),T=u(T);return E}:m;t.exports=b},function(t,a,i){var c=i(41),u=i(12);t.exports=function(f,m,b){var T=m(f);return u(f)?T:c(T,b(f))}},function(t,a,i){var c=i(77),u=i(76),f=i(20);t.exports=function(m){return c(m,f,u)}},function(t,a,i){var c=i(44);t.exports=function(u){if(typeof u=="string"||c(u))return u;var f=u+"";return f=="0"&&1/u==-1/0?"-0":f}},function(t,a,i){var c=i(142),u=i(143),f=i(66),m=i(144);t.exports=function(b,T){return c(b)||u(b,T)||f(b,T)||m()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(155);t.exports=function(u,f){if(u==null)return{};var m,b,T=c(u,f);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(u);for(b=0;b<E.length;b++)m=E[b],f.indexOf(m)===-1&&{}.propertyIsEnumerable.call(u,m)&&(T[m]=u[m])}return T},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(74),u=i(156),f=i(179),m=i(43),b=i(18),T=i(190),E=i(191),C=i(78),L=E((function(P,V){var F={};if(P==null)return F;var K=!1;V=c(V,(function(se){return se=m(se,P),K||(K=se.length>1),se})),b(P,C(P),F),K&&(F=u(F,7,T));for(var G=V.length;G--;)f(F,V[G]);return F}));t.exports=L},function(t,a,i){var c=i(1),u=i(38),f=i(195),m=i(196);function b(T){var E=typeof Map=="function"?new Map:void 0;return t.exports=b=function(C){if(C===null||!f(C))return C;if(typeof C!="function")throw new TypeError("Super expression must either be null or a function");if(E!==void 0){if(E.has(C))return E.get(C);E.set(C,L)}function L(){return m(C,arguments,c(this).constructor)}return L.prototype=Object.create(C.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),u(L,C)},t.exports.__esModule=!0,t.exports.default=t.exports,b(T)}t.exports=b,t.exports.__esModule=!0,t.exports.default=t.exports},,,,,,,function(t,a,i){t.exports=i(198)},function(t,a,i){var c=i(45),u=i(49),f=i(121),m=i(123),b=i(10),T=i(20),E=i(59);t.exports=function C(L,P,V,F,K){L!==P&&f(P,(function(G,se){if(K||(K=new c),b(G))m(L,P,se,V,C,F,K);else{var Y=F?F(E(L,se),G,se+"",L,P,K):void 0;Y===void 0&&(Y=G),u(L,se,Y)}}),T)}},function(t,a){t.exports=function(){this.__data__=[],this.size=0}},function(t,a,i){var c=i(22),u=Array.prototype.splice;t.exports=function(f){var m=this.__data__,b=c(m,f);return!(b<0)&&(b==m.length-1?m.pop():u.call(m,b,1),--this.size,!0)}},function(t,a,i){var c=i(22);t.exports=function(u){var f=this.__data__,m=c(f,u);return m<0?void 0:f[m][1]}},function(t,a,i){var c=i(22);t.exports=function(u){return c(this.__data__,u)>-1}},function(t,a,i){var c=i(22);t.exports=function(u,f){var m=this.__data__,b=c(m,u);return b<0?(++this.size,m.push([u,f])):m[b][1]=f,this}},function(t,a,i){var c=i(21);t.exports=function(){this.__data__=new c,this.size=0}},function(t,a){t.exports=function(i){var c=this.__data__,u=c.delete(i);return this.size=c.size,u}},function(t,a){t.exports=function(i){return this.__data__.get(i)}},function(t,a){t.exports=function(i){return this.__data__.has(i)}},function(t,a,i){var c=i(21),u=i(27),f=i(48);t.exports=function(m,b){var T=this.__data__;if(T instanceof c){var E=T.__data__;if(!u||E.length<199)return E.push([m,b]),this.size=++T.size,this;T=this.__data__=new f(E)}return T.set(m,b),this.size=T.size,this}},function(t,a,i){var c=i(28),u=i(106),f=i(10),m=i(47),b=/^\[object .+?Constructor\]$/,T=Function.prototype,E=Object.prototype,C=T.toString,L=E.hasOwnProperty,P=RegExp("^"+C.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(V){return!(!f(V)||u(V))&&(c(V)?P:b).test(m(V))}},function(t,a){var i;i=(function(){return this})();try{i=i||new Function("return this")()}catch{typeof window=="object"&&(i=window)}t.exports=i},function(t,a,i){var c=i(19),u=Object.prototype,f=u.hasOwnProperty,m=u.toString,b=c?c.toStringTag:void 0;t.exports=function(T){var E=f.call(T,b),C=T[b];try{T[b]=void 0;var L=!0}catch{}var P=m.call(T);return L&&(E?T[b]=C:delete T[b]),P}},function(t,a){var i=Object.prototype.toString;t.exports=function(c){return i.call(c)}},function(t,a,i){var c,u=i(107),f=(c=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";t.exports=function(m){return!!f&&f in m}},function(t,a,i){var c=i(8)["__core-js_shared__"];t.exports=c},function(t,a){t.exports=function(i,c){return i?.[c]}},function(t,a,i){var c=i(110),u=i(21),f=i(27);t.exports=function(){this.size=0,this.__data__={hash:new c,map:new(f||u),string:new c}}},function(t,a,i){var c=i(111),u=i(112),f=i(113),m=i(114),b=i(115);function T(E){var C=-1,L=E==null?0:E.length;for(this.clear();++C<L;){var P=E[C];this.set(P[0],P[1])}}T.prototype.clear=c,T.prototype.delete=u,T.prototype.get=f,T.prototype.has=m,T.prototype.set=b,t.exports=T},function(t,a,i){var c=i(24);t.exports=function(){this.__data__=c?c(null):{},this.size=0}},function(t,a){t.exports=function(i){var c=this.has(i)&&delete this.__data__[i];return this.size-=c?1:0,c}},function(t,a,i){var c=i(24),u=Object.prototype.hasOwnProperty;t.exports=function(f){var m=this.__data__;if(c){var b=m[f];return b==="__lodash_hash_undefined__"?void 0:b}return u.call(m,f)?m[f]:void 0}},function(t,a,i){var c=i(24),u=Object.prototype.hasOwnProperty;t.exports=function(f){var m=this.__data__;return c?m[f]!==void 0:u.call(m,f)}},function(t,a,i){var c=i(24);t.exports=function(u,f){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=c&&f===void 0?"__lodash_hash_undefined__":f,this}},function(t,a,i){var c=i(25);t.exports=function(u){var f=c(this,u).delete(u);return this.size-=f?1:0,f}},function(t,a){t.exports=function(i){var c=typeof i;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?i!=="__proto__":i===null}},function(t,a,i){var c=i(25);t.exports=function(u){return c(this,u).get(u)}},function(t,a,i){var c=i(25);t.exports=function(u){return c(this,u).has(u)}},function(t,a,i){var c=i(25);t.exports=function(u,f){var m=c(this,u),b=m.size;return m.set(u,f),this.size+=m.size==b?0:1,this}},function(t,a,i){var c=i(122)();t.exports=c},function(t,a){t.exports=function(i){return function(c,u,f){for(var m=-1,b=Object(c),T=f(c),E=T.length;E--;){var C=T[i?E:++m];if(u(b[C],C,b)===!1)break}return c}}},function(t,a,i){var c=i(49),u=i(51),f=i(52),m=i(53),b=i(54),T=i(34),E=i(12),C=i(127),L=i(35),P=i(28),V=i(10),F=i(57),K=i(58),G=i(59),se=i(130);t.exports=function(Y,fe,je,q,B,H,Z){var $=G(Y,je),ee=G(fe,je),O=Z.get(ee);if(O)c(Y,je,O);else{var ke=H?H($,ee,je+"",Y,fe,Z):void 0,Ie=ke===void 0;if(Ie){var te=E(ee),ve=!te&&L(ee),Le=!te&&!ve&&K(ee);ke=ee,te||ve||Le?E($)?ke=$:C($)?ke=m($):ve?(Ie=!1,ke=u(ee,!0)):Le?(Ie=!1,ke=f(ee,!0)):ke=[]:F(ee)||T(ee)?(ke=$,T($)?ke=se($):V($)&&!P($)||(ke=b(ee))):Ie=!1}Ie&&(Z.set(ee,ke),B(ke,ee,q,H,Z),Z.delete(ee)),c(Y,je,ke)}}},function(t,a,i){var c=i(8).Uint8Array;t.exports=c},function(t,a,i){var c=i(10),u=Object.create,f=(function(){function m(){}return function(b){if(!c(b))return{};if(u)return u(b);m.prototype=b;var T=new m;return m.prototype=void 0,T}})();t.exports=f},function(t,a,i){var c=i(17),u=i(11);t.exports=function(f){return u(f)&&c(f)=="[object Arguments]"}},function(t,a,i){var c=i(26),u=i(11);t.exports=function(f){return u(f)&&c(f)}},function(t,a){t.exports=function(){return!1}},function(t,a,i){var c=i(17),u=i(56),f=i(11),m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m["[object Arguments]"]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m["[object Map]"]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1,t.exports=function(b){return f(b)&&u(b.length)&&!!m[c(b)]}},function(t,a,i){var c=i(18),u=i(20);t.exports=function(f){return c(f,u(f))}},function(t,a){t.exports=function(i,c){for(var u=-1,f=Array(i);++u<i;)f[u]=c(u);return f}},function(t,a,i){var c=i(10),u=i(33),f=i(133),m=Object.prototype.hasOwnProperty;t.exports=function(b){if(!c(b))return f(b);var T=u(b),E=[];for(var C in b)(C!="constructor"||!T&&m.call(b,C))&&E.push(C);return E}},function(t,a){t.exports=function(i){var c=[];if(i!=null)for(var u in Object(i))c.push(u);return c}},function(t,a,i){var c=i(135),u=i(140);t.exports=function(f){return c((function(m,b){var T=-1,E=b.length,C=E>1?b[E-1]:void 0,L=E>2?b[2]:void 0;for(C=f.length>3&&typeof C=="function"?(E--,C):void 0,L&&u(b[0],b[1],L)&&(C=E<3?void 0:C,E=1),m=Object(m);++T<E;){var P=b[T];P&&f(m,P,T,C)}return m}))}},function(t,a,i){var c=i(63),u=i(64),f=i(65);t.exports=function(m,b){return f(u(m,b,c),m+"")}},function(t,a){t.exports=function(i,c,u){switch(u.length){case 0:return i.call(c);case 1:return i.call(c,u[0]);case 2:return i.call(c,u[0],u[1]);case 3:return i.call(c,u[0],u[1],u[2])}return i.apply(c,u)}},function(t,a,i){var c=i(138),u=i(50),f=i(63),m=u?function(b,T){return u(b,"toString",{configurable:!0,enumerable:!1,value:c(T),writable:!0})}:f;t.exports=m},function(t,a){t.exports=function(i){return function(){return i}}},function(t,a){var i=Date.now;t.exports=function(c){var u=0,f=0;return function(){var m=i(),b=16-(m-f);if(f=m,b>0){if(++u>=800)return arguments[0]}else u=0;return c.apply(void 0,arguments)}}},function(t,a,i){var c=i(23),u=i(26),f=i(62),m=i(10);t.exports=function(b,T,E){if(!m(E))return!1;var C=typeof T;return!!(C=="number"?u(E)&&f(T,E.length):C=="string"&&T in E)&&c(E[T],b)}},function(t,a){typeof window<"u"&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)})),typeof Math.imul!="function"&&(Math.imul=function(i,c){var u=65535&i,f=65535&c;return u*f+((i>>>16&65535)*f+u*(c>>>16&65535)<<16>>>0)|0}),typeof Object.assign!="function"&&(Object.assign=function(i){if(i===null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(i),u=1;u<arguments.length;u++){var f=arguments[u];if(f!==null)for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(c[m]=f[m])}return c})},function(t,a){t.exports=function(i){if(Array.isArray(i))return i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){var u=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(u!=null){var f,m,b,T,E=[],C=!0,L=!1;try{if(b=(u=u.call(i)).next,c===0){if(Object(u)!==u)return;C=!1}else for(;!(C=(f=b.call(u)).done)&&(E.push(f.value),E.length!==c);C=!0);}catch(P){L=!0,m=P}finally{try{if(!C&&u.return!=null&&(T=u.return(),Object(T)!==T))return}finally{if(L)throw m}}return E}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(9).default;t.exports=function(u,f){if(c(u)!="object"||!u)return u;var m=u[Symbol.toPrimitive];if(m!==void 0){var b=m.call(u,f||"default");if(c(b)!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(69),u=i(70),f=i(147),m=i(72),b=i(73),T=i(148),E=i(149);function C(){var L=u(),P=L.m(C),V=(Object.getPrototypeOf?Object.getPrototypeOf(P):P.__proto__).constructor;function F(se){var Y=typeof se=="function"&&se.constructor;return!!Y&&(Y===V||(Y.displayName||Y.name)==="GeneratorFunction")}var K={throw:1,return:2,break:3,continue:3};function G(se){var Y,fe;return function(je){Y||(Y={stop:function(){return fe(je.a,2)},catch:function(){return je.v},abrupt:function(q,B){return fe(je.a,K[q],B)},delegateYield:function(q,B,H){return Y.resultName=B,fe(je.d,E(q),H)},finish:function(q){return fe(je.f,q)}},fe=function(q,B,H){je.p=Y.prev,je.n=Y.next;try{return q(B,H)}finally{Y.next=je.n}}),Y.resultName&&(Y[Y.resultName]=je.v,Y.resultName=void 0),Y.sent=je.v,Y.next=je.n;try{return se.call(this,Y)}finally{je.p=Y.prev,je.n=Y.next}}}return(t.exports=C=function(){return{wrap:function(se,Y,fe,je){return L.w(G(se),Y,fe,je&&je.reverse())},isGeneratorFunction:F,mark:L.m,awrap:function(se,Y){return new c(se,Y)},AsyncIterator:b,async:function(se,Y,fe,je,q){return(F(Y)?m:f)(G(se),Y,fe,je,q)},keys:T,values:E}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=C,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(72);t.exports=function(u,f,m,b,T){var E=c(u,f,m,b,T);return E.next().then((function(C){return C.done?C.value:E.next()}))},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i){var c=Object(i),u=[];for(var f in c)u.unshift(f);return function m(){for(;u.length;)if((f=u.pop())in c)return m.value=f,m.done=!1,m;return m.done=!0,m}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(9).default;t.exports=function(u){if(u!=null){var f=u[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],m=0;if(f)return f.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length))return{next:function(){return u&&m>=u.length&&(u=void 0),{value:u&&u[m++],done:!u}}}}throw new TypeError(c(u)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(1);t.exports=function(u,f){for(;!{}.hasOwnProperty.call(u,f)&&(u=c(u))!==null;);return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(67);t.exports=function(u){if(Array.isArray(u))return c(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){t.exports=function(i,c){if(i==null)return{};var u={};for(var f in i)if({}.hasOwnProperty.call(i,f)){if(c.indexOf(f)!==-1)continue;u[f]=i[f]}return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(45),u=i(157),f=i(60),m=i(158),b=i(161),T=i(51),E=i(53),C=i(162),L=i(164),P=i(165),V=i(78),F=i(42),K=i(170),G=i(171),se=i(54),Y=i(12),fe=i(35),je=i(175),q=i(10),B=i(177),H=i(39),Z=i(20),$={};$["[object Arguments]"]=$["[object Array]"]=$["[object ArrayBuffer]"]=$["[object DataView]"]=$["[object Boolean]"]=$["[object Date]"]=$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Map]"]=$["[object Number]"]=$["[object Object]"]=$["[object RegExp]"]=$["[object Set]"]=$["[object String]"]=$["[object Symbol]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$["[object Error]"]=$["[object Function]"]=$["[object WeakMap]"]=!1,t.exports=function ee(O,ke,Ie,te,ve,Le){var De,Je=1&ke,Q=2&ke,ue=4&ke;if(Ie&&(De=ve?Ie(O,te,ve,Le):Ie(O)),De!==void 0)return De;if(!q(O))return O;var ze=Y(O);if(ze){if(De=K(O),!Je)return E(O,De)}else{var Oe=F(O),de=Oe=="[object Function]"||Oe=="[object GeneratorFunction]";if(fe(O))return T(O,Je);if(Oe=="[object Object]"||Oe=="[object Arguments]"||de&&!ve){if(De=Q||de?{}:se(O),!Je)return Q?L(O,b(De,O)):C(O,m(De,O))}else{if(!$[Oe])return ve?O:{};De=G(O,Oe,Je)}}Le||(Le=new c);var Be=Le.get(O);if(Be)return Be;Le.set(O,De),B(O)?O.forEach((function(ge){De.add(ee(ge,ke,Ie,ge,O,Le))})):je(O)&&O.forEach((function(ge,be){De.set(be,ee(ge,ke,Ie,be,O,Le))}));var le=ze?void 0:(ue?Q?V:P:Q?Z:H)(O);return u(le||O,(function(ge,be){le&&(ge=O[be=ge]),f(De,be,ee(ge,ke,Ie,be,O,Le))})),De}},function(t,a){t.exports=function(i,c){for(var u=-1,f=i==null?0:i.length;++u<f&&c(i[u],u,i)!==!1;);return i}},function(t,a,i){var c=i(18),u=i(39);t.exports=function(f,m){return f&&c(m,u(m),f)}},function(t,a,i){var c=i(33),u=i(160),f=Object.prototype.hasOwnProperty;t.exports=function(m){if(!c(m))return u(m);var b=[];for(var T in Object(m))f.call(m,T)&&T!="constructor"&&b.push(T);return b}},function(t,a,i){var c=i(55)(Object.keys,Object);t.exports=c},function(t,a,i){var c=i(18),u=i(20);t.exports=function(f,m){return f&&c(m,u(m),f)}},function(t,a,i){var c=i(18),u=i(40);t.exports=function(f,m){return c(f,u(f),m)}},function(t,a){t.exports=function(i,c){for(var u=-1,f=i==null?0:i.length,m=0,b=[];++u<f;){var T=i[u];c(T,u,i)&&(b[m++]=T)}return b}},function(t,a,i){var c=i(18),u=i(76);t.exports=function(f,m){return c(f,u(f),m)}},function(t,a,i){var c=i(77),u=i(40),f=i(39);t.exports=function(m){return c(m,f,u)}},function(t,a,i){var c=i(14)(i(8),"DataView");t.exports=c},function(t,a,i){var c=i(14)(i(8),"Promise");t.exports=c},function(t,a,i){var c=i(14)(i(8),"Set");t.exports=c},function(t,a,i){var c=i(14)(i(8),"WeakMap");t.exports=c},function(t,a){var i=Object.prototype.hasOwnProperty;t.exports=function(c){var u=c.length,f=new c.constructor(u);return u&&typeof c[0]=="string"&&i.call(c,"index")&&(f.index=c.index,f.input=c.input),f}},function(t,a,i){var c=i(31),u=i(172),f=i(173),m=i(174),b=i(52);t.exports=function(T,E,C){var L=T.constructor;switch(E){case"[object ArrayBuffer]":return c(T);case"[object Boolean]":case"[object Date]":return new L(+T);case"[object DataView]":return u(T,C);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return b(T,C);case"[object Map]":return new L;case"[object Number]":case"[object String]":return new L(T);case"[object RegExp]":return f(T);case"[object Set]":return new L;case"[object Symbol]":return m(T)}}},function(t,a,i){var c=i(31);t.exports=function(u,f){var m=f?c(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}},function(t,a){var i=/\w*$/;t.exports=function(c){var u=new c.constructor(c.source,i.exec(c));return u.lastIndex=c.lastIndex,u}},function(t,a,i){var c=i(19),u=c?c.prototype:void 0,f=u?u.valueOf:void 0;t.exports=function(m){return f?Object(f.call(m)):{}}},function(t,a,i){var c=i(176),u=i(36),f=i(37),m=f&&f.isMap,b=m?u(m):c;t.exports=b},function(t,a,i){var c=i(42),u=i(11);t.exports=function(f){return u(f)&&c(f)=="[object Map]"}},function(t,a,i){var c=i(178),u=i(36),f=i(37),m=f&&f.isSet,b=m?u(m):c;t.exports=b},function(t,a,i){var c=i(42),u=i(11);t.exports=function(f){return u(f)&&c(f)=="[object Set]"}},function(t,a,i){var c=i(43),u=i(186),f=i(187),m=i(79);t.exports=function(b,T){return T=c(T,b),(b=f(b,T))==null||delete b[m(u(T))]}},function(t,a,i){var c=i(12),u=i(44),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;t.exports=function(b,T){if(c(b))return!1;var E=typeof b;return!(E!="number"&&E!="symbol"&&E!="boolean"&&b!=null&&!u(b))||m.test(b)||!f.test(b)||T!=null&&b in Object(T)}},function(t,a,i){var c=i(182),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,m=c((function(b){var T=[];return b.charCodeAt(0)===46&&T.push(""),b.replace(u,(function(E,C,L,P){T.push(L?P.replace(f,"$1"):C||E)})),T}));t.exports=m},function(t,a,i){var c=i(183);t.exports=function(u){var f=c(u,(function(b){return m.size===500&&m.clear(),b})),m=f.cache;return f}},function(t,a,i){var c=i(48);function u(f,m){if(typeof f!="function"||m!=null&&typeof m!="function")throw new TypeError("Expected a function");var b=function(){var T=arguments,E=m?m.apply(this,T):T[0],C=b.cache;if(C.has(E))return C.get(E);var L=f.apply(this,T);return b.cache=C.set(E,L)||C,L};return b.cache=new(u.Cache||c),b}u.Cache=c,t.exports=u},function(t,a,i){var c=i(185);t.exports=function(u){return u==null?"":c(u)}},function(t,a,i){var c=i(19),u=i(74),f=i(12),m=i(44),b=c?c.prototype:void 0,T=b?b.toString:void 0;t.exports=function E(C){if(typeof C=="string")return C;if(f(C))return u(C,E)+"";if(m(C))return T?T.call(C):"";var L=C+"";return L=="0"&&1/C==-1/0?"-0":L}},function(t,a){t.exports=function(i){var c=i==null?0:i.length;return c?i[c-1]:void 0}},function(t,a,i){var c=i(188),u=i(189);t.exports=function(f,m){return m.length<2?f:c(f,u(m,0,-1))}},function(t,a,i){var c=i(43),u=i(79);t.exports=function(f,m){for(var b=0,T=(m=c(m,f)).length;f!=null&&b<T;)f=f[u(m[b++])];return b&&b==T?f:void 0}},function(t,a){t.exports=function(i,c,u){var f=-1,m=i.length;c<0&&(c=-c>m?0:m+c),(u=u>m?m:u)<0&&(u+=m),m=c>u?0:u-c>>>0,c>>>=0;for(var b=Array(m);++f<m;)b[f]=i[f+c];return b}},function(t,a,i){var c=i(57);t.exports=function(u){return c(u)?void 0:u}},function(t,a,i){var c=i(192),u=i(64),f=i(65);t.exports=function(m){return f(u(m,void 0,c),m+"")}},function(t,a,i){var c=i(193);t.exports=function(u){return u!=null&&u.length?c(u,1):[]}},function(t,a,i){var c=i(41),u=i(194);t.exports=function f(m,b,T,E,C){var L=-1,P=m.length;for(T||(T=u),C||(C=[]);++L<P;){var V=m[L];b>0&&T(V)?b>1?f(V,b-1,T,E,C):c(C,V):E||(C[C.length]=V)}return C}},function(t,a,i){var c=i(19),u=i(34),f=i(12),m=c?c.isConcatSpreadable:void 0;t.exports=function(b){return f(b)||u(b)||!!(m&&b&&b[m])}},function(t,a){t.exports=function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){var c=i(197),u=i(38);t.exports=function(f,m,b){if(c())return Reflect.construct.apply(null,arguments);var T=[null];T.push.apply(T,m);var E=new(f.bind.apply(f,T));return b&&u(E,b.prototype),E},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a){function i(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(t.exports=i=function(){return!!c},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,a,i){i.r(a),i.d(a,"BarcodeDecoder",(function(){return Rl})),i.d(a,"Readers",(function(){return m})),i.d(a,"CameraAccess",(function(){return Co})),i.d(a,"ImageDebug",(function(){return ia})),i.d(a,"ImageWrapper",(function(){return An})),i.d(a,"ResultCollector",(function(){return ua}));var c={};i.r(c),i.d(c,"create",(function(){return B})),i.d(c,"clone",(function(){return H})),i.d(c,"copy",(function(){return Z})),i.d(c,"identity",(function(){return $})),i.d(c,"fromValues",(function(){return ee})),i.d(c,"set",(function(){return O})),i.d(c,"transpose",(function(){return ke})),i.d(c,"invert",(function(){return Ie})),i.d(c,"adjoint",(function(){return te})),i.d(c,"determinant",(function(){return ve})),i.d(c,"multiply",(function(){return Le})),i.d(c,"rotate",(function(){return De})),i.d(c,"scale",(function(){return Je})),i.d(c,"fromRotation",(function(){return Q})),i.d(c,"fromScaling",(function(){return ue})),i.d(c,"str",(function(){return ze})),i.d(c,"frob",(function(){return Oe})),i.d(c,"LDU",(function(){return de})),i.d(c,"add",(function(){return Be})),i.d(c,"subtract",(function(){return le})),i.d(c,"exactEquals",(function(){return ge})),i.d(c,"equals",(function(){return be})),i.d(c,"multiplyScalar",(function(){return st})),i.d(c,"multiplyScalarAndAdd",(function(){return Te})),i.d(c,"mul",(function(){return dt})),i.d(c,"sub",(function(){return Tt}));var u={};i.r(u),i.d(u,"create",(function(){return Nt})),i.d(u,"clone",(function(){return Ee})),i.d(u,"fromValues",(function(){return Ue})),i.d(u,"copy",(function(){return X})),i.d(u,"set",(function(){return Ce})),i.d(u,"add",(function(){return Ke})),i.d(u,"subtract",(function(){return $e})),i.d(u,"multiply",(function(){return Ve})),i.d(u,"divide",(function(){return it})),i.d(u,"ceil",(function(){return xt})),i.d(u,"floor",(function(){return rt})),i.d(u,"min",(function(){return tn})),i.d(u,"max",(function(){return vn})),i.d(u,"round",(function(){return Fn})),i.d(u,"scale",(function(){return Jn})),i.d(u,"scaleAndAdd",(function(){return qn})),i.d(u,"distance",(function(){return ks})),i.d(u,"squaredDistance",(function(){return hn})),i.d(u,"length",(function(){return We})),i.d(u,"squaredLength",(function(){return et})),i.d(u,"negate",(function(){return at})),i.d(u,"inverse",(function(){return jt})),i.d(u,"normalize",(function(){return _t})),i.d(u,"dot",(function(){return At})),i.d(u,"cross",(function(){return yt})),i.d(u,"lerp",(function(){return ae})),i.d(u,"random",(function(){return xe})),i.d(u,"transformMat2",(function(){return lt})),i.d(u,"transformMat2d",(function(){return ht})),i.d(u,"transformMat3",(function(){return Pt})),i.d(u,"transformMat4",(function(){return _n})),i.d(u,"rotate",(function(){return nn})),i.d(u,"angle",(function(){return en})),i.d(u,"signedAngle",(function(){return pn})),i.d(u,"zero",(function(){return wn})),i.d(u,"str",(function(){return Gn})),i.d(u,"exactEquals",(function(){return ls})),i.d(u,"equals",(function(){return me})),i.d(u,"len",(function(){return tt})),i.d(u,"sub",(function(){return Ze})),i.d(u,"mul",(function(){return pt})),i.d(u,"div",(function(){return wt})),i.d(u,"dist",(function(){return Ut})),i.d(u,"sqrDist",(function(){return Xt})),i.d(u,"sqrLen",(function(){return Wt})),i.d(u,"forEach",(function(){return kn}));var f={};i.r(f),i.d(f,"create",(function(){return he})),i.d(f,"clone",(function(){return ct})),i.d(f,"length",(function(){return Ot})),i.d(f,"fromValues",(function(){return Bt})),i.d(f,"copy",(function(){return Un})),i.d(f,"set",(function(){return Cn})),i.d(f,"add",(function(){return Bn})),i.d(f,"subtract",(function(){return cs})),i.d(f,"multiply",(function(){return ys})),i.d(f,"divide",(function(){return ns})),i.d(f,"ceil",(function(){return Ps})),i.d(f,"floor",(function(){return Hn})),i.d(f,"min",(function(){return qa})),i.d(f,"max",(function(){return Ti})),i.d(f,"round",(function(){return cr})),i.d(f,"scale",(function(){return Rt})),i.d(f,"scaleAndAdd",(function(){return Sr})),i.d(f,"distance",(function(){return ur})),i.d(f,"squaredDistance",(function(){return Br})),i.d(f,"squaredLength",(function(){return Ei})),i.d(f,"negate",(function(){return Ha})),i.d(f,"inverse",(function(){return Qs})),i.d(f,"normalize",(function(){return ss})),i.d(f,"dot",(function(){return rs})),i.d(f,"cross",(function(){return $a})),i.d(f,"lerp",(function(){return bl})),i.d(f,"slerp",(function(){return Sn})),i.d(f,"hermite",(function(){return Ni})),i.d(f,"bezier",(function(){return sa})),i.d(f,"random",(function(){return ji})),i.d(f,"transformMat4",(function(){return Xs})),i.d(f,"transformMat3",(function(){return yo})),i.d(f,"transformQuat",(function(){return lc})),i.d(f,"rotateX",(function(){return xl})),i.d(f,"rotateY",(function(){return Wa})),i.d(f,"rotateZ",(function(){return cc})),i.d(f,"angle",(function(){return Ga})),i.d(f,"zero",(function(){return Js})),i.d(f,"str",(function(){return uc})),i.d(f,"exactEquals",(function(){return _l})),i.d(f,"equals",(function(){return wl})),i.d(f,"sub",(function(){return vo})),i.d(f,"mul",(function(){return dc})),i.d(f,"div",(function(){return Ya})),i.d(f,"dist",(function(){return bo})),i.d(f,"sqrDist",(function(){return zr})),i.d(f,"len",(function(){return Sl})),i.d(f,"sqrLen",(function(){return Tr})),i.d(f,"forEach",(function(){return Ka}));var m={};i.r(m),i.d(m,"BarcodeReader",(function(){return hr})),i.d(m,"TwoOfFiveReader",(function(){return jl})),i.d(m,"NewCodabarReader",(function(){return Ls})),i.d(m,"Code128Reader",(function(){return kl})),i.d(m,"Code32Reader",(function(){return gn})),i.d(m,"Code39Reader",(function(){return ot})),i.d(m,"Code39VINReader",(function(){return Nr})),i.d(m,"Code93Reader",(function(){return Mi})),i.d(m,"EAN2Reader",(function(){return yu})),i.d(m,"EAN5Reader",(function(){return xu})),i.d(m,"EAN8Reader",(function(){return _u})),i.d(m,"EANReader",(function(){return Hr})),i.d(m,"I2of5Reader",(function(){return ah})),i.d(m,"PharmacodeReader",(function(){return gc})),i.d(m,"UPCEReader",(function(){return yc})),i.d(m,"UPCReader",(function(){return Ii}));var b=i(9),T=i.n(b),E=i(15),C=i.n(E),L=(i(141),i(80)),P=i.n(L),V=i(2),F=i.n(V),K=i(3),G=i.n(K),se=i(0),Y=i.n(se),fe=typeof Float32Array<"u"?Float32Array:Array,je=Math.random;function q(g){return g>=0?Math.round(g):g%.5==0?Math.floor(g):Math.round(g)}function B(){var g=new fe(4);return fe!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}function H(g){var x=new fe(4);return x[0]=g[0],x[1]=g[1],x[2]=g[2],x[3]=g[3],x}function Z(g,x){return g[0]=x[0],g[1]=x[1],g[2]=x[2],g[3]=x[3],g}function $(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=1,g}function ee(g,x,h,y){var _=new fe(4);return _[0]=g,_[1]=x,_[2]=h,_[3]=y,_}function O(g,x,h,y,_){return g[0]=x,g[1]=h,g[2]=y,g[3]=_,g}function ke(g,x){if(g===x){var h=x[1];g[1]=x[2],g[2]=h}else g[0]=x[0],g[1]=x[2],g[2]=x[1],g[3]=x[3];return g}function Ie(g,x){var h=x[0],y=x[1],_=x[2],S=x[3],N=h*S-_*y;return N?(N=1/N,g[0]=S*N,g[1]=-y*N,g[2]=-_*N,g[3]=h*N,g):null}function te(g,x){var h=x[0];return g[0]=x[3],g[1]=-x[1],g[2]=-x[2],g[3]=h,g}function ve(g){return g[0]*g[3]-g[2]*g[1]}function Le(g,x,h){var y=x[0],_=x[1],S=x[2],N=x[3],A=h[0],D=h[1],M=h[2],z=h[3];return g[0]=y*A+S*D,g[1]=_*A+N*D,g[2]=y*M+S*z,g[3]=_*M+N*z,g}function De(g,x,h){var y=x[0],_=x[1],S=x[2],N=x[3],A=Math.sin(h),D=Math.cos(h);return g[0]=y*D+S*A,g[1]=_*D+N*A,g[2]=y*-A+S*D,g[3]=_*-A+N*D,g}function Je(g,x,h){var y=x[0],_=x[1],S=x[2],N=x[3],A=h[0],D=h[1];return g[0]=y*A,g[1]=_*A,g[2]=S*D,g[3]=N*D,g}function Q(g,x){var h=Math.sin(x),y=Math.cos(x);return g[0]=y,g[1]=h,g[2]=-h,g[3]=y,g}function ue(g,x){return g[0]=x[0],g[1]=0,g[2]=0,g[3]=x[1],g}function ze(g){return"mat2("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+")"}function Oe(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]+g[3]*g[3])}function de(g,x,h,y){return g[2]=y[2]/y[0],h[0]=y[0],h[1]=y[1],h[3]=y[3]-g[2]*h[1],[g,x,h]}function Be(g,x,h){return g[0]=x[0]+h[0],g[1]=x[1]+h[1],g[2]=x[2]+h[2],g[3]=x[3]+h[3],g}function le(g,x,h){return g[0]=x[0]-h[0],g[1]=x[1]-h[1],g[2]=x[2]-h[2],g[3]=x[3]-h[3],g}function ge(g,x){return g[0]===x[0]&&g[1]===x[1]&&g[2]===x[2]&&g[3]===x[3]}function be(g,x){var h=g[0],y=g[1],_=g[2],S=g[3],N=x[0],A=x[1],D=x[2],M=x[3];return Math.abs(h-N)<=1e-6*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(y-A)<=1e-6*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(_-D)<=1e-6*Math.max(1,Math.abs(_),Math.abs(D))&&Math.abs(S-M)<=1e-6*Math.max(1,Math.abs(S),Math.abs(M))}function st(g,x,h){return g[0]=x[0]*h,g[1]=x[1]*h,g[2]=x[2]*h,g[3]=x[3]*h,g}function Te(g,x,h,y){return g[0]=x[0]+h[0]*y,g[1]=x[1]+h[1]*y,g[2]=x[2]+h[2]*y,g[3]=x[3]+h[3]*y,g}var dt=Le,Tt=le;function Nt(){var g=new fe(2);return fe!=Float32Array&&(g[0]=0,g[1]=0),g}function Ee(g){var x=new fe(2);return x[0]=g[0],x[1]=g[1],x}function Ue(g,x){var h=new fe(2);return h[0]=g,h[1]=x,h}function X(g,x){return g[0]=x[0],g[1]=x[1],g}function Ce(g,x,h){return g[0]=x,g[1]=h,g}function Ke(g,x,h){return g[0]=x[0]+h[0],g[1]=x[1]+h[1],g}function $e(g,x,h){return g[0]=x[0]-h[0],g[1]=x[1]-h[1],g}function Ve(g,x,h){return g[0]=x[0]*h[0],g[1]=x[1]*h[1],g}function it(g,x,h){return g[0]=x[0]/h[0],g[1]=x[1]/h[1],g}function xt(g,x){return g[0]=Math.ceil(x[0]),g[1]=Math.ceil(x[1]),g}function rt(g,x){return g[0]=Math.floor(x[0]),g[1]=Math.floor(x[1]),g}function tn(g,x,h){return g[0]=Math.min(x[0],h[0]),g[1]=Math.min(x[1],h[1]),g}function vn(g,x,h){return g[0]=Math.max(x[0],h[0]),g[1]=Math.max(x[1],h[1]),g}function Fn(g,x){return g[0]=q(x[0]),g[1]=q(x[1]),g}function Jn(g,x,h){return g[0]=x[0]*h,g[1]=x[1]*h,g}function qn(g,x,h,y){return g[0]=x[0]+h[0]*y,g[1]=x[1]+h[1]*y,g}function ks(g,x){var h=x[0]-g[0],y=x[1]-g[1];return Math.sqrt(h*h+y*y)}function hn(g,x){var h=x[0]-g[0],y=x[1]-g[1];return h*h+y*y}function We(g){var x=g[0],h=g[1];return Math.sqrt(x*x+h*h)}function et(g){var x=g[0],h=g[1];return x*x+h*h}function at(g,x){return g[0]=-x[0],g[1]=-x[1],g}function jt(g,x){return g[0]=1/x[0],g[1]=1/x[1],g}function _t(g,x){var h=x[0],y=x[1],_=h*h+y*y;return _>0&&(_=1/Math.sqrt(_)),g[0]=x[0]*_,g[1]=x[1]*_,g}function At(g,x){return g[0]*x[0]+g[1]*x[1]}function yt(g,x,h){var y=x[0]*h[1]-x[1]*h[0];return g[0]=g[1]=0,g[2]=y,g}function ae(g,x,h,y){var _=x[0],S=x[1];return g[0]=_+y*(h[0]-_),g[1]=S+y*(h[1]-S),g}function xe(g,x){x=x===void 0?1:x;var h=2*je()*Math.PI;return g[0]=Math.cos(h)*x,g[1]=Math.sin(h)*x,g}function lt(g,x,h){var y=x[0],_=x[1];return g[0]=h[0]*y+h[2]*_,g[1]=h[1]*y+h[3]*_,g}function ht(g,x,h){var y=x[0],_=x[1];return g[0]=h[0]*y+h[2]*_+h[4],g[1]=h[1]*y+h[3]*_+h[5],g}function Pt(g,x,h){var y=x[0],_=x[1];return g[0]=h[0]*y+h[3]*_+h[6],g[1]=h[1]*y+h[4]*_+h[7],g}function _n(g,x,h){var y=x[0],_=x[1];return g[0]=h[0]*y+h[4]*_+h[12],g[1]=h[1]*y+h[5]*_+h[13],g}function nn(g,x,h,y){var _=x[0]-h[0],S=x[1]-h[1],N=Math.sin(y),A=Math.cos(y);return g[0]=_*A-S*N+h[0],g[1]=_*N+S*A+h[1],g}function en(g,x){var h=g[0],y=g[1],_=x[0],S=x[1];return Math.abs(Math.atan2(y*_-h*S,h*_+y*S))}function pn(g,x){var h=g[0],y=g[1],_=x[0],S=x[1];return Math.atan2(h*S-y*_,h*_+y*S)}function wn(g){return g[0]=0,g[1]=0,g}function Gn(g){return"vec2("+g[0]+", "+g[1]+")"}function ls(g,x){return g[0]===x[0]&&g[1]===x[1]}function me(g,x){var h=g[0],y=g[1],_=x[0],S=x[1];return Math.abs(h-_)<=1e-6*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(y-S)<=1e-6*Math.max(1,Math.abs(y),Math.abs(S))}var He,tt=We,Ze=$e,pt=Ve,wt=it,Ut=ks,Xt=hn,Wt=et,kn=(He=Nt(),function(g,x,h,y,_,S){var N,A;for(x||(x=2),h||(h=0),A=y?Math.min(y*x+h,g.length):g.length,N=h;N<A;N+=x)He[0]=g[N],He[1]=g[N+1],_(He,He,S),g[N]=He[0],g[N+1]=He[1];return g});function he(){var g=new fe(3);return fe!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function ct(g){var x=new fe(3);return x[0]=g[0],x[1]=g[1],x[2]=g[2],x}function Ot(g){var x=g[0],h=g[1],y=g[2];return Math.sqrt(x*x+h*h+y*y)}function Bt(g,x,h){var y=new fe(3);return y[0]=g,y[1]=x,y[2]=h,y}function Un(g,x){return g[0]=x[0],g[1]=x[1],g[2]=x[2],g}function Cn(g,x,h,y){return g[0]=x,g[1]=h,g[2]=y,g}function Bn(g,x,h){return g[0]=x[0]+h[0],g[1]=x[1]+h[1],g[2]=x[2]+h[2],g}function cs(g,x,h){return g[0]=x[0]-h[0],g[1]=x[1]-h[1],g[2]=x[2]-h[2],g}function ys(g,x,h){return g[0]=x[0]*h[0],g[1]=x[1]*h[1],g[2]=x[2]*h[2],g}function ns(g,x,h){return g[0]=x[0]/h[0],g[1]=x[1]/h[1],g[2]=x[2]/h[2],g}function Ps(g,x){return g[0]=Math.ceil(x[0]),g[1]=Math.ceil(x[1]),g[2]=Math.ceil(x[2]),g}function Hn(g,x){return g[0]=Math.floor(x[0]),g[1]=Math.floor(x[1]),g[2]=Math.floor(x[2]),g}function qa(g,x,h){return g[0]=Math.min(x[0],h[0]),g[1]=Math.min(x[1],h[1]),g[2]=Math.min(x[2],h[2]),g}function Ti(g,x,h){return g[0]=Math.max(x[0],h[0]),g[1]=Math.max(x[1],h[1]),g[2]=Math.max(x[2],h[2]),g}function cr(g,x){return g[0]=q(x[0]),g[1]=q(x[1]),g[2]=q(x[2]),g}function Rt(g,x,h){return g[0]=x[0]*h,g[1]=x[1]*h,g[2]=x[2]*h,g}function Sr(g,x,h,y){return g[0]=x[0]+h[0]*y,g[1]=x[1]+h[1]*y,g[2]=x[2]+h[2]*y,g}function ur(g,x){var h=x[0]-g[0],y=x[1]-g[1],_=x[2]-g[2];return Math.sqrt(h*h+y*y+_*_)}function Br(g,x){var h=x[0]-g[0],y=x[1]-g[1],_=x[2]-g[2];return h*h+y*y+_*_}function Ei(g){var x=g[0],h=g[1],y=g[2];return x*x+h*h+y*y}function Ha(g,x){return g[0]=-x[0],g[1]=-x[1],g[2]=-x[2],g}function Qs(g,x){return g[0]=1/x[0],g[1]=1/x[1],g[2]=1/x[2],g}function ss(g,x){var h=x[0],y=x[1],_=x[2],S=h*h+y*y+_*_;return S>0&&(S=1/Math.sqrt(S)),g[0]=x[0]*S,g[1]=x[1]*S,g[2]=x[2]*S,g}function rs(g,x){return g[0]*x[0]+g[1]*x[1]+g[2]*x[2]}function $a(g,x,h){var y=x[0],_=x[1],S=x[2],N=h[0],A=h[1],D=h[2];return g[0]=_*D-S*A,g[1]=S*N-y*D,g[2]=y*A-_*N,g}function bl(g,x,h,y){var _=x[0],S=x[1],N=x[2];return g[0]=_+y*(h[0]-_),g[1]=S+y*(h[1]-S),g[2]=N+y*(h[2]-N),g}function Sn(g,x,h,y){var _=Math.acos(Math.min(Math.max(rs(x,h),-1),1)),S=Math.sin(_),N=Math.sin((1-y)*_)/S,A=Math.sin(y*_)/S;return g[0]=N*x[0]+A*h[0],g[1]=N*x[1]+A*h[1],g[2]=N*x[2]+A*h[2],g}function Ni(g,x,h,y,_,S){var N=S*S,A=N*(2*S-3)+1,D=N*(S-2)+S,M=N*(S-1),z=N*(3-2*S);return g[0]=x[0]*A+h[0]*D+y[0]*M+_[0]*z,g[1]=x[1]*A+h[1]*D+y[1]*M+_[1]*z,g[2]=x[2]*A+h[2]*D+y[2]*M+_[2]*z,g}function sa(g,x,h,y,_,S){var N=1-S,A=N*N,D=S*S,M=A*N,z=3*S*A,J=3*D*N,re=D*S;return g[0]=x[0]*M+h[0]*z+y[0]*J+_[0]*re,g[1]=x[1]*M+h[1]*z+y[1]*J+_[1]*re,g[2]=x[2]*M+h[2]*z+y[2]*J+_[2]*re,g}function ji(g,x){x=x===void 0?1:x;var h=2*je()*Math.PI,y=2*je()-1,_=Math.sqrt(1-y*y)*x;return g[0]=Math.cos(h)*_,g[1]=Math.sin(h)*_,g[2]=y*x,g}function Xs(g,x,h){var y=x[0],_=x[1],S=x[2],N=h[3]*y+h[7]*_+h[11]*S+h[15];return N=N||1,g[0]=(h[0]*y+h[4]*_+h[8]*S+h[12])/N,g[1]=(h[1]*y+h[5]*_+h[9]*S+h[13])/N,g[2]=(h[2]*y+h[6]*_+h[10]*S+h[14])/N,g}function yo(g,x,h){var y=x[0],_=x[1],S=x[2];return g[0]=y*h[0]+_*h[3]+S*h[6],g[1]=y*h[1]+_*h[4]+S*h[7],g[2]=y*h[2]+_*h[5]+S*h[8],g}function lc(g,x,h){var y=h[0],_=h[1],S=h[2],N=h[3],A=x[0],D=x[1],M=x[2],z=_*M-S*D,J=S*A-y*M,re=y*D-_*A;return z+=z,J+=J,re+=re,g[0]=A+N*z+_*re-S*J,g[1]=D+N*J+S*z-y*re,g[2]=M+N*re+y*J-_*z,g}function xl(g,x,h,y){var _=[],S=[];return _[0]=x[0]-h[0],_[1]=x[1]-h[1],_[2]=x[2]-h[2],S[0]=_[0],S[1]=_[1]*Math.cos(y)-_[2]*Math.sin(y),S[2]=_[1]*Math.sin(y)+_[2]*Math.cos(y),g[0]=S[0]+h[0],g[1]=S[1]+h[1],g[2]=S[2]+h[2],g}function Wa(g,x,h,y){var _=[],S=[];return _[0]=x[0]-h[0],_[1]=x[1]-h[1],_[2]=x[2]-h[2],S[0]=_[2]*Math.sin(y)+_[0]*Math.cos(y),S[1]=_[1],S[2]=_[2]*Math.cos(y)-_[0]*Math.sin(y),g[0]=S[0]+h[0],g[1]=S[1]+h[1],g[2]=S[2]+h[2],g}function cc(g,x,h,y){var _=[],S=[];return _[0]=x[0]-h[0],_[1]=x[1]-h[1],_[2]=x[2]-h[2],S[0]=_[0]*Math.cos(y)-_[1]*Math.sin(y),S[1]=_[0]*Math.sin(y)+_[1]*Math.cos(y),S[2]=_[2],g[0]=S[0]+h[0],g[1]=S[1]+h[1],g[2]=S[2]+h[2],g}function Ga(g,x){var h=g[0],y=g[1],_=g[2],S=x[0],N=x[1],A=x[2],D=Math.sqrt((h*h+y*y+_*_)*(S*S+N*N+A*A)),M=D&&rs(g,x)/D;return Math.acos(Math.min(Math.max(M,-1),1))}function Js(g){return g[0]=0,g[1]=0,g[2]=0,g}function uc(g){return"vec3("+g[0]+", "+g[1]+", "+g[2]+")"}function _l(g,x){return g[0]===x[0]&&g[1]===x[1]&&g[2]===x[2]}function wl(g,x){var h=g[0],y=g[1],_=g[2],S=x[0],N=x[1],A=x[2];return Math.abs(h-S)<=1e-6*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(y-N)<=1e-6*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(_-A)<=1e-6*Math.max(1,Math.abs(_),Math.abs(A))}var vo=cs,dc=ys,Ya=ns,bo=ur,zr=Br,Sl=Ot,Tr=Ei,Ka=(function(){var g=he();return function(x,h,y,_,S,N){var A,D;for(h||(h=3),y||(y=0),D=_?Math.min(_*h+y,x.length):x.length,A=y;A<D;A+=h)g[0]=x[A],g[1]=x[A+1],g[2]=x[A+2],S(g,g,N),x[A]=g[0],x[A+1]=g[1],x[A+2]=g[2];return x}})(),qs=function(g,x){g.fill(x)},ki=function(g){for(var x=0,h=0;h<g.length;h++)g[h]>g[x]&&(x=h);return x},Qa=function(g){for(var x=g.length,h=0;x--;)h+=g[x];return h},Xa=function(g,x){var h=[],y={rad:0,vec:u.clone([0,0])},_={};function S(A){_[A.id]=A,h.push(A)}function N(){var A,D=0;for(A=0;A<h.length;A++)D+=h[A].rad;y.rad=D/h.length,y.vec=u.clone([Math.cos(y.rad),Math.sin(y.rad)])}return S(g),N(),{add:function(A){_[A.id]||(S(A),N())},fits:function(A){return Math.abs(u.dot(A.point.vec,y.vec))>x},getPoints:function(){return h},getCenter:function(){return y}}},Fr=function(g,x,h){return{rad:g[h],point:g,id:x}};function Zs(g,x){return{x:g,y:x,toVec2:function(){return u.clone([this.x,this.y])},toVec3:function(){return f.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function Ci(g,x){x||(x=8);for(var h=g.data,y=h.length,_=8-x,S=new Int32Array(1<<x);y--;)S[h[y]>>_]++;return S}function Nn(g,x){var h=(function(y){var _,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,N=8-S;function A(J,re){for(var ce=0,Re=J;Re<=re;Re++)ce+=_[Re];return ce}function D(J,re){for(var ce=0,Re=J;Re<=re;Re++)ce+=Re*_[Re];return ce}function M(){var J,re,ce,Re,ie=[0],Se=(1<<S)-1;_=Ci(y,S);for(var Pe=1;Pe<Se;Pe++)(ce=(J=A(0,Pe))*(re=A(Pe+1,Se)))===0&&(ce=1),Re=D(0,Pe)*re-D(Pe+1,Se)*J,ie[Pe]=Re*Re/ce;return ki(ie)}var z=M();return z<<N})(g);return(function(y,_,S){S||(S=y);for(var N=y.data,A=N.length,D=S.data;A--;)D[A]=N[A]<_?1:0})(g,h,x),h}function ra(g,x,h){var y=g.length/4|0;if(h&&h.singleChannel===!0)for(var _=0;_<y;_++){var S=g[4*_+3];x[_]=S===0?255:g[4*_+0]}else for(var N=0;N<y;N++){var A=g[4*N+3];x[N]=A===0?255:.299*g[4*N+0]+.587*g[4*N+1]+.114*g[4*N+2]}}function Tl(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],h=g[0],y=g[1],_=g[2],S=_*y,N=S*(1-Math.abs(h/60%2-1)),A=_-S,D=0,M=0,z=0;return h<60?(D=S,M=N):h<120?(D=N,M=S):h<180?(M=S,z=N):h<240?(M=N,z=S):h<300?(D=N,z=S):h<360&&(D=S,z=N),x[0]=255*(D+A)|0,x[1]=255*(M+A)|0,x[2]=255*(z+A)|0,x}function aa(g){if(!Number.isFinite(g)||g<1)return[];for(var x=[],h=[],y=Math.sqrt(g),_=1;_<=y;_++)g%_==0&&(h.push(_),_!==g/_&&x.unshift(Math.floor(g/_)));return h.concat(x)}function xo(g,x){var h,y=aa(x.x),_=aa(x.y),S=Math.max(x.x,x.y),N=(function(ce,Re){for(var ie=0,Se=0,Pe=[];ie<ce.length&&Se<Re.length;)ce[ie]===Re[Se]?(Pe.push(ce[ie]),ie++,Se++):ce[ie]>Re[Se]?Se++:ie++;return Pe})(y,_),A=[8,10,15,20,32,60,80],D={"x-small":5,small:4,medium:3,large:2,"x-large":1},M=D[g]||D.medium,z=A[M],J=Math.floor(S/z);function re(ce){for(var Re=0,ie=ce[Math.floor(ce.length/2)];Re<ce.length-1&&ce[Re]<J;)Re++;return Re>0&&(ie=Math.abs(ce[Re]-J)>Math.abs(ce[Re-1]-J)?ce[Re-1]:ce[Re]),J/ie<A[M+1]/A[M]&&J/ie>A[M-1]/A[M]?{x:ie,y:ie}:null}return(h=re(N))||(h=re(aa(S)))||(h=re(aa(J*z))),h||(h={x:Math.max(1,x.x),y:Math.max(1,x.y)}),h}var Ja={top:function(g,x){return g.unit==="%"?Math.floor(x.height*(g.value/100)):null},right:function(g,x){return g.unit==="%"?Math.floor(x.width-x.width*(g.value/100)):null},bottom:function(g,x){return g.unit==="%"?Math.floor(x.height-x.height*(g.value/100)):null},left:function(g,x){return g.unit==="%"?Math.floor(x.width*(g.value/100)):null}};function wa(g,x,h){var y={width:g,height:x},_=Object.keys(h).reduce((function(S,N){if(!Ja[N])return S;var A=(function(M){return{value:parseFloat(M),unit:(M.indexOf("%"),M.length,"%")}})(h[N]),D=Ja[N](A,y);return S[N]=D,S}),{});return{sx:_.left,sy:_.top,sw:_.right-_.left,sh:_.bottom-_.top}}function dr(g){if(g<0)throw new Error("expected positive number, received ".concat(g))}var An=(function(){return G()((function g(x,h){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uint8Array,_=arguments.length>3?arguments[3]:void 0;F()(this,g),Y()(this,"data",void 0),Y()(this,"size",void 0),Y()(this,"indexMapping",void 0),h?this.data=h:(this.data=new y(x.x*x.y),_&&qs(this.data,0)),this.size=x}),[{key:"inImageWithBorder",value:function(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return dr(x),g.x>=0&&g.y>=0&&g.x<this.size.x+2*x&&g.y<this.size.y+2*x}},{key:"subImageAsCopy",value:function(g,x){dr(x.x),dr(x.y);for(var h=g.size,y=h.x,_=h.y,S=0;S<y;S++)for(var N=0;N<_;N++)g.data[N*y+S]=this.data[(x.y+N)*this.size.x+x.x+S];return g}},{key:"get",value:function(g,x){return this.data[x*this.size.x+g]}},{key:"getSafe",value:function(g,x){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var h=0;h<this.size.x;h++)this.indexMapping.x[h]=h,this.indexMapping.x[h+this.size.x]=h;for(var y=0;y<this.size.y;y++)this.indexMapping.y[y]=y,this.indexMapping.y[y+this.size.y]=y}return this.data[this.indexMapping.y[x+this.size.y]*this.size.x+this.indexMapping.x[g+this.size.x]]}},{key:"set",value:function(g,x,h){return this.data[x*this.size.x+g]=h,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var g=this.size,x=g.x,h=g.y,y=0;y<x;y++)this.data[y]=this.data[(h-1)*x+y]=0;for(var _=1;_<h-1;_++)this.data[_*x]=this.data[_*x+(x-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(g){var x,h,y,_,S,N,A,D,M,z,J=this.data,re=this.size.y,ce=this.size.x,Re=[],ie=[],Se=Math.PI,Pe=Se/4;if(g<=0)return ie;for(S=0;S<g;S++)Re[S]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(h=0;h<re;h++)for(_=h*h,x=0;x<ce;x++)(y=J[h*ce+x])>0&&((N=Re[y-1]).m00+=1,N.m01+=h,N.m10+=x,N.m11+=x*h,N.m02+=_,N.m20+=x*x);for(S=0;S<g;S++)N=Re[S],isNaN(N.m00)||N.m00===0||(D=N.m10/N.m00,M=N.m01/N.m00,A=N.m11/N.m00-D*M,z=(N.m02/N.m00-M*M-(N.m20/N.m00-D*D))/(2*A),z=.5*Math.atan(z)+(A>=0?Pe:-Pe)+Se,N.theta=(180*z/Se+90)%180-90,N.theta<0&&(N.theta+=180),N.rad=z>Se?z-Se:z,N.vec=u.clone([Math.cos(z),Math.sin(z)]),ie.push(N));return ie}},{key:"getAsRGBA",value:function(){for(var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,x=new Uint8ClampedArray(4*this.size.x*this.size.y),h=0;h<this.size.y;h++)for(var y=0;y<this.size.x;y++){var _=h*this.size.x+y,S=this.get(y,h)*g;x[4*_+0]=S,x[4*_+1]=S,x[4*_+2]=S,x[4*_+3]=255}return x}},{key:"show",value:function(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var h=g.getContext("2d");if(!h)throw new Error("Unable to get canvas context");var y=h.getImageData(0,0,g.width,g.height),_=this.getAsRGBA(x);g.width=this.size.x,g.height=this.size.y;var S=new ImageData(_,y.width,y.height);h.putImageData(S,0,0)}},{key:"overlay",value:function(g,x,h){var y=x<0||x>360?360:x,_=[0,1,1],S=[0,0,0],N=[255,255,255],A=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var D=g.getContext("2d");if(!D)throw new Error("Unable to get canvas context");for(var M=D.getImageData(h.x,h.y,this.size.x,this.size.y),z=M.data,J=this.data.length;J--;){_[0]=this.data[J]*y;var re=4*J,ce=_[0]<=0?N:_[0]>=360?A:Tl(_,S),Re=P()(ce,3);z[re]=Re[0],z[re+1]=Re[1],z[re+2]=Re[2],z[re+3]=255}D.putImageData(M,h.x,h.y)}}])})(),Sa=i(7),vs=i.n(Sa),Za=i(6),Kn=i.n(Za),ia={drawRect:function(g,x,h,y){h.strokeStyle=y.color,h.fillStyle=y.color,h.lineWidth=y.lineWidth||1,h.beginPath(),h.strokeRect(g.x,g.y,x.x,x.y)},drawPath:function(g,x,h,y){h.strokeStyle=y.color,h.fillStyle=y.color,h.lineWidth=y.lineWidth,h.beginPath(),h.moveTo(g[0][x.x],g[0][x.y]);for(var _=1;_<g.length;_++)h.lineTo(g[_][x.x],g[_][x.y]);h.closePath(),h.stroke()},drawImage:function(g,x,h){var y=h.getImageData(0,0,x.x,x.y),_=y.data,S=_.length,N=g.length;if(S/N!=4)return!1;for(;N--;){var A=g[N];_[--S]=255,_[--S]=A,_[--S]=A,_[--S]=A}return h.putImageData(y,0,0),!0}},_o=i(4),In=i.n(_o),wo=i(1),Gt=i.n(wo),Ai=i(5),us=i.n(Ai),El=(function(g){return g[g.Forward=1]="Forward",g[g.Reverse=-1]="Reverse",g})({}),ei=(function(){return G()((function g(x,h){F()(this,g),Y()(this,"_row",[]),Y()(this,"config",{}),Y()(this,"supplements",[]),Y()(this,"SINGLE_CODE_ERROR",0),Y()(this,"FORMAT","unknown"),Y()(this,"CONFIG_KEYS",{}),this._row=[],this.config=x||{},h&&(this.supplements=h)}),[{key:"_nextUnset",value:function(g){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=x;h<g.length;h++)if(!g[h])return h;return g.length}},{key:"_matchPattern",value:function(g,x){for(var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.SINGLE_CODE_ERROR||1,y=0,_=0,S=0,N=0,A=0,D=0,M=0,z=0;z<g.length;z++)S+=g[z],N+=x[z];if(S<N)return Number.MAX_VALUE;h*=A=S/N;for(var J=0;J<g.length;J++){if(D=g[J],M=x[J]*A,(_=Math.abs(D-M)/M)>h)return Number.MAX_VALUE;y+=_}return y/N}},{key:"_nextSet",value:function(g){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=x;h<g.length;h++)if(g[h])return h;return g.length}},{key:"_correctBars",value:function(g,x,h){for(var y=h.length,_=0;y--;)(_=g[h[y]]*(1-(1-x)/2))>1&&(g[h[y]]=_)}},{key:"decodePattern",value:function(g){this._row=g;var x=this.decode();return x===null?(this._row.reverse(),(x=this.decode())&&(x.direction=El.Reverse,x.start=this._row.length-x.start,x.end=this._row.length-x.end)):x.direction=El.Forward,x&&(x.format=this.FORMAT),x}},{key:"_matchRange",value:function(g,x,h){var y;for(y=g=g<0?0:g;y<x;y++)if(this._row[y]!==h)return!1;return!0}},{key:"_fillCounters",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._nextUnset(this._row),x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._row.length,h=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=[],_=0;y[_]=0;for(var S=g;S<x;S++)this._row[S]^(h?1:0)?y[_]++:(y[++_]=1,h=!h);return y}},{key:"_toCounters",value:function(g,x){var h=x.length,y=this._row.length,_=!this._row[g],S=0;qs(x,0);for(var N=g;N<y;N++)if(this._row[N]^(_?1:0))x[S]++;else{if(++S===h)break;x[S]=1,_=!_}return x}},{key:"decodeImage",value:function(g){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}])})();Y()(ei,"adjacentLineValidationMatches",0);var hr=ei;function hc(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var Ri=[3,1,3,1,1,1],fc=[3,1,1,1,3],Nl=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],oa=Ri.reduce((function(g,x){return g+x}),0),jl=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=hc(this,x,[].concat(_)),Y()(h,"barSpaceRatio",[1,1]),Y()(h,"FORMAT","2of5"),Y()(h,"SINGLE_CODE_ERROR",.78),Y()(h,"AVG_CODE_ERROR",.3),h}return us()(x,g),G()(x,[{key:"_findPattern",value:function(h,y){var _=arguments.length>2&&arguments[2]!==void 0&&arguments[2],S=arguments.length>3&&arguments[3]!==void 0&&arguments[3],N=[],A=0,D={error:Number.MAX_VALUE,code:-1,start:0,end:0},M=0,z=0,J=this.AVG_CODE_ERROR;y||(y=this._nextSet(this._row));for(var re=0;re<h.length;re++)N[re]=0;for(var ce=y;ce<this._row.length;ce++)if(this._row[ce]^(_?1:0))N[A]++;else{if(A===N.length-1){M=0;for(var Re=0;Re<N.length;Re++)M+=N[Re];if((z=this._matchPattern(N,h))<J)return D.error=z,D.start=ce-M,D.end=ce,D;if(!S)return null;for(var ie=0;ie<N.length-2;ie++)N[ie]=N[ie+2];N[N.length-2]=0,N[N.length-1]=0,A--}else A++;N[A]=1,_=!_}return null}},{key:"_findStart",value:function(){for(var h=null,y=this._nextSet(this._row),_=1,S=0;!h;){if(!(h=this._findPattern(Ri,y,!1,!0)))return null;if(_=Math.floor((h.end-h.start)/oa),(S=h.start-5*_)>=0&&this._matchRange(S,h.start,0))return h;y=h.end,h=null}return h}},{key:"_verifyTrailingWhitespace",value:function(h){var y=h.end+(h.end-h.start)/2;return y<this._row.length&&this._matchRange(h.end,y,0)?h:null}},{key:"_findEnd",value:function(){this._row.reverse();var h=this._nextSet(this._row),y=this._findPattern(fc,h,!1,!0);if(this._row.reverse(),y===null)return null;var _=y.start;return y.start=this._row.length-y.end,y.end=this._row.length-_,y!==null?this._verifyTrailingWhitespace(y):null}},{key:"_verifyCounterLength",value:function(h){return h.length%10==0}},{key:"_decodeCode",value:function(h){for(var y=this.AVG_CODE_ERROR,_={error:Number.MAX_VALUE,code:-1,start:0,end:0},S=0;S<Nl.length;S++){var N=this._matchPattern(h,Nl[S]);N<_.error&&(_.code=S,_.error=N)}return _.error<y?_:null}},{key:"_decodePayload",value:function(h,y,_){for(var S=0,N=h.length,A=[0,0,0,0,0],D=null;S<N;){for(var M=0;M<5;M++)A[M]=h[S]*this.barSpaceRatio[0],S+=2;if(!(D=this._decodeCode(A)))return null;y.push("".concat(D.code)),_.push(D)}return D}},{key:"decode",value:function(h,y){var _=this._findStart();if(!_)return null;var S=this._findEnd();if(!S)return null;var N=this._fillCounters(_.end,S.start,!1);if(!this._verifyCounterLength(N))return null;var A=[];A.push(_);var D=[];return this._decodePayload(N,D,A)?D.length<5?null:(A.push(S),{code:D.join(""),start:_.start,end:S.end,startInfo:_,decodedCodes:A,format:this.FORMAT}):null}}])})(hr);function mc(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var So=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],To=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],Ta=[26,41,11,14],Ls=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=mc(this,x,[].concat(_)),Y()(h,"_counters",[]),Y()(h,"FORMAT","codabar"),h}return us()(x,g),G()(x,[{key:"_computeAlternatingThreshold",value:function(h,y){for(var _=Number.MAX_VALUE,S=0,N=0,A=h;A<y;A+=2)(N=this._counters[A])>S&&(S=N),N<_&&(_=N);return(_+S)/2|0}},{key:"_toPattern",value:function(h){var y=h+7;if(y>this._counters.length)return-1;for(var _=this._computeAlternatingThreshold(h,y),S=this._computeAlternatingThreshold(h+1,y),N=64,A=0,D=0,M=0;M<7;M++)A=(1&M)==0?_:S,this._counters[h+M]>A&&(D|=N),N>>=1;return D}},{key:"_isStartEnd",value:function(h){for(var y=0;y<Ta.length;y++)if(Ta[y]===h)return!0;return!1}},{key:"_sumCounters",value:function(h,y){for(var _=0,S=h;S<y;S++)_+=this._counters[S];return _}},{key:"_findStart",value:function(){for(var h=this._nextUnset(this._row),y=1;y<this._counters.length;y++){var _=this._toPattern(y);if(_!==-1&&this._isStartEnd(_))return{start:h+=this._sumCounters(0,y),end:h+this._sumCounters(y,y+8),startCounter:y,endCounter:y+8}}return null}},{key:"_patternToChar",value:function(h){for(var y=0;y<To.length;y++)if(To[y]===h)return String.fromCharCode(So[y]);return null}},{key:"_calculatePatternLength",value:function(h){for(var y=0,_=h;_<h+7;_++)y+=this._counters[_];return y}},{key:"_verifyWhitespace",value:function(h,y){return(h-1<=0||this._counters[h-1]>=this._calculatePatternLength(h)/2)&&(y+8>=this._counters.length||this._counters[y+7]>=this._calculatePatternLength(y)/2)}},{key:"_charToPattern",value:function(h){for(var y=h.charCodeAt(0),_=0;_<So.length;_++)if(So[_]===y)return To[_];return 0}},{key:"_thresholdResultPattern",value:function(h,y){for(var _,S={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},N=y,A=0;A<h.length;A++){_=this._charToPattern(h[A]);for(var D=6;D>=0;D--){var M=(1&D)==2?S.bar:S.space,z=(1&_)==1?M.wide:M.narrow;z.size+=this._counters[N+D],z.counts++,_>>=1}N+=8}return["space","bar"].forEach((function(J){var re=S[J];re.wide.min=Math.floor((re.narrow.size/re.narrow.counts+re.wide.size/re.wide.counts)/2),re.narrow.max=Math.ceil(re.wide.min),re.wide.max=Math.ceil((2*re.wide.size+1.5)/re.wide.counts)})),S}},{key:"_validateResult",value:function(h,y){for(var _,S=this._thresholdResultPattern(h,y),N=y,A=0;A<h.length;A++){_=this._charToPattern(h[A]);for(var D=6;D>=0;D--){var M=(1&D)==0?S.bar:S.space,z=(1&_)==1?M.wide:M.narrow,J=this._counters[N+D];if(J<z.min||J>z.max)return!1;_>>=1}N+=8}return!0}},{key:"decode",value:function(h,y){if(this._counters=this._fillCounters(),!(y=this._findStart()))return null;var _,S=y.startCounter,N=[];do{if((_=this._toPattern(S))<0)return null;var A=this._patternToChar(_);if(A===null)return null;if(N.push(A),S+=8,N.length>1&&this._isStartEnd(_))break}while(S<this._counters.length);if(N.length-2<4||!this._isStartEnd(_)||!this._verifyWhitespace(y.startCounter,S-8)||!this._validateResult(N,y.startCounter))return null;S=S>this._counters.length?this._counters.length:S;var D=y.start+this._sumCounters(y.startCounter,S-8);return{code:N.join(""),start:y.start,end:D,startInfo:y,decodedCodes:N,format:this.FORMAT}}}])})(hr);function pc(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var kl=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=pc(this,x,[].concat(_)),Y()(h,"CODE_SHIFT",98),Y()(h,"CODE_C",99),Y()(h,"CODE_B",100),Y()(h,"CODE_A",101),Y()(h,"FNC1",102),Y()(h,"START_CODE_A",103),Y()(h,"START_CODE_B",104),Y()(h,"START_CODE_C",105),Y()(h,"STOP_CODE",106),Y()(h,"FNC1_CHAR",""),Y()(h,"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),Y()(h,"SINGLE_CODE_ERROR",.64),Y()(h,"AVG_CODE_ERROR",.3),Y()(h,"FORMAT","code_128"),Y()(h,"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),h}return us()(x,g),G()(x,[{key:"_decodeCode",value:function(h,y){for(var _={error:Number.MAX_VALUE,code:-1,start:h,end:h,correction:{bar:1,space:1}},S=[0,0,0,0,0,0],N=h,A=!this._row[N],D=0,M=N;M<this._row.length;M++)if(this._row[M]^(A?1:0))S[D]++;else{if(D===S.length-1){y&&this._correct(S,y);for(var z=0;z<this.CODE_PATTERN.length;z++){var J=this._matchPattern(S,this.CODE_PATTERN[z]);J<_.error&&(_.code=z,_.error=J)}return _.end=M,_.code===-1||_.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[_.code]&&(_.correction.bar=this.calculateCorrection(this.CODE_PATTERN[_.code],S,this.MODULE_INDICES.bar),_.correction.space=this.calculateCorrection(this.CODE_PATTERN[_.code],S,this.MODULE_INDICES.space)),_)}S[++D]=1,A=!A}return null}},{key:"_correct",value:function(h,y){this._correctBars(h,y.bar,this.MODULE_INDICES.bar),this._correctBars(h,y.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var h=[0,0,0,0,0,0],y=this._nextSet(this._row),_={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},S=!1,N=0,A=y;A<this._row.length;A++)if(this._row[A]^(S?1:0))h[N]++;else{if(N===h.length-1){for(var D=h.reduce((function(re,ce){return re+ce}),0),M=this.START_CODE_A;M<=this.START_CODE_C;M++){var z=this._matchPattern(h,this.CODE_PATTERN[M]);z<_.error&&(_.code=M,_.error=z)}if(_.error<this.AVG_CODE_ERROR)return _.start=A-D,_.end=A,_.correction.bar=this.calculateCorrection(this.CODE_PATTERN[_.code],h,this.MODULE_INDICES.bar),_.correction.space=this.calculateCorrection(this.CODE_PATTERN[_.code],h,this.MODULE_INDICES.space),_;for(var J=0;J<4;J++)h[J]=h[J+2];h[4]=0,h[5]=0,N--}else N++;h[N]=1,S=!S}return null}},{key:"decode",value:function(h,y){var _=this,S=this._findStart();if(S===null)return null;var N={code:S.code,start:S.start,end:S.end,correction:{bar:S.correction.bar,space:S.correction.space}},A=[];A.push(N);for(var D=N.code,M=(function(Pe){switch(Pe){case _.START_CODE_A:return _.CODE_A;case _.START_CODE_B:return _.CODE_B;case _.START_CODE_C:return _.CODE_C;default:return null}})(N.code),z=!1,J=!1,re=J,ce=!0,Re=0,ie=[],Se=[];!z;){if(re=J,J=!1,(N=this._decodeCode(N.end,N.correction))!==null)switch(N.code!==this.STOP_CODE&&(ce=!0),N.code!==this.STOP_CODE&&(ie.push(N.code),D+=++Re*N.code),A.push(N),M){case this.CODE_A:if(N.code<64)Se.push(String.fromCharCode(32+N.code));else if(N.code<96)Se.push(String.fromCharCode(N.code-64));else switch(N.code!==this.STOP_CODE&&(ce=!1),N.code){case this.CODE_SHIFT:J=!0,M=this.CODE_B;break;case this.CODE_B:M=this.CODE_B;break;case this.CODE_C:M=this.CODE_C;break;case this.FNC1:Se.push(this.FNC1_CHAR);break;case this.STOP_CODE:z=!0}break;case this.CODE_B:if(N.code<96)Se.push(String.fromCharCode(32+N.code));else switch(N.code!==this.STOP_CODE&&(ce=!1),N.code){case this.CODE_SHIFT:J=!0,M=this.CODE_A;break;case this.CODE_A:M=this.CODE_A;break;case this.CODE_C:M=this.CODE_C;break;case this.FNC1:Se.push(this.FNC1_CHAR);break;case this.STOP_CODE:z=!0}break;case this.CODE_C:if(N.code<100)Se.push(N.code<10?"0"+N.code:N.code);else switch(N.code!==this.STOP_CODE&&(ce=!1),N.code){case this.CODE_A:M=this.CODE_A;break;case this.CODE_B:M=this.CODE_B;break;case this.FNC1:Se.push(this.FNC1_CHAR);break;case this.STOP_CODE:z=!0}}else z=!0;re&&(M=M===this.CODE_A?this.CODE_B:this.CODE_A)}return N===null?null:(N.end=this._nextUnset(this._row,N.end),this._verifyTrailingWhitespace(N)?(D-=Re*ie[ie.length-1])%103!==ie[ie.length-1]?null:Se.length?(ce&&Se.splice(Se.length-1,1),{code:Se.join(""),start:S.start,end:N.end,codeset:M,startInfo:S,decodedCodes:A,endInfo:N,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(h){var y;return(y=h.end+(h.end-h.start)/2)<this._row.length&&this._matchRange(h.end,y,0)?h:null}},{key:"calculateCorrection",value:function(h,y,_){for(var S=_.length,N=0,A=0;S--;)A+=h[_[S]],N+=y[_[S]];return A/N}}])})(hr),Ea=i(13),p=i.n(Ea),j=i(16),R=i.n(j);function W(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var ye=new Uint16Array(R()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map((function(g){return g.charCodeAt(0)}))),Ae=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),ot=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=W(this,x,[].concat(_)),Y()(h,"FORMAT","code_39"),h}return us()(x,g),G()(x,[{key:"_findStart",value:function(){for(var h=this._nextSet(this._row),y=h,_=new Uint16Array([0,0,0,0,0,0,0,0,0]),S=0,N=!1,A=h;A<this._row.length;A++)if(this._row[A]^(N?1:0))_[S]++;else{if(S===_.length-1){if(this._toPattern(_)===148){var D=Math.floor(Math.max(0,y-(A-y)/4));if(this._matchRange(D,y,0))return{start:y,end:A}}y+=_[0]+_[1];for(var M=0;M<7;M++)_[M]=_[M+2];_[7]=0,_[8]=0,S--}else S++;_[S]=1,N=!N}return null}},{key:"_toPattern",value:function(h){for(var y=h.length,_=0,S=y,N=0;S>3;){_=this._findNextWidth(h,_),S=0;for(var A=0,D=0;D<y;D++)h[D]>_&&(A|=1<<y-1-D,S++,N+=h[D]);if(S===3){for(var M=0;M<y&&S>0;M++)if(h[M]>_&&(S--,2*h[M]>=N))return-1;return A}}return-1}},{key:"_findNextWidth",value:function(h,y){for(var _=Number.MAX_VALUE,S=0;S<h.length;S++)h[S]<_&&h[S]>y&&(_=h[S]);return _}},{key:"_patternToChar",value:function(h){for(var y=0;y<Ae.length;y++)if(Ae[y]===h)return String.fromCharCode(ye[y]);return null}},{key:"_verifyTrailingWhitespace",value:function(h,y,_){var S=Qa(_);return 3*(y-h-S)>=S}},{key:"decode",value:function(){var h=new Uint16Array([0,0,0,0,0,0,0,0,0]),y=[],_=this._findStart();if(!_)return null;var S,N,A=this._nextSet(this._row,_.end);do{h=this._toCounters(A,h);var D=this._toPattern(h);if(D<0||(S=this._patternToChar(D))===null)return null;y.push(S),N=A,A+=Qa(h),A=this._nextSet(this._row,A)}while(S!=="*");return y.pop(),y.length&&this._verifyTrailingWhitespace(N,A,h)?{code:y.join(""),start:_.start,end:A,startInfo:_,decodedCodes:y,format:this.FORMAT}:null}}])})(hr);function qt(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var Zn=/[AEIO]/g,gn=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=qt(this,x,[].concat(_)),Y()(h,"FORMAT","code_32_reader"),h}return us()(x,g),G()(x,[{key:"_decodeCode32",value:function(h){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(h))return null;for(var y=0,_=0;_<h.length;_++)y=32*y+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(h[_]);var S="".concat(y);return S.length<9&&(S=("000000000"+S).slice(-9)),"A"+S}},{key:"_checkChecksum",value:function(h){return!!h}},{key:"decode",value:function(){var h,y,_,S,N,A=(h=x,y="decode",_=this,S=3,N=p()(Gt()(1&S?h.prototype:h),y,_),2&S&&typeof N=="function"?function(z){return N.apply(_,z)}:N)([]);if(!A)return null;var D=A.code;if(!D||(D=D.replace(Zn,""),!this._checkChecksum(D)))return null;var M=this._decodeCode32(D);return M?(A.code=M,A):null}}])})(ot);function $n(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var Er=/[IOQ]/g,la=/[A-Z0-9]{17}/,Nr=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=$n(this,x,[].concat(_)),Y()(h,"FORMAT","code_39_vin"),h}return us()(x,g),G()(x,[{key:"_checkChecksum",value:function(h){return!!h}},{key:"decode",value:function(){var h,y,_,S,N,A=(h=x,y="decode",_=this,S=3,N=p()(Gt()(1&S?h.prototype:h),y,_),2&S&&typeof N=="function"?function(M){return N.apply(_,M)}:N)([]);if(!A)return null;var D=A.code;return D&&(D=D.replace(Er,"")).match(la)&&this._checkChecksum(D)?(A.code=D,A):null}}])})(ot);function qr(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var Na=new Uint16Array(R()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map((function(g){return g.charCodeAt(0)}))),Di=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),Mi=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=qr(this,x,[].concat(_)),Y()(h,"FORMAT","code_93"),h}return us()(x,g),G()(x,[{key:"_patternToChar",value:function(h){for(var y=0;y<Di.length;y++)if(Di[y]===h)return String.fromCharCode(Na[y]);return null}},{key:"_toPattern",value:function(h){for(var y=h.length,_=h.reduce((function(M,z){return M+z}),0),S=0,N=0;N<y;N++){var A=Math.round(9*h[N]/_);if(A<1||A>4)return-1;if((1&N)==0)for(var D=0;D<A;D++)S=S<<1|1;else S<<=A}return S}},{key:"_findStart",value:function(){for(var h=this._nextSet(this._row),y=h,_=new Uint16Array([0,0,0,0,0,0]),S=0,N=!1,A=h;A<this._row.length;A++)if(this._row[A]^(N?1:0))_[S]++;else{if(S===_.length-1){if(this._toPattern(_)===350){var D=Math.floor(Math.max(0,y-(A-y)/4));if(this._matchRange(D,y,0))return{start:y,end:A}}y+=_[0]+_[1];for(var M=0;M<4;M++)_[M]=_[M+2];_[4]=0,_[5]=0,S--}else S++;_[S]=1,N=!N}return null}},{key:"_verifyEnd",value:function(h,y){return!(h===y||!this._row[y])}},{key:"_decodeExtended",value:function(h){for(var y=h.length,_=[],S=0;S<y;S++){var N=h[S];if(N>="a"&&N<="d"){if(S>y-2)return null;var A=h[++S],D=A.charCodeAt(0),M=void 0;switch(N){case"a":if(!(A>="A"&&A<="Z"))return null;M=String.fromCharCode(D-64);break;case"b":if(A>="A"&&A<="E")M=String.fromCharCode(D-38);else if(A>="F"&&A<="J")M=String.fromCharCode(D-11);else if(A>="K"&&A<="O")M=String.fromCharCode(D+16);else if(A>="P"&&A<="S")M=String.fromCharCode(D+43);else{if(!(A>="T"&&A<="Z"))return null;M=""}break;case"c":if(A>="A"&&A<="O")M=String.fromCharCode(D-32);else{if(A!=="Z")return null;M=":"}break;case"d":if(!(A>="A"&&A<="Z"))return null;M=String.fromCharCode(D+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",M),null}_.push(M)}else _.push(N)}return _}},{key:"_matchCheckChar",value:function(h,y,_){var S=h.slice(0,y),N=S.length,A=S.reduce((function(D,M,z){return D+((-1*z+(N-1))%_+1)*Na.indexOf(M.charCodeAt(0))}),0);return Na[A%47]===h[y].charCodeAt(0)}},{key:"_verifyChecksums",value:function(h){return this._matchCheckChar(h,h.length-2,20)&&this._matchCheckChar(h,h.length-1,15)}},{key:"decode",value:function(h,y){if(!(y=this._findStart()))return null;var _,S,N=new Uint16Array([0,0,0,0,0,0]),A=[],D=this._nextSet(this._row,y.end);do{N=this._toCounters(D,N);var M=this._toPattern(N);if(M<0||(S=this._patternToChar(M))===null)return null;A.push(S),_=D,D+=Qa(N),D=this._nextSet(this._row,D)}while(S!=="*");return A.pop(),A.length&&this._verifyEnd(_,D)&&this._verifyChecksums(A)?(A=A.slice(0,A.length-2),(A=this._decodeExtended(A))===null?null:{code:A.join(""),start:y.start,end:D,startInfo:y,decodedCodes:A,format:this.FORMAT}):null}}])})(hr);function eh(g,x){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);x&&(y=y.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),h.push.apply(h,y)}return h}function pu(g){for(var x=1;x<arguments.length;x++){var h=arguments[x]!=null?arguments[x]:{};x%2?eh(Object(h),!0).forEach((function(y){Y()(g,y,h[y])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(h)):eh(Object(h)).forEach((function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(h,y))}))}return g}function Nm(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var th=[1,1,1],gu=[1,1,1,1,1],Cl=[1,1,2],Eo=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],nh=[0,11,13,14,19,25,28,21,22,26],Hr=(function(g){function x(h,y){var _;return F()(this,x),_=Nm(this,x,[C()({supplements:[]},h),y]),Y()(_,"FORMAT","ean_13"),Y()(_,"SINGLE_CODE_ERROR",.7),Y()(_,"STOP_PATTERN",[1,1,1]),_}return us()(x,g),G()(x,[{key:"_findPattern",value:function(h,y,_,S){var N=new Array(h.length).fill(0),A={error:Number.MAX_VALUE,start:0,end:0},D=0;y||(y=this._nextSet(this._row));for(var M=!1,z=y;z<this._row.length;z++)if(this._row[z]^(_?1:0))N[D]+=1;else{if(D===N.length-1){var J=this._matchPattern(N,h);if(J<.48&&A.error&&J<A.error)return M=!0,A.error=J,A.start=z-N.reduce((function(ce,Re){return ce+Re}),0),A.end=z,A;if(S){for(var re=0;re<N.length-2;re++)N[re]=N[re+2];N[N.length-2]=0,N[N.length-1]=0,D--}}else D++;N[D]=1,_=!_}return M?A:null}},{key:"_decodeCode",value:function(h,y){var _=[0,0,0,0],S=h,N={error:Number.MAX_VALUE,code:-1,start:h,end:h},A=!this._row[S],D=0;y||(y=Eo.length);for(var M=S;M<this._row.length;M++)if(this._row[M]^(A?1:0))_[D]++;else{if(D===_.length-1){for(var z=0;z<y;z++){var J=this._matchPattern(_,Eo[z]);N.end=M,J<N.error&&(N.code=z,N.error=J)}return N.error>.48?null:N}_[++D]=1,A=!A}return null}},{key:"_findStart",value:function(){for(var h=this._nextSet(this._row),y=null;!y;){if(!(y=this._findPattern(th,h,!1,!0)))return null;var _=y.start-(y.end-y.start);if(_>=0&&this._matchRange(_,y.start,0))return y;h=y.end,y=null}return null}},{key:"_calculateFirstDigit",value:function(h){for(var y=0;y<nh.length;y++)if(h===nh[y])return y;return null}},{key:"_decodePayload",value:function(h,y,_){for(var S=pu({},h),N=0,A=0;A<6;A++){if(!(S=this._decodeCode(S.end)))return null;S.code>=10?(S.code-=10,N|=1<<5-A):N|=0<<5-A,y.push(S.code),_.push(S)}var D=this._calculateFirstDigit(N);if(D===null)return null;y.unshift(D);var M=this._findPattern(gu,S.end,!0,!1);if(M===null||!M.end)return null;_.push(M);for(var z=0;z<6;z++){if(!(M=this._decodeCode(M.end,10)))return null;_.push(M),y.push(M.code)}return M}},{key:"_verifyTrailingWhitespace",value:function(h){var y=h.end+(h.end-h.start);return y<this._row.length&&this._matchRange(h.end,y,0)?h:null}},{key:"_findEnd",value:function(h,y){var _=this._findPattern(this.STOP_PATTERN,h,y,!1);return _!==null?this._verifyTrailingWhitespace(_):null}},{key:"_checksum",value:function(h){for(var y=0,_=h.length-2;_>=0;_-=2)y+=h[_];y*=3;for(var S=h.length-1;S>=0;S-=2)y+=h[S];return y%10==0}},{key:"_decodeExtensions",value:function(h){var y=this._nextSet(this._row,h),_=this._findPattern(Cl,y,!1,!1);if(_===null)return null;for(var S=0;S<this.supplements.length;S++)try{var N=this.supplements[S].decode(this._row,_.end);if(N!==null)return{code:N.code,start:y,startInfo:_,end:N.end,decodedCodes:N.decodedCodes,format:this.supplements[S].FORMAT}}catch(A){console.error("* decodeExtensions error in ",this.supplements[S],": ",A)}return null}},{key:"decode",value:function(h,y){var _=new Array,S=new Array,N={},A=this._findStart();if(!A)return null;var D={start:A.start,end:A.end};if(S.push(D),!(D=this._decodePayload(D,_,S))||!(D=this._findEnd(D.end,!1))||(S.push(D),!this._checksum(_)))return null;if(this.supplements.length>0){var M=this._decodeExtensions(D.end);if(!M||!M.decodedCodes)return null;var z=M.decodedCodes[M.decodedCodes.length-1],J={start:z.start+((z.end-z.start)/2|0),end:z.end};if(!this._verifyTrailingWhitespace(J))return null;N={supplement:M,code:_.join("")+M.code}}return pu(pu({code:_.join(""),start:A.start,end:D.end,startInfo:A,decodedCodes:S},N),{},{format:this.FORMAT})}}])})(hr);function sh(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var yu=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=sh(this,x,[].concat(_)),Y()(h,"FORMAT","ean_2"),h}return us()(x,g),G()(x,[{key:"decode",value:function(h,y){h&&(this._row=h);var _=0,S=y,N=this._row.length,A=[],D=[],M=null;if(S===void 0)return null;for(var z=0;z<2&&S<N;z++){if(!(M=this._decodeCode(S)))return null;D.push(M),A.push(M.code%10),M.code>=10&&(_|=1<<1-z),z!==1&&(S=this._nextSet(this._row,M.end),S=this._nextUnset(this._row,S))}if(A.length!==2||parseInt(A.join(""))%4!==_)return null;var J=this._findStart();return{code:A.join(""),decodedCodes:D,end:M.end,format:this.FORMAT,startInfo:J,start:J.start}}}])})(Hr);function vu(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var bu=[24,20,18,17,12,6,3,10,9,5],xu=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=vu(this,x,[].concat(_)),Y()(h,"FORMAT","ean_5"),h}return us()(x,g),G()(x,[{key:"decode",value:function(h,y){if(y===void 0)return null;h&&(this._row=h);for(var _=0,S=y,N=this._row.length,A=null,D=[],M=[],z=0;z<5&&S<N;z++){if(!(A=this._decodeCode(S)))return null;M.push(A),D.push(A.code%10),A.code>=10&&(_|=1<<4-z),z!==4&&(S=this._nextSet(this._row,A.end),S=this._nextUnset(this._row,S))}if(D.length!==5||(function(re){for(var ce=re.length,Re=0,ie=ce-2;ie>=0;ie-=2)Re+=re[ie];Re*=3;for(var Se=ce-1;Se>=0;Se-=2)Re+=re[Se];return(Re*=3)%10})(D)!==(function(re){for(var ce=0;ce<10;ce++)if(re===bu[ce])return ce;return null})(_))return null;var J=this._findStart();return{code:D.join(""),decodedCodes:M,end:A.end,format:this.FORMAT,startInfo:J,start:J.start}}}])})(Hr);function rh(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var _u=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=rh(this,x,[].concat(_)),Y()(h,"FORMAT","ean_8"),h}return us()(x,g),G()(x,[{key:"_decodePayload",value:function(h,y,_){for(var S=h,N=0;N<4;N++){if(!(S=this._decodeCode(S.end,10)))return null;y.push(S.code),_.push(S)}if((S=this._findPattern(gu,S.end,!0,!1))===null)return null;_.push(S);for(var A=0;A<4;A++){if(!(S=this._decodeCode(S.end,10)))return null;_.push(S),y.push(S.code)}return S}}])})(Hr);function jm(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var ah=(function(g){function x(h){var y;return F()(this,x),y=jm(this,x,[C()({normalizeBarSpaceWidth:!1},h)]),Y()(y,"barSpaceRatio",[1,1]),Y()(y,"SINGLE_CODE_ERROR",.78),Y()(y,"AVG_CODE_ERROR",.38),Y()(y,"START_PATTERN",[1,1,1,1]),Y()(y,"STOP_PATTERN",[1,1,3]),Y()(y,"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),Y()(y,"MAX_CORRECTION_FACTOR",5),Y()(y,"FORMAT","i2of5"),h.normalizeBarSpaceWidth&&(y.SINGLE_CODE_ERROR=.38,y.AVG_CODE_ERROR=.09),y.config=h,In()(y,y)}return us()(x,g),G()(x,[{key:"_matchPattern",value:function(h,y){if(this.config.normalizeBarSpaceWidth){for(var _=[0,0],S=[0,0],N=[0,0],A=this.MAX_CORRECTION_FACTOR,D=1/A,M=0;M<h.length;M++)_[M%2]+=h[M],S[M%2]+=y[M];N[0]=S[0]/_[0],N[1]=S[1]/_[1],N[0]=Math.max(Math.min(N[0],A),D),N[1]=Math.max(Math.min(N[1],A),D),this.barSpaceRatio=N;for(var z=0;z<h.length;z++)h[z]*=this.barSpaceRatio[z%2]}return(J=x,re="_matchPattern",ce=this,Re=3,ie=p()(Gt()(1&Re?J.prototype:J),re,ce),2&Re&&typeof ie=="function"?function(Se){return ie.apply(ce,Se)}:ie)([h,y]);var J,re,ce,Re,ie}},{key:"_findPattern",value:function(h,y){var _=arguments.length>2&&arguments[2]!==void 0&&arguments[2],S=arguments.length>3&&arguments[3]!==void 0&&arguments[3],N=new Array(h.length).fill(0),A=0,D={error:Number.MAX_VALUE,start:0,end:0},M=this.AVG_CODE_ERROR;_=_||!1,S=S||!1,y||(y=this._nextSet(this._row));for(var z=y;z<this._row.length;z++)if(this._row[z]^(_?1:0))N[A]++;else{if(A===N.length-1){var J=N.reduce((function(Re,ie){return Re+ie}),0),re=this._matchPattern(N,h);if(re<M)return D.error=re,D.start=z-J,D.end=z,D;if(!S)return null;for(var ce=0;ce<N.length-2;ce++)N[ce]=N[ce+2];N[N.length-2]=0,N[N.length-1]=0,A--}else A++;N[A]=1,_=!_}return null}},{key:"_findStart",value:function(){for(var h=0,y=this._nextSet(this._row),_=null,S=1;!_;){if(!(_=this._findPattern(this.START_PATTERN,y,!1,!0)))return null;if(S=Math.floor((_.end-_.start)/4),(h=_.start-10*S)>=0&&this._matchRange(h,_.start,0))return _;y=_.end,_=null}return null}},{key:"_verifyTrailingWhitespace",value:function(h){var y=h.end+(h.end-h.start)/2;return y<this._row.length&&this._matchRange(h.end,y,0)?h:null}},{key:"_findEnd",value:function(){this._row.reverse();var h=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),h===null)return null;var y=h.start;return h.start=this._row.length-h.end,h.end=this._row.length-y,h!==null?this._verifyTrailingWhitespace(h):null}},{key:"_decodePair",value:function(h){for(var y=[],_=0;_<h.length;_++){var S=this._decodeCode(h[_]);if(!S)return null;y.push(S)}return y}},{key:"_decodeCode",value:function(h){for(var y=this.AVG_CODE_ERROR,_={error:Number.MAX_VALUE,code:-1,start:0,end:0},S=0;S<this.CODE_PATTERN.length;S++){var N=this._matchPattern(h,this.CODE_PATTERN[S]);N<_.error&&(_.code=S,_.error=N)}return _.error<y?_:null}},{key:"_decodePayload",value:function(h,y,_){for(var S=0,N=h.length,A=[[0,0,0,0,0],[0,0,0,0,0]],D=null;S<N;){for(var M=0;M<5;M++)A[0][M]=h[S]*this.barSpaceRatio[0],A[1][M]=h[S+1]*this.barSpaceRatio[1],S+=2;if(!(D=this._decodePair(A)))return null;for(var z=0;z<D.length;z++)y.push(D[z].code+""),_.push(D[z])}return D}},{key:"_verifyCounterLength",value:function(h){return h.length%10==0}},{key:"decode",value:function(h,y){var _=new Array,S=new Array,N=this._findStart();if(!N)return null;S.push(N);var A=this._findEnd();if(!A)return null;var D=this._fillCounters(N.end,A.start,!1);return this._verifyCounterLength(D)&&this._decodePayload(D,_,S)?_.length%2!=0||_.length<6?null:(S.push(A),{code:_.join(""),start:N.start,end:A.end,startInfo:N,decodedCodes:S,format:this.FORMAT}):null}}])})(hr);function Al(g,x){var h=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!h){if(Array.isArray(g)||(h=(function(D,M){if(D){if(typeof D=="string")return ih(D,M);var z={}.toString.call(D).slice(8,-1);return z==="Object"&&D.constructor&&(z=D.constructor.name),z==="Map"||z==="Set"?Array.from(D):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?ih(D,M):void 0}})(g))||x){h&&(g=h);var y=0,_=function(){};return{s:_,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,N=!0,A=!1;return{s:function(){h=h.call(g)},n:function(){var D=h.next();return N=D.done,D},e:function(D){A=!0,S=D},f:function(){try{N||h.return==null||h.return()}finally{if(A)throw S}}}}function ih(g,x){(x==null||x>g.length)&&(x=g.length);for(var h=0,y=Array(x);h<x;h++)y[h]=g[h];return y}function km(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var er=[2,2.5,3],No=(function(g){function x(){var h,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return F()(this,x),h=km(this,x,[y]),Y()(h,"FORMAT","pharmacode"),Y()(h,"SINGLE_CODE_ERROR",.7),Y()(h,"AVG_CODE_ERROR",.48),h}return us()(x,g),G()(x,[{key:"_findStart",value:function(){for(var h=0;h<this._row.length;){var y=this._nextSet(this._row,h);if(y>=this._row.length)return null;for(var _=y;_<this._row.length&&this._row[_];)_++;var S=_-y;if(S<5)h=_+1;else{var N=y-Math.max(2*S,20);if(N<0)h=_+1;else if(this._matchRange(N,y,0)){var A=Math.max(10*S,50),D=this._nextSet(this._row,_);if(D>=this._row.length)h=_+1;else{if(!(D-_>A))return{start:y,end:_};h=_+1}}else h=_+1}}return null}},{key:"_smoothBarWidths",value:function(h){if(h.length<=2)return h;for(var y=h.slice(),_=1;_<y.length-1;_++){var S=y[_-1],N=y[_],A=[S,N,y[_+1]].sort((function(M,z){return M-z}))[1],D=Math.abs(N-A);D>0&&D<=3&&(y[_]=A)}return y}},{key:"_extractBarsAndSpaces",value:function(h){for(var y=[],_=[],S=h,N=0,A=!1;S<this._row.length&&this._row[S];)N++,S++;if(N===0)return null;for(y.push(N),N=0;S<this._row.length&&!this._row[S];)N++,S++;if(N===0||S>=this._row.length)return null;_.push(N);for(var D=6*(y[0]<_[0]?y[0]:.8*_[0]),M=2.5*_[0];S<this._row.length&&y.length<16;){for(N=0;S<this._row.length&&this._row[S];)N++,S++;if(N===0)break;y.push(N),N=0;for(var z=S;S<this._row.length&&!this._row[S];)N++,S++;if(N===0)break;if(N>=D){A=!0,S=z;break}if(y.length>=2&&N>=M){A=!0,S=z;break}if(S>=this._row.length){A=!0,S=z;break}_.push(N),_.length>=2&&(M=2*(_.reduce((function(J,re){return J+re}),0)/_.length))}return A?y.length<2||y.length>16||_.length!==y.length-1?null:this._validateSpaces(_)&&this._validateBarSizeCount(y)?{bars:this._smoothBarWidths(y),spaces:_,end:S}:null:null}},{key:"_validateBarSizeCount",value:function(h){if(h.length===0)return!1;var y,_=[],S=Al(h);try{for(S.s();!(y=S.n()).done;){var N,A=y.value,D=!1,M=Al(_);try{for(M.s();!(N=M.n()).done;){var z=N.value,J=z.reduce((function(re,ce){return re+ce}),0)/z.length;if(Math.abs(A-J)<=.35*J){z.push(A),D=!0;break}}}catch(re){M.e(re)}finally{M.f()}D||_.push([A])}}catch(re){S.e(re)}finally{S.f()}return!(_.length>2)}},{key:"_validateSpaces",value:function(h){if(h.length===0)return!0;var y=h.reduce((function(S,N){return S+N}),0)/h.length;if(y===0)return!1;var _=h.reduce((function(S,N){return S+Math.pow(N-y,2)}),0)/h.length;return Math.sqrt(_)/y<=.35}},{key:"_validateBarRatios",value:function(h,y){var _=h.reduce((function(fn,hs){return fn+hs}),0)/h.length,S=h.reduce((function(fn,hs){return fn+Math.abs(hs-_)}),0)/h.length;if((_===0?0:S/_)<=.1){var N=y.length>0?y.reduce((function(fn,hs){return fn+hs}),0)/y.length:0;return N>0&&N/_<.7?{narrowWidth:_/2.5,wideRatio:2.5}:{narrowWidth:_,wideRatio:2}}var A=Array.from(new Set(h.slice().sort((function(fn,hs){return fn-hs}))));if(A.length<2)return{narrowWidth:h.reduce((function(fn,hs){return fn+hs}),0)/h.length,wideRatio:2};for(var D=[],M=0;M<A.length-1;M++){var z,J=(A[M]+A[M+1])/2,re=[],ce=[],Re=Al(h);try{for(Re.s();!(z=Re.n()).done;){var ie=z.value;ie<J?re.push(ie):ce.push(ie)}}catch(fn){Re.e(fn)}finally{Re.f()}if(re.length!==0&&ce.length!==0){for(var Se=re.reduce((function(fn,hs){return fn+hs}),0)/re.length,Pe=ce.reduce((function(fn,hs){return fn+hs}),0)/ce.length,Fe=Pe/Se,mt=er[0],ut=Math.abs(Fe-mt),Et=0,Yt=er;Et<Yt.length;Et++){var Dt=Yt[Et],Zt=Math.abs(Fe-Dt);Zt<ut&&(ut=Zt,mt=Dt)}D.push({threshold:J,narrowBars:re,wideBars:ce,avgN:Se,avgW:Pe,ratio:Fe,ratioDiff:ut,matchedRatio:mt})}}D.sort((function(fn,hs){return fn.ratioDiff-hs.ratioDiff}));for(var tr=0,xs=D;tr<xs.length;tr++){var On=xs[tr],Aa=.05*On.matchedRatio;if(!(Math.abs(On.ratio-On.matchedRatio)>Aa)){var Gr,pa=.15*On.avgN,Ar=.15*On.avgW,gr=!0,Rn=Al(On.narrowBars);try{for(Rn.s();!(Gr=Rn.n()).done;){var Rr=Gr.value;if(Math.abs(Rr-On.avgN)>pa){gr=!1;break}}}catch(fn){Rn.e(fn)}finally{Rn.f()}if(gr){var ga,Yr=Al(On.wideBars);try{for(Yr.s();!(ga=Yr.n()).done;){var Kr=ga.value;if(Math.abs(Kr-On.avgW)>Ar){gr=!1;break}}}catch(fn){Yr.e(fn)}finally{Yr.f()}if(gr)return{narrowWidth:On.avgN,wideRatio:On.matchedRatio}}}}return null}},{key:"_validatePeriodicity",value:function(h,y){if(h.length>0){var _=h.reduce((function(z,J){return z+J}),0)/h.length,S=h.reduce((function(z,J){return z+Math.pow(J-_,2)}),0)/h.length,N=Math.sqrt(S);if((_!==0?N/_:0)>.65)return!1}if(y.length>0){var A=y.reduce((function(z,J){return z+J}),0)/y.length,D=y.reduce((function(z,J){return z+Math.pow(J-A,2)}),0)/y.length,M=Math.sqrt(D);if((A!==0?M/A:0)>.55)return!1}return!0}},{key:"_validateQuietZones",value:function(h,y,_){var S=1*y;if(h.start>=2&&h.start<S)return!1;var N=this._row.length-_;return N<6||!(N<S)}},{key:"_decodeBars",value:function(h,y){for(var _=1.6*(y??Math.min.apply(Math,R()(h))),S=0,N=h.slice().reverse(),A=0;A<N.length;A++)S+=N[A]>_?Math.pow(2,A+1):Math.pow(2,A);for(var D="",M=N.length-1;M>=0;M--)D+=N[M]>_?"W":"N";return{value:S,pattern:D}}},{key:"_verifyTrailingWhitespace",value:function(h,y){var _=Math.min(h+2*y,this._row.length);return this._matchRange(h,_,0)}},{key:"_validatePatternConsistency",value:function(h,y){for(var _=h.start,S=0,N=0,A=0,D=[-2,-1,1,2];A<D.length;A++){var M=_+D[A];if(!(M<0||M>=this._row.length)){N++;var z=this._extractBarsAndSpaces(M);if(z&&z.bars.length===y.length){for(var J=!0,re=0;re<y.length;re++)if(Math.abs(z.bars[re]-y[re])/Math.max(y[re],1)>.25){J=!1;break}J&&S++}}}return N>0&&S>=.5*N}},{key:"decode",value:function(h,y){var _=this._findStart();if(!_||_.start>.5*this._row.length)return null;var S=this._extractBarsAndSpaces(_.start);if(!S)return null;var N=S.bars,A=S.spaces,D=S.end;if(N.reduce((function(Re,ie){return Re+ie}),0)+A.reduce((function(Re,ie){return Re+ie}),0)<20||this._row.length-D<0||!this._validateSpaces(A)||!this._validatePeriodicity(N,A)||!this._validatePatternConsistency(_,N))return null;var M=this._validateBarRatios(N,A);if(!M||!this._validateQuietZones(_,M.narrowWidth,D))return null;var z=this._decodeBars(N,M.narrowWidth);if(!z)return null;var J=z.value;if(J<3||J>131070)return null;var re=N.reduce((function(Re,ie){return Re+ie}),0)/N.length;this._verifyTrailingWhitespace(D,re);var ce=N.map((function(Re,ie){return{code:Re>1.6*Math.min.apply(Math,R()(N))?1:0,start:0,end:0,error:0}}));return{code:J.toString(),start:_.start,end:D,startInfo:_,decodedCodes:ce,pattern:z.pattern,format:this.FORMAT}}}])})(hr);Y()(No,"adjacentLineValidationMatches",1);var gc=No;function wu(g,x){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);x&&(y=y.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),h.push.apply(h,y)}return h}function oh(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}function Su(g,x,h,y){var _=p()(Gt()(g.prototype),x,h);return 2&y&&typeof _=="function"?function(S){return _.apply(h,S)}:_}var yc=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=oh(this,x,[].concat(_)),Y()(h,"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),Y()(h,"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),Y()(h,"FORMAT","upc_e"),h}return us()(x,g),G()(x,[{key:"_decodePayload",value:function(h,y,_){for(var S=(function(D){for(var M=1;M<arguments.length;M++){var z=arguments[M]!=null?arguments[M]:{};M%2?wu(Object(z),!0).forEach((function(J){Y()(D,J,z[J])})):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(z)):wu(Object(z)).forEach((function(J){Object.defineProperty(D,J,Object.getOwnPropertyDescriptor(z,J))}))}return D})({},h),N=0,A=0;A<6;A++){if(!(S=this._decodeCode(S.end)))return null;S.code>=10&&(S.code=S.code-10,N|=1<<5-A),y.push(S.code),_.push(S)}return this._determineParity(N,y)?S:null}},{key:"_determineParity",value:function(h,y){for(var _=0;_<this.CODE_FREQUENCY.length;_++)for(var S=0;S<this.CODE_FREQUENCY[_].length;S++)if(h===this.CODE_FREQUENCY[_][S])return y.unshift(_),y.push(S),!0;return!1}},{key:"_convertToUPCA",value:function(h){var y=[h[0]],_=h[h.length-2];return(y=_<=2?y.concat(h.slice(1,3)).concat([_,0,0,0,0]).concat(h.slice(3,6)):_===3?y.concat(h.slice(1,4)).concat([0,0,0,0,0]).concat(h.slice(4,6)):_===4?y.concat(h.slice(1,5)).concat([0,0,0,0,0,h[5]]):y.concat(h.slice(1,6)).concat([0,0,0,0,_])).push(h[h.length-1]),y}},{key:"_checksum",value:function(h){return Su(x,"_checksum",this,3)([this._convertToUPCA(h)])}},{key:"_findEnd",value:function(h,y){return Su(x,"_findEnd",this,3)([h,!0])}},{key:"_verifyTrailingWhitespace",value:function(h){var y=h.end+(h.end-h.start)/2;return y<this._row.length&&this._matchRange(h.end,y,0)?h:null}}])})(Hr);function Cm(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var Ii=(function(g){function x(){var h;F()(this,x);for(var y=arguments.length,_=new Array(y),S=0;S<y;S++)_[S]=arguments[S];return h=Cm(this,x,[].concat(_)),Y()(h,"FORMAT","upc_a"),h}return us()(x,g),G()(x,[{key:"decode",value:function(h,y){var _=Hr.prototype.decode.call(this);return _&&_.code&&_.code.length===13&&_.code.charAt(0)==="0"?(_.code=_.code.substring(1),_):null}}])})(Hr),jo={},ti={UP:1,DOWN:-1};jo.getBarcodeLine=function(g,x,h){var y,_,S,N,A,D=0|x.x,M=0|x.y,z=0|h.x,J=0|h.y,re=Math.abs(J-M)>Math.abs(z-D),ce=[],Re=g.data,ie=g.size.x,Se=255,Pe=0;function Fe(Yt,Dt){A=Re[Dt*ie+Yt],Se=A<Se?A:Se,Pe=A>Pe?A:Pe,ce.push(A)}re&&(S=D,D=M,M=S,S=z,z=J,J=S),D>z&&(S=D,D=z,z=S,S=M,M=J,J=S);var mt=z-D,ut=Math.abs(J-M);y=mt/2|0,_=M;var Et=M<J?1:-1;for(N=D;N<z;N++)re?Fe(_,N):Fe(N,_),(y-=ut)<0&&(_+=Et,y+=mt);return{line:ce,min:Se,max:Pe}},jo.toBinaryLine=function(g){var x,h,y,_,S,N,A=g.min,D=g.max,M=g.line,z=A+(D-A)/2,J=[],re=(D-A)/12,ce=-re;for(y=M[0]>z?ti.UP:ti.DOWN,J.push({pos:0,val:M[0]}),S=0;S<M.length-2;S++)y!==(_=(x=M[S+1]-M[S])+(h=M[S+2]-M[S+1])<ce&&M[S+1]<1.5*z?ti.DOWN:x+h>re&&M[S+1]>.5*z?ti.UP:y)&&(J.push({pos:S,val:M[S]}),y=_);for(J.push({pos:M.length,val:M[M.length-1]}),N=J[0].pos;N<J[1].pos;N++)M[N]=M[N]>z?0:1;for(S=1;S<J.length-1;S++)for(re=J[S+1].val>J[S].val?J[S].val+(J[S+1].val-J[S].val)/3*2|0:J[S+1].val+(J[S].val-J[S+1].val)/3|0,N=J[S].pos;N<J[S+1].pos;N++)M[N]=M[N]>re?0:1;return{line:M,threshold:re}},jo.debug={printFrequency:function(g,x){var h,y=x.getContext("2d");for(x.width=g.length,x.height=256,y.beginPath(),y.strokeStyle="blue",h=0;h<g.length;h++)y.moveTo(h,255),y.lineTo(h,255-g[h]);y.stroke(),y.closePath()},printPattern:function(g,x){var h,y=x.getContext("2d");for(x.width=g.length,y.fillColor="black",h=0;h<g.length;h++)g[h]===1&&y.fillRect(h,0,1,100)}};var ko=jo;function lh(g,x){var h=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!h){if(Array.isArray(g)||(h=(function(D,M){if(D){if(typeof D=="string")return ni(D,M);var z={}.toString.call(D).slice(8,-1);return z==="Object"&&D.constructor&&(z=D.constructor.name),z==="Map"||z==="Set"?Array.from(D):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?ni(D,M):void 0}})(g))||x){h&&(g=h);var y=0,_=function(){};return{s:_,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,N=!0,A=!1;return{s:function(){h=h.call(g)},n:function(){var D=h.next();return N=D.done,D},e:function(D){A=!0,S=D},f:function(){try{N||h.return==null||h.return()}finally{if(A)throw S}}}}function ni(g,x){(x==null||x>g.length)&&(x=g.length);for(var h=0,y=Array(x);h<x;h++)y[h]=g[h];return y}var ca={code_128_reader:kl,ean_reader:Hr,ean_5_reader:xu,ean_2_reader:yu,ean_8_reader:_u,code_39_reader:ot,code_39_vin_reader:Nr,codabar_reader:Ls,upc_reader:Ii,upc_e_reader:yc,i2of5_reader:ah,"2of5_reader":jl,code_93_reader:Mi,code_32_reader:gn,pharmacode_reader:gc},Rl={registerReader:function(g,x){ca[g]=x},create:function(g,x){var h=[];function y(){g.readers.forEach((function(D){var M,z={},J=[];T()(D)==="object"?(M=D.format,z=D.config):typeof D=="string"&&(M=D),z.supplements&&(J=z.supplements.map((function(ce){return new ca[ce]})));try{var re=new ca[M](z,J);h.push(re)}catch(ce){throw console.error("* Error constructing reader ",M,ce),ce}}))}function _(D){var M,z=null,J=ko.getBarcodeLine(x,D[0],D[1]);ko.toBinaryLine(J);var re=-1;for(M=0;M<h.length&&z===null;M++)typeof h[M].setImageWrapper=="function"&&h[M].setImageWrapper(x),(z=h[M].decodePattern(J.line))!==null&&(re=M);return z===null||re>=0&&h[re]instanceof gc&&!(function(ce,Re,ie,Se){var Pe=Math.round(ce[1].y),Fe=Re.start,mt=ie.constructor,ut=mt&&mt.adjacentLineValidationMatches||0;if(ut<=0)return!0;for(var Et=0,Yt=!1,Dt=0,Zt=[1,2,3];Dt<Zt.length;Dt++){var tr=Zt[Dt];if(Yt)break;for(var xs=0,On=[-1,1];xs<On.length;xs++){var Aa=On[xs];if(Yt)break;var Gr=Pe+tr*Aa;if(!(Gr<0||Gr>=Se.size.y)){var pa={x:ce[0].x,y:Gr},Ar={x:ce[1].x,y:Gr};try{var gr=ko.getBarcodeLine(Se,pa,Ar);ko.toBinaryLine(gr),ie._row=gr.line;var Rn=ie._findStart();if(Rn!==null&&Rn.start===Fe&&++Et>=ut){Yt=!0;break}}catch{}}}}return Et>=ut})(D,z,h[re],x)?null:{codeResult:z,barcodeLine:J}}function S(D){return N.apply(this,arguments)}function N(){return(N=vs()(Kn.a.mark((function D(M){var z,J,re,ce,Re;return Kn.a.wrap((function(ie){for(;;)switch(ie.prev=ie.next){case 0:z=null,J=lh(h),ie.prev=1,J.s();case 2:if((re=J.n()).done){ie.next=5;break}if(!(ce=re.value).decodeImage){ie.next=4;break}return ie.next=3,ce.decodeImage(M);case 3:if(!(z=ie.sent)){ie.next=4;break}return ie.abrupt("continue",5);case 4:ie.next=2;break;case 5:ie.next=7;break;case 6:ie.prev=6,Re=ie.catch(1),J.e(Re);case 7:return ie.prev=7,J.f(),ie.finish(7);case 8:return ie.abrupt("return",z);case 9:case"end":return ie.stop()}}),D,null,[[1,6,7,8]])})))).apply(this,arguments)}function A(D){var M,z,J=(function(ce){return Math.sqrt(Math.pow(Math.abs(ce[1].y-ce[0].y),2)+Math.pow(Math.abs(ce[1].x-ce[0].x),2))})(M=(function(ce){return[{x:(ce[1][0]-ce[0][0])/2+ce[0][0],y:(ce[1][1]-ce[0][1])/2+ce[0][1]},{x:(ce[3][0]-ce[2][0])/2+ce[2][0],y:(ce[3][1]-ce[2][1])/2+ce[2][1]}]})(D)),re=Math.atan2(M[1].y-M[0].y,M[1].x-M[0].x);return(M=(function(ce,Re,ie){function Se(Pe){var Fe=Pe*Math.sin(Re),mt=Pe*Math.cos(Re);ce[0].y-=Fe,ce[0].x-=mt,ce[1].y+=Fe,ce[1].x+=mt}for(Se(ie);ie>1&&(!x.inImageWithBorder(ce[0])||!x.inImageWithBorder(ce[1]));)Se(-(ie-=Math.ceil(ie/2)));return ce})(M,re,Math.floor(.1*J)))===null?null:((z=_(M))===null&&(z=(function(ce,Re,ie){var Se,Pe,Fe,mt=Math.sqrt(Math.pow(ce[1][0]-ce[0][0],2)+Math.pow(ce[1][1]-ce[0][1],2)),ut=null,Et=Math.sin(ie),Yt=Math.cos(ie);for(Se=1;Se<16&&ut===null;Se++)Fe={y:(Pe=mt/16*Se*(Se%2==0?-1:1))*Et,x:Pe*Yt},Re[0].y+=Fe.x,Re[0].x-=Fe.y,Re[1].y+=Fe.x,Re[1].x-=Fe.y,ut=_(Re);return ut})(D,M,re)),z===null?null:{codeResult:z.codeResult,line:M,angle:re,pattern:z.barcodeLine.line,threshold:z.barcodeLine.threshold})}return y(),{decodeFromBoundingBox:function(D){return A(D)},decodeFromBoundingBoxes:function(D){var M,z,J=[],re=g.multiple;for(M=0;M<D.length;M++){var ce=D[M];if((z=A(ce)||{}).box=ce,re)J.push(z);else if(z.codeResult)return z}return{barcodes:J}},decodeFromImage:function(D){return vs()(Kn.a.mark((function M(){var z;return Kn.a.wrap((function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=1,S(D);case 1:return z=J.sent,J.abrupt("return",z);case 2:case"end":return J.stop()}}),M)})))()},registerReader:function(D,M){if(ca[D])throw new Error("cannot register existing reader",D);ca[D]=M},setReaders:function(D){g.readers=D,h.length=0,y()}}}},si=(function(){var g={};function x(_){return g[_]||(g[_]={subscribers:[]}),g[_]}function h(_,S){_.async?setTimeout((function(){_.callback(S)}),4):_.callback(S)}function y(_,S,N){var A;if(typeof S=="function")A={callback:S,async:N};else if(!(A=S).callback)throw new Error("Callback was not specified on options");x(_).subscribers.push(A)}return{subscribe:function(_,S,N){return y(_,S,N)},publish:function(_,S){var N=x(_),A=N.subscribers;A.filter((function(D){return!!D.once})).forEach((function(D){h(D,S)})),N.subscribers=A.filter((function(D){return!D.once})),N.subscribers.forEach((function(D){h(D,S)}))},once:function(_,S){var N=arguments.length>2&&arguments[2]!==void 0&&arguments[2];y(_,{callback:S,async:N,once:!0})},unsubscribe:function(_,S){if(_){var N=x(_);N.subscribers=N&&S?N.subscribers.filter((function(A){return A.callback!==S})):[]}else g={}}}})(),Oi=i(81),ch=i.n(Oi),uh=i(82),dh=i.n(uh),Am=i(83);function Rm(g,x,h){return x=Gt()(x),In()(g,(function(){try{var y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!y})()})()?Reflect.construct(x,h||[],Gt()(g).constructor):x.apply(g,h))}var Tu=(function(g){function x(h,y){var _;return F()(this,x),_=Rm(this,x,[h]),Y()(_,"code",void 0),_.code=y,Object.setPrototypeOf(_,x.prototype),_}return us()(x,g),G()(x,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,code:this.code}}}])})(i.n(Am)()(Error)),Eu="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function hh(){try{return navigator.mediaDevices.enumerateDevices()}catch{var g=new Tu("enumerateDevices is not defined. ".concat(Eu),-1);return Promise.reject(g)}}function vc(g){try{return navigator.mediaDevices.getUserMedia(g)}catch{var x=new Tu("getUserMedia is not defined. ".concat(Eu),-1);return Promise.reject(x)}}var Cs,bc=["deviceId"];function fr(g,x){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);x&&(y=y.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),h.push.apply(h,y)}return h}function Pi(g){for(var x=1;x<arguments.length;x++){var h=arguments[x]!=null?arguments[x]:{};x%2?fr(Object(h),!0).forEach((function(y){Y()(g,y,h[y])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(h)):fr(Object(h)).forEach((function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(h,y))}))}return g}function Nu(g,x){var h=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!h){if(Array.isArray(g)||(h=(function(D,M){if(D){if(typeof D=="string")return Dl(D,M);var z={}.toString.call(D).slice(8,-1);return z==="Object"&&D.constructor&&(z=D.constructor.name),z==="Map"||z==="Set"?Array.from(D):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?Dl(D,M):void 0}})(g))||x){h&&(g=h);var y=0,_=function(){};return{s:_,n:function(){return y>=g.length?{done:!0}:{done:!1,value:g[y++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,N=!0,A=!1;return{s:function(){h=h.call(g)},n:function(){var D=h.next();return N=D.done,D},e:function(D){A=!0,S=D},f:function(){try{N||h.return==null||h.return()}finally{if(A)throw S}}}}function Dl(g,x){(x==null||x>g.length)&&(x=g.length);for(var h=0,y=Array(x);h<x;h++)y[h]=g[h];return y}function xc(g){return new Promise((function(x,h){var y=10;(function _(){y>0?g.videoWidth>10&&g.videoHeight>10?x():window.setTimeout(_,500):h(new Tu("Unable to play video stream. Is webcam working?",-1)),y--})()}))}function ju(g,x){return ri.apply(this,arguments)}function ri(){return(ri=vs()(Kn.a.mark((function g(x,h){var y;return Kn.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=1,vc(h);case 1:if(y=_.sent,Cs=y,!x){_.next=2;break}return x.setAttribute("autoplay","true"),x.setAttribute("muted","true"),x.setAttribute("playsinline","true"),x.srcObject=y,x.addEventListener("loadedmetadata",(function(){x.play().catch((function(S){console.warn("* Error while trying to play video stream:",S)}))})),_.abrupt("return",xc(x));case 2:return _.abrupt("return",Promise.resolve());case 3:case"end":return _.stop()}}),g)})))).apply(this,arguments)}function ku(g){var x=dh()(g,["facing","minAspectRatio","maxAspectRatio"]);return g.minAspectRatio!==void 0&&g.minAspectRatio>0&&(x.aspectRatio=g.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),g.facing!==void 0&&(x.facingMode=g.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),x}function _c(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=ku(g);return x&&x.deviceId&&x.facingMode&&delete x.facingMode,Promise.resolve({audio:!1,video:x})}function Li(){return(Li=vs()(Kn.a.mark((function g(x){var h,y,_,S,N,A,D,M,z,J;return Kn.a.wrap((function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=1,hh();case 1:if(h=re.sent,y=h.filter((function(ce){return ce.kind==="videoinput"})),x){re.next=2;break}return re.abrupt("return",y);case 2:_=[],S=ku(x),S.deviceId,N=ch()(S,bc),A=Nu(y),re.prev=3,A.s();case 4:if((D=A.n()).done){re.next=9;break}return M=D.value,re.prev=5,z={audio:!1,video:Pi(Pi({},N),{},{deviceId:{exact:M.deviceId}})},re.next=6,vc(z);case 6:re.sent.getTracks().forEach((function(ce){return ce.stop()})),_.push(M),re.next=8;break;case 7:re.prev=7,re.catch(5);case 8:re.next=4;break;case 9:re.next=11;break;case 10:re.prev=10,J=re.catch(3),A.e(J);case 11:return re.prev=11,A.f(),re.finish(11);case 12:return re.abrupt("return",_);case 13:case"end":return re.stop()}}),g,null,[[3,10,11,12],[5,7]])})))).apply(this,arguments)}function wc(){if(!Cs)return null;var g=Cs.getVideoTracks();return g&&g!=null&&g.length?g[0]:null}var As={requestedVideoElement:null,request:function(g,x){return vs()(Kn.a.mark((function h(){var y;return Kn.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return As.requestedVideoElement=g,_.next=1,_c(x);case 1:return y=_.sent,_.abrupt("return",ju(g,y));case 2:case"end":return _.stop()}}),h)})))()},release:function(){var g=Cs&&Cs.getVideoTracks();return As.requestedVideoElement!==null&&As.requestedVideoElement.pause(),new Promise((function(x){setTimeout((function(){g&&g.length&&g.forEach((function(h){return h.stop()})),Cs=null,As.requestedVideoElement=null,x()}),0)}))},enumerateVideoDevices:function(g){return Li.apply(this,arguments)},getActiveStream:function(){var g;return(g=Cs)!==null&&g!==void 0?g:null},getActiveStreamLabel:function(){var g=wc();return g?g.label:""},getActiveTrack:wc,disableTorch:function(){return vs()(Kn.a.mark((function g(){var x,h;return Kn.a.wrap((function(y){for(;;)switch(y.prev=y.next){case 0:if(!(x=wc())){y.next=4;break}return y.prev=1,y.next=2,x.applyConstraints({advanced:[{torch:!1}]});case 2:y.next=4;break;case 3:throw y.prev=3,(h=y.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),h;case 4:case"end":return y.stop()}}),g,null,[[1,3]])})))()},enableTorch:function(){return vs()(Kn.a.mark((function g(){var x,h;return Kn.a.wrap((function(y){for(;;)switch(y.prev=y.next){case 0:if(!(x=wc())){y.next=4;break}return y.prev=1,y.next=2,x.applyConstraints({advanced:[{torch:!0}]});case 2:y.next=4;break;case 3:throw y.prev=3,(h=y.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),h;case 4:case"end":return y.stop()}}),g,null,[[1,3]])})))()}},Co=As,ua={create:function(g){var x,h=document.createElement("canvas"),y=h.getContext("2d",{willReadFrequently:!!g.willReadFrequently}),_=[],S=(x=g.capacity)!==null&&x!==void 0?x:20,N=g.capture===!0;function A(D){return!!S&&D&&!(function(M,z){return z&&z.some((function(J){return Object.keys(J).every((function(re){return J[re]===M[re]}))}))})(D,g.blacklist)&&(function(M,z){return typeof z!="function"||z(M)})(D,g.filter)}return{addResult:function(D,M,z){var J={};A(z)&&(S--,J.codeResult=z,N&&(h.width=M.x,h.height=M.y,ia.drawImage(D,M,y),J.frame=h.toDataURL()),_.push(J))},getResults:function(){return _}}}},fh={inputStream:{type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,canvas:{createOverlay:!0},decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},Ml=Math.PI/180,ai={};ai.create=function(g,x){var h,y={},_=g.getConfig(),S=Zs(g.getRealWidth(),g.getRealHeight()),N=g.getCanvasSize(),A=Zs(g.getWidth(),g.getHeight()),D=g.getTopRight(),M=D.x,z=D.y,J=null,re=null,ce=_.willReadFrequently;function Re(ie,Se,Pe,Fe,mt){var ut=Math.floor(Fe),Et=Math.floor(mt),Yt=Math.min(ut+1,Se-1),Dt=Math.min(Et+1,Pe-1),Zt=Fe-ut,tr=mt-Et;return(ie[Et*Se+ut]*(1-Zt)+ie[Et*Se+Yt]*Zt)*(1-tr)+(ie[Dt*Se+ut]*(1-Zt)+ie[Dt*Se+Yt]*Zt)*tr}return(h=x||document.createElement("canvas")).width=N.x,h.height=N.y,J=h.getContext("2d",{willReadFrequently:!!ce}),re=new Uint8Array(A.x*A.y),y.attachData=function(ie){re=ie},y.getData=function(){return re},y.grab=function(){var ie=_.halfSample,Se=g.getFrame(),Pe=Se,Fe=0;if(Pe){if((function(Rn,Rr,ga){Rn.width!==Rr.x&&(Rn.width=Rr.x),Rn.height!==Rr.y&&(Rn.height=Rr.y)})(h,N,_.debug),_.type==="ImageStream"&&(Pe=Se.img,Se.tags&&Se.tags.orientation))switch(Se.tags.orientation){case 6:Fe=90*Ml;break;case 8:Fe=-90*Ml}if(Fe!==0?(J.translate(N.x/2,N.y/2),J.rotate(Fe),J.drawImage(Pe,-N.y/2,-N.x/2,N.y,N.x),J.rotate(-Fe),J.translate(-N.x/2,-N.y/2)):J.drawImage(Pe,0,0,N.x,N.y),ie)(function(Rn,Rr,ga){for(var Yr,Kr=0,fn=Rr.x,hs=Math.floor(Rn.length/4),yr=Rr.x/2,vr=0,Ra=Rr.x;fn<hs;){for(Yr=0;Yr<yr;Yr++)ga[vr]=(.299*Rn[4*Kr+0]+.587*Rn[4*Kr+1]+.114*Rn[4*Kr+2]+(.299*Rn[4*(Kr+1)+0]+.587*Rn[4*(Kr+1)+1]+.114*Rn[4*(Kr+1)+2])+(.299*Rn[4*fn+0]+.587*Rn[4*fn+1]+.114*Rn[4*fn+2])+(.299*Rn[4*(fn+1)+0]+.587*Rn[4*(fn+1)+1]+.114*Rn[4*(fn+1)+2]))/4,vr++,Kr+=2,fn+=2;Kr+=Ra,fn+=Ra}})(J.getImageData(M,z,A.x,A.y).data,A,re);else{var mt=document.createElement("canvas");mt.width=S.x,mt.height=S.y;var ut=mt.getContext("2d");Fe!==0?(ut.translate(S.x/2,S.y/2),ut.rotate(Fe),ut.drawImage(Pe,-S.y/2,-S.x/2,S.y,S.x)):ut.drawImage(Pe,0,0,S.x,S.y);var Et=ut.getImageData(0,0,S.x,S.y).data,Yt=new Uint8Array(S.x*S.y);ra(Et,Yt,_);for(var Dt=new Uint8Array(N.x*N.y),Zt=S.x/N.x,tr=S.y/N.y,xs=0;xs<N.y;xs++)for(var On=0;On<N.x;On++){var Aa=On*Zt,Gr=xs*tr;Dt[xs*N.x+On]=0|Re(Yt,S.x,S.y,Aa,Gr)}for(var pa=0;pa<A.y;pa++)for(var Ar=0;Ar<A.x;Ar++){var gr=(pa+z)*N.x+(Ar+M);re[pa*A.x+Ar]=Dt[gr]}}return!0}return!1},y.getSize=function(){return A},y};var Cu=ai,Il={274:"orientation"},Sc=Object.keys(Il).map((function(g){return Il[g]}));function mh(g){return new Promise((function(x){var h=new FileReader;h.onload=function(y){return x(y.target.result)},h.readAsArrayBuffer(g)}))}function jr(g){return new Promise((function(x,h){var y=new XMLHttpRequest;y.open("GET",g,!0),y.responseType="blob",y.onreadystatechange=function(){y.readyState!==XMLHttpRequest.DONE||y.status!==200&&y.status!==0||x(this.response)},y.onerror=h,y.send()}))}function Ao(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sc,h=new DataView(g),y=g.byteLength,_=x.reduce((function(N,A){var D=Object.keys(Il).filter((function(M){return Il[M]===A}))[0];return D&&(N[D]=A),N}),{}),S=2;if(h.getUint8(0)!==255||h.getUint8(1)!==216)return!1;for(;S<y;){if(h.getUint8(S)!==255)return!1;if(h.getUint8(S+1)===225)return Ro(h,S+4,_);S+=2+h.getUint16(S+2)}return!1}function Ro(g,x,h){if((function(N,A,D){for(var M="",z=A;z<A+D;z++)M+=String.fromCharCode(N.getUint8(z));return M})(g,x,4)!=="Exif")return!1;var y,_=x+6;if(g.getUint16(_)===18761)y=!1;else{if(g.getUint16(_)!==19789)return!1;y=!0}if(g.getUint16(_+2,!y)!==42)return!1;var S=g.getUint32(_+4,!y);return!(S<8)&&(function(N,A,D,M,z){for(var J=N.getUint16(D,!z),re={},ce=0;ce<J;ce++){var Re=D+12*ce+2,ie=M[N.getUint16(Re,!z)];ie&&(re[ie]=Tc(N,Re,A,D,z))}return re})(g,_,_+S,h,y)}function Tc(g,x,h,y,_){var S=g.getUint16(x+2,!_),N=g.getUint32(x+4,!_);switch(S){case 3:if(N===1)return g.getUint16(x+8,!_)}return null}function Ol(g,x){return"".concat(g,"image-").concat(x.toString().padStart(3,"0"),".jpg")}var mr={};function kr(g,x){g.onload=function(){x.loaded(this)},g.onerror=function(){x.loaded(this)}}mr.load=function(g,x,h,y,_,S){var N,A,D,M=new Array(y),z=new Array(M.length);if(_===!1)M[0]=g;else for(N=0;N<M.length;N++)D=h+N,M[N]=Ol(g,D);for(z.notLoaded=[],z.addImage=function(J){z.notLoaded.push(J)},z.loaded=function(J){for(var re=z.notLoaded,ce=0;ce<re.length;ce++)if(re[ce]===J){re.splice(ce,1);for(var Re=0;Re<M.length;Re++){var ie=encodeURI(M[Re].substr(M[Re].lastIndexOf("/")));if(J.src.lastIndexOf(ie)!==-1){z[Re]={img:J};break}}break}re.length===0&&(_===!1?(function(Se){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sc;return/^blob:/i.test(Se)?jr(Se).then(mh).then((function(Fe){return Ao(Fe,Pe)})):Promise.resolve(null)})(g,["orientation"]).then((function(Se){z[0].tags=Se,x(z)})).catch((function(Se){console.log(Se),x(z)})):x(z))},N=0;N<M.length;N++)A=new Image,z.addImage(A),kr(A,z),A.src=M[N]};var ii=mr,$r={createVideoStream:function(g){console.warn("**** InputStreamBrowser createVideoStream");var x,h,y=null,_=["canrecord","ended"],S={},N={x:0,y:0,type:"Point"},A={x:0,y:0,type:"XYSize"},D={getRealWidth:function(){return g.videoWidth},getRealHeight:function(){return g.videoHeight},getWidth:function(){return x},getHeight:function(){return h},setWidth:function(M){x=M},setHeight:function(M){h=M},setInputStream:function(M){y=M,this.setAttribute("src",M.src!==void 0?M.src:"")},ended:function(){return g.ended},getConfig:function(){return y},setAttribute:function(M,z){g&&g.setAttribute(M,z)},pause:function(){g.pause()},play:function(){g.play()},setCurrentTime:function(M){var z;((z=y)===null||z===void 0?void 0:z.type)!=="LiveStream"&&this.setAttribute("currentTime",M.toString())},addEventListener:function(M,z,J){_.indexOf(M)!==-1?(S[M]||(S[M]=[]),S[M].push(z)):g.addEventListener(M,z,J)},clearEventHandlers:function(){_.forEach((function(M){var z=S[M];z&&z.length>0&&z.forEach((function(J){g.removeEventListener(M,J)}))}))},trigger:function(M,z){var J,re,ce,Re,ie,Se=S[M];if(M==="canrecord"&&(Re=g.videoWidth,ie=g.videoHeight,x=(re=y)!==null&&re!==void 0&&re.size?Re/ie>1?y.size:Math.floor(Re/ie*y.size):Re,h=(ce=y)!==null&&ce!==void 0&&ce.size?Re/ie>1?Math.floor(ie/Re*y.size):y.size:ie,A.x=x,A.y=h),Se&&Se.length>0)for(J=0;J<Se.length;J++)Se[J].apply(D,z)},setTopRight:function(M){N.x=M.x,N.y=M.y},getTopRight:function(){return N},setCanvasSize:function(M){A.x=M.x,A.y=M.y},getCanvasSize:function(){return A},getFrame:function(){return g}};return D},createLiveStream:function(g){console.warn("**** InputStreamBrowser createLiveStream"),g&&g.setAttribute("autoplay","true");var x=$r.createVideoStream(g);return x.ended=function(){return!1},x},createImageStream:function(){var g,x,h=null,y=0,_=0,S=0,N=!0,A=!1,D=null,M=0,z=null,J=!1,re=["canrecord","ended"],ce={},Re={x:0,y:0,type:"Point"},ie={x:0,y:0,type:"XYSize"};function Se(Fe,mt){var ut,Et=ce[Fe];if(Et&&Et.length>0)for(ut=0;ut<Et.length;ut++)Et[ut].apply(Pe,mt)}var Pe={trigger:Se,getWidth:function(){return g},getHeight:function(){return x},setWidth:function(Fe){g=Fe},setHeight:function(Fe){x=Fe},getRealWidth:function(){return y},getRealHeight:function(){return _},setInputStream:function(Fe){var mt;h=Fe,Fe.sequence===!1?(z=Fe.src,M=1):(z=Fe.src,M=Fe.length),A=!1,ii.load(z,(function(ut){var Et,Yt;if(D=ut,ut[0].tags&&ut[0].tags.orientation)switch(ut[0].tags.orientation){case 6:case 8:y=ut[0].img.height,_=ut[0].img.width;break;default:y=ut[0].img.width,_=ut[0].img.height}else y=ut[0].img.width,_=ut[0].img.height;g=(Et=h)!==null&&Et!==void 0&&Et.size?y/_>1?h.size:Math.floor(y/_*h.size):y,x=(Yt=h)!==null&&Yt!==void 0&&Yt.size?y/_>1?Math.floor(_/y*h.size):h.size:_,ie.x=g,ie.y=x,A=!0,S=0,setTimeout((function(){Se("canrecord",[])}),0)}),1,M,(mt=h)===null||mt===void 0?void 0:mt.sequence,h)},ended:function(){return J},setAttribute:function(){},getConfig:function(){return h},pause:function(){N=!0},play:function(){N=!1},setCurrentTime:function(Fe){S=Fe},addEventListener:function(Fe,mt){re.indexOf(Fe)!==-1&&(ce[Fe]||(ce[Fe]=[]),ce[Fe].push(mt))},clearEventHandlers:function(){Object.keys(ce).forEach((function(Fe){return delete ce[Fe]}))},setTopRight:function(Fe){Re.x=Fe.x,Re.y=Fe.y},getTopRight:function(){return Re},setCanvasSize:function(Fe){ie.x=Fe.x,ie.y=Fe.y},getCanvasSize:function(){return ie},getFrame:function(){var Fe,mt;return A?(N||(Fe=(mt=D)===null||mt===void 0?void 0:mt[S],S<M-1?S++:setTimeout((function(){J=!0,Se("ended",[])}),0)),Fe):null}};return Pe}},da=$r,Cr={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(g,x){var h,y=g.data,_=x.data,S=this.searchDirections,N=g.size.x;function A(M,z,J,re){var ce,Re,ie;for(ce=0;ce<S.length;ce++){if(Re=M.cy+S[M.dir][0],ie=M.cx+S[M.dir][1],y[h=Re*N+ie]===z&&(_[h]===0||_[h]===J))return _[h]=J,M.cy=Re,M.cx=ie,!0;_[h]===0&&(_[h]=re),M.dir=(M.dir+1)%8}return!1}function D(M,z,J){return{dir:J,x:M,y:z,next:null,prev:null}}return{trace:function(M,z,J,re){return A(M,z,J,re)},contourTracing:function(M,z,J,re,ce){return(function(Re,ie,Se,Pe,Fe){var mt,ut,Et,Yt=null,Dt={cx:ie,cy:Re,dir:0};if(A(Dt,Pe,Se,Fe)){mt=Yt=D(ie,Re,Dt.dir),Et=Dt.dir,(ut=D(Dt.cx,Dt.cy,0)).prev=mt,mt.next=ut,ut.next=null,mt=ut;var Zt=g.size.x*g.size.y,tr=0;do Dt.dir=(Dt.dir+6)%8,A(Dt,Pe,Se,Fe),Et!==Dt.dir?(mt.dir=Dt.dir,(ut=D(Dt.cx,Dt.cy,0)).prev=mt,mt.next=ut,ut.next=null,mt=ut):(mt.dir=Et,mt.x=Dt.cx,mt.y=Dt.cy),Et=Dt.dir;while((Dt.cx!==ie||Dt.cy!==Re)&&++tr<Zt);Yt.prev=mt.prev,mt.prev.next=Yt}return Yt})(M,z,J,re,ce)}}}},Hs={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(g,x){var h=g.data,y=x.data,_=g.size.x,S=g.size.y,N=Cr.create(g,x);return{rasterize:function(A){var D,M,z,J,re,ce,Re,ie,Se,Pe,Fe,mt,ut=[],Et=0;for(mt=0;mt<400;mt++)ut[mt]=0;for(ut[0]=h[0],Se=null,ce=1;ce<S-1;ce++)for(J=0,M=ut[0],re=1;re<_-1;re++)if(y[Fe=ce*_+re]===0)if((D=h[Fe])!==M){if(J===0)ut[z=Et+1]=D,M=D,(Re=N.contourTracing(ce,re,z,D,Hs.DIR.OUTSIDE_EDGE))!==null&&(Et++,J=z,(ie=Hs.createContour2D()).dir=Hs.CONTOUR_DIR.CW_DIR,ie.index=J,ie.firstVertex=Re,ie.nextpeer=Se,ie.insideContours=null,Se!==null&&(Se.prevpeer=ie),Se=ie);else if((Re=N.contourTracing(ce,re,Hs.DIR.INSIDE_EDGE,D,J))!==null){for((ie=Hs.createContour2D()).firstVertex=Re,ie.insideContours=null,ie.dir=A===0?Hs.CONTOUR_DIR.CCW_DIR:Hs.CONTOUR_DIR.CW_DIR,ie.index=A,Pe=Se;Pe!==null&&Pe.index!==J;)Pe=Pe.nextpeer;Pe!==null&&(ie.nextpeer=Pe.insideContours,Pe.insideContours!==null&&(Pe.insideContours.prevpeer=ie),Pe.insideContours=ie)}}else y[Fe]=J;else y[Fe]===Hs.DIR.OUTSIDE_EDGE||y[Fe]===Hs.DIR.INSIDE_EDGE?(J=0,M=y[Fe]===Hs.DIR.INSIDE_EDGE?h[Fe]:ut[0]):M=ut[J=y[Fe]];for(Pe=Se;Pe!==null;)Pe.index=A,Pe=Pe.nextpeer;return{cc:Se,count:Et}},debug:{drawContour:function(A,D){var M,z,J,re=A.getContext("2d"),ce=D;for(re.strokeStyle="red",re.fillStyle="red",re.lineWidth=1,M=ce!==null?ce.insideContours:null;ce!==null;){switch(M!==null?(z=M,M=M.nextpeer):(z=ce,M=(ce=ce.nextpeer)!==null?ce.insideContours:null),z.dir){case Hs.CONTOUR_DIR.CW_DIR:re.strokeStyle="red";break;case Hs.CONTOUR_DIR.CCW_DIR:re.strokeStyle="blue";break;case Hs.CONTOUR_DIR.UNKNOWN_DIR:re.strokeStyle="green"}J=z.firstVertex,re.beginPath(),re.moveTo(J.x,J.y);do J=J.next,re.lineTo(J.x,J.y);while(J!==z.firstVertex);re.stroke()}}}}}},Au=Hs;var ja,ha,ds,an,Jt,pr,Tn,fa,Rs,Ds,Do,Vi,Ui=function(g,x,h){var y=new g.Uint8Array(h),_=x.size|0,S=g.Math.imul;function N(ie,Se){ie=ie|0,Se=Se|0;var Pe=0,Fe=0,mt=0,ut=0,Et=0,Yt=0,Dt=0,Zt=0;for(Pe=1;(Pe|0)<(_-1|0);Pe=Pe+1|0)for(Zt=Zt+_|0,Fe=1;(Fe|0)<(_-1|0);Fe=Fe+1|0)ut=Zt-_|0,Et=Zt+_|0,Yt=Fe-1|0,Dt=Fe+1|0,mt=(y[ie+ut+Yt|0]|0)+(y[ie+ut+Dt|0]|0)+(y[ie+Zt+Fe|0]|0)+(y[ie+Et+Yt|0]|0)+(y[ie+Et+Dt|0]|0)|0,(mt|0)==5?y[Se+Zt+Fe|0]=1:y[Se+Zt+Fe|0]=0}function A(ie,Se,Pe){ie=ie|0,Se=Se|0,Pe=Pe|0;var Fe=0;for(Fe=S(_,_)|0;(Fe|0)>0;)Fe=Fe-1|0,y[Pe+Fe|0]=(y[ie+Fe|0]|0)-(y[Se+Fe|0]|0)|0}function D(ie,Se,Pe){ie=ie|0,Se=Se|0,Pe=Pe|0;var Fe=0;for(Fe=S(_,_)|0;(Fe|0)>0;)Fe=Fe-1|0,y[Pe+Fe|0]=y[ie+Fe|0]|0|(y[Se+Fe|0]|0)|0}function M(ie){ie=ie|0;var Se=0,Pe=0;for(Pe=S(_,_)|0;(Pe|0)>0;)Pe=Pe-1|0,Se=(Se|0)+(y[ie+Pe|0]|0)|0;return Se|0}function z(ie,Se){ie=ie|0,Se=Se|0;var Pe=0;for(Pe=S(_,_)|0;(Pe|0)>0;)Pe=Pe-1|0,y[ie+Pe|0]=Se}function J(ie,Se){ie=ie|0,Se=Se|0;var Pe=0,Fe=0,mt=0,ut=0,Et=0,Yt=0,Dt=0,Zt=0;for(Pe=1;(Pe|0)<(_-1|0);Pe=Pe+1|0)for(Zt=Zt+_|0,Fe=1;(Fe|0)<(_-1|0);Fe=Fe+1|0)ut=Zt-_|0,Et=Zt+_|0,Yt=Fe-1|0,Dt=Fe+1|0,mt=(y[ie+ut+Yt|0]|0)+(y[ie+ut+Dt|0]|0)+(y[ie+Zt+Fe|0]|0)+(y[ie+Et+Yt|0]|0)+(y[ie+Et+Dt|0]|0)|0,(mt|0)>0?y[Se+Zt+Fe|0]=1:y[Se+Zt+Fe|0]=0}function re(ie,Se){ie=ie|0,Se=Se|0;var Pe=0;for(Pe=S(_,_)|0;(Pe|0)>0;)Pe=Pe-1|0,y[Se+Pe|0]=y[ie+Pe|0]|0}function ce(ie){ie=ie|0;var Se=0,Pe=0;for(Se=0;(Se|0)<(_-1|0);Se=Se+1|0)y[ie+Se|0]=0,y[ie+Pe|0]=0,Pe=Pe+_-1|0,y[ie+Pe|0]=0,Pe=Pe+1|0;for(Se=0;(Se|0)<(_|0);Se=Se+1|0)y[ie+Pe|0]=0,Pe=Pe+1|0}function Re(){var ie=0,Se=0,Pe=0,Fe=0,mt=0,ut=0;Se=S(_,_)|0,Pe=Se+Se|0,Fe=Pe+Se|0,z(Fe,0),ce(ie);do N(ie,Se),J(Se,Pe),A(ie,Pe,Pe),D(Fe,Pe,Fe),re(Se,ie),mt=M(ie)|0,ut=(mt|0)==0|0;while(!ut)}return{skeletonize:Re}},oi={ctx:{binary:null},dom:{binary:null}},Wr={x:0,y:0};function Ru(g){var x,h,y,_,S,N,A,D=Rs.size.x,M=Rs.size.y,z=-Rs.size.x,J=-Rs.size.y;for(x=0,h=0;h<g.length;h++)x+=(_=g[h]).rad;for((x=(180*(x/=g.length)/Math.PI+90)%180-90)<0&&(x+=180),x=(180-x)*Math.PI/180,S=c.copy(c.create(),[Math.cos(x),Math.sin(x),-Math.sin(x),Math.cos(x)]),h=0;h<g.length;h++)for(_=g[h],y=0;y<4;y++)u.transformMat2(_.box[y],_.box[y],S);for(h=0;h<g.length;h++)for(_=g[h],y=0;y<4;y++)_.box[y][0]<D&&(D=_.box[y][0]),_.box[y][0]>z&&(z=_.box[y][0]),_.box[y][1]<M&&(M=_.box[y][1]),_.box[y][1]>J&&(J=_.box[y][1]);for(N=[[D,M],[z,M],[z,J],[D,J]],A=ja.halfSample?2:1,S=c.invert(S,S),y=0;y<4;y++)u.transformMat2(N[y],N[y],S);for(y=0;y<4;y++)u.scale(N[y],N[y],A);return N}function Bi(g){var x=(function(S,N,A){var D,M,z,J,re=0,ce=0,Re=[];for(D=0;D<N;D++)Re[D]={score:0,item:null};for(D=0;D<S.length;D++)if((M=A.apply(this,[S[D]]))>ce)for((z=Re[re]).score=M,z.item=S[D],ce=Number.MAX_VALUE,J=0;J<N;J++)Re[J].score<ce&&(ce=Re[J].score,re=J);return Re})((function(S,N,A){var D,M,z,J,re=[];function ce(Re){var ie=!1;for(M=0;M<re.length;M++)(z=re[M]).fits(Re)&&(z.add(Re),ie=!0);return ie}for(A||(A="rad"),D=0;D<S.length;D++)ce(J=Fr(S[D],D,A))||re.push(Xa(J,N));return re})(g,.9),1,(function(S){return S.getPoints().length})),h=[],y=[];if(x.length===1){h=x[0].item.getPoints();for(var _=0;_<h.length;_++)y.push(h[_].point)}return y}function ka(g,x){Rs.subImageAsCopy(an,Zs(g,x)),Vi.skeletonize()}function li(g,x,h,y){var _,S,N,A,D=[],M=[],z=Math.ceil(Ds.x/3);if(g.length>=2){for(_=0;_<g.length;_++)g[_].m00>z&&D.push(g[_]);if(D.length>=2){for(N=Bi(D),S=0,_=0;_<N.length;_++){var J,re;S+=(J=(re=N[_])===null||re===void 0?void 0:re.rad)!==null&&J!==void 0?J:0}N.length>1&&N.length>=D.length/4*3&&N.length>g.length/4&&(S/=N.length,A={index:x[1]*Wr.x+x[0],pos:{x:h,y},box:[u.clone([h,y]),u.clone([h+an.size.x,y]),u.clone([h+an.size.x,y+an.size.y]),u.clone([h,y+an.size.y])],moments:N,rad:S,vec:u.clone([Math.cos(S),Math.sin(S)])},M.push(A))}}return M}var Ca=function(g,x){ja=x,Do=g,(function(){ha=ja.halfSample?new An({x:Do.size.x/2|0,y:Do.size.y/2|0}):Do,Ds=xo(ja.patchSize,ha.size),Wr.x=ha.size.x/Ds.x|0,Wr.y=ha.size.y/Ds.y|0,Rs=new An(ha.size,void 0,Uint8Array,!1),Jt=new An(Ds,void 0,Array,!0);var h=Ds.x*Ds.y*4,y=Math.max(65536,Math.pow(2,Math.ceil(Math.log2(h)))),_=new ArrayBuffer(y);an=new An(Ds,new Uint8Array(_,0,Ds.x*Ds.y)),ds=new An(Ds,new Uint8Array(_,Ds.x*Ds.y*3,Ds.x*Ds.y),void 0,!0),Vi=Ui({Math,Uint8Array},{size:Ds.x},_),fa=new An({x:ha.size.x/an.size.x|0,y:ha.size.y/an.size.y|0},void 0,Array,!0),pr=new An(fa.size,void 0,void 0,!0),Tn=new An(fa.size,void 0,Int32Array,!0)})(),(function(){if(!ja.useWorker&&typeof document<"u"){oi.dom.binary=document.createElement("canvas"),oi.dom.binary.className="binaryBuffer";var h=!!ja.willReadFrequently;oi.ctx.binary=oi.dom.binary.getContext("2d",{willReadFrequently:h}),oi.dom.binary.width=Rs.size.x,oi.dom.binary.height=Rs.size.y}})()},Du=function(){ja.halfSample&&(function(y,_){for(var S=y.data,N=y.size.x,A=_.data,D=0,M=N,z=S.length,J=N/2,re=0;M<z;){for(var ce=0;ce<J;ce++)A[re]=Math.floor((S[D]+S[D+1]+S[M]+S[M+1])/4),re++,D+=2,M+=2;D+=N,M+=N}})(Do,ha),Nn(ha,Rs),Rs.zeroBorder();var g=(function(){var y,_,S,N,A,D,M=[];for(y=0;y<Wr.x;y++)for(_=0;_<Wr.y;_++)ka(S=an.size.x*y,N=an.size.y*_),ds.zeroBorder(),qs(Jt.data,0),D=Au.create(ds,Jt).rasterize(0),A=Jt.moments(D.count),M=M.concat(li(A,[y,_],S,N));return M})();if(g.length<Wr.x*Wr.y*.05)return null;var x=(function(y){var _,S,N=0,A=0;function D(){var z;for(z=0;z<Tn.data.length;z++)if(Tn.data[z]===0&&pr.data[z]===1)return z;return Tn.data.length}function M(z){var J,re,ce,Re,ie,Se=z%Tn.size.x,Pe=z/Tn.size.x|0;if(z<Tn.data.length)for(ce=fa.data[z],Tn.data[z]=N,ie=0;ie<Cr.searchDirections.length;ie++)re=Pe+Cr.searchDirections[ie][0],J=Se+Cr.searchDirections[ie][1],Re=re*Tn.size.x+J,pr.data[Re]!==0?Tn.data[Re]===0&&Math.abs(u.dot(fa.data[Re].vec,ce.vec))>.95&&M(Re):Tn.data[Re]=Number.MAX_VALUE}for(qs(pr.data,0),qs(Tn.data,0),qs(fa.data,null),_=0;_<y.length;_++)S=y[_],fa.data[S.index]=S,pr.data[S.index]=1;for(pr.zeroBorder();(A=D())<Tn.data.length;)N++,M(A);return N})(g);if(x<1)return null;var h=(function(y){var _,S,N=[];for(_=0;_<y;_++)N.push(0);for(S=Tn.data.length;S--;)Tn.data[S]>0&&N[Tn.data[S]-1]++;return(N=N.map((function(A,D){return{val:A,label:D+1}}))).sort((function(A,D){return D.val-A.val})),N.filter((function(A){return A.val>=5}))})(x);return h.length===0?null:(function(y,_){var S,N,A,D,M=[],z=[];for(S=0;S<y.length;S++){for(N=Tn.data.length,M.length=0;N--;)Tn.data[N]===y[S].label&&(A=fa.data[N],M.push(A));(D=Ru(M))&&z.push(D)}return z})(h)},Mu=function(g,x){var h,y,_=g.getWidth(),S=g.getHeight(),N=x.halfSample?.5:1;g.getConfig().area&&(y=wa(_,S,g.getConfig().area),g.setTopRight({x:y.sx,y:y.sy}),g.setCanvasSize({x:_,y:S}),_=y.sw,S=y.sh);var A={x:Math.floor(_*N),y:Math.floor(S*N)};if(h=xo(x.patchSize,A),g.setWidth(Math.max(Math.floor(Math.floor(A.x/h.x)*(1/N)*h.x),h.x)),g.setHeight(Math.max(Math.floor(Math.floor(A.y/h.y)*(1/N)*h.y),h.y)),g.getWidth()%h.x==0&&g.getHeight()%h.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(_," )and height (").concat(S,") must a multiple of ").concat(h.x))},Mo=G()((function g(){F()(this,g),Y()(this,"config",void 0),Y()(this,"inputStream",void 0),Y()(this,"framegrabber",void 0),Y()(this,"inputImageWrapper",void 0),Y()(this,"stopped",!1),Y()(this,"initAborted",!1),Y()(this,"boxSize",void 0),Y()(this,"resultCollector",void 0),Y()(this,"decoder",void 0),Y()(this,"workerPool",[]),Y()(this,"onUIThread",!0),Y()(this,"canvasContainer",new zi)})),Pl=G()((function g(){F()(this,g),Y()(this,"image",void 0),Y()(this,"overlay",void 0)})),zi=G()((function g(){F()(this,g),Y()(this,"ctx",void 0),Y()(this,"dom",void 0),this.ctx=new Pl,this.dom=new Pl}));function bs(g){if(typeof document>"u")return null;if(g instanceof HTMLElement&&g.nodeName&&g.nodeType===1)return g;var x=typeof g=="string"?g:"#interactive.viewport";return document.querySelector(x)}function Ll(g,x,h){var y=(function(S,N){var A=document.querySelector(S);return A||((A=document.createElement("canvas")).className=N),A})(g,x),_=y.getContext("2d",{willReadFrequently:h.willReadFrequently});return{canvas:y,context:_}}function ph(g){var x,h,y,_,S,N,A,D,M,z,J=bs(g==null||(x=g.config)===null||x===void 0||(h=x.inputStream)===null||h===void 0?void 0:h.target),re=g==null||(y=g.config)===null||y===void 0||(_=y.inputStream)===null||_===void 0?void 0:_.type;if(!re)return null;var ce=(g==null||(S=g.config)===null||S===void 0||(N=S.canvas)===null||N===void 0?void 0:N.createOverlay)!==!1,Re=(function(Se,Pe){var Fe=Pe.willReadFrequently,mt=Pe.createOverlay;if(typeof document<"u"){var ut=Ll("canvas.imgBuffer","imgBuffer",{willReadFrequently:Fe});ut.canvas.width=Se.x,ut.canvas.height=Se.y;var Et={canvas:null,context:null};if(mt){var Yt=Ll("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:Fe});Yt.canvas.width=Se.x,Yt.canvas.height=Se.y,Et=Yt}return{dom:{image:ut.canvas,overlay:Et.canvas},ctx:{image:ut.context,overlay:Et.context}}}return null})(g.inputStream.getCanvasSize(),{willReadFrequently:!(g==null||(A=g.config)===null||A===void 0||(D=A.inputStream)===null||D===void 0||!D.willReadFrequently),createOverlay:ce,debug:g==null||(M=g.config)===null||M===void 0||(z=M.locator)===null||z===void 0?void 0:z.debug});if(!Re)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var ie=Re.dom;return typeof document<"u"&&J&&(re!=="ImageStream"||J.contains(ie.image)||J.appendChild(ie.image),ie.overlay&&!J.contains(ie.overlay)&&J.appendChild(ie.overlay)),Re}function gh(g,x){var h=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);x&&(y=y.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),h.push.apply(h,y)}return h}function Ec(g){for(var x=1;x<arguments.length;x++){var h=arguments[x]!=null?arguments[x]:{};x%2?gh(Object(h),!0).forEach((function(y){Y()(g,y,h[y])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(h)):gh(Object(h)).forEach((function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(h,y))}))}return g}var ma=[];function as(g){return Ec(Ec({},g),{},{inputStream:Ec(Ec({},g.inputStream),{},{target:null})})}function Iu(g){if(g){var x=g().default;if(!x)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var h;function y(S){self.postMessage({event:"processed",imageData:h.data,result:S},[h.data.buffer])}function _(){self.postMessage({event:"initialized",imageData:h.data},[h.data.buffer])}self.onmessage=function(S){if(S.data.cmd==="init"){var N=S.data.config;N.numOfWorkers=0,h=new x.ImageWrapper({x:S.data.size.x,y:S.data.size.y},new Uint8Array(S.data.imageData)),x.init(N,_,h),x.onProcessed(y)}else S.data.cmd==="process"?(h.data=new Uint8Array(S.data.imageData),x.start()):S.data.cmd==="setReaders"?x.setReaders(S.data.readers):S.data.cmd==="registerReader"&&x.registerReader(S.data.name,S.data.reader)}}function Vl(g,x,h){var y,_,S=(typeof __factorySource__<"u"&&(_=__factorySource__),y=new Blob(["("+Iu.toString()+")("+_+");"],{type:"text/javascript"}),window.URL.createObjectURL(y)),N={worker:new Worker(S),imageData:new Uint8Array(x.getWidth()*x.getHeight()),busy:!0};N.worker.onmessage=function(A){A.data.event==="initialized"?(URL.revokeObjectURL(S),N.busy=!1,N.imageData=new Uint8Array(A.data.imageData),h(N)):A.data.event==="processed"?(N.imageData=new Uint8Array(A.data.imageData),N.busy=!1,typeof publishResult<"u"&&publishResult(A.data.result,N.imageData)):A.data.event},N.worker.postMessage({cmd:"init",size:{x:x.getWidth(),y:x.getHeight()},imageData:N.imageData,config:as(g)},[N.imageData.buffer])}function Io(g,x,h,y){var _=g-ma.length;if(_===0&&y)y();else if(_<0)ma.slice(_).forEach((function(A){A.worker.terminate()})),ma=ma.slice(0,_),y&&y();else{var S=function(A){ma.push(A),ma.length>=g&&y&&y()};if(x)for(var N=0;N<_;N++)Vl(x,h,S)}}function Nc(g,x,h){for(var y=g.length;y--;)g[y][0]+=x,g[y][1]+=h}function Oo(g,x,h){g[0].x+=x,g[0].y+=h,g[1].x+=x,g[1].y+=h}var Fi=(function(){return G()((function h(){var y=this;F()(this,h),Y()(this,"context",new Mo),Y()(this,"canRecord",(function(_){var S;y.context.initAborted?_(new Error("Initialization was aborted")):y.context.config?y.context.inputStream?(Mu(y.context.inputStream,(S=y.context.config)===null||S===void 0?void 0:S.locator),y.initCanvas(),y.context.framegrabber=Cu.create(y.context.inputStream,y.context.canvasContainer.dom.image),y.context.config.numOfWorkers===void 0&&(y.context.config.numOfWorkers=0),Io(y.context.config.numOfWorkers,y.context.config,y.context.inputStream,(function(){var N;((N=y.context.config)===null||N===void 0?void 0:N.numOfWorkers)===0&&y.initializeData(),y.ready(_)}))):_(new Error("Input stream not initialized")):_(new Error("Configuration not initialized"))})),Y()(this,"update",(function(){if(y.context.onUIThread){var _,S=(A=y.context.framegrabber,ma.length?!!(D=ma.filter((function(M){return!M.busy}))[0])&&(A.attachData(D.imageData),A.grab()&&(D.busy=!0,D.worker.postMessage({cmd:"process",imageData:D.imageData},[D.imageData.buffer])),!0):null);S||(y.context.framegrabber.attachData((_=y.context.inputImageWrapper)===null||_===void 0?void 0:_.data),y.context.framegrabber.grab()&&(S||y.locateAndDecode()))}else{var N;y.context.framegrabber.attachData((N=y.context.inputImageWrapper)===null||N===void 0?void 0:N.data),y.context.framegrabber.grab(),y.locateAndDecode()}var A,D})),Y()(this,"_cachedStyleValues",void 0),Y()(this,"_resolvedStyle",void 0)}),[{key:"initBuffers",value:function(h){if(this.context.config){var y=(function(N,A,D){var M=A||new An({x:N.getWidth(),y:N.getHeight(),type:"XYSize"}),z=[u.clone([0,0]),u.clone([0,M.size.y]),u.clone([M.size.x,M.size.y]),u.clone([M.size.x,0])];return Ca(M,D),{inputImageWrapper:M,boxSize:z}})(this.context.inputStream,h,this.context.config.locator),_=y.inputImageWrapper,S=y.boxSize;this.context.inputImageWrapper=_,this.context.boxSize=S}}},{key:"initializeData",value:function(h){this.context.config&&(this.initBuffers(h),this.context.decoder=Rl.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?bs(this.context.config.inputStream.target):null}},{key:"ready",value:function(h){this.context.inputStream.play(),h()}},{key:"initCanvas",value:function(){var h=ph(this.context);if(h){var y=h.ctx,_=h.dom;this.context.canvasContainer.dom.image=_.image,this.context.canvasContainer.dom.overlay=_.overlay,this.context.canvasContainer.ctx.image=y.image,this.context.canvasContainer.ctx.overlay=y.overlay}}},{key:"initInputStream",value:function(h){if(this.context.config&&this.context.config.inputStream){var y=this.context.config.inputStream,_=y.type,S=y.constraints,N=(function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"LiveStream",z=arguments.length>1?arguments[1]:void 0,J=arguments.length>2?arguments[2]:void 0;switch(M){case"VideoStream":var re=document.createElement("video");return{video:re,inputStream:J.createVideoStream(re)};case"ImageStream":return{inputStream:J.createImageStream()};case"LiveStream":var ce=null;return z&&((ce=z.querySelector("video"))||(ce=document.createElement("video"),z.appendChild(ce))),{video:ce,inputStream:J.createLiveStream(ce)};default:return console.error("* setupInputStream invalid type ".concat(M)),{video:null,inputStream:null}}})(_,this.getViewPort(),da),A=N.video,D=N.inputStream;_==="LiveStream"&&A&&Co.request(A,S).then((function(){return D.trigger("canrecord")})).catch((function(M){return h(M)})),D&&(D.setAttribute("preload","auto"),D.setInputStream(this.context.config.inputStream),D.addEventListener("canrecord",this.canRecord.bind(void 0,h))),this.context.inputStream=D}}},{key:"getBoundingBoxes",value:function(){var h;return(h=this.context.config)!==null&&h!==void 0&&h.locate?Du():[[u.clone(this.context.boxSize[0]),u.clone(this.context.boxSize[1]),u.clone(this.context.boxSize[2]),u.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(h){var y=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set,S=this.context.inputStream.getTopRight(),N=S.x,A=S.y;if((N!==0||A!==0)&&(h.barcodes&&h.barcodes.forEach((function(M){return y.transformResult(M,_)})),h.line&&h.line.length===2&&Oo(h.line,N,A),h.box&&!_.has(h.box)&&(Nc(h.box,N,A),_.add(h.box)),h.boxes&&h.boxes.length>0))for(var D=0;D<h.boxes.length;D++)_.has(h.boxes[D])||(Nc(h.boxes[D],N,A),_.add(h.boxes[D]))}},{key:"addResult",value:function(h,y){var _=this;y&&this.context.resultCollector&&(h.barcodes?h.barcodes.filter((function(S){return S.codeResult})).forEach((function(S){return _.addResult(S,y)})):h.codeResult&&this.context.resultCollector.addResult(y,this.context.inputStream.getCanvasSize(),h.codeResult))}},{key:"hasCodeResult",value:function(h){return!(!h||!(h.barcodes?h.barcodes.some((function(y){return y.codeResult})):h.codeResult))}},{key:"publishResult",value:function(){var h,y,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,S=arguments.length>1?arguments[1]:void 0,N=_;_&&this.context.onUIThread&&(this.transformResult(_),this.addResult(_,S),N=(_==null||(y=_.barcodes)===null||y===void 0?void 0:y.length)>0?_.barcodes:_),si.publish("processed",N),this.hasCodeResult(_)&&si.publish("detected",N);var A=this.context.config;A&&A.locate===!1&&(h=A.inputStream)!==null&&h!==void 0&&h.area&&this.drawScannerArea()}},{key:"locateAndDecode",value:(x=vs()(Kn.a.mark((function h(){var y,_,S,N,A,D;return Kn.a.wrap((function(M){for(;;)switch(M.prev=M.next){case 0:if(!(y=this.getBoundingBoxes())){M.next=3;break}return M.next=1,this.context.decoder.decodeFromBoundingBoxes(y);case 1:if(D=M.sent){M.next=2;break}D={};case 2:(S=D).boxes=y,this.publishResult(S,(_=this.context.inputImageWrapper)===null||_===void 0?void 0:_.data),M.next=5;break;case 3:return M.next=4,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 4:(N=M.sent)?this.publishResult(N,(A=this.context.inputImageWrapper)===null||A===void 0?void 0:A.data):this.publishResult();case 5:case"end":return M.stop()}}),h,this)}))),function(){return x.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var h,y=this,_=null,S=1e3/(((h=this.context.config)===null||h===void 0?void 0:h.frequency)||60);this.context.stopped=!1;var N=this.context,A=function(D){_=_||D,N.stopped||(D>=_&&(_+=S,y.update()),window.requestAnimationFrame(A))};A(performance.now())}},{key:"start",value:function(){var h,y;this.context.onUIThread&&((h=this.context.config)===null||h===void 0||(y=h.inputStream)===null||y===void 0?void 0:y.type)==="LiveStream"?this.startContinuousUpdate():this.update()}},{key:"stop",value:(g=vs()(Kn.a.mark((function h(){var y,_;return Kn.a.wrap((function(S){for(;;)switch(S.prev=S.next){case 0:if(this.context.stopped=!0,this.context.framegrabber||(this.context.initAborted=!0),Io(0),(y=this.context.config)===null||y===void 0||!y.inputStream||this.context.config.inputStream.type!=="LiveStream"){S.next=2;break}return S.next=1,Co.release();case 1:(_=this.context.inputStream)===null||_===void 0||_.clearEventHandlers();case 2:case"end":return S.stop()}}),h,this)}))),function(){return g.apply(this,arguments)})},{key:"setReaders",value:function(h){this.context.decoder&&this.context.decoder.setReaders(h),(function(y){ma.forEach((function(_){return _.worker.postMessage({cmd:"setReaders",readers:y})}))})(h)}},{key:"registerReader",value:function(h,y){Rl.registerReader(h,y),this.context.decoder&&this.context.decoder.registerReader(h,y),(function(_,S){ma.forEach((function(N){return N.worker.postMessage({cmd:"registerReader",name:_,reader:S})}))})(h,y)}},{key:"drawScannerArea",value:function(){var h,y,_,S=(h=this.context.config)===null||h===void 0||(y=h.inputStream)===null||y===void 0?void 0:y.area;if(S){var N=this.context.canvasContainer.ctx.overlay;if(N&&((_=this.context.config)===null||_===void 0?void 0:_.locate)===!1&&(S.borderColor!==void 0&&S.borderColor!==""||S.borderWidth!==void 0&&S.borderWidth>0||S.backgroundColor!==void 0&&S.backgroundColor!=="")&&this.context.boxSize){var A=this.context.inputStream.getTopRight(),D=A.x,M=A.y,z=this.context.boxSize,J=z[0],re=z[1],ce=z[3],Re=J[0]+D,ie=J[1]+M,Se=ce[0]-J[0],Pe=re[1]-J[1];if(!this._cachedStyleValues||this._cachedStyleValues.borderColor!==S.borderColor||this._cachedStyleValues.borderWidth!==S.borderWidth||this._cachedStyleValues.backgroundColor!==S.backgroundColor){var Fe,mt;this._cachedStyleValues={borderColor:S.borderColor,borderWidth:S.borderWidth,backgroundColor:S.backgroundColor};var ut=S.borderColor!==void 0||S.borderWidth!==void 0,Et=(Fe=S.borderColor)!==null&&Fe!==void 0?Fe:"rgba(0, 255, 0, 0.5)",Yt=ut?(mt=S.borderWidth)!==null&&mt!==void 0?mt:2:0,Dt=S.backgroundColor;this._resolvedStyle={color:Et,width:Yt,bg:Dt}}var Zt=this._resolvedStyle;Zt.bg&&(N.fillStyle=Zt.bg,N.fillRect(Re,ie,Se,Pe)),Zt.width>0&&(N.strokeStyle=Zt.color,N.lineWidth=Zt.width,N.strokeRect(Re,ie,Se,Pe))}}}}]);var g,x})(),ci=new Fi,Po=ci.context,yh={init:function(g,x,h){var y,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ci;return x||(y=new Promise((function(S,N){x=function(A){A?N(A):S()}}))),_.context.initAborted=!1,_.context.config=C()({},fh,g),_.context.config.numOfWorkers>0&&(_.context.config.numOfWorkers=0),h?(_.context.onUIThread=!1,_.initializeData(h),x&&x()):_.initInputStream(x),y},start:function(g,x){var h;if(g)return x||(h=new Promise((function(y,_){x=function(S){S?_(S):y()}}))),this.init(g,(function(y){if(y)x(y);else try{ci.start(),x()}catch(_){x(_)}})),h;if(!Po.framegrabber)throw new Error("start() was called before init() completed. Call init() first, or call start(config) to combine init and start.");return ci.start()},stop:function(){return ci.stop()},pause:function(){Po.stopped=!0},onDetected:function(g){g&&(typeof g=="function"||T()(g)==="object"&&g.callback)?si.subscribe("detected",g):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(g){si.unsubscribe("detected",g)},onProcessed:function(g){g&&(typeof g=="function"||T()(g)==="object"&&g.callback)?si.subscribe("processed",g):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(g){si.unsubscribe("processed",g)},setReaders:function(g){g?ci.setReaders(g):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(g,x){g?x?ci.registerReader(g,x):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(g){g&&typeof g.addResult=="function"&&(Po.resultCollector=g)},get canvas(){return Po.canvasContainer},drawScannerArea:function(){return ci.drawScannerArea()},decodeSingle:function(g,x){var h=this,y=new Fi;return(g=C()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:g.src},numOfWorkers:1,locator:{halfSample:!1}},g)).numOfWorkers>0&&(g.numOfWorkers=0),g.numOfWorkers>0&&(typeof Blob>"u"||typeof Worker>"u")&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),g.numOfWorkers=0),new Promise((function(_,S){try{h.init(g,(function(){Po.canvasContainer=y.context.canvasContainer,si.once("processed",(function(N){y.stop(),x&&x.call(null,N),_(N)}),!0),y.start()}),null,y)}catch(N){S(N)}}))},get default(){return yh},Readers:m,CameraAccess:Co,ImageDebug:ia,ImageWrapper:An,ResultCollector:ua};a.default=yh}]).default}))})(Sg)),Sg.exports}var O3=I3();const Jo=LT(O3),Tg=60;function Hl(){return new Date().toISOString().split("T")[0]}const i_=[{key:"breakfast",label:"Breakfast",icon:""},{key:"lunch",label:"Lunch",icon:""},{key:"dinner",label:"Dinner",icon:""},{key:"snacks",label:"Snacks",icon:""}];function P3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function L3(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),{isDark:i,toggleTheme:c}=go(),u=Os(),[f,m]=I.useState("loading"),[b,T]=I.useState(null),[E,C]=I.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[L,P]=I.useState(null),[V,F]=I.useState(Hl()),[K,G]=I.useState({entries:[],water:0}),[se,Y]=I.useState({protein:0,carbs:0,fats:0,calories:0}),[fe,je]=I.useState(!1),[q,B]=I.useState(()=>{const ae=new Date;return{year:ae.getFullYear(),month:ae.getMonth()}}),[H,Z]=I.useState(P3),[$,ee]=I.useState(null),[O,ke]=I.useState(!1),[Ie,te]=I.useState(null),[ve,Le]=I.useState(""),[De,Je]=I.useState(!1),[Q,ue]=I.useState(""),[ze,Oe]=I.useState([]),[de,Be]=I.useState(!1),[le,ge]=I.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[be,st]=I.useState(null),[Te,dt]=I.useState(1),[Tt,Nt]=I.useState(null);I.useRef(null);const Ee=I.useRef(!1),Ue=I.useCallback((ae,xe="info")=>{Nt({message:ae,type:xe}),setTimeout(()=>Nt(null),3e3)},[]);I.useEffect(()=>{!a&&(!s||!e)&&u("/")},[s,e,a,u]),I.useEffect(()=>{if(!t?.id)return;(async()=>{try{const xe=await _i(It(nt,"nutritionTargets",t.id));xe.exists()?(T(xe.data()),m("dashboard")):m("setup")}catch(xe){console.error("Error loading nutrition data:",xe),m("setup")}})()},[t?.id]),I.useEffect(()=>{if(!t?.id)return;(async()=>{try{const xe=await _i(It(nt,"nutritionLogs",`${t.id}_${V}`));if(xe.exists()){const lt=xe.data();G({entries:lt.entries||[],water:lt.water||0})}else G({entries:[],water:0})}catch(xe){console.error("Error loading log:",xe),G({entries:[],water:0})}})()},[t?.id,V]),I.useEffect(()=>{const ae=K.entries.reduce((xe,lt)=>({protein:xe.protein+(lt.protein||0),carbs:xe.carbs+(lt.carbs||0),fats:xe.fats+(lt.fats||0),calories:xe.calories+(lt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Y(ae)},[K.entries]);const X=async ae=>{try{await Pa(It(nt,"nutritionLogs",`${t.id}_${V}`),{clientId:t.id,date:V,entries:ae.entries,water:ae.water,updatedAt:vt.now()})}catch(xe){console.error("Error saving nutrition log:",xe)}},Ce=V===Hl(),Ke=(ae,xe)=>new Date(ae,xe+1,0).getDate(),$e=(ae,xe)=>new Date(ae,xe,1).getDay(),Ve=ae=>{if(ae===Hl())return"Today";const xe=new Date(ae+"T12:00:00"),lt=new Date;return lt.setDate(lt.getDate()-1),ae===lt.toISOString().split("T")[0]?"Yesterday":xe.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})},it=ae=>{const xe=new Date(V+"T12:00:00");xe.setDate(xe.getDate()+ae);const lt=xe.toISOString().split("T")[0];lt>Hl()||F(lt)},xt=["January","February","March","April","May","June","July","August","September","October","November","December"],rt=["Su","Mo","Tu","We","Th","Fr","Sa"],tn=()=>{let ae=parseFloat(E.weight);E.weightUnit==="lbs"&&(ae*=.453592);let xe;E.heightUnit==="cm"?xe=parseFloat(E.height):xe=(parseFloat(E.heightFeet)||0)*30.48+(parseFloat(E.heightInches)||0)*2.54;const lt=parseInt(E.age);let ht=E.gender==="male"?10*ae+6.25*xe-5*lt+5:10*ae+6.25*xe-5*lt-161;const _n=ht*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[E.activityLevel];let nn=_n,en,pn;switch(E.goal){case"lose":nn=_n-{light:250,moderate:500,harsh:750}[E.deficitLevel],en=2.2,pn=.3;break;case"build":nn=_n+300,en=2,pn=.22;break;default:en=1.8,pn=.25}nn=Math.max(nn,E.gender==="male"?1500:1200);const wn=Math.round(ae*en),Gn=Math.round(nn*pn/9),ls=Math.max(0,Math.round((nn-wn*4-Gn*9)/4));P({calories:Math.round(nn),protein:wn,carbs:ls,fats:Gn,bmr:Math.round(ht),tdee:Math.round(_n)})},vn=async()=>{if(L)try{const ae={clientId:t.id,calories:L.calories,protein:L.protein,carbs:L.carbs,fats:L.fats,waterGoal:8,goal:E.goal,updatedAt:vt.now()};await Pa(It(nt,"nutritionTargets",t.id),ae),T(ae),m("dashboard"),Ue("Macro targets saved!","success")}catch(ae){console.error("Error saving targets:",ae),Ue("Failed to save targets. Please try again.","error")}},Fn=()=>{const ae=E.weight&&parseFloat(E.weight)>0,xe=E.age&&parseInt(E.age)>0,lt=E.heightUnit==="cm"?E.height&&parseFloat(E.height)>0:E.heightFeet&&parseFloat(E.heightFeet)>0||E.heightInches&&parseFloat(E.heightInches)>0;return ae&&xe&&lt},Jn=ae=>{const xe=[...K.entries,{...ae,meal:H,id:Date.now(),addedAt:new Date().toISOString()}],lt={...K,entries:xe};G(lt),X(lt),ee(null),st(null),dt(1),ge({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),Ue("Food added!","success")},qn=ae=>{const xe=K.entries.filter(ht=>ht.id!==ae),lt={...K,entries:xe};G(lt),X(lt)},ks=()=>{ke(!0);const ae=document.querySelector("#barcode-reader");if(!ae){ke(!1),Ue("Scanner container not found.","error");return}Jo.init({inputStream:{type:"LiveStream",target:ae,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},xe=>{if(xe){console.error("Quagga init error:",xe),ke(!1),Ue("Could not access camera. Check permissions.","error");return}Jo.start(),Ee.current=!0}),Jo.onDetected(xe=>{const lt=xe.codeResult.decodedCodes?.filter(Pt=>Pt.error!==void 0)?.map(Pt=>Pt.error)||[];if((lt.length>0?lt.reduce((Pt,_n)=>Pt+_n,0)/lt.length:1)<.15){const Pt=xe.codeResult.code;Jo.offDetected(),te(Pt)}})},hn=()=>{Ee.current&&(Jo.stop(),Jo.offDetected(),Ee.current=!1),ke(!1)},We=ae=>{const xe=ae.nutriments||{};return{name:ae.product_name||ae.product_name_en||"Unknown Product",brand:ae.brands||"",image:ae.image_small_url||ae.image_url||null,servingSize:ae.serving_size||"100g",protein:Math.round(xe.proteins_100g||xe.proteins||0),carbs:Math.round(xe.carbohydrates_100g||xe.carbohydrates||0),fats:Math.round(xe.fat_100g||xe.fat||0),calories:Math.round(xe["energy-kcal_100g"]||xe["energy-kcal"]||(xe.energy_100g?xe.energy_100g/4.184:0)),per100g:!0}},et=async ae=>{Je(!0);try{const xe=`https://world.openfoodfacts.net/api/v2/product/${ae}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,nutriments`,lt=await fetch(xe);if(!lt.ok)throw new Error(`HTTP ${lt.status}`);const ht=await lt.json();if(ht.status==="success"||ht.status===1||ht.product){const Pt=We(ht.product);Pt.calories===0&&Pt.protein===0&&Pt.carbs===0?Ue("Product found but no nutrition data available.","error"):(st(Pt),dt(1),Le(""))}else Ue("Product not found. Try search or manual entry.","error")}catch(xe){console.error("Barcode lookup error:",xe),Ue("Failed to look up product. Check your connection.","error")}Je(!1)},at=async()=>{if(Q.trim()){Be(!0);try{const ae=`https://world.openfoodfacts.net/api/v2/search?search_terms=${encodeURIComponent(Q)}&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,nutriments&page_size=10`,xe=await fetch(ae);if(!xe.ok)throw new Error(`HTTP ${xe.status}`);const ht=((await xe.json()).products||[]).map(Pt=>We(Pt)).filter(Pt=>Pt.name!=="Unknown Product"&&(Pt.calories>0||Pt.protein>0));Oe(ht),ht.length===0&&Ue("No results found. Try a different search.","info")}catch(ae){console.error("Search error:",ae),Ue("Search failed. Check your connection.","error")}Be(!1)}},jt=()=>{const ae={...K,water:K.water+1};G(ae),X(ae)},_t=()=>{if(K.water<=0)return;const ae={...K,water:K.water-1};G(ae),X(ae)},At=(ae,xe)=>!xe||xe<=0?0:Math.min(Tg,Math.round(ae/xe*Tg)),yt=(ae,xe,lt,ht,Pt)=>{const _n=At(lt,ht),nn=ht>0?Math.min(100,Math.round(lt/ht*100)):0;return o.jsxs("div",{className:`nut-ring-wrap ${Pt}`,children:[o.jsx("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[...Array(Tg)].map((en,pn)=>{const wn=(pn*6-90)*(Math.PI/180),Gn=100+82*Math.cos(wn),ls=100+82*Math.sin(wn),me=100+94*Math.cos(wn),He=100+94*Math.sin(wn);return o.jsx("line",{x1:Gn,y1:ls,x2:me,y2:He,className:pn<_n?"nut-tick-filled":"nut-tick-empty",strokeWidth:pn%5===0?"3":"2"},pn)})}),o.jsxs("div",{className:"nut-ring-center",children:[o.jsx("span",{className:"nut-ring-value",children:Math.round(lt)}),o.jsxs("span",{className:"nut-ring-target",children:["/ ",ht,ae==="Calories"?"":"g"]}),o.jsx("span",{className:"nut-ring-label",children:xe})]}),o.jsxs("span",{className:"nut-ring-pct",children:[nn,"%"]})]})};return I.useEffect(()=>{if(!Ie)return;const ae=setTimeout(()=>{const xe=Ie;hn(),te(null),et(xe)},1500);return()=>clearTimeout(ae)},[Ie]),I.useEffect(()=>()=>{if(Ee.current){try{Jo.stop(),Jo.offDetected()}catch{}Ee.current=!1}},[]),a||f==="loading"?o.jsx("div",{className:"cb-loading",children:o.jsx("div",{className:"cb-loading-spinner"})}):f==="setup"?o.jsxs("div",{className:"nut-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Nutrition Setup"})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),o.jsxs("main",{className:"nut-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u(-1),children:" Back"}),o.jsxs("div",{className:"nut-setup-intro",children:[o.jsx("h2",{children:"Set Your Daily Targets"}),o.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),o.jsxs("div",{className:"nut-calc-form",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Gender"}),o.jsxs("div",{className:"nut-toggle-group",children:[o.jsx("button",{className:E.gender==="male"?"active":"",onClick:()=>{C(ae=>({...ae,gender:"male"})),P(null)},children:"Male"}),o.jsx("button",{className:E.gender==="female"?"active":"",onClick:()=>{C(ae=>({...ae,gender:"female"})),P(null)},children:"Female"})]})]}),o.jsxs("div",{className:"nut-form-row",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Age"}),o.jsx("input",{type:"number",value:E.age,onChange:ae=>{C(xe=>({...xe,age:ae.target.value})),P(null)},placeholder:"Years",min:"15",max:"100"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Weight"}),o.jsxs("div",{className:"nut-input-unit",children:[o.jsx("input",{type:"number",value:E.weight,onChange:ae=>{C(xe=>({...xe,weight:ae.target.value})),P(null)},placeholder:E.weightUnit,min:"30",max:"300"}),o.jsxs("div",{className:"nut-unit-toggle",children:[o.jsx("button",{className:E.weightUnit==="kg"?"active":"",onClick:()=>{C(ae=>({...ae,weightUnit:"kg"})),P(null)},children:"kg"}),o.jsx("button",{className:E.weightUnit==="lbs"?"active":"",onClick:()=>{C(ae=>({...ae,weightUnit:"lbs"})),P(null)},children:"lbs"})]})]})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Height"}),o.jsxs("div",{className:"nut-input-unit",children:[E.heightUnit==="cm"?o.jsx("input",{type:"number",value:E.height,onChange:ae=>{C(xe=>({...xe,height:ae.target.value})),P(null)},placeholder:"cm",min:"100",max:"250"}):o.jsxs("div",{className:"nut-height-imperial",children:[o.jsx("input",{type:"number",value:E.heightFeet,onChange:ae=>{C(xe=>({...xe,heightFeet:ae.target.value})),P(null)},placeholder:"ft",min:"4",max:"7"}),o.jsx("input",{type:"number",value:E.heightInches,onChange:ae=>{C(xe=>({...xe,heightInches:ae.target.value})),P(null)},placeholder:"in",min:"0",max:"11"})]}),o.jsxs("div",{className:"nut-unit-toggle",children:[o.jsx("button",{className:E.heightUnit==="cm"?"active":"",onClick:()=>{C(ae=>({...ae,heightUnit:"cm"})),P(null)},children:"cm"}),o.jsx("button",{className:E.heightUnit==="ft"?"active":"",onClick:()=>{C(ae=>({...ae,heightUnit:"ft"})),P(null)},children:"ft/in"})]})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Activity Level"}),o.jsxs("select",{value:E.activityLevel,onChange:ae=>{C(xe=>({...xe,activityLevel:ae.target.value})),P(null)},children:[o.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),o.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),o.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),o.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),o.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Fitness Goal"}),o.jsxs("div",{className:"nut-goal-options",children:[o.jsxs("button",{className:E.goal==="lose"?"active":"",onClick:()=>{C(ae=>({...ae,goal:"lose"})),P(null)},children:[o.jsx("span",{className:"nut-goal-icon",children:"-"}),o.jsx("span",{children:"Lose Weight"})]}),o.jsxs("button",{className:E.goal==="maintain"?"active":"",onClick:()=>{C(ae=>({...ae,goal:"maintain"})),P(null)},children:[o.jsx("span",{className:"nut-goal-icon",children:"="}),o.jsx("span",{children:"Maintain"})]}),o.jsxs("button",{className:E.goal==="build"?"active":"",onClick:()=>{C(ae=>({...ae,goal:"build"})),P(null)},children:[o.jsx("span",{className:"nut-goal-icon",children:"+"}),o.jsx("span",{children:"Build Muscle"})]})]})]}),E.goal==="lose"&&o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Deficit Level"}),o.jsxs("div",{className:"nut-deficit-options",children:[o.jsxs("button",{className:E.deficitLevel==="light"?"active":"",onClick:()=>{C(ae=>({...ae,deficitLevel:"light"})),P(null)},children:[o.jsx("strong",{children:"Light"}),o.jsx("span",{children:"-250 cal/day"})]}),o.jsxs("button",{className:E.deficitLevel==="moderate"?"active":"",onClick:()=>{C(ae=>({...ae,deficitLevel:"moderate"})),P(null)},children:[o.jsx("strong",{children:"Moderate"}),o.jsx("span",{children:"-500 cal/day"})]}),o.jsxs("button",{className:E.deficitLevel==="harsh"?"active":"",onClick:()=>{C(ae=>({...ae,deficitLevel:"harsh"})),P(null)},children:[o.jsx("strong",{children:"Aggressive"}),o.jsx("span",{children:"-750 cal/day"})]})]})]}),o.jsx("button",{className:"nut-calc-btn",onClick:tn,disabled:!Fn(),children:"Calculate Macros"})]}),L&&o.jsxs("div",{className:"nut-calc-results",children:[o.jsx("h3",{children:"Your Daily Targets"}),o.jsxs("div",{className:"nut-calc-rings",children:[yt("Protein","Protein",L.protein,L.protein,"ring-protein"),yt("Carbs","Carbs",L.carbs,L.carbs,"ring-carbs"),yt("Fats","Fats",L.fats,L.fats,"ring-fats"),yt("Calories","Calories",L.calories,L.calories,"ring-cals")]}),o.jsxs("div",{className:"nut-calc-info",children:[o.jsxs("div",{className:"nut-calc-info-row",children:[o.jsx("span",{children:"BMR"}),o.jsxs("span",{children:[L.bmr," cal"]})]}),o.jsxs("div",{className:"nut-calc-info-row",children:[o.jsx("span",{children:"TDEE"}),o.jsxs("span",{children:[L.tdee," cal"]})]})]}),o.jsx("button",{className:"nut-save-targets-btn",onClick:vn,children:"Set as My Daily Targets"})]})]}),Tt&&o.jsx("div",{className:`toast-notification ${Tt.type}`,children:Tt.message})]}):o.jsxs("div",{className:"nut-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Nutrition"})]}),o.jsxs("div",{className:"cb-header-right",children:[o.jsx("button",{className:"nut-settings-btn",onClick:()=>{m("setup"),P(null)},"aria-label":"Recalculate macros",children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]}),o.jsxs("main",{className:"nut-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u(-1),children:" Back"}),o.jsxs("div",{className:"nut-rings-grid",children:[yt("Protein","Protein",se.protein,b.protein,"ring-protein"),yt("Carbs","Carbs",se.carbs,b.carbs,"ring-carbs"),yt("Fats","Fats",se.fats,b.fats,"ring-fats"),yt("Calories","Calories",se.calories,b.calories,"ring-cals")]}),Ce&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"nut-meal-selector",children:i_.map(ae=>o.jsxs("button",{className:`nut-meal-pill${H===ae.key?" active":""}`,onClick:()=>Z(ae.key),children:[o.jsx("span",{className:"nut-meal-icon",children:ae.icon}),o.jsx("span",{children:ae.label})]},ae.key))}),o.jsxs("div",{className:"nut-add-buttons",children:[o.jsxs("button",{className:"nut-add-btn nut-add-scan",onClick:()=>{ee("scan"),st(null)},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),o.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),o.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),o.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),o.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),o.jsx("span",{children:"Scan"})]}),o.jsxs("button",{className:"nut-add-btn nut-add-search",onClick:()=>{ee("search"),Oe([]),ue("")},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),o.jsx("span",{children:"Search"})]}),o.jsxs("button",{className:"nut-add-btn nut-add-manual",onClick:()=>{ee("manual"),ge({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})},children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),o.jsx("span",{children:"Manual"})]})]})]}),Ce&&o.jsxs("div",{className:"nut-water-section",children:[o.jsxs("div",{className:"nut-water-header",children:[o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),o.jsx("span",{children:"Water"}),o.jsxs("span",{className:"nut-water-count",children:[K.water," / ",b?.waterGoal||8," glasses"]})]}),o.jsx("div",{className:"nut-water-glasses",children:[...Array(b?.waterGoal||8)].map((ae,xe)=>o.jsx("div",{className:`nut-water-glass ${xe<K.water?"filled":""}`,children:o.jsx("svg",{viewBox:"0 0 24 24",fill:xe<K.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:o.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},xe))}),o.jsxs("div",{className:"nut-water-btns",children:[o.jsx("button",{onClick:_t,disabled:K.water<=0,children:"-"}),o.jsx("button",{onClick:jt,children:"+"})]})]}),o.jsxs("div",{className:"nut-date-nav",children:[o.jsx("button",{className:"nut-date-arrow",onClick:()=>it(-1),"aria-label":"Previous day",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"15 18 9 12 15 6"})})}),o.jsxs("button",{className:"nut-date-label",onClick:()=>{je(!fe),B({year:new Date(V+"T12:00:00").getFullYear(),month:new Date(V+"T12:00:00").getMonth()})},children:[o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),o.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),o.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),o.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),o.jsx("span",{children:Ve(V)})]}),o.jsx("button",{className:"nut-date-arrow",onClick:()=>it(1),disabled:V>=Hl(),"aria-label":"Next day",children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),fe&&o.jsxs("div",{className:"nut-calendar",children:[o.jsxs("div",{className:"nut-cal-header",children:[o.jsx("button",{onClick:()=>B(ae=>{let xe=ae.month-1,lt=ae.year;return xe<0&&(xe=11,lt--),{year:lt,month:xe}}),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"15 18 9 12 15 6"})})}),o.jsxs("span",{children:[xt[q.month]," ",q.year]}),o.jsx("button",{onClick:()=>B(ae=>{let xe=ae.month+1,lt=ae.year;return xe>11&&(xe=0,lt++),{year:lt,month:xe}}),disabled:q.year===new Date().getFullYear()&&q.month>=new Date().getMonth(),children:o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),o.jsx("div",{className:"nut-cal-days-header",children:rt.map(ae=>o.jsx("span",{children:ae},ae))}),o.jsxs("div",{className:"nut-cal-grid",children:[[...Array($e(q.year,q.month))].map((ae,xe)=>o.jsx("span",{},`e${xe}`)),[...Array(Ke(q.year,q.month))].map((ae,xe)=>{const lt=xe+1,ht=`${q.year}-${String(q.month+1).padStart(2,"0")}-${String(lt).padStart(2,"0")}`,Pt=ht>Hl(),_n=ht===V,nn=ht===Hl();return o.jsx("button",{className:`nut-cal-day${_n?" selected":""}${nn?" today":""}${Pt?" future":""}`,disabled:Pt,onClick:()=>{F(ht),je(!1)},children:lt},lt)})]})]}),o.jsx("div",{className:"nut-log-section",children:K.entries.length===0?o.jsx("div",{className:"nut-log-empty",children:o.jsx("p",{children:Ce?"No food logged yet today. Add your first meal above!":"No food logged on this day."})}):o.jsx("div",{className:"nut-meals-list",children:i_.map(ae=>{const xe=K.entries.filter(ht=>(ht.meal||"snacks")===ae.key);if(xe.length===0)return null;const lt=xe.reduce((ht,Pt)=>({protein:ht.protein+(Pt.protein||0),carbs:ht.carbs+(Pt.carbs||0),fats:ht.fats+(Pt.fats||0),calories:ht.calories+(Pt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return o.jsxs("div",{className:"nut-meal-card",children:[o.jsxs("div",{className:"nut-meal-card-header",children:[o.jsx("span",{className:"nut-meal-card-icon",children:ae.icon}),o.jsx("span",{className:"nut-meal-card-title",children:ae.label}),o.jsxs("span",{className:"nut-meal-card-cal",children:[lt.calories," cal"]})]}),o.jsx("div",{className:"nut-log-list",children:xe.map(ht=>o.jsxs("div",{className:"nut-log-item",children:[o.jsxs("div",{className:"nut-log-item-info",children:[o.jsx("span",{className:"nut-log-item-name",children:ht.name}),ht.serving&&o.jsx("span",{className:"nut-log-item-serving",children:ht.serving})]}),o.jsxs("div",{className:"nut-log-item-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[ht.protein,"p"]}),o.jsxs("span",{className:"nut-macro-c",children:[ht.carbs,"c"]}),o.jsxs("span",{className:"nut-macro-f",children:[ht.fats,"f"]}),o.jsx("span",{className:"nut-macro-cal",children:ht.calories})]}),Ce&&o.jsx("button",{className:"nut-log-delete",onClick:()=>qn(ht.id),"aria-label":"Remove",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ht.id))}),o.jsxs("div",{className:"nut-meal-card-totals",children:[o.jsxs("span",{className:"nut-macro-p",children:[lt.protein,"g P"]}),o.jsxs("span",{className:"nut-macro-c",children:[lt.carbs,"g C"]}),o.jsxs("span",{className:"nut-macro-f",children:[lt.fats,"g F"]})]})]},ae.key)})})})]}),$&&o.jsx("div",{className:"nut-modal-overlay",onClick:()=>{hn(),te(null),ee(null),st(null)},children:o.jsxs("div",{className:"nut-modal",onClick:ae=>ae.stopPropagation(),children:[o.jsxs("div",{className:"nut-modal-header",children:[o.jsx("h3",{children:$==="scan"?"Scan Barcode":$==="search"?"Search Food":"Manual Entry"}),o.jsx("button",{className:"nut-modal-close",onClick:()=>{hn(),te(null),ee(null),st(null)},children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),$==="scan"&&!be&&o.jsxs("div",{className:"nut-scan-area",children:[o.jsxs("div",{className:"nut-scanner-wrapper",children:[o.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),O&&!Ie&&o.jsx("div",{className:"nut-scan-line"}),Ie&&o.jsxs("div",{className:"nut-scan-detected-overlay",children:[o.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M20 6L9 17l-5-5"})}),o.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),o.jsx("p",{className:"nut-scan-detected-code",children:Ie})]})]}),!O&&o.jsxs("button",{className:"nut-scan-start-btn",onClick:ks,children:[o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),o.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),o.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),o.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),o.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),O&&!Ie&&o.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),o.jsx("div",{className:"nut-barcode-divider",children:o.jsx("span",{children:"or enter barcode manually"})}),o.jsxs("div",{className:"nut-barcode-manual",children:[o.jsx("input",{type:"text",inputMode:"numeric",value:ve,onChange:ae=>Le(ae.target.value),onKeyDown:ae=>ae.key==="Enter"&&ve.trim()&&et(ve.trim()),placeholder:"Enter barcode number"}),o.jsx("button",{onClick:()=>ve.trim()&&et(ve.trim()),disabled:!ve.trim()||De,children:De?"...":"Look Up"})]})]}),$==="scan"&&be&&o.jsxs("div",{className:"nut-product-result",children:[be.image&&o.jsx("img",{src:be.image,alt:"",className:"nut-product-img"}),o.jsx("h4",{children:be.name}),be.brand&&o.jsx("p",{className:"nut-product-brand",children:be.brand}),o.jsx("p",{className:"nut-product-per",children:"Per 100g:"}),o.jsxs("div",{className:"nut-product-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[be.protein,"g P"]}),o.jsxs("span",{className:"nut-macro-c",children:[be.carbs,"g C"]}),o.jsxs("span",{className:"nut-macro-f",children:[be.fats,"g F"]}),o.jsxs("span",{className:"nut-macro-cal",children:[be.calories," cal"]})]}),o.jsxs("div",{className:"nut-serving-adjust",children:[o.jsx("label",{children:"Serving (g)"}),o.jsx("input",{type:"number",value:Math.round(Te*100),onChange:ae=>dt(Math.max(0,parseFloat(ae.target.value)||0)/100),min:"1"})]}),o.jsx("div",{className:"nut-product-total",children:o.jsxs("span",{children:["Total: ",Math.round(be.protein*Te),"p / ",Math.round(be.carbs*Te),"c / ",Math.round(be.fats*Te),"f / ",Math.round(be.calories*Te)," cal"]})}),o.jsxs("div",{className:"nut-product-actions",children:[o.jsx("button",{className:"nut-btn-secondary",onClick:()=>{st(null),ee("scan")},children:"Scan Again"}),o.jsx("button",{className:"nut-btn-primary",onClick:()=>Jn({name:be.name,protein:Math.round(be.protein*Te),carbs:Math.round(be.carbs*Te),fats:Math.round(be.fats*Te),calories:Math.round(be.calories*Te),serving:`${Math.round(Te*100)}g`}),children:"Add"})]})]}),$==="search"&&!be&&o.jsxs("div",{className:"nut-search-area",children:[o.jsxs("div",{className:"nut-search-bar",children:[o.jsx("input",{type:"text",value:Q,onChange:ae=>ue(ae.target.value),onKeyDown:ae=>ae.key==="Enter"&&at(),placeholder:"Search food or product...",autoFocus:!0}),o.jsx("button",{onClick:at,disabled:de,children:de?"...":"Search"})]}),o.jsxs("div",{className:"nut-search-results",children:[ze.map((ae,xe)=>o.jsxs("button",{className:"nut-search-item",onClick:()=>{st(ae),dt(1)},children:[ae.image&&o.jsx("img",{src:ae.image,alt:""}),o.jsxs("div",{className:"nut-search-item-info",children:[o.jsx("span",{className:"nut-search-item-name",children:ae.name}),ae.brand&&o.jsx("span",{className:"nut-search-item-brand",children:ae.brand}),o.jsxs("span",{className:"nut-search-item-macros",children:[ae.calories," cal  ",ae.protein,"p  ",ae.carbs,"c  ",ae.fats,"f per 100g"]})]})]},xe)),ze.length===0&&Q&&!de&&o.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),$==="search"&&be&&o.jsxs("div",{className:"nut-product-result",children:[be.image&&o.jsx("img",{src:be.image,alt:"",className:"nut-product-img"}),o.jsx("h4",{children:be.name}),be.brand&&o.jsx("p",{className:"nut-product-brand",children:be.brand}),o.jsx("p",{className:"nut-product-per",children:"Per 100g:"}),o.jsxs("div",{className:"nut-product-macros",children:[o.jsxs("span",{className:"nut-macro-p",children:[be.protein,"g P"]}),o.jsxs("span",{className:"nut-macro-c",children:[be.carbs,"g C"]}),o.jsxs("span",{className:"nut-macro-f",children:[be.fats,"g F"]}),o.jsxs("span",{className:"nut-macro-cal",children:[be.calories," cal"]})]}),o.jsxs("div",{className:"nut-serving-adjust",children:[o.jsx("label",{children:"Serving (g)"}),o.jsx("input",{type:"number",value:Math.round(Te*100),onChange:ae=>dt(Math.max(0,parseFloat(ae.target.value)||0)/100),min:"1"})]}),o.jsx("div",{className:"nut-product-total",children:o.jsxs("span",{children:["Total: ",Math.round(be.protein*Te),"p / ",Math.round(be.carbs*Te),"c / ",Math.round(be.fats*Te),"f / ",Math.round(be.calories*Te)," cal"]})}),o.jsxs("div",{className:"nut-product-actions",children:[o.jsx("button",{className:"nut-btn-secondary",onClick:()=>st(null),children:"Back to Search"}),o.jsx("button",{className:"nut-btn-primary",onClick:()=>Jn({name:be.name,protein:Math.round(be.protein*Te),carbs:Math.round(be.carbs*Te),fats:Math.round(be.fats*Te),calories:Math.round(be.calories*Te),serving:`${Math.round(Te*100)}g`}),children:"Add"})]})]}),$==="manual"&&o.jsxs("div",{className:"nut-manual-form",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Food Name"}),o.jsx("input",{type:"text",value:le.name,onChange:ae=>ge(xe=>({...xe,name:ae.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Serving Size (optional)"}),o.jsx("input",{type:"text",value:le.serving,onChange:ae=>ge(xe=>({...xe,serving:ae.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),o.jsxs("div",{className:"nut-manual-macros",children:[o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Protein (g)"}),o.jsx("input",{type:"number",value:le.protein,onChange:ae=>ge(xe=>({...xe,protein:ae.target.value})),min:"0"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Carbs (g)"}),o.jsx("input",{type:"number",value:le.carbs,onChange:ae=>ge(xe=>({...xe,carbs:ae.target.value})),min:"0"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Fats (g)"}),o.jsx("input",{type:"number",value:le.fats,onChange:ae=>ge(xe=>({...xe,fats:ae.target.value})),min:"0"})]}),o.jsxs("div",{className:"nut-form-group",children:[o.jsx("label",{children:"Calories"}),o.jsx("input",{type:"number",value:le.calories,onChange:ae=>ge(xe=>({...xe,calories:ae.target.value})),min:"0"})]})]}),o.jsx("button",{className:"nut-btn-primary",disabled:!le.name.trim(),onClick:()=>Jn({name:le.name,protein:parseFloat(le.protein)||0,carbs:parseFloat(le.carbs)||0,fats:parseFloat(le.fats)||0,calories:parseFloat(le.calories)||0,serving:le.serving||""}),children:"Add Food"})]})]})}),Tt&&o.jsx("div",{className:`toast-notification ${Tt.type}`,children:Tt.message})]})}const eo=60,dd=5,o_=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],l_=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],hd=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],V3=[5,10,15,20,30];function U3(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function B3(s){const e=[...s];for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}function z3(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),{isDark:i,toggleTheme:c}=go(),u=Os(),[f,m]=I.useState("menu"),[b,T]=I.useState(["bodyweight"]),[E,C]=I.useState("core"),[L,P]=I.useState("intermediate"),[V,F]=I.useState(15),[K,G]=I.useState([]),[se,Y]=I.useState(!1),fe=I.useRef(!1),je=I.useRef([]),[q,B]=I.useState([]),[H,Z]=I.useState(2),[$,ee]=I.useState(hd[1]),[O,ke]=I.useState(1),[Ie,te]=I.useState(0),[ve,Le]=I.useState("work"),[De,Je]=I.useState(0),[Q,ue]=I.useState(!1),[ze,Oe]=I.useState(0),de=I.useRef(null);I.useRef(null),I.useRef(null);const[Be,le]=I.useState(null),ge=I.useCallback((We,et="info")=>{le({message:We,type:et}),setTimeout(()=>le(null),3e3)},[]),[be,st]=I.useState(0),[Te,dt]=I.useState(0),[Tt,Nt]=I.useState(0),[Ee,Ue]=I.useState(0),[X,Ce]=I.useState({beginner:0,intermediate:0,advanced:0});I.useEffect(()=>{!a&&(!s||!e)&&u("/")},[s,e,a,u]),I.useEffect(()=>{if(!s)return;(async()=>{try{const et=Ft(nt,"workoutLogs"),at=_r(et,ir("clientId","==",s.uid)),_t=(await mn(at)).docs.map(en=>en.data());dt(_t.length);const At=_t.reduce((en,pn)=>en+(pn.duration||0),0);Nt(At);const yt={beginner:0,intermediate:0,advanced:0};_t.forEach(en=>{en.level&&yt[en.level]!==void 0&&yt[en.level]++}),Ce(yt);const ae=new Date,xe=ae.getDay(),lt=xe===0?-6:1-xe,ht=new Date(ae);ht.setDate(ae.getDate()+lt),ht.setHours(0,0,0,0);const Pt=ht.getTime(),_n=_t.filter(en=>{const pn=en.completedAt;return pn?(pn.toDate?pn.toDate().getTime():new Date(pn).getTime())>=Pt:!1});st(_n.length);const nn=_t.map(en=>en.completedAt).filter(Boolean).map(en=>en.toDate?en.toDate().getTime():new Date(en).getTime()).sort((en,pn)=>pn-en);if(nn.length===0)Ue(0);else{const en=new Set;nn.forEach(He=>{const tt=new Date(He),Ze=tt.getDay(),pt=Ze===0?-6:1-Ze,wt=new Date(tt);wt.setDate(tt.getDate()+pt),wt.setHours(0,0,0,0),en.add(wt.getTime())});const pn=[...en].sort((He,tt)=>tt-He);let wn=0;const Gn=new Date(ae),ls=ae.getDay()===0?-6:1-ae.getDay();Gn.setDate(ae.getDate()+ls),Gn.setHours(0,0,0,0);let me=Gn.getTime();pn.includes(me)||(me-=10080*60*1e3);for(let He=0;He<200&&pn.includes(me);He++)wn++,me-=10080*60*1e3;Ue(wn)}}catch(et){console.error("Error loading workout stats:",et)}})()},[s,f]);const Ke=()=>{const We=[];let et;E==="mix"?et=["core","upper","lower"]:E==="fullbody"?et=["upper","lower"]:et=[E];for(const at of b)for(const jt of et)We.push(`exercises/${at}/${jt}`);return We},$e=async()=>{if(fe.current){for(;fe.current;)await new Promise(We=>setTimeout(We,200));return je.current}fe.current=!0,Y(!0);try{const We=Ke(),et=[];for(const At of We)try{const yt=Wx(Gx,At),ae=await $x(yt);et.push(...ae.items)}catch{console.warn(`Folder ${At} not found, skipping.`)}if(et.length===0&&b.includes("bodyweight")&&E==="core")try{const At=Wx(Gx,"core"),yt=await $x(At);et.push(...yt.items)}catch{console.warn("Legacy core/ folder not found either.")}if(et.length===0){const At=b.map(ae=>o_.find(xe=>xe.key===ae)?.label).join(" + "),yt=l_.find(ae=>ae.key===E)?.label;return ge(`No exercises found for ${At} / ${yt}. Upload videos to Firebase Storage.`,"error"),fe.current=!1,Y(!1),[]}const at=new Set,jt=et.filter(At=>{const yt=At.name.replace(/\.(mp4|gif)$/i,"");return at.has(yt)?!1:(at.add(yt),!0)}),_t=await Promise.all(jt.map(async At=>{const yt=await BM(At),ae=U3(At.name.replace(/\.(mp4|gif)$/i,"")),xe=/\.gif$/i.test(At.name);return{name:ae,videoUrl:yt,isGif:xe}}));return je.current=_t,G(_t),fe.current=!1,Y(!1),_t}catch(We){console.error("Error loading exercises:",We);const et=We.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${We.message||We.code||"Unknown error"}`;return ge(et,"error"),fe.current=!1,Y(!1),[]}},Ve=async()=>{m("spinning"),je.current=[];const We=await $e();if(We.length===0){m("setup");return}const et=hd.find(lt=>lt.key===L);ee(et);const at=et.work+et.rest,jt=V*60,_t=Math.floor(jt/at);let At,yt;_t<=6?(At=Math.max(3,Math.floor(_t/2)),yt=Math.floor(_t/At)):_t<=12?(At=Math.min(6,Math.floor(_t/2)),yt=Math.floor(_t/At)):(At=Math.min(10,Math.floor(_t/2)),yt=Math.floor(_t/At)),yt=Math.max(2,yt);const ae=B3(We),xe=ae.slice(0,Math.min(At,ae.length));B(xe),Z(yt),setTimeout(()=>m("preview"),2e3)},it=()=>{m("countdown"),Oe(3)};I.useEffect(()=>{if(f!=="countdown")return;if(ze<=0){m("workout"),ke(1),te(0),Le("work"),Je($.work),ue(!1),Jn();return}Fn();const We=setTimeout(()=>Oe(et=>et-1),1e3);return()=>clearTimeout(We)},[ze,f]),I.useEffect(()=>{if(f!=="workout"||Q)return;if(De<=0){xt();return}De<=3&&Fn();const We=setTimeout(()=>Je(et=>et-1),1e3);return()=>clearTimeout(We)},[De,f,Q]);const xt=()=>{if(ve==="work")Le("rest"),Je($.rest);else{const We=Ie+1;if(We>=q.length){const et=O+1;if(et>H){m("complete"),rt();return}ke(et),te(0)}else te(We);Le("work"),Je($.work),Jn()}},rt=async()=>{if(s)try{await fi(Ft(nt,"workoutLogs"),{clientId:s.uid,level:L,duration:V,equipment:b,focus:E,exerciseCount:q.length,rounds:H,exercises:q.map(We=>We.name),completedAt:vt.now()}),st(We=>We+1),dt(We=>We+1),Nt(We=>We+V),Ce(We=>({...We,[L]:(We[L]||0)+1}))}catch(We){console.error("Error saving workout log:",We)}},tn=I.useRef(null),vn=()=>(tn.current||(tn.current=new(window.AudioContext||window.webkitAudioContext)),tn.current),Fn=()=>{try{const We=vn(),et=We.createOscillator(),at=We.createGain();et.connect(at),at.connect(We.destination),et.frequency.value=880,at.gain.value=.3,et.start(We.currentTime),et.stop(We.currentTime+.15)}catch{}},Jn=()=>{try{const We=vn(),et=We.createOscillator(),at=We.createGain();et.connect(at),at.connect(We.destination),et.frequency.value=1200,at.gain.value=.4,et.start(We.currentTime),et.stop(We.currentTime+.3)}catch{}};I.useEffect(()=>{if(f!=="workout"||ve!=="work"||!q[Ie]?.isGif)return;const et=setInterval(()=>{const at=de.current;if(!at)return;const jt=at.getAttribute("src");at.removeAttribute("src"),setTimeout(()=>{de.current&&de.current.setAttribute("src",jt)},0)},4e3);return()=>clearInterval(et)},[f,ve,Ie,O,q]);const qn=(We,et,at)=>{const jt=Math.round(We/et*eo);return o.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:[...Array(eo)].map((_t,At)=>{const yt=(At*6-90)*(Math.PI/180),ae=100+82*Math.cos(yt),xe=100+82*Math.sin(yt),lt=100+94*Math.cos(yt),ht=100+94*Math.sin(yt);return o.jsx("line",{x1:ae,y1:xe,x2:lt,y2:ht,className:At<jt?`wk-tick-filled ${at}`:"wk-tick-empty",strokeWidth:At%5===0?"3":"2"},At)})})},ks=()=>{const We=q.length*H;return((O-1)*q.length+Ie+(ve==="rest"?.5:0))/We},hn=Be&&o.jsx("div",{className:`toast-notification ${Be.type}`,children:Be.message});if(a)return o.jsx("div",{className:"cb-loading",children:o.jsx("div",{className:"cb-loading-spinner"})});if(f==="menu")return o.jsxs("div",{className:"wk-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Workouts"})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),o.jsxs("main",{className:"wk-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u("/client/core-buddy"),children:" Back"}),o.jsxs("div",{className:"wk-menu-cards",children:[o.jsxs("button",{className:"wk-menu-card",onClick:()=>m("setup"),children:[o.jsxs("div",{className:"wk-menu-ring-wrap",children:[o.jsx("svg",{className:"wk-menu-ring-svg",viewBox:"0 0 200 200",children:[...Array(eo)].map((We,et)=>{const at=(et*6-90)*(Math.PI/180),jt=100+78*Math.cos(at),_t=100+78*Math.sin(at),At=100+94*Math.cos(at),yt=100+94*Math.sin(at),ae=Math.round(Math.min(be,dd)/dd*eo);return o.jsx("line",{x1:jt,y1:_t,x2:At,y2:yt,className:et<ae?"wk-menu-tick-filled":"wk-menu-tick-empty",strokeWidth:et%5===0?"3":"2"},et)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"wk-menu-ring-logo"})]}),o.jsxs("div",{className:"wk-menu-card-stats",children:[o.jsx("span",{className:"wk-menu-stat-big",children:be}),o.jsx("span",{className:"wk-menu-stat-label",children:"this week"})]}),o.jsx("h3",{children:"Random Workout"}),o.jsx("p",{children:"Interval-based HIIT from your exercise library"})]}),o.jsxs("button",{className:"wk-menu-card",onClick:()=>u("/client/core-buddy/programmes"),children:[o.jsxs("div",{className:"wk-menu-ring-wrap",children:[o.jsx("svg",{className:"wk-menu-ring-svg",viewBox:"0 0 200 200",children:[...Array(eo)].map((We,et)=>{const at=(et*6-90)*(Math.PI/180),jt=100+78*Math.cos(at),_t=100+78*Math.sin(at),At=100+94*Math.cos(at),yt=100+94*Math.sin(at);return o.jsx("line",{x1:jt,y1:_t,x2:At,y2:yt,className:"wk-menu-tick-empty",strokeWidth:et%5===0?"3":"2"},et)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"wk-menu-ring-logo"})]}),o.jsx("h3",{children:"Build a Programme"}),o.jsx("p",{children:"Structured set & rep programmes with progressive overload"})]})]})]}),hn]});if(f==="setup")return o.jsxs("div",{className:"wk-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Setup"})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),o.jsxs("main",{className:"wk-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>m("menu"),children:" Back"}),o.jsxs("div",{className:"wk-stats-hero",children:[o.jsxs("div",{className:"wk-stats-ring-wrap",children:[o.jsx("svg",{className:"wk-stats-ring-svg",viewBox:"0 0 200 200",children:[...Array(eo)].map((We,et)=>{const at=(et*6-90)*(Math.PI/180),jt=100+78*Math.cos(at),_t=100+78*Math.sin(at),At=100+94*Math.cos(at),yt=100+94*Math.sin(at),ae=Math.round(Math.min(be,dd)/dd*eo);return o.jsx("line",{x1:jt,y1:_t,x2:At,y2:yt,className:et<ae?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:et%5===0?"3":"2"},et)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"wk-stats-ring-logo"})]}),o.jsxs("div",{className:"wk-stats-ring-label",children:[o.jsx("span",{className:"wk-stats-ring-count",children:be}),o.jsx("span",{className:"wk-stats-ring-sep",children:"/"}),o.jsx("span",{className:"wk-stats-ring-target",children:dd}),o.jsx("span",{className:"wk-stats-ring-text",children:"THIS WEEK"})]}),o.jsxs("div",{className:"wk-stats-cards",children:[o.jsxs("div",{className:"wk-stats-card",children:[o.jsx("span",{className:"wk-stats-card-num",children:Te}),o.jsx("span",{className:"wk-stats-card-label",children:"Workouts"})]}),o.jsxs("div",{className:"wk-stats-card",children:[o.jsx("span",{className:"wk-stats-card-num",children:Tt}),o.jsx("span",{className:"wk-stats-card-label",children:"Minutes"})]}),o.jsxs("div",{className:"wk-stats-card",children:[o.jsx("span",{className:"wk-stats-card-num",children:Ee}),o.jsx("span",{className:"wk-stats-card-label",children:"Weeks"})]})]}),Te>0&&(()=>{const We=X.beginner+X.intermediate+X.advanced;if(We===0)return null;const et=Math.round(X.beginner/We*100),at=Math.round(X.intermediate/We*100),jt=100-et-at;return o.jsxs("div",{className:"wk-stats-level-bar",children:[et>0&&o.jsx("div",{className:"wk-stats-level-seg wk-seg-beginner",style:{width:`${et}%`},children:et>=15&&o.jsxs("span",{children:["B ",et,"%"]})}),at>0&&o.jsx("div",{className:"wk-stats-level-seg wk-seg-intermediate",style:{width:`${at}%`},children:at>=15&&o.jsxs("span",{children:["I ",at,"%"]})}),jt>0&&o.jsx("div",{className:"wk-stats-level-seg wk-seg-advanced",style:{width:`${jt}%`},children:jt>=15&&o.jsxs("span",{children:["A ",jt,"%"]})})]})})()]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Equipment"}),o.jsx("div",{className:"wk-equip-options",children:o_.map(We=>{const et=b.includes(We.key);return o.jsxs("button",{className:`wk-equip-btn${et?" active":""}`,onClick:()=>{T(at=>et&&at.length===1?at:et?at.filter(jt=>jt!==We.key):[...at,We.key])},children:[o.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:We.icon})}),o.jsx("span",{children:We.label})]},We.key)})})]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Focus Area"}),o.jsx("div",{className:"wk-focus-grid",children:l_.map(We=>o.jsxs("button",{className:`wk-equip-btn${E===We.key?" active":""}${We.key==="mix"?" wk-mix-btn":""}`,onClick:()=>C(We.key),children:[o.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:We.icon})}),o.jsx("span",{children:We.label})]},We.key))})]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Level"}),o.jsx("div",{className:"wk-level-cards",children:hd.map(We=>o.jsxs("button",{className:`wk-level-card${L===We.key?" active":""}`,onClick:()=>P(We.key),children:[o.jsx("span",{className:"wk-level-name",children:We.label}),o.jsx("span",{className:"wk-level-desc",children:We.desc})]},We.key))})]}),o.jsxs("div",{className:"wk-setup-section",children:[o.jsx("h2",{children:"Time"}),o.jsx("div",{className:"wk-time-options",children:V3.map(We=>o.jsxs("button",{className:`wk-time-btn${V===We?" active":""}`,onClick:()=>F(We),children:[o.jsx("span",{className:"wk-time-num",children:We}),o.jsx("span",{className:"wk-time-unit",children:"min"})]},We))})]}),o.jsx("button",{className:"wk-randomise-btn",onClick:Ve,disabled:se,children:se?"Loading exercises...":"Randomise Workout"})]}),hn]});if(f==="spinning")return o.jsxs("div",{className:"wk-page wk-page-center","data-theme":i?"dark":"light",children:[o.jsxs("div",{className:"wk-spin-container",children:[o.jsxs("div",{className:"wk-spin-ring",children:[o.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:[...Array(eo)].map((We,et)=>{const at=(et*6-90)*(Math.PI/180),jt=100+78*Math.cos(at),_t=100+78*Math.sin(at),At=100+94*Math.cos(at),yt=100+94*Math.sin(at);return o.jsx("line",{x1:jt,y1:_t,x2:At,y2:yt,className:"wk-spin-tick",strokeWidth:et%5===0?"3.5":"2",style:{animationDelay:`${et*.03}s`}},et)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"wk-spin-logo"})]}),o.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),hn]});if(f==="preview"){const We=hd.find(at=>at.key===L),et=q.length*H*(We.work+We.rest);return o.jsxs("div",{className:"wk-page","data-theme":i?"dark":"light",children:[o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:"Your Workout"})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),o.jsxs("main",{className:"wk-main",children:[o.jsxs("div",{className:"wk-preview-stats",children:[o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:q.length}),o.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:H}),o.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:Math.ceil(et/60)}),o.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsxs("span",{className:"wk-stat-val",children:[We.work,"/",We.rest]}),o.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),o.jsx("div",{className:"wk-preview-list",children:q.map((at,jt)=>o.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${jt*.06}s`},children:[o.jsx("span",{className:"wk-preview-num",children:jt+1}),o.jsx("span",{className:"wk-preview-name",children:at.name})]},jt))}),o.jsxs("div",{className:"wk-preview-actions",children:[o.jsxs("button",{className:"wk-btn-secondary",onClick:()=>Ve(),children:[o.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("polyline",{points:"1 4 1 10 7 10"}),o.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),o.jsx("button",{className:"wk-btn-primary",onClick:it,children:"Start Workout"})]})]})]})}if(f==="countdown")return o.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":i?"dark":"light",children:o.jsxs("div",{className:"wk-countdown-big",children:[o.jsx("span",{className:"wk-countdown-num",children:ze}),o.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(f==="workout"){const We=q[Ie],et=ve==="work"?$.work:$.rest,at=ve==="rest"?Ie+1<q.length?q[Ie+1]:O<H?q[0]:null:null;return o.jsxs("div",{className:"wk-page wk-page-workout","data-theme":i?"dark":"light",children:[o.jsx("div",{className:"wk-video-container",children:ve==="work"?We.isGif?o.jsx("img",{ref:de,className:"wk-video",src:We.videoUrl,alt:We.name},We.videoUrl):o.jsx("video",{className:"wk-video",src:We.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},We.videoUrl):o.jsxs("div",{className:"wk-rest-screen",children:[o.jsx("span",{className:"wk-rest-label",children:"REST"}),at&&o.jsxs("span",{className:"wk-next-label",children:["Next: ",at.name]})]})}),o.jsx("div",{className:"wk-spotify",children:o.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),o.jsxs("div",{className:"wk-exercise-info",children:[o.jsxs("span",{className:"wk-exercise-counter",children:[Ie+1," / ",q.length]}),o.jsx("h2",{className:"wk-exercise-name",children:We.name}),o.jsxs("span",{className:"wk-round-label",children:["Round ",O," of ",H]})]}),o.jsx("div",{className:"wk-timer-section",children:o.jsxs("div",{className:"wk-timer-ring-wrap",children:[qn(De,et,ve==="work"?"wk-tick-work":"wk-tick-rest"),o.jsxs("div",{className:"wk-timer-center",children:[o.jsx("span",{className:"wk-timer-time",children:De}),o.jsx("span",{className:`wk-timer-phase ${ve}`,children:ve==="work"?"WORK":"REST"})]})]})}),o.jsxs("div",{className:"wk-controls",children:[o.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&m("menu")},children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),o.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>ue(!Q),children:Q?o.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):o.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),o.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),o.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{Je(0)},children:o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[o.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),o.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),o.jsx("div",{className:"wk-progress-bar",children:o.jsx("div",{className:"wk-progress-fill",style:{width:`${ks()*100}%`}})})]})}if(f==="complete"){const We=hd.find(at=>at.key===L),et=q.length*H*(We.work+We.rest);return o.jsx("div",{className:"wk-page wk-page-center","data-theme":i?"dark":"light",children:o.jsxs("div",{className:"wk-complete",children:[o.jsxs("div",{className:"wk-complete-ring",children:[o.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:[...Array(eo)].map((at,jt)=>{const _t=(jt*6-90)*(Math.PI/180),At=100+78*Math.cos(_t),yt=100+78*Math.sin(_t),ae=100+94*Math.cos(_t),xe=100+94*Math.sin(_t);return o.jsx("line",{x1:At,y1:yt,x2:ae,y2:xe,className:"wk-tick-complete",strokeWidth:jt%5===0?"3.5":"2",style:{animationDelay:`${jt*.02}s`}},jt)})}),o.jsx("div",{className:"wk-complete-center",children:o.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:o.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),o.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),o.jsxs("div",{className:"wk-complete-stats",children:[o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:Math.ceil(et/60)}),o.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:q.length*H}),o.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),o.jsxs("div",{className:"wk-stat",children:[o.jsx("span",{className:"wk-stat-val",children:H}),o.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),o.jsx("div",{className:"wk-complete-actions",children:o.jsx("button",{className:"wk-btn-primary",onClick:()=>m("menu"),children:"Done"})})]})})}return null}const Eg=60,c_=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Goblet Squat",type:"weighted",sets:3,baseReps:10,pbKey:"squat"},{name:"DB Bench Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress"},{name:"DB Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20},{name:"Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Deadlift",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift"},{name:"DB Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow"},{name:"Lat Pulldown",type:"weighted",sets:3,baseReps:10,pbKey:"latPulldown"},{name:"Bicep Curls",type:"weighted",sets:3,baseReps:12},{name:"Russian Twists",type:"reps",sets:3,baseReps:20},{name:"Side Plank",type:"timed",sets:2,baseTime:25}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Walking Lunges",type:"weighted",sets:3,baseReps:12},{name:"Step Ups",type:"weighted",sets:3,baseReps:10},{name:"Calf Raises",type:"weighted",sets:3,baseReps:15},{name:"Box Jumps",type:"reps",sets:3,baseReps:10},{name:"Burpees",type:"reps",sets:3,baseReps:10},{name:"Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Goblet Squat",type:"weighted",sets:4,baseReps:8,pbKey:"squat"},{name:"DB Bench Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress"},{name:"DB Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow"},{name:"DB Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20},{name:"Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank"}]},{name:"Day 2",label:"Power",exercises:[{name:"Deadlift",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift"},{name:"Walking Lunges",type:"weighted",sets:3,baseReps:10},{name:"Lat Pulldown",type:"weighted",sets:4,baseReps:8,pbKey:"latPulldown"},{name:"Bicep Curls",type:"weighted",sets:3,baseReps:10},{name:"Box Jumps",type:"reps",sets:3,baseReps:8},{name:"Russian Twists",type:"reps",sets:3,baseReps:20}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Step Ups",type:"weighted",sets:3,baseReps:12},{name:"Calf Raises",type:"weighted",sets:3,baseReps:15},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12},{name:"Push Ups",type:"reps",sets:3,baseReps:15},{name:"Burpees",type:"reps",sets:3,baseReps:12},{name:"Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: build, push, peak over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"DB Bench Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress"},{name:"DB Shoulder Press",type:"weighted",sets:4,baseReps:8,pbKey:"shoulderPress"},{name:"Incline DB Press",type:"weighted",sets:3,baseReps:10},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12},{name:"Push Ups",type:"reps",sets:3,baseReps:15},{name:"Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Goblet Squat",type:"weighted",sets:4,baseReps:8,pbKey:"squat"},{name:"Deadlift",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift"},{name:"Walking Lunges",type:"weighted",sets:3,baseReps:10},{name:"Calf Raises",type:"weighted",sets:3,baseReps:15},{name:"Box Jumps",type:"reps",sets:3,baseReps:10},{name:"Wall Sit",type:"timed",sets:3,baseTime:30}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"DB Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow"},{name:"Lat Pulldown",type:"weighted",sets:4,baseReps:8,pbKey:"latPulldown"},{name:"Bicep Curls",type:"weighted",sets:3,baseReps:10},{name:"Face Pulls",type:"weighted",sets:3,baseReps:12},{name:"Burpees",type:"reps",sets:3,baseReps:10},{name:"Side Plank",type:"timed",sets:2,baseTime:25}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunches",type:"reps",sets:3,baseReps:15},{name:"Leg Raises",type:"reps",sets:3,baseReps:12},{name:"Russian Twists",type:"reps",sets:3,baseReps:20},{name:"Bicycle Crunches",type:"reps",sets:3,baseReps:20},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20},{name:"Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10},{name:"Bird Dog",type:"reps",sets:3,baseReps:10},{name:"Side Plank",type:"timed",sets:2,baseTime:20},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20},{name:"Hollow Hold",type:"timed",sets:3,baseTime:20},{name:"Plank Shoulder Taps",type:"reps",sets:3,baseReps:12}]},{name:"Day 3",label:"Power Core",exercises:[{name:"V-Ups",type:"reps",sets:3,baseReps:10},{name:"Toe Touches",type:"reps",sets:3,baseReps:15},{name:"Woodchops",type:"weighted",sets:3,baseReps:12},{name:"Burpees",type:"reps",sets:3,baseReps:10},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20},{name:"Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12},{name:"Ab Wheel Rollout",type:"reps",sets:3,baseReps:8},{name:"Hollow Hold",type:"timed",sets:3,baseTime:25},{name:"Leg Raises",type:"reps",sets:3,baseReps:12},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twists",type:"reps",sets:3,baseReps:20},{name:"Woodchops",type:"weighted",sets:3,baseReps:12},{name:"Bicycle Crunches",type:"reps",sets:3,baseReps:20},{name:"Side Plank",type:"timed",sets:2,baseTime:25},{name:"Plank Shoulder Taps",type:"reps",sets:3,baseReps:15},{name:"V-Ups",type:"reps",sets:3,baseReps:10}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunches",type:"reps",sets:4,baseReps:15},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20},{name:"Toe Touches",type:"reps",sets:3,baseReps:15},{name:"Burpees",type:"reps",sets:3,baseReps:10},{name:"Bird Dog",type:"reps",sets:3,baseReps:12},{name:"Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank"},{name:"Ab Wheel Rollout",type:"reps",sets:4,baseReps:8},{name:"Leg Raises",type:"reps",sets:4,baseReps:12},{name:"Woodchops",type:"weighted",sets:3,baseReps:12},{name:"Dead Bug",type:"reps",sets:3,baseReps:12},{name:"Hollow Hold",type:"timed",sets:3,baseTime:25}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunches",type:"reps",sets:4,baseReps:15},{name:"Russian Twists",type:"reps",sets:4,baseReps:20},{name:"Bicycle Crunches",type:"reps",sets:3,baseReps:20},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:25},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:25},{name:"Side Plank",type:"timed",sets:2,baseTime:25}]},{name:"Day 3",label:"Power",exercises:[{name:"V-Ups",type:"reps",sets:4,baseReps:10},{name:"Toe Touches",type:"reps",sets:3,baseReps:15},{name:"Burpees",type:"reps",sets:3,baseReps:12},{name:"Plank Shoulder Taps",type:"reps",sets:3,baseReps:15},{name:"Bird Dog",type:"reps",sets:3,baseReps:12},{name:"Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"DB Bench Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress"},{name:"DB Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress"},{name:"Incline DB Press",type:"weighted",sets:3,baseReps:10},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12},{name:"Diamond Push Ups",type:"reps",sets:3,baseReps:10},{name:"Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank"}]},{name:"Day 2",label:"Pull",exercises:[{name:"DB Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow"},{name:"Lat Pulldown",type:"weighted",sets:4,baseReps:10,pbKey:"latPulldown"},{name:"Face Pulls",type:"weighted",sets:3,baseReps:12},{name:"Bicep Curls",type:"weighted",sets:3,baseReps:12},{name:"Hammer Curls",type:"weighted",sets:3,baseReps:10},{name:"Dead Hang",type:"timed",sets:3,baseTime:20}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Arnold Press",type:"weighted",sets:3,baseReps:10},{name:"Reverse Flys",type:"weighted",sets:3,baseReps:12},{name:"DB Lateral Raises",type:"weighted",sets:3,baseReps:12},{name:"Push Ups",type:"reps",sets:3,baseReps:15},{name:"Burpees",type:"reps",sets:3,baseReps:10},{name:"Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Goblet Squat",type:"weighted",sets:4,baseReps:10,pbKey:"squat"},{name:"Walking Lunges",type:"weighted",sets:3,baseReps:12},{name:"Step Ups",type:"weighted",sets:3,baseReps:10},{name:"Leg Extension",type:"weighted",sets:3,baseReps:12},{name:"Box Jumps",type:"reps",sets:3,baseReps:10},{name:"Wall Sit",type:"timed",sets:3,baseTime:30}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Deadlift",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift"},{name:"Romanian Deadlift",type:"weighted",sets:3,baseReps:10},{name:"Hip Thrust",type:"weighted",sets:3,baseReps:12},{name:"Leg Curl",type:"weighted",sets:3,baseReps:12},{name:"Jump Squats",type:"reps",sets:3,baseReps:10},{name:"Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Bulgarian Split Squat",type:"weighted",sets:3,baseReps:10},{name:"Sumo Squat",type:"weighted",sets:3,baseReps:12},{name:"Calf Raises",type:"weighted",sets:3,baseReps:15},{name:"Glute Bridge",type:"reps",sets:3,baseReps:15},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20},{name:"Side Plank",type:"timed",sets:2,baseTime:25}]}]}];function vf(s,e,t){const a=s.baseReps?s.baseReps+(e-1)*(t.repProg||0):void 0,i=s.baseTime?s.baseTime+(e-1)*(t.timeProg||0):void 0;return{sets:s.sets,reps:a,time:i}}const u_={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function F3(){const{currentUser:s,isClient:e,clientData:t,loading:a}=lr(),{isDark:i,toggleTheme:c}=go(),u=Os(),[f,m]=I.useState("loading"),[b,T]=I.useState(null),[E,C]=I.useState(null),[L,P]=I.useState(1),[V,F]=I.useState(0),[K,G]=I.useState(0),[se,Y]=I.useState(0),[fe,je]=I.useState([]),[q,B]=I.useState(""),[H,Z]=I.useState(""),[$,ee]=I.useState(!1),[O,ke]=I.useState(0),Ie=I.useRef(null),[te,ve]=I.useState({}),[Le,De]=I.useState(null),Je=I.useCallback((Ee,Ue="info")=>{De({message:Ee,type:Ue}),setTimeout(()=>De(null),4e3)},[]),Q=I.useRef(null),ue=()=>(Q.current||(Q.current=new(window.AudioContext||window.webkitAudioContext)),Q.current),ze=()=>{try{const Ee=ue(),Ue=Ee.createOscillator(),X=Ee.createGain();Ue.connect(X),X.connect(Ee.destination),Ue.frequency.value=1200,X.gain.value=.4,Ue.start(Ee.currentTime),Ue.stop(Ee.currentTime+.3)}catch{}};I.useEffect(()=>{!a&&(!s||!e)&&u("/")},[s,e,a,u]),I.useEffect(()=>{if(!t)return;(async()=>{try{const Ue=It(nt,"clientProgrammes",t.id),X=await _i(Ue);X.exists()?(C(X.data()),m("dashboard")):m("browse")}catch(Ue){console.error("Error loading programme:",Ue),m("browse")}})()},[t]),I.useEffect(()=>{if(!$||O<=0){$&&O<=0&&(ee(!1),ze());return}return Ie.current=setTimeout(()=>ke(Ee=>Ee-1),1e3),()=>clearTimeout(Ie.current)},[$,O]);const Oe=async Ee=>{if(t)try{await Pa(It(nt,"clientProgrammes",t.id),Ee),C(Ee)}catch(Ue){console.error("Error saving programme:",Ue),Je("Failed to save. Check Firestore rules for clientProgrammes.","error")}},de=async Ee=>{const Ue={templateId:Ee.id,startDate:vt.now(),completedSessions:{}};await Oe(Ue),m("dashboard")},Be=async()=>{if(t)try{await xa(It(nt,"clientProgrammes",t.id)),C(null),m("browse")}catch(Ee){console.error("Error quitting programme:",Ee)}},le=()=>E?c_.find(Ee=>Ee.id===E.templateId):null,ge=()=>{if(!E)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Ee=E.completedSessions||{},Ue=Object.keys(Ee).length,X=le();if(!X)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Ce=X.duration*X.daysPerWeek,Ke=Math.min(Math.floor(Ue/X.daysPerWeek)+1,X.duration),$e=Ue-(Ke-1)*X.daysPerWeek;for(let Ve=1;Ve<=X.duration;Ve++)for(let it=0;it<X.daysPerWeek;it++){const xt=`w${Ve}d${it}`;if(!Ee[xt])return{currentWeek:Ve,completedThisWeek:$e,nextDay:it,nextWeek:Ve,totalCompleted:Ue,totalSessions:Ce}}return{currentWeek:X.duration,completedThisWeek:X.daysPerWeek,nextDay:-1,totalCompleted:Ue,totalSessions:Ce,complete:!0}},be=(Ee,Ue)=>{const X=le();if(!X)return;P(Ee),F(Ue),G(0),Y(0),je([]),B(""),Z(""),ee(!1),ke(0);const Ke=X.days[Ue].exercises.map($e=>{const Ve=vf($e,Ee,X);return{name:$e.name,type:$e.type,pbKey:$e.pbKey,targetSets:Ve.sets,targetReps:Ve.reps,targetTime:Ve.time,sets:[]}});je(Ke),m("session")},st=async()=>{le();const Ee=fe[K];if(!Ee)return;let Ue={};if(Ee.type==="weighted"){const Ke=parseFloat(q)||0,$e=parseInt(H)||0;if($e===0){Je("Enter your reps","error");return}Ue={weight:Ke,reps:$e}}else if(Ee.type==="reps"){const Ke=parseInt(H)||0;if(Ke===0){Je("Enter your reps","error");return}Ue={reps:Ke}}else if(Ee.type==="timed"){const Ke=Ee.targetTime-O;Ue={time:Math.max(Ke,1)}}const X=[...fe];X[K]={...Ee,sets:[...Ee.sets,Ue]},je(X),Ee.type==="weighted"&&Ee.pbKey&&Ue.weight>0&&await dt(Ee.pbKey,Ue.weight,Ue.reps);const Ce=Ee.sets.length+1;Ce<Ee.targetSets?(Y(Ce),B(Ue.weight?String(Ue.weight):""),Z(""),ee(!1),ke(0)):K+1<fe.length?(G(K+1),Y(0),B(""),Z(""),ee(!1),ke(0)):await Te(X)},Te=async Ee=>{if(!E||!t)return;const Ue=`w${L}d${V}`,X={...E.completedSessions,[Ue]:{completedAt:new Date().toISOString(),exercises:Ee.map(Ke=>({name:Ke.name,type:Ke.type,sets:Ke.sets}))}},Ce={...E,completedSessions:X};await Oe(Ce);try{const Ke=le();await fi(Ft(nt,"workoutLogs"),{clientId:s.uid,type:"programme",programmeId:Ke?.id,programmeName:Ke?.name,week:L,day:V+1,exerciseCount:Ee.length,duration:Math.round(Ee.reduce(($e,Ve)=>$e+Ve.sets.length*1.5,0)),completedAt:vt.now()})}catch(Ke){console.error("Error saving workout log:",Ke)}m("sessionComplete")},dt=async(Ee,Ue,X)=>{if(t)try{const Ce=new Date,Ke=`${Ce.getFullYear()}-${String(Ce.getMonth()+1).padStart(2,"0")}`,$e=`${t.id}_${Ke}`,Ve=await _i(It(nt,"personalBests",$e)),it=Ve.exists()?Ve.data():null,xt=it?.benchmarks||{},rt=xt[Ee];let tn=!1;if(!rt)tn=!0;else{if(Ee==="plank")return;(Ue>(rt.weight||0)||Ue===(rt.weight||0)&&X>(rt.reps||0))&&(tn=!0)}if(tn){const vn={...xt,[Ee]:{weight:Ue,reps:X}};await Pa(It(nt,"personalBests",$e),{clientId:t.id,month:Ke,benchmarks:vn,bodyMetrics:it?.bodyMetrics||{},createdAt:it?.createdAt||vt.now(),updatedAt:vt.now()}),Je(`New PB! ${Ue}kg  ${X} reps`,"success"),ze()}}catch(Ce){console.error("Error checking PB:",Ce)}},Tt=Le&&o.jsxs("div",{className:`toast-notification ${Le.type}`,children:[Le.type==="success"&&o.jsx("span",{children:" "}),Le.message]}),Nt=Ee=>o.jsxs("header",{className:"cb-header",children:[o.jsxs("div",{className:"cb-header-left",children:[o.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),o.jsx("span",{className:"cb-header-title",children:Ee})]}),o.jsx("div",{className:"cb-header-right",children:o.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:i?o.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]});if(a||f==="loading")return o.jsx("div",{className:"cb-loading",children:o.jsx("div",{className:"cb-loading-spinner"})});if(f==="browse")return o.jsxs("div",{className:"pg-page","data-theme":i?"dark":"light",children:[Nt("Programmes"),o.jsxs("main",{className:"pg-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u("/client/core-buddy/workouts"),children:" Back"}),o.jsx("p",{className:"pg-browse-intro",children:"Choose a programme and start your journey"}),o.jsx("div",{className:"pg-browse-grid",children:c_.map((Ee,Ue)=>o.jsxs("button",{className:"pg-browse-card",onClick:()=>{T(Ee),m("overview")},style:{animationDelay:`${Ue*.06}s`},children:[o.jsxs("div",{className:"pg-browse-card-top",children:[o.jsx("svg",{className:"pg-browse-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:u_[Ee.focus]})}),o.jsxs("span",{className:"pg-browse-duration",children:[Ee.duration," WK"]})]}),o.jsx("h3",{className:"pg-browse-name",children:Ee.name}),o.jsx("span",{className:"pg-browse-level",children:Ee.level}),o.jsx("p",{className:"pg-browse-desc",children:Ee.description}),o.jsxs("div",{className:"pg-browse-meta",children:[o.jsxs("span",{children:[Ee.daysPerWeek," per week"]}),o.jsxs("span",{children:[Ee.days[0].exercises.length," exercises"]})]})]},Ee.id))})]}),Tt]});if(f==="overview"&&b){const Ee=b;return o.jsxs("div",{className:"pg-page","data-theme":i?"dark":"light",children:[Nt(Ee.name),o.jsxs("main",{className:"pg-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>m("browse"),children:" Back"}),o.jsxs("div",{className:"pg-overview-hero",children:[o.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:u_[Ee.focus]})}),o.jsx("h2",{className:"pg-overview-name",children:Ee.name}),o.jsx("p",{className:"pg-overview-desc",children:Ee.description}),o.jsxs("div",{className:"pg-overview-stats",children:[o.jsxs("div",{className:"pg-ov-stat",children:[o.jsx("span",{className:"pg-ov-stat-num",children:Ee.duration}),o.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),o.jsxs("div",{className:"pg-ov-stat",children:[o.jsx("span",{className:"pg-ov-stat-num",children:Ee.daysPerWeek}),o.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),o.jsxs("div",{className:"pg-ov-stat",children:[o.jsx("span",{className:"pg-ov-stat-num",children:Ee.duration*Ee.daysPerWeek}),o.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),o.jsx("div",{className:"pg-overview-days",children:Ee.days.map((Ue,X)=>o.jsxs("div",{className:"pg-day-card",children:[o.jsxs("div",{className:"pg-day-header",children:[o.jsx("span",{className:"pg-day-name",children:Ue.name}),o.jsx("span",{className:"pg-day-label",children:Ue.label})]}),o.jsx("div",{className:"pg-day-exercises",children:Ue.exercises.map((Ce,Ke)=>{const $e=vf(Ce,1,Ee);return o.jsxs("div",{className:"pg-day-ex",children:[o.jsx("span",{className:"pg-day-ex-name",children:Ce.name}),o.jsx("span",{className:"pg-day-ex-target",children:Ce.type==="timed"?`${$e.sets}${$e.time}s`:`${$e.sets}${$e.reps}`}),o.jsx("span",{className:`pg-day-ex-badge pg-badge-${Ce.type}`,children:Ce.type==="weighted"?"WT":Ce.type==="timed"?"TMR":"BW"})]},Ke)})})]},X))}),o.jsxs("div",{className:"pg-overview-note",children:[o.jsx("strong",{children:"Progressive Overload:"})," +",Ee.repProg," reps/week",Ee.timeProg?`, +${Ee.timeProg}s/week for timed`:""]}),o.jsx("button",{className:"pg-start-btn",onClick:()=>de(Ee),children:"Start Programme"})]}),Tt]})}if(f==="dashboard"){const Ee=le();if(!Ee)return m("browse"),null;const Ue=ge(),X=E?.completedSessions||{},Ce=Ue.totalSessions?Math.round(Ue.totalCompleted/Ue.totalSessions*100):0,Ke=Math.round(Ue.totalCompleted/(Ue.totalSessions||1)*Eg);return o.jsxs("div",{className:"pg-page","data-theme":i?"dark":"light",children:[Nt("Programme"),o.jsxs("main",{className:"pg-main",children:[o.jsx("button",{className:"nut-back-btn",onClick:()=>u("/client/core-buddy/workouts"),children:" Back"}),o.jsxs("div",{className:"pg-dash-hero",children:[o.jsxs("div",{className:"pg-dash-ring-wrap",children:[o.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:[...Array(Eg)].map(($e,Ve)=>{const it=(Ve*6-90)*(Math.PI/180),xt=100+78*Math.cos(it),rt=100+78*Math.sin(it),tn=100+94*Math.cos(it),vn=100+94*Math.sin(it);return o.jsx("line",{x1:xt,y1:rt,x2:tn,y2:vn,className:Ve<Ke?"pg-tick-filled":"pg-tick-empty",strokeWidth:Ve%5===0?"3":"2"},Ve)})}),o.jsx("img",{src:"/Logo.PNG",alt:"",className:"pg-dash-ring-logo"})]}),o.jsx("h2",{className:"pg-dash-name",children:Ee.name}),o.jsxs("div",{className:"pg-dash-progress-text",children:[o.jsxs("span",{className:"pg-dash-pct",children:[Ce,"%"]}),o.jsxs("span",{className:"pg-dash-week",children:["Week ",Ue.currentWeek," of ",Ee.duration]})]})]}),o.jsx("div",{className:"pg-weeks",children:Array.from({length:Ee.duration},($e,Ve)=>{const it=Ve+1;return o.jsxs("div",{className:`pg-week-row${it===Ue.currentWeek?" pg-week-current":""}`,children:[o.jsxs("span",{className:"pg-week-label",children:["W",it]}),o.jsx("div",{className:"pg-week-days",children:Ee.days.map((xt,rt)=>{const tn=`w${it}d${rt}`,vn=!!X[tn],Fn=!Ue.complete&&it===Ue.nextWeek&&rt===Ue.nextDay;return o.jsx("button",{className:`pg-day-dot${vn?" done":""}${Fn?" next":""}`,disabled:vn,onClick:()=>{Fn&&be(it,rt)},children:vn?o.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:o.jsx("path",{d:"M20 6L9 17l-5-5"})}):o.jsx("span",{children:xt.name.replace("Day ","")})},rt)})})]},Ve)})}),!Ue.complete&&Ue.nextDay>=0&&o.jsxs("div",{className:"pg-next-session",children:[o.jsx("h3",{children:"Next Session"}),o.jsxs("p",{className:"pg-next-info",children:["Week ",Ue.nextWeek,"  ",Ee.days[Ue.nextDay].name,": ",Ee.days[Ue.nextDay].label]}),o.jsx("div",{className:"pg-next-exercises",children:Ee.days[Ue.nextDay].exercises.map(($e,Ve)=>{const it=vf($e,Ue.nextWeek,Ee);return o.jsxs("div",{className:"pg-next-ex",children:[o.jsx("span",{className:"pg-next-ex-name",children:$e.name}),o.jsx("span",{className:"pg-next-ex-target",children:$e.type==="timed"?`${it.sets}${it.time}s`:`${it.sets}${it.reps}`})]},Ve)})}),o.jsx("button",{className:"pg-start-btn",onClick:()=>be(Ue.nextWeek,Ue.nextDay),children:"Start Session"})]}),Ue.complete&&o.jsxs("div",{className:"pg-complete-msg",children:[o.jsx("h3",{children:"Programme Complete! "}),o.jsxs("p",{children:["You finished all ",Ue.totalSessions," sessions."]}),o.jsx("button",{className:"pg-start-btn",onClick:Be,children:"Choose New Programme"})]}),o.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&Be()},children:"Quit Programme"})]}),Tt]})}if(f==="session"){const Ee=le();if(!Ee)return null;const Ue=Ee.days[V],X=Ue.exercises[K],Ce=vf(X,L,Ee),Ke=fe[K],$e=Ke?.sets?.length||0,Ve=Ue.exercises.length,it=(K+$e/Ce.sets)/Ve;return X.type==="timed"&&O===0&&!$&&$e===se&&setTimeout(()=>ke(Ce.time),0),o.jsxs("div",{className:"pg-page pg-page-session","data-theme":i?"dark":"light",children:[o.jsx("div",{className:"pg-session-progress",children:o.jsx("div",{className:"pg-session-progress-fill",style:{width:`${it*100}%`}})}),o.jsxs("div",{className:"pg-session-header",children:[o.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&m("dashboard")},children:o.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),o.jsxs("div",{className:"pg-session-title",children:[o.jsxs("span",{className:"pg-session-counter",children:[K+1," / ",Ve]}),o.jsxs("span",{className:"pg-session-week",children:["Week ",L,"  ",Ue.name]})]})]}),o.jsx("div",{className:"pg-spotify",children:o.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),o.jsxs("div",{className:"pg-exercise-card",children:[o.jsx("h2",{className:"pg-ex-name",children:X.name}),o.jsx("span",{className:`pg-ex-type-badge pg-badge-${X.type}`,children:X.type==="weighted"?"Weight + Reps":X.type==="timed"?"Timed":"Reps Only"}),o.jsxs("div",{className:"pg-ex-set-info",children:[o.jsxs("span",{className:"pg-ex-set-num",children:["Set ",$e+1," of ",Ce.sets]}),o.jsxs("span",{className:"pg-ex-target",children:["Target: ",X.type==="timed"?`${Ce.time}s hold`:`${Ce.reps} reps`]})]}),X.type==="weighted"&&o.jsxs("div",{className:"pg-input-area",children:[o.jsxs("div",{className:"pg-input-group",children:[o.jsx("label",{children:"Weight (kg)"}),o.jsx("input",{type:"number",inputMode:"decimal",value:q,onChange:xt=>B(xt.target.value),placeholder:"0",className:"pg-input"})]}),o.jsxs("div",{className:"pg-input-group",children:[o.jsx("label",{children:"Reps"}),o.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:xt=>Z(xt.target.value),placeholder:String(Ce.reps),className:"pg-input"})]})]}),X.type==="reps"&&o.jsx("div",{className:"pg-input-area",children:o.jsxs("div",{className:"pg-input-group pg-input-single",children:[o.jsx("label",{children:"Reps"}),o.jsx("input",{type:"number",inputMode:"numeric",value:H,onChange:xt=>Z(xt.target.value),placeholder:String(Ce.reps),className:"pg-input"})]})}),X.type==="timed"&&o.jsxs("div",{className:"pg-timer-area",children:[o.jsx("div",{className:"pg-timer-display",children:o.jsxs("span",{className:"pg-timer-value",children:[O,"s"]})}),$?o.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>ee(!1),children:"Stop"}):o.jsx("button",{className:"pg-timer-btn",onClick:()=>{O===0&&ke(Ce.time),ee(!0)},children:O<Ce.time&&O>0?"Resume":"Start Timer"})]}),o.jsx("button",{className:"pg-log-set-btn",onClick:st,disabled:X.type==="timed"&&$,children:$e+1<Ce.sets?"Log Set":K+1<Ve?"Log Set  Next Exercise":"Log Set  Complete"}),Ke?.sets?.length>0&&o.jsx("div",{className:"pg-completed-sets",children:Ke.sets.map((xt,rt)=>o.jsxs("div",{className:"pg-completed-set",children:[o.jsx("span",{className:"pg-completed-set-check",children:""}),o.jsxs("span",{children:["Set ",rt+1,": ",xt.weight!==void 0?`${xt.weight}kg  ${xt.reps}`:xt.time!==void 0?`${xt.time}s`:`${xt.reps} reps`]})]},rt))})]}),Tt]})}if(f==="sessionComplete"){const Ue=le()?.days[V],X=fe.reduce((Ke,$e)=>Ke+$e.sets.length,0),Ce=fe.reduce((Ke,$e)=>Ke+$e.sets.reduce((Ve,it)=>Ve+(it.weight||0)*(it.reps||0),0),0);return o.jsxs("div",{className:"pg-page pg-page-center","data-theme":i?"dark":"light",children:[o.jsxs("div",{className:"pg-session-done",children:[o.jsxs("div",{className:"pg-done-ring",children:[o.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:[...Array(Eg)].map((Ke,$e)=>{const Ve=($e*6-90)*(Math.PI/180),it=100+78*Math.cos(Ve),xt=100+78*Math.sin(Ve),rt=100+94*Math.cos(Ve),tn=100+94*Math.sin(Ve);return o.jsx("line",{x1:it,y1:xt,x2:rt,y2:tn,className:"pg-tick-complete",strokeWidth:$e%5===0?"3.5":"2",style:{animationDelay:`${$e*.02}s`}},$e)})}),o.jsx("div",{className:"pg-done-center",children:o.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:o.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),o.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),o.jsxs("p",{className:"pg-done-subtitle",children:["Week ",L,"  ",Ue?.name,": ",Ue?.label]}),o.jsxs("div",{className:"pg-done-stats",children:[o.jsxs("div",{className:"pg-done-stat",children:[o.jsx("span",{className:"pg-done-stat-num",children:fe.length}),o.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),o.jsxs("div",{className:"pg-done-stat",children:[o.jsx("span",{className:"pg-done-stat-num",children:X}),o.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),Ce>0&&o.jsxs("div",{className:"pg-done-stat",children:[o.jsx("span",{className:"pg-done-stat-num",children:Math.round(Ce)}),o.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),o.jsx("button",{className:"pg-start-btn",onClick:()=>m("dashboard"),children:"Back to Programme"})]}),Tt]})}return null}function q3(){const{pathname:s}=fo();return I.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function H3(){const s=Os();return I.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function $3(){return o.jsx(YM,{children:o.jsx(GM,{children:o.jsxs(pN,{basename:"/login",children:[o.jsx(q3,{}),o.jsx(H3,{}),o.jsxs($E,{children:[o.jsx(Us,{path:"/",element:o.jsx(KM,{})}),o.jsx(Us,{path:"/dashboard",element:o.jsx(d3,{})}),o.jsx(Us,{path:"/add-client",element:o.jsx(f3,{})}),o.jsx(Us,{path:"/client",element:o.jsx(b3,{})}),o.jsx(Us,{path:"/client/forms",element:o.jsx(x3,{})}),o.jsx(Us,{path:"/client/tools",element:o.jsx(_3,{})}),o.jsx(Us,{path:"/client/tools/macros",element:o.jsx(w3,{})}),o.jsx(Us,{path:"/client/tools/snacks",element:o.jsx(S3,{})}),o.jsx(Us,{path:"/client/tools/motivation",element:o.jsx(T3,{})}),o.jsx(Us,{path:"/client/personal-bests",element:o.jsx(j3,{})}),o.jsx(Us,{path:"/client/circuit",element:o.jsx(C3,{})}),o.jsx(Us,{path:"/client/circuit/booking",element:o.jsx(D3,{})}),o.jsx(Us,{path:"/client/core-buddy",element:o.jsx(M3,{})}),o.jsx(Us,{path:"/client/core-buddy/nutrition",element:o.jsx(L3,{})}),o.jsx(Us,{path:"/client/core-buddy/workouts",element:o.jsx(z3,{})}),o.jsx(Us,{path:"/client/core-buddy/programmes",element:o.jsx(F3,{})}),o.jsx(Us,{path:"*",element:o.jsx(qE,{to:"/",replace:!0})})]})]})})})}GT.createRoot(document.getElementById("root")).render(o.jsx(I.StrictMode,{children:o.jsx($3,{})}));
